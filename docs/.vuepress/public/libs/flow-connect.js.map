{"version":3,"file":"flow-connect.js","mappings":"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","sources":["webpack://flow-connect/webpack/universalModuleDefinition","webpack://flow-connect/webpack/runtime/chunk loaded","webpack://flow-connect/./src/common/enums.ts","webpack://flow-connect/./src/common/index.ts","webpack://flow-connect/./src/core/color.ts","webpack://flow-connect/./src/core/connector.ts","webpack://flow-connect/./src/core/flow.ts","webpack://flow-connect/./src/core/graph.ts","webpack://flow-connect/./src/core/group.ts","webpack://flow-connect/./src/core/hooks.ts","webpack://flow-connect/./src/core/index.ts","webpack://flow-connect/./src/core/node.ts","webpack://flow-connect/./src/core/subflow-node.ts","webpack://flow-connect/./src/core/terminal.ts","webpack://flow-connect/./src/core/tunnel-node.ts","webpack://flow-connect/./src/core/vector.ts","webpack://flow-connect/./src/flow-connect.ts","webpack://flow-connect/./src/resource/audio-worklets.ts","webpack://flow-connect/./src/resource/constants.ts","webpack://flow-connect/./src/resource/icons.ts","webpack://flow-connect/./src/ui/2d-slider.ts","webpack://flow-connect/./src/ui/button.ts","webpack://flow-connect/./src/ui/container.ts","webpack://flow-connect/./src/ui/dial.ts","webpack://flow-connect/./src/ui/display.ts","webpack://flow-connect/./src/ui/envelope.ts","webpack://flow-connect/./src/ui/horizontal-layout.ts","webpack://flow-connect/./src/ui/image.ts","webpack://flow-connect/./src/ui/index.ts","webpack://flow-connect/./src/ui/input.ts","webpack://flow-connect/./src/ui/label.ts","webpack://flow-connect/./src/ui/radio-group.ts","webpack://flow-connect/./src/ui/select.ts","webpack://flow-connect/./src/ui/slider.ts","webpack://flow-connect/./src/ui/source.ts","webpack://flow-connect/./src/ui/stack.ts","webpack://flow-connect/./src/ui/toggle.ts","webpack://flow-connect/./src/ui/ui-node.ts","webpack://flow-connect/./src/ui/v-slider.ts","webpack://flow-connect/./src/utils/avl-tree.ts","webpack://flow-connect/./src/utils/bidirectional-map.ts","webpack://flow-connect/./src/utils/evaluator.ts","webpack://flow-connect/./src/utils/index.ts","webpack://flow-connect/./src/utils/lexer.ts","webpack://flow-connect/./src/utils/linked-list.ts","webpack://flow-connect/./src/utils/logger.ts","webpack://flow-connect/./src/utils/parser.ts","webpack://flow-connect/./src/utils/utils.ts","webpack://flow-connect/webpack/bootstrap","webpack://flow-connect/webpack/runtime/hasOwnProperty shorthand","webpack://flow-connect/webpack/runtime/jsonp chunk loading","webpack://flow-connect/webpack/startup"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(self, function() {\nreturn ","var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","/** @hidden */\n/** To distinguish whether two rectangles are inside/intersecting/disconnected */\nexport enum ViewPort {\n  INSIDE = 'INSIDE',\n  OUTSIDE = 'OUTSIDE',\n  INTERSECT = 'INTERSECT'\n}\n\n/** @hidden */\n/** Levels of Detail, affects rendering while zooming in/out */\nexport enum LOD {\n  LOD0,\n  LOD1,\n  LOD2\n}\n\nexport enum Align {\n  Left,\n  Center,\n  Right\n}\n\nexport enum GlobalEventType {\n  Emitter,\n  Receiver\n}\n","export * from './enums';\nexport * from './interfaces';\n","import { clamp, getRandom, lerp, normalize } from \"../utils/utils\";\nimport { Serializable } from \"../common/interfaces\";\nimport { Log } from \"../utils/logger\";\n\nexport class Color implements Serializable {\n  hexValue: string;\n  rgbaValue: Uint8ClampedArray | number[];\n  rgbaString: string;\n  rgbaCSSString: string;\n\n  constructor(rgba: Uint8ClampedArray | number[]) {\n    this.rgbaValue = rgba;\n    this.hexValue = Color.rgbaToHex(this.rgbaValue);\n    this.rgbaString = Color.rgbaToString(this.rgbaValue);\n    this.rgbaCSSString = Color.rgbaToCSSString(this.rgbaValue);\n  }\n  isEqual(color: Color) {\n    return color.rgbaValue[0] === this.rgbaValue[0]\n      && color.rgbaValue[1] === this.rgbaValue[1]\n      && color.rgbaValue[2] === this.rgbaValue[2]\n      && color.rgbaValue[3] === this.rgbaValue[3];\n  }\n\n  static Random(): Color {\n    return new Color(new Uint8ClampedArray(\n      [Math.floor(getRandom(0, 255)), Math.floor(getRandom(0, 255)), Math.floor(getRandom(0, 255)), 255]\n    ));\n  }\n  static hexToRGBA(hex: string): Uint8ClampedArray {\n    return new Uint8ClampedArray([parseInt(hex.slice(1, 3), 16), parseInt(hex.slice(3, 5), 16), parseInt(hex.slice(5, 7), 16), parseInt(hex.slice(7, 9), 16)]);\n  }\n  private static _componentToHex(c: number) {\n    let hex = c.toString(16);\n    return hex.length === 1 ? '0' + hex : hex;\n  }\n  static rgbaToHex(rgba: number[] | Uint8ClampedArray): string {\n    return \"#\" + Color._componentToHex(rgba[0]) + Color._componentToHex(rgba[1]) + Color._componentToHex(rgba[2]) + Color._componentToHex(rgba[3]);\n  }\n  static rgbaToString(rgba: Uint8ClampedArray | number[]): string {\n    return `${rgba[0]}:${rgba[1]}:${rgba[2]}:${rgba[3]}`;\n  }\n  static rgbaToCSSString(rgba: Uint8ClampedArray | number[]): string {\n    return `rgba(${rgba[0]}, ${rgba[1]}, ${rgba[2]}, ${normalize(rgba[3], 0, 255).toFixed(3)})`;\n  }\n\n  /** A linear interpolator for given array of colors */\n  static scale(colors: Color[] | Uint8ClampedArray | string[] | number[][]): (t: number) => string {\n    if (!Array.isArray(colors)) {\n      Log.error('An array is expected to create a color scale');\n      return;\n    }\n    if (colors.length <= 1) {\n      Log.error('At least two colors are required to create a color scale');\n      return;\n    }\n\n    let colorObjs: Color[] = [];\n    if (colors[0] instanceof Uint8ClampedArray || (Array.isArray(colors[0]) && typeof colors[0][0] === 'number')) {\n      colors.forEach(color => colorObjs.push(new Color(color as any)));\n    } else if (typeof colors[0] === 'string') {\n      colors.forEach(color => colorObjs.push(new Color(Color.hexToRGBA(color as any))));\n    } else {\n      colorObjs = colors as any;\n    }\n\n    return (t) => {\n      t = clamp(t, 0, 1);\n\n      let index = (colorObjs.length - 1) * t;\n      let start = Math.floor(index);\n      let end = Math.ceil(index);\n\n      t = index - start;\n\n      let startColor = colorObjs[start], endColor = colorObjs[end];\n\n      let result = startColor.rgbaValue.map((component, i) => {\n        component = lerp(component, endColor.rgbaValue[i], t);\n        if (i < 3) component = Math.round(component);\n        return component;\n      });\n\n      return 'rgba(' + result + ')';\n    }\n  }\n\n  serialize(): SerializedColor {\n    return {\n      rgba: [this.rgbaValue[0], this.rgbaValue[1], this.rgbaValue[2], this.rgbaValue[3]]\n    }\n  }\n  static deSerialize(data: SerializedColor) {\n    return new Color(data.rgba);\n  }\n}\n\nexport interface SerializedColor {\n  rgba: number[]\n}\n","import { Vector2 } from \"./vector\";\nimport { getNewUUID } from \"../utils/utils\";\nimport { Flow, FlowState } from \"./flow\";\nimport { Terminal } from './terminal';\nimport { Serializable } from \"../common/interfaces\";\nimport { Node, NodeState } from \"./node\";\n\nexport class Connector implements Serializable {\n  start: Terminal;\n  end: Terminal;\n  startNode: Node;\n  endNode: Node;\n\n  /** @hidden */\n  _data: any;\n\n  get data(): any { return this._data; }\n  set data(data: any) {\n    this._data = data;\n    this.end && this.end.call('data', this.end, data);\n    if (this.flow.state !== FlowState.Stopped) {\n      this.flow.executionGraph.setDirty(this.endNode);\n    }\n  }\n\n  constructor(\n    public flow: Flow,\n    start: Terminal,\n    end: Terminal,\n    public floatingTip: Vector2,\n    public style: ConnectorStyle = {},\n    public id: string = getNewUUID(),\n    isDeserialization: boolean = false\n  ) {\n\n    this.style = { ...DefaultConnectorStyle(), ...style };\n    this.start = start;\n    this.end = end;\n    if (this.start) this.startNode = this.start.node;\n    if (this.end) this.endNode = this.end.node;\n    if (start && end) {\n      this.floatingTip = null;\n\n      this.start.connectors.push(this);\n      if (this.end.connectors.length > 0) {\n        this.end.connectors[0].removeConnection();\n        this.end.connectors[0] = this;\n      } else this.end.connectors.push(this);\n\n      if (!isDeserialization) this.flow.executionGraph.connect(this.startNode, this.endNode);\n      this.start.onConnect(this);\n      this.end.onConnect(this);\n    }\n  }\n\n  /** @hidden */\n  completeConnection(destination: Terminal) {\n    if (!this.start) {\n      this.start = destination;\n      this.startNode = this.start.node;\n    } else {\n      this.end = destination;\n      this.endNode = this.end.node;\n    }\n\n    if (!this.start.connectors.includes(this)) this.start.connectors.push(this);\n    this.end.connectors[0] = this;\n    this.floatingTip = null;\n\n    this.startNode.currHitTerminal && this.startNode.currHitTerminal.onExit(null, null);\n    this.startNode.currHitTerminal = null;\n    this.endNode.currHitTerminal && this.endNode.currHitTerminal.onExit(null, null);\n    this.endNode.currHitTerminal = null;\n\n    this.flow.executionGraph.connect(this.startNode, this.endNode);\n    this.start.onConnect(this);\n    this.end.onConnect(this);\n  }\n  /** @hidden */\n  removeConnection() {\n    if (this.start) {\n      this.start.connectors.includes(this) && this.start.connectors.splice(this.start.connectors.indexOf(this), 1);\n      if (this.startNode.currHitTerminal) {\n        this.startNode.currHitTerminal.onExit(null, null);\n        this.startNode.currHitTerminal = null;\n      }\n    }\n    if (this.end) {\n      this.end.connectors.includes(this) && this.end.connectors.splice(this.end.connectors.indexOf(this), 1);\n      if (this.endNode.currHitTerminal) {\n        this.endNode.currHitTerminal.onExit(null, null);\n        this.endNode.currHitTerminal = null;\n      }\n    }\n  }\n  /** @hidden */\n  setData(data: any) {\n    this._data = data;\n    this.end && this.end.call('data', this.end, data);\n  }\n  canConnect(destination: Terminal): boolean {\n    let source = !this.start ? this.end : this.start;\n\n    if (!destination) return false;\n    if (source === destination) return false;\n    if (source.node === destination.node) return false;\n    if (source.type === destination.type) return false;\n    if (!this.flow.rules[source.dataType].includes(destination.dataType)) return false;\n    if (!this.flow.executionGraph.canConnect(source.node, destination.node)) return false;\n    return true;\n  }\n\n  render() {\n    this.flow.flowConnect.context.save();\n    this._render();\n    this.flow.flowConnect.context.restore();\n\n    this.flow.flowConnect.offContext.save();\n    this._offRender();\n    this.flow.flowConnect.offContext.restore();\n  }\n  private _render() {\n    let ax, ay, dx, dy;\n    if (this.start) {\n      if (this.startNode.renderState.nodeState === NodeState.MAXIMIZED)\n        [ax, ay] = [this.start.position.x, this.start.position.y];\n      else\n        [ax, ay] = [this.startNode.position.x + this.startNode.width + this.startNode.style.terminalStripMargin + this.start.style.radius, this.startNode.position.y + this.startNode.style.titleHeight / 2];\n    } else\n      [ax, ay] = [this.floatingTip.x, this.floatingTip.y];\n\n    if (this.end) {\n      if (this.endNode.renderState.nodeState === NodeState.MAXIMIZED)\n        [dx, dy] = [this.end.position.x, this.end.position.y];\n      else\n        [dx, dy] = [this.endNode.position.x - this.endNode.style.terminalStripMargin - this.end.style.radius, this.endNode.position.y + this.endNode.style.titleHeight / 2];\n    } else\n      [dx, dy] = [this.floatingTip.x, this.floatingTip.y];\n\n    let offset = Vector2.Distance(ax, ay, dx, dy);\n    offset *= .2;\n\n    let [bx, by] = [ax + offset, ay];\n    let [cx, cy] = [dx - offset, dy];\n    let [midx, midy] = [(bx + cx) / 2, (by + cy) / 2];\n\n    let context = this.flow.flowConnect.context;\n    context.beginPath();\n    context.moveTo(ax, ay);\n    context.quadraticCurveTo(bx, by, midx, midy);\n    context.moveTo(midx, midy);\n    context.quadraticCurveTo(cx, cy, dx, dy);\n    context.strokeStyle = 'grey';\n    context.lineWidth = this.style.width + 2;\n    context.stroke();\n    context.beginPath();\n    context.moveTo(ax, ay);\n    context.quadraticCurveTo(bx, by, midx, midy);\n    context.moveTo(midx, midy);\n    context.quadraticCurveTo(cx, cy, dx, dy);\n    context.strokeStyle = this.style.color;\n    context.lineWidth = this.style.width;\n    context.stroke();\n  }\n  private _offRender() { /**/ }\n\n  serialize(): SerializedConnector {\n    return {\n      id: this.id,\n      startId: this.start.id,\n      endId: this.end.id,\n      startNodeId: this.startNode.id,\n      endNodeId: this.endNode.id,\n      style: this.style\n    }\n  }\n  static deSerialize(flow: Flow, start: Terminal, end: Terminal, data: SerializedConnector): Connector {\n    return new Connector(flow, start, end, null, data.style, data.id, true);\n  }\n}\n\nexport interface ConnectorStyle {\n  width?: number,\n  color?: string\n}\n\nexport interface SerializedConnector {\n  startNodeId: string,\n  endNodeId: string,\n  startId: string,\n  endId: string,\n  id: string,\n  style: ConnectorStyle\n}\n\n/** @hidden */\nlet DefaultConnectorStyle = () => {\n  return {\n    width: 5,\n    color: '#7fff00aa'\n  };\n};\n","import { FlowConnect } from \"../flow-connect\";\nimport { Vector2 } from \"./vector\";\nimport { Node, NodeStyle, SerializedNode } from \"./node\";\nimport { Hooks } from './hooks';\nimport { Group, SerializedGroup } from './group';\nimport { Connector, SerializedConnector } from './connector';\nimport { AVLTree } from \"../utils/avl-tree\";\nimport { Serializable, Rules } from '../common/interfaces';\nimport { SubFlowNode } from \"./subflow-node\";\nimport { TunnelNode, SerializedTunnelNode } from \"./tunnel-node\";\nimport { getNewUUID } from \"../utils/utils\";\nimport { Graph, SerializedGraph } from \"./graph\";\nimport { TerminalTypeColors, TerminalStyle } from \"./terminal\";\nimport { Log } from '../utils/logger';\n\n/** A Flow is a set of Nodes, Connectors and Groups, it can also contain SubFlowNodes thereby creating a tree of Flows.\n *  ![](media://example.png)\n */\nexport class Flow extends Hooks implements Serializable {\n  sortedNodes: AVLTree<Node>;\n  nodes: { [id: string]: Node };\n  groups: Group[];\n  connectors: { [id: string]: Connector };\n  inputs: TunnelNode[];\n  outputs: TunnelNode[];\n  get state(): FlowState { return this.executionGraph.state; }\n  globalEvents: Hooks = new Hooks();\n  parentFlow: Flow = null;\n\n  /** @hidden */\n  hitColorToNode: { [color: string]: Node };\n  /** @hidden */\n  hitColorToGroup: { [color: string]: Group };\n  /** @hidden */\n  listeners: { [eventKey: string]: number } = {};\n  /** @hidden */\n  executionGraph: Graph;\n\n  constructor(\n    public flowConnect: FlowConnect,\n    public name: string,\n    public rules: Rules,\n    public terminalTypeColors: TerminalTypeColors,\n    public id: string = getNewUUID()\n  ) {\n\n    super();\n    this.nodes = {};\n    this.groups = [];\n    this.connectors = {};\n    this.hitColorToNode = {};\n    this.hitColorToGroup = {};\n    this.sortedNodes = new AVLTree((a: Node, b: Node) => (a.zIndex - b.zIndex), (node: Node) => node.id);\n    this.inputs = [];\n    this.outputs = [];\n    this.executionGraph = new Graph();\n\n    this.registerListeners();\n\n    this.flowConnect.on('tick', () => {\n      if (this.state === FlowState.Running) this.call('tick', this);\n    });\n  }\n\n  private registerListeners() {\n    let id = this.flowConnect.on('transform', () => this.call('transform', this));\n    this.listeners['transform'] = id;\n  }\n  /** @hidden */\n  deregisterListeners() {\n    this.flowConnect.off('transform', this.listeners['transform']);\n    delete this.listeners['transform'];\n  }\n  /** @hidden */\n  existsInFlow(flow: Flow): boolean {\n    for (let node of Object.values(this.nodes)) {\n      if ((node as SubFlowNode).subFlow === flow) return true;\n      else if ((node as SubFlowNode).subFlow) {\n        return (node as SubFlowNode).subFlow.existsInFlow(flow);\n      }\n    }\n    return false;\n  }\n\n  addInput(name: string, dataType: string, position: Vector2): TunnelNode {\n    let flowInput = new TunnelNode(this, 'Input', position, 100, [], [{ name: name, dataType: dataType }]);\n    flowInput.on('process', () => {\n      flowInput.outputs[0].setData(flowInput.proxyTerminal.getData());\n    });\n\n    this.inputs.push(flowInput);\n    this.nodes[flowInput.id] = flowInput;\n    this.sortedNodes.add(flowInput);\n    this.executionGraph.add(flowInput);\n\n    this.call('add-input', this, flowInput);\n    return flowInput;\n  }\n  addOutput(name: string, dataType: string, position: Vector2): TunnelNode {\n    let flowOutput = new TunnelNode(this, 'Output', position, 100, [{ name: name, dataType: dataType }], []);\n\n    this.outputs.push(flowOutput);\n    this.nodes[flowOutput.id] = flowOutput;\n    this.sortedNodes.add(flowOutput);\n    this.executionGraph.add(flowOutput);\n\n    this.call('add-output', this, flowOutput);\n    return flowOutput;\n  }\n  addSubFlow(flow: Flow, position: Vector2): SubFlowNode {\n    if (flow.parentFlow) {\n      Log.error('Flow is already a sub-flow, a sub-flow cannot have multiple parent flows');\n      return null;\n    }\n    let subFlowNode = new SubFlowNode(this, flow, position, 150,\n      flow.inputs.map(inputNode => { return { name: inputNode.outputs[0].name, dataType: inputNode.outputs[0].dataType } }),\n      flow.outputs.map(outputNode => { return { name: outputNode.inputs[0].name, dataType: outputNode.inputs[0].dataType } }),\n      { name: flow.name }\n    );\n    this.nodes[subFlowNode.id] = subFlowNode;\n    this.sortedNodes.add(subFlowNode);\n    this.executionGraph.add(subFlowNode);\n    flow.parentFlow = this;\n\n    return subFlowNode;\n  }\n  createNode(name: string, position: Vector2, width: number, options?: NodeOptions): Node {\n    options = options ? { ...DefaultNodeOptions(), ...options } : DefaultNodeOptions();\n\n    let inTerminals: any[] = [], outTerminals: any[] = [];\n    if (typeof options.inputs !== 'undefined') inTerminals = options.inputs;\n    if (typeof options.outputs !== 'undefined') outTerminals = options.outputs;\n\n    return new Node(this, name, position, width, inTerminals, outTerminals, {\n      style: options.style,\n      terminalStyle: options.terminalStyle,\n      props: options.props\n    });\n  }\n  removeNode(nodeOrID: Node | string) {\n    /** TODO */\n  }\n  removeConnector(id: string) {\n    if (this.connectors[id] === this.flowConnect.floatingConnector) this.flowConnect.floatingConnector = null;\n    delete this.connectors[id];\n  }\n  removeAllFocus() {\n    Object.values(this.nodes).forEach(node => node.focused = false);\n  }\n  render() {\n    this.groups.forEach(group => group.render());\n    Object.values(this.connectors).forEach(connector => connector.render());\n    this.sortedNodes.forEach(node => node.render());\n  }\n  start() {\n    if (this.state !== FlowState.Stopped) return;\n    this.executionGraph.start();\n    this.call('start', this);\n  }\n  stop() {\n    // Bottom-up, all child sub-flows gets stopped first before parent\n    // What if FlowState is Running ?\n    if (this.state === FlowState.Stopped) return;\n\n    // Bottom-up, sub-flows are stopped from highest order to lowest (order = depth of node in the tree)\n    for (let order = this.executionGraph.nodes.length - 1; order >= 0; order -= 1) {\n      this.executionGraph.nodes[order]\n        .filter(graphNode => graphNode.flowNode instanceof SubFlowNode)\n        .map(graphNode => graphNode.flowNode)\n        .forEach((subFlowNode: SubFlowNode) => subFlowNode.subFlow.stop());\n    }\n    this.executionGraph.stop();\n    this.call('stop', this);\n  }\n\n  serialize(): SerializedFlow {\n    return {\n      id: this.id,\n      name: this.name,\n      rules: this.rules,\n      terminalTypeColors: this.terminalTypeColors,\n      nodes: Object.values(this.nodes).map(node => node.serialize()),\n      groups: this.groups.map(group => group.serialize()),\n      connectors: Object.values(this.connectors).map(connector => connector.serialize()),\n      inputs: this.inputs.map(input => input.serialize()),\n      outputs: this.outputs.map(output => output.serialize()),\n      executionGraph: this.executionGraph.serialize()\n    }\n  }\n  static deSerialize(flowConnect: FlowConnect, data: SerializedFlow): Flow {\n    let flow = new Flow(flowConnect, data.name, data.rules, data.terminalTypeColors, data.id);\n\n    data.nodes.forEach(serializedNode => {\n      let node;\n      if (serializedNode.subFlow) node = SubFlowNode.deSerialize(flow, serializedNode);\n      else node = Node.deSerialize(flow, serializedNode);\n      flow.nodes[node.id] = node;\n      flow.sortedNodes.add(node);\n    });\n\n    data.groups.forEach(serializedGroup => {\n      let group = Group.deSerialize(flow, serializedGroup);\n      flow.groups.push(group);\n      group.nodes.forEach(node => node.group = group);\n    });\n\n    data.inputs.forEach(serializedInput => {\n      let input = TunnelNode.deSerialize(flow, serializedInput);\n      flow.inputs.push(input);\n      flow.nodes[input.id] = input;\n      flow.sortedNodes.add(input);\n    });\n\n    data.outputs.forEach(serializedOutput => {\n      let output = TunnelNode.deSerialize(flow, serializedOutput);\n      flow.outputs.push(output);\n      flow.nodes[output.id] = output;\n      flow.sortedNodes.add(output);\n    });\n\n    data.connectors.forEach(serializedConnector => {\n      let startNode = flow.nodes[serializedConnector.startNodeId];\n      let startTerminal = startNode.outputs.concat(startNode.outputsUI).find(terminal => terminal.id === serializedConnector.startId);\n      let endNode = flow.nodes[serializedConnector.endNodeId];\n      let endTerminal = endNode.inputs.concat(endNode.inputsUI).find(terminal => terminal.id === serializedConnector.endId);\n      let connector = Connector.deSerialize(flow, startTerminal, endTerminal, serializedConnector);\n      flow.connectors[serializedConnector.id] = connector;\n    });\n\n    flow.executionGraph = Graph.deSerialize(flow, data.executionGraph);\n\n    return flow;\n  }\n}\n\nexport enum FlowState {\n  Running,\n  Idle,\n  Stopped\n}\n\nexport interface FlowOptions {\n  name: string,\n  rules: Rules,\n  terminalTypeColors: TerminalTypeColors\n}\n\nexport interface SerializedFlow {\n  id: string,\n  name: string,\n  rules: { [type: string]: string[] },\n  terminalTypeColors: { [key: string]: string },\n  nodes: SerializedNode[],\n  groups: SerializedGroup[],\n  connectors: SerializedConnector[],\n  inputs: SerializedTunnelNode[],\n  outputs: SerializedTunnelNode[],\n  executionGraph: SerializedGraph\n}\n\nexport interface NodeOptions {\n  inputs?: any[],\n  outputs?: any[],\n  style: NodeStyle,\n  terminalStyle: TerminalStyle,\n  props?: { [key: string]: any }\n}\n/** @hidden */\nlet DefaultNodeOptions = (): NodeOptions => {\n  return {\n    style: {},\n    terminalStyle: {}\n  }\n}\n","import { Log } from \"../utils/logger\";\nimport { getNewUUID } from \"../utils/utils\";\nimport { Flow, FlowState } from \"./flow\";\nimport { Serializable } from \"../common/interfaces\";\nimport { Node } from \"./node\";\nimport { List } from \"../utils/linked-list\";\n\n/** @hidden */\n// A directed acyclic graph\nexport class Graph implements Serializable {\n  state: FlowState = FlowState.Stopped;\n  nodes: GraphNode[][];\n  nodeToGraphNode: { [key: string]: GraphNode };\n  dirtyNodes: { [key: string]: GraphNode };\n\n  constructor() {\n    this.nodes = [];\n    this.nodeToGraphNode = {};\n    this.dirtyNodes = {};\n  }\n\n  add(data: Node) {\n    if (!this.nodes[0]) this.nodes.push([]);\n    let graphNode = new GraphNode(data);\n    this.nodes[0].push(graphNode);\n    this.nodeToGraphNode[data.id] = graphNode;\n  }\n  connect(sourceNode: Node, destinationNode: Node) {\n    let startGraphNode = this.nodeToGraphNode[sourceNode.id];\n    let endGraphNode = this.nodeToGraphNode[destinationNode.id];\n\n    if (!startGraphNode.childs.includes(endGraphNode)) {\n      startGraphNode.childs.push(endGraphNode);\n\n      if (endGraphNode.order <= startGraphNode.order) {\n        this.updateOrder(endGraphNode, startGraphNode.order + 1);\n      }\n    }\n  }\n  disconnect(sourceNode: Node, destinationNode: Node) {\n    let sourceGraphNode = this.nodeToGraphNode[sourceNode.id];\n    let destinationGraphNode = this.nodeToGraphNode[destinationNode.id];\n\n    let connectedEndNodes = new Set<Node>();\n    sourceNode.outputs\n      .forEach(terminal => terminal.connectors\n        .forEach(connector => connector.endNode && connectedEndNodes.add(connector.endNode))\n      );\n\n    if (connectedEndNodes.has(destinationNode)) return;\n    sourceGraphNode.childs.splice(sourceGraphNode.childs.indexOf(destinationGraphNode), 1);\n\n    let maxOrderOfConnectedStartNodes = destinationNode.inputs\n      .filter(terminal => terminal.connectors.length > 0)\n      .map(terminal => this.nodeToGraphNode[terminal.connectors[0].startNode.id].order)\n      .reduce((acc, curr) => Math.max(acc, curr), 0);\n\n    this.updateOrder(destinationGraphNode, maxOrderOfConnectedStartNodes);\n  }\n  updateOrder(root: GraphNode, order: number) {\n    this._updateOrder(root, order);\n    let queue: GraphNode[] = [];\n    queue.push(root);\n    while (queue.length !== 0) {\n      let currNode = queue.shift();\n      currNode.childs.forEach(child => {\n        if (child.order <= currNode.order) {\n          this._updateOrder(child, currNode.order + 1);\n          if (!queue.includes(child)) queue.push(child);\n        }\n      });\n    }\n  }\n  _updateOrder(graphNode: GraphNode, order: number) {\n    this.nodes[graphNode.order].splice(this.nodes[graphNode.order].indexOf(graphNode), 1);\n    if (!this.nodes[order]) this.nodes[order] = [];\n    graphNode.order = order;\n    this.nodes[order].push(graphNode);\n  }\n  canConnect(sourceNode: Node, destinationNode: Node) {\n    if (this.nodeToGraphNode[destinationNode.id].childs.includes(this.nodeToGraphNode[sourceNode.id])) return false;\n    return true;\n  }\n\n  async start() {\n    if (this.state === FlowState.Stopped) {       // Full Run\n      this.state = FlowState.Running;\n      if (this.nodes[0]) {\n        try {\n          await this.runAll(this.nodes[0]);\n\n          while (Object.values(this.dirtyNodes).length !== 0) {\n            await this.runAll(this.lowestDirty(Object.values(this.dirtyNodes)));\n          }\n        } catch (error) {\n          Log.error('Error while executing graph', error);\n          this.state = FlowState.Stopped;\n          return;\n        }\n      }\n    } else if (this.state === FlowState.Idle) {   // Partial Run\n      this.state = FlowState.Running;\n      try {\n        while (Object.values(this.dirtyNodes).length !== 0) {\n          await this.runAll(this.lowestDirty(Object.values(this.dirtyNodes)));\n        }\n      } catch (error) {\n        Log.error('Error while executing graph', error);\n        this.state = FlowState.Stopped;\n        return;\n      }\n    }\n\n    this.state = FlowState.Idle;\n  }\n  stop() {\n    this.state = FlowState.Stopped;\n  }\n  // Runs selective nodes within the >same order< in async (how about parallel, future ?)\n  async runAll(graphNodes: GraphNode[]) {\n    await Promise.all(\n      graphNodes.map(\n        graphNode => new Promise<void>(resolve => {\n          graphNode.flowNode.run();\n          this.clearDirty(graphNode);\n          resolve();\n        })\n      )\n    );\n  }\n  setDirty(node: Node | GraphNode) {\n    let graphNode = node instanceof Node ? this.nodeToGraphNode[node.id] : node;\n    if (!graphNode) return;\n\n    this.dirtyNodes[graphNode.id] = graphNode;\n  }\n  clearDirty(node: Node | GraphNode) {\n    let graphNode = node instanceof Node ? this.nodeToGraphNode[node.id] : node;\n    delete this.dirtyNodes[graphNode.id];\n  }\n  // Returns all dirty nodes with lowest order\n  lowestDirty(graphNodes: GraphNode[]) {\n    let lowestOrder = Math.min(...graphNodes.map(graphNode => graphNode.order));\n    return graphNodes.filter(graphNode => graphNode.order === lowestOrder);\n  }\n  // Generic graph traversing function that can be used to do some stuff with nodes starting with provided root\n  propagate(root: Node | GraphNode, callback: (node: Node) => void) {\n    let start = root instanceof Node ? this.nodeToGraphNode[root.id] : root;\n    let queue = new List<GraphNode>();\n    queue.append(start);\n    while (queue.length !== 0) {\n      let currGNode = queue.removeFirst();\n      callback(currGNode.flowNode);\n      currGNode.childs.forEach(child => queue.append(child));\n    }\n  }\n  debugNode(node: GraphNode, indent: string) {\n    console.log(`${indent}[${node.flowNode.name}, ${node.order}]`);\n    node.childs.forEach(child => this.debugNode(child, indent + '  '));\n  }\n  debugGraph() {\n    this.nodes[0].forEach(graphNode => {\n      this.debugNode(graphNode, '');\n    });\n  }\n\n  serialize(): SerializedGraph {\n    let nodeToGraphNode: { [key: string]: string } = {};\n    Object.keys(this.nodeToGraphNode).forEach(nodeId => nodeToGraphNode[nodeId] = this.nodeToGraphNode[nodeId].id);\n\n    return {\n      nodes: this.nodes.map(groupedNodes => groupedNodes.map(graphNode => graphNode.serialize())),\n      nodeToGraphNode: nodeToGraphNode\n    };\n  }\n  static deSerialize(flow: Flow, data: SerializedGraph): Graph {\n    let graph = new Graph();\n\n    let serializedGraphNodes: { [key: string]: SerializedGraphNode } = {};\n    let deSerializedGraphNodes: { [key: string]: GraphNode } = {};\n\n    data.nodes.forEach((serializedGroupedNodes, index) => {\n      graph.nodes[index] = serializedGroupedNodes.map(serializedGraphNode => {\n        let graphNode = GraphNode.deSerialize(flow.nodes[serializedGraphNode.nodeId], serializedGraphNode);\n        deSerializedGraphNodes[graphNode.id] = graphNode;\n        serializedGraphNodes[graphNode.id] = serializedGraphNode;\n        return graphNode;\n      });\n    });\n\n    Object.keys(deSerializedGraphNodes).forEach(key => {\n      deSerializedGraphNodes[key].childs = serializedGraphNodes[key].childs.map(childId => deSerializedGraphNodes[childId]);\n    });\n    Object.keys(data.nodeToGraphNode).forEach(nodeId => {\n      graph.nodeToGraphNode[nodeId] = deSerializedGraphNodes[data.nodeToGraphNode[nodeId]];\n    })\n\n    return graph;\n  }\n}\n\nexport interface SerializedGraph {\n  nodes: SerializedGraphNode[][],\n  nodeToGraphNode: { [key: string]: string }\n}\n\n/** @hidden */\nexport class GraphNode implements Serializable {\n  id: string;\n  childs: GraphNode[] = [];\n  order: number;\n\n  constructor(public flowNode: Node, order?: number, id?: string) {\n    this.order = order ? order : 0;\n    this.id = id ? id : getNewUUID();\n  }\n\n  serialize(): SerializedGraphNode {\n    return {\n      id: this.id,\n      nodeId: this.flowNode.id,\n      order: this.order,\n      childs: this.childs.map(child => child.id)\n    };\n  }\n  static deSerialize(node: Node, data: SerializedGraphNode): GraphNode {\n    return new GraphNode(node, data.order, data.id);\n  }\n}\nexport interface SerializedGraphNode {\n  id: string,\n  nodeId: string,\n  order: number,\n  childs: string[]\n}\n","import { SerializedVector2, Vector2 } from \"./vector\";\nimport { get, getNewUUID, intersects } from \"../utils/utils\";\nimport { Color, SerializedColor } from \"./color\";\nimport { Flow } from './flow';\nimport { Hooks } from './hooks';\nimport { Node } from './node';\nimport { Serializable } from \"../common/interfaces\";\nimport { ViewPort } from \"../common/enums\";\n\nexport class Group extends Hooks implements Serializable {\n  nodes: Node[] = [];\n  get name(): string { return this._name; }\n  set name(name: string) {\n    if (!name || name.trim() === '') this._name = 'No Name';\n    else this._name = name;\n    this.computeTextMetrics();\n  }\n  get position(): Vector2 { return this._position; }\n  set position(position: Vector2) {\n    this._position = position;\n    this.updateRenderState();\n    this.recomputeNodePositions();\n  }\n\n  /** @hidden */\n  nodeDeltas: Vector2[] = [];\n  /** @hidden */\n  hitColor: Color;\n  private textWidth: number;\n  private textHeight: number;\n  private _name: string;\n  private renderState: ViewPort = ViewPort.INSIDE;\n  private _position: Vector2;\n\n  public width: number;\n  public height: number\n  public style: GroupStyle;\n  public id: string;\n\n  constructor(\n    public flow: Flow,\n    position: Vector2,\n    options: GroupOptions = DefaultGroupOptions()\n  ) {\n\n    super();\n\n    this.width = get(options.width, 0);\n    this.height = get(options.height, 0);\n    this.style = get(options.style, {});\n    this.id = get(options.id, getNewUUID());\n\n    this.hitColor = options.hitColor;\n    this.style = { ...DefaultGroupStyle(), ...options.style };\n    this.id = getNewUUID();\n    this._position = position;\n    if (!this.style.color || !this.style.borderColor) {\n      let colors = DefaultGroupColors.Random();\n      this.style.borderColor = colors[0];\n      this.style.color = colors[1];\n    }\n    this.name = options.name;\n    this.setHitColor(options.hitColor);\n    this.computeTextMetrics();\n\n    this.flow.on('transform', () => this.updateRenderState());\n  }\n\n  private setHitColor(hitColor: Color) {\n    if (!hitColor) {\n      hitColor = Color.Random();\n      while (this.flow.hitColorToGroup[hitColor.rgbaString]) hitColor = Color.Random();\n    }\n    this.hitColor = hitColor;\n    this.flow.hitColorToGroup[this.hitColor.rgbaString] = this;\n  }\n  private computeTextMetrics() {\n    let context = this.flow.flowConnect.context;\n    context.font = this.style.fontSize + ' ' + this.style.font;\n    let metrics = context.measureText(this.name);\n    this.textWidth = metrics.width;\n    metrics = context.measureText('M');\n    context.font = null;\n    this.textHeight = metrics.actualBoundingBoxAscent + metrics.actualBoundingBoxDescent;\n\n    if (typeof this.textHeight === 'undefined') {\n      let d = document.createElement(\"span\");\n      d.textContent = \"M\";\n      d.style.font = this.style.fontSize + ' ' + this.style.font;\n      document.body.appendChild(d);\n      this.textHeight = d.offsetHeight;\n      document.body.removeChild(d);\n    }\n  }\n  private updateRenderState() {\n    let realPos = this.position.transform(this.flow.flowConnect.transform);\n    this.renderState = intersects(\n      0, 0,\n      this.flow.flowConnect.canvasDimensions.width, this.flow.flowConnect.canvasDimensions.height,\n      realPos.x, realPos.y,\n      realPos.x + this.width * this.flow.flowConnect.scale,\n      realPos.y + this.height * this.flow.flowConnect.scale\n    );\n  }\n  /** @hidden */\n  setContainedNodes() {\n    let groupRealPos = this.position.transform(this.flow.flowConnect.transform);\n\n    this.nodes = Object.keys(this.flow.nodes)\n      .map(key => this.flow.nodes[key])\n      .filter(node => !node.group && node.renderState.viewport === ViewPort.INSIDE)\n      .filter(node => {\n        let nodeRealPos = node.position.transform(this.flow.flowConnect.transform);\n\n        return intersects(groupRealPos.x, groupRealPos.y,\n          groupRealPos.x + this.width * this.flow.flowConnect.scale,\n          groupRealPos.y + this.height * this.flow.flowConnect.scale,\n          nodeRealPos.x, nodeRealPos.y,\n          nodeRealPos.x + node.width * this.flow.flowConnect.scale,\n          nodeRealPos.y + node.ui.height * this.flow.flowConnect.scale\n        ) === ViewPort.INSIDE;\n      });\n\n    this.nodes.forEach((node, index) => {\n      node.group = this;\n      this.nodeDeltas[index] = node.position.subtract(this.position);\n    });\n  }\n  private recomputeNodePositions() {\n    this.nodes.forEach((node, index) => {\n      node.position = this.position.add(this.nodeDeltas[index]);\n    });\n  }\n\n  render() {\n    if (this.renderState === ViewPort.OUTSIDE) return;\n\n    this.flow.flowConnect.context.save();\n    this._render();\n    this.flow.flowConnect.context.restore();\n\n    this.flow.flowConnect.offGroupContext.save();\n    this._offRender();\n    this.flow.flowConnect.offGroupContext.restore();\n  }\n  private _render() {\n    let context = this.flow.flowConnect.context;\n    context.strokeStyle = this.style.borderColor;\n    context.lineWidth = 2;\n    context.fillStyle = this.style.color;\n    context.strokeRect(this.position.x, this.position.y, this.width, this.height);\n    context.fillRect(this.position.x, this.position.y, this.width, this.height);\n    context.fillStyle = this.style.titleColor;\n    context.textBaseline = 'bottom';\n    context.font = this.style.fontSize + ' ' + this.style.font;\n    context.fillText(this.name, this.position.x, this.position.y - 10);\n  }\n  private _offRender() {\n    this.flow.flowConnect.offGroupContext.fillStyle = this.hitColor.rgbaCSSString;\n    this.flow.flowConnect.offGroupContext.fillRect(this.position.x, this.position.y, this.width, this.height);\n    this.flow.flowConnect.offGroupContext.fillRect(this.position.x, this.position.y - this.textHeight - 10, this.textWidth, this.textHeight + 10);\n  }\n\n  /** @hidden */\n  onClick(screenPosition: Vector2, realPosition: Vector2) {\n    this.call('click', this, screenPosition, realPosition);\n\n    let thisRealPosition = this.position.transform(this.flow.flowConnect.transform);\n    if (screenPosition.y < thisRealPosition.y) {\n      this.flow.flowConnect.showGenericInput(thisRealPosition.subtract(0, (10 + this.textHeight) * this.flow.flowConnect.scale), this.name, {\n        width: Math.max(this.textWidth, 50) * this.flow.flowConnect.scale + 'px',\n        height: this.textHeight * this.flow.flowConnect.scale + 'px',\n        fontSize: parseInt(this.style.fontSize.replace('px', '')) * this.flow.flowConnect.scale + 'px',\n        fontFamily: this.style.font\n      }, {\n        type: 'text'\n      }, (value) => {\n        this.name = value;\n      });\n    }\n  }\n\n  serialize(): SerializedGroup {\n    return {\n      id: this.id,\n      hitColor: this.hitColor.serialize(),\n      position: this.position.serialize(),\n      name: this.name,\n      width: this.width,\n      height: this.height,\n      style: this.style,\n      nodes: this.nodes.map(node => node.id),\n      nodeDeltas: this.nodeDeltas.map(nodeDelata => nodeDelata.serialize())\n    };\n  }\n  static deSerialize(flow: Flow, data: SerializedGroup): Group {\n    let group = new Group(flow, Vector2.deSerialize(data.position), {\n      width: data.width,\n      height: data.height,\n      name: data.name,\n      style: data.style,\n      id: data.id,\n      hitColor: Color.deSerialize(data.hitColor)\n    });\n\n    data.nodes.forEach(nodeId => {\n      group.nodes.push(flow.nodes[nodeId]);\n    });\n    data.nodeDeltas.forEach(serializedVector => {\n      group.nodeDeltas.push(Vector2.deSerialize(serializedVector));\n    });\n\n    return group;\n  }\n}\n\nexport interface GroupStyle {\n  color?: string;\n  borderColor?: string;\n  titleColor?: string;\n  fontSize?: string;\n  font?: string;\n}\n\nexport interface SerializedGroup {\n  position: SerializedVector2,\n  width: number,\n  height: number,\n  name: string,\n  style: GroupStyle,\n  id: string,\n  hitColor: SerializedColor,\n  nodes: string[],\n  nodeDeltas: SerializedVector2[]\n}\n\n/** @hidden */\nlet DefaultGroupColors = {\n  colors: [\n    ['rgba(239, 134, 119, 1)', 'rgba(239, 134, 119, .5)'],\n    ['rgba(160, 231, 125, 1)', 'rgba(160, 231, 125, .5)'],\n    ['rgba(130, 182, 217, 1)', 'rgba(130, 182, 217, .5)']\n  ],\n  RED: () => DefaultGroupColors.colors[0],\n  GREEN: () => DefaultGroupColors.colors[1],\n  BLUE: () => DefaultGroupColors.colors[2],\n  Random: () => DefaultGroupColors.colors[Math.floor(Math.random() * DefaultGroupColors.colors.length)]\n};\n\n/** @hidden */\nlet DefaultGroupStyle = () => {\n  return {\n    titleColor: '#000',\n    fontSize: '16px',\n    font: 'arial'\n  };\n};\n\nexport interface GroupOptions {\n  width?: number,\n  height?: number,\n  name?: string,\n  style?: GroupStyle,\n  id?: string,\n  hitColor?: Color\n}\n/** @hidden */\nlet DefaultGroupOptions = (): GroupOptions => {\n  return {\n    width: 0,\n    height: 0,\n    style: {},\n    id: getNewUUID()\n  }\n}\n","/** \n * Hooks is a general purpose class used by FlowConnect, Flow, Node, UINode, Terminal, Group... classes\n * for making their normal processes available as events to listen to when they happen.\n * For e.g you can listen to any Terminal's 'connect' event to do some custom stuff when this Terminal gets connected to another\n */\nexport class Hooks {\n  protected registeredEvents: { [key: string]: { [id: number]: (...args: any) => void } };\n  protected lastId: number;\n\n  constructor() {\n    this.registeredEvents = {};\n    this.lastId = 0;\n  }\n\n  /** \n   * Register a callback to an event\n   * \n   * @param eventKey name of the event to listen to\n   * @param callback reference to a callback that will be triggered when this event happens\n   * @returns a numbered ID that can be used later to de-register this hook\n   */\n  on(eventKey: string, callback: (...args: any) => void): number {\n    if (!this.registeredEvents[eventKey]) this.registeredEvents[eventKey] = {};\n\n    let id = this.lastId;\n    this.registeredEvents[eventKey][id] = callback;\n    this.lastId += 1;\n    return id;\n  }\n  /** @hidden */\n  call(eventKey: string, ...args: any) {\n    if (this.registeredEvents[eventKey]) {\n      if (!args) args = [];\n      Object.values(this.registeredEvents[eventKey]).forEach(callback => callback(...args));\n    }\n  }\n  /** \n   * De-register a callback to an event\n   * \n   * @param eventKey name of the event to de-register\n   * @param id a numbered id that was generated at the time of event registration\n   */\n  off(eventKey: string, id: number) {\n    if (this.registeredEvents[eventKey]) delete this.registeredEvents[eventKey][id];\n  }\n  offAll() {\n    this.registeredEvents = {};\n  }\n}\n","export * from './color';\nexport * from './connector';\nexport * from './flow';\nexport * from './graph';\nexport * from './group';\nexport * from './hooks';\nexport * from './node';\nexport * from './subflow-node';\nexport * from './terminal';\nexport * from './tunnel-node';\nexport * from './vector';\n","import { SerializedVector2, Vector2 } from \"./vector\";\nimport { ViewPort, LOD, Align } from '../common/enums';\nimport { Container, Label, Slider, UINode, Button, Image, HorizontalLayout, Toggle, Select, Source, Display, Input, Stack, CustomRendererConfig, ToggleStyle, SourceStyle, SliderStyle, SelectStyle, LabelStyle, InputStyle, ButtonStyle, DisplayStyle, HorizontalLayoutStyle, StackStyle, ImageStyle } from \"../ui/index\";\nimport { get, getNewUUID, intersects } from \"../utils/utils\";\nimport { Color, SerializedColor } from \"./color\";\nimport { Flow, FlowState, SerializedFlow } from './flow';\nimport { Group } from './group';\nimport { Terminal, TerminalType, TerminalStyle, SerializedTerminal } from './terminal';\nimport { Hooks } from './hooks';\nimport { Events, RenderState, Serializable, TerminalOutputs } from \"../common/interfaces\";\nimport { Connector } from \"./connector\";\nimport { Log } from \"../utils/logger\";\nimport { SerializedContainer } from \"../ui/container\";\nimport { Dial, DialStyle } from \"../ui/dial\";\nimport { Envelope, EnvelopeStyle } from \"../ui/envelope\";\nimport { RadioGroup, RadioGroupStyle } from \"../ui/radio-group\";\nimport { Slider2D, Slider2DStyle } from \"../ui/2d-slider\";\nimport { VSlider, VSliderStyle } from \"../ui/v-slider\";\n\nexport class Node extends Hooks implements Events, Serializable {\n  //#region Properties\n  /** @hidden */\n  hitColor: Color;\n  private _width: number;\n  /** @hidden */\n  hitColorToUI: { [key: string]: UINode };\n  /** @hidden */\n  hitColorToTerminal: { [key: string]: Terminal };\n  /** @hidden */\n  hitColorToNodeButton: { [key: string]: NodeButton };\n  private _zIndex: number;\n  private nodeButtons: NodeButton[] = [];\n  private _position: Vector2;\n  private propObservers: any = {};\n  /** @hidden */\n  renderState: RenderState = { viewport: ViewPort.INSIDE, nodeState: NodeState.MAXIMIZED, lod: LOD.LOD2 };\n  /** @hidden */\n  currHitTerminal: Terminal;\n  /** @hidden */\n  prevHitTerminal: Terminal;\n  /** @hidden */\n  currHitUINode: UINode;\n  /** @hidden */\n  prevHitUINode: UINode;\n\n  focused: boolean = false;\n  inputs: Terminal[] = [];\n  outputs: Terminal[] = [];\n  inputsUI: Terminal[] = [];\n  outputsUI: Terminal[] = [];\n  ui: Container;\n  props: { [key: string]: any };\n  group: Group = null;\n  //#endregion\n\n  //#region Accessors\n  get context(): CanvasRenderingContext2D { return this.flow.flowConnect.context }\n  get offContext(): OffscreenCanvasRenderingContext2D | CanvasRenderingContext2D { return this.flow.flowConnect.offContext }\n  get offUIContext(): OffscreenCanvasRenderingContext2D | CanvasRenderingContext2D { return this.flow.flowConnect.offUIContext }\n  get position(): Vector2 { return this._position }\n  set position(position: Vector2) {\n    this._position = position;\n    this.reflow();\n    this.ui.update();\n    this.updateRenderState();\n  }\n  get zIndex(): number { return this._zIndex }\n  set zIndex(zIndex: number) {\n    if (this.flow.sortedNodes.remove(this)) {\n      this._zIndex = zIndex;\n      this.flow.sortedNodes.add(this);\n    } else {\n      this._zIndex = zIndex;\n    }\n  }\n  get width(): number { return this._width }\n  set width(width: number) {\n    this._width = width;\n    this.ui.width = width;\n    this.ui.update();\n  }\n  //#endregion\n\n  style: NodeStyle;\n  terminalStyle: TerminalStyle;\n  id: string;\n\n  constructor(\n    public flow: Flow,\n    public name: string,\n    position: Vector2,\n    width: number,\n    inputs: SerializedTerminal[], outputs: SerializedTerminal[],\n    options: NodeConstructorOptions = DefaultNodeConstructorOptions()\n  ) {\n\n    super();\n\n    this.style = get(options.style, {});\n    this.terminalStyle = get(options.terminalStyle, {});\n    this.id = get(options.id, getNewUUID());\n    options.props = get(options.props, {});\n\n    this.hitColor = options.hitColor;\n    this._width = width;\n    this.style = { ...DefaultNodeStyle(), ...options.style }\n    this._position = position;\n    this.setupProps(options.props);\n    this.hitColorToUI = {};\n    this.hitColorToTerminal = {};\n    this.hitColorToNodeButton = {};\n    this._zIndex = 0;\n    this.setHitColor(options.hitColor);\n\n    this.setupTerminals(options, inputs, outputs);\n\n    if (options.ui) {\n      this.ui = options.ui instanceof Container ? options.ui : Container.deSerialize(this, options.ui)\n    } else {\n      this.ui = new Container(this, width);\n    }\n\n    this.addNodeButton(() => this.toggleNodeState(), (_: NodeButton, pos: Vector2) => {\n      this.context.fillStyle = this.style.maximizeButtonColor;\n      this.context.fillRect(pos.x, pos.y, this.style.nodeButtonSize, this.style.nodeButtonSize);\n    }, Align.Left);\n\n    this.reflow();\n    this.ui.update();\n\n    this.flow.on('transform', () => this.updateRenderState());\n\n    this.flow.nodes[this.id] = this;\n    this.flow.sortedNodes.add(this);\n    this.flow.executionGraph.add(this);\n  }\n\n  //#region Methods\n  setupTerminals(options: NodeConstructorOptions, inputs: SerializedTerminal[], outputs: SerializedTerminal[]) {\n    this.inputs.push(...inputs.map(input =>\n      new Terminal(this, TerminalType.IN, input.dataType, input.name,\n        input.style ? input.style : { ...options.terminalStyle },\n        input.id ? input.id : null,\n        input.hitColor ? Color.deSerialize(input.hitColor) : null)\n    ));\n    this.outputs.push(...outputs.map(output =>\n      new Terminal(this, TerminalType.OUT, output.dataType, output.name,\n        output.style ? output.style : { ...options.terminalStyle },\n        output.id ? output.id : null,\n        output.hitColor ? Color.deSerialize(output.hitColor) : null)\n    ));\n  }\n  private setupProps(props: any) {\n    this.props = new Proxy<any>({}, {\n      set: (target, prop, value) => {\n        if (typeof target[prop] === 'undefined') {\n          this.propObservers[prop] = [];\n        }\n\n        let oldValue = target[prop];\n        target[prop] = value;\n        this.propObservers[prop].forEach((callback: any) => callback(oldValue, value));\n\n        return true;\n      }\n    });\n\n    Object.keys(props).forEach(key => {\n      this.props[key] = props[key];\n    });\n  }\n  watch(propName: string, callback: (oldVal: any, newVal: any) => void) {\n    if (typeof this.props[propName] !== 'undefined') {\n      this.propObservers[propName].push(callback);\n    } else {\n      Log.error(`Cannot watch prop '${propName}', prop not found`);\n    }\n  }\n  unwatch(propName: string, callback: (oldVal: any, newVal: any) => void) {\n    if (typeof this.props[propName] !== 'undefined') {\n      this.propObservers[propName].splice(this.propObservers[propName].indexOf(callback), 1);\n    } else {\n      Log.error(`Cannot unwatch prop '${propName}', prop not found`);\n    }\n  }\n  private setHitColor(hitColor: Color) {\n    if (!hitColor) {\n      hitColor = Color.Random();\n      while (this.flow.hitColorToNode[hitColor.rgbaString]) hitColor = Color.Random();\n    }\n    this.hitColor = hitColor;\n    this.flow.hitColorToNode[this.hitColor.rgbaString] = this;\n  }\n  /** @hidden */\n  addNodeButton(callback: () => void, render: (nodeButton: NodeButton, position: Vector2) => void, align: Align): NodeButton {\n    let newNodeButton = new NodeButton(this, callback, render, align);\n\n    let noOfButtons = this.nodeButtons.filter(nodeButton => nodeButton.align === newNodeButton.align).length;\n    let deltaX;\n    if (align === Align.Left) deltaX = noOfButtons * (this.style.nodeButtonSize + this.style.nodeButtonSpacing);\n    else deltaX = this.width - noOfButtons * (this.style.nodeButtonSize + this.style.nodeButtonSpacing) - this.style.nodeButtonSize;\n    newNodeButton.deltaX = deltaX;\n    this.nodeButtons.push(newNodeButton);\n\n    return newNodeButton;\n  }\n  private reflow(): void {\n    let y = this.position.y + this.style.terminalRowHeight / 2 + this.style.padding / 2 + this.style.titleHeight;\n    if (this.inputs.length > this.outputs.length) {\n      this.recalculateInputTerminals(y);\n      y = this.position.y + (this.inputs.length * this.style.terminalRowHeight) / 2 - (this.outputs.length * this.style.terminalRowHeight) / 2 + this.style.terminalRowHeight / 2 + this.style.padding / 2 + this.style.titleHeight;\n      this.recalculateOutputTerminals(y);\n    } else {\n      this.recalculateOutputTerminals(y);\n      y = this.position.y + (this.outputs.length * this.style.terminalRowHeight) / 2 - (this.inputs.length * this.style.terminalRowHeight) / 2 + this.style.terminalRowHeight / 2 + this.style.padding / 2 + this.style.titleHeight;\n      this.recalculateInputTerminals(y);\n    }\n  }\n  private updateRenderState() {\n    let realPos = this.position.transform(this.flow.flowConnect.transform);\n    this.renderState.viewport = intersects(\n      0, 0,\n      this.flow.flowConnect.canvasDimensions.width, this.flow.flowConnect.canvasDimensions.height,\n      realPos.x, realPos.y,\n      realPos.x + this.width * this.flow.flowConnect.scale,\n      realPos.y + (this.renderState.nodeState === NodeState.MAXIMIZED ? this.ui.height : this.style.titleHeight) * this.flow.flowConnect.scale\n    );\n\n    if (this.flow.flowConnect.scale > 0.6) this.renderState.lod = LOD.LOD2;\n    else if (this.flow.flowConnect.scale <= 0.6 && this.flow.flowConnect.scale > .3) this.renderState.lod = LOD.LOD1;\n    else this.renderState.lod = LOD.LOD0;\n\n    if (this.renderState.viewport === ViewPort.INTERSECT) {\n      this.ui.updateRenderState();\n    }\n  }\n  /** @hidden */\n  recalculateInputTerminals(y: number) {\n    this.inputs.forEach(terminal => {\n      terminal.position.x = this.position.x - this.style.terminalStripMargin - terminal.style.radius;\n      terminal.position.y = y;\n      y += this.style.terminalRowHeight;\n    });\n  }\n  private recalculateOutputTerminals(y: number) {\n    this.outputs.forEach(terminal => {\n      terminal.position.x = this.position.x + this.ui.width + this.style.terminalStripMargin + terminal.style.radius;\n      terminal.position.y = y;\n      y += this.style.terminalRowHeight;\n    });\n  }\n  /** @hidden */\n  getHitTerminal(hitColor: string, screenPosition: Vector2, realPosition: Vector2) {\n    let hitTerminal = null;\n\n    realPosition = realPosition.transform(this.flow.flowConnect.transform);\n    let thisRealPosition = this.position.transform(this.flow.flowConnect.transform);\n    if (\n      (this.inputs.length + this.inputsUI.length > 0 && realPosition.x < thisRealPosition.x) ||\n      (this.outputs.length + this.outputsUI.length > 0 && realPosition.x > thisRealPosition.x + this.ui.width * this.flow.flowConnect.scale)\n    ) {\n      hitTerminal = this.hitColorToTerminal[hitColor];\n    }\n\n    if (this.currHitTerminal && this.currHitTerminal !== hitTerminal) {\n      this.currHitTerminal.onExit(screenPosition, realPosition);\n      hitTerminal && hitTerminal.onEnter(screenPosition, realPosition);\n    }\n\n    return hitTerminal;\n  }\n  /** @hidden */\n  getHitUINode(hitColor: string): UINode {\n    let uiNode = this.hitColorToUI[hitColor];\n    if (uiNode instanceof Container) return null;\n    return uiNode;\n  }\n  private getHitNodeButton(hitColor: string): NodeButton {\n    return this.hitColorToNodeButton[hitColor];\n  }\n  /** @hidden */\n  run() {\n    if (this.flow.state === FlowState.Stopped) return;\n\n    this.call('process', this, this.inputs.map(terminal => terminal.connectors.length > 0 ? terminal.connectors[0].data : null));\n  }\n  private _render() {\n    let context = this.context;\n    if (this.renderState.nodeState === NodeState.MAXIMIZED) {\n      if (this.renderState.lod > 0) {\n        this.inputs.forEach(terminal => terminal.render());\n        this.outputs.forEach(terminal => terminal.render());\n      }\n    } else {\n      context.fillStyle = 'green';\n      if ((this.inputs.length + this.inputsUI.length) > 0) {\n        let radius = this.inputs.length > 0 ? this.inputs[0].style.radius : this.inputsUI[0].style.radius;\n        context.fillRect(this.position.x - this.style.terminalStripMargin - radius * 2, this.position.y + this.style.titleHeight / 2 - radius, radius * 2, radius * 2);\n      }\n      if ((this.outputs.length + this.outputsUI.length) > 0) {\n        let radius = this.outputs.length > 0 ? this.outputs[0].style.radius : this.outputsUI[0].style.radius;\n        context.fillRect(this.position.x + this.width + this.style.terminalStripMargin, this.position.y + this.style.titleHeight / 2 - radius, radius * 2, radius * 2);\n      }\n    }\n\n    context.fillStyle = this.style.titleColor;\n    context.font = this.style.titleFontSize + ' ' + this.style.titleFont;\n    context.textBaseline = 'middle';\n    context.fillText(this.name, this.position.x + this.ui.width / 2 - context.measureText(this.name).width / 2, this.position.y + this.style.titleHeight / 2);\n\n    if (this.renderState.nodeState === NodeState.MAXIMIZED) {\n      context.fillStyle = this.style.color;\n      context.font = this.style.fontSize + ' ' + this.style.font;\n      context.textBaseline = 'middle';\n      this.inputs.forEach(terminal => {\n        context.fillText(terminal.name, terminal.position.x + terminal.style.radius + this.style.terminalStripMargin + this.style.padding, terminal.position.y);\n      });\n      this.outputs.forEach(terminal => {\n        context.fillText(terminal.name, terminal.position.x - terminal.style.radius - this.style.terminalStripMargin - this.style.padding - context.measureText(terminal.name).width, terminal.position.y);\n      });\n    }\n\n    if (this.focused) {\n      context.strokeStyle = '#000';\n      context.lineWidth = 2;\n\n      let inputTerminalsWidth;\n      if (this.inputs.length === 0) {\n        inputTerminalsWidth = this.inputsUI.length === 0 ? 0 : this.inputsUI[0].style.radius * 2;\n      } else {\n        inputTerminalsWidth = this.inputs[0].style.radius * 2;\n      }\n      inputTerminalsWidth += this.style.terminalStripMargin * 2;\n\n      let outputTerminalsWidth;\n      if (this.outputs.length === 0) {\n        outputTerminalsWidth = this.outputsUI.length === 0 ? 0 : this.outputsUI[0].style.radius * 2;\n      } else {\n        outputTerminalsWidth = this.outputs[0].style.radius * 2;\n      }\n      outputTerminalsWidth += this.style.terminalStripMargin * 2;\n\n      context.strokeRoundRect(\n        this.position.x - inputTerminalsWidth,\n        this.position.y,\n        this.width + inputTerminalsWidth + outputTerminalsWidth,\n        this.renderState.nodeState === NodeState.MAXIMIZED ? (this.ui.height + this.style.padding) : this.style.titleHeight,\n        4\n      );\n    }\n  }\n  private _offRender() {\n    this.offContext.fillStyle = this.hitColor.rgbaCSSString;\n    let x = this.position.x;\n    let y = this.position.y;\n    let inputTerminalsStripWidth = 0, outputTerminalsStripWidth = 0;\n    if ((this.inputs.length + this.inputsUI.length) !== 0) {\n      let radius = this.inputs.length > 0 ? this.inputs[0].style.radius : this.inputsUI[0].style.radius;\n      x -= this.style.terminalStripMargin + radius * 2;\n      inputTerminalsStripWidth = radius * 2 + this.style.terminalStripMargin;\n    }\n    if ((this.outputs.length + this.outputsUI.length) !== 0) {\n      let radius = this.outputs.length > 0 ? this.outputs[0].style.radius : this.outputsUI[0].style.radius;\n      outputTerminalsStripWidth = radius * 2 + this.style.terminalStripMargin;\n    }\n    this.offContext.fillRect(x, y,\n      this.ui.width + inputTerminalsStripWidth + outputTerminalsStripWidth,\n      this.renderState.nodeState === NodeState.MAXIMIZED ? this.ui.height : this.style.titleHeight\n    );\n  }\n\n  addTerminal(terminal: Terminal | SerializedTerminal) {\n    if (!(terminal instanceof Terminal)) {\n      terminal = Terminal.deSerialize(this, terminal);\n    }\n    if (terminal.type === TerminalType.IN) this.inputs.push(terminal);\n    else this.outputs.push(terminal);\n    this.ui.update();\n    this.reflow();\n  }\n  removeTerminal(terminal: Terminal) {\n    let type = terminal.type;\n    let index = type === TerminalType.IN ? this.inputs.indexOf(terminal) : this.outputs.indexOf(terminal);\n    if (index < 0) {\n      Log.error('Cannot remove terminal, terminal not found');\n      return;\n    }\n    terminal.disconnect();\n    if (type === TerminalType.IN) this.inputs.splice(index, 1);\n    else this.outputs.splice(index, 1);\n    terminal.offAll();\n\n    this.ui.update();\n    this.reflow();\n  }\n  getInput(terminal: string | number): any {\n    if (typeof terminal === 'string') {\n      let inputTerminal = this.inputs.find(currTerm => (currTerm.name === terminal));\n      if (inputTerminal) return inputTerminal.getData();\n    } else {\n      if (this.inputs[terminal]) return this.inputs[terminal].getData();\n    }\n    return null;\n  }\n  getInputs(): any[] {\n    return this.inputs.map(terminal => terminal.getData());\n  }\n  setOutputs(outputs: string | number | TerminalOutputs, data?: any) {\n    if (typeof outputs === 'string') {\n      let outputTerminal = this.outputs.find(term => (term.name === outputs));\n      if (outputTerminal) outputTerminal.setData(data);\n    } else if (typeof outputs === 'number') {\n      if (this.outputs[outputs]) this.outputs[outputs].setData(data);\n    } else {\n      let outputData = new Map<Terminal, any>();\n      Object.entries(outputs).forEach(entry => {\n        let terminal = this.outputs.find(term => term.name === entry[0]);\n        if (terminal) outputData.set(terminal, entry[1]);\n        else throw Log.error(\"Terminal '\" + entry[0] + \"' not found\");\n      });\n      let groupedConnectors = new Map<Node, Connector[]>();\n      let outputDataIterator = outputData.keys();\n\n      let curr: Terminal = outputDataIterator.next().value;\n      while (curr) {\n        curr.connectors.forEach(connector => {\n          if (groupedConnectors.has(connector.endNode)) groupedConnectors.get(connector.endNode).push(connector);\n          else groupedConnectors.set(connector.endNode, [connector]);\n        });\n        curr = outputDataIterator.next().value;\n      }\n      let gCntrsIterator = groupedConnectors.values();\n\n      let connectors: Connector[] = gCntrsIterator.next().value;\n      while (connectors) {\n        for (let i = 1; i < connectors.length; i++) connectors[i].setData(outputData.get(connectors[i].start));\n        connectors[0].data = outputData.get(connectors[0].start);\n        connectors = gCntrsIterator.next().value;\n      }\n    }\n\n    // If FlowState is Idle, start a partial run of all the dirty nodes this method has created\n    if (this.flow.state === FlowState.Idle) {\n      this.flow.executionGraph.start();\n    }\n  }\n  toggleNodeState() {\n    this.renderState.nodeState = this.renderState.nodeState === NodeState.MAXIMIZED ? NodeState.MINIMIZED : NodeState.MAXIMIZED;\n  }\n  dispose(): void {\n    this.flow.removeNode(this.id);\n  }\n  render(): void {\n    if (this.renderState.viewport === ViewPort.OUTSIDE) return;\n    if (this.renderState.nodeState === NodeState.MAXIMIZED) this.ui.render();\n\n    this.context.save();\n    this._render();\n    this.context.restore();\n\n    this.nodeButtons.forEach(nodeButton => nodeButton.render())\n\n    this.offContext.save();\n    this._offRender();\n    this.offContext.restore();\n  }\n  //#endregion\n\n  //#region Events\n  /** @hidden */\n  onDown(screenPosition: Vector2, realPosition: Vector2): void {\n    this.call('down', this, screenPosition, realPosition);\n\n    let hitColor = Color.rgbaToString(this.flow.flowConnect.offUIContext.getImageData(screenPosition.x, screenPosition.y, 1, 1).data);\n\n    this.currHitUINode = this.getHitUINode(hitColor);\n    this.currHitUINode && this.currHitUINode.onDown(screenPosition, realPosition);\n\n    let hitTerminal = this.getHitTerminal(hitColor, screenPosition, realPosition);\n    if (hitTerminal) {\n      this.currHitTerminal = hitTerminal;\n      this.currHitTerminal.onDown(screenPosition, realPosition);\n    }\n  }\n  /** @hidden */\n  onOver(screenPosition: Vector2, realPosition: Vector2): void {\n    this.call('over', this, screenPosition, realPosition);\n\n    let hitColor = Color.rgbaToString(this.flow.flowConnect.offUIContext.getImageData(screenPosition.x, screenPosition.y, 1, 1).data);\n\n    let hitTerminal = this.getHitTerminal(hitColor, screenPosition, realPosition);\n\n    if (hitTerminal !== this.prevHitTerminal) {\n      this.prevHitTerminal && this.prevHitTerminal.onExit(screenPosition, realPosition);\n      hitTerminal && hitTerminal.onEnter(screenPosition, realPosition);\n    } else {\n      hitTerminal && (!this.currHitTerminal) && hitTerminal.onOver(screenPosition, realPosition);\n    }\n    this.prevHitTerminal = hitTerminal;\n\n    let hitUINode = this.getHitUINode(hitColor);\n    if (hitUINode !== this.prevHitUINode) {\n      this.prevHitUINode && this.prevHitUINode.onExit(screenPosition, realPosition);\n      hitUINode && hitUINode.onEnter(screenPosition, realPosition);\n    } else {\n      hitUINode && (!this.currHitUINode) && hitUINode.onOver(screenPosition, realPosition);\n    }\n    this.prevHitUINode = hitUINode;\n  }\n  /** @hidden */\n  onEnter(screenPosition: Vector2, realPosition: Vector2): void {\n    this.call('enter', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onExit(screenPosition: Vector2, realPosition: Vector2): void {\n    this.call('exit', this, screenPosition, realPosition);\n\n    let hitColor = Color.rgbaToString(this.flow.flowConnect.offUIContext.getImageData(screenPosition.x, screenPosition.y, 1, 1).data);\n\n    let hitTerminal = this.getHitTerminal(hitColor, screenPosition, realPosition);\n    hitTerminal && hitTerminal.onExit(screenPosition, realPosition);\n    this.prevHitTerminal && this.prevHitTerminal.onExit(screenPosition, realPosition);\n    this.prevHitTerminal = null;\n    this.currHitTerminal && this.currHitTerminal.onExit(screenPosition, realPosition);\n  }\n  /** @hidden */\n  onUp(screenPosition: Vector2, realPosition: Vector2): void {\n    this.call('up', this, screenPosition, realPosition);\n\n    let hitColor = Color.rgbaToString(this.flow.flowConnect.offUIContext.getImageData(screenPosition.x, screenPosition.y, 1, 1).data);\n\n    this.currHitUINode = null;\n    let hitUINode = this.getHitUINode(hitColor);\n    hitUINode && hitUINode.onUp(screenPosition.clone(), realPosition.clone());\n\n    let hitTerminal = this.getHitTerminal(hitColor, screenPosition, realPosition);\n    hitTerminal && hitTerminal.onUp(screenPosition, realPosition);\n  }\n  /** @hidden */\n  onClick(screenPosition: Vector2, realPosition: Vector2): void {\n    this.call('click', this, screenPosition, realPosition);\n\n    let hitColor = Color.rgbaToString(this.flow.flowConnect.offUIContext.getImageData(screenPosition.x, screenPosition.y, 1, 1).data);\n    if (realPosition.y < this.position.y + this.style.titleHeight * this.flow.flowConnect.scale) {\n      let hitNodeButton = this.getHitNodeButton(hitColor);\n      hitNodeButton && hitNodeButton.callback();\n    } else {\n      this.currHitTerminal && this.currHitTerminal.onClick(screenPosition, realPosition);\n\n      let hitUINode = this.getHitUINode(hitColor);\n      hitUINode && hitUINode.onClick(screenPosition.clone(), realPosition.clone());\n    }\n  }\n  /** @hidden */\n  onDrag(screenPosition: Vector2, realPosition: Vector2): void {\n    this.call('drag', this, screenPosition, realPosition);\n\n    let hitColor = Color.rgbaToString(this.flow.flowConnect.offUIContext.getImageData(screenPosition.x, screenPosition.y, 1, 1).data);\n    let hitUINodeWhileDragging = this.getHitUINode(hitColor);\n\n    if (this.currHitUINode && this.currHitUINode.draggable) {\n      if (hitUINodeWhileDragging === this.currHitUINode) {\n        this.currHitUINode.onDrag(screenPosition, realPosition);\n      } else {\n        this.currHitUINode.onExit(screenPosition, realPosition);\n        this.currHitUINode = null;\n        this.flow.flowConnect.currHitNode = null;\n        this.flow.flowConnect.pointers = [];\n      }\n    }\n  }\n  /** @hidden */\n  onContextMenu(): void {\n    this.call('rightclick', this);\n  }\n  /** @hidden */\n  onWheel(direction: boolean, screenPosition: Vector2, realPosition: Vector2): void {\n    this.call('wheel', this, direction, screenPosition, realPosition);\n\n    let hitColor = Color.rgbaToString(this.flow.flowConnect.offUIContext.getImageData(screenPosition.x, screenPosition.y, 1, 1).data);\n    let hitUINode = this.getHitUINode(hitColor);\n\n    hitUINode && hitUINode.zoomable && hitUINode.onWheel(direction, screenPosition, realPosition);\n  }\n  //#endregion\n\n  //#region UICreators\n  createLabel(text: string | number, options?: LabelCreatorOptions): Label {\n    return new Label(this, text, options);\n  }\n  createImage(source: string, options?: ImageCreatorOptions): Image {\n    return new Image(this, source, options);\n  }\n  createSlider(min: number, max: number, options?: SliderCreatorOptions) {\n    return new Slider(this, min, max, options);\n  }\n  createSlider2D(options?: Slider2DCreatorOptions) {\n    return new Slider2D(this, options);\n  }\n  createVSlider(min: number, max: number, options?: VSliderCreatorOptions) {\n    return new VSlider(this, min, max, options);\n  }\n  createDial(min: number, max: number, size: number, options?: DialCreatorOptions) {\n    return new Dial(this, min, max, size, options);\n  }\n  createHozLayout(childs: UINode[] = [], options?: HorizontalLayoutCreatorOptions) {\n    return new HorizontalLayout(this, childs, options);\n  }\n  createStack(options?: StackCreatorOptions) {\n    return new Stack(this, options);\n  }\n  createButton(text: string, options?: ButtonCreatorOption) {\n    return new Button(this, text, options);\n  }\n  createToggle(options?: ToggleCreatorOptions) {\n    return new Toggle(this, options);\n  }\n  createRadioGroup(values?: string[], selected?: string, options?: RadioGroupCreatorOptions) {\n    return new RadioGroup(this, values, selected, options);\n  }\n  createSelect(values: string[], options?: SelectCreatorOptions) {\n    return new Select(this, values, options);\n  }\n  createSource(options?: SourceCreatorOptions) {\n    return new Source(this, options);\n  }\n  createDisplay(height: number, renderers: CustomRendererConfig[], options?: DisplayCreatorOptions) {\n    return new Display(this, height, renderers, options);\n  }\n  createInput(options?: InputCreatorOptions) {\n    return new Input(this, options);\n  }\n  createEnvelope(height: number, values?: Vector2[], options?: EnvelopeCreatorOptions): Envelope {\n    return new Envelope(this, height, values, options);\n  }\n  //#endregion\n\n  serialize(): SerializedNode {\n    return {\n      id: this.id,\n      name: this.name,\n      position: this.position.serialize(),\n      width: this.width,\n      props: this.props,\n      inputs: this.inputs.map(terminal => terminal.serialize()),\n      outputs: this.outputs.map(terminal => terminal.serialize()),\n      style: this.style,\n      terminalStyle: this.terminalStyle,\n      hitColor: this.hitColor.serialize(),\n      zIndex: this.zIndex,\n      focused: this.focused,\n      renderState: this.renderState,\n      ui: this.ui.serialize()\n    };\n  }\n  static deSerialize(flow: Flow, data: SerializedNode): Node {\n    return new Node(flow, data.name, Vector2.deSerialize(data.position), data.width, data.inputs, data.outputs, {\n      style: data.style,\n      terminalStyle: data.terminalStyle,\n      props: data.props,\n      id: data.id,\n      hitColor: Color.deSerialize(data.hitColor),\n      ui: data.ui\n    });\n  }\n}\n\nexport interface NodeStyle {\n  font?: string,\n  fontSize?: string,\n  titleFont?: string,\n  titleFontSize?: string,\n  padding?: number,\n  spacing?: number,\n  rowHeight?: number,\n  color?: string,\n  titleColor?: string,\n  titleHeight?: number,\n  terminalRowHeight?: number,\n  terminalStripMargin?: number,\n  maximizeButtonColor?: string,\n  expandButtonColor?: string;\n  nodeButtonSize?: number,\n  nodeButtonSpacing?: number,\n}\n/** @hidden */\nlet DefaultNodeStyle = () => {\n  return {\n    font: 'arial',\n    fontSize: '.75rem',\n    titleFont: 'arial',\n    titleFontSize: '.85rem',\n    color: '#000',\n    titleColor: '#000',\n    maximizeButtonColor: 'darkgrey',\n    nodeButtonSize: 10,\n    nodeButtonSpacing: 5,\n    expandButtonColor: '#000',\n    padding: 10,\n    spacing: 10,\n    rowHeight: 20,\n    titleHeight: 29,\n    terminalRowHeight: 24,\n    terminalStripMargin: 8\n  };\n};\n\nexport enum NodeState {\n  MAXIMIZED,\n  MINIMIZED\n}\n\nexport interface SerializedNode {\n  hitColor: SerializedColor,\n  zIndex: number,\n  focused: boolean,\n  id: string,\n  position: SerializedVector2,\n  props: { [key: string]: any },\n  renderState: RenderState,\n  inputs: SerializedTerminal[],\n  outputs: SerializedTerminal[],\n  name: string,\n  style: NodeStyle,\n  terminalStyle: TerminalStyle,\n  ui: SerializedContainer,\n  width: number,\n  subFlow?: SerializedFlow\n}\n\n/** @hidden */\nexport class NodeButton {\n  hitColor: Color;\n  deltaX: number = 0;\n\n  constructor(\n    public node: Node,\n    public callback: () => void,\n    public _render: (nodeButton: NodeButton, position: Vector2) => void,\n    public align: Align\n  ) {\n    this.setHitColor();\n  }\n\n  private setHitColor() {\n    let color = Color.Random();\n    while (this.node.hitColorToNodeButton[color.rgbaString]) color = Color.Random();\n    this.hitColor = color;\n    this.node.hitColorToNodeButton[this.hitColor.rgbaString] = this;\n  }\n  render() {\n    this.node.context.save();\n    this._render(this, this.node.position.add(this.deltaX, this.node.style.titleHeight / 2 - this.node.style.nodeButtonSize / 2));\n    this.node.context.restore();\n\n    this.node.offUIContext.save();\n    this._offUIRender();\n    this.node.offUIContext.restore();\n  }\n  private _offUIRender() {\n    this.node.offUIContext.fillStyle = this.hitColor.rgbaCSSString;\n    this.node.offUIContext.fillRect(\n      this.node.position.x + this.deltaX,\n      this.node.position.y + this.node.style.titleHeight / 2 - this.node.style.nodeButtonSize / 2,\n      this.node.style.nodeButtonSize,\n      this.node.style.nodeButtonSize\n    );\n  }\n}\n\nexport interface NodeConstructorOptions {\n  style?: NodeStyle,\n  terminalStyle?: TerminalStyle,\n  props?: Object,\n  id?: string,\n  hitColor?: Color,\n  ui?: Container | SerializedContainer\n}\nlet DefaultNodeConstructorOptions = (): NodeConstructorOptions => {\n  return {\n    style: {},\n    terminalStyle: {},\n    props: {},\n    id: getNewUUID(),\n  }\n}\n\ninterface ToggleCreatorOptions {\n  propName?: string,\n  input?: boolean,\n  output?: boolean,\n  height?: number,\n  style?: ToggleStyle\n}\ninterface StackCreatorOptions {\n  childs?: UINode[],\n  style?: StackStyle\n}\ninterface SourceCreatorOptions {\n  accept?: string,\n  propName?: string,\n  input?: boolean,\n  output?: boolean,\n  height?: number,\n  style?: SourceStyle\n}\ninterface SliderCreatorOptions {\n  value?: number,\n  propName?: string,\n  input?: boolean,\n  output?: boolean,\n  height?: number,\n  style?: SliderStyle\n}\ninterface VSliderCreatorOptions {\n  value?: number,\n  propName?: string,\n  input?: boolean,\n  output?: boolean,\n  height?: number,\n  width?: number,\n  style?: VSliderStyle\n}\ninterface Slider2DCreatorOptions {\n  value?: Vector2,\n  propName?: string,\n  input?: boolean,\n  output?: boolean,\n  height?: number,\n  style?: Slider2DStyle\n}\ninterface SelectCreatorOptions {\n  height?: number,\n  propName?: string,\n  input?: boolean,\n  output?: boolean,\n  style?: SelectStyle\n}\ninterface RadioGroupCreatorOptions {\n  propName?: string,\n  input?: boolean,\n  output?: boolean,\n  height?: number,\n  style?: RadioGroupStyle\n}\ninterface LabelCreatorOptions {\n  propName?: string,\n  input?: boolean,\n  output?: boolean,\n  style?: LabelStyle,\n  height?: number\n}\ninterface InputCreatorOptions {\n  value?: string | number,\n  propName?: string,\n  input?: boolean,\n  output?: boolean,\n  height?: number,\n  style?: InputStyle\n}\ninterface ImageCreatorOptions {\n  propName?: string,\n  style?: ImageStyle\n}\ninterface HorizontalLayoutCreatorOptions {\n  style?: HorizontalLayoutStyle,\n  input?: boolean,\n  output?: boolean\n}\ninterface ButtonCreatorOption {\n  input?: boolean,\n  output?: boolean,\n  height?: number,\n  style?: ButtonStyle\n}\ninterface DialCreatorOptions {\n  value?: number\n  propName?: string,\n  input?: boolean,\n  output?: boolean,\n  style?: DialStyle,\n}\ninterface DisplayCreatorOptions {\n  style?: DisplayStyle\n}\ninterface EnvelopeCreatorOptions {\n  input?: boolean,\n  output?: boolean,\n  style?: EnvelopeStyle\n}\n","import { Vector2 } from './vector';\nimport { Color } from './color';\nimport { Flow, FlowState } from './flow';\nimport { Node, NodeButton, NodeStyle, SerializedNode } from './node';\nimport { Terminal, TerminalType, TerminalStyle } from './terminal';\nimport { TunnelNode } from './tunnel-node';\nimport { Align } from '../common/enums';\n\nexport class SubFlowNode extends Node {\n  subFlow: Flow;\n\n  constructor(\n    flow: Flow,\n    subFlow: Flow,\n    position: Vector2,\n    width: number,\n    inputs: any[],\n    outputs: any[],\n    options: SubFlowOptions = DefaultSubFlowOptions()\n  ) {\n\n    super(flow, options.name || 'New SubFlow', position, width, inputs ? inputs : [], outputs ? outputs : [], {\n      style: options.style,\n      terminalStyle: options.terminalStyle,\n      props: options.props,\n      id: options.id,\n      hitColor: options.hitColor\n    });\n\n    this.subFlow = subFlow;\n\n    this.subFlow.on('add-input', (_, tunnel: TunnelNode) => {\n      let proxyTerminal = new Terminal(this, TerminalType.IN, tunnel.outputs[0].dataType, tunnel.outputs[0].name);\n      tunnel.proxyTerminal = proxyTerminal;\n      this.addTerminal(proxyTerminal);\n    });\n    this.subFlow.on('add-output', (_, tunnel: TunnelNode) => {\n      let proxyTerminal = new Terminal(this, TerminalType.OUT, tunnel.inputs[0].dataType, tunnel.inputs[0].name);\n      tunnel.proxyTerminal = proxyTerminal;\n      this.addTerminal(proxyTerminal);\n    });\n\n    this.subFlow.inputs.forEach((inputNode, index) => inputNode.proxyTerminal = this.inputs[index]);\n    this.subFlow.outputs.forEach((outputNode, index) => outputNode.proxyTerminal = this.outputs[index]);\n\n    this.addNodeButton(() => {\n      this.flow.flowConnect.render(this.subFlow);\n    }, (_nodeButton: NodeButton, pos: Vector2) => {\n      let context = this.context;\n      context.strokeStyle = this.style.expandButtonColor;\n\n      context.beginPath();\n      context.moveTo(pos.x, pos.y + this.style.nodeButtonSize / 2);\n      context.lineTo(pos.x, pos.y + this.style.nodeButtonSize);\n      context.lineTo(pos.x + this.style.nodeButtonSize, pos.y);\n      context.lineTo(pos.x + this.style.nodeButtonSize, pos.y + this.style.nodeButtonSize / 2);\n      context.moveTo(pos.x + this.style.nodeButtonSize, pos.y);\n      context.lineTo(pos.x + this.style.nodeButtonSize / 2, pos.y);\n      context.moveTo(pos.x, pos.y + this.style.nodeButtonSize);\n      context.lineTo(pos.x + this.style.nodeButtonSize / 2, pos.y + this.style.nodeButtonSize);\n      context.closePath();\n\n      context.stroke();\n    }, Align.Right);\n  }\n\n  /** @hidden */\n  run() {\n    if (this.flow.state === FlowState.Stopped) return;\n    this.subFlow.start();\n  }\n  serialize(): SerializedNode {\n    return {\n      id: this.id,\n      name: this.name,\n      position: this.position.serialize(),\n      width: this.width,\n      props: this.props,\n      inputs: this.inputs.map(terminal => terminal.serialize()),\n      outputs: this.outputs.map(terminal => terminal.serialize()),\n      style: this.style,\n      terminalStyle: this.terminalStyle,\n      hitColor: this.hitColor.serialize(),\n      zIndex: this.zIndex,\n      focused: this.focused,\n      renderState: this.renderState,\n      ui: this.ui.serialize(),\n      subFlow: this.subFlow.serialize()\n    };\n  }\n  static deSerialize(flow: Flow, data: SerializedNode): SubFlowNode {\n    let subFlow = Flow.deSerialize(flow.flowConnect, data.subFlow);\n    return new SubFlowNode(flow, subFlow, Vector2.deSerialize(data.position), data.width, data.inputs, data.outputs, {\n      name: data.name,\n      style: data.style,\n      terminalStyle: data.terminalStyle,\n      props: data.props,\n      id: data.id,\n      hitColor: Color.deSerialize(data.hitColor)\n    });\n  }\n}\n\nexport interface SubFlowOptions {\n  name?: string,\n  style?: NodeStyle,\n  terminalStyle?: TerminalStyle,\n  props?: Object,\n  id?: string,\n  hitColor?: Color\n}\nlet DefaultSubFlowOptions = (): SubFlowOptions => {\n  return {\n    style: {},\n    terminalStyle: {},\n    props: {}\n  }\n}\n","import { Vector2 } from \"./vector\";\nimport { getNewUUID, canConnect } from \"../utils/utils\";\nimport { Color, SerializedColor } from \"./color\";\nimport { Connector, ConnectorStyle } from './connector';\nimport { Hooks } from './hooks';\nimport { Node } from './node';\nimport { Events, Serializable } from \"../common/interfaces\";\nimport { Log } from \"../utils/logger\";\nimport { Constant } from \"../resource/constants\";\n\nexport class Terminal extends Hooks implements Events, Serializable {\n  connectors: Connector[];\n  focus: boolean;\n\n  /**\n   * Terminals can hold any user-defined reference, using this variable to store a reference to something (and thereby binding it to this terminal) is helpful in special applications\n   * for e.g audio connections - terminal can hold a reference to WebAudio Node which can be used to connect said AudioNodes when two terminals are connected,\n   * almost all StandardNodes.Audio nodes uses this variable.\n   * This can be ignored for other applications where such pattern is not useful or doesn't make sense.\n  **/\n  ref: any;\n\n  /** @hidden */\n  position: Vector2;\n  /** @hidden */\n  hitColor: Color;\n\n  constructor(\n    public node: Node,\n    public type: TerminalType,\n    public dataType: string,\n    public name: string,\n    public style: TerminalStyle = {},\n    public id?: string,\n    hitColor?: Color) {\n\n    super();\n    this.hitColor = hitColor;\n    this.style = { ...DefaultTerminalStyle(), ...style };\n    this.id = id ? id : getNewUUID();\n    this.setHitColor(hitColor);\n    this.connectors = [];\n    this.position = Vector2.Zero();\n    this.focus = false;\n  }\n\n  getData(): any {\n    if (this.type === TerminalType.OUT) { Log.error(\"Cannot call 'getData' on output terminal\"); return; }\n    if (this.connectors.length > 0) return this.connectors[0].data;\n    return null;\n  }\n  setData(data: any) {\n    if (this.type === TerminalType.IN) { Log.error(\"Cannot call 'setData' on input terminal\"); return; }\n    this.connectors.forEach(connector => connector.data = data);\n  }\n\n  private setHitColor(hitColor: Color) {\n    if (!hitColor) {\n      hitColor = Color.Random();\n      while (this.node.hitColorToTerminal[hitColor.rgbaString] || this.node.hitColorToUI[hitColor.rgbaString]) hitColor = Color.Random();\n    }\n    this.hitColor = hitColor;\n    this.node.hitColorToTerminal[this.hitColor.rgbaString] = this;\n  }\n  render() {\n    let context = this.node.context;\n    context.save();\n\n    if (this.focus) {\n      context.beginPath();\n      context.arc(this.position.x, this.position.y, this.style.radius * 3, 0, Constant.TAU);\n      context.fillStyle = this.style.focusColor;\n      context.fill();\n    }\n\n    if (this.dataType === 'event') {\n      context.beginPath();\n      context.moveTo(this.position.x, this.position.y - this.style.radius * 1.3);\n      context.lineTo(this.position.x + this.style.radius * 1.3, this.position.y);\n      context.lineTo(this.position.x, this.position.y + this.style.radius * 1.3);\n      context.lineTo(this.position.x - this.style.radius * 1.3, this.position.y);\n      context.lineTo(this.position.x, this.position.y - this.style.radius * 1.3);\n      context.closePath();\n    } else {\n      context.beginPath();\n      context.arc(this.position.x, this.position.y, this.style.radius, 0, Constant.TAU);\n    }\n    context.fillStyle = this.focus ? '#00ff00' : (this.node.flow.terminalTypeColors[this.dataType] || '#888');\n    context.strokeStyle = this.style.borderColor;\n    context.shadowBlur = this.style.shadowBlur;\n    context.shadowColor = this.style.shadowColor;\n    context.fill();\n    context.stroke();\n\n    context.restore();\n\n    this.offUIRender();\n  }\n  connect(otherTerminal: Terminal, style?: ConnectorStyle): boolean {\n    // Check if already connected\n    if (this.type !== otherTerminal.type) {\n      let start = this.type === TerminalType.OUT ? this : otherTerminal;\n      let end = this.type === TerminalType.IN ? this : otherTerminal;\n      if (end.connectors.length > 0 && start.connectors.includes(end.connectors[0])) return false;\n    }\n\n    // Check if these terminals can be connected\n    if (canConnect(this, otherTerminal, this.node.flow.rules, this.node.flow.executionGraph)) {\n      let newConnector = new Connector(this.node.flow, this.type === TerminalType.OUT ? this : otherTerminal, this.type === TerminalType.IN ? this : otherTerminal, null, style);\n      this.node.flow.connectors[newConnector.id] = newConnector;\n\n      return true;\n    } else return false;\n  }\n  /**\n   * Disconnects terminal to terminal connections.\n   * If no parameters are passed and the terminal on which this method is called is an output terminal then,\n   * all the connections going out from this terminal will be diconnected.\n   * \n   * @param connector optional connector Id or reference, used only when the terminal on which this method is called is an Output terminal\n   * @returns \n   */\n  disconnect(connector?: string | Connector): boolean {\n    if (this.type === TerminalType.IN) {\n      this._disconnect(this.connectors[0]);\n      return true;\n    } else {\n      if (typeof connector === 'string') {\n        let cntr = this.connectors.find((currCntr => currCntr.id === connector));\n        if (!cntr) {\n          Log.error('Connector not found while disconnecting', connector);\n          return false;\n        }\n        this._disconnect(cntr);\n      } else if (connector instanceof Connector) {\n        if (!this.connectors.find(cntr => cntr.id === connector.id)) {\n          Log.error('Connector cannot be disconnected from the terminal because its not associated with it', connector);\n          return false;\n        }\n        this._disconnect(connector);\n      } else {\n        this.connectors.forEach(cntr => this._disconnect(cntr));\n      }\n      return true;\n    }\n  }\n  private _disconnect(connector: Connector): void {\n    let [startTerm, endTerm] = [connector.start, connector.end];\n    delete this.node.flow.connectors[connector.id];\n    connector.start.connectors.splice(connector.start.connectors.findIndex(cntr => cntr.id === connector.id), 1);\n    connector.end.connectors.pop();\n    this.node.flow.executionGraph.disconnect(startTerm.node, endTerm.node);\n    connector.start.onDisconnect(connector, startTerm, endTerm);\n    connector.end.onDisconnect(connector, startTerm, endTerm);\n  }\n  private offUIRender() {\n    let context = this.node.offUIContext;\n    context.save();\n\n    context.beginPath();\n    context.arc(this.position.x, this.position.y, this.style.radius + this.node.style.terminalStripMargin, 0, Constant.TAU);\n    context.fillStyle = this.hitColor.rgbaCSSString;\n    context.fill();\n\n    context.restore();\n  }\n  isConnected(): boolean {\n    return this.connectors.length > 0;\n  }\n\n  /** @hidden */\n  onEnter(screenPosition: Vector2, realPosition: Vector2): void {\n    this.call('enter', this, screenPosition, realPosition);\n\n    this.focus = true;\n    this.node.flow.flowConnect.cursor = 'pointer';\n  }\n  /** @hidden */\n  onExit(screenPosition: Vector2, realPosition: Vector2): void {\n    this.call('exit', this, screenPosition, realPosition);\n\n    this.focus = false;\n    this.node.flow.flowConnect.cursor = 'unset';\n  }\n  /** @hidden */\n  onDown(screenPosition: Vector2, realPosition: Vector2): void {\n    this.call('down', this, screenPosition, realPosition);\n\n    if (this.connectors.length > 0) {\n      if (this.type === TerminalType.IN) {\n        let [startTerm, endTerm] = [this.connectors[0].start, this.connectors[0].end];\n        this.connectors[0].endNode.currHitTerminal = null;\n        this.connectors[0].end = null;\n        this.connectors[0].endNode = null;\n        this.connectors[0].floatingTip = realPosition;\n        this.node.flow.flowConnect.floatingConnector = this.connectors[0];\n        let removedConnector = this.connectors.pop();\n        this.node.flow.executionGraph.disconnect(startTerm.node, endTerm.node);\n        removedConnector.start.onDisconnect(removedConnector, startTerm, endTerm);\n        this.onDisconnect(removedConnector, startTerm, endTerm);\n      } else {\n        if (this.node.flow.flowConnect.floatingConnector) return;\n        let connector = new Connector(this.node.flow, this, null, realPosition, {});\n        this.node.flow.connectors[connector.id] = connector;\n        this.node.flow.flowConnect.floatingConnector = connector;\n      }\n    } else {\n      if (this.node.flow.flowConnect.floatingConnector) return;\n      let connector = new Connector(this.node.flow, this.type === TerminalType.IN ? null : this, this.type === TerminalType.IN ? this : null, realPosition, {});\n      this.node.flow.connectors[connector.id] = connector;\n      this.node.flow.flowConnect.floatingConnector = connector;\n    }\n  }\n  /** @hidden */\n  onUp(screenPosition: Vector2, realPosition: Vector2): void {\n    this.call('up', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onDrag(screenPosition: Vector2, realPosition: Vector2): void {\n    this.call('drag', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onClick(screenPosition: Vector2, realPosition: Vector2): void {\n    this.call('click', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onOver(screenPosition: Vector2, realPosition: Vector2): void {\n    this.call('over', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onContextMenu(): void {\n    this.call('rightclick', this);\n  }\n\n  /** @hidden */\n  onConnect(connector: Connector) {\n    this.call('connect', this, connector);\n  }\n  /** @hidden */\n  onDisconnect(connector: Connector, startTerminal?: Terminal, endTerminal?: Terminal) {\n    this.call('disconnect', this, connector, startTerminal, endTerminal);\n  }\n  /** @hidden */\n  onEvent(data: any): void {\n    if (this.type === TerminalType.IN) {\n      this.call('event', this, data);\n    }\n  }\n  emit(data: any) {\n    if (this.type === TerminalType.OUT && this.connectors.length !== 0) {\n      this.connectors.forEach(connector => {\n        connector.end && connector.end.onEvent(data);\n      });\n    }\n  }\n\n  serialize(): SerializedTerminal {\n    return {\n      id: this.id,\n      type: this.type,\n      dataType: this.dataType,\n      name: this.name,\n      style: this.style,\n      hitColor: this.hitColor.serialize()\n    };\n  }\n  static deSerialize(node: Node, data: SerializedTerminal): Terminal {\n    return new Terminal(node, data.type, data.dataType, data.name, data.style, data.id, Color.deSerialize(data.hitColor));\n  }\n}\n\nexport enum TerminalType {\n  IN = 1,\n  OUT = 2\n}\n\nexport interface TerminalTypeColors {\n  [terminalType: string]: string;\n}\n\nexport interface TerminalStyle {\n  borderColor?: string,\n  shadowColor?: string,\n  shadowBlur?: number,\n  focusColor?: string,\n  radius?: number\n}\n\nexport interface SerializedTerminal {\n  name: string;\n  dataType: string;\n  id?: string;\n  hitColor?: SerializedColor;\n  type?: TerminalType;\n  style?: TerminalStyle\n}\n\n/** @hidden */\nlet DefaultTerminalStyle = () => {\n  return {\n    radius: 4,\n    borderColor: '#222',\n    shadowBlur: 0,\n    shadowColor: '#ccc',\n    focusColor: '#bbbbbb80'\n  };\n};\n","import { Vector2 } from \"./vector\";\nimport { Color } from \"./color\";\nimport { Flow } from \"./flow\";\nimport { Node, NodeStyle, SerializedNode } from \"./node\";\nimport { Terminal, TerminalStyle } from \"./terminal\";\n\nexport class TunnelNode extends Node {\n  private _proxyTerminal: Terminal;\n  /** @hidden */\n  get proxyTerminal(): Terminal { return this._proxyTerminal; }\n  /** @hidden */\n  set proxyTerminal(terminal: Terminal) {\n    this._proxyTerminal = terminal;\n    this._proxyTerminal.on('data', (_, data) => this.outputs[0].setData(data));\n  }\n\n  constructor(\n    flow: Flow,\n    name: string,\n    position: Vector2,\n    width: number,\n    inputs: any[],\n    outputs: any[],\n    options: TunnelNodeOptions = DefaultTunnelNodeOptions()\n  ) {\n\n    super(flow, name, position, width, inputs, outputs, {\n      style: options.style,\n      terminalStyle: options.terminalStyle,\n      props: options.props,\n      id: options.id,\n      hitColor: options.hitColor\n    });\n\n    if (this.inputs.length > 0) {\n      this.inputs[0].on('data', (_, data) => this.proxyTerminal.setData(data));\n    } else {\n      this.outputs[0].on('connect', (_, connector) => {\n        if (this.proxyTerminal.connectors.length > 0) {\n          connector.data = this.proxyTerminal.connectors[0].data;\n        }\n      });\n    }\n  }\n\n  serialize(): SerializedTunnelNode {\n    return {\n      id: this.id,\n      name: this.name,\n      position: this.position.serialize(),\n      width: this.width,\n      props: this.props,\n      inputs: this.inputs.map(terminal => terminal.serialize()),\n      outputs: this.outputs.map(terminal => terminal.serialize()),\n      style: this.style,\n      terminalStyle: this.terminalStyle,\n      hitColor: this.hitColor.serialize(),\n      zIndex: this.zIndex,\n      focused: this.focused,\n      renderState: this.renderState,\n      ui: this.ui.serialize(),\n      proxyTerminalId: this.proxyTerminal.id\n    }\n  }\n  static deSerialize(flow: Flow, data: SerializedTunnelNode): TunnelNode {\n    return new TunnelNode(flow, data.name, Vector2.deSerialize(data.position), data.width, data.inputs, data.outputs, {\n      style: data.style,\n      terminalStyle: data.terminalStyle,\n      props: data.props,\n      id: data.id,\n      hitColor: Color.deSerialize(data.hitColor)\n    });\n  }\n}\n\nexport interface SerializedTunnelNode extends SerializedNode {\n  proxyTerminalId: string\n}\n\nexport interface TunnelNodeOptions {\n  style?: NodeStyle,\n  terminalStyle?: TerminalStyle,\n  props?: Object,\n  id?: string,\n  hitColor?: Color,\n}\n/** @hidden */\nlet DefaultTunnelNodeOptions = (): TunnelNodeOptions => {\n  return {\n    style: {},\n    terminalStyle: {},\n    props: {}\n  }\n}\n","import { Serializable } from '../common/interfaces';\nimport { normalize, clamp } from '../utils/utils';\n\nexport class Vector2 implements Serializable {\n  x: number;\n  y: number;\n\n  constructor(xOrDOMPoint: number | DOMPoint, y?: number) {\n    if (xOrDOMPoint instanceof DOMPoint)\n      [this.x, this.y] = [xOrDOMPoint.x, xOrDOMPoint.y];\n    else\n      [this.x, this.y] = [xOrDOMPoint || 0, y || 0];\n  }\n\n  addInPlace(vector: Vector2): Vector2;\n  addInPlace(scalar: number): Vector2;\n  addInPlace(x: number, y: number): Vector2;\n  addInPlace(arg1: number | Vector2, arg2?: number): Vector2 {\n    if (arg1 instanceof Vector2) {\n      this.x += arg1.x;\n      this.y += arg1.y;\n    } else if (typeof arg2 === 'undefined') {\n      this.x += arg1;\n      this.y += arg1;\n    } else {\n      this.x += arg1;\n      this.y += arg2;\n    }\n    return this;\n  }\n  multiplyInPlace(vector: Vector2): Vector2;\n  multiplyInPlace(scalar: number): Vector2;\n  multiplyInPlace(x: number, y: number): Vector2;\n  multiplyInPlace(arg1: number | Vector2, arg2?: number): Vector2 {\n    if (arg1 instanceof Vector2) {\n      this.x *= arg1.x;\n      this.y *= arg1.y;\n    } else if (typeof arg2 === 'undefined') {\n      this.x *= arg1;\n      this.y *= arg1;\n    } else {\n      this.x *= arg1;\n      this.y *= arg2;\n    }\n    return this;\n  }\n  subtractInPlace(vector: Vector2): Vector2;\n  subtractInPlace(scalar: number): Vector2;\n  subtractInPlace(x: number, y: number): Vector2;\n  subtractInPlace(arg1: number | Vector2, arg2?: number): Vector2 {\n    if (arg1 instanceof Vector2) {\n      this.x -= arg1.x;\n      this.y -= arg1.y;\n    } else if (typeof arg2 === 'undefined') {\n      this.x -= arg1;\n      this.y -= arg1;\n    } else {\n      this.x -= arg1;\n      this.y -= arg2;\n    }\n    return this;\n  }\n  normalizeInPlace(min: number, max: number): Vector2;\n  normalizeInPlace(minX: number, maxX: number, minY: number, maxY: number): Vector2;\n  normalizeInPlace(min: number, max: number, minY?: number, maxY?: number): Vector2 {\n    if (typeof minY !== 'undefined' && typeof maxY !== 'undefined') {\n      this.x = normalize(this.x, min, max);\n      this.y = normalize(this.y, minY, maxY);\n    } else {\n      this.x = normalize(this.x, min, max);\n      this.y = normalize(this.y, min, max);\n    }\n\n    return this;\n  }\n  clampInPlace(min: number, max: number): Vector2;\n  clampInPlace(minX: number, maxX: number, minY: number, maxY: number): Vector2;\n  clampInPlace(min: number, max: number, minY?: number, maxY?: number): Vector2 {\n    if (typeof minY !== 'undefined' && typeof maxY !== 'undefined') {\n      this.x = clamp(this.x, min, max);\n      this.y = clamp(this.y, minY, maxY);\n    } else {\n      this.x = clamp(this.x, min, max);\n      this.y = clamp(this.y, min, max);\n    }\n\n    return this;\n  }\n  transformInPlace(transform: DOMMatrix): Vector2 {\n    let transformedPoint = transform.transformPoint(this);\n    [this.x, this.y] = [transformedPoint.x, transformedPoint.y];\n    return this;\n  }\n  absInPlace(): Vector2 {\n    this.x = Math.abs(this.x);\n    this.y = Math.abs(this.y);\n    return this;\n  }\n\n  add(vector: Vector2): Vector2;\n  add(scalar: number): Vector2;\n  add(x: number, y: number): Vector2;\n  add(arg1: number | Vector2, arg2?: number): Vector2 {\n    return (new Vector2(this.x, this.y) as any).addInPlace(arg1, arg2);\n  }\n  multiply(vector: Vector2): Vector2;\n  multiply(scalar: number): Vector2;\n  multiply(x: number, y: number): Vector2;\n  multiply(arg1: number | Vector2, arg2?: number): Vector2 {\n    return (new Vector2(this.x, this.y) as any).multiplyInPlace(arg1, arg2);\n  }\n  subtract(vector: Vector2): Vector2;\n  subtract(scalar: number): Vector2;\n  subtract(x: number, y: number): Vector2;\n  subtract(arg1: number | Vector2, arg2?: number): Vector2 {\n    return (new Vector2(this.x, this.y) as any).subtractInPlace(arg1, arg2);\n  }\n  normalize(min: number, max: number): Vector2;\n  normalize(minX: number, maxX: number, minY: number, maxY: number): Vector2;\n  normalize(min: number, max: number, minY?: number, maxY?: number): Vector2 {\n    return new Vector2(this.x, this.y).normalizeInPlace(min, max, minY, maxY);\n  }\n  clamp(min: number, max: number): Vector2;\n  clamp(minX: number, maxX: number, minY: number, maxY: number): Vector2;\n  clamp(min: number, max: number, minY?: number, maxY?: number): Vector2 {\n    return new Vector2(this.x, this.y).clampInPlace(min, max, minY, maxY);\n  }\n  isInside(start: Vector2, end: Vector2): boolean;\n  isInside(x1: number, y1: number, x2: number, y2: number): boolean;\n  isInside(arg1: number | Vector2, arg2: number | Vector2, arg3?: number, arg4?: number): boolean {\n    if (arg1 instanceof Vector2 && arg2 instanceof Vector2) {\n      if (this.x < arg1.x || this.x > arg2.x) return false;\n      if (this.y < arg1.y || this.y > arg2.y) return false;\n    } else {\n      if (this.x < arg1 || this.x > arg3) return false;\n      if (this.y < arg2 || this.y > arg4) return false;\n    }\n\n    return true;\n  }\n  assign(vector: Vector2): Vector2;\n  assign(scalar: number): Vector2;\n  assign(x: number, y: number): Vector2;\n  assign(arg1: number | Vector2, arg2?: number): Vector2 {\n    if (arg1 instanceof Vector2) {\n      this.x = arg1.x;\n      this.y = arg1.y;\n    } else if (typeof arg2 === 'undefined') {\n      this.x = arg1;\n      this.y = arg1;\n    } else {\n      this.x = arg1;\n      this.y = arg2;\n    }\n    return this;\n  }\n  transform(transform: DOMMatrix): Vector2 {\n    return new Vector2(this.x, this.y).transformInPlace(transform);\n  }\n  abs(): Vector2 {\n    return new Vector2(this.x, this.y).absInPlace();\n  }\n  toString() {\n    return '[' + this.x.toFixed(3) + ', ' + this.y.toFixed(3) + ']';\n  }\n  clone(): Vector2 {\n    return new Vector2(this.x, this.y);\n  }\n  max(): number {\n    return Math.max(this.x, this.y);\n  }\n  isEqual(vector: Vector2, threshold?: number): boolean {\n    if (typeof threshold !== 'undefined') {\n      return Vector2.Distance(this, vector) <= threshold;\n    }\n\n    return this.x === vector.x && this.y === vector.y;\n  }\n\n  static Distance(vector1OrX1: Vector2 | number, vector2OrY1: Vector2 | number, x2?: number, y2?: number): number {\n    if (vector1OrX1 instanceof Vector2 && vector2OrY1 instanceof Vector2) {\n      return Math.sqrt(Math.pow(vector2OrY1.x - vector1OrX1.x, 2) + Math.pow(vector2OrY1.y - vector1OrX1.y, 2));\n    } else if (typeof vector1OrX1 === 'number' && typeof vector2OrY1 === 'number') {\n      return Math.sqrt(Math.pow(x2 - vector1OrX1, 2) + Math.pow(y2 - vector2OrY1, 2));\n    }\n  }\n  static Midpoint(vector1: Vector2, vector2: Vector2): Vector2 {\n    return new Vector2((vector1.x + vector2.x) / 2, (vector1.y + vector2.y) / 2);\n  }\n  static Zero(): Vector2 {\n    return new Vector2(0, 0);\n  }\n  static Random(minX: number, maxX: number, minY: number, maxY: number): Vector2 {\n    return new Vector2(\n      Math.random() * (maxX - minX) + minX,\n      Math.random() * (maxY - minY) + minY\n    );\n  }\n\n  serialize(): SerializedVector2 {\n    return { x: this.x, y: this.y };\n  }\n  static deSerialize(data: SerializedVector2): Vector2 {\n    return new Vector2(data.x, data.y);\n  }\n}\n\nexport interface SerializedVector2 {\n  x: number, y: number\n}\n","import { Connector, Flow, Group, Node, Color, Hooks } from \"./core/index\";\nimport { Vector2 } from \"./core/vector\";\nimport { Dimension, Pointer, Rules } from \"./common/interfaces\";\nimport { intersects } from \"./utils/utils\";\nimport { Log } from './utils/logger';\nimport { TerminalType } from './core/terminal';\nimport { FlowState, FlowOptions, SerializedFlow } from './core/flow';\nimport { ViewPort } from './common/enums';\nimport { generateAudioWorklets, WorkletUtils } from \"./resource/audio-worklets\";\n\ndeclare global {\n  interface CanvasRenderingContext2D {\n    roundRect: (x: number, y: number, width: number, height: number, radius: number) => void,\n    strokeRoundRect: (x: number, y: number, width: number, height: number, radius: number) => void,\n    fillRoundRect: (x: number, y: number, width: number, height: number, radius: number) => void\n  }\n}\n/**\n * FlowConnect is like a placeholder that contains references to all Flows created by this instance and can render one flow at a time on-screen\n * \n * One FlowConnect instance is bound to exactly one HTMLCanvasElement, this instance maintains/tracks the dimensions of HTMLCanvasElement,\n * it registers user-interaction events (mouse, keyboard, touch) and creates additional OffScreenCanvas's to track/act-upon these events\n */\nexport class FlowConnect extends Hooks {\n  static async create(mount?: HTMLCanvasElement | HTMLDivElement): Promise<FlowConnect> {\n    let flowConnect = new FlowConnect(mount);\n    await flowConnect.setupAudioContext();\n    return flowConnect;\n  }\n\n  /** Reference to the canvas element on which the flows will be rendered by FlowConnect instance */\n  canvas: HTMLCanvasElement;\n  private _context: CanvasRenderingContext2D;\n  get context(): CanvasRenderingContext2D { return this._context }\n\n  /** Reference to the AudioContext (one FlowConnect instance will only have one audio context) */\n  private _audioContext: AudioContext;\n  get audioContext(): AudioContext { return this._audioContext }\n\n  /** @hidden Only used for audio stuff */\n  audioBufferCache: Map<ArrayBuffer, AudioBuffer> = new Map();\n  /** @hidden Only used for audio stuff */\n  arrayBufferCache: Map<string, ArrayBuffer> = new Map();\n\n  /** For rendering color hit-maps for Nodes */\n  offCanvas: OffscreenCanvas | HTMLCanvasElement;\n  private _offContext: OffscreenCanvasRenderingContext2D | CanvasRenderingContext2D;\n  get offContext(): OffscreenCanvasRenderingContext2D | CanvasRenderingContext2D { return this._offContext }\n\n  /** For rendering color hit-maps for UI elements and Terminals of Nodes */\n  offUICanvas: OffscreenCanvas | HTMLCanvasElement;\n  private _offUIContext: OffscreenCanvasRenderingContext2D | CanvasRenderingContext2D;\n  get offUIContext(): OffscreenCanvasRenderingContext2D | CanvasRenderingContext2D { return this._offUIContext }\n\n  /** For rendering color hit-maps for Groups */\n  offGroupCanvas: OffscreenCanvas | HTMLCanvasElement;\n  private _offGroupContext: OffscreenCanvasRenderingContext2D | CanvasRenderingContext2D;\n  get offGroupContext(): OffscreenCanvasRenderingContext2D | CanvasRenderingContext2D { return this._offGroupContext }\n\n  /** Canvas's absolute position and dimension from viewport origin (top-left) (for e.g. if the canvas element is inside a scrollable parent) */\n  canvasDimensions: Dimension = { top: 0, left: 0, width: 0, height: 0 };\n\n  get cursor(): string { return this.canvas.style.cursor; }\n  set cursor(cursor: string) { this.canvas.style.cursor = cursor; }\n\n  state: FlowConnectState = FlowConnectState.Stopped;\n\n  /** Id recieved from *requestAnimationFrame* */\n  private frameId: number;\n\n  /** Root flow of the flow-tree (Flow that contains SubFlowNodes that again contains SubFlowNodes and so on...) */\n  private rootFlow: Flow;\n  /** Flow which is currently rendered on the canvas */\n  private currFlow: Flow;\n\n  /** All the flows created by this FlowConnect instance  */\n  flows: Flow[] = [];\n\n  /** Reference of the current/previous Nodes/Groups under user-interaction (mouse, touch) */\n  currHitNode: Node;\n  private prevHitNode: Node;\n  private currHitGroup: Group;\n\n  /** Reference to the new Group being drawn */\n  private currGroup: Group;\n  private groupStartPoint: Vector2;\n\n  /** @hidden Reference to the new Connector being drawn */\n  floatingConnector: Connector;\n\n  /** For controlling user-interaction */\n  pointers: Pointer[] = [];\n  private keymap: { [key: string]: boolean } = {};\n  private touchControls: { [control: string]: boolean } = { 'CreateGroup': false };\n\n  /** @hidden HTML input overlayed on canvas when focused */\n  private genericInput: HTMLInputElement = document.createElement('input');\n  /** @hidden ResizeObservers to trigger re-render when dimensions change */\n  private parentResizeObserver: ResizeObserver;\n  private bodyResizeObserver: ResizeObserver;\n\n  minScale: number = 0.1;\n  maxScale: number = 5;\n  wheelScaleDelta: number = 1.05;\n  pinchScaleDelta: number = 1.02;\n  get scale(): number { return this._transform.a }\n  disableScale: boolean = false;\n  private _transform: DOMMatrix = new DOMMatrix();\n\n  /** Current transformation matrix */\n  get transform(): DOMMatrix { return this._transform }\n  private inverseTransform: DOMMatrix = new DOMMatrix();\n  private identity: DOMMatrix = new DOMMatrix();\n\n  /** Time (in ms) when one or more flows created by this FlowConnect instance was started */\n  startTime: number = -1;\n  private timerId: number;\n  /** No. of milliseconds passed since the start of one or more flows */\n  get time(): number { return (this.startTime < 0) ? this.startTime : (performance.now() - this.startTime) }\n\n  /**\n   * @param mount HTML element (div or canvas) on which FlowConnect will render Flows, if no mount is provided, a new canvas element will be created and attached to document.body\n   */\n  private constructor(mount?: HTMLCanvasElement | HTMLDivElement) {\n    super();\n    this.prepareCanvas(mount);\n    this.setupHitCanvas();\n    this.calculateCanvasDimension(true);\n    this.registerChangeListeners();\n    this.attachStyles();\n    this.polyfill();\n    this.registerEvents();\n    this.setGenericInput();\n  }\n\n  /** Re-calculates cavnvas position/dimension when scrolling/resizing happens */\n  private registerChangeListeners() {\n    let throttle = false;\n    document.addEventListener('scroll', () => {\n      if (!throttle) {\n        window.requestAnimationFrame(() => {\n          this.calculateCanvasDimension(false);\n          throttle = false;\n        });\n        throttle = true;\n      }\n    });\n    this.registerObservers(this.canvas.parentElement);\n  }\n  private registerObservers(parent: HTMLElement) {\n    this.parentResizeObserver && this.parentResizeObserver.disconnect();\n    this.bodyResizeObserver && this.bodyResizeObserver.disconnect();\n\n    this.parentResizeObserver = new ResizeObserver(() => {\n      this.calculateCanvasDimension(true);\n      this.updateTransform(null, null, null);\n    });\n    this.parentResizeObserver.observe(parent);\n    if (parent !== document.body) {\n      this.bodyResizeObserver = new ResizeObserver(() => {\n        this.calculateCanvasDimension(true);\n        this.updateTransform(null, null, null);\n      });\n      this.bodyResizeObserver.observe(document.body);\n    }\n  }\n  private prepareCanvas(mount?: HTMLCanvasElement | HTMLDivElement) {\n    if (!mount) {\n      this.canvas = document.createElement('canvas');\n      this.canvas.width = document.body.clientWidth;\n      this.canvas.height = document.body.clientHeight;\n      document.body.appendChild(this.canvas);\n    } else if (mount instanceof HTMLDivElement) {\n      this.canvas = document.createElement('canvas');\n      this.canvas.width = mount.clientWidth;\n      this.canvas.height = mount.clientHeight;\n      mount.appendChild(this.canvas);\n    } else if (mount instanceof HTMLCanvasElement) {\n      this.canvas = mount;\n    } else {\n      Log.error('mount provided is not of type HTMLDivElement or HTMLCanvasElement')\n    }\n\n    Object.assign(this.canvas.style, {\n      position: 'absolute',\n      width: '100%',\n      height: '100%'\n    })\n    this._context = this.canvas.getContext('2d');\n  }\n  /** Creates additional canvas's for rendering color hit-maps */\n  private setupHitCanvas() {\n    if (typeof OffscreenCanvas !== 'undefined' && typeof OffscreenCanvasRenderingContext2D !== 'undefined') {\n      this.offCanvas = new OffscreenCanvas(this.canvasDimensions.width, this.canvasDimensions.height);\n      this.offUICanvas = new OffscreenCanvas(this.canvasDimensions.width, this.canvasDimensions.height);\n      this.offGroupCanvas = new OffscreenCanvas(this.canvasDimensions.width, this.canvasDimensions.height);\n    } else {\n      this.offCanvas = document.createElement('canvas');\n      this.offUICanvas = document.createElement('canvas');\n      this.offGroupCanvas = document.createElement('canvas');\n    }\n    this._offContext = this.offCanvas.getContext('2d');\n    this._offUIContext = this.offUICanvas.getContext('2d');\n    this._offGroupContext = this.offGroupCanvas.getContext('2d');\n  }\n  private attachStyles() {\n    this.canvas.style.touchAction = 'none';\n\n    let inputStyle = document.createElement('style');\n    inputStyle.innerHTML = 'input.flow-connect-input { position: fixed; visibility: hidden; pointer-events: none; z-index: 100; border: none; border-radius: 0; box-sizing: border-box;} input.flow-connect-input:focus { outline: none; }';\n    document.getElementsByTagName('head')[0].appendChild(inputStyle);\n  }\n  private calculateCanvasDimension(adjust: boolean) {\n    if (adjust) {\n      let parentBoundingRect = this.canvas.parentElement.getBoundingClientRect();\n      this.canvas.width = parentBoundingRect.width;\n      this.canvas.height = parentBoundingRect.height;\n      this.call('dimension-change', this, this.canvas.width, this.canvas.height);\n    }\n\n    let boundingRect = this.canvas.getBoundingClientRect();\n    this.canvasDimensions = {\n      top: Math.round(boundingRect.top),\n      left: Math.round(boundingRect.left),\n      width: Math.round(boundingRect.width),\n      height: Math.round(boundingRect.height)\n    }\n\n    this.offCanvas.width = this.canvasDimensions.width;\n    this.offCanvas.height = this.canvasDimensions.height;\n    this.offUICanvas.width = this.canvasDimensions.width;\n    this.offUICanvas.height = this.canvasDimensions.height;\n    this.offGroupCanvas.width = this.canvasDimensions.width;\n    this.offGroupCanvas.height = this.canvasDimensions.height;\n  }\n  private polyfill() {\n    CanvasRenderingContext2D.prototype.roundRect = function (x: number, y: number, width: number, height: number, radius: number) {\n      this.beginPath();\n      this.moveTo(x + radius, y);\n      this.lineTo(x + width - radius, y);\n      this.quadraticCurveTo(x + width, y, x + width, y + radius);\n      this.lineTo(x + width, y + height - radius);\n      this.quadraticCurveTo(x + width, y + height, x + width - radius, y + height);\n      this.lineTo(x + radius, y + height);\n      this.quadraticCurveTo(x, y + height, x, y + height - radius);\n      this.lineTo(x, y + radius);\n      this.quadraticCurveTo(x, y, x + radius, y);\n      this.closePath();\n    }\n    CanvasRenderingContext2D.prototype.strokeRoundRect = function (x: number, y: number, width: number, height: number, radius: number) {\n      if (typeof radius === 'undefined') radius = 5;\n      this.roundRect(x, y, width, height, radius);\n      this.stroke();\n    }\n    CanvasRenderingContext2D.prototype.fillRoundRect = function (x: number, y: number, width: number, height: number, radius: number) {\n      if (typeof radius === 'undefined') radius = 5;\n      this.roundRect(x, y, width, height, radius);\n      this.fill();\n    }\n  }\n  private registerEvents(): void {\n    let dragDelta: Vector2;\n    let prevPanPosition: Vector2 = Vector2.Zero();\n    let prevPinchDistance: number = -1;\n\n    window.onkeydown = (ev: KeyboardEvent) => {\n      !this.keymap[ev.key] && (this.keymap[ev.key] = true);\n    }\n    window.onkeyup = (ev: KeyboardEvent) => {\n      this.keymap[ev.key] = false;\n    }\n\n    this.canvas.onpointerdown = (ev: PointerEvent) => {\n      if (!this.currFlow) return;\n\n      this.addPointer(ev.pointerId, this.getRelativePosition(ev));\n      if (this.pointers.length === 1) {\n        prevPanPosition = this.pointers[0].screenPosition;\n        this.currHitNode = this.getHitNode(this.pointers[0].screenPosition);\n        if (this.currHitNode) {\n          this.currHitNode.zIndex = Number.MAX_SAFE_INTEGER;\n          if (this.keymap['Control']) {\n            this.currHitNode.focused = !this.currHitNode.focused;\n          } else {\n            this.currFlow.removeAllFocus();\n            this.currHitNode.focused = true;\n          }\n          this.currHitNode.onDown(this.pointers[0].screenPosition.clone(), this.pointers[0].realPosition.clone());\n          dragDelta = this.currHitNode.position.subtract(this.pointers[0].realPosition);\n        } else {\n          if (!this.keymap['Control']) {\n            this.currFlow.removeAllFocus();\n\n            this.currHitGroup = this.getHitGroup(this.pointers[0].screenPosition);\n            this.currHitGroup && (dragDelta = this.currHitGroup.position.subtract(this.pointers[0].realPosition));\n          }\n          else if (this.keymap['Control'] || this.touchControls['CreateGroup']) {\n            this.groupStartPoint = this.pointers[0].realPosition.clone();\n            this.currGroup = new Group(this.currFlow, this.groupStartPoint.clone(), { name: 'New Group' });\n          }\n        }\n      } else {\n        this.currHitNode = null;\n        this.currHitGroup = null;\n        this.currFlow.removeAllFocus();\n        if (this.floatingConnector) {\n          this.fallbackConnection();\n        }\n      }\n    }\n    this.canvas.onpointerup = (ev) => {\n      if (!this.currFlow) return;\n\n      this.removePointer(this.pointers, ev);\n\n      if (this.pointers.length < 2) prevPinchDistance = -1;\n\n      let screenPosition = this.getRelativePosition(ev);\n      let realPosition = screenPosition.transform(this.inverseTransform);\n\n      if (this.currHitNode) this.handleGrouping(screenPosition);\n\n      this.currHitNode = null;\n      this.currHitGroup = null;\n\n      let hitNode = this.getHitNode(screenPosition);\n      hitNode && hitNode.onUp(screenPosition.clone(), realPosition.clone());\n\n      if (this.currGroup) {\n        let newGroup = this.currGroup;\n        this.currGroup = null;\n        if (newGroup.width > 10 && newGroup.height > 10) {\n          this.currFlow.groups.push(newGroup);\n          newGroup.setContainedNodes();\n        }\n      }\n      if (this.floatingConnector) this.handleConnection(hitNode, screenPosition, realPosition);\n    }\n    this.canvas.onpointerout = (ev) => {\n      if (!this.currFlow) return;\n\n      this.removePointer(this.pointers, ev);\n      if (this.pointers.length === 0) {\n        if (this.currHitNode) {\n          let screenPosition = this.getRelativePosition(ev);\n          this.handleGrouping(screenPosition);\n        }\n        this.currHitNode = null;\n        this.currHitGroup = null;\n      }\n\n      if (this.currGroup) {\n        let newGroup = this.currGroup;\n        this.currGroup = null;\n        if (newGroup.width > 10 && newGroup.height > 10) {\n          this.currFlow.groups.push(newGroup);\n          newGroup.setContainedNodes();\n        }\n      }\n\n      if (this.floatingConnector) this.fallbackConnection();\n\n      if (this.prevHitNode) {\n        let screenPosition = this.getRelativePosition(ev);\n        let realPosition = screenPosition.transform(this.inverseTransform);\n        this.prevHitNode.onExit(screenPosition, realPosition);\n        this.prevHitNode = null;\n      }\n    }\n    this.canvas.onpointermove = (ev) => {\n      if (!this.currFlow) return;\n\n      let screenPosition = this.getRelativePosition(ev);\n      let realPosition = screenPosition.transform(this.inverseTransform);\n\n      this.updatePointer(ev.pointerId, screenPosition, realPosition);\n\n      if (this.pointers.length === 2) {\n        let currPinchDistance = Vector2.Distance(this.pointers[0].screenPosition, this.pointers[1].screenPosition);\n        if (prevPinchDistance > 0) {\n          if (currPinchDistance !== prevPinchDistance) {\n            this.handleZoom(currPinchDistance > prevPinchDistance, Vector2.Midpoint(this.pointers[0].screenPosition, this.pointers[1].screenPosition), this.pinchScaleDelta);\n          }\n        }\n        prevPinchDistance = currPinchDistance;\n      }\n\n      if (this.currGroup) {\n        if (realPosition.x < this.groupStartPoint.x) this.currGroup.position.x = realPosition.x;\n        this.currGroup.width = Math.abs(this.groupStartPoint.x - realPosition.x);\n\n        if (realPosition.y < this.groupStartPoint.y) this.currGroup.position.y = realPosition.y;\n        this.currGroup.height = Math.abs(this.groupStartPoint.y - realPosition.y);\n      }\n\n      if (this.currHitNode) {\n        // If dragging UINode outside its bounds, Node can pre-empt currHitNode\n        this.currHitNode.onDrag(screenPosition.clone(), realPosition.clone());\n        if (this.currHitNode) {\n          if ((!this.currHitNode.currHitUINode || !this.currHitNode.currHitUINode.draggable) && !this.currHitNode.currHitTerminal && !this.floatingConnector) {\n            this.currHitNode.position = realPosition.add(dragDelta);\n\n            let hitGroup = this.getHitGroup(screenPosition);\n            if (hitGroup && hitGroup === this.currHitNode.group) {\n              let groupRealPos = hitGroup.position.transform(this._transform);\n              let nodeRealPos = this.currHitNode.position.transform(this._transform);\n\n              let intersection = intersects(groupRealPos.x, groupRealPos.y,\n                groupRealPos.x + hitGroup.width * this.scale,\n                groupRealPos.y + hitGroup.height * this.scale,\n                nodeRealPos.x, nodeRealPos.y,\n                nodeRealPos.x + this.currHitNode.width * this.scale,\n                nodeRealPos.y + this.currHitNode.ui.height * this.scale\n              );\n\n              if (intersection === ViewPort.INSIDE) {\n                let nodeIndex = hitGroup.nodes.findIndex(node => node.id === this.currHitNode.id);\n                hitGroup.nodeDeltas[nodeIndex] = this.currHitNode.position.subtract(hitGroup.position);\n              }\n            }\n          }\n        }\n      } else {\n        if (this.currHitGroup) {\n          this.currHitGroup.position = realPosition.add(dragDelta);\n        } else if (this.pointers.length === 1 && !this.keymap['Control'] && !this.touchControls['CreateGroup']) {\n          let delta = screenPosition.subtract(prevPanPosition).multiplyInPlace(1 / this.scale);\n          prevPanPosition = screenPosition;\n          this.updateTransform(null, null, delta);\n        }\n      }\n      if (this.floatingConnector) this.floatingConnector.floatingTip = realPosition;\n\n      if (ev.pointerType === 'mouse' && !this.currHitNode) {\n        let hitNode = this.getHitNode(screenPosition);\n        if (hitNode !== this.prevHitNode) {\n          this.prevHitNode && this.prevHitNode.onExit(screenPosition, realPosition);\n          hitNode && hitNode.onEnter(screenPosition, realPosition);\n        } else {\n          hitNode && (!this.currHitNode) && hitNode.onOver(screenPosition, realPosition);\n        }\n        this.prevHitNode = hitNode;\n      }\n    }\n    this.canvas.onclick = (ev) => {\n      if (!this.currFlow) return;\n\n      let screenPosition = this.getRelativePosition(ev);\n      let realPosition = screenPosition.transform(this.inverseTransform);\n      let hitNode = this.getHitNode(screenPosition);\n      hitNode && hitNode.onClick(screenPosition.clone(), realPosition.clone());\n\n      if (!hitNode) {\n        let hitGroup = this.getHitGroup(screenPosition);\n        hitGroup && hitGroup.onClick(screenPosition.clone(), realPosition.clone());\n      }\n    };\n    this.canvas.oncontextmenu = (ev) => {\n      if (!this.currFlow) return;\n\n      ev.preventDefault();\n\n      let screenPosition = this.getRelativePosition(ev);\n      let hitNode = this.getHitNode(screenPosition);\n      hitNode && hitNode.onContextMenu();\n      if (!this.keymap['Control']) this.currFlow.removeAllFocus();\n      hitNode && (hitNode.focused = true);\n    }\n    this.canvas.onwheel = (ev: WheelEvent) => {\n      if (!this.currFlow) return;\n\n      let screenPosition = this.getRelativePosition(ev);\n      let hitNode = this.getHitNode(screenPosition);\n      if (hitNode) {\n        let hitColor = Color.rgbaToString(this.offUIContext.getImageData(screenPosition.x, screenPosition.y, 1, 1).data);\n        let hitUINode = hitNode.getHitUINode(hitColor);\n\n        // Need to add touch compability for pinch on UINodes\n        if (hitUINode && hitUINode.zoomable) {\n          hitNode.onWheel(ev.deltaY < 0, screenPosition, screenPosition.transform(this.inverseTransform));\n          return;\n        }\n      }\n\n      if (!this.disableScale) {\n        ev.preventDefault();\n        this.handleZoom(ev.deltaY < 0, screenPosition, this.wheelScaleDelta);\n      }\n    }\n  }\n  private setGenericInput() {\n    this.genericInput.className = 'flow-connect-input';\n    this.genericInput.style.visibility = 'hidden';\n    this.genericInput.style.pointerEvents = 'none';\n    this.genericInput.style.padding = '0';\n\n    this.genericInput.onblur = () => {\n      this.genericInput.style.visibility = 'hidden';\n      this.genericInput.style.pointerEvents = 'none';\n\n      this.genericInput.onchange = null;\n    }\n\n    document.body.appendChild(this.genericInput);\n  }\n  private async setupAudioContext() {\n    if ((window as any).__FLOWCONNECT_AUDIO_CTX__) {\n      this._audioContext = (window as any).__FLOWCONNECT_AUDIO_CTX__;\n    } else {\n      this._audioContext = new AudioContext();\n      (window as any).__FLOWCONNECT_AUDIO_CTX__ = this._audioContext;\n    }\n\n    // This one-time setup is not at all related to FlowConnect, couldn't find any place to do this\n    // Might be a better idea to do this somewhere in StandardNodes.Audio scope\n\n    let audioWorklets = generateAudioWorklets(WorkletUtils.CircularBuffer);\n    await this.audioContext.audioWorklet.addModule(WorkletUtils.CircularBuffer);\n    return Promise.all(Object.keys(audioWorklets).map(key => this.audioContext.audioWorklet.addModule(audioWorklets[key])));\n  }\n  /** @hidden */\n  showGenericInput(position: Vector2 | DOMPoint, value: string, styles: { [key: string]: any }, attributes: { [key: string]: any }, callback: (value: string) => void) {\n    if (document.activeElement === this.genericInput) return;\n\n    Object.assign(this.genericInput.style, styles);\n    Object.assign(this.genericInput, attributes);\n\n    Object.assign(this.genericInput.style, {\n      left: (position.x + this.canvasDimensions.left) + 'px',\n      top: (position.y + this.canvasDimensions.top - 3) + 'px',\n      visibility: 'visible',\n      pointerEvents: 'all'\n    });\n    this.genericInput.value = value;\n    this.genericInput.onchange = () => callback(this.genericInput.value);\n    this.genericInput.focus();\n  }\n  changeParent(newParent: HTMLElement) {\n    this.registerObservers(newParent);\n  }\n  private updatePointer(id: number, screenPosition: Vector2, realPosition: Vector2) {\n    let pointer = this.pointers.find(pntr => pntr.id === id);\n    if (pointer) {\n      pointer.screenPosition = screenPosition;\n      pointer.realPosition = realPosition;\n    }\n  }\n  private handleZoom(zoomIn: boolean, origin: Vector2, scaleDelta: number) {\n    if ((this._transform.a >= this.maxScale && zoomIn) || (this._transform.a <= this.minScale && !zoomIn)) return;\n    this.updateTransform(zoomIn ? scaleDelta : (1 / scaleDelta), origin, null);\n    this.call('scale', this.scale);\n  }\n  private handleGrouping(screenPosition: Vector2) {\n    let hitGroup = this.getHitGroup(screenPosition);\n\n    let intersection;\n    if (hitGroup) {\n      let groupRealPos = hitGroup.position.transform(this._transform);\n      let nodeRealPos = this.currHitNode.position.transform(this._transform);\n\n      intersection = intersects(groupRealPos.x, groupRealPos.y,\n        groupRealPos.x + hitGroup.width * this.scale,\n        groupRealPos.y + hitGroup.height * this.scale,\n        nodeRealPos.x, nodeRealPos.y,\n        nodeRealPos.x + this.currHitNode.width * this.scale,\n        nodeRealPos.y + this.currHitNode.ui.height * this.scale\n      );\n    }\n\n    if (this.currHitNode.group) {\n      if (this.currHitNode.group !== hitGroup) {\n        let nodeIndex = this.currHitNode.group.nodes.findIndex(node => node.id === this.currHitNode.id);\n        this.currHitNode.group.nodes.splice(nodeIndex, 1);\n        this.currHitNode.group.nodeDeltas.splice(nodeIndex, 1);\n        this.currHitNode.group = null;\n      } else {\n        if (intersection !== ViewPort.INSIDE) {\n          let nodeIndex = this.currHitNode.group.nodes.findIndex(node => node.id === this.currHitNode.id);\n          this.currHitNode.group.nodes.splice(nodeIndex, 1);\n          this.currHitNode.group.nodeDeltas.splice(nodeIndex, 1);\n          this.currHitNode.group = null;\n        }\n      }\n    }\n\n    if (hitGroup) {\n      if (intersection === ViewPort.INSIDE) {\n        this.currHitNode.group = hitGroup;\n        hitGroup.nodes.push(this.currHitNode);\n        hitGroup.nodeDeltas.push(this.currHitNode.position.subtract(hitGroup.position));\n      }\n    }\n  }\n  private handleConnection(hitNode: Node, screenPosition: Vector2, realPosition: Vector2) {\n    if (!hitNode) {\n      this.fallbackConnection();\n      return;\n    }\n    let hitTerminal = hitNode.getHitTerminal(\n      Color.rgbaToString(this._offUIContext.getImageData(screenPosition.x, screenPosition.y, 1, 1).data),\n      screenPosition.clone(),\n      realPosition.clone()\n    );\n    if (hitTerminal) hitNode.currHitTerminal = hitTerminal;\n    if (!hitTerminal) {\n      this.fallbackConnection();\n      return;\n    }\n\n    let destination = hitNode.currHitTerminal;\n    if (!this.floatingConnector.canConnect(destination)) {\n      this.fallbackConnection();\n      hitNode.currHitTerminal = null;\n    } else {\n      if (destination.type === TerminalType.OUT) {\n        this.floatingConnector.completeConnection(destination);\n        hitNode.currHitTerminal = null;\n      } else {\n        if (destination.connectors.length > 0) {\n          if (destination.connectors[0].start === this.floatingConnector.start) {\n            this.fallbackConnection();\n            hitNode.currHitTerminal = null;\n            return;\n          }\n          let index = destination.connectors[0].start.connectors.indexOf(destination.connectors[0]);\n          let [oldConnector] = destination.connectors[0].start.connectors.splice(index, 1);\n          let [startTerm, endTerm] = [oldConnector.start, oldConnector.end];\n          delete this.currFlow.connectors[oldConnector.id];\n          this.currFlow.executionGraph.disconnect(startTerm.node, endTerm.node);\n          oldConnector.start.onDisconnect(oldConnector, startTerm, endTerm);\n          oldConnector.end.onDisconnect(oldConnector, startTerm, endTerm);\n\n          this.floatingConnector.completeConnection(destination);\n          hitNode.currHitTerminal = null;\n        } else {\n          this.floatingConnector.completeConnection(destination);\n          hitNode.currHitTerminal = null;\n        }\n      }\n      this.floatingConnector = null;\n    }\n  }\n  private getRelativePosition(ev: PointerEvent | WheelEvent | MouseEvent) {\n    return new Vector2(ev.clientX - this.canvasDimensions.left, ev.clientY - this.canvasDimensions.top);\n  }\n  private updateTransform(scale?: number, scaleOrigin?: Vector2, translate?: Vector2) {\n    if (scale) {\n      let realSpaceOrigin = scaleOrigin.transform(this.inverseTransform);\n      this._transform\n        .translateSelf(realSpaceOrigin.x, realSpaceOrigin.y)\n        .scaleSelf(scale, scale)\n        .translateSelf(-realSpaceOrigin.x, -realSpaceOrigin.y);\n    }\n    if (translate) {\n      this._transform.translateSelf(translate.x, translate.y);\n    }\n\n    this.inverseTransform = this._transform.inverse();\n\n    this._context.setTransform(this._transform);\n    this._offContext.setTransform(this._transform);\n    this._offUIContext.setTransform(this._transform);\n    this._offGroupContext.setTransform(this._transform);\n\n    this.call('transform', this);\n  }\n  translateBy(delta: Vector2) {\n    this.updateTransform(null, null, delta);\n  }\n  scaleBy(scale: number, scaleOrigin: Vector2) {\n    this.updateTransform(scale, scaleOrigin);\n  }\n  private fallbackConnection() {\n    this.floatingConnector.removeConnection();\n    this.currFlow.removeConnector(this.floatingConnector.id);\n  }\n  private addPointer(pointerId: number, position: Vector2) {\n    this.pointers.push({\n      id: pointerId,\n      screenPosition: position,\n      realPosition: position.transform(this.inverseTransform)\n    });\n  }\n  private removePointer(pointers: Pointer[], ev: PointerEvent) {\n    pointers.splice(pointers.findIndex(pointer => pointer.id === ev.pointerId), 1);\n  }\n  private getHitNode(position: Vector2): Node {\n    let rgbaString = Color.rgbaToString(this._offContext.getImageData(position.x, position.y, 1, 1).data);\n    return this.currFlow.hitColorToNode[rgbaString];\n  }\n  private getHitGroup(position: Vector2): Group {\n    let rgbaString = Color.rgbaToString(this._offGroupContext.getImageData(position.x, position.y, 1, 1).data);\n    return this.currFlow.hitColorToGroup[rgbaString];\n  }\n  private clear() {\n    this._context.save();\n    this._context.setTransform(this.identity);\n    this._context.clearRect(0, 0, this.canvasDimensions.width, this.canvasDimensions.height);\n    this._context.restore();\n\n    this._offContext.save();\n    this._offContext.setTransform(this.identity);\n    this._offContext.clearRect(0, 0, this.canvasDimensions.width, this.canvasDimensions.height);\n    this._offContext.restore();\n\n    this._offUIContext.save();\n    this._offUIContext.setTransform(this.identity);\n    this._offUIContext.clearRect(0, 0, this.canvasDimensions.width, this.canvasDimensions.height);\n    this._offUIContext.restore();\n\n    this._offGroupContext.save();\n    this._offGroupContext.setTransform(this.identity);\n    this._offGroupContext.clearRect(0, 0, this.canvasDimensions.width, this.canvasDimensions.height);\n    this._offGroupContext.restore();\n  }\n  /** @hidden */\n  startGlobalTime() {\n    if (this.startTime < 0) {\n      this.startTime = performance.now();\n      this._startGlobalTime();\n      this.state = FlowConnectState.Running;\n      this.call('start', this);\n    }\n  }\n  private _startGlobalTime() {\n    this.call('tick', this);\n    this.timerId = window.requestAnimationFrame(this._startGlobalTime.bind(this));\n  }\n  /** @hidden */\n  stopGlobalTime() {\n    if (this.isRootFlowStopped()) {\n      cancelAnimationFrame(this.timerId);\n      this.startTime = -1;\n      this.state = FlowConnectState.Stopped;\n      this.call('tickreset', this);\n      this.call('stop', this);\n    }\n  }\n  private isRootFlowStopped(): boolean {\n    let root = this.currFlow;\n    while (true) {\n      if (root.parentFlow) root = root.parentFlow;\n      else return root.state === FlowState.Stopped;\n    }\n  }\n  private _render() {\n    this.clear();\n\n    this.currGroup && this.currGroup.render();\n    this.currFlow.render();\n    this.call('update', this);\n\n    this.frameId = window.requestAnimationFrame(this._render.bind(this));\n  }\n\n  createFlow(options: FlowOptions = { name: 'New Flow', rules: {}, terminalTypeColors: {} }): Flow {\n    if (!options.rules) options.rules = {};\n    if (!options.terminalTypeColors) options.terminalTypeColors = {};\n\n    options.rules = { ...options.rules, ...DefaultRules() };\n    let flow = new Flow(this, options.name, options.rules, options.terminalTypeColors);\n    this.flows.push(flow);\n\n    flow.on('start', () => this.startGlobalTime());\n    flow.on('stop', () => this.stopGlobalTime());\n\n    return flow;\n  }\n  render(flow: Flow) {\n    if (flow === this.currFlow) return;\n    if (this.currFlow) {\n      window.cancelAnimationFrame(this.frameId);\n      this.currFlow.deregisterListeners();\n    }\n    if (!this.rootFlow || !this.rootFlow.existsInFlow(flow)) {\n      this.rootFlow = flow;\n    }\n    this.currFlow = flow;\n    this._render();\n  }\n  /** Render the root flow of the flow-tree */\n  top() {\n    this.render(this.rootFlow);\n  }\n  /** Creates a flow from json\n   * @param json Json string with schema SerializedFlow\n   */\n  fromJson(json: string): Flow {\n    let data: SerializedFlow;\n    let flow: Flow = null;\n\n    try {\n      data = JSON.parse(json);\n      flow = Flow.deSerialize(this, data);\n    } catch (error) {\n      Log.error(error);\n    }\n    return flow;\n  }\n  toJson(flow: Flow): string {\n    let serializedFlow: SerializedFlow = flow.serialize();\n    try {\n      return JSON.stringify(serializedFlow, null);\n    } catch (error) {\n      Log.error(error);\n    }\n  }\n}\n\nexport enum FlowConnectState {\n  Stopped,\n  Running\n}\n\n/** Default rules every Flow will have, for e.g. a string output can only be connected to string inputs.\n   *  ```javascript\n   *  {\n   *    'string': ['string'],\n   *    'number': ['number'],\n   *    'boolean': ['boolean'],\n   *    'file': ['file'],\n   *    'event': ['event'], ...\n   *  }\n   *  ```\n   */\nlet DefaultRules: () => Rules = () => ({\n  'string': ['string', 'any'],\n  'number': ['number', 'audioparam', 'any'],\n  'boolean': ['boolean', 'any'],\n  'array': ['array', 'any'],\n  'file': ['file', 'any'],\n  'event': ['event', 'any'],\n  'vector2': ['vector2', 'any'],\n  'array-buffer': ['array-buffer', 'any'],\n  'audio': ['audio', 'audioparam'],\n  'audioparam': ['audioparam'],\n  'audio-buffer': ['audio-buffer', 'any'],\n  'any': ['any']\n});\n\nexport * from './common/index';\nexport * from './core/index';\nexport { Constant } from './resource/constants';\nexport * from './ui/index';\nexport * from './utils/index';\n","export const WorkletUtils = {\n  CircularBuffer: URL.createObjectURL(new Blob([\n    `export default class CircularBuffer {\n      constructor(bufferLength, noOfChannels) {\n        this.noOfChannels = noOfChannels;\n        this.bufferLength = bufferLength;\n\n        this.read = this.write = this.frames = 0;\n        this.channels = [];\n        for (let i = 0; i < this.noOfChannels; ++i) this.channels[i] = new Float32Array(bufferLength);\n      }\n      pushBlock(buffer) {\n        let sourceLength = buffer[0].length;\n        for (let i = 0; i < sourceLength; ++i) {\n          let write = (this.write + i) % this.bufferLength;\n          for (let c = 0; c < this.noOfChannels; ++c) {\n            this.channels[c][write] = buffer[c][i];\n          }\n        }\n        this.write += sourceLength;\n        if (this.write >= this.bufferLength) this.write = 0;\n        this.frames += sourceLength;\n        if (this.frames > this.bufferLength) this.frames = this.bufferLength;\n      }\n      popBlock(buffer) {\n        if (this.frames === 0) return;\n        let destinationLength = buffer[0].length;\n        for (let i = 0; i < destinationLength; ++i) {\n          let read = (this.read + i) % this.bufferLength;\n          for (let c = 0; c < this.noOfChannels; ++c) {\n            buffer[c][i] = this.channels[c][read];\n          }\n        }\n        this.read += destinationLength;\n        if (this.read >= this.bufferLength) this.read = 0;\n        this.frames -= destinationLength;\n        if (this.frames < 0) this.frames = 0;\n      }\n    }`\n  ], { type: 'application/javascript' })),\n}\nexport const generateAudioWorklets = (utilsFileName: string) => {\n  let audioWorklets: { [name: string]: string } = {\n    // Creates a AudioWorkletProcessor to setup custom AudioParams for AudioBufferSourceNode's automation (because of their fire-forget-destroy behaviour)\n    Worklet_ProxyParamForSource: URL.createObjectURL(new Blob([\n      `registerProcessor('proxy-param-for-source', class ProxyParamForSource extends AudioWorkletProcessor {\n          static get parameterDescriptors() {\n            return [{\n              name: 'detune',\n              defaultValue: 0,\n              minValue: -2400,\n              maxValue: 2400,\n              automationRate: 'k-rate'\n            }, {\n              name: 'playbackRate',\n              defaultValue: 1,\n              minValue: 0.25,\n              maxValue: 3,\n              automationRate: 'k-rate'\n            }]\n          }\n          process(inputs, outputs, parameters) {\n            outputs[0].forEach(channel => {\n              for (let i = 0; i < channel.length; i++) {\n                // wierd bug, the detune is off by 1200 cents, have to offset this anomaly\n                channel[i] = (parameters['detune'].length > 1 ? parameters['detune'][i] : parameters['detune'][0]) - 1200;\n              }\n            });\n            outputs[1].forEach(channel => {\n              for (let i = 0; i < channel.length; i++) {\n                channel[i] = (parameters['playbackRate'].length > 1 ? parameters['playbackRate'][i] : parameters['playbackRate'][0]);\n              }\n            });\n            return true;\n          }\n        })`\n    ], { type: 'application/javascript' })),\n\n    // Same as above, but not specifically for AudioBufferSourceNodes, this is more general purpose\n    Worklet_ProxyParam: URL.createObjectURL(new Blob([\n      `registerProcessor('proxy-param', class ProxyParam extends AudioWorkletProcessor {\n          static get parameterDescriptors() {\n            return [{\n              name: 'param',\n              defaultValue: 0,\n              minValue: -340282346638528859811704183484516925439,\n              maxValue: 340282346638528859811704183484516925439,\n              automationRate: 'k-rate'\n            }]\n          }\n\n          min = -340282346638528859811704183484516925439;\n          max =  340282346638528859811704183484516925439;\n          offset = 0;\n          constructor(...args) {\n            super(...args);\n            this.port.onmessage = (e) => {\n              switch(e.data.type) {\n                case 'set-range': {\n                  this.min = e.data.value.min;\n                  this.max = e.data.value.max;\n                  break;\n                }\n                case 'set-offset': {\n                  this.offset = -e.data.value\n                  break;\n                }\n                default: break;\n              }\n            }\n          }\n          clamp(value) { return Math.min(Math.max(value, this.min), this.max); }\n          process(inputs, outputs, parameters) {\n            outputs[0].forEach(channel => {\n              for (let i = 0; i < channel.length; i++) {\n                channel[i] = this.clamp((parameters['param'].length > 1 ? parameters['param'][i] : parameters['param'][0]) + this.offset);\n              }\n            });\n            return true;\n          }\n        })`\n    ], { type: 'application/javascript' })),\n\n    // This one is used to only peak at the audio data flowing through this node, mainly for debugging purposes\n    Worklet_Debug: URL.createObjectURL(new Blob([\n      `registerProcessor('debug', class Debug extends AudioWorkletProcessor {\n          throttle = 1000;\n          lastPeak = -Infinity;\n          constructor(...args) {\n            super(...args);\n            this.port.onmessage = (e) => {\n              this.throttle = e.data;\n            }\n          }\n          process(inputs, outputs, parameters) {\n            if (Date.now() - this.lastPeak > this.throttle) {\n              let data = {\n                inputs: inputs.map(input => input.length),\n                outputs: outputs.map(output => output.length)\n              };\n              this.port.postMessage(data);\n              this.lastPeak = Date.now();\n            }\n            let input = inputs[0];\n            let output = outputs[0]\n            for (let i = 0 ; i < input.length ; i+=1) {\n              for(let c = 0 ; c < input[i].length ; c+=1) {\n                output[i][c] = input[i][c];\n              }\n            }\n            return true;\n          }\n        })`\n    ], { type: 'application/javascript' })),\n\n    Worklet_MoogEffect: URL.createObjectURL(new Blob([\n      `import CircularBuffer from '${utilsFileName}'\n      registerProcessor('moog-effect', class MoogEffect extends AudioWorkletProcessor {\n      cutoff = 0.065;\n      resonance = 3.5;\n      f = 0; inputFactor = 0; fb = 0;\n\n      constructor(options) {\n        super();\n        this.bufferSize = options.processorOptions.bufferSize;\n\n        this.setParams();\n        this.port.onmessage = (e) => {\n          this.cutoff = e.data.cutoff;\n          this.resonance = e.data.resonance;\n          this.setParams();\n        }\n      }\n      setParams() {\n        this.f = this.cutoff * 1.16;\n        this.inputFactor = 0.35013 * (this.f * this.f) * (this.f * this.f);\n        this.fb = this.resonance * (1.0 - 0.15 * this.f * this.f);\n      }\n      channelsChanged(newNoOfChannels) {\n        this.channelCount = newNoOfChannels;\n        this.inputBuffer = new CircularBuffer(this.bufferSize, this.channelCount);\n        this.outputBuffer = new CircularBuffer(this.bufferSize, this.channelCount);\n        this.in1 = new Array(this.channelCount).fill(0);\n        this.in2 = new Array(this.channelCount).fill(0);\n        this.in3 = new Array(this.channelCount).fill(0);\n        this.in4 = new Array(this.channelCount).fill(0);\n        this.out1 = new Array(this.channelCount).fill(0);\n        this.out2 = new Array(this.channelCount).fill(0);\n        this.out3 = new Array(this.channelCount).fill(0);\n        this.out4 = new Array(this.channelCount).fill(0);\n      }\n\n      _process(input, output) {\n        for (let c = 0; c < input.length; ++c) {\n          for (let i = 0; i < input[c].length; ++i) {\n            input[c][i] -= this.out4[c] * this.fb;\n            input[c][i] *= this.inputFactor;\n            this.out1[c] = input[c][i] + 0.3 * this.in1[c] + (1 - this.f) * this.out1[c];\n            this.in1[c] = input[c][i];\n            this.out2[c] = this.out1[c] + 0.3 * this.in2[c] + (1 - this.f) * this.out2[c];\n            this.in2[c] = this.out1[c];\n            this.out3[c] = this.out2[c] + 0.3 * this.in3[c] + (1 - this.f) * this.out3[c];\n            this.in3[c] = this.out2[c];\n            this.out4[c] = this.out3[c] + 0.3 * this.in4[c] + (1 - this.f) * this.out4[c];\n            this.in4[c] = this.out3[c];\n            output[c][i] = this.out4[c];\n          }\n        }\n      }\n      process(inputs, outputs, parameters) {\n        let input = inputs[0], output = outputs[0];\n        if (input.length === 0) return true;\n\n        if (!this.prevChannelCount || this.prevChannelCount !== inputs[0].length) {\n          this.channelsChanged(inputs[0].length);\n          this.prevChannelCount = inputs[0].length;\n        }\n\n        this.inputBuffer.pushBlock(input);\n        if (this.inputBuffer.frames >= this.bufferSize) {\n          let tmpInBuffer = [], tmpOutBuffer = [];\n          for (let i = 0; i < this.channelCount; ++i) {\n            tmpInBuffer[i] = new Float32Array(this.bufferSize);\n            tmpOutBuffer[i] = new Float32Array(this.bufferSize);\n          }\n\n          this.inputBuffer.popBlock(tmpInBuffer);\n          this._process(tmpInBuffer, tmpOutBuffer);\n          this.outputBuffer.pushBlock(tmpOutBuffer);\n        }\n        this.outputBuffer.popBlock(output);\n        return true;\n      }\n    })`\n    ], { type: 'application/javascript' })),\n\n    Worklet_BitcrusherEffect: URL.createObjectURL(new Blob([\n      `import CircularBuffer from '${utilsFileName}'\n      registerProcessor('bitcrusher-effect', class BitcrusherEffect extends AudioWorkletProcessor {\n      bits = 4;\n      normFreq = 0.1;\n      step = 0;\n\n      constructor(options) {\n        super();\n        this.bufferSize = options.processorOptions.bufferSize;\n\n        this.setParams();\n        this.port.onmessage = (e) => {\n          this.bits = e.data.bits;\n          this.normFreq = e.data.normFreq;\n          this.setParams();\n        }\n      }\n      setParams() {\n        this.step = Math.pow(1 / 2, this.bits);\n      }\n      channelsChanged(newNoOfChannels) {\n        this.channelCount = newNoOfChannels;\n        this.inputBuffer = new CircularBuffer(this.bufferSize, this.channelCount);\n        this.outputBuffer = new CircularBuffer(this.bufferSize, this.channelCount);\n        this.phaser = new Array(this.channelCount).fill(0);\n        this.last = new Array(this.channelCount).fill(0);\n      }\n\n      _process(input, output) {\n        for (let c = 0; c < input.length; ++c) {\n          for (let i = 0; i < input[c].length; ++i) {\n            this.phaser[c] += this.normFreq;\n            if (this.phaser[c] >= 1.0) {\n              this.phaser[c] -= 1.0;\n              this.last[c] = this.step * Math.floor(input[c][i] / this.step + 0.5);\n            }\n            output[c][i] = this.last[c];\n          }\n        }\n      }\n      process(inputs, outputs, parameters) {\n        let input = inputs[0], output = outputs[0];\n        if (input.length === 0) return true;\n        if (!this.prevChannelCount || this.prevChannelCount !== inputs[0].length) {\n          this.channelsChanged(inputs[0].length);\n          this.prevChannelCount = inputs[0].length;\n        }\n        this.inputBuffer.pushBlock(input);\n        if (this.inputBuffer.frames >= this.bufferSize) {\n          let tmpInBuffer = [], tmpOutBuffer = [];\n          for (let i = 0; i < this.channelCount; ++i) {\n            tmpInBuffer[i] = new Float32Array(this.bufferSize);\n            tmpOutBuffer[i] = new Float32Array(this.bufferSize);\n          }\n          this.inputBuffer.popBlock(tmpInBuffer);\n          this._process(tmpInBuffer, tmpOutBuffer);\n          this.outputBuffer.pushBlock(tmpOutBuffer);\n        }\n        this.outputBuffer.popBlock(output);\n        return true;\n      }\n    })`\n    ], { type: 'application/javascript' })),\n\n    Worklet_LFO: URL.createObjectURL(new Blob([\n      `registerProcessor('lfo', class LFO extends AudioWorkletProcessor {\n      oscillation = 0.3;\n      offset = 0.85;\n      phaseInc = 0;\n      phase = 0;\n\n      constructor(options) {\n        super();\n        this.sampleRate = options.processorOptions.sampleRate;\n\n        this.port.onmessage = (e) => {\n          switch(e.data.type) {\n            case 'set-oscillation': { this.oscillation = e.data.value; break; }\n            case 'set-offset': { this.offset = e.data.value; break; }\n            case 'set-phase': { this.phase = e.data.value; break; }\n            case 'set-frequency': { this.phaseInc = 2 * Math.PI * e.data.value * 128 / this.sampleRate; break; }\n            case 'set-all': {\n              this.oscillation = e.data.value.oscillation;\n              this.offset = e.data.value.offset;\n              this.phase = e.data.value.phase;\n              this.phaseInc = 2 * Math.PI * e.data.value.frequency * 128 / this.sampleRate;\n              break;\n            }\n            default: return;\n          }\n        }\n      }\n      process(inputs, outputs, parameters) {\n        let output = outputs[0][0];\n\n        for (let i = 0; i < output.length; ++i) {\n          this.phase += this.phaseInc;\n          if (this.phase > 2 * Math.PI) this.phase = 0;\n          output[i] = this.offset + this.oscillation * Math.sin(this.phase);\n        }\n\n        return true;\n      }\n    })`\n    ], { type: 'application/javascript' })),\n\n    Worklet_Noise: URL.createObjectURL(new Blob([\n      `registerProcessor('noise', class Noise extends AudioWorkletProcessor {\n      type = 'white';\n      types = ['white', 'pink', 'brownian'];\n\n      constructor(options) {\n        super();\n        this.port.onmessage = (e) => {\n          if (!this.types.includes(e.data)) this.type = 'white';\n          else this.type = e.data;\n        }\n\n        this.generate = {\n          'white': (output) => {\n            for (let i = 0; i < output.length; ++i) output[i] = Math.random() * 2 - 1;\n          },\n          'pink': (output) => {\n            let b0, b1, b2, b3, b4, b5, b6;\n            b0 = b1 = b2 = b3 = b4 = b5 = b6 = 0.0;\n\n            for (let i = 0; i < output.length; ++i) {\n              let white = Math.random() * 2 - 1;\n              b0 = 0.99886 * b0 + white * 0.0555179;\n              b1 = 0.99332 * b1 + white * 0.0750759;\n              b2 = 0.96900 * b2 + white * 0.1538520;\n              b3 = 0.86650 * b3 + white * 0.3104856;\n              b4 = 0.55000 * b4 + white * 0.5329522;\n              b5 = -0.7616 * b5 - white * 0.0168980;\n              output[i] = b0 + b1 + b2 + b3 + b4 + b5 + b6 + white * 0.5362;\n              output[i] *= 0.11;\n              b6 = white * 0.115926;\n            }\n          },\n          'brownian': (output) => {\n            let lastOut = 0.0;\n            for (let i = 0; i < output.length; i++) {\n              let white = Math.random() * 2 - 1;\n              output[i] = (lastOut + (0.02 * white)) / 1.02;\n              lastOut = output[i];\n              output[i] *= 3.5;\n            }\n          }\n        }\n      }\n      process(inputs, outputs, parameters) {\n        this.generate[this.type](outputs[0][0]);\n        return true;\n      }\n    })`\n    ], { type: 'application/javascript' })),\n\n    // Just a normal proxy, outputs the inputs as it is, used for seamless connections of SourceNodes\n    Worklet_Proxy: URL.createObjectURL(new Blob([\n      `registerProcessor('proxy', class Proxy extends AudioWorkletProcessor {\n\n      constructor() { super(); }\n      process(inputs, outputs, parameters) {\n        inputs.forEach((input, index) => input.forEach((channel, cIndex) => {\n          outputs[index][cIndex].set(channel);\n        }));\n        return true;\n      }\n    })`\n    ], { type: 'application/javascript' })),\n  }\n\n  return audioWorklets;\n}\n","export class Constant {\n  static TAU = 2 * Math.PI;\n  static SIN_60 = 0.866;\n  static PHI = 1.6180339887498948;\n}\n","/** @hidden */\r\nexport const fileIcon = \"data:image/svg+xml;charset=UTF-8,%3c?xml version='1.0' encoding='iso-8859-1'?%3e%3c!-- --%3e%3csvg version='1.1' id='Capa_1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' viewBox='0 0 477.867 477.867' style='enable-background:new 0 0 477.867 477.867;' xml:space='preserve'%3e%3cg%3e%3cg%3e%3cpath d='M324.267,119.467c-9.426,0-17.067-7.641-17.067-17.067V0H102.4C74.123,0,51.2,22.923,51.2,51.2v375.467 c0,28.277,22.923,51.2,51.2,51.2h273.067c28.277,0,51.2-22.923,51.2-51.2v-307.2H324.267z'/%3e%3c/g%3e%3c/g%3e%3cg%3e%3cg%3e%3cpolygon points='341.333,10.001 341.333,85.333 416.666,85.333 '/%3e%3c/g%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3c/svg%3e\";\r\nexport const imageIcon = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAQAAAAAYLlVAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QAAKqNIzIAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAAHdElNRQfjDAMLKTYM6GTwAAACaElEQVRo3u2ZP2gUQRSHv90zGKMY/IPxBBGSEGKUixGsFFSQnAZEbUQrEXuvCIiIiKWCbbQXLBRsgpVgockhIhYJGg0oJEWwuNOYYJI7E29scufuZndvNjs30+yb5vbd2/l9Ozvv7cyuRdU6ybATPVZknK9Ox2FGEZrbCH1V+dMsapcXCBbJgkWaL2zVNPRem6M7xV1OGpKHZrCYpMsYAExalNhYO8yzpEF0E0drv8u4pkW7lqtud2raWiRDLAEwDrBBOrKFixxnFwXe8JQFdQhyWZBlxhH3nYEYiq4skAMYYMVTx1c4pw+glaLPo+Qn21UAyEzCq+zw8W7jWozbUDMZgFMR/coBdgf407oAZiP6lQPkA/yjKgBksmAfJZ8sKNOxTsXIWTDNLR/vHb6FnJOihzZVIwBwk2VXGbqNFdLn+dW6+ZYD9UZAfkGynyE+UuQTj3y7/W/9Dth5TqgCkLW9FFx9lrigE6CJ/JrpuswVfQBDvluQCtf1AFwO3AVVuNF4gIP8Dt2K3WsswBYm6u4GH2I3CsDiWV15geAJTY0BGJSSFwiG6YkCkJYqqMf4Iw0gGJMDaOEBPxAIZsiFrp7bXAvWqC0AYA/vXf+8C7w9KV7GkA8AyDC9JnCOS74A92PJ+wKcYT4g+DGbPfJnqagGyPE3JHyCjEO+k9mY8h6AroBa7mxL5Fblm/kQW94DMCZ50nMOcYRXCuSFhVh38VFixrfnCUACkAAkAAlAApAA2JSN6pdtpowCTNm8MAowbJHmM62G5H/RDZA19Ol2gf4qSR8j2uVf0ws43vZ10Kvt832B8eprzn/ptwK4iL9QVQAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxOS0xMi0wM1QxMTo0MTo1NCswMDowME8knnIAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTktMTItMDNUMTE6NDE6NTQrMDA6MDA+eSbOAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAABJRU5ErkJggg==\";\r\n","import { Terminal, TerminalType, SerializedTerminal } from \"../core/terminal\";\nimport { Node } from \"../core/node\";\nimport { SerializedVector2, Vector2 } from \"../core/vector\";\nimport { get } from \"../utils/utils\";\nimport { SerializedUINode, UINode, UINodeStyle, UIType } from \"./ui-node\";\nimport { Serializable } from \"../common/interfaces\";\nimport { Color } from \"../core/color\";\nimport { FlowState } from \"../core/flow\";\nimport { Constant } from \"../resource/constants\";\n\nexport class Slider2D extends UINode implements Serializable {\n  private _value: Vector2;\n  private thumbHitColor: string;\n  offThumbCanvas: OffscreenCanvas | HTMLCanvasElement;\n  private offThumbContext: OffscreenCanvasRenderingContext2D | CanvasRenderingContext2D;\n  private pointDiameter: number = 20;\n\n  get value(): Vector2 {\n    if (this.propName) return this.getProp();\n    return this._value;\n  }\n  set value(value: Vector2) {\n    value = value.clamp(0, 1);\n\n    let oldVal = this.value;\n    let newVal = value;\n\n    if (this.propName) this.setProp(newVal);\n    else {\n      this._value = newVal;\n    }\n    this.renderOffThumb();\n\n    if (this.node.flow.state !== FlowState.Stopped) this.call('change', this, oldVal, newVal);\n  }\n\n  constructor(\n    node: Node,\n    options: Slider2DOptions = DefaultSlider2DOptions(node)\n  ) {\n    super(node, Vector2.Zero(), UIType.Slider2D, {\n      draggable: true,\n      style: options.style ? { ...DefaultSlider2DStyle(), ...options.style } : DefaultSlider2DStyle(),\n      propName: options.propName,\n      input: options.input && (typeof options.input === 'boolean'\n        ? new Terminal(node, TerminalType.IN, 'vector2', '', {})\n        : Terminal.deSerialize(node, options.input)),\n      output: options.output && (typeof options.output === 'boolean'\n        ? new Terminal(node, TerminalType.OUT, 'vector2', '', {})\n        : Terminal.deSerialize(node, options.output)),\n      id: options.id,\n      hitColor: options.hitColor\n    });\n\n    this.height = get(options.height, this.node.style.rowHeight * 4);\n    this._value = this.propName ? this.getProp() : get(options.value, new Vector2(.5, .5));\n    this._value.clampInPlace(0, 1);\n\n    if (this.input) {\n      this.input.on('connect', (_, connector) => {\n        if (connector.data) this.value = connector.data;\n      });\n      this.input.on('data', (_, data) => {\n        if (data) this.value = data;\n      });\n    }\n    if (this.output) this.output.on('connect', (_, connector) => connector.data = this.value);\n\n    this.node.on('process', () => {\n      if (this.output) this.output.setData(this.value);\n    });\n\n    this.thumbHitColor = Color.Random().hexValue;\n    if (typeof OffscreenCanvas !== 'undefined') {\n      this.offThumbCanvas = new OffscreenCanvas(this.width, this.height);\n    } else {\n      this.offThumbCanvas = document.createElement('canvas');\n      this.offThumbCanvas.width = this.width;\n      this.offThumbCanvas.height = this.height;\n    }\n    this.offThumbContext = this.offThumbCanvas.getContext('2d');\n    this.renderOffThumb();\n  }\n\n  renderOffThumb() {\n    let [width, height] = [this.width - this.pointDiameter, this.height - this.pointDiameter];\n    this.offThumbContext.clearRect(0, 0, width, height);\n\n    let coord = new Vector2(this.value.x, 1 - this.value.y).multiply(width, height).add(this.pointDiameter / 2);\n    this.offThumbContext.fillStyle = this.thumbHitColor;\n    this.offThumbContext.beginPath();\n    this.offThumbContext.arc(coord.x, coord.y, this.pointDiameter / 2, 0, Constant.TAU);\n    this.offThumbContext.fill();\n  }\n\n  /** @hidden */\n  paint(): void {\n    let context = this.node.context;\n\n    context.fillStyle = this.style.backgroundColor;\n    context.strokeStyle = this.style.borderColor;\n    context.lineWidth = this.style.borderWidth;\n    context.fillRect(this.position.x, this.position.y, this.width, this.height);\n    context.strokeRect(this.position.x, this.position.y, this.width, this.height);\n\n    let [width, height] = [this.width - this.pointDiameter, this.height - this.pointDiameter];\n    let point = new Vector2(this.value.x, 1 - this.value.y)\n      .multiplyInPlace(width, height)\n      .addInPlace(this.position)\n      .addInPlace(this.pointDiameter / 2);\n\n    context.fillStyle = this.style.thumbColor;\n    context.beginPath();\n    context.arc(point.x, point.y, this.pointDiameter / 2, 0, Constant.TAU);\n    context.fill();\n  }\n  /** @hidden */\n  paintLOD1() {\n    let context = this.context;\n    context.strokeStyle = '#000';\n    context.fillStyle = this.style.backgroundColor;\n    context.strokeRect(this.position.x, this.position.y, this.width, this.height);\n    context.fillRect(this.position.x, this.position.y, this.width, this.height);\n  }\n  /** @hidden */\n  offPaint(): void {\n    this.offUIContext.fillStyle = this.hitColor.hexValue;\n    this.offUIContext.fillRect(this.position.x, this.position.y, this.width, this.height);\n  }\n  /** @hidden */\n  reflow(): void {\n    let [newWidth, newHeight] = [this.width, this.height];\n\n    if (\n      Math.floor(this.offThumbCanvas.width) !== Math.floor(newWidth)\n      || Math.floor(this.offThumbCanvas.height) !== Math.floor(newHeight)\n    ) {\n\n      this.offThumbCanvas.width = newWidth;\n      this.offThumbCanvas.height = newHeight;\n      this.renderOffThumb();\n    }\n\n    if (this.input) {\n      this.input.position.assign(\n        this.node.position.x - this.node.style.terminalStripMargin - this.input.style.radius,\n        this.position.y + this.height / 2\n      );\n    }\n    if (this.output) {\n      this.output.position.assign(\n        this.node.position.x + this.node.width + this.node.style.terminalStripMargin + this.output.style.radius,\n        this.position.y + this.height / 2\n      );\n    }\n  }\n\n  getHitPoint(realPosition: Vector2): boolean {\n    let coord = realPosition.subtract(this.position);\n    let hitColor = Color.rgbaToHex(this.offThumbContext.getImageData(coord.x, coord.y, 1, 1).data);\n    return this.thumbHitColor === hitColor;\n  }\n  movePoint(realPosition: Vector2) {\n    let [width, height] = [this.width - this.pointDiameter, this.height - this.pointDiameter];\n\n    this._value = realPosition\n      .clamp(\n        this.position.x + this.pointDiameter / 2, this.position.x + this.width - this.pointDiameter / 2,\n        this.position.y + this.pointDiameter / 2, this.position.y + this.height - this.pointDiameter / 2\n      )\n      .subtractInPlace(this.position.add(this.pointDiameter / 2))\n      .clampInPlace(0, width, 0, height)\n      .normalizeInPlace(0, width, 0, height);\n\n    this.value = new Vector2(this._value.x, 1 - this._value.y);\n  }\n\n  /** @hidden */\n  onPropChange(_oldVal: any, newVal: any) {\n    this._value = newVal;\n    this.renderOffThumb();\n\n    this.output && this.output.setData(this.value);\n  }\n  /** @hidden */\n  onOver(screenPosition: Vector2, realPosition: Vector2): void {\n    if (this.disabled) return;\n\n    this.call('over', this, screenPosition, realPosition);\n  }\n\n  private isHit: boolean;\n  /** @hidden */\n  onDown(screenPosition: Vector2, realPosition: Vector2): void {\n    if (this.disabled) return;\n\n    this.call('down', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onUp(screenPosition: Vector2, realPosition: Vector2): void {\n    if (this.disabled) return;\n\n    if (this.node.flow.state !== FlowState.Stopped) this.call('change', this, null, this._value);\n    this.isHit = false;\n\n    this.call('up', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onClick(screenPosition: Vector2, realPosition: Vector2): void {\n    if (this.disabled) return;\n\n    this.call('click', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onDrag(screenPosition: Vector2, realPosition: Vector2): void {\n    if (this.disabled) return;\n\n    this.movePoint(realPosition);\n\n    this.call('drag', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onEnter(screenPosition: Vector2, realPosition: Vector2) {\n    if (this.disabled) return;\n\n    this.call('enter', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onExit(screenPosition: Vector2, realPosition: Vector2) {\n    if (this.disabled) return;\n\n    if (this.isHit) {\n      this.movePoint(realPosition);\n      if (this.node.flow.state !== FlowState.Stopped) this.call('change', this, null, this._value);\n    }\n    this.isHit = false;\n\n    this.call('exit', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onWheel(direction: boolean, screenPosition: Vector2, realPosition: Vector2) {\n    if (this.disabled) return;\n\n    this.call('wheel', this, direction, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onContextMenu(): void {\n    if (this.disabled) return;\n  }\n\n  serialize(): SerializedSlider2D {\n    return {\n      value: this.value.serialize(),\n      propName: this.propName,\n      input: this.input ? this.input.serialize() : null,\n      output: this.output ? this.output.serialize() : null,\n      height: this.height,\n      style: this.style,\n      id: this.id,\n      hitColor: this.hitColor.serialize(),\n      type: this.type,\n      childs: []\n    }\n  }\n  static deSerialize(node: Node, data: SerializedSlider2D) {\n    return new Slider2D(node, {\n      value: Vector2.deSerialize(data.value),\n      propName: data.propName,\n      input: data.input,\n      output: data.output,\n      height: data.height,\n      style: data.style,\n      id: data.id,\n      hitColor: Color.deSerialize(data.hitColor)\n    });\n  }\n}\n\nexport interface Slider2DStyle extends UINodeStyle {\n  backgroundColor?: string,\n  thumbColor?: string\n  borderColor?: string,\n  borderWidth?: number\n}\n/** @hidden */\nlet DefaultSlider2DStyle = () => {\n  return {\n    backgroundColor: '#666',\n    thumbColor: '#fff',\n    borderColor: '#000',\n    borderWidth: 1\n  }\n}\n\nexport interface SerializedSlider2D extends SerializedUINode {\n  value: SerializedVector2,\n  height: number\n}\n\ninterface Slider2DOptions {\n  value?: Vector2,\n  propName?: string,\n  input?: boolean | SerializedTerminal,\n  output?: boolean | SerializedTerminal,\n  height?: number,\n  style?: Slider2DStyle,\n  id?: string,\n  hitColor?: Color\n}\n/** @hidden */\nlet DefaultSlider2DOptions = (node: Node): Slider2DOptions => {\n  return {\n    height: node.style.rowHeight * 4\n  }\n};\n","import { Node } from \"../core/node\";\nimport { Terminal, TerminalType, SerializedTerminal } from '../core/terminal';\nimport { Vector2 } from \"../core/vector\";\nimport { Label } from \"./label\";\nimport { SerializedUINode, UINode, UIType, UINodeStyle } from './ui-node';\nimport { Serializable } from \"../common/interfaces\";\nimport { Color } from \"../core/color\";\nimport { Align } from \"../common/enums\";\nimport { get } from \"../utils/utils\";\n\nexport class Button extends UINode implements Serializable {\n  label: Label;\n\n  constructor(\n    node: Node,\n    public text: string,\n    options: ButtonOptions = DefaultButtonOptions(node)\n  ) {\n    super(node, Vector2.Zero(), UIType.Button, {\n      style: options.style ? { ...DefaultButtonStyle(), ...options.style } : DefaultButtonStyle(),\n      input: options.input && (typeof options.input === 'boolean'\n        ? new Terminal(node, TerminalType.IN, 'event', '', {})\n        : new Terminal(node, options.input.type, options.input.dataType, options.input.name, options.input.style, options.input.id, Color.deSerialize(options.input.hitColor))),\n      output: options.output && (typeof options.output === 'boolean'\n        ? new Terminal(node, TerminalType.OUT, 'event', '', {})\n        : Terminal.deSerialize(node, options.output)),\n      id: options.id,\n      hitColor: options.hitColor\n    });\n\n    if (this.input) this.input.on('event', () => this.call('click', this));\n    this.height = get(options.height, this.node.style.rowHeight + 2 * this.style.padding);\n\n    this.label = new Label(this.node, text, {\n      style: {\n        fontSize: this.style.fontSize,\n        font: this.style.font,\n        align: Align.Center,\n        color: this.style.color\n      },\n      height: this.height\n    });\n    this.label.on('click', (_node: Node, position: Vector2) => this.call('click', this, position));\n    this.children.push(this.label);\n  }\n\n  /** @hidden */\n  paint(): void {\n    this.context.fillStyle = this.style.backgroundColor;\n    this.context.fillRect(this.position.x, this.position.y, this.width, this.height);\n  }\n  /** @hidden */\n  paintLOD1() {\n    this.context.strokeStyle = '#000';\n    this.paint();\n    this.context.strokeRect(this.position.x, this.position.y, this.width, this.height);\n  }\n  /** @hidden */\n  offPaint(): void {\n    this.offUIContext.fillStyle = this.hitColor.hexValue;\n    this.offUIContext.fillRect(this.position.x, this.position.y, this.width, this.height);\n  }\n  /** @hidden */\n  reflow(): void {\n    this.label.position = this.position;\n    this.label.height = this.height;\n    this.label.width = this.width;\n\n    if (this.input) {\n      this.input.position.assign(\n        this.node.position.x - this.node.style.terminalStripMargin - this.input.style.radius,\n        this.position.y + this.height / 2\n      );\n    }\n    if (this.output) {\n      this.output.position.assign(\n        this.node.position.x + this.node.width + this.node.style.terminalStripMargin + this.output.style.radius,\n        this.position.y + this.height / 2\n      );\n    }\n  }\n\n  /** @hidden */\n  onPropChange() { /**/ }\n  /** @hidden */\n  onOver(screenPosition: Vector2, realPosition: Vector2): void {\n    if (this.disabled) return;\n\n    this.call('over', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onDown(screenPosition: Vector2, realPosition: Vector2): void {\n    if (this.disabled) return;\n\n    this.call('down', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onUp(screenPosition: Vector2, realPosition: Vector2): void {\n    if (this.disabled) return;\n\n    this.call('up', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onClick(screenPosition: Vector2, realPosition: Vector2): void {\n    if (this.disabled) return;\n\n    this.call('click', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onDrag(screenPosition: Vector2, realPosition: Vector2): void {\n    if (this.disabled) return;\n\n    this.call('drag', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onEnter(screenPosition: Vector2, realPosition: Vector2) {\n    if (this.disabled) return;\n\n    this.call('enter', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onExit(screenPosition: Vector2, realPosition: Vector2) {\n    if (this.disabled) return;\n\n    this.call('exit', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onWheel(direction: boolean, screenPosition: Vector2, realPosition: Vector2) {\n    if (this.disabled) return;\n\n    this.call('wheel', this, direction, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onContextMenu(): void {\n    if (this.disabled) return;\n\n    this.call('rightclick', this);\n  }\n\n  serialize(): SerializedButton {\n    return {\n      text: this.text,\n      propName: this.propName,\n      input: this.input ? this.input.serialize() : null,\n      output: this.output ? this.output.serialize() : null,\n      height: this.height,\n      id: this.id,\n      style: this.style,\n      hitColor: this.hitColor.serialize(),\n      type: this.type,\n      childs: []\n    }\n  }\n  static deSerialize(node: Node, data: SerializedButton): Button {\n    return new Button(node, data.text, {\n      input: data.input,\n      output: data.output,\n      height: data.height,\n      style: data.style,\n      id: data.id,\n      hitColor: Color.deSerialize(data.hitColor)\n    });\n  }\n}\n\nexport interface ButtonStyle extends UINodeStyle {\n  backgroundColor?: string,\n  color?: string,\n  fontSize?: string,\n  font?: string,\n  padding?: number\n}\n/** @hidden */\nlet DefaultButtonStyle = () => {\n  return {\n    backgroundColor: '#666',\n    padding: 5,\n    color: '#fff',\n    font: 'arial',\n    fontSize: '11px',\n    visible: true\n  };\n};\n\nexport interface SerializedButton extends SerializedUINode {\n  text: string,\n  height: number\n}\n\ninterface ButtonOptions {\n  input?: boolean | SerializedTerminal,\n  output?: boolean | SerializedTerminal,\n  height?: number,\n  style?: ButtonStyle,\n  id?: string,\n  hitColor?: Color\n}\nlet DefaultButtonOptions = (node: Node): ButtonOptions => {\n  return {\n    height: node.style.rowHeight * 1.5\n  };\n};\n","import { Color } from \"../core/color\";\nimport { Serializable } from \"../common/interfaces\";\nimport { Node } from \"../core/node\";\nimport { Vector2 } from \"../core/vector\";\nimport { Button } from \"./button\";\nimport { Display } from \"./display\";\nimport { HorizontalLayout } from \"./horizontal-layout\";\nimport { Stack } from \"./stack\";\nimport { Image } from './image';\nimport { Input } from \"./input\";\nimport { Label } from \"./label\";\nimport { Select } from \"./select\";\nimport { Slider } from \"./slider\";\nimport { Source } from \"./source\";\nimport { Toggle } from \"./toggle\";\nimport { SerializedUINode, UINode, UINodeStyle, UIType } from \"./ui-node\";\nimport { Align } from \"../common/enums\";\n\n/** @hidden */\nexport class Container extends UINode implements Serializable {\n  contentWidth: number;\n\n  constructor(\n    node: Node,\n    width: number,\n    options: ContainerOptions = DefaultContainerOptions()\n  ) {\n    super(node, node.position, UIType.Container, {\n      style: options.style ? { ...DefaultContainerStyle(), ...options.style } : DefaultContainerStyle(),\n      id: options.id,\n      hitColor: options.hitColor\n    });\n\n    this.width = width;\n    this.height = this.node.style.padding * 2;\n    this.contentWidth = this.width - 2 * this.node.style.padding;\n  }\n\n  /** @hidden */\n  paint(): void {\n    let context = this.context;\n    context.shadowColor = this.style.shadowColor;\n    context.shadowBlur = 3;\n    context.shadowOffsetX = this.style.shadowOffset.x;\n    context.shadowOffsetY = this.style.shadowOffset.y;\n    context.fillStyle = this.style.backgroundColor;\n    context.strokeStyle = this.style.borderColor;\n    context.lineWidth = this.style.borderWidth;\n    context.roundRect(\n      this.position.x, this.position.y + this.node.style.titleHeight,\n      this.width, this.height - this.node.style.titleHeight, 5\n    );\n    context.stroke();\n    context.fill();\n  }\n  /** @hidden */\n  paintLOD1() {\n    let context = this.context;\n    context.fillStyle = this.style.backgroundColor;\n    context.strokeStyle = this.style.borderColor;\n    context.lineWidth = this.style.borderWidth;\n    context.roundRect(\n      this.position.x, this.position.y + this.node.style.titleHeight,\n      this.width, this.height - this.node.style.titleHeight, 5\n    );\n    context.stroke();\n    context.fill();\n  }\n  /** @hidden */\n  offPaint(): void {\n    this.offUIContext.fillStyle = this.hitColor.hexValue;\n    this.offUIContext.fillRect(this.position.x, this.position.y, this.width, this.height);\n  }\n  /** @hidden */\n  reflow(): void {\n    this.position = this.node.position;\n    let terminalsDisplayHeight = Math.max(this.node.inputs.length, this.node.outputs.length) * this.node.style.terminalRowHeight + this.node.style.titleHeight;\n    let x = this.position.x + this.node.style.padding;\n    let y = this.position.y + terminalsDisplayHeight;\n    this.children.filter(child => child.visible).forEach(child => {\n      y += this.node.style.spacing;\n      let availableWidth = this.width - this.node.style.padding * 2;\n      child.width = (child.width > availableWidth ? availableWidth : child.width) || availableWidth;\n      if (child.width < availableWidth) {\n        let childX;\n        if (child.style.align === Align.Center) {\n          childX = this.position.x + this.width / 2 - child.width / 2;\n        } else if (child.style.align === Align.Right) {\n          childX = this.position.x + this.width - this.node.style.padding - child.width;\n        } else {\n          childX = x;\n        }\n        child.position = new Vector2(childX, y);\n      } else {\n        child.position = new Vector2(x, y);\n      }\n      y += child.height;\n    });\n    this.height = y + this.node.style.padding - this.position.y;\n  }\n\n  /** @hidden */\n  onPropChange() { /**/ }\n  /** @hidden */\n  onOver(screenPosition: Vector2, realPosition: Vector2): void {\n    if (this.disabled) return;\n\n    this.call('over', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onDown(screenPosition: Vector2, realPosition: Vector2): void {\n    if (this.disabled) return;\n\n    this.call('down', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onUp(screenPosition: Vector2, realPosition: Vector2): void {\n    if (this.disabled) return;\n\n    this.call('up', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onClick(screenPosition: Vector2, realPosition: Vector2): void {\n    if (this.disabled) return;\n\n    this.call('click', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onDrag(screenPosition: Vector2, realPosition: Vector2): void {\n    if (this.disabled) return;\n\n    this.call('drag', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onEnter(screenPosition: Vector2, realPosition: Vector2) {\n    if (this.disabled) return;\n\n    this.call('enter', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onExit(screenPosition: Vector2, realPosition: Vector2) {\n    if (this.disabled) return;\n\n    this.call('exit', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onWheel(direction: boolean, screenPosition: Vector2, realPosition: Vector2) {\n    if (this.disabled) return;\n\n    this.call('wheel', this, direction, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onContextMenu(): void { /**/ }\n\n  serialize(): SerializedContainer {\n    return {\n      width: this.width,\n      propName: this.propName,\n      input: this.input ? this.input.serialize() : null,\n      output: this.output ? this.output.serialize() : null,\n      id: this.id,\n      style: {\n        backgroundColor: this.style.backgroundColor,\n        shadowColor: this.style.shadowColor,\n        shadowBlur: this.style.shadowBlur,\n        shadowOffset: this.style.shadowOffset.serialize(),\n        borderWidth: this.style.borderWidth,\n        borderColor: this.style.borderColor\n      },\n      hitColor: this.hitColor.serialize(),\n      type: this.type,\n      childs: this.children.map(child => (child as any).serialize())\n    }\n  }\n  static deSerialize(node: Node, data: SerializedContainer): Container {\n    let uiContainer = new Container(node, data.width, {\n      style: data.style,\n      id: data.id,\n      hitColor: Color.deSerialize(data.hitColor)\n    });\n\n    uiContainer.children.push(...data.childs.map(serializedChild => {\n      switch (serializedChild.type) {\n        case UIType.Button: return Button.deSerialize(node, serializedChild);\n        case UIType.Container: return Container.deSerialize(node, serializedChild);\n        case UIType.Display: return Display.deSerialize(node, serializedChild);\n        case UIType.HorizontalLayout: return HorizontalLayout.deSerialize(node, serializedChild);\n        case UIType.Stack: return Stack.deSerialize(node, serializedChild);\n        case UIType.Image: return Image.deSerialize(node, serializedChild);\n        case UIType.Input: return Input.deSerialize(node, serializedChild);\n        case UIType.Label: return Label.deSerialize(node, serializedChild);\n        case UIType.Select: return Select.deSerialize(node, serializedChild);\n        case UIType.Slider: return Slider.deSerialize(node, serializedChild);\n        case UIType.Source: return Source.deSerialize(node, serializedChild);\n        case UIType.Toggle: return Toggle.deSerialize(node, serializedChild);\n        default: return;\n      }\n    }));\n    return uiContainer;\n  }\n}\n\nexport interface ContainerStyle extends UINodeStyle {\n  backgroundColor?: string,\n  shadowColor?: string,\n  shadowBlur?: number,\n  shadowOffset?: Vector2,\n  borderColor?: string,\n  borderWidth?: number\n}\n/** @hidden */\nlet DefaultContainerStyle = () => {\n  return {\n    backgroundColor: '#dddddd',\n    shadowColor: '#666',\n    shadowBlur: 3,\n    shadowOffset: new Vector2(3, 3),\n    borderWidth: 1,\n    borderColor: '#444',\n    visible: true\n  };\n};\n\nexport interface SerializedContainer extends SerializedUINode {\n  width: number\n}\n\ninterface ContainerOptions {\n  style?: ContainerStyle,\n  id?: string,\n  hitColor?: Color\n}\n/** @hidden */\nlet DefaultContainerOptions = () => {\n  return {};\n};\n","import { Terminal, TerminalType, SerializedTerminal } from \"../core/terminal\";\nimport { Node } from \"../core/node\";\nimport { Vector2 } from \"../core/vector\";\nimport { clamp, denormalize, get, normalize } from \"../utils/utils\";\nimport { SerializedUINode, UINode, UINodeStyle, UIType } from \"./ui-node\";\nimport { Serializable } from \"../common/interfaces\";\nimport { Color } from \"../core/color\";\nimport { FlowState } from \"../core/flow\";\nimport { Constant } from \"../resource/constants\";\n\nexport class Dial extends UINode implements Serializable {\n  private _value: number;\n  private thumbStart: Vector2 = Vector2.Zero();\n  private thumbEnd: Vector2 = Vector2.Zero();\n  private lastAngle: number;\n  private deltaValue: number;\n  private temp: number;\n\n  get value(): number {\n    if (this.propName) return this.getProp();\n    return this._value;\n  }\n  set value(value: number) {\n    let oldVal = this.value;\n    let newVal = clamp(value, this.min, this.max);\n\n    if (this.propName) this.setProp(newVal);\n    else this._value = newVal;\n    this.temp = normalize(newVal, this.min, this.max);\n\n    if (this.node.flow.state !== FlowState.Stopped) this.call('change', this, oldVal, newVal);\n  }\n\n  constructor(\n    node: Node,\n    public min: number, public max: number,\n    height: number,\n    options: DialOptions = DefaultDialOptions(min)\n  ) {\n    super(node, Vector2.Zero(), UIType.Dial, {\n      draggable: true,\n      style: options.style ? { ...DefaultDialStyle(height), ...options.style } : DefaultDialStyle(height),\n      propName: options.propName,\n      input: options.input && (typeof options.input === 'boolean'\n        ? new Terminal(node, TerminalType.IN, 'number', '', {})\n        : Terminal.deSerialize(node, options.input)),\n      output: options.output && (typeof options.output === 'boolean'\n        ? new Terminal(node, TerminalType.OUT, 'number', '', {})\n        : Terminal.deSerialize(node, options.output)),\n      id: options.id,\n      hitColor: options.hitColor\n    });\n\n    this.height = height;\n    this._value = get(options.value, min);\n    this.temp = normalize(this._value, this.min, this.max);\n\n    if (this.input) {\n      this.input.on('connect', (_, connector) => {\n        if (connector.data) this.value = connector.data;\n      });\n      this.input.on('data', (_, data) => {\n        if (data) this.value = data;\n      });\n    }\n    if (this.output) this.output.on('connect', (_, connector) => connector.data = this.value);\n\n    this.node.on('process', () => {\n      if (this.output) this.output.setData(this.value);\n    });\n  }\n\n  /** @hidden */\n  paint(): void {\n    let context = this.context;\n    let size = Math.min(this.width, this.height);\n\n    context.fillStyle = this.style.color;\n    context.strokeStyle = this.style.borderColor;\n    context.lineWidth = this.style.borderWidth;\n    context.shadowColor = this.style.shadowColor;\n    context.shadowBlur = this.style.shadowBlur;\n    context.shadowOffsetX = 3;\n    context.shadowOffsetY = 3;\n    context.beginPath();\n    context.arc(this.position.x + this.width / 2, this.position.y + this.height / 2, size / 2, 0, Constant.TAU);\n    context.stroke();\n    context.fill();\n\n    context.lineCap = 'round';\n    context.lineWidth = 10;\n    context.strokeStyle = this.style.thumbColor;\n    context.shadowColor = this.style.thumbShadowColor;\n    context.shadowBlur = this.style.thumbShadowBlur;\n    context.beginPath();\n    context.moveTo(this.thumbStart.x, this.thumbStart.y);\n    context.lineTo(this.thumbEnd.x, this.thumbEnd.y);\n    context.stroke();\n  }\n  /** @hidden */\n  paintLOD1() {\n    let context = this.context;\n    context.strokeStyle = '#000';\n    context.fillStyle = this.style.color;\n    context.strokeRect(this.position.x, this.position.y, this.width, this.height);\n    context.fillRect(this.position.x, this.position.y, this.width, this.height);\n  }\n  /** @hidden */\n  offPaint(): void {\n    let context = this.offUIContext;\n    let size = Math.min(this.width, this.height);\n\n    context.fillStyle = this.hitColor.hexValue;\n    context.beginPath();\n    context.arc(this.position.x + this.width / 2, this.position.y + this.height / 2, size / 2, 0, Constant.TAU);\n    context.fill();\n  }\n  /** @hidden */\n  reflow(): void {\n    let center = this.position.add(this.width / 2, this.height / 2);\n    let angle = normalize(this.value, this.min, this.max) * Constant.TAU + (Math.PI / 2);\n    let size = Math.min(this.width, this.height);\n    this.thumbStart.assign(center.x + Math.cos(angle) * (size / 5), center.y + Math.sin(angle) * (size / 5));\n    this.thumbEnd.assign(center.x + Math.cos(angle) * (size / 2 - 10), center.y + Math.sin(angle) * (size / 2 - 10));\n\n    if (this.input) {\n      this.input.position.assign(\n        this.node.position.x - this.node.style.terminalStripMargin - this.input.style.radius,\n        this.position.y + this.height / 2\n      );\n    }\n    if (this.output) {\n      this.output.position.assign(\n        this.node.position.x + this.node.width + this.node.style.terminalStripMargin + this.output.style.radius,\n        this.position.y + this.height / 2\n      );\n    }\n  }\n\n  private pointToValue(position: Vector2): number {\n    let diff = position.subtract(this.position.add(this.width / 2, this.height / 2));\n    let angle = Math.atan2(diff.y, diff.x);\n    if (angle < 0) angle += Constant.TAU;\n    return (((angle / Constant.TAU) - 0.25) + 1) % 1;\n  }\n\n  /** @hidden */\n  onPropChange(_oldVal: any, newVal: any) {\n    this._value = newVal;\n    this.temp = normalize(newVal, this.min, this.max);\n    this.reflow();\n\n    this.output && this.output.setData(this._value);\n  }\n  /** @hidden */\n  onOver(screenPosition: Vector2, realPosition: Vector2): void {\n    if (this.disabled) return;\n\n    this.call('over', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onDown(screenPosition: Vector2, realPosition: Vector2): void {\n    if (this.disabled) return;\n\n    this.lastAngle = undefined;\n    this.deltaValue = this.pointToValue(realPosition);\n    this.temp = normalize(this.value, this.min, this.max);\n    this.onDrag(screenPosition, realPosition);\n\n    this.call('down', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onUp(screenPosition: Vector2, realPosition: Vector2): void {\n    if (this.disabled) return;\n\n    this.call('up', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onClick(screenPosition: Vector2, realPosition: Vector2): void {\n    if (this.disabled) return;\n\n    this.call('click', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onDrag(screenPosition: Vector2, realPosition: Vector2): void {\n    if (this.disabled) return;\n\n    let currValue = this.pointToValue(realPosition);\n    let diffValue = currValue - this.deltaValue;\n    diffValue = (Math.abs(diffValue) > 0.5) ? 0 : diffValue;\n    this.deltaValue = currValue;\n    this.temp = this.temp + diffValue;\n    this.temp = clamp(this.temp, 0, 1);\n\n    let angle = this.temp * Constant.TAU;\n    if (angle < 0) angle += Constant.TAU;\n    if (typeof this.lastAngle !== 'undefined' && Math.abs(this.lastAngle - angle) > 2) {\n      angle = this.lastAngle > 3 ? Constant.TAU : 0;\n    }\n    this.lastAngle = angle;\n    let normalizedValue = angle / Constant.TAU;\n    this.value = denormalize(clamp(normalizedValue, 0, 1), this.min, this.max);\n    this.temp = normalizedValue;\n    this.reflow();\n\n    this.call('drag', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onEnter(screenPosition: Vector2, realPosition: Vector2) {\n    if (this.disabled) return;\n\n    this.call('enter', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onExit(screenPosition: Vector2, realPosition: Vector2) {\n    if (this.disabled) return;\n\n    this.lastAngle = undefined;\n\n    this.call('exit', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onWheel(direction: boolean, screenPosition: Vector2, realPosition: Vector2) {\n    if (this.disabled) return;\n\n    this.call('wheel', this, direction, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onContextMenu(): void {\n    if (this.disabled) return;\n  }\n\n  serialize(): SerializedDial {\n    return {\n      min: this.min,\n      max: this.max,\n      value: this.value,\n      propName: this.propName,\n      input: this.input ? this.input.serialize() : null,\n      output: this.output ? this.output.serialize() : null,\n      size: this.height,\n      id: this.id,\n      hitColor: this.hitColor.serialize(),\n      style: this.style,\n      type: this.type,\n      childs: []\n    }\n  }\n  static deSerialize(node: Node, data: SerializedDial) {\n    return new Dial(node, data.min, data.max, data.size, {\n      value: data.value,\n      propName: data.propName,\n      input: data.input,\n      output: data.output,\n      style: data.style,\n      id: data.id,\n      hitColor: Color.deSerialize(data.hitColor)\n    });\n  }\n}\n\nexport interface DialStyle extends UINodeStyle {\n  color?: string,\n  borderColor?: string,\n  borderWidth?: number,\n  shadowColor?: string,\n  shadowBlur?: number,\n  thumbColor?: string,\n  thumbBorderColor?: string,\n  thumbBorderWidth?: number,\n  thumbShadowColor?: string,\n  thumbShadowBlur?: number\n}\n/** @hidden */\nlet DefaultDialStyle = (size: number) => {\n  return {\n    color: '#e3e3e3',\n    borderColor: '#000',\n    borderWidth: 1,\n    shadowColor: 'grey',\n    shadowBlur: 5,\n    thumbColor: '#c9c9c9',\n    thumbShadowColor: '#858585',\n    thumbShadowBlur: 5,\n    size,\n    visible: true\n  }\n}\n\nexport interface SerializedDial extends SerializedUINode {\n  min: number,\n  max: number,\n  value: number,\n  size: number\n}\n\ninterface DialOptions {\n  value?: number,\n  propName?: string,\n  input?: boolean | SerializedTerminal,\n  output?: boolean | SerializedTerminal,\n  style?: DialStyle,\n  id?: string,\n  hitColor?: Color\n}\n/** @hidden */\nlet DefaultDialOptions = (min: number) => {\n  return {\n    value: min\n  };\n};\n","import { Color } from \"../core/color\";\nimport { Serializable } from \"../common/interfaces\";\nimport { Node } from \"../core/node\";\nimport { Terminal, TerminalType, SerializedTerminal } from \"../core/terminal\";\nimport { Vector2 } from \"../core/vector\";\nimport { SerializedUINode, UINode, UINodeStyle, UIType } from \"./ui-node\";\n\nexport class Display extends UINode implements Serializable {\n  offCanvasConfigs: CustomOffCanvasConfig[] = [];\n\n  constructor(\n    node: Node,\n    height: number,\n    customRenderers: CustomRendererConfig[],\n    options: DisplayOptions = DefaultDisplayOptions()\n  ) {\n    super(node, Vector2.Zero(), UIType.Display, {\n      draggable: true,\n      zoomable: true,\n      style: options.style ? { ...DefaultDisplayStyle(), ...options.style } : DefaultDisplayStyle(),\n      input: options.clear && typeof options.clear !== 'boolean'\n        ? Terminal.deSerialize(node, options.clear)\n        : new Terminal(node, TerminalType.IN, 'event', '', {}),\n      id: options.id, hitColor: options.hitColor\n    });\n\n    this.height = height;\n\n    if (typeof OffscreenCanvas !== 'undefined') {\n      customRenderers.forEach(rendererConfig => {\n        let offCanvas, offContext, newOffCanvasConfig;\n        if (rendererConfig.canvasType === CanvasType.HTMLCanvasElement) {\n          offCanvas = document.createElement('canvas');\n          offCanvas.width = this.node.width - 2 * this.node.style.padding;\n          offCanvas.height = this.height;\n        } else {\n          offCanvas = new OffscreenCanvas(this.node.width - 2 * this.node.style.padding, this.height);\n        }\n        offContext = offCanvas.getContext('2d');\n        newOffCanvasConfig = { canvas: offCanvas, context: offContext, rendererConfig, shouldRender: true }\n        this.offCanvasConfigs.push(newOffCanvasConfig);\n      });\n    } else {\n      customRenderers.forEach(rendererConfig => {\n        let offCanvas = document.createElement('canvas');\n        offCanvas.width = this.node.width - 2 * this.node.style.padding;\n        offCanvas.height = this.height;\n        let offContext = offCanvas.getContext('2d');\n        let newOffCanvasConfig = { canvas: offCanvas, context: offContext, rendererConfig, shouldRender: true }\n        this.offCanvasConfigs.push(newOffCanvasConfig);\n      });\n    }\n\n    this.input.on('event', () => {\n      this.offCanvasConfigs.filter(config => !config.rendererConfig.auto).forEach(config => {\n        config.context.clearRect(0, 0, config.canvas.width, config.canvas.height);\n      });\n    });\n\n    this.node.flow.flowConnect.on('scale', () => this.reflow());\n  }\n\n  private customRender(canvasConfigs: CustomOffCanvasConfig[]) {\n    return Promise.all(canvasConfigs.map(config => {\n      return new Promise<boolean>(resolve => {\n        if (config.shouldRender) {\n          if (config.rendererConfig.clear)\n            config.context.clearRect(0, 0, config.canvas.width, config.canvas.height);\n          if (this.style.backgroundColor) {\n            config.context.fillStyle = this.style.backgroundColor;\n            config.context.fillRect(0, 0, config.canvas.width, config.canvas.height);\n          }\n          resolve(\n            config.rendererConfig.renderer(config.context, config.canvas.width, config.canvas.height)\n          );\n        } else resolve(false);\n      });\n    }));\n  }\n\n  /** @hidden */\n  paint(): void {\n    let context = this.context;\n    context.strokeStyle = this.style.borderColor;\n    context.lineWidth = 1;\n    context.strokeRect(this.position.x, this.position.y, this.width, this.height);\n\n    let autoOffCanvasConfigs = this.offCanvasConfigs.filter(config => config.rendererConfig.auto);\n    this.customRender(autoOffCanvasConfigs).then((results: boolean[]) => {\n      results.forEach((result, index) => autoOffCanvasConfigs[index].shouldRender = result);\n    });\n\n    this.offCanvasConfigs.forEach(offCanvas => {\n      context.drawImage(\n        offCanvas.canvas, 0, 0,\n        offCanvas.canvas.width, offCanvas.canvas.height,\n        this.position.x, this.position.y,\n        this.node.width - 2 * this.node.style.padding, this.height\n      );\n    });\n  }\n  /** @hidden */\n  paintLOD1() {\n    let context = this.context;\n    context.strokeStyle = this.style.borderColor;\n    context.strokeRect(this.position.x, this.position.y, this.width, this.height);\n    context.fillStyle = 'lightgrey';\n    context.fillRect(this.position.x, this.position.y, this.width, this.height);\n  }\n  /** @hidden */\n  offPaint(): void {\n    this.offUIContext.fillStyle = this.hitColor.hexValue;\n    this.offUIContext.fillRect(this.position.x, this.position.y, this.width, this.height);\n  }\n  /** @hidden */\n  reflow(): void {\n    let newWidth = (this.node.width - 2 * this.node.style.padding) * this.node.flow.flowConnect.scale;\n    let newHeight = this.height * this.node.flow.flowConnect.scale;\n\n    this.offCanvasConfigs.forEach(offCanvas => {\n      // Optimization: Do not trigger re-render if width/height is same\n      if (Math.floor(offCanvas.canvas.width) !== Math.floor(newWidth) || Math.floor(offCanvas.canvas.height) !== Math.floor(newHeight)) {\n        offCanvas.canvas.width = newWidth;\n        offCanvas.canvas.height = newHeight;\n\n        if (!offCanvas.shouldRender) {\n          offCanvas.rendererConfig.renderer(offCanvas.context, offCanvas.canvas.width, offCanvas.canvas.height);\n          offCanvas.shouldRender = false;\n        }\n      }\n    });\n\n    this.input.position.assign(\n      this.node.position.x - this.node.style.terminalStripMargin - this.input.style.radius,\n      this.position.y + this.height / 2\n    );\n  }\n\n  /** @hidden */\n  onPropChange() { /**/ }\n  /** @hidden */\n  onOver(screenPosition: Vector2, realPosition: Vector2): void {\n    if (this.disabled) return;\n\n    this.call('over', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onDown(screenPosition: Vector2, realPosition: Vector2): void {\n    if (this.disabled) return;\n\n    this.call('down', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onUp(screenPosition: Vector2, realPosition: Vector2): void {\n    if (this.disabled) return;\n\n    this.call('up', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onClick(screenPosition: Vector2, realPosition: Vector2): void {\n    if (this.disabled) return;\n\n    this.call('click', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onDrag(screenPosition: Vector2, realPosition: Vector2): void {\n    if (this.disabled) return;\n\n    this.call('drag', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onEnter(screenPosition: Vector2, realPosition: Vector2) {\n    if (this.disabled) return;\n\n    this.call('enter', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onExit(screenPosition: Vector2, realPosition: Vector2) {\n    if (this.disabled) return;\n\n    this.call('exit', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onWheel(direction: boolean, screenPosition: Vector2, realPosition: Vector2) {\n    if (this.disabled) return;\n\n    this.call('wheel', this, direction, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onContextMenu(): void {\n    if (this.disabled) return;\n\n    this.call('rightclick', this);\n  }\n\n  serialize(): SerializedDisplay {\n    return {\n      height: this.height,\n      propName: this.propName,\n      input: this.input ? this.input.serialize() : null,\n      output: this.output ? this.output.serialize() : null,\n      id: this.id,\n      hitColor: this.hitColor.serialize(),\n      style: this.style,\n      type: this.type,\n      childs: []\n    };\n  }\n  static deSerialize(node: Node, data: SerializedDisplay): Display {\n    return new Display(node, data.height, null, {\n      style: data.style,\n      id: data.id,\n      hitColor: Color.deSerialize(data.hitColor),\n      clear: data.input\n    });\n  }\n}\n\nexport enum CanvasType {\n  OffscreenCanvas,\n  HTMLCanvasElement\n}\n\nexport interface CustomOffCanvasConfig {\n  canvas: OffscreenCanvas | HTMLCanvasElement;\n  context: OffscreenCanvasRenderingContext2D | CanvasRenderingContext2D;\n  rendererConfig: CustomRendererConfig,\n  shouldRender: boolean\n}\n\nexport interface CustomRendererConfig {\n  auto?: boolean,\n  clear?: boolean,\n  canvasType?: CanvasType,\n  renderer?: (context: CanvasRenderingContext2D | OffscreenCanvasRenderingContext2D, width: number, height: number) => boolean,\n}\n\nexport interface DisplayStyle extends UINodeStyle {\n  borderColor?: string,\n  backgroundColor?: string\n}\n/** @hidden */\nlet DefaultDisplayStyle = () => {\n  return {\n    borderColor: '#000',\n    visible: true\n  };\n};\n\nexport interface SerializedDisplay extends SerializedUINode {\n  height: number\n}\n\ninterface DisplayOptions {\n  style?: DisplayStyle,\n  id?: string,\n  hitColor?: Color,\n  clear?: boolean | SerializedTerminal\n}\n/** @hidden */\nlet DefaultDisplayOptions = () => {\n  return {}\n};\n","import { SerializedVector2, Vector2 } from \"../core/vector\";\nimport { SerializedUINode, UINode, UINodeStyle, UIType } from \"./ui-node\";\nimport { Node } from '../core/node';\nimport { Terminal, TerminalType, SerializedTerminal } from \"../core/terminal\";\nimport { Serializable } from \"../common/interfaces\";\nimport { Color } from \"../core/color\";\nimport { FlowState } from \"../core/flow\";\nimport { Constant } from \"../resource/constants\";\nimport { List, ListNode } from \"../utils/linked-list\";\nimport { BiMap } from \"../utils/bidirectional-map\";\n\nexport class Envelope extends UINode implements Serializable {\n  private _value: List<Vector2>;\n  private pointHitColorPoint: BiMap<string, ListNode<Vector2>> = new BiMap();\n  offPointsCanvas: OffscreenCanvas | HTMLCanvasElement;\n  private offPointsContext: OffscreenCanvasRenderingContext2D | CanvasRenderingContext2D;\n  private pointDiameter: number = 10;\n\n  get value(): Vector2[] {\n    return this._value.toArray().map(vec => vec.clone());\n  }\n  set value(value: Vector2[]) {\n    let oldVal = this.value;\n    value.forEach(vector => vector.clampInPlace(0, 1, 0, 1));\n    value.sort((a, b) => a.x - b.x);\n    this._value = new List((a, b) => a.x - b.x, value);\n    this.pointHitColorPoint.clear();\n    this._value.forEach(node => this.pointHitColorPoint.set(Color.Random().hexValue, node));\n    this.renderOffPoints();\n\n    if (this.node.flow.state !== FlowState.Stopped) this.call('change', this, oldVal, this._value.toArray());\n  }\n\n  constructor(\n    node: Node,\n    height: number,\n    values: Vector2[] = [],\n    options: EnvelopeOptions = DefaultEnvelopeOptions()\n  ) {\n    super(node, Vector2.Zero(), UIType.Envelope, {\n      draggable: true,\n      style: options.style ? { ...DefaultEnvelopeStyle(), ...options.style } : DefaultEnvelopeStyle(),\n      input: options.input && (typeof options.input === 'boolean'\n        ? new Terminal(node, TerminalType.IN, 'array', '', {})\n        : Terminal.deSerialize(node, options.input)),\n      output: options.output && (typeof options.output === 'boolean'\n        ? new Terminal(node, TerminalType.OUT, 'array', '', {})\n        : Terminal.deSerialize(node, options.output)),\n      id: options.id,\n      hitColor: options.hitColor\n    });\n\n    this.height = height;\n    values.forEach(vector => vector.clampInPlace(0, 1, 0, 1));\n    values.sort((a, b) => a.x - b.x);\n    this._value = new List((a, b) => a.x - b.x, values);\n    this.pointHitColorPoint.clear();\n    this._value.forEach(pointNode => this.pointHitColorPoint.set(Color.Random().hexValue, pointNode));\n\n    if (this.input) {\n      this.input.on('connect', (_, connector) => {\n        if (connector.data) this.value = connector.data;\n      });\n      this.input.on('data', (_, data) => {\n        if (data) this.value = data;\n      });\n    }\n    if (this.output) this.output.on('connect', (_, connector) => connector.data = this.value);\n\n    if (typeof OffscreenCanvas !== 'undefined') {\n      this.offPointsCanvas = new OffscreenCanvas(this.width, this.height);\n    } else {\n      this.offPointsCanvas = document.createElement('canvas');\n      this.offPointsCanvas.width = this.width;\n      this.offPointsCanvas.height = this.height;\n    }\n    this.offPointsContext = this.offPointsCanvas.getContext('2d');\n    this.renderOffPoints();\n  }\n\n  renderOffPoints() {\n    let [width, height] = [this.width - this.pointDiameter, this.height - this.pointDiameter];\n    this.offPointsContext.clearRect(0, 0, width, height);\n\n    this._value.forEach(node => {\n      let coord = new Vector2(node.data.x, 1 - node.data.y).multiply(width, height).add(this.pointDiameter / 2);\n      this.offPointsContext.fillStyle = this.pointHitColorPoint.get(node) as string;\n      this.offPointsContext.beginPath();\n      this.offPointsContext.arc(coord.x, coord.y, this.pointDiameter / 2, 0, Constant.TAU);\n      this.offPointsContext.fill();\n    });\n  }\n\n  /** @hidden */\n  paint(): void {\n    let context = this.node.context;\n\n    context.fillStyle = this.style.backgroundColor;\n    context.strokeStyle = this.style.borderColor;\n    context.lineWidth = this.style.borderWidth;\n    context.fillRect(this.position.x, this.position.y, this.width, this.height);\n    context.strokeRect(this.position.x, this.position.y, this.width, this.height);\n\n    let [width, height] = [this.width - this.pointDiameter, this.height - this.pointDiameter];\n    let points: Vector2[] = this._value.map(node =>\n      new Vector2(node.data.x, 1 - node.data.y)\n        .multiplyInPlace(width, height)\n        .addInPlace(this.position)\n        .addInPlace(this.pointDiameter / 2)\n    );\n\n    if (points.length > 0) {\n      context.strokeStyle = this.style.lineColor;\n      context.lineWidth = 2;\n      context.beginPath();\n      context.moveTo(this.position.x, points[0].y);\n      points.forEach(point => context.lineTo(point.x, point.y));\n      context.lineTo(this.position.x + this.width, points[points.length - 1].y);\n      context.stroke();\n    }\n\n    context.fillStyle = this.style.pointColor;\n    points.forEach(point => {\n      context.beginPath();\n      context.arc(point.x, point.y, this.pointDiameter / 2, 0, Constant.TAU);\n      context.fill();\n    });\n  }\n  /** @hidden */\n  paintLOD1() {\n    this.context.fillStyle = this.style.backgroundColor;\n    this.context.fillRect(this.position.x, this.position.y, this.width, this.height);\n  }\n  /** @hidden */\n  offPaint(): void {\n    this.offUIContext.fillStyle = this.hitColor.hexValue;\n    this.offUIContext.fillRect(this.position.x, this.position.y, this.width, this.height);\n  }\n  /** @hidden */\n  reflow(): void {\n    let [newWidth, newHeight] = [this.width, this.height];\n\n    if (\n      Math.floor(this.offPointsCanvas.width) !== Math.floor(newWidth)\n      || Math.floor(this.offPointsCanvas.height) !== Math.floor(newHeight)\n    ) {\n\n      this.offPointsCanvas.width = newWidth;\n      this.offPointsCanvas.height = newHeight;\n      this.renderOffPoints();\n    }\n\n    if (this.input) {\n      this.input.position.assign(\n        this.node.position.x - this.node.style.terminalStripMargin - this.input.style.radius,\n        this.position.y + this.height / 2\n      );\n    }\n    if (this.output) {\n      this.output.position.assign(\n        this.node.position.x + this.node.width + this.node.style.terminalStripMargin + this.output.style.radius,\n        this.position.y + this.height / 2\n      );\n    }\n  }\n\n  getHitPoint(realPosition: Vector2): ListNode<Vector2> {\n    let coord = realPosition.subtract(this.position);\n    let hitColor = Color.rgbaToHex(this.offPointsContext.getImageData(coord.x, coord.y, 1, 1).data);\n    let hitPointNode = this.pointHitColorPoint.get(hitColor);\n    return hitPointNode as ListNode<Vector2>;\n  }\n  movePoint(realPosition: Vector2) {\n    let [width, height] = [this.width - this.pointDiameter, this.height - this.pointDiameter];\n\n    this.currHitPoint.data = realPosition\n      .clamp(\n        this.position.x + this.pointDiameter / 2, this.position.x + this.width - this.pointDiameter / 2,\n        this.position.y + this.pointDiameter / 2, this.position.y + this.height - this.pointDiameter / 2\n      )\n      .subtractInPlace(this.position.add(this.pointDiameter / 2))\n      .clampInPlace(0, width, 0, height)\n      .normalizeInPlace(0, width, 0, height)\n      .clampInPlace(\n        this.currHitPoint.prev?.data.x || 0, this.currHitPoint.next?.data.x || 1,\n        -Infinity, Infinity\n      );\n    this.currHitPoint.data = new Vector2(this.currHitPoint.data.x, 1 - this.currHitPoint.data.y);\n\n    this.renderOffPoints();\n  }\n  newPoint(realPosition: Vector2, width: number, height: number) {\n    let oldVal = this._value.toArray();\n\n    let newPoint = realPosition\n      .subtract(this.position.add(this.pointDiameter / 2))\n      .normalizeInPlace(0, width, 0, height);\n    newPoint = new Vector2(newPoint.x, 1 - newPoint.y);\n\n    let newPointNode;\n    let anchor = this._value.searchTail(node => node.data.x <= newPoint.x);\n\n    if (anchor === null) newPointNode = this._value.prepend(newPoint);\n    else newPointNode = this._value.addAfter(newPoint, anchor);\n\n    this.pointHitColorPoint.set(Color.Random().hexValue, newPointNode);\n    this.renderOffPoints();\n    if (this.node.flow.state !== FlowState.Stopped) this.call('change', this, oldVal, this._value.toArray());\n  }\n  deletePoint() {\n    let oldVal = this._value.toArray();\n    this._value.delete(this.currHitPoint);\n    this.pointHitColorPoint.delete(this.currHitPoint);\n    this.renderOffPoints();\n\n    if (this.node.flow.state !== FlowState.Stopped) this.call('change', this, oldVal, this._value.toArray());\n  }\n\n  /** @hidden */\n  onPropChange() { /**/ }\n  /** @hidden */\n  onOver(screenPosition: Vector2, realPosition: Vector2): void {\n    if (this.disabled) return;\n\n    this.call('over', this, screenPosition, realPosition);\n  }\n\n  private currHitPoint: ListNode<Vector2>;\n  private lastDownPosition: Vector2;\n  /** @hidden */\n  onDown(screenPosition: Vector2, realPosition: Vector2): void {\n    if (this.disabled) return;\n\n    this.currHitPoint = this.getHitPoint(realPosition);\n    this.lastDownPosition = realPosition;\n\n    this.call('down', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onUp(screenPosition: Vector2, realPosition: Vector2): void {\n    if (this.disabled) return;\n\n    let [width, height] = [this.width - this.pointDiameter, this.height - this.pointDiameter];\n    if (!this.currHitPoint && this.lastDownPosition) {\n      if (Vector2.Distance(this.lastDownPosition, realPosition) <= 2) {\n        this.newPoint(realPosition, width, height);\n      }\n    } else if (\n      this.currHitPoint && this.currHitPoint === this.getHitPoint(realPosition)\n      && this.lastDownPosition && this.lastDownPosition.isEqual(realPosition, 0.5)\n    ) {\n      this.deletePoint();\n    } else if (this.currHitPoint) {\n      // Point has finished moving\n      if (this.node.flow.state !== FlowState.Stopped) this.call('change', this, null, this._value.toArray());\n    }\n\n    this.currHitPoint = null;\n    this.lastDownPosition = null;\n\n    this.call('up', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onClick(screenPosition: Vector2, realPosition: Vector2): void {\n    if (this.disabled) return;\n\n    this.call('click', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onDrag(screenPosition: Vector2, realPosition: Vector2): void {\n    if (this.disabled) return;\n\n    if (this.currHitPoint) this.movePoint(realPosition);\n\n    this.call('drag', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onEnter(screenPosition: Vector2, realPosition: Vector2) {\n    if (this.disabled) return;\n\n    this.call('enter', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onExit(screenPosition: Vector2, realPosition: Vector2) {\n    if (this.disabled) return;\n\n    if (this.currHitPoint) {\n      this.movePoint(realPosition);\n      if (this.node.flow.state !== FlowState.Stopped) this.call('change', this, null, this._value.toArray());\n    }\n    this.currHitPoint = null;\n    this.lastDownPosition = null;\n\n    this.call('exit', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onWheel(direction: boolean, screenPosition: Vector2, realPosition: Vector2) {\n    if (this.disabled) return;\n\n    this.call('wheel', this, direction, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onContextMenu(): void {\n    if (this.disabled) return;\n  }\n\n  serialize(): SerializedEnvelope {\n    return {\n      values: this.value.map(vector => vector.serialize()),\n      propName: this.propName,\n      input: this.input ? this.input.serialize() : null,\n      output: this.output ? this.output.serialize() : null,\n      id: this.id,\n      hitColor: this.hitColor.serialize(),\n      style: this.style,\n      height: this.height,\n      type: this.type,\n      childs: []\n    }\n  }\n  static deSerialize(node: Node, data: SerializedEnvelope): Envelope {\n    return new Envelope(node, data.height, data.values.map(serialVec => Vector2.deSerialize(serialVec)), {\n      input: data.input,\n      output: data.output,\n      style: data.style,\n      id: data.id,\n      hitColor: Color.deSerialize(data.hitColor)\n    });\n  }\n}\n\nexport interface EnvelopeStyle extends UINodeStyle {\n  backgroundColor?: string,\n  pointColor?: string,\n  lineColor?: string,\n  borderColor?: string,\n  borderWidth?: number\n}\n/** @hidden */\nlet DefaultEnvelopeStyle = () => {\n  return {\n    backgroundColor: '#4a4a4a',\n    pointColor: '#9cffee',\n    lineColor: '#9cd6ff',\n    borderColor: '#000',\n    borderWidth: 1,\n    visible: true\n  };\n};\n\nexport interface SerializedEnvelope extends SerializedUINode {\n  values: SerializedVector2[],\n  height: number\n}\n\ninterface EnvelopeOptions {\n  input?: boolean | SerializedTerminal,\n  output?: boolean | SerializedTerminal,\n  style?: EnvelopeStyle,\n  id?: string,\n  hitColor?: Color\n}\n/** @hidden */\nlet DefaultEnvelopeOptions = () => {\n  return {};\n};\n","import { Color } from \"../core/color\";\nimport { Serializable } from \"../common/interfaces\";\nimport { Node } from \"../core/node\";\nimport { Vector2 } from \"../core/vector\";\nimport { Button } from \"./button\";\nimport { Container } from \"./container\";\nimport { Display } from \"./display\";\nimport { Image } from './image';\nimport { Input } from \"./input\";\nimport { Label } from \"./label\";\nimport { Select } from \"./select\";\nimport { Slider } from \"./slider\";\nimport { Source } from \"./source\";\nimport { Stack } from \"./stack\";\nimport { Toggle } from \"./toggle\";\nimport { SerializedUINode, UINode, UINodeStyle, UIType } from \"./ui-node\";\nimport { clamp } from \"../utils/utils\";\nimport { SerializedTerminal, Terminal, TerminalType } from \"../core/terminal\";\n\nexport class HorizontalLayout extends UINode implements Serializable {\n\n  constructor(\n    node: Node,\n    childs: UINode[] = [],\n    options: HorizontalLayoutOptions = DefaultHorizontalLayoutOptions()\n  ) {\n    super(node, Vector2.Zero(), UIType.HorizontalLayout, {\n      style: options.style ? { ...DefaultHorizontalLayoutStyle(), ...options.style } : DefaultHorizontalLayoutStyle(),\n      input: options.input && (typeof options.input === 'boolean'\n        ? new Terminal(node, TerminalType.IN, 'any', '', {})\n        : Terminal.deSerialize(node, options.input)),\n      output: options.output && (typeof options.output === 'boolean'\n        ? new Terminal(node, TerminalType.OUT, 'any', '', {})\n        : Terminal.deSerialize(node, options.output)),\n      id: options.id,\n      hitColor: options.hitColor\n    });\n\n    if (childs && childs.length > 0) this.children.push(...childs);\n  }\n\n  /** @hidden */\n  paint(): void { /**/ }\n  /** @hidden */\n  paintLOD1() { /**/ }\n  /** @hidden */\n  offPaint(): void {\n    this.offUIContext.fillStyle = this.hitColor.hexValue;\n    this.offUIContext.fillRect(this.position.x, this.position.y, this.width, this.height);\n  }\n  /** @hidden */\n  reflow(): void {\n    let children = this.children.filter(child => child.visible);\n\n    let availableWidth = this.width - (children.length > 0 ? (children.length - 1) : 0) * this.style.spacing;\n    let originalWidth = availableWidth;\n\n    let maxHeight = 0;\n    children.forEach(child => maxHeight = Math.max(maxHeight, child.height));\n    this.height = maxHeight;\n\n    let fixedWidthChilds = this.children.filter(child => !!child.width);\n    fixedWidthChilds.forEach(child => child.width = clamp(child.width, 0, availableWidth));\n    let fixedWidth = fixedWidthChilds.reduce((acc, curr) => acc + curr.width, 0);\n\n    let remainingWidth = originalWidth;\n    fixedWidth = clamp(fixedWidth, 0, remainingWidth);\n    remainingWidth -= fixedWidth;\n    let flexWidth = remainingWidth;\n\n    let x = this.position.x;\n    children.forEach(child => {\n      let childWidth;\n      if (!!child.width) childWidth = child.width;\n      else if (typeof child.style.grow === 'number') {\n        childWidth = child.style.grow * flexWidth;\n      } else {\n        childWidth = 0;\n      }\n\n      childWidth = clamp(childWidth, 0, availableWidth);\n      child.width = childWidth;\n\n      let y;\n      if (child.height < this.height) {\n        y = this.position.y + this.height / 2 - child.height / 2;\n      } else {\n        child.height = this.height\n        y = this.position.y;\n      }\n      child.position.assign(x, y);\n\n      availableWidth -= childWidth;\n      x += childWidth + this.style.spacing;\n    });\n\n    if (this.input) {\n      this.input.position.assign(\n        this.node.position.x - this.node.style.terminalStripMargin - this.input.style.radius,\n        this.position.y + this.height / 2\n      );\n    }\n    if (this.output) {\n      this.output.position.assign(\n        this.node.position.x + this.node.width + this.node.style.terminalStripMargin + this.output.style.radius,\n        this.position.y + this.height / 2\n      );\n    }\n\n    // To fix a bug, when creating HozLayout with childs argument, UI container's height won't update\n    this.node.ui.reflow();\n  }\n\n  /** @hidden */\n  onPropChange() { /**/ }\n  /** @hidden */\n  onOver(screenPosition: Vector2, realPosition: Vector2): void {\n    if (this.disabled) return;\n\n    this.call('over', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onDown(screenPosition: Vector2, realPosition: Vector2): void {\n    if (this.disabled) return;\n\n    this.call('down', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onUp(screenPosition: Vector2, realPosition: Vector2): void {\n    if (this.disabled) return;\n\n    this.call('up', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onClick(screenPosition: Vector2, realPosition: Vector2): void {\n    if (this.disabled) return;\n\n    this.call('click', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onDrag(screenPosition: Vector2, realPosition: Vector2): void {\n    if (this.disabled) return;\n\n    this.call('drag', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onEnter(screenPosition: Vector2, realPosition: Vector2) {\n    if (this.disabled) return;\n\n    this.call('enter', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onExit(screenPosition: Vector2, realPosition: Vector2) {\n    if (this.disabled) return;\n\n    this.call('exit', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onWheel(direction: boolean, screenPosition: Vector2, realPosition: Vector2) {\n    if (this.disabled) return;\n\n    this.call('wheel', this, direction, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onContextMenu(): void { /**/ }\n\n  serialize(): SerializedHorizontalLayout {\n    return {\n      propName: this.propName,\n      input: this.input ? this.input.serialize() : null,\n      output: this.output ? this.output.serialize() : null,\n      id: this.id,\n      style: this.style,\n      hitColor: this.hitColor.serialize(),\n      type: this.type,\n      childs: this.children.map(child => (child as any).serialize())\n    }\n  }\n  static deSerialize(node: Node, data: SerializedHorizontalLayout): HorizontalLayout {\n    let hozLayout = new HorizontalLayout(node, [], {\n      style: data.style,\n      input: data.input,\n      output: data.output,\n      id: data.id,\n      hitColor: Color.deSerialize(data.hitColor)\n    });\n\n    hozLayout.children.push(...data.childs.map(serializedChild => {\n      switch (serializedChild.type) {\n        case UIType.Button: return Button.deSerialize(node, serializedChild);\n        case UIType.Container: return Container.deSerialize(node, serializedChild);\n        case UIType.Display: return Display.deSerialize(node, serializedChild);\n        case UIType.HorizontalLayout: return HorizontalLayout.deSerialize(node, serializedChild);\n        case UIType.Stack: return Stack.deSerialize(node, serializedChild);\n        case UIType.Image: return Image.deSerialize(node, serializedChild);\n        case UIType.Input: return Input.deSerialize(node, serializedChild);\n        case UIType.Label: return Label.deSerialize(node, serializedChild);\n        case UIType.Select: return Select.deSerialize(node, serializedChild);\n        case UIType.Slider: return Slider.deSerialize(node, serializedChild);\n        case UIType.Source: return Source.deSerialize(node, serializedChild);\n        case UIType.Toggle: return Toggle.deSerialize(node, serializedChild);\n        default: return;\n      }\n    }));\n    return hozLayout;\n  }\n}\n\nexport interface HorizontalLayoutStyle extends UINodeStyle {\n  spacing?: number\n}\n/** @hidden */\nlet DefaultHorizontalLayoutStyle = () => {\n  return {\n    spacing: 0,\n    visible: true\n  };\n};\n\nexport interface SerializedHorizontalLayout extends SerializedUINode { }\n\ninterface HorizontalLayoutOptions {\n  style?: HorizontalLayoutStyle,\n  input?: boolean | SerializedTerminal,\n  output?: boolean | SerializedTerminal,\n  id?: string,\n  hitColor?: Color\n}\n/** @hidden */\nlet DefaultHorizontalLayoutOptions = (): HorizontalLayoutOptions => {\n  return {};\n};\n","import { Color } from \"../core/color\";\nimport { Serializable } from \"../common/interfaces\";\nimport { Node } from \"../core/node\";\nimport { Vector2 } from \"../core/vector\";\nimport { imageIcon } from \"../resource/icons\";\nimport { Log } from \"../utils/logger\";\nimport { SerializedUINode, UINode, UINodeStyle, UIType } from \"./ui-node\";\nimport { Align } from \"../common/enums\";\nimport { SerializedTerminal, Terminal, TerminalType } from \"../core/terminal\";\nimport { FlowState } from '../core/flow';\nimport { get } from \"../utils/utils\";\n\nexport class Image extends UINode implements Serializable {\n  private imageCanvas: OffscreenCanvas | HTMLCanvasElement;\n  private imageContext: OffscreenCanvasRenderingContext2D | CanvasRenderingContext2D;\n  private source: HTMLImageElement;\n  private ratio: number;\n  private _src: string;\n\n  get src(): string {\n    if (this.propName) return this.getProp();\n    return this._src;\n  }\n  set src(src: string) {\n    let oldVal = this._src;\n    let newVal = src;\n\n    if (this.propName) this.setProp(newVal);\n    else this._src = newVal;\n    this.setupImage();\n\n    if (this.node.flow.state !== FlowState.Stopped) this.call('change', this, oldVal, newVal);\n  }\n\n  constructor(\n    node: Node,\n    sourceString: string,\n    options: ImageOptions = DefaultImageOptions()\n  ) {\n    super(node, Vector2.Zero(), UIType.Image, {\n      style: options.style ? { ...DefaultImageStyle(), ...options.style } : DefaultImageStyle(),\n      propName: options.propName,\n      input: options.input && (typeof options.input === 'boolean'\n        ? new Terminal(node, TerminalType.IN, 'string', '', {})\n        : Terminal.deSerialize(node, options.input)),\n      output: options.output && (typeof options.output === 'boolean'\n        ? new Terminal(node, TerminalType.OUT, 'string', '', {})\n        : Terminal.deSerialize(node, options.output)),\n      id: options.id,\n      hitColor: options.hitColor\n    });\n\n    this._src = get(sourceString, imageIcon);\n    this.setupImage();\n  }\n\n  setupImage() {\n    if (!this.source) {\n      this.source = document.createElement('img');\n      this.source.onerror = (error) => Log.error(error);\n      this.source.onload = () => {\n        this.imageCanvas.width = this.source.width;\n        this.imageCanvas.height = this.source.height;\n\n        this.imageContext.drawImage(this.source, 0, 0);\n        this.ratio = this.source.width / this.source.height;\n        this.reflow();\n        this.node.ui.update();\n      };\n    }\n    if (!this.imageCanvas) {\n      if (typeof OffscreenCanvas !== 'undefined') this.imageCanvas = new OffscreenCanvas(0, 0);\n      else {\n        this.imageCanvas = document.createElement('canvas');\n        this.imageCanvas.width = 0;\n        this.imageCanvas.height = 0;\n      }\n      this.imageContext = this.imageCanvas.getContext('2d');\n    }\n\n    this.source.src = this._src;\n  }\n\n  /** @hidden */\n  paint(): void {\n    if (this.imageCanvas && this.imageCanvas.width > 0 && this.imageCanvas.height > 0) {\n      let x = this.position.x;\n      if (this.source.width < this.node.ui.contentWidth) {\n        if (this.style.align === Align.Center) x += this.node.ui.contentWidth / 2 - this.source.width / 2;\n        else if (this.style.align === Align.Right) x += + (this.node.ui.contentWidth - this.source.width);\n      }\n      this.context.drawImage(\n        this.imageCanvas, 0, 0, this.source.width, this.source.height,\n        x, this.position.y, this.source.width < this.width ? this.source.width : this.width, this.height\n      );\n    }\n  }\n  /** @hidden */\n  paintLOD1() {\n    if (this.imageCanvas) {\n      let x = this.position.x;\n      if (this.source.width < this.node.ui.contentWidth) {\n        if (this.style.align === Align.Center) x += this.node.ui.contentWidth / 2 - this.source.width / 2;\n        else if (this.style.align === Align.Right) x += + (this.node.ui.contentWidth - this.source.width);\n      }\n      let context = this.context;\n      context.fillStyle = 'lightgrey';\n      context.strokeStyle = '#000';\n      context.fillRect(x, this.position.y, this.source.width < this.width ? this.source.width : this.width, this.height);\n      context.strokeRect(x, this.position.y, this.source.width < this.width ? this.source.width : this.width, this.height)\n    }\n  }\n  /** @hidden */\n  offPaint(): void {\n    this.offUIContext.fillStyle = this.hitColor.hexValue;\n\n    let x = this.position.x;\n    if (this.source.width < this.node.ui.contentWidth) {\n      if (this.style.align === Align.Center) x += this.node.ui.contentWidth / 2 - this.source.width / 2;\n      else if (this.style.align === Align.Right) x += + (this.node.ui.contentWidth - this.source.width);\n    }\n    this.offUIContext.fillRect(x, this.position.y, this.source.width < this.width ? this.source.width : this.width, this.height);\n  }\n  /** @hidden */\n  reflow(): void {\n    if (!this.source.width || !this.source.height) return;\n\n    if (this.source.width > this.width) {\n      this.height = this.width / this.ratio;\n    } else {\n      this.width = this.source.width;\n      this.height = this.source.height;\n    }\n\n    if (this.input) {\n      this.input.position.assign(\n        this.node.position.x - this.node.style.terminalStripMargin - this.input.style.radius,\n        this.position.y + this.height / 2\n      );\n    }\n    if (this.output) {\n      this.output.position.assign(\n        this.node.position.x + this.node.width + this.node.style.terminalStripMargin + this.output.style.radius,\n        this.position.y + this.height / 2\n      );\n    }\n  }\n\n  /** @hidden */\n  onPropChange(_oldVal: any, newVal: any) {\n    this._src = newVal;\n    this.setupImage();\n\n    this.output && this.output.setData(newVal);\n  }\n  /** @hidden */\n  onOver(screenPosition: Vector2, realPosition: Vector2): void {\n    if (this.disabled) return;\n\n    this.call('over', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onDown(screenPosition: Vector2, realPosition: Vector2): void {\n    if (this.disabled) return;\n\n    this.call('down', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onUp(screenPosition: Vector2, realPosition: Vector2): void {\n    if (this.disabled) return;\n\n    this.call('up', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onClick(screenPosition: Vector2, realPosition: Vector2): void {\n    if (this.disabled) return;\n\n    this.call('click', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onDrag(screenPosition: Vector2, realPosition: Vector2): void {\n    if (this.disabled) return;\n\n    this.call('drag', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onEnter(screenPosition: Vector2, realPosition: Vector2) {\n    if (this.disabled) return;\n\n    this.call('enter', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onExit(screenPosition: Vector2, realPosition: Vector2) {\n    if (this.disabled) return;\n\n    this.call('exit', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onWheel(direction: boolean, screenPosition: Vector2, realPosition: Vector2) {\n    if (this.disabled) return;\n\n    this.call('wheel', this, direction, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onContextMenu(): void { /**/ }\n\n  serialize(): SerializedImage {\n    return {\n      source: this._src,\n      propName: this.propName,\n      input: this.input ? this.input.serialize() : null,\n      output: this.output ? this.output.serialize() : null,\n      style: this.style,\n      id: this.id,\n      hitColor: this.hitColor.serialize(),\n      type: this.type,\n      childs: []\n    }\n  }\n  static deSerialize(node: Node, data: SerializedImage): Image {\n    return new Image(node, data.source, {\n      propName: data.propName,\n      input: data.input,\n      output: data.output,\n      style: data.style,\n      id: data.id,\n      hitColor: Color.deSerialize(data.hitColor)\n    });\n  }\n}\n\nexport interface ImageStyle extends UINodeStyle {\n  align?: Align\n}\n/** @hidden */\nlet DefaultImageStyle = () => {\n  return {\n    align: Align.Left,\n    visible: true\n  };\n};\n\nexport interface SerializedImage extends SerializedUINode {\n  source: string\n}\n\ninterface ImageOptions {\n  propName?: string,\n  input?: boolean | SerializedTerminal,\n  output?: boolean | SerializedTerminal,\n  style?: ImageStyle,\n  id?: string,\n  hitColor?: Color\n}\n/** @hidden */\nlet DefaultImageOptions = (): ImageOptions => {\n  return {};\n};\n","export * from './button';\nexport * from './container';\nexport * from './display';\nexport * from './horizontal-layout';\nexport * from './image';\nexport * from './input';\nexport * from './label';\nexport * from './select';\nexport * from './slider';\nexport * from './source';\nexport * from './stack';\nexport * from './toggle';\nexport * from './ui-node';\n","import { Vector2 } from \"../core/vector\";\nimport { SerializedUINode, UINode, UINodeStyle, UIType } from \"./ui-node\";\nimport { Node } from '../core/node';\nimport { Label } from './label';\nimport { Terminal, TerminalType, SerializedTerminal } from \"../core/terminal\";\nimport { Serializable } from \"../common/interfaces\";\nimport { Color } from \"../core/color\";\nimport { FlowState } from \"../core/flow\";\nimport { Align } from \"../common/enums\";\nimport { exists, get } from \"../utils/utils\";\n\nexport class Input extends UINode implements Serializable {\n  label: Label;\n  inputEl: HTMLInputElement;\n  private _value: string | number;\n\n  get value(): string | number {\n    if (this.propName) return this.getProp();\n    return this._value;\n  }\n  set value(value: string | number) {\n    let val: string | number;\n    if (this.style.type === InputType.Number && typeof value === 'string') val = parseFloat(value);\n    else val = value;\n\n    let oldVal = this.value;\n    let newVal = val;\n\n    if (this.propName) this.setProp(newVal);\n    else {\n      this._value = newVal;\n      this.setLabelText(this._value);\n      this.inputEl.value = this._value.toString();\n    }\n    if (this.node.flow.state !== FlowState.Stopped) this.call('change', this, newVal, oldVal);\n  }\n\n  constructor(\n    node: Node,\n    options: InputOptions = DefaultInputOptions(node)\n  ) {\n    super(\n      node, Vector2.Zero(), UIType.Input, {\n      style: options.style ? { ...DefaultInputStyle(), ...options.style } : DefaultInputStyle(),\n      propName: options.propName,\n      input: options.input && (typeof options.input === 'boolean'\n        ? new Terminal(node, TerminalType.IN, options.style.type, '', {})\n        : Terminal.deSerialize(node, options.input)),\n      output: options.output && (typeof options.output === 'boolean'\n        ? new Terminal(node, TerminalType.OUT, options.style.type, '', {})\n        : Terminal.deSerialize(node, options.output)),\n      id: options.id,\n      hitColor: options.hitColor\n    });\n\n    this.height = get(options.height, this.node.style.rowHeight);\n\n    if (this.style.type === InputType.Number && typeof options.value === 'string') options.value = parseFloat(options.value);\n    this._value = options.value;\n\n    this.setupLabel();\n    this.setupInputElement();\n\n    if (this.input) {\n      this.input.on('connect', (_, connector) => {\n        if (connector.data) this.value = connector.data;\n      });\n      this.input.on('data', (_, data) => {\n        if (data) this.value = data;\n      });\n    }\n    if (this.output) this.output.on('connect', (_, connector) => connector.data = this.value);\n\n    this.node.on('process', () => {\n      if (this.output) this.output.setData(this.value);\n    });\n  }\n\n  setupLabel() {\n    this.label = new Label(this.node, this.value.toString(), {\n      style: {\n        fontSize: this.style.fontSize,\n        font: this.style.font,\n        align: this.style.align,\n        color: this.style.color,\n        padding: 5,\n        precision: this.style.precision || null\n      }, height: this.height\n    });\n    this.label.on('click', () => {\n      if (document.activeElement !== this.inputEl) {\n        let realPosition = this.position.transform(this.node.flow.flowConnect.transform);\n        Object.assign(this.inputEl.style, {\n          'visibility': 'visible',\n          'pointer-events': 'all',\n          'top': (realPosition.y + this.node.flow.flowConnect.canvasDimensions.top + 1) + 'px',\n          'left': (realPosition.x + this.node.flow.flowConnect.canvasDimensions.left + 1) + 'px',\n          'width': (this.width - 1) * this.node.flow.flowConnect.scale + 'px',\n          'height': (this.height - 1) * this.node.flow.flowConnect.scale + 'px',\n          'font-family': this.style.font,\n          'font-size': parseInt(this.style.fontSize.replace('px', '')) * this.node.flow.flowConnect.scale + 'px',\n          'color': this.style.color,\n          'background-color': this.inputEl.validity.patternMismatch ? 'red' : this.style.backgroundColor,\n          'text-align': this.style.align\n        });\n        if (this.style.type === InputType.Number) this.inputEl.step = this.style.step;\n        this.inputEl.focus();\n      }\n    });\n    this.children.push(this.label);\n  }\n  setupInputElement() {\n    this.inputEl = document.createElement('input');\n    this.inputEl.className = 'flow-connect-input';\n    this.inputEl.spellcheck = false;\n    let inputType = this.style.type === 'string' ? 'text' : this.style.type\n    this.inputEl.type = this.style.pattern ? 'text' : inputType;\n    this.inputEl.value = this.value.toString();\n    if (this.style.pattern) this.inputEl.pattern = this.style.pattern;\n    if (this.style.type === InputType.Number && this.style.step) this.inputEl.step = this.style.step;\n    if (this.style.maxLength) this.inputEl.maxLength = this.style.maxLength;\n\n    this.inputEl.addEventListener('blur', () => {\n      this.inputEl.style.visibility = 'hidden';\n      this.inputEl.style.pointerEvents = 'none';\n      this.value = this.inputEl.value;\n\n      this.setLabelText(this.style.type === InputType.Number ? parseFloat(this.value) : this.value.toString());\n\n      this.call('blur', this);\n    });\n    this.inputEl.oninput = () => {\n      if (this.style.pattern) {\n        this.inputEl.style.backgroundColor = this.inputEl.validity.patternMismatch ? 'orange' : this.style.backgroundColor;\n        this.label.style.color = this.inputEl.validity.patternMismatch ? 'orange' : this.style.color;\n      }\n      this.call('input', this);\n    }\n    document.body.appendChild(this.inputEl);\n  }\n  setLabelText(value: any) {\n    this.label.text = typeof value === 'number' && exists(this.style.precision) ? value.toFixed(this.style.precision) : value;\n  }\n\n  /** @hidden */\n  paint(): void {\n    this.context.strokeStyle = this.style.border;\n    this.context.strokeRect(this.position.x, this.position.y, this.width, this.height);\n  }\n  /** @hidden */\n  paintLOD1() {\n    let context = this.context;\n    context.strokeStyle = this.style.border;\n    context.fillStyle = this.style.backgroundColor;\n    context.strokeRect(this.position.x, this.position.y, this.width, this.height);\n    context.fillRect(this.position.x, this.position.y, this.width, this.height);\n  }\n  /** @hidden */\n  offPaint(): void {\n    this.offUIContext.fillStyle = this.hitColor.hexValue;\n    this.offUIContext.fillRect(this.position.x, this.position.y, this.width, this.height);\n  }\n  /** @hidden */\n  reflow(): void {\n    this.label.position = this.position;\n    this.label.height = this.height;\n    this.label.width = this.width;\n\n    if (this.input) {\n      this.input.position.assign(\n        this.node.position.x - this.node.style.terminalStripMargin - this.input.style.radius,\n        this.position.y + this.height / 2\n      );\n    }\n    if (this.output) {\n      this.output.position.assign(\n        this.node.position.x + this.node.width + this.node.style.terminalStripMargin + this.output.style.radius,\n        this.position.y + this.height / 2\n      );\n    }\n  }\n\n  /** @hidden */\n  onPropChange(_oldVal: any, newVal: any) {\n    if (this.style.type === InputType.Number && typeof newVal === 'string') newVal = parseFloat(newVal);\n\n    this._value = newVal;\n    this.setLabelText(this._value);\n    this.inputEl.value = this._value.toString();\n\n    this.output && this.output.setData(this._value);\n  }\n  /** @hidden */\n  onOver(screenPosition: Vector2, realPosition: Vector2): void {\n    if (this.disabled) return;\n\n    this.call('over', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onDown(screenPosition: Vector2, realPosition: Vector2): void {\n    if (this.disabled) return;\n\n    this.call('down', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onUp(screenPosition: Vector2, realPosition: Vector2): void {\n    if (this.disabled) return;\n\n    this.call('up', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onClick(screenPosition: Vector2, realPosition: Vector2): void {\n    if (this.disabled) return;\n\n    this.call('click', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onDrag(screenPosition: Vector2, realPosition: Vector2): void {\n    if (this.disabled) return;\n\n    this.call('drag', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onEnter(screenPosition: Vector2, realPosition: Vector2) {\n    if (this.disabled) return;\n\n    this.call('enter', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onExit(screenPosition: Vector2, realPosition: Vector2) {\n    if (this.disabled) return;\n\n    this.call('exit', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onWheel(direction: boolean, screenPosition: Vector2, realPosition: Vector2) {\n    if (this.disabled) return;\n\n    this.call('wheel', this, direction, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onContextMenu(): void {\n    if (this.disabled) return;\n  }\n\n  serialize(): SerializedInput {\n    return {\n      value: this.value,\n      propName: this.propName,\n      input: this.input ? this.input.serialize() : null,\n      output: this.output ? this.output.serialize() : null,\n      height: this.height,\n      style: this.style,\n      id: this.id,\n      hitColor: this.hitColor.serialize(),\n      type: this.type,\n      childs: []\n    }\n  }\n  static deSerialize(node: Node, data: SerializedInput): Input {\n    return new Input(node, {\n      value: data.value,\n      propName: data.propName,\n      input: data.input,\n      output: data.output,\n      height: data.height,\n      style: data.style,\n      id: data.id,\n      hitColor: Color.deSerialize(data.hitColor)\n    });\n  }\n}\n\nexport enum InputType {\n  Text = 'string',\n  Number = 'number'\n}\n\nexport interface InputStyle extends UINodeStyle {\n  backgroundColor?: string,\n  color?: string,\n  fontSize?: string,\n  font?: string,\n  border?: string,\n  type?: InputType,\n  align?: Align,\n  precision?: number,\n  pattern?: string,\n  step?: string,\n  maxLength?: number,\n}\n/** @hidden */\nlet DefaultInputStyle = (): InputStyle => {\n  return {\n    backgroundColor: '#eee',\n    color: '#000',\n    fontSize: '11px',\n    font: 'arial',\n    border: '1px solid black',\n    align: Align.Left,\n    type: InputType.Text\n  };\n};\n\nexport interface SerializedInput extends SerializedUINode {\n  value: string | number,\n  height: number\n}\n\ninterface InputOptions {\n  value?: string | number,\n  propName?: string,\n  input?: boolean | SerializedTerminal,\n  output?: boolean | SerializedTerminal,\n  height?: number,\n  style?: InputStyle,\n  id?: string,\n  hitColor?: Color\n}\n/** @hidden */\nlet DefaultInputOptions = (node: Node): InputOptions => {\n  return {\n    height: node.style.rowHeight * 1.5\n  };\n}\n","import { Terminal, TerminalType, SerializedTerminal } from \"../core/terminal\";\nimport { Node } from \"../core/node\";\nimport { Vector2 } from \"../core/vector\";\nimport { SerializedUINode, UINode, UINodeStyle, UIType } from \"./ui-node\";\nimport { Serializable } from \"../common/interfaces\";\nimport { Color } from \"../core/color\";\nimport { binarySearch, exists, get } from \"../utils/utils\";\nimport { FlowState } from \"../core/flow\";\nimport { Align } from \"../common/enums\";\n\nexport class Label extends UINode implements Serializable {\n  private displayText: string;\n  private _text: string | number;\n  private textWidth: number;    // This may be smaller due to surrounding width constraints (this is som...)\n  private orgTextWidth: number; // While this is the actual width                           (this is some text)\n  private textHeight: number;\n\n  get text(): string {\n    let value;\n    if (this.propName) value = this.getProp();\n    else value = this._text;\n\n    if (typeof value === 'number') value = this.format(value);\n    return value;\n  }\n  set text(text: string | number) {\n    let oldVal = this._text;\n    let newVal = text;\n\n    if (this.propName) {\n      this.setProp(newVal);\n    } else {\n      this._text = newVal;\n      this.reflow();\n    }\n\n    if (this.node.flow.state !== FlowState.Stopped) this.call('change', this, oldVal, newVal);\n  }\n\n  constructor(\n    node: Node,\n    text: string | number,\n    options: LabelOptions = DefaultLabelOptions(node)\n  ) {\n    super(node, Vector2.Zero(), UIType.Label, {\n      style: options.style ? { ...DefaultLabelStyle(), ...options.style } : DefaultLabelStyle(),\n      propName: options.propName,\n      input: options.input && (typeof options.input === 'boolean'\n        ? new Terminal(node, TerminalType.IN, 'any', '', {})\n        : Terminal.deSerialize(node, options.input)),\n      output: options.output && (typeof options.output === 'boolean'\n        ? new Terminal(node, TerminalType.OUT, 'string', '', {})\n        : Terminal.deSerialize(node, options.output)),\n      id: options.id,\n      hitColor: options.hitColor\n    });\n\n    this._text = this.propName ? this.getProp() : text;\n    this.reflow();\n\n    this.height = get(options.height, this.textHeight + 5);\n    if (!this.style.grow) this.width = this.orgTextWidth;\n\n    if (this.input) {\n      this.input.on('connect', (_, connector) => {\n        if (exists(connector.data)) this.text = connector.data;\n      });\n      this.input.on('data', (_, data) => {\n        if (exists(data)) this.text = data;\n      });\n    }\n    if (this.output) this.output.on('connect', (_, connector) => connector.data = this.text);\n\n    this.node.on('process', () => {\n      if (this.output) this.output.setData(this.text);\n    });\n  }\n\n  /** @hidden */\n  paint(): void {\n    let context = this.context;\n\n    context.fillStyle = this.style.backgroundColor;\n    context.fillRect(this.position.x, this.position.y, this.width, this.height);\n\n    context.fillStyle = this.style.color;\n    context.font = this.style.fontSize + ' ' + this.style.font;\n    context.textBaseline = 'middle';\n    let y = this.position.y + this.height / 2;\n    let x = this.position.x;\n    if (this.style.align === Align.Center) {\n      x += this.width / 2 - this.textWidth / 2;\n    } else if (this.style.align === Align.Right) {\n      x += this.width - this.textWidth - this.style.padding;\n    } else {\n      x += this.style.padding\n    }\n\n    context.fillText(this.displayText, x, y);\n  }\n  /** @hidden */\n  paintLOD1() {\n    let context = this.context;\n    context.strokeStyle = '#000';\n    context.fillStyle = this.style.color;\n    context.strokeRect(this.position.x, this.position.y, this.width, this.height);\n    context.fillRect(this.position.x, this.position.y, this.width, this.height);\n  }\n  /** @hidden */\n  offPaint(): void {\n    this.offUIContext.fillStyle = this.hitColor.hexValue;\n    this.offUIContext.fillRect(this.position.x, this.position.y, this.width, this.height);\n  }\n  /** @hidden */\n  reflow(): void {\n    let context = this.context;\n    context.font = this.style.fontSize + ' ' + this.style.font;\n    this.orgTextWidth = context.measureText(this.text).width;\n    this.displayText = this.getBestFitString();\n    let metrics = context.measureText(this.displayText);\n    context.font = null;\n    this.textWidth = metrics.width;\n\n    this.textHeight = metrics.actualBoundingBoxAscent + metrics.actualBoundingBoxDescent + 5;\n\n    if (this.input) {\n      this.input.position.assign(\n        this.node.position.x - this.node.style.terminalStripMargin - this.input.style.radius,\n        this.position.y + this.height / 2\n      );\n    }\n    if (this.output) {\n      this.output.position.assign(\n        this.node.position.x + this.node.width + this.node.style.terminalStripMargin + this.output.style.radius,\n        this.position.y + this.height / 2\n      );\n    }\n  }\n  /** @hidden */\n  getBestFitString(): string {\n    let text = this.text;\n    if (typeof (text as any) !== 'string') text = text.toString();\n\n    let width = this.context.measureText(text).width;\n    const ellipsis = '…';\n    const ellipsisWidth = this.context.measureText(ellipsis).width;\n    if (width <= this.width || width <= ellipsisWidth) return text;\n\n    const index = binarySearch({\n      max: text.length,\n      getValue: (idx: number) => this.context.measureText(text.substring(0, idx)).width,\n      match: this.width - ellipsisWidth,\n    });\n\n    return text.substring(0, index) + ellipsis;\n  }\n  /** @hidden */\n  format(value: number): string {\n    return exists(this.style.precision) ? value.toFixed(this.style.precision) : value.toString();\n  }\n\n  /** @hidden */\n  onPropChange(_oldVal: any, newVal: any) {\n    this._text = newVal;\n    this.reflow();\n\n    this.output && this.output.setData(this._text);\n  }\n  /** @hidden */\n  onOver(screenPosition: Vector2, realPosition: Vector2): void {\n    if (this.disabled) return;\n\n    this.call('over', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onDown(screenPosition: Vector2, realPosition: Vector2): void {\n    if (this.disabled) return;\n\n    this.call('down', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onUp(screenPosition: Vector2, realPosition: Vector2): void {\n    if (this.disabled) return;\n\n    this.call('up', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onClick(screenPosition: Vector2, realPosition: Vector2): void {\n    if (this.disabled) return;\n\n    this.call('click', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onDrag(screenPosition: Vector2, realPosition: Vector2): void {\n    if (this.disabled) return;\n\n    this.call('drag', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onEnter(screenPosition: Vector2, realPosition: Vector2) {\n    if (this.disabled) return;\n\n    this.call('enter', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onExit(screenPosition: Vector2, realPosition: Vector2) {\n    if (this.disabled) return;\n\n    this.call('exit', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onWheel(direction: boolean, screenPosition: Vector2, realPosition: Vector2) {\n    if (this.disabled) return;\n\n    this.call('wheel', this, direction, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onContextMenu(): void {\n    if (this.disabled) return;\n  }\n\n  serialize(): SerializedLabel {\n    return {\n      text: this.text,\n      propName: this.propName,\n      input: this.input ? this.input.serialize() : null,\n      output: this.output ? this.output.serialize() : null,\n      height: this.height,\n      style: this.style,\n      id: this.id,\n      hitColor: this.hitColor.serialize(),\n      type: this.type,\n      childs: []\n    }\n  }\n  static deSerialize(node: Node, data: SerializedLabel): Label {\n    return new Label(node, data.text, {\n      propName: data.propName,\n      input: data.input,\n      output: data.output,\n      height: data.height,\n      style: data.style,\n      id: data.id,\n      hitColor: Color.deSerialize(data.hitColor)\n    });\n  }\n}\n\nexport interface LabelStyle extends UINodeStyle {\n  color?: string,\n  backgroundColor?: string,\n  fontSize?: string,\n  font?: string,\n  align?: Align,\n  precision?: number,\n  padding?: number\n}\n/** @hidden */\nlet DefaultLabelStyle = () => {\n  return {\n    color: '#000',\n    backgroundColor: 'transparent',\n    fontSize: '11px',\n    font: 'arial',\n    align: Align.Left,\n    padding: 0,\n    visible: true\n  };\n};\n\nexport interface SerializedLabel extends SerializedUINode {\n  text: string,\n  height: number\n}\n\ninterface LabelOptions {\n  propName?: string,\n  input?: boolean | SerializedTerminal,\n  output?: boolean | SerializedTerminal,\n  height?: number,\n  style?: LabelStyle,\n  id?: string,\n  hitColor?: Color\n}\n/** @hidden */\nlet DefaultLabelOptions = (node: Node): LabelOptions => {\n  return {\n    height: node.style.rowHeight * 1.5\n  }\n};\n","import { Terminal, TerminalType, SerializedTerminal } from \"../core/terminal\";\nimport { Node } from \"../core/node\";\nimport { Vector2 } from \"../core/vector\";\nimport { SerializedUINode, UINode, UINodeStyle, UIType } from \"./ui-node\";\nimport { Serializable } from \"../common/interfaces\";\nimport { Color } from \"../core/color\";\nimport { FlowState } from \"../core/flow\";\nimport { Label } from \"./label\";\nimport { Align } from \"../common/enums\";\nimport { get } from \"../utils/utils\";\n\nexport class RadioGroup extends UINode implements Serializable {\n  private _values: string[];\n  private _selected: string;\n\n  get selected(): string {\n    if (this.propName) return this.getProp();\n    return this._selected;\n  }\n  set selected(selected: string) {\n    if (!this._values.includes(selected)) selected = this._values[0];\n\n    let oldVal = this.selected;\n    let newVal = selected;\n\n    if (this.propName) this.setProp(newVal);\n    else this._selected = newVal;\n\n    if (this.node.flow.state !== FlowState.Stopped) this.call('change', this, oldVal, newVal);\n  }\n\n  constructor(\n    node: Node,\n    values: string[] = ['default'],\n    selected: string = 'default',\n    options: RadioGroupOptions = DefaultRadioGroupOptions(node)\n  ) {\n    super(node, Vector2.Zero(), UIType.RadioGroup, {\n      style: options.style ? { ...DefaultRadioGroupStyle(), ...options.style } : DefaultRadioGroupStyle(),\n      propName: options.propName,\n      input: options.input && (typeof options.input === 'boolean'\n        ? new Terminal(node, TerminalType.IN, 'boolean', '', {})\n        : Terminal.deSerialize(node, options.input)),\n      output: options.output && (typeof options.output === 'boolean'\n        ? new Terminal(node, TerminalType.OUT, 'boolean', '', {})\n        : Terminal.deSerialize(node, options.output)),\n      id: options.id,\n      hitColor: options.hitColor\n    });\n\n    if (values.length === 0) values = ['default'];\n    this._values = values;\n    let selectedValue = this.propName ? this.getProp() : selected;\n    this._selected = this._values.includes(selectedValue) ? selectedValue : this._values[0];\n    this.height = get(options.height, this.node.style.rowHeight);\n\n    if (this.input) {\n      this.input.on('connect', (_, connector) => {\n        if (connector.data) this._selected = connector.data;\n      });\n      this.input.on('data', (_, data) => {\n        if (typeof data !== 'undefined') this._selected = data;\n      });\n    }\n    if (this.output) this.output.on('connect', (_, connector) => connector.data = this._selected);\n\n    this.setupLabels();\n\n    this.node.on('process', () => {\n      if (this.output) this.output.setData(this._selected);\n    });\n  }\n\n  setupLabels() {\n    this.children.push(...this._values.map(option => {\n      let label = new Label(this.node, option, {\n        style: { align: Align.Center, backgroundColor: this.style.backgroundColor, color: this.style.color }\n      });\n\n      label.on('click', (selectedLabel: Label) => {\n        if (selectedLabel.text === this.selected) return;\n        let lastSelectedLabel = this.children[this._values.indexOf(this.selected)];\n        Object.assign(lastSelectedLabel.style, {\n          backgroundColor: this.style.backgroundColor,\n          color: this.style.color\n        });\n        Object.assign(selectedLabel.style, {\n          backgroundColor: this.style.selectedBackgroundColor,\n          color: this.style.selectedColor\n        });\n        this.selected = selectedLabel.text;\n      });\n\n      return label;\n    }));\n    Object.assign(this.children[this._values.indexOf(this._selected)].style, {\n      backgroundColor: this.style.selectedBackgroundColor,\n      color: this.style.selectedColor\n    });\n  }\n\n  /** @hidden */\n  paint(): void {\n    let context = this.context;\n    context.strokeStyle = this.style.borderColor;\n    context.lineWidth = this.style.borderWidth\n    context.strokeRect(this.position.x, this.position.y, this.width, this.height);\n\n    let commonWidth = this.width / this.children.length;\n    let x = this.position.x + commonWidth;\n    for (let i = 0; i < this.children.length - 1; i += 1) {\n      context.beginPath();\n      context.moveTo(x, this.position.y);\n      context.lineTo(x, this.position.y + this.height);\n      context.stroke();\n      x += commonWidth;\n    }\n  }\n  /** @hidden */\n  paintLOD1() {\n    let context = this.context;\n    context.strokeStyle = this.style.borderColor;\n    context.fillStyle = this.style.backgroundColor;\n    context.strokeRect(this.position.x, this.position.y, this.width, this.height);\n    context.fillRect(this.position.x, this.position.y, this.width, this.height);\n  }\n  /** @hidden */\n  offPaint(): void {\n    this.offUIContext.fillStyle = this.hitColor.hexValue;\n    this.offUIContext.fillRect(this.position.x, this.position.y, this.width, this.height);\n  }\n  /** @hidden */\n  reflow(): void {\n    let x = this.position.x;\n    this.children.forEach(child => {\n      child.height = this.height;\n      child.width = this.width / this.children.length;\n      child.position.assign(x, this.position.y);\n      x += child.width;\n    });\n\n    if (this.input) {\n      this.input.position.assign(\n        this.node.position.x - this.node.style.terminalStripMargin - this.input.style.radius,\n        this.position.y + this.height / 2\n      );\n    }\n    if (this.output) {\n      this.output.position.assign(\n        this.node.position.x + this.node.width + this.node.style.terminalStripMargin + this.output.style.radius,\n        this.position.y + this.height / 2\n      );\n    }\n  }\n\n  /** @hidden */\n  onPropChange(_oldVal: any, newVal: any) {\n    if (!this._values.includes(newVal)) newVal = this._values[0];\n    this._selected = newVal;\n\n    this.output && this.output.setData(this._selected);\n  }\n  /** @hidden */\n  onOver(screenPosition: Vector2, realPosition: Vector2): void {\n    if (this.disabled) return;\n\n    this.call('over', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onDown(screenPosition: Vector2, realPosition: Vector2): void {\n    if (this.disabled) return;\n\n    this.call('down', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onUp(screenPosition: Vector2, realPosition: Vector2): void {\n    if (this.disabled) return;\n\n    this.call('up', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onClick(screenPosition: Vector2, realPosition: Vector2): void {\n    if (this.disabled) return;\n\n    this.call('click', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onDrag(screenPosition: Vector2, realPosition: Vector2): void {\n    if (this.disabled) return;\n\n    this.call('drag', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onEnter(screenPosition: Vector2, realPosition: Vector2) {\n    if (this.disabled) return;\n\n    this.call('enter', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onExit(screenPosition: Vector2, realPosition: Vector2) {\n    if (this.disabled) return;\n\n    this.call('exit', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onWheel(direction: boolean, screenPosition: Vector2, realPosition: Vector2) {\n    if (this.disabled) return;\n\n    this.call('wheel', this, direction, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onContextMenu(): void {\n    if (this.disabled) return;\n  }\n\n  serialize(): SerializedRadioGroup {\n    return {\n      values: this._values,\n      selected: this.selected,\n      propName: this.propName,\n      input: this.input ? this.input.serialize() : null,\n      output: this.output ? this.output.serialize() : null,\n      height: this.height,\n      style: this.style,\n      id: this.id,\n      hitColor: this.hitColor.serialize(),\n      type: this.type,\n      childs: []\n    }\n  }\n  static deSerialize(node: Node, data: SerializedRadioGroup): RadioGroup {\n    return new RadioGroup(node, data.values, data.selected, {\n      propName: data.propName,\n      input: data.input,\n      output: data.output,\n      height: data.height,\n      style: data.style,\n      id: data.id,\n      hitColor: Color.deSerialize(data.hitColor)\n    });\n  }\n}\n\nexport interface RadioGroupStyle extends UINodeStyle {\n  color?: string,\n  selectedColor?: string,\n  backgroundColor?: string,\n  selectedBackgroundColor?: string,\n  borderColor?: string,\n  borderWidth?: number,\n}\n/** @hidden */\nlet DefaultRadioGroupStyle = () => {\n  return {\n    color: '#000',\n    selectedColor: '#fff',\n    backgroundColor: 'transparent',\n    selectedBackgroundColor: '#555',\n    borderColor: '#000',\n    borderWidth: 1,\n    visible: true\n  };\n};\n\nexport interface SerializedRadioGroup extends SerializedUINode {\n  values: string[],\n  selected: string,\n  height: number\n}\n\ninterface RadioGroupOptions {\n  propName?: string,\n  input?: boolean | SerializedTerminal,\n  output?: boolean | SerializedTerminal,\n  height?: number,\n  style?: RadioGroupStyle,\n  id?: string,\n  hitColor?: Color\n}\nlet DefaultRadioGroupOptions = (node: Node): RadioGroupOptions => {\n  return {\n    height: node.style.rowHeight * 1.5\n  }\n};\n","import { Terminal, TerminalType, SerializedTerminal } from \"../core/terminal\";\nimport { Node } from \"../core/node\";\nimport { Vector2 } from \"../core/vector\";\nimport { Label } from \"./label\";\nimport { SerializedUINode, UINode, UINodeStyle, UIType } from \"./ui-node\";\nimport { Constant } from \"../resource/constants\";\nimport { Serializable } from \"../common/interfaces\";\nimport { Color } from \"../core/color\";\nimport { FlowState } from \"../core/flow\";\nimport { Align } from \"../common/enums\";\nimport { get } from \"../utils/utils\";\n\nexport class Select extends UINode implements Serializable {\n  label: Label;\n  private _selected: string;\n\n  get selected(): string {\n    if (this.propName) {\n      let value = this.getProp();\n      let slctdVal = this.values.includes(value) ? value : this.values[0];\n      value = this.values.length === 0 ? 'None' : slctdVal;\n      return value;\n    }\n    return this._selected;\n  }\n  set selected(selected: string) {\n    let slctdVal = this.values.includes(selected) ? selected : this.values[0];\n\n    let oldVal = this.selected;\n    let newVal = this.values.length === 0 ? 'None' : slctdVal;\n\n    if (this.propName) this.setProp(newVal);\n    else {\n      this._selected = newVal;\n      this.label.text = newVal;\n    }\n    if (this.node.flow.state !== FlowState.Stopped) this.call('change', this, oldVal, newVal);\n  }\n\n  constructor(\n    node: Node,\n    public values: string[] = [],\n    options: SelectOptions = DefaultSelectOptions(node)\n  ) {\n    super(node, Vector2.Zero(), UIType.Select, {\n      style: options.style ? { ...DefaultSelectStyle(), ...options.style } : DefaultSelectStyle(),\n      propName: options.propName,\n      input: options.input && (typeof options.input === 'boolean'\n        ? new Terminal(node, TerminalType.IN, 'string', '', {})\n        : Terminal.deSerialize(node, options.input)),\n      output: options.output && (typeof options.output === 'boolean'\n        ? new Terminal(node, TerminalType.OUT, 'string', '', {})\n        : Terminal.deSerialize(node, options.output)),\n      id: options.id,\n      hitColor: options.hitColor\n    });\n\n    this.height = get(options.height, this.node.style.rowHeight);\n    this._selected = this.values.length === 0 ? 'None' : this.values[0];\n\n    this.label = new Label(this.node, this.selected, { style: { align: Align.Center, ...this.style }, height: this.height });\n    this.children.push(this.label);\n\n    if (this.input) {\n      this.input.on('connect', (_, connector) => {\n        if (connector.data) this.selected = connector.data;\n      });\n      this.input.on('data', (_, data) => {\n        if (data) this.selected = data;\n      });\n    }\n    if (this.output) this.output.on('connect', (_, connector) => connector.data = this.selected);\n\n    this.node.on('process', () => {\n      if (this.output) this.output.setData(this.selected);\n    });\n  }\n\n  /** @hidden */\n  paint(): void {\n    let context = this.context;\n    context.fillStyle = this.style.arrowColor;\n    context.beginPath();\n    context.moveTo(this.position.x, this.position.y + this.height / 2);\n    context.lineTo(this.position.x + this.height * Constant.SIN_60, this.position.y);\n    context.lineTo(this.position.x + this.height * Constant.SIN_60, this.position.y + this.height);\n    context.lineTo(this.position.x, this.position.y + this.height / 2);\n    context.closePath();\n    context.fill();\n\n    context.fillStyle = this.style.arrowColor;\n    context.beginPath();\n    context.moveTo(this.position.x + this.width, this.position.y + this.height / 2);\n    context.lineTo(this.position.x + this.width - (this.height * Constant.SIN_60), this.position.y);\n    context.lineTo(this.position.x + this.width - (this.height * Constant.SIN_60), this.position.y + this.height);\n    context.lineTo(this.position.x + this.width, this.position.y + this.height / 2);\n    context.closePath();\n    context.fill();\n  }\n  /** @hidden */\n  paintLOD1() {\n    let context = this.context;\n    context.fillStyle = this.style.arrowColor;\n    context.strokeStyle = '#000';\n    context.fillRect(this.position.x, this.position.y, this.width, this.height);\n    context.strokeRect(this.position.x, this.position.y, this.width, this.height);\n  }\n  /** @hidden */\n  offPaint(): void {\n    this.offUIContext.fillStyle = this.hitColor.hexValue;\n    this.offUIContext.fillRect(this.position.x, this.position.y, this.width, this.height);\n  }\n  /** @hidden */\n  reflow(): void {\n    this.label.width = this.width * .7;\n    this.label.position.assign(\n      this.position.x + this.width * .15,\n      this.position.y + this.height / 2 - this.label.height / 2\n    );\n\n    if (this.input) {\n      this.input.position.assign(\n        this.node.position.x - this.node.style.terminalStripMargin - this.input.style.radius,\n        this.position.y + this.height / 2\n      );\n    }\n    if (this.output) {\n      this.output.position.assign(\n        this.node.position.x + this.node.width + this.node.style.terminalStripMargin + this.output.style.radius,\n        this.position.y + this.height / 2\n      );\n    }\n  }\n\n  /** @hidden */\n  onPropChange(_oldVal: any, newValue: any) {\n    let slctdVal = this.values.includes(newValue) ? newValue : this.values[0];\n    let value = this.values.length === 0 ? 'None' : slctdVal;\n    this._selected = value;\n    this.label.text = this._selected;\n\n    this.output && this.output.setData(this.selected);\n  }\n\n  /** @hidden */\n  onOver(screenPosition: Vector2, realPosition: Vector2): void {\n    if (this.disabled) return;\n\n    this.call('over', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onDown(screenPosition: Vector2, realPosition: Vector2): void {\n    if (this.disabled) return;\n\n    this.call('down', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onUp(screenPosition: Vector2, realPosition: Vector2): void {\n    if (this.disabled) return;\n\n    this.call('up', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onClick(screenPosition: Vector2, realPosition: Vector2): void {\n    if (this.disabled) return;\n\n    if (this.values.length === 0) return;\n    let direction;\n    if (realPosition.x < this.position.x + this.width * .15) {\n      direction = -1;\n    } else if (realPosition.x > this.position.x + this.width * .85) {\n      direction = 1;\n    } else return;\n\n    let length = this.values.length;\n    this.selected = this.values[(((this.values.indexOf(this.selected) + direction) % length) + length) % length];\n    this.label.text = this.selected;\n\n    this.call('click', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onDrag(screenPosition: Vector2, realPosition: Vector2): void {\n    if (this.disabled) return;\n\n    this.call('drag', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onEnter(screenPosition: Vector2, realPosition: Vector2) {\n    if (this.disabled) return;\n\n    this.call('enter', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onExit(screenPosition: Vector2, realPosition: Vector2) {\n    if (this.disabled) return;\n\n    this.call('exit', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onWheel(direction: boolean, screenPosition: Vector2, realPosition: Vector2) {\n    if (this.disabled) return;\n\n    this.call('wheel', this, direction, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onContextMenu(): void {\n    if (this.disabled) return;\n  }\n\n  serialize(): SerializedSelect {\n    return {\n      values: this.values,\n      propName: this.propName,\n      input: this.input ? this.input.serialize() : null,\n      output: this.output ? this.output.serialize() : null,\n      height: this.height,\n      style: this.style,\n      id: this.id,\n      hitColor: this.hitColor.serialize(),\n      type: this.type,\n      childs: []\n    }\n  }\n  static deSerialize(node: Node, data: SerializedSelect): Select {\n    return new Select(node, data.values, {\n      propName: data.propName,\n      input: data.input,\n      output: data.output,\n      height: data.height,\n      style: data.style,\n      id: data.id,\n      hitColor: Color.deSerialize(data.hitColor)\n    });\n  }\n}\n\nexport interface SelectStyle extends UINodeStyle {\n  font?: string,\n  fontSize?: string,\n  color?: string,\n  arrowColor?: string\n}\n/** @hidden */\nlet DefaultSelectStyle = () => {\n  return {\n    arrowColor: '#000',\n    visible: true\n  };\n};\n\nexport interface SerializedSelect extends SerializedUINode {\n  values: string[],\n  height: number\n}\n\ninterface SelectOptions {\n  propName?: string,\n  input?: boolean | SerializedTerminal,\n  output?: boolean | SerializedTerminal,\n  height?: number,\n  style?: SelectStyle,\n  id?: string,\n  hitColor?: Color\n}\n/** @hidden */\nlet DefaultSelectOptions = (node: Node): SelectOptions => {\n  return {\n    height: node.style.rowHeight * 1.5\n  }\n}\n","import { Terminal, TerminalType, SerializedTerminal } from \"../core/terminal\";\nimport { Node } from \"../core/node\";\nimport { Vector2 } from \"../core/vector\";\nimport { clamp, denormalize, exists, get, normalize } from \"../utils/utils\";\nimport { SerializedUINode, UINode, UINodeStyle, UIType } from \"./ui-node\";\nimport { Serializable } from \"../common/interfaces\";\nimport { Color } from \"../core/color\";\nimport { FlowState } from \"../core/flow\";\nimport { Constant } from \"../resource/constants\";\n\nexport class Slider extends UINode implements Serializable {\n  private thumbFill: number;\n  private _value: number;\n\n  get value(): number {\n    if (this.propName) return this.getProp();\n    return this._value;\n  }\n  set value(value: number) {\n    value = clamp(value, this.min, this.max);\n\n    let oldVal = this.value;\n    let newVal = value;\n    newVal = exists(this.style.precision) ? parseFloat(newVal.toFixed(this.style.precision)) : newVal;\n\n    if (this.propName) this.setProp(newVal);\n    else {\n      this._value = newVal;\n      this.reflow();\n    }\n\n    if (this.node.flow.state !== FlowState.Stopped) this.call('change', this, oldVal, newVal);\n  }\n\n  constructor(\n    node: Node, public min: number, public max: number,\n    options: SliderOptions = DefaultSliderOptions(node)\n  ) {\n    super(node, Vector2.Zero(), UIType.Slider, {\n      draggable: true,\n      style: options.style ? { ...DefaultSliderStyle(node, options.height), ...options.style } : DefaultSliderStyle(node, options.height),\n      propName: options.propName,\n      input: options.input && (typeof options.input === 'boolean'\n        ? new Terminal(node, TerminalType.IN, 'number', '', {})\n        : Terminal.deSerialize(node, options.input)),\n      output: options.output && (typeof options.output === 'boolean'\n        ? new Terminal(node, TerminalType.OUT, 'number', '', {})\n        : Terminal.deSerialize(node, options.output)),\n      id: options.id,\n      hitColor: options.hitColor\n    });\n\n    this.height = get(options.height, this.node.style.rowHeight);\n    this._value = this.propName ? this.getProp() : get(options.value, min);\n    this._value = clamp(this._value, this.min, this.max);\n\n    if (this.input) {\n      this.input.on('connect', (_, connector) => {\n        if (connector.data) this.value = connector.data;\n      });\n      this.input.on('data', (_, data) => {\n        if (data) this.value = data;\n      });\n    }\n    if (this.output) this.output.on('connect', (_, connector) => connector.data = this.value);\n\n    this.node.on('process', () => {\n      if (this.output) this.output.setData(this.value);\n    });\n  }\n\n  /** @hidden */\n  paint(): void {\n    let context = this.context;\n    context.lineWidth = this.style.railHeight;\n    context.strokeStyle = this.style.color;\n    context.lineCap = 'butt';\n\n    let start = Math.max(this.position.x, this.position.x + this.thumbFill - 3);\n    if (start !== this.position.x) {\n      context.beginPath();\n      context.moveTo(this.position.x, this.position.y + this.height / 2);\n      context.lineTo(start, this.position.y + this.height / 2);\n      context.stroke();\n    }\n    start = Math.min(this.position.x + 2 * this.style.thumbRadius + this.thumbFill + 3, this.position.x + this.width);\n    if (start !== (this.position.x + this.width)) {\n      context.beginPath();\n      context.moveTo(start, this.position.y + this.height / 2);\n      context.lineTo(this.position.x + this.width, this.position.y + this.height / 2);\n      context.stroke();\n    }\n\n    context.fillStyle = this.style.thumbColor;\n    context.beginPath();\n    context.arc(\n      this.position.x + this.style.thumbRadius + this.thumbFill,\n      this.position.y + this.height / 2, this.style.thumbRadius, 0, Constant.TAU\n    );\n    context.fill();\n  }\n  /** @hidden */\n  paintLOD1() {\n    let context = this.context;\n    context.strokeStyle = '#000';\n    context.fillStyle = this.style.color;\n    context.strokeRect(this.position.x, this.position.y, this.width, this.height);\n    context.fillRect(this.position.x, this.position.y, this.width, this.height);\n  }\n  /** @hidden */\n  offPaint(): void {\n    this.offUIContext.fillStyle = this.hitColor.hexValue;\n    this.offUIContext.fillRect(this.position.x, this.position.y, this.width, this.height);\n  }\n  /** @hidden */\n  reflow(): void {\n    this.thumbFill = denormalize(normalize(this.value, this.min, this.max), 0, this.width - 2 * this.style.thumbRadius);\n\n    if (this.input) {\n      this.input.position.assign(\n        this.node.position.x - this.node.style.terminalStripMargin - this.input.style.radius,\n        this.position.y + this.height / 2\n      );\n    }\n    if (this.output) {\n      this.output.position.assign(\n        this.node.position.x + this.node.width + this.node.style.terminalStripMargin + this.output.style.radius,\n        this.position.y + this.height / 2\n      );\n    }\n  }\n\n  /** @hidden */\n  onPropChange(_oldVal: any, newVal: any) {\n    this._value = newVal;\n    this.reflow();\n\n    this.output && this.output.setData(this.value);\n  }\n  /** @hidden */\n  onOver(screenPosition: Vector2, realPosition: Vector2): void {\n    if (this.disabled) return;\n\n    this.call('over', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onDown(screenPosition: Vector2, realPosition: Vector2): void {\n    if (this.disabled) return;\n\n    this.call('down', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onUp(screenPosition: Vector2, realPosition: Vector2): void {\n    if (this.disabled) return;\n\n    this.call('up', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onClick(screenPosition: Vector2, realPosition: Vector2): void {\n    if (this.disabled) return;\n\n    this.call('click', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onDrag(screenPosition: Vector2, realPosition: Vector2): void {\n    if (this.disabled) return;\n\n    let y = this.position.y + this.height / 2 - this.style.railHeight / 2;\n    this.thumbFill = realPosition\n      .clamp(this.position.x + this.style.thumbRadius, this.position.x + this.width - this.style.thumbRadius, y, y)\n      .subtractInPlace(this.position.x + this.style.thumbRadius, 0)\n      .x;\n\n    this.value = denormalize(normalize(this.thumbFill, 0, this.width - 2 * this.style.thumbRadius), this.min, this.max);\n\n    this.call('drag', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onEnter(screenPosition: Vector2, realPosition: Vector2) {\n    if (this.disabled) return;\n\n    this.call('enter', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onExit(screenPosition: Vector2, realPosition: Vector2) {\n    if (this.disabled) return;\n\n    this.call('exit', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onWheel(direction: boolean, screenPosition: Vector2, realPosition: Vector2) {\n    if (this.disabled) return;\n\n    this.call('wheel', this, direction, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onContextMenu(): void {\n    if (this.disabled) return;\n  }\n\n  serialize(): SerializedSlider {\n    return {\n      min: this.min,\n      max: this.max,\n      value: this.value,\n      propName: this.propName,\n      input: this.input ? this.input.serialize() : null,\n      output: this.output ? this.output.serialize() : null,\n      height: this.height,\n      style: this.style,\n      id: this.id,\n      hitColor: this.hitColor.serialize(),\n      type: this.type,\n      childs: []\n    }\n  }\n  static deSerialize(node: Node, data: SerializedSlider) {\n    return new Slider(node, data.min, data.max, {\n      value: data.value,\n      propName: data.propName,\n      input: data.input,\n      output: data.output,\n      height: data.height,\n      style: data.style,\n      id: data.id,\n      hitColor: Color.deSerialize(data.hitColor)\n    });\n  }\n}\n\nexport interface SliderStyle extends UINodeStyle {\n  railHeight?: number,\n  thumbRadius?: number,\n  color?: string,\n  thumbColor?: string,\n  precision?: number\n}\n/** @hidden */\nlet DefaultSliderStyle = (node: Node, height: number) => {\n  return {\n    color: '#444',\n    thumbColor: '#000',\n    railHeight: 3,\n    thumbRadius: typeof height !== 'undefined' ? height / 2 : (node.style.rowHeight * 1.5) / 2\n  }\n}\n\nexport interface SerializedSlider extends SerializedUINode {\n  min: number,\n  max: number,\n  value: number,\n  height: number\n}\n\ninterface SliderOptions {\n  value?: number,\n  propName?: string,\n  input?: boolean | SerializedTerminal,\n  output?: boolean | SerializedTerminal,\n  height?: number,\n  style?: SliderStyle,\n  id?: string,\n  hitColor?: Color\n}\n/** @hidden */\nlet DefaultSliderOptions = (node: Node): SliderOptions => {\n  return {\n    height: node.style.rowHeight * 1.5\n  }\n};\n","import { Terminal, TerminalType, SerializedTerminal } from \"../core/terminal\";\nimport { Node } from \"../core/node\";\nimport { Vector2 } from \"../core/vector\";\nimport { fileIcon } from \"../resource/icons\";\nimport { Image } from \"./image\";\nimport { Label } from \"./label\";\nimport { SerializedUINode, UINode, UINodeStyle, UIType } from \"./ui-node\";\nimport { Serializable } from \"../common/interfaces\";\nimport { Color } from \"../core/color\";\nimport { FlowState } from \"../core/flow\";\nimport { Align } from \"../common/enums\";\nimport { get } from \"../utils/utils\";\n\nexport class Source extends UINode implements Serializable {\n  private htmlInput: HTMLInputElement;\n  private fileIcon: Image;\n  private _file: File;\n\n  label: Label;\n  accept: string;\n\n  get file(): File {\n    if (this.propName) return this.getProp();\n    return this._file;\n  }\n  set file(file: File) {\n    let oldVal = this.file;\n    let newVal = file;\n\n    if (this.propName) this.setProp(newVal);\n    else {\n      this._file = newVal;\n      this.label.text = newVal.name.substring(0, this._file.name.toString().lastIndexOf(\".\"));\n    }\n\n    if (this.node.flow.state !== FlowState.Stopped) this.call('change', this, oldVal, newVal);\n  }\n\n  constructor(\n    node: Node,\n    options: SourceOptions = DefaultSourceOptions(node)\n  ) {\n\n    super(node, Vector2.Zero(), UIType.Source, {\n      style: options.style ? { ...DefaultSourceStyle(), ...options.style } : DefaultSourceStyle(),\n      propName: options.propName,\n      input: options.input && (typeof options.input === 'boolean'\n        ? new Terminal(node, TerminalType.IN, 'file', '', {})\n        : Terminal.deSerialize(node, options.input)),\n      output: options.output && (typeof options.output === 'boolean'\n        ? new Terminal(node, TerminalType.OUT, 'file', '', {})\n        : Terminal.deSerialize(node, options.output)),\n      id: options.id,\n      hitColor: options.hitColor\n    });\n\n    this.accept = options.accept;\n    this.height = get(options.height, this.node.style.rowHeight);\n\n    this.setupInputElement(options);\n\n    this.label = new Label(this.node, 'Select', { style: { align: Align.Center, ...this.style }, height: this.height });\n    this.fileIcon = new Image(this.node, fileIcon);\n    this.label.on('click', () => this.htmlInput.click());\n    this.children.push(this.label, this.fileIcon);\n\n    if (this.input) {\n      this.input.on('connect', (_, connector) => {\n        if (connector.data) this.file = connector.data;\n      });\n      this.input.on('data', (_, data) => {\n        if (data) this.file = data;\n      });\n    }\n    if (this.output) this.output.on('connect', (_, connector) => connector.data = this.file);\n\n    this.node.on('process', () => {\n      if (this.output) this.output.setData(this.file);\n    });\n  }\n\n  setupInputElement(options: SourceOptions) {\n    this.htmlInput = document.createElement('input');\n    this.htmlInput.type = 'file';\n    if (options.accept) this.htmlInput.accept = options.accept;\n    this.htmlInput.onchange = () => {\n      if (this.htmlInput.files.length > 0) {\n        let oldVal = this.file;\n        this.file = this.htmlInput.files[0];\n        if (this.node.flow.state === FlowState.Stopped) this.call('upload', this, oldVal, this.file);\n      }\n    };\n  }\n\n  /** @hidden */\n  paint(): void {\n    this.context.strokeStyle = this.style.borderColor;\n    this.context.strokeRect(this.position.x, this.position.y, this.width, this.height);\n  }\n  /** @hidden */\n  paintLOD1() {\n    let context = this.context;\n    context.strokeStyle = this.style.borderColor;\n    context.fillStyle = this.style.color;\n    context.strokeRect(this.position.x, this.position.y, this.width, this.height);\n    context.fillRect(this.position.x, this.position.y, this.width, this.height);\n  }\n  /** @hidden */\n  offPaint(): void {\n    this.offUIContext.fillStyle = this.hitColor.hexValue;\n    this.offUIContext.fillRect(this.position.x, this.position.y, this.width, this.height);\n  }\n  /** @hidden */\n  reflow(): void {\n    this.label.width = this.width;\n    this.label.height = this.height;\n    this.label.position = this.position;\n\n    this.fileIcon.width = this.width * .1;\n    this.fileIcon.position.assign(this.position.x + 5, this.position.y + this.height / 2 - this.fileIcon.height / 2);\n\n    if (this.input) {\n      this.input.position.assign(\n        this.node.position.x - this.node.style.terminalStripMargin - this.input.style.radius,\n        this.position.y + this.height / 2\n      );\n    }\n    if (this.output) {\n      this.output.position.assign(\n        this.node.position.x + this.node.width + this.node.style.terminalStripMargin + this.output.style.radius,\n        this.position.y + this.height / 2\n      );\n    }\n  }\n\n  /** @hidden */\n  onPropChange(_oldVal: any, newVal: any) {\n    this._file = newVal;\n    this.label.text = this._file.name.substring(0, this._file.name.toString().lastIndexOf(\".\"));\n\n    this.output && this.output.setData(this._file);\n  }\n  /** @hidden */\n  onOver(screenPosition: Vector2, realPosition: Vector2): void {\n    if (this.disabled) return;\n\n    this.call('over', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onDown(screenPosition: Vector2, realPosition: Vector2): void {\n    if (this.disabled) return;\n\n    this.call('down', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onUp(screenPosition: Vector2, realPosition: Vector2): void {\n    if (this.disabled) return;\n\n    this.call('up', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onClick(screenPosition: Vector2, realPosition: Vector2): void {\n    if (this.disabled) return;\n\n    this.call('click', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onDrag(screenPosition: Vector2, realPosition: Vector2): void {\n    if (this.disabled) return;\n\n    this.call('drag', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onEnter(screenPosition: Vector2, realPosition: Vector2) {\n    if (this.disabled) return;\n\n    this.call('enter', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onExit(screenPosition: Vector2, realPosition: Vector2) {\n    if (this.disabled) return;\n\n    this.call('exit', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onWheel(direction: boolean, screenPosition: Vector2, realPosition: Vector2) {\n    if (this.disabled) return;\n\n    this.call('wheel', this, direction, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onContextMenu(): void {\n    if (this.disabled) return;\n  }\n\n  serialize(): SerializedSource {\n    return {\n      accept: this.accept,\n      propName: this.propName,\n      input: this.input ? this.input.serialize() : null,\n      output: this.output ? this.output.serialize() : null,\n      height: this.height,\n      style: this.style,\n      id: this.id,\n      hitColor: this.hitColor.serialize(),\n      type: this.type,\n      childs: []\n    }\n  }\n  static deSerialize(node: Node, data: SerializedSource) {\n    return new Source(node, {\n      accept: data.accept,\n      propName: data.propName,\n      input: data.input,\n      output: data.output,\n      height: data.height,\n      style: data.style,\n      id: data.id,\n      hitColor: Color.deSerialize(data.hitColor)\n    });\n  }\n}\n\nexport interface SourceStyle extends UINodeStyle {\n  borderColor?: string,\n  font?: string,\n  fontSize?: string,\n  color?: string\n}\n/** @hidden */\nlet DefaultSourceStyle = () => {\n  return {\n    borderColor: '#000',\n    visible: true\n  };\n};\n\nexport interface SerializedSource extends SerializedUINode {\n  accept: string,\n  height: number\n}\n\ninterface SourceOptions {\n  accept?: string,\n  propName?: string,\n  input?: boolean | SerializedTerminal,\n  output?: boolean | SerializedTerminal,\n  height?: number,\n  style?: SourceStyle,\n  id?: string,\n  hitColor?: Color\n}\n/** @hidden */\nlet DefaultSourceOptions = (node: Node): SourceOptions => {\n  return {\n    height: node.style.rowHeight * 1.5\n  }\n};\n","import { Color } from \"../core/color\";\nimport { Serializable } from \"../common/interfaces\";\nimport { Node } from \"../core/node\";\nimport { Vector2 } from \"../core/vector\";\nimport { Button } from \"./button\";\nimport { Container } from \"./container\";\nimport { Display } from \"./display\";\nimport { Image } from './image';\nimport { Input } from \"./input\";\nimport { Label } from \"./label\";\nimport { Select } from \"./select\";\nimport { Slider } from \"./slider\";\nimport { Source } from \"./source\";\nimport { Toggle } from \"./toggle\";\nimport { SerializedUINode, UINode, UINodeStyle, UIType } from \"./ui-node\";\n\nexport class Stack extends UINode implements Serializable {\n\n  constructor(\n    node: Node,\n    options: StackOptions = DefaultStackOptions()\n  ) {\n    super(node, Vector2.Zero(), UIType.Stack, {\n      style: options.style ? { ...DefaultStackStyle(), ...options.style } : DefaultStackStyle(),\n      id: options.id,\n      hitColor: options.hitColor\n    });\n\n    if (options.childs) this.children.push(...options.childs);\n  }\n\n  /** @hidden */\n  paint(): void { /**/ }\n  /** @hidden */\n  paintLOD1() { /**/ }\n  /** @hidden */\n  offPaint(): void {\n    this.offUIContext.fillStyle = this.hitColor.hexValue;\n    this.offUIContext.fillRect(this.position.x, this.position.y, this.width, this.height);\n  }\n  /** @hidden */\n  reflow(): void {\n    let children = this.children.filter(child => child.visible);\n    let actualTotalHeight = children.reduce((acc, curr) => (acc + curr.height), 0);\n    let effectiveSpacing = (children.length - 1) * this.style.spacing;\n    this.height = actualTotalHeight + effectiveSpacing;\n\n    let y = this.position.y;\n    children.forEach(child => {\n      child.position.assign(this.position.x, y);\n      child.width = this.width;\n      y += child.height + this.style.spacing;\n    });\n  }\n\n  /** @hidden */\n  onPropChange() { /**/ }\n  /** @hidden */\n  onOver(screenPosition: Vector2, realPosition: Vector2): void {\n    if (this.disabled) return;\n\n    this.call('over', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onDown(screenPosition: Vector2, realPosition: Vector2): void {\n    if (this.disabled) return;\n\n    this.call('down', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onUp(screenPosition: Vector2, realPosition: Vector2): void {\n    if (this.disabled) return;\n\n    this.call('up', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onClick(screenPosition: Vector2, realPosition: Vector2): void {\n    if (this.disabled) return;\n\n    this.call('click', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onDrag(screenPosition: Vector2, realPosition: Vector2): void {\n    if (this.disabled) return;\n\n    this.call('drag', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onEnter(screenPosition: Vector2, realPosition: Vector2) {\n    if (this.disabled) return;\n\n    this.call('enter', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onExit(screenPosition: Vector2, realPosition: Vector2) {\n    if (this.disabled) return;\n\n    this.call('exit', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onWheel(direction: boolean, screenPosition: Vector2, realPosition: Vector2) {\n    if (this.disabled) return;\n\n    this.call('wheel', this, direction, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onContextMenu(): void { /**/ }\n\n  serialize(): SerializedStackLayout {\n    return {\n      style: this.style,\n      id: this.id,\n      hitColor: this.hitColor.serialize(),\n      type: this.type,\n      propName: null,\n      input: null,\n      output: null,\n      childs: this.children.map(child => (child as any).serialize())\n    }\n  }\n  static deSerialize(node: Node, data: SerializedStackLayout): Stack {\n    let stack = new Stack(node, { style: data.style, id: data.id, hitColor: Color.deSerialize(data.hitColor), childs: [] });\n\n    stack.children.push(...data.childs.map(serializedChild => {\n      switch (serializedChild.type) {\n        case UIType.Button: return Button.deSerialize(node, serializedChild);\n        case UIType.Container: return Container.deSerialize(node, serializedChild);\n        case UIType.Display: return Display.deSerialize(node, serializedChild);\n        case UIType.HorizontalLayout: return Stack.deSerialize(node, serializedChild);\n        case UIType.Stack: return Stack.deSerialize(node, serializedChild);\n        case UIType.Image: return Image.deSerialize(node, serializedChild);\n        case UIType.Input: return Input.deSerialize(node, serializedChild);\n        case UIType.Label: return Label.deSerialize(node, serializedChild);\n        case UIType.Select: return Select.deSerialize(node, serializedChild);\n        case UIType.Slider: return Slider.deSerialize(node, serializedChild);\n        case UIType.Source: return Source.deSerialize(node, serializedChild);\n        case UIType.Toggle: return Toggle.deSerialize(node, serializedChild);\n        default: return;\n      }\n    }));\n    return stack;\n  }\n}\n\nexport interface StackStyle extends UINodeStyle {\n  spacing?: number\n}\n/** @hidden */\nlet DefaultStackStyle = () => {\n  return {\n    spacing: 0,\n    visible: true\n  };\n};\n\nexport interface SerializedStackLayout extends SerializedUINode { }\n\ninterface StackOptions {\n  childs?: UINode[],\n  style?: StackStyle,\n  id?: string,\n  hitColor?: Color\n}\n/** @hidden */\nlet DefaultStackOptions = () => {\n  return {}\n};\n","import { Terminal, TerminalType, SerializedTerminal } from \"../core/terminal\";\nimport { Node } from \"../core/node\";\nimport { Vector2 } from \"../core/vector\";\nimport { SerializedUINode, UINode, UINodeStyle, UIType } from \"./ui-node\";\nimport { Serializable } from \"../common/interfaces\";\nimport { Color } from \"../core/color\";\nimport { FlowState } from \"../core/flow\";\nimport { get } from \"../utils/utils\";\nimport { Constant } from \"../resource/constants\";\n\nexport class Toggle extends UINode implements Serializable {\n  private _checked: boolean = false;\n\n  get checked(): boolean {\n    if (this.propName) return this.getProp();\n    return this._checked;\n  }\n  set checked(checked: boolean) {\n    let oldVal = this.checked;\n    let newVal = checked;\n\n    if (this.propName)\n      this.setProp(newVal);\n    else\n      this._checked = newVal;\n\n    if (this.node.flow.state !== FlowState.Stopped) this.call('change', this, oldVal, newVal);\n  }\n\n  constructor(\n    node: Node,\n    options: ToggleOptions = DefaultToggleOptions(node)\n  ) {\n    super(node, Vector2.Zero(), UIType.Toggle, {\n      style: options.style\n        ? { ...DefaultToggleStyle(), ...options.style }\n        : DefaultToggleStyle(),\n      propName: options.propName,\n      input: options.input && (typeof options.input === 'boolean'\n        ? new Terminal(node, TerminalType.IN, 'boolean', '', {})\n        : Terminal.deSerialize(node, options.input)),\n      output: options.output && (typeof options.output === 'boolean'\n        ? new Terminal(node, TerminalType.OUT, 'boolean', '', {})\n        : Terminal.deSerialize(node, options.output)),\n      id: options.id,\n      hitColor: options.hitColor\n    });\n\n    this._checked = this.propName ? this.getProp() : options.value\n    this.height = get(options.height, this.node.style.rowHeight);\n    if (!this.style.grow) this.width = this.height * 2.5;\n\n    if (this.input) {\n      this.input.on('connect', (_, connector) => {\n        if (connector.data) this.checked = connector.data;\n      });\n      this.input.on('data', (_, data) => {\n        if (typeof data !== 'undefined') this.checked = data;\n      });\n    }\n    if (this.output) this.output.on('connect', (_, connector) => connector.data = this.checked);\n\n    this.node.on('process', () => {\n      if (this.output) this.output.setData(this.checked);\n    });\n  }\n\n  /** @hidden */\n  paint(): void {\n    let context = this.context;\n    context.strokeStyle = this.style.backgroundColor;\n    context.lineWidth = this.height * .75;\n    context.lineCap = 'round';\n    context.beginPath();\n    context.moveTo(this.position.x + this.context.lineWidth / 2, this.position.y + this.height / 2);\n    context.lineTo(this.position.x + this.width - this.context.lineWidth / 2, this.position.y + this.height / 2);\n    context.stroke();\n\n    context.fillStyle = this.style.color;\n    context.beginPath();\n    context.arc(\n      this.checked ? this.position.x + this.width - this.height / 2 : this.position.x + this.height / 2,\n      this.position.y + this.height / 2, this.height / 2, 0, Constant.TAU\n    );\n    context.fill();\n  }\n  /** @hidden */\n  paintLOD1() {\n    let context = this.context;\n    context.strokeStyle = this.style.color;\n    context.fillStyle = this.style.backgroundColor;\n    context.strokeRect(this.position.x, this.position.y, this.width, this.height);\n    context.fillRect(this.position.x, this.position.y, this.width, this.height);\n  }\n  /** @hidden */\n  offPaint(): void {\n    this.offUIContext.fillStyle = this.hitColor.hexValue;\n    this.offUIContext.fillRect(this.position.x, this.position.y, this.width, this.height);\n  }\n  /** @hidden */\n  reflow(): void {\n    if (this.input) {\n      this.input.position.assign(\n        this.node.position.x - this.node.style.terminalStripMargin - this.input.style.radius,\n        this.position.y + this.height / 2\n      );\n    }\n    if (this.output) {\n      this.output.position.assign(\n        this.node.position.x + this.node.width + this.node.style.terminalStripMargin + this.output.style.radius,\n        this.position.y + this.height / 2\n      );\n    }\n  }\n\n  /** @hidden */\n  onPropChange(_oldVal: any, newVal: any) {\n    this._checked = newVal;\n\n    this.output && this.output.setData(this.checked);\n  }\n  /** @hidden */\n  onOver(screenPosition: Vector2, realPosition: Vector2): void {\n    if (this.disabled) return;\n\n    this.call('over', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onDown(screenPosition: Vector2, realPosition: Vector2): void {\n    if (this.disabled) return;\n\n    this.call('down', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onUp(screenPosition: Vector2, realPosition: Vector2): void {\n    if (this.disabled) return;\n\n    this.call('up', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onClick(screenPosition: Vector2, realPosition: Vector2): void {\n    if (this.disabled) return;\n\n    this.checked = !this.checked;\n\n    this.call('click', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onDrag(screenPosition: Vector2, realPosition: Vector2): void {\n    if (this.disabled) return;\n\n    this.call('drag', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onEnter(screenPosition: Vector2, realPosition: Vector2) {\n    if (this.disabled) return;\n\n    this.call('enter', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onExit(screenPosition: Vector2, realPosition: Vector2) {\n    if (this.disabled) return;\n\n    this.call('exit', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onWheel(direction: boolean, screenPosition: Vector2, realPosition: Vector2) {\n    if (this.disabled) return;\n\n    this.call('wheel', this, direction, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onContextMenu(): void {\n    if (this.disabled) return;\n  }\n\n  serialize(): SerializedToggle {\n    return {\n      checked: this.checked,\n      propName: this.propName,\n      input: this.input ? this.input.serialize() : null,\n      output: this.output ? this.output.serialize() : null,\n      height: this.height,\n      style: this.style,\n      id: this.id,\n      hitColor: this.hitColor.serialize(),\n      type: this.type,\n      childs: []\n    }\n  }\n  static deSerialize(node: Node, data: SerializedToggle): Toggle {\n    return new Toggle(node, {\n      propName: data.propName,\n      input: data.input,\n      output: data.output,\n      height: data.height,\n      style: data.style,\n      id: data.id,\n      hitColor: Color.deSerialize(data.hitColor)\n    });\n  }\n}\n\nexport interface ToggleOptions {\n  value?: boolean,\n  propName?: string,\n  input?: boolean | SerializedTerminal,\n  output?: boolean | SerializedTerminal,\n  height?: number,\n  style?: ToggleStyle,\n  id?: string,\n  hitColor?: Color\n}\n/** @hidden */\nlet DefaultToggleOptions = (node: Node): ToggleOptions => {\n  return {\n    value: false,\n    height: node.style.rowHeight * 1.5,\n  }\n};\n\nexport interface ToggleStyle extends UINodeStyle {\n  backgroundColor?: string,\n  color?: string\n}\n/** @hidden */\nlet DefaultToggleStyle = () => {\n  return {\n    backgroundColor: '#999',\n    color: '#000',\n    visible: true\n  };\n};\n\nexport interface SerializedToggle extends SerializedUINode {\n  checked: boolean,\n  height: number\n}\n","import { Color, SerializedColor } from \"../core/color\";\nimport { Hooks } from \"../core/hooks\";\nimport { Node, NodeState } from \"../core/node\";\nimport { SerializedTerminal, Terminal } from \"../core/terminal\";\nimport { Vector2 } from \"../core/vector\";\nimport { LOD, ViewPort } from '../common/enums';\nimport { get, getNewUUID, intersects } from \"../utils/utils\";\nimport { Events } from \"../common/interfaces\";\n\nexport abstract class UINode extends Hooks implements Events {\n  private _disabled: boolean;\n  private _visible: boolean;\n  /** @hidden */\n  renderState: ViewPort;\n  /** @hidden */\n  hitColor: Color;\n\n  style: any;\n  propName: string;\n  input: Terminal;\n  output: Terminal;\n  id: string;\n  draggable: boolean;\n  zoomable: boolean;\n  width: number = 0;\n  height: number = 0;\n  children: UINode[];\n  get context(): CanvasRenderingContext2D { return this.node.context }\n  get offUIContext(): OffscreenCanvasRenderingContext2D | CanvasRenderingContext2D { return this.node.offUIContext }\n  position: Vector2;\n\n  get disabled(): boolean { return this._disabled }\n  set disabled(disabled: boolean) {\n    this._disabled = disabled;\n    this.children.forEach(child => child.disabled = disabled);\n  }\n  get visible(): boolean { return this._visible }\n  set visible(value: boolean) { this._visible = value; this.node.ui.update(); }\n\n  constructor(public node: Node, position: Vector2, public type: UIType, options: UINodeOptions = DefaultUINodeOptions()) {\n    super();\n\n    this.setHitColor(options.hitColor);\n    this.id = get(options.id, getNewUUID());\n    this.draggable = get(options.draggable, false);\n    this.zoomable = get(options.zoomable, false);\n    this._visible = get(options.visible, true);\n    this.style = get(options.style, {});\n    this.children = [];\n    this.position = position;\n    this.disabled = false;\n    this.propName = options.propName;\n    if (this.propName) {\n      this.node.watch(this.propName, (oldVal, newVal) => this.onPropChange(oldVal, newVal));\n    }\n    this.input = options.input;\n    this.output = options.output;\n\n    if (this.input) {\n      this.node.inputsUI.push(this.input);\n      this.input.on('connect', () => this.disabled = true);\n      this.input.on('disconnect', () => this.disabled = false);\n    }\n    if (this.output) this.node.outputsUI.push(this.output);\n  }\n\n  append(childs: UINode | UINode[]) {\n    if (Array.isArray(childs))\n      this.children.push(...childs);\n    else\n      this.children.push(childs);\n\n    this.update();\n\n    // To fix a bug, when appending childs to UINodes in-between the tree, UI container's height won't update\n    this.node.ui.update();\n  }\n  /** @hidden */\n  update(): void {\n    this.reflow();\n    this.children.forEach(child => child.update());\n  }\n  /** @hidden */\n  updateRenderState() {\n    if (this.node.renderState.nodeState === NodeState.MINIMIZED) return;\n\n    let realPos = this.position.transform(this.node.flow.flowConnect.transform);\n    this.renderState = intersects(\n      0, 0,\n      this.node.flow.flowConnect.canvasDimensions.width, this.node.flow.flowConnect.canvasDimensions.height,\n      realPos.x, realPos.y,\n      realPos.x + this.width * this.node.flow.flowConnect.scale, realPos.y + this.height * this.node.flow.flowConnect.scale\n    );\n\n    this.children.forEach(child => child.updateRenderState());\n  }\n  private setHitColor(hitColor: Color) {\n    if (!hitColor) {\n      hitColor = Color.Random();\n      while (this.node.hitColorToUI[hitColor.rgbaString] || this.node.hitColorToTerminal[hitColor.rgbaString]) hitColor = Color.Random();\n    }\n    this.hitColor = hitColor;\n    this.node.hitColorToUI[this.hitColor.rgbaString] = this;\n  }\n  render() {\n    if (!this.visible) return;\n    if (this.renderState === ViewPort.OUTSIDE) return;\n\n    let context = this.context;\n    if (this.node.renderState.lod === LOD.LOD1) {\n      context.save();\n      this.paintLOD1();\n      context.restore();\n    } else if (this.node.renderState.lod === LOD.LOD2) {\n      context.save();\n      this.paint();\n      context.restore();\n\n      this.offUIContext.save();\n      this.offPaint();\n      this.offUIContext.restore();\n    } else {\n      if (this.type === UIType.Container) {\n        context.save();\n        this.paintLOD1();\n        context.restore();\n      }\n    }\n\n    if (this.node.renderState.lod > 0) {\n      if (this.input) this.input.render();\n      if (this.output) this.output.render();\n    }\n\n    this.children.forEach(child => child.render());\n  }\n\n  /** @hidden */\n  getProp() {\n    return this.node.props[this.propName];\n  }\n  /** @hidden */\n  setProp(propValue: any) {\n    this.node.props[this.propName] = propValue;\n  }\n\n  /** @hidden */\n  abstract reflow(): void;\n  /** @hidden */\n  abstract paint(): void;\n  /** @hidden */\n  abstract paintLOD1(): void;\n  /** @hidden */\n  abstract offPaint(): void;\n\n  /** @hidden */\n  abstract onOver(screenPosition: Vector2, realPosition: Vector2): void;\n  /** @hidden */\n  abstract onDown(screenPosition: Vector2, realPosition: Vector2): void;\n  /** @hidden */\n  abstract onUp(screenPosition: Vector2, realPosition: Vector2): void;\n  /** @hidden */\n  abstract onClick(screenPosition: Vector2, realPosition: Vector2): void;\n  /** @hidden */\n  abstract onDrag(screenPosition: Vector2, realPosition: Vector2): void;\n  /** @hidden */\n  abstract onEnter(screenPosition: Vector2, realPosition: Vector2): void;\n  /** @hidden */\n  abstract onExit(screenPosition: Vector2, realPosition: Vector2): void;\n  /** @hidden */\n  abstract onWheel(direction: boolean, screenPosition: Vector2, realPosition: Vector2): void;\n  /** @hidden */\n  abstract onContextMenu(): void;\n  /** @hidden */\n  abstract onPropChange(oldValue: any, newValue: any): void;\n}\n\nexport interface UINodeStyle {\n  grow?: number\n}\n\nexport interface SerializedUINode {\n  id: string,\n  type: UIType\n  hitColor: SerializedColor,\n  style: any,\n  propName: string,\n  input: SerializedTerminal,\n  output: SerializedTerminal,\n  childs: any[]\n}\n\nexport enum UIType {\n  Button,\n  Container,\n  Display,\n  HorizontalLayout,\n  Stack,\n  Image,\n  Input,\n  Label,\n  Select,\n  Slider,\n  Dial,\n  Source,\n  Toggle,\n  Envelope,\n  RadioGroup,\n  Slider2D,\n  VSlider\n}\n\ninterface UINodeOptions {\n  draggable?: boolean,\n  zoomable?: boolean,\n  visible?: boolean,\n  style?: any,\n  propName?: string,\n  input?: Terminal,\n  output?: Terminal,\n  id?: string,\n  hitColor?: Color\n}\n/** @hidden */\nlet DefaultUINodeOptions = (): UINodeOptions => {\n  return {\n    draggable: false,\n    zoomable: false,\n    visible: true,\n    style: {},\n    propName: null,\n    input: null,\n    output: null,\n    id: getNewUUID(),\n    hitColor: null\n  };\n};\n","import { Terminal, TerminalType, SerializedTerminal } from \"../core/terminal\";\nimport { Node } from \"../core/node\";\nimport { Vector2 } from \"../core/vector\";\nimport { clamp, denormalize, get, normalize } from \"../utils/utils\";\nimport { SerializedUINode, UINode, UINodeStyle, UIType } from \"./ui-node\";\nimport { Serializable } from \"../common/interfaces\";\nimport { Color } from \"../core/color\";\nimport { FlowState } from \"../core/flow\";\nimport { Constant } from \"../resource/constants\";\n\nexport class VSlider extends UINode implements Serializable {\n  private thumbFill: number;\n  private _value: number;\n\n  get value(): number {\n    if (this.propName) return this.getProp();\n    return this._value;\n  }\n  set value(value: number) {\n    value = clamp(value, this.min, this.max);\n\n    let oldVal = this.value;\n    let newVal = value;\n\n    if (this.propName) this.setProp(newVal);\n    else {\n      this._value = newVal;\n      this.reflow();\n    }\n\n    if (this.node.flow.state !== FlowState.Stopped) this.call('change', this, oldVal, newVal);\n  }\n\n  constructor(\n    node: Node, public min: number, public max: number,\n    options: VSliderOptions = DefaultVSliderOptions(node)\n  ) {\n    super(node, Vector2.Zero(), UIType.VSlider, {\n      draggable: true,\n      style: options.style ? { ...DefaultVSliderStyle(node, options.width), ...options.style } : DefaultVSliderStyle(node, options.width),\n      propName: options.propName,\n      input: options.input && (typeof options.input === 'boolean'\n        ? new Terminal(node, TerminalType.IN, 'number', '', {})\n        : Terminal.deSerialize(node, options.input)),\n      output: options.output && (typeof options.output === 'boolean'\n        ? new Terminal(node, TerminalType.OUT, 'number', '', {})\n        : Terminal.deSerialize(node, options.output)),\n      id: options.id,\n      hitColor: options.hitColor\n    });\n\n    this.height = get(options.height, this.node.style.rowHeight * 5);\n    this.width = get(options.width, this.node.style.rowHeight);\n    this._value = this.propName ? this.getProp() : get(options.value, min);\n    this._value = clamp(this._value, this.min, this.max);\n\n    if (this.input) {\n      this.input.on('connect', (_, connector) => {\n        if (connector.data) this.value = connector.data;\n      });\n      this.input.on('data', (_, data) => {\n        if (data) this.value = data;\n      });\n    }\n    if (this.output) this.output.on('connect', (_, connector) => connector.data = this.value);\n\n    this.node.on('process', () => {\n      if (this.output) this.output.setData(this.value);\n    });\n  }\n\n  /** @hidden */\n  paint(): void {\n    let context = this.context;\n    context.lineWidth = this.style.railWidth;\n    context.strokeStyle = this.style.color;\n    context.lineCap = 'butt';\n\n    let start = Math.max(this.position.y, this.position.y + this.thumbFill - 3);\n    if (start !== this.position.y) {\n      context.beginPath();\n      context.moveTo(this.position.x + this.width / 2, this.position.y);\n      context.lineTo(this.position.x + this.width / 2, start);\n      context.stroke();\n    }\n    start = Math.min(this.position.y + 2 * this.style.thumbRadius + this.thumbFill + 3, this.position.y + this.height);\n    if (start !== (this.position.y + this.height)) {\n      context.beginPath();\n      context.moveTo(this.position.x + this.width / 2, start);\n      context.lineTo(this.position.x + this.width / 2, this.position.y + this.height);\n      context.stroke();\n    }\n\n    context.fillStyle = this.style.thumbColor;\n    context.beginPath();\n    context.arc(\n      this.position.x + this.width / 2,\n      this.position.y + this.style.thumbRadius + this.thumbFill, this.style.thumbRadius, 0, Constant.TAU\n    );\n    context.fill();\n  }\n  /** @hidden */\n  paintLOD1() {\n    let context = this.context;\n    context.strokeStyle = '#000';\n    context.fillStyle = this.style.color;\n    context.strokeRect(this.position.x, this.position.y, this.width, this.height);\n    context.fillRect(this.position.x, this.position.y, this.width, this.height);\n  }\n  /** @hidden */\n  offPaint(): void {\n    this.offUIContext.fillStyle = this.hitColor.hexValue;\n    this.offUIContext.fillRect(this.position.x, this.position.y, this.width, this.height);\n  }\n  /** @hidden */\n  reflow(): void {\n    this.thumbFill = denormalize(1 - normalize(this.value, this.min, this.max), 0, this.height - 2 * this.style.thumbRadius);\n\n    if (this.input) {\n      this.input.position.assign(\n        this.node.position.x - this.node.style.terminalStripMargin - this.input.style.radius,\n        this.position.y + this.height / 2\n      );\n    }\n    if (this.output) {\n      this.output.position.assign(\n        this.node.position.x + this.node.width + this.node.style.terminalStripMargin + this.output.style.radius,\n        this.position.y + this.height / 2\n      );\n    }\n  }\n\n  /** @hidden */\n  onPropChange(_oldVal: any, newVal: any) {\n    this._value = newVal;\n    this.reflow();\n\n    this.output && this.output.setData(this.value);\n  }\n  /** @hidden */\n  onOver(screenPosition: Vector2, realPosition: Vector2): void {\n    if (this.disabled) return;\n\n    this.call('over', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onDown(screenPosition: Vector2, realPosition: Vector2): void {\n    if (this.disabled) return;\n\n    this.call('down', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onUp(screenPosition: Vector2, realPosition: Vector2): void {\n    if (this.disabled) return;\n\n    this.call('up', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onClick(screenPosition: Vector2, realPosition: Vector2): void {\n    if (this.disabled) return;\n\n    this.call('click', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onDrag(screenPosition: Vector2, realPosition: Vector2): void {\n    if (this.disabled) return;\n\n    let x = this.position.x + this.width / 2 - this.style.railWidth / 2;\n    this.thumbFill = realPosition\n      .clamp(x, x, this.position.y + this.style.thumbRadius, this.position.y + this.height - this.style.thumbRadius)\n      .subtractInPlace(0, this.position.y + this.style.thumbRadius)\n      .y;\n\n    this.value = denormalize(1 - normalize(this.thumbFill, 0, this.height - 2 * this.style.thumbRadius), this.min, this.max);\n\n    this.call('drag', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onEnter(screenPosition: Vector2, realPosition: Vector2) {\n    if (this.disabled) return;\n\n    this.call('enter', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onExit(screenPosition: Vector2, realPosition: Vector2) {\n    if (this.disabled) return;\n\n    this.call('exit', this, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onWheel(direction: boolean, screenPosition: Vector2, realPosition: Vector2) {\n    if (this.disabled) return;\n\n    this.call('wheel', this, direction, screenPosition, realPosition);\n  }\n  /** @hidden */\n  onContextMenu(): void {\n    if (this.disabled) return;\n  }\n\n  serialize(): SerializedVSlider {\n    return {\n      min: this.min,\n      max: this.max,\n      value: this.value,\n      propName: this.propName,\n      input: this.input ? this.input.serialize() : null,\n      output: this.output ? this.output.serialize() : null,\n      height: this.height,\n      width: this.width,\n      style: this.style,\n      id: this.id,\n      hitColor: this.hitColor.serialize(),\n      type: this.type,\n      childs: []\n    }\n  }\n  static deSerialize(node: Node, data: SerializedVSlider) {\n    return new VSlider(node, data.min, data.max, {\n      value: data.value,\n      propName: data.propName,\n      input: data.input,\n      output: data.output,\n      height: data.height,\n      width: data.width,\n      style: data.style,\n      id: data.id,\n      hitColor: Color.deSerialize(data.hitColor)\n    });\n  }\n}\n\nexport interface VSliderStyle extends UINodeStyle {\n  railWidth?: number,\n  thumbRadius?: number,\n  color?: string,\n  thumbColor?: string\n}\n/** @hidden */\nlet DefaultVSliderStyle = (node: Node, width: number) => {\n  return {\n    color: '#444',\n    thumbColor: '#000',\n    railWidth: 4,\n    thumbRadius: typeof width !== 'undefined' ? width / 2 : (node.style.rowHeight * 1.5) / 2\n  }\n}\n\nexport interface SerializedVSlider extends SerializedUINode {\n  min: number,\n  max: number,\n  value: number,\n  height: number,\n  width: number\n}\n\ninterface VSliderOptions {\n  value?: number,\n  propName?: string,\n  input?: boolean | SerializedTerminal,\n  output?: boolean | SerializedTerminal,\n  height?: number,\n  width?: number,\n  style?: VSliderStyle,\n  id?: string,\n  hitColor?: Color\n}\n/** @hidden */\nlet DefaultVSliderOptions = (node: Node): VSliderOptions => {\n  return {\n    height: node.style.rowHeight * 5,\n    width: node.style.rowHeight\n  }\n};\n","/** @hidden */\nexport class AVLTree<T> {\n  root: AVLTreeNode<T>;\n  dataRefToTreeNode: { [key: string]: AVLTreeNode<T> };\n  size: number;\n\n  constructor(public comparator: (a: T, b: T) => number, public dataToTreeNodeMapper: (data: T) => string) {\n    this.root = null;\n    this.dataRefToTreeNode = {};\n    this.size = 0;\n  }\n\n  height(node: AVLTreeNode<T>) {\n    if (!node) return 0;\n    return node.height;\n  }\n  rightRotate(node: AVLTreeNode<T>) {\n    let newRoot = node.left;\n    node.left = newRoot.right;\n    newRoot.right = node;\n\n    node.height = Math.max(node.left ? node.left.height : 0, node.right ? node.right.height : 0) + 1;\n    newRoot.height = Math.max(newRoot.left ? newRoot.left.height : 0, newRoot.right ? newRoot.right.height : 0) + 1;\n\n    return newRoot;\n  }\n  leftRotate(node: AVLTreeNode<T>) {\n    let newRoot = node.right;\n    node.right = newRoot.left;\n    newRoot.left = node;\n\n    node.height = Math.max(node.left ? node.left.height : 0, node.right ? node.right.height : 0) + 1;\n    newRoot.height = Math.max(newRoot.left ? newRoot.left.height : 0, newRoot.right ? newRoot.right.height : 0) + 1;\n\n    return newRoot;\n  }\n  getBalance(node: AVLTreeNode<T>) {\n    if (!node) return 0;\n    return (node.left ? node.left.height : 0) - (node.right ? node.right.height : 0);\n  }\n\n  add(data: T): AVLTreeNode<T> {\n    let res: { node: AVLTreeNode<T> } = { node: null };\n    this.root = this._insert(this.root, data, res);\n    this.dataRefToTreeNode[this.dataToTreeNodeMapper(data)] = res.node;\n    this.size += 1;\n    return res.node;\n  }\n  private _insert(node: AVLTreeNode<T>, data: T, res: { node: AVLTreeNode<T> }): AVLTreeNode<T> {\n    if (!node) {\n      let newNode = new AVLTreeNode([data]);\n      res.node = newNode;\n      return newNode;\n    }\n\n    // Duplicate Keys\n    if (this.comparator(data, node.data[0]) === 0) {\n      node.data.push(data);\n      res.node = node;\n      return node;\n    }\n\n    if (this.comparator(data, node.data[0]) < 0) node.left = this._insert(node.left, data, res);\n    else node.right = this._insert(node.right, data, res);\n\n    node.height = 1 + Math.max(node.left ? node.left.height : 0, node.right ? node.right.height : 0);\n    let balance = this.getBalance(node);\n\n    if (balance > 1 && this.comparator(data, node.left.data[0]) < 0) return this.rightRotate(node);\n    if (balance > 1 && this.comparator(data, node.left.data[0]) > 0) {\n      node.left = this.leftRotate(node.left);\n      return this.rightRotate(node);\n    }\n    if (balance < -1 && this.comparator(data, node.right.data[0]) > 0) return this.leftRotate(node);\n    if (balance < -1 && this.comparator(data, node.right.data[0]) < 0) {\n      node.right = this.rightRotate(node.right);\n      return this.leftRotate(node);\n    }\n\n    return node;\n  }\n\n  remove(data: T): boolean {\n    let res: { deleted: boolean } = { deleted: false };\n    this.root = this._delete(this.root, data, res);\n    delete this.dataRefToTreeNode[this.dataToTreeNodeMapper(data)];\n    this.size -= 1;\n    return res.deleted;\n  }\n  private _delete(node: AVLTreeNode<T>, data: T, res: { deleted: boolean }): AVLTreeNode<T> {\n    if (!node) return node;\n\n    if (this.comparator(data, node.data[0]) < 0) node.left = this._delete(node.left, data, res);\n    else if (this.comparator(data, node.data[0]) > 0) node.right = this._delete(node.right, data, res);\n    else {\n      // Duplicate Keys\n      if (node.data.length > 1) {\n        let index = node.data.findIndex(currData => this.dataToTreeNodeMapper(currData) === this.dataToTreeNodeMapper(data));\n        if (index > -1) {\n          node.data.splice(index, 1);\n          res.deleted = true;\n        } else {\n          res.deleted = false;\n        }\n        return node;\n      } else {\n        if (!node.left || !node.right) {\n          let temp = null;\n          if (!node.left) temp = node.right;\n          else temp = node.left;\n\n          if (!temp) {\n            // temp = node;\n            node = null;\n          } else node = temp;\n          res.deleted = true;\n        } else {\n          let temp = this.minValue(node.right);\n          node.data = temp.data;\n          node.right = this._delete(node.right, temp.data[0], res);\n          res.deleted = true;\n        }\n      }\n    }\n    if (!node) return node;\n\n    node.height = Math.max(node.left ? node.left.height : 0, node.right ? node.right.height : 0) + 1;\n    let balance = this.getBalance(node);\n\n    if (balance > 1 && this.getBalance(node.left) >= 0) return this.rightRotate(node);\n    if (balance > 1 && this.getBalance(node.left) < 0) {\n      node.left = this.leftRotate(node.left);\n      return this.rightRotate(node);\n    }\n    if (balance < -1 && this.getBalance(node.right) <= 0) return this.leftRotate(node);\n    if (balance < -1 && this.getBalance(node.right) > 0) {\n      node.right = this.rightRotate(node.right);\n      return this.leftRotate(node);\n    }\n    return node;\n  }\n\n  minValue(node: AVLTreeNode<T>) {\n    let curr = node;\n    while (curr.left) curr = curr.left;\n    return curr;\n  }\n  forEach(action: (item: T) => void) {\n    this._inorder(this.root, action);\n  }\n\n  private _inorder(node: AVLTreeNode<T>, action: (item: T) => void) {\n    if (node !== null) {\n      this._inorder(node.left, action);\n      node.data.forEach(data => action(data));\n      this._inorder(node.right, action);\n    }\n  }\n  private _reverseInorder(node: AVLTreeNode<T>, action: (item: T) => void) {\n    if (node !== null) {\n      this._inorder(node.right, action);\n      node.data.forEach(data => action(data));\n      this._inorder(node.left, action);\n    }\n  }\n}\n\n/** @hidden */\nexport class AVLTreeNode<T> {\n  height: number;\n  left: AVLTreeNode<T>;\n  right: AVLTreeNode<T>;\n\n  constructor(public data: T[]) {\n    this.height = 1;\n    this.left = null;\n    this.right = null;\n  }\n}\n","// This is strictly for one-to-one mapping, many-to-one mapping will not work\nexport class BiMap<K, V> {\n  map: Map<K | V, V | K>;\n  reverseMap: Map<V | K, K | V>;\n\n  constructor() {\n    this.map = new Map();\n    this.reverseMap = new Map();\n  }\n\n  get(keyOrVal: K | V): V | K {\n    return this.map.get(keyOrVal) || this.reverseMap.get(keyOrVal);\n  }\n  set(key: K | V, value: V | K) {\n    this.map.set(key, value);\n    this.reverseMap.set(value, key);\n  }\n  has(keyOrVal: K | V): boolean {\n    return this.map.has(keyOrVal) || this.reverseMap.has(keyOrVal);\n  }\n  delete(keyOrVal: K | V) {\n    let temp1 = this.map.get(keyOrVal);\n    let temp2 = this.reverseMap.get(keyOrVal);\n    if (typeof temp1 !== 'undefined') { this.map.delete(keyOrVal); }\n    if (typeof temp2 !== 'undefined') { this.reverseMap.delete(keyOrVal); }\n\n    // I have a gut feeling that this is required, for some edge case that I cannot grab from my subconscious mind\n    this.map.delete(temp1);\n    this.reverseMap.delete(temp1);\n    this.map.delete(temp2);\n    this.reverseMap.delete(temp2);\n  }\n  clear() {\n    this.map.clear();\n    this.reverseMap.clear();\n  }\n}\n","import { Token, TokenType } from \"./lexer\";\nimport { Constant } from \"../resource/constants\";\nimport { Parser } from \"./parser\";\n\nexport class Evaluator {\n  parser: Parser;\n  static constants = {\n    tau: Constant.TAU,\n    pi: Math.PI,\n    phi: Constant.PHI,\n    ln2: Math.LN2,\n    ln10: Math.LN10,\n    log2e: Math.LOG2E,\n    log10e: Math.LOG10E,\n  };\n  static functions = {\n    cos: Math.cos,\n    acos: Math.acos,\n    acosh: Math.acosh,\n    sin: Math.sin,\n    asin: Math.asin,\n    asinh: Math.asinh,\n    tan: Math.tan,\n    atan: Math.atan,\n    atanh: Math.atanh,\n    atan2: Math.atan2,\n    abs: Math.abs,\n    ceil: Math.ceil,\n    round: Math.round,\n    floor: Math.floor,\n    exp: Math.exp,\n    random: Math.random,\n    sqrt: Math.sqrt,\n    cbrt: Math.cbrt,\n    log10: Math.log10,\n    log2: Math.log2,\n    log: (value: number, base?: number) => { return base ? (Math.log(value) / Math.log(base)) : Math.log(value); },\n    dist: (x1: number, y1: number, x2: number, y2: number) => { return Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2)); },\n    gcd: (a: number, b: number) => { while (b !== 0) { const r = a % b; a = b; b = r; } return a < 0 ? -a : a; },\n    max: (...args: any[]) => { return Array.isArray(args[0]) ? Math.max(...args[0]) : Math.max(...args) },\n    min: (...args: any[]) => { return Array.isArray(args[0]) ? Math.min(...args[0]) : Math.min(...args) },\n    hypot: (...args: number[]) => {\n      let result = 0;\n      let largest = 0;\n      let input = Array.isArray(args[0]) ? args[0] : args;\n      input.forEach(x => {\n        const value = Math.abs(x);\n        if (largest < value) {\n          result = result * (largest / value) * (largest / value);\n          result += 1;\n          largest = value;\n        } else {\n          result = result + (value > 0 ? ((value / largest) * (value / largest)) : value);\n        }\n      });\n      return largest * Math.sqrt(result);\n    },\n    lcm: (a: number, b: number) => {\n      if (a === 0) return a;\n      if (b === 0) return b;\n      const prod = a * b;\n      while (b !== 0) { const t = b; b = a % t; a = t; }\n      return Math.abs(prod / a);\n    },\n    sum: (...args: any[]) => {\n      let input = Array.isArray(args[0]) ? args[0] : args;\n      return input.reduce((acc, curr) => acc + curr, 0);\n    },\n    mean: (...args: any[]) => {\n      let input = Array.isArray(args[0]) ? args[0] : args;\n      return Evaluator.functions.sum(input) / input.length\n    },\n    median: (...args: any[]) => {\n      let input = Array.isArray(args[0]) ? args[0] : args;\n      input.sort((a, b) => a - b);\n      return input.length % 2 === 0 ? (input[input.length / 2 - 1] + input[input.length / 2]) / 2 : input[Math.floor(input.length / 2)];\n    },\n    std: (...args: any[]) => {\n      let input = Array.isArray(args[0]) ? args[0] : args;\n      return Math.sqrt(Evaluator.functions.var(input));\n    },\n    var: (...args: any[]) => {\n      let input = Array.isArray(args[0]) ? args[0] : args;\n      let mean = Evaluator.functions.mean(input);\n      return input.reduce((acc, curr) => acc + Math.pow(curr - mean, 2), 0) / input.length;\n    },\n    fact: (n: number) => {\n      let res = 1;\n      for (let i = n; i > 1; i -= 1) res *= i;\n      return res;\n    }\n  };\n  static multiargFunctions = ['max', 'min', 'hypot', 'sum', 'mean', 'median', 'std', 'var'];\n\n  // Optimization: If the curr expr is present in history\n  // no need to invoke lexer and parser, get postfix token array from here\n  history: { [expr: string]: Token[] } = {};\n  orderedExprs: string[] = [];\n  historyLimit: number = 3;\n\n  constructor(public variables: { [name: string]: any }) { this.parser = new Parser(); }\n\n  evaluate(expr: string, index?: number) {\n    let postFix;\n    if (this.history[expr]) postFix = this.history[expr];\n    else {\n      if (this.orderedExprs.length === this.historyLimit) {\n        let oldestExpr = this.orderedExprs.shift();\n        delete this.history[oldestExpr];\n      }\n      this.orderedExprs.push(expr);\n      this.history[expr] = this.parser.parse(expr);\n      postFix = this.history[expr];\n    }\n    let result: number[] = [];\n\n    for (let token of postFix) {\n      switch (token.type) {\n        case TokenType.Literal: {\n          result.push(token.value as number);\n          break;\n        }\n        case TokenType.Variable: {\n          // Character is uppercase = expression contained spread operator e.g ...a => A (this is done in lexical analysis)\n          if (token.value !== (token.value as string).toLowerCase()) {\n            if (!Array.isArray(this.variables[token.value])) {\n              throw new Error('Spread operator only allowed for array variables: ' + (token.value as string).toLowerCase());\n            } else result.push(this.variables[token.value]);\n          } else {\n            if (Array.isArray(this.variables[token.value]) && typeof index !== 'undefined') {\n              result.push(this.variables[token.value][index]);\n            } else {\n              result.push(this.variables[token.value]);\n            }\n          }\n          break;\n        }\n        case TokenType.Operator: {\n          let [left, right] = [result.pop(), result.pop()];\n          if (typeof left !== 'number' || typeof right !== 'number') throw new Error('Only numbers are allowed for operators');\n\n          switch (token.value) {\n            case '+': { result.push(left + right); break; }\n            case '*': { result.push(left * right); break; }\n            case '-': { result.push(right - left); break; }\n            case '/': { result.push(right / left); break; }\n            case '%': { result.push(right % left); break; }\n            case '^': { result.push(Math.pow(right, left)); break; }\n            case '&': { result.push(right & left); break; }\n            case '|': { result.push(right | left); break; }\n            default: throw new Error('Unknow operator: ' + token.value);\n          }\n          break;\n        }\n        case TokenType.Function: {\n          let args = [];\n          for (let i = 0; i < token.count; i += 1) args.push(result.pop());\n          result.push((Evaluator.functions as any)[token.value](...args));\n          break;\n        }\n        default: throw new Error('Unknown token type: ' + token.type);\n      }\n    }\n\n    return result[0];\n  }\n}\n","export * from './avl-tree';\nexport * from './evaluator';\nexport * from './lexer';\nexport * from './linked-list';\nexport * from './logger';\nexport * from './parser';\nexport * from './utils';\nexport * from './bidirectional-map';\n","import { Evaluator } from \"./evaluator\";\n\nexport class Lexer {\n  static operators = ['+', '-', '*', '/', '^', '%', '&', '|'];\n  private result: Token[] = [];\n  private numberBuffer: string[] = [];\n  private letterBuffer: string[] = [];\n\n  constructor() { /**/ }\n\n  tokenize(expr: string) {\n    this.result = [];\n    this.numberBuffer = [];\n    this.letterBuffer = [];\n\n    // Replace all variable spread operators with their equivalent capital letter\n    let index;\n    while ((index = expr.indexOf('...')) !== -1) {\n      expr = expr.substring(0, index) + expr.charAt(index + 3).toUpperCase() + expr.substring(index + 4);\n    }\n\n    expr = this.replaceConstants(expr);\n    let chars = expr.replace(/\\s+/g, \"\").split(\"\");\n\n    chars.forEach(char => {\n      if (this.isDigit(char)) {\n        this.numberBuffer.push(char);\n      } else if (this.isDecimalPoint(char)) {\n        this.numberBuffer.push(char);\n      } else if (this.isLetter(char)) {\n        if (this.numberBuffer.length) {\n          this.processNumberBuffer();\n          this.result.push(new Token(TokenType.Operator, '*'));\n        }\n\n        this.letterBuffer.push(char);\n      } else if (this.isOperator(char)) {\n        if (this.numberBuffer.length) this.processNumberBuffer();\n        else if (this.letterBuffer.length) this.processLetterBuffer();\n\n        this.result.push(new Token(TokenType.Operator, char));\n      } else if (this.isLeftParenthesis(char)) {\n        if (this.letterBuffer.length) {\n          this.result.push(new Token(TokenType.Function, this.letterBuffer.join('')));\n          this.letterBuffer = [];\n        } else if (this.numberBuffer.length) {\n          this.processNumberBuffer();\n          this.result.push(new Token(TokenType.Operator, '*'));\n        }\n\n        this.result.push(new Token(TokenType.LParenthesis, char));\n      } else if (this.isRightParenthesis(char)) {\n        if (this.letterBuffer.length) this.processLetterBuffer();\n        if (this.numberBuffer.length) this.processNumberBuffer();\n\n        this.result.push(new Token(TokenType.RParenthesis, char));\n      } else if (this.isComma(char)) {\n        if (this.numberBuffer.length) this.processNumberBuffer();\n        if (this.letterBuffer.length) this.processLetterBuffer();\n\n        this.result.push(new Token(TokenType.ArgSeperator, char));\n      } else throw Error('Unknown character: ' + char);\n    });\n    if (this.numberBuffer.length) this.processNumberBuffer();\n    if (this.letterBuffer.length) this.processLetterBuffer();\n\n    return this.result;\n  }\n  private replaceConstants(expr: string) {\n    return expr\n      .replace(/pi/g, Evaluator.constants.pi.toString())\n      .replace(/tau/g, Evaluator.constants.tau.toString())\n      .replace(/phi/g, Evaluator.constants.phi.toString())\n      .replace(/ln2/g, Evaluator.constants.ln2.toString())\n      .replace(/ln10/g, Evaluator.constants.ln10.toString())\n      .replace(/log2e/g, Evaluator.constants.log2e.toString())\n      .replace(/log10e/g, Evaluator.constants.log10e.toString());\n  }\n  private processNumberBuffer() {\n    let literal = parseFloat(this.numberBuffer.join(''));\n    this.numberBuffer = [];\n    if (!isNaN(literal)) { this.result.push(new Token(TokenType.Literal, literal)); }\n  }\n  private processLetterBuffer() {\n    for (var i = 0; i < this.letterBuffer.length; i++) {\n      this.result.push(new Token(TokenType.Variable, this.letterBuffer[i]));\n      if (i < this.letterBuffer.length - 1) this.result.push(new Token(TokenType.Operator, '*'));\n    }\n    this.letterBuffer = [];\n  }\n  private isComma(char: string) { return (char === \",\"); }\n  private isDigit(char: string) { return /\\d/.test(char); }\n  private isLetter(char: string) { return /[a-zA-Z]/.test(char); }\n  private isOperator(char: string) { return Lexer.operators.includes(char); }\n  private isLeftParenthesis(char: string) { return char === \"(\" }\n  private isRightParenthesis(char: string) { return char == \")\" }\n  private isDecimalPoint(char: string) { return char === '.' }\n}\n\nexport enum TokenType {\n  Literal = 'Literal',\n  Variable = 'Variable',\n  Operator = 'Operator',\n  LParenthesis = 'LParenthesis',\n  RParenthesis = 'RParenthesis',\n  Function = 'Function',\n  ArgSeperator = 'ArgSeperator'\n}\n\nexport class Token {\n  static associativity = {\n    '^': 'right',\n    '*': 'left',\n    '/': 'left',\n    '+': 'left',\n    '-': 'left',\n    '%': 'left',\n    '&': 'left',\n    '|': 'left'\n  };\n  static precedence = {\n    '|': 0,\n    '&': 1,\n    '+': 2,\n    '-': 2,\n    '*': 3,\n    '/': 3,\n    '%': 3,\n    '^': 4\n  };\n\n  count: number;\n  get precedence(): number { return (Token.precedence as any)[this.value]; }\n  get associativity(): string { return (Token.associativity as any)[this.value]; }\n\n  constructor(public type: TokenType, public value: string | number) { this.count = 0; }\n\n  toString(): string { return this.type + '(' + this.value + ')'; }\n}\n","import { Hooks } from \"../core/hooks\";\n\nexport class List<T> extends Hooks {\n  head: ListNode<T> = null;\n  tail: ListNode<T> = null;\n  length: number = 0;\n\n  constructor(public comparator?: (a: T, b: T) => number, source?: Array<T>) {\n    super();\n    if (source) source.forEach(value => this.append(value));\n  }\n\n  prepend(data: T) {\n    let newNode = new ListNode(data);\n    if (this.head === null) {\n      this.head = newNode;\n      this.tail = newNode;\n    } else {\n      this.head.prev = newNode;\n      newNode.next = this.head;\n      this.head = newNode;\n    }\n\n    this.length += 1;\n    this.call('prepend', this, newNode);\n    return newNode;\n  }\n  append(data: T | ListNode<T>) {\n    let newNode = data instanceof ListNode ? data : new ListNode(data);\n    if (this.tail === null) {\n      this.head = newNode;\n      this.tail = newNode;\n    } else {\n      this.tail.next = newNode;\n      newNode.prev = this.tail;\n      this.tail = newNode;\n    }\n\n    this.length += 1;\n    this.call('append', this, newNode);\n    return newNode;\n  }\n  removeFirst(hook: boolean = true): T {\n    let removed;\n    if (this.head === null) return null;\n    else if (this.length === 1) {\n      removed = this.head.data;\n      this.head = null;\n      this.tail = null;\n    } else {\n      removed = this.head.data;\n      this.head.next.prev = null;\n      this.head = this.head.next;\n    }\n\n    this.length -= 1;\n    if (hook) this.call('removefirst', this, removed);\n    return removed;\n  }\n  removeLast(): T {\n    let removed;\n    if (this.tail === null) return null;\n    else if (this.length === 1) {\n      removed = this.tail.data;\n      this.head = null;\n      this.tail = null;\n    } else {\n      removed = this.tail.data;\n      this.tail.prev.next = null;\n      this.tail = this.tail.prev;\n    }\n\n    this.length -= 1;\n    this.call('removelast', this, removed);\n    return removed;\n  }\n  addAfter(data: T, node: ListNode<T>): ListNode<T> {\n    let newNode = new ListNode<T>(data);\n    newNode.next = node.next;\n    newNode.prev = node;\n    node.next = newNode;\n    if (newNode.next) newNode.next.prev = newNode;\n    if (node === this.tail) this.tail = newNode;\n    this.length += 1;\n\n    return newNode;\n  }\n  addBefore(data: T, node: ListNode<T>): ListNode<T> {\n    let newNode = new ListNode<T>(data);\n    newNode.prev = node.prev;\n    newNode.next = node;\n    node.prev = newNode;\n    if (newNode.prev) newNode.prev.next = newNode;\n    if (node === this.head) this.head = newNode;\n    this.length += 1;\n\n    return newNode;\n  }\n  delete(node: ListNode<T>) {\n    if (this.length === 1) {\n      this.head = null;\n      this.tail = null;\n    }\n    else if (node === this.head)\n      this.removeFirst();\n    else if (node === this.tail)\n      this.removeLast();\n    else {\n      if (node.prev) node.prev.next = node.next;\n      if (node.next) node.next.prev = node.prev;\n      this.length -= 1;\n    }\n  }\n  searchHead(callback: (node: ListNode<T>) => boolean): ListNode<T> {\n    let curr = this.head;\n    while (curr !== null) {\n      if (callback(curr)) return curr;\n      curr = curr.next;\n    }\n    return null;\n  }\n  searchTail(callback: (node: ListNode<T>) => boolean): ListNode<T> {\n    let curr = this.tail;\n    while (curr !== null) {\n      if (callback(curr)) return curr;\n      curr = curr.prev;\n    }\n    return null;\n  }\n  get(index: number): T {\n    if (index >= this.length) return null;\n    else if (index === 0) return this.head ? this.head.data : null;\n    else if (index === (this.length - 1)) return this.tail ? this.tail.data : null;\n    else {\n      let count = 0;\n      let curr = this.head;\n      while (curr !== null) {\n        if (count === index) return curr.data;\n        count += 1;\n        curr = curr.next;\n      }\n      return null;\n    }\n  }\n\n  forEach(callback: (node: ListNode<T>) => void) {\n    let curr = this.head;\n    while (curr !== null) {\n      callback(curr);\n      curr = curr.next;\n    }\n  }\n  map(callback: (node: ListNode<T>) => any): any[] {\n    let mapped: any[] = [];\n    this.forEach(node => mapped.push(callback(node)));\n    return mapped;\n  }\n  toArray(): T[] {\n    let data: T[] = [];\n    this.forEach(node => data.push(node.data));\n    return data;\n  }\n  toString(): string {\n    return this.toArray().join(', ');\n  }\n}\n\nexport class ListNode<T> {\n  prev: ListNode<T>;\n  next: ListNode<T>;\n  data: T;\n\n  constructor(data?: T) {\n    this.prev = null;\n    this.next = null;\n    this.data = data ? data : null;\n  }\n}\n","export enum LogLevel {\n  TRACE = 0, DEBUG = 1, WARN = 2, INFO = 3, LOG = 3, ERROR = 4, DISABLED = 5\n}\n\nexport class Log {\n  static LOG_LEVEL: LogLevel = LogLevel.INFO;\n\n  static trace(...args: any): void {\n    if (this.LOG_LEVEL > LogLevel.TRACE) return;\n    console.trace.apply(this, args);\n  }\n  static debug(...args: any): void {\n    if (this.LOG_LEVEL > LogLevel.DEBUG) return;\n    console.debug.apply(this, args);\n  }\n  static info(...args: any): void {\n    if (this.LOG_LEVEL > LogLevel.INFO) return;\n    console.info.apply(this, args);\n  }\n  static log(...args: any): void {\n    if (this.LOG_LEVEL > LogLevel.LOG) return;\n    console.log.apply(this, args);\n  }\n  static warn(...args: any): void {\n    if (this.LOG_LEVEL > LogLevel.WARN) return;\n    console.warn.apply(this, args);\n  }\n  static error(...args: any): void {\n    if (this.LOG_LEVEL > LogLevel.ERROR) return;\n    console.error.apply(this, args);\n  }\n}\n","import { Lexer, Token, TokenType } from \"./lexer\";\n\nexport class Parser {\n  lexer: Lexer;\n\n  constructor() { this.lexer = new Lexer(); }\n\n  private peek(arr: any[]) { return arr.slice(-1)[0]; }\n\n  parse(expression: string) {\n    let tokens = this.lexer.tokenize(expression);\n    let stack: Token[] = [];\n    let output: Token[] = [];\n    let were: boolean[] = [];\n    let argCount: number[] = [];\n\n    tokens.forEach(token => {\n      if (token.type === TokenType.Literal || token.type === TokenType.Variable) {\n        output.push(token);\n        if (typeof this.peek(were) !== 'undefined') {\n          were.pop();\n          were.push(true);\n        }\n      } else if (token.type === TokenType.Function) {\n        stack.push(token);\n        argCount.push(0);\n        if (typeof this.peek(were) !== 'undefined') {\n          were.pop();\n          were.push(true);\n        }\n        were.push(false);\n      } else if (token.type === TokenType.ArgSeperator) {\n        while (this.peek(stack) && this.peek(stack).type !== TokenType.LParenthesis) {\n          output.push(stack.pop());\n        }\n        let w = were.pop();\n        if (w) { argCount.push(argCount.pop() + 1); }\n        were.push(false);\n      } else if (token.type == TokenType.Operator) {\n        while (this.peek(stack) && (this.peek(stack).type === TokenType.Operator)\n          && (\n            (token.associativity === \"left\" && token.precedence <= this.peek(stack).precedence)\n            || (token.associativity === \"right\" && token.precedence < this.peek(stack).precedence)\n          )\n        ) {\n          output.push(stack.pop());\n        }\n        stack.push(token);\n      } else if (token.type === TokenType.LParenthesis) {\n        stack.push(token);\n      } else if (token.type === TokenType.RParenthesis) {\n        while (this.peek(stack) && this.peek(stack).type !== TokenType.LParenthesis) {\n          output.push(stack.pop());\n        }\n        stack.pop();\n\n        if (this.peek(stack) && this.peek(stack).type === TokenType.Function) {\n          let funcToken = stack.pop();\n          let a = argCount.pop();\n          let w = were.pop();\n          if (w) { a += 1; }\n          funcToken.count = a;\n          output.push(funcToken);\n        }\n      }\n    });\n    while (this.peek(stack)) { output.push(stack.pop()); }\n\n    return output;\n  }\n}\n","import { Graph } from \"../core/graph\";\nimport { Rules } from \"../common/interfaces\";\nimport { Terminal } from \"../core/terminal\";\nimport { ViewPort } from \"../common/enums\";\n\nexport const getNewUUID = () => {\n  var S4 = () => (((1 + Math.random()) * 0x10000) | 0).toString(16).substring(1);\n  return (S4() + \"-\" + S4() + \"-\" + S4() + \"-\" + S4());\n};\nexport const normalize = (value: number, min: number, max: number) => {\n  if (min === max) return 1;\n  return (value - min) / (max - min);\n};\nexport const denormalize = (normalized: number, min: number, max: number) => {\n  return (max - min) * normalized + min;\n};\nexport const getRandom = (min: number, max: number) => {\n  return Math.random() * (max - min) + min;\n};\nexport const intersects = (start1X: number, start1Y: number, end1X: number, end1Y: number, start2X: number, start2Y: number, end2X: number, end2Y: number): ViewPort => {\n  let res = !(start2X > end1X || end2X < start1X || start2Y > end1Y || end2Y < start1Y);\n  if (res) {\n    if (!(start2X < start1X || start2Y < start1Y || end2X > end1X || end2Y > end1Y)) return ViewPort.INSIDE;\n    else return ViewPort.INTERSECT;\n  } else return ViewPort.OUTSIDE;\n};\nexport const clamp = (value: number, min: number, max: number): number => {\n  return Math.min(Math.max(value, min), max);\n};\nexport const lerp = (a: number, b: number, t: number): number => {\n  return (1 - t) * a + t * b;\n}\nexport const canConnect = (source: Terminal, destination: Terminal, rules: Rules, executionGraph: Graph) => {\n  if (!destination) return false;\n  if (source === destination) return false;\n  if (source.node === destination.node) return false;\n  if (source.type === destination.type) return false;\n  if (!rules[source.dataType].includes(destination.dataType)) return false;\n  if (!executionGraph.canConnect(source.node, destination.node)) return false;\n  return true;\n};\nexport const isEmpty = (obj: any): boolean => {\n  for (let _ in obj) return false;\n  return true;\n};\nexport const isInRange = (value: number, min: number, max: number): boolean => {\n  return Math.min(value, min) >= min && Math.max(value, max) <= max;\n}\nexport const exists = (value: any): boolean => {\n  return typeof value !== 'undefined' && value !== null;\n}\nexport const get = <T>(value: T, defaultVal: T): T => {\n  if (typeof value === 'undefined' || value === null) return defaultVal;\n  return value;\n};\n/** @hidden */\nexport const binarySearch = ({ max, getValue, match }: { max: number, getValue: Function, match: number }) => {\n  let min = 0;\n  while (min <= max) {\n    let mid = Math.floor((min + max) / 2);\n    const curr = getValue(mid);\n\n    if (curr === match) return mid;\n    if (curr < match) min = mid + 1;\n    else max = mid - 1;\n  }\n  return max;\n};\n\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t833: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkIds[i]] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkflow_connect\"] = self[\"webpackChunkflow_connect\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(6184);\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["root","factory","exports","module","define","amd","a","i","self","deferred","ViewPort","LOD","Align","GlobalEventType","Color","constructor","rgba","this","rgbaValue","hexValue","rgbaToHex","rgbaString","rgbaToString","rgbaCSSString","rgbaToCSSString","isEqual","color","static","Uint8ClampedArray","Math","floor","getRandom","hex","parseInt","slice","c","toString","length","_componentToHex","normalize","toFixed","colors","Array","isArray","Log","error","colorObjs","forEach","push","hexToRGBA","t","clamp","index","start","end","ceil","startColor","endColor","map","component","lerp","round","serialize","data","Connector","flow","floatingTip","style","id","getNewUUID","isDeserialization","DefaultConnectorStyle","startNode","node","endNode","connectors","removeConnection","executionGraph","connect","onConnect","_data","call","state","FlowState","Stopped","setDirty","completeConnection","destination","includes","currHitTerminal","onExit","splice","indexOf","setData","canConnect","source","type","rules","dataType","render","flowConnect","context","save","_render","restore","offContext","_offRender","ax","ay","dx","dy","renderState","nodeState","NodeState","MAXIMIZED","position","x","y","width","terminalStripMargin","radius","titleHeight","offset","Vector2","Distance","bx","by","cx","cy","midx","midy","beginPath","moveTo","quadraticCurveTo","strokeStyle","lineWidth","stroke","startId","endId","startNodeId","endNodeId","Flow","Hooks","name","terminalTypeColors","super","globalEvents","parentFlow","listeners","nodes","groups","hitColorToNode","hitColorToGroup","sortedNodes","AVLTree","b","zIndex","inputs","outputs","Graph","registerListeners","on","Running","deregisterListeners","off","existsInFlow","Object","values","subFlow","addInput","flowInput","TunnelNode","proxyTerminal","getData","add","addOutput","flowOutput","addSubFlow","subFlowNode","SubFlowNode","inputNode","outputNode","createNode","options","inTerminals","outTerminals","DefaultNodeOptions","Node","terminalStyle","props","removeNode","nodeOrID","removeConnector","floatingConnector","removeAllFocus","focused","group","connector","stop","order","filter","graphNode","flowNode","input","output","serializedNode","deSerialize","serializedGroup","Group","serializedInput","serializedOutput","serializedConnector","startTerminal","concat","outputsUI","find","terminal","endTerminal","inputsUI","nodeToGraphNode","dirtyNodes","GraphNode","sourceNode","destinationNode","startGraphNode","endGraphNode","childs","updateOrder","disconnect","sourceGraphNode","destinationGraphNode","connectedEndNodes","Set","has","maxOrderOfConnectedStartNodes","reduce","acc","curr","max","_updateOrder","queue","currNode","shift","child","async","runAll","lowestDirty","Idle","graphNodes","Promise","all","resolve","run","clearDirty","lowestOrder","min","propagate","callback","List","append","currGNode","removeFirst","debugNode","indent","console","log","debugGraph","keys","nodeId","groupedNodes","graph","serializedGraphNodes","deSerializedGraphNodes","serializedGroupedNodes","serializedGraphNode","key","childId","DefaultGroupOptions","nodeDeltas","INSIDE","get","height","hitColor","DefaultGroupStyle","_position","borderColor","DefaultGroupColors","Random","setHitColor","computeTextMetrics","updateRenderState","_name","trim","recomputeNodePositions","font","fontSize","metrics","measureText","textWidth","textHeight","actualBoundingBoxAscent","actualBoundingBoxDescent","d","document","createElement","textContent","body","appendChild","offsetHeight","removeChild","realPos","transform","intersects","canvasDimensions","scale","setContainedNodes","groupRealPos","viewport","nodeRealPos","ui","subtract","OUTSIDE","offGroupContext","fillStyle","strokeRect","fillRect","titleColor","textBaseline","fillText","onClick","screenPosition","realPosition","thisRealPosition","showGenericInput","replace","fontFamily","value","nodeDelata","serializedVector","RED","GREEN","BLUE","random","registeredEvents","lastId","eventKey","args","offAll","DefaultNodeConstructorOptions","nodeButtons","propObservers","lod","LOD2","_width","DefaultNodeStyle","setupProps","hitColorToUI","hitColorToTerminal","hitColorToNodeButton","_zIndex","setupTerminals","Container","addNodeButton","toggleNodeState","_","pos","maximizeButtonColor","nodeButtonSize","Left","reflow","update","offUIContext","remove","Terminal","TerminalType","IN","OUT","Proxy","set","target","prop","oldValue","watch","propName","unwatch","align","deltaX","newNodeButton","NodeButton","noOfButtons","nodeButton","nodeButtonSpacing","terminalRowHeight","padding","recalculateInputTerminals","recalculateOutputTerminals","LOD1","LOD0","INTERSECT","getHitTerminal","hitTerminal","onEnter","getHitUINode","uiNode","getHitNodeButton","titleFontSize","titleFont","inputTerminalsWidth","outputTerminalsWidth","strokeRoundRect","inputTerminalsStripWidth","outputTerminalsStripWidth","addTerminal","removeTerminal","getInput","inputTerminal","currTerm","getInputs","setOutputs","outputTerminal","term","outputData","Map","entries","entry","groupedConnectors","outputDataIterator","next","gCntrsIterator","MINIMIZED","dispose","onDown","getImageData","currHitUINode","onOver","prevHitTerminal","hitUINode","prevHitUINode","onUp","clone","hitNodeButton","onDrag","hitUINodeWhileDragging","draggable","currHitNode","pointers","onContextMenu","onWheel","direction","zoomable","createLabel","text","Label","createImage","Image","createSlider","Slider","createSlider2D","Slider2D","createVSlider","VSlider","createDial","size","Dial","createHozLayout","HorizontalLayout","createStack","Stack","createButton","Button","createToggle","Toggle","createRadioGroup","selected","RadioGroup","createSelect","Select","createSource","Source","createDisplay","renderers","Display","createInput","Input","createEnvelope","Envelope","expandButtonColor","spacing","rowHeight","_offUIRender","DefaultSubFlowOptions","tunnel","_nodeButton","lineTo","closePath","Right","DefaultTerminalStyle","Zero","focus","arc","Constant","TAU","focusColor","fill","shadowBlur","shadowColor","offUIRender","otherTerminal","newConnector","_disconnect","cntr","currCntr","startTerm","endTerm","findIndex","pop","onDisconnect","isConnected","cursor","removedConnector","onEvent","emit","DefaultTunnelNodeOptions","_proxyTerminal","proxyTerminalId","xOrDOMPoint","DOMPoint","addInPlace","arg1","arg2","multiplyInPlace","subtractInPlace","normalizeInPlace","minY","maxY","clampInPlace","transformInPlace","transformedPoint","transformPoint","absInPlace","abs","multiply","isInside","arg3","arg4","assign","vector","threshold","vector1OrX1","vector2OrY1","x2","y2","sqrt","pow","vector1","vector2","minX","maxX","FlowConnect","mount","audioBufferCache","arrayBufferCache","top","left","FlowConnectState","flows","keymap","touchControls","genericInput","minScale","maxScale","wheelScaleDelta","pinchScaleDelta","disableScale","_transform","DOMMatrix","inverseTransform","identity","startTime","prepareCanvas","setupHitCanvas","calculateCanvasDimension","registerChangeListeners","attachStyles","polyfill","registerEvents","setGenericInput","setupAudioContext","_context","audioContext","_audioContext","_offContext","_offUIContext","_offGroupContext","canvas","time","performance","now","throttle","addEventListener","window","requestAnimationFrame","registerObservers","parentElement","parent","parentResizeObserver","bodyResizeObserver","ResizeObserver","updateTransform","observe","HTMLDivElement","clientWidth","clientHeight","HTMLCanvasElement","getContext","OffscreenCanvas","OffscreenCanvasRenderingContext2D","offCanvas","offUICanvas","offGroupCanvas","touchAction","inputStyle","innerHTML","getElementsByTagName","adjust","parentBoundingRect","getBoundingClientRect","boundingRect","CanvasRenderingContext2D","prototype","roundRect","fillRoundRect","dragDelta","prevPanPosition","prevPinchDistance","onkeydown","ev","onkeyup","onpointerdown","currFlow","addPointer","pointerId","getRelativePosition","getHitNode","Number","MAX_SAFE_INTEGER","groupStartPoint","currGroup","currHitGroup","getHitGroup","fallbackConnection","onpointerup","removePointer","handleGrouping","hitNode","newGroup","handleConnection","onpointerout","prevHitNode","onpointermove","updatePointer","currPinchDistance","handleZoom","Midpoint","hitGroup","nodeIndex","delta","pointerType","onclick","oncontextmenu","preventDefault","onwheel","deltaY","className","visibility","pointerEvents","onblur","onchange","__FLOWCONNECT_AUDIO_CTX__","AudioContext","audioWorklets","generateAudioWorklets","WorkletUtils","CircularBuffer","audioWorklet","addModule","styles","attributes","activeElement","changeParent","newParent","pointer","pntr","zoomIn","origin","scaleDelta","intersection","oldConnector","clientX","clientY","scaleOrigin","translate","realSpaceOrigin","translateSelf","scaleSelf","inverse","setTransform","translateBy","scaleBy","clear","clearRect","startGlobalTime","_startGlobalTime","timerId","bind","stopGlobalTime","isRootFlowStopped","cancelAnimationFrame","frameId","createFlow","DefaultRules","rootFlow","fromJson","json","JSON","parse","toJson","serializedFlow","stringify","URL","createObjectURL","Blob","utilsFileName","Worklet_ProxyParamForSource","Worklet_ProxyParam","Worklet_Debug","Worklet_MoogEffect","Worklet_BitcrusherEffect","Worklet_LFO","Worklet_Noise","Worklet_Proxy","PI","SIN_60","PHI","fileIcon","imageIcon","UINode","DefaultSlider2DOptions","UIType","DefaultSlider2DStyle","pointDiameter","_value","getProp","thumbHitColor","offThumbCanvas","offThumbContext","renderOffThumb","oldVal","newVal","setProp","coord","paint","backgroundColor","borderWidth","point","thumbColor","paintLOD1","offPaint","newWidth","newHeight","getHitPoint","movePoint","onPropChange","_oldVal","disabled","isHit","DefaultButtonOptions","DefaultButtonStyle","label","Center","_node","children","visible","DefaultContainerOptions","DefaultContainerStyle","contentWidth","shadowOffsetX","shadowOffset","shadowOffsetY","terminalsDisplayHeight","availableWidth","childX","uiContainer","serializedChild","DefaultDialOptions","DefaultDialStyle","thumbStart","thumbEnd","temp","lineCap","thumbShadowColor","thumbShadowBlur","center","angle","cos","sin","pointToValue","diff","atan2","lastAngle","undefined","deltaValue","currValue","diffValue","normalizedValue","denormalize","customRenderers","DefaultDisplayOptions","DefaultDisplayStyle","offCanvasConfigs","rendererConfig","newOffCanvasConfig","canvasType","CanvasType","shouldRender","config","auto","customRender","canvasConfigs","renderer","autoOffCanvasConfigs","then","results","result","drawImage","DefaultEnvelopeOptions","DefaultEnvelopeStyle","pointHitColorPoint","BiMap","sort","pointNode","offPointsCanvas","offPointsContext","renderOffPoints","toArray","vec","points","lineColor","pointColor","currHitPoint","prev","Infinity","newPoint","newPointNode","anchor","searchTail","prepend","addAfter","deletePoint","delete","lastDownPosition","serialVec","DefaultHorizontalLayoutOptions","DefaultHorizontalLayoutStyle","originalWidth","maxHeight","fixedWidthChilds","fixedWidth","remainingWidth","flexWidth","childWidth","grow","hozLayout","sourceString","DefaultImageOptions","DefaultImageStyle","_src","setupImage","src","onerror","onload","imageCanvas","imageContext","ratio","DefaultInputOptions","DefaultInputStyle","InputType","parseFloat","setupLabel","setupInputElement","val","setLabelText","inputEl","precision","validity","patternMismatch","step","spellcheck","inputType","pattern","maxLength","oninput","exists","border","Text","DefaultLabelOptions","DefaultLabelStyle","_text","orgTextWidth","format","displayText","getBestFitString","ellipsisWidth","binarySearch","getValue","idx","substring","match","DefaultRadioGroupOptions","DefaultRadioGroupStyle","_values","selectedValue","_selected","setupLabels","option","selectedLabel","lastSelectedLabel","selectedBackgroundColor","selectedColor","commonWidth","DefaultSelectOptions","DefaultSelectStyle","slctdVal","arrowColor","newValue","DefaultSliderOptions","DefaultSliderStyle","railHeight","thumbFill","thumbRadius","DefaultSourceOptions","DefaultSourceStyle","accept","htmlInput","click","file","_file","lastIndexOf","files","DefaultStackOptions","DefaultStackStyle","actualTotalHeight","effectiveSpacing","stack","DefaultToggleOptions","DefaultToggleStyle","_checked","checked","DefaultUINodeOptions","_visible","_disabled","propValue","DefaultVSliderOptions","DefaultVSliderStyle","railWidth","comparator","dataToTreeNodeMapper","dataRefToTreeNode","rightRotate","newRoot","right","leftRotate","getBalance","res","_insert","newNode","AVLTreeNode","balance","deleted","_delete","currData","minValue","action","_inorder","_reverseInorder","reverseMap","keyOrVal","temp1","temp2","Evaluator","variables","history","orderedExprs","historyLimit","parser","Parser","evaluate","expr","postFix","oldestExpr","token","TokenType","Literal","Variable","toLowerCase","Error","Operator","Function","count","functions","constants","tau","pi","phi","ln2","LN2","ln10","LN10","log2e","LOG2E","log10e","LOG10E","acos","acosh","asin","asinh","tan","atan","atanh","exp","cbrt","log10","log2","base","dist","x1","y1","gcd","r","hypot","largest","lcm","prod","sum","mean","median","std","var","fact","n","multiargFunctions","Lexer","numberBuffer","letterBuffer","tokenize","charAt","toUpperCase","replaceConstants","split","char","isDigit","isDecimalPoint","isLetter","processNumberBuffer","Token","isOperator","processLetterBuffer","isLeftParenthesis","join","LParenthesis","isRightParenthesis","RParenthesis","isComma","ArgSeperator","literal","isNaN","test","operators","precedence","associativity","head","tail","ListNode","hook","removed","removeLast","addBefore","searchHead","mapped","LogLevel","LOG_LEVEL","TRACE","trace","apply","DEBUG","debug","INFO","info","LOG","WARN","warn","ERROR","lexer","peek","arr","expression","tokens","were","argCount","funcToken","S4","normalized","start1X","start1Y","end1X","end1Y","start2X","start2Y","end2X","end2Y","isEmpty","obj","isInRange","defaultVal","mid","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","m","O","chunkIds","fn","priority","notFulfilled","fulfilled","j","every","o","hasOwnProperty","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","__webpack_exports__"],"sourceRoot":""}