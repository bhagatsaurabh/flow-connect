{"version":3,"file":"standard-nodes.js","mappings":"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","sources":["webpack://flow-connect/webpack/universalModuleDefinition","webpack://flow-connect/./src/standard-nodes/audio/adsr.ts","webpack://flow-connect/./src/standard-nodes/audio/audio-buffer-source.ts","webpack://flow-connect/./src/standard-nodes/audio/automate.ts","webpack://flow-connect/./src/standard-nodes/audio/biquad-filter.ts","webpack://flow-connect/./src/standard-nodes/audio/bitcrusher.ts","webpack://flow-connect/./src/standard-nodes/audio/channel-merger.ts","webpack://flow-connect/./src/standard-nodes/audio/channel-splitter.ts","webpack://flow-connect/./src/standard-nodes/audio/chorus.ts","webpack://flow-connect/./src/standard-nodes/audio/convolver.ts","webpack://flow-connect/./src/standard-nodes/audio/debug.ts","webpack://flow-connect/./src/standard-nodes/audio/delay.ts","webpack://flow-connect/./src/standard-nodes/audio/destination.ts","webpack://flow-connect/./src/standard-nodes/audio/distorter.ts","webpack://flow-connect/./src/standard-nodes/audio/dynamics-compressor.ts","webpack://flow-connect/./src/standard-nodes/audio/equalizer.ts","webpack://flow-connect/./src/standard-nodes/audio/frequency-analyser.ts","webpack://flow-connect/./src/standard-nodes/audio/gain.ts","webpack://flow-connect/./src/standard-nodes/audio/metronome.ts","webpack://flow-connect/./src/standard-nodes/audio/microphone.ts","webpack://flow-connect/./src/standard-nodes/audio/moog.ts","webpack://flow-connect/./src/standard-nodes/audio/noise.ts","webpack://flow-connect/./src/standard-nodes/audio/oscillator.ts","webpack://flow-connect/./src/standard-nodes/audio/overdrive.ts","webpack://flow-connect/./src/standard-nodes/audio/ping-pong-delay.ts","webpack://flow-connect/./src/standard-nodes/audio/source.ts","webpack://flow-connect/./src/standard-nodes/audio/spatial-panner.ts","webpack://flow-connect/./src/standard-nodes/audio/spectrogram-analyser.ts","webpack://flow-connect/./src/standard-nodes/audio/stereo-panner.ts","webpack://flow-connect/./src/standard-nodes/audio/tremolo.ts","webpack://flow-connect/./src/standard-nodes/audio/waveform-analyser.ts","webpack://flow-connect/./src/standard-nodes/common/array-index.ts","webpack://flow-connect/./src/standard-nodes/common/array-source.ts","webpack://flow-connect/./src/standard-nodes/common/boolean-source.ts","webpack://flow-connect/./src/standard-nodes/common/buffer.ts","webpack://flow-connect/./src/standard-nodes/common/compare.ts","webpack://flow-connect/./src/standard-nodes/common/delay.ts","webpack://flow-connect/./src/standard-nodes/common/file-source.ts","webpack://flow-connect/./src/standard-nodes/common/global-event.ts","webpack://flow-connect/./src/standard-nodes/common/json-source.ts","webpack://flow-connect/./src/standard-nodes/common/log.ts","webpack://flow-connect/./src/standard-nodes/common/number-range.ts","webpack://flow-connect/./src/standard-nodes/common/number-source.ts","webpack://flow-connect/./src/standard-nodes/common/property.ts","webpack://flow-connect/./src/standard-nodes/common/random.ts","webpack://flow-connect/./src/standard-nodes/common/string-source.ts","webpack://flow-connect/./src/standard-nodes/common/sync-data.ts","webpack://flow-connect/./src/standard-nodes/common/sync-event.ts","webpack://flow-connect/./src/standard-nodes/common/timer.ts","webpack://flow-connect/./src/standard-nodes/common/to-array.ts","webpack://flow-connect/./src/standard-nodes/common/to-vector.ts","webpack://flow-connect/./src/standard-nodes/index.ts","webpack://flow-connect/./src/standard-nodes/math/abs.ts","webpack://flow-connect/./src/standard-nodes/math/average.ts","webpack://flow-connect/./src/standard-nodes/math/ceil.ts","webpack://flow-connect/./src/standard-nodes/math/clamp.ts","webpack://flow-connect/./src/standard-nodes/math/floor.ts","webpack://flow-connect/./src/standard-nodes/math/func.ts","webpack://flow-connect/./src/standard-nodes/math/normalize.ts","webpack://flow-connect/./src/standard-nodes/net/api.ts","webpack://flow-connect/./src/standard-nodes/ui/dial.ts","webpack://flow-connect/./src/standard-nodes/visual/function-plotter.ts","webpack://flow-connect/./src/standard-nodes/visual/line-chart-mini.ts","webpack://flow-connect/./src/lib/tuna.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(self, () => {\nreturn ","import { Flow } from \"../../core/flow\";\r\nimport { Vector } from \"../../core/vector\";\r\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\r\nimport { clamp, denormalize } from \"../../utils/utils\";\r\nimport { Node } from \"../../core/node\";\r\nimport { InputType, Input, Envelope } from \"../../ui/index\";\r\n\r\nexport class ADSR extends Node {\r\n  envelopeInput: Envelope;\r\n  minInput: Input;\r\n  maxInput: Input;\r\n  aInput: Input;\r\n  dInput: Input;\r\n  sInput: Input;\r\n  rInput: Input;\r\n\r\n  proxyParamNode: AudioWorkletNode;\r\n  proxyParam: AudioParam;\r\n\r\n  static DefaultState = { min: 0, max: 1, a: 0.4, d: 0.2, s: 0.6, r: 0.4, trigger: false };\r\n\r\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\r\n    super(flow, options.name || 'ADSR', options.position || new Vector(50, 50), options.width || 280,\r\n      [{ name: 'trigger', dataType: 'event' }],\r\n      [{ name: 'out', dataType: 'audio' }],\r\n      {\r\n        state: options.state ? { ...ADSR.DefaultState, ...options.state } : ADSR.DefaultState,\r\n        style: options.style || { rowHeight: 10, spacing: 15 },\r\n        terminalStyle: options.terminalStyle || {}\r\n      }\r\n    );\r\n\r\n    this.proxyParamNode = new AudioWorkletNode(\r\n      flow.flowConnect.audioContext,\r\n      'proxy-param',\r\n      { numberOfOutputs: 1, parameterData: { param: 0 } }\r\n    );\r\n    this.proxyParam = (this.proxyParamNode.parameters as Map<string, AudioParam>).get('param');\r\n    this.outputs[0].ref = this.proxyParamNode;\r\n    this.setMinMax();\r\n    this.state.s = clamp(this.state.s, 0, 1);\r\n\r\n    this.setupUI();\r\n\r\n    this.minInput.on('blur', this.setMinMax);\r\n    this.maxInput.on('blur', this.setMinMax);\r\n    this.aInput.on('blur', () => this.adsrChanged());\r\n    this.dInput.on('blur', () => this.adsrChanged());\r\n    this.sInput.on('blur', () => this.adsrChanged());\r\n    this.rInput.on('blur', () => this.adsrChanged());\r\n\r\n    this.inputs[0].on('event', () => {\r\n      this.state.trigger = !this.state.trigger;\r\n      let currTime = flow.flowConnect.audioContext.currentTime;\r\n      let { a, d, s, r } = this.state;\r\n      if (this.state.trigger) {\r\n        // Attack\r\n        this.proxyParam.cancelScheduledValues(0);\r\n        this.proxyParam.setValueAtTime(this.state.min, currTime);\r\n        this.proxyParam.linearRampToValueAtTime(1 * this.state.max, currTime + a);\r\n        this.proxyParam.linearRampToValueAtTime(denormalize(s, this.state.min, this.state.max), currTime + a + d);\r\n      } else {\r\n        // Release\r\n        this.proxyParam.cancelScheduledValues(0);\r\n        this.proxyParam.setValueAtTime(this.proxyParam.value, currTime);\r\n        this.proxyParam.linearRampToValueAtTime(this.state.min, currTime + r);\r\n      }\r\n    });\r\n\r\n    this.handleAudioConnections();\r\n  }\r\n  adsrChanged() {\r\n    this.state.s = clamp(this.state.s, 0, 1);\r\n    let { a, d, r } = this.state;\r\n    let totalDur = a + d + r;\r\n    this.envelopeInput.value = [\r\n      Vector.Zero(), new Vector(a / totalDur, 1), new Vector((a + d) / totalDur, this.state.s), new Vector(1, 0)\r\n    ];\r\n  }\r\n  stopAutomation() {\r\n    this.proxyParam.cancelScheduledValues(this.flow.flowConnect.audioContext.currentTime);\r\n  }\r\n  setMinMax() {\r\n    this.proxyParamNode.port.postMessage({\r\n      type: 'set-range',\r\n      value: { min: this.state.min, max: this.state.max }\r\n    });\r\n  }\r\n  setupUI() {\r\n    let { a: atck, d: dcay, r: rlse } = this.state;\r\n    let duration = atck + dcay + rlse;\r\n\r\n    this.envelopeInput = this.createEnvelope(145, [\r\n      Vector.Zero(), new Vector(atck / duration, 1), new Vector((atck + dcay) / duration, this.state.s), new Vector(1, 0)\r\n    ], { style: { pointColor: '#fcba03' } });\r\n    this.envelopeInput.disabled = true;\r\n\r\n    this.minInput = this.createInput({\r\n      propName: 'min', height: 20, style: { type: InputType.Number, grow: .5, step: 'any' }\r\n    });\r\n    this.maxInput = this.createInput({\r\n      propName: 'max', height: 20, style: { type: InputType.Number, grow: .5, step: 'any' }\r\n    });\r\n    this.aInput = this.createInput({ propName: 'a', height: 20, style: { type: InputType.Number, step: 'any', grow: .5, precision: 3 } });\r\n    this.dInput = this.createInput({ propName: 'd', height: 20, style: { type: InputType.Number, step: 'any', grow: .5, precision: 3 } });\r\n    this.sInput = this.createInput({ propName: 's', height: 20, style: { type: InputType.Number, step: 'any', grow: .5, precision: 3 } });\r\n    this.rInput = this.createInput({ propName: 'r', height: 20, style: { type: InputType.Number, step: 'any', grow: .5, precision: 3 } });\r\n\r\n    this.ui.append([\r\n      this.envelopeInput,\r\n      this.createHozLayout([\r\n        this.createLabel('Min'), this.minInput,\r\n        this.createLabel('Max'), this.maxInput\r\n      ], { style: { spacing: 5 } }),\r\n      this.createHozLayout([\r\n        this.createLabel('A'), this.aInput, this.createLabel('D'), this.dInput\r\n      ], { style: { spacing: 5 } }),\r\n      this.createHozLayout([\r\n        this.createLabel('S'), this.sInput, this.createLabel('R'), this.rInput\r\n      ], { style: { spacing: 5 } })\r\n    ]);\r\n  }\r\n  handleAudioConnections() {\r\n    // Handle actual webaudio node stuff\r\n    this.outputs[0].on('connect', (_inst, connector) => {\r\n      if (connector.end.ref instanceof AudioParam) {\r\n        // Need to do this else the value provided by the worklet node as param value is getting offset instead of overwrite\r\n        let offset = Math.max(0, connector.end.ref.minValue);\r\n        connector.end.ref.value = offset;\r\n        if (offset !== 0) {\r\n          this.proxyParamNode.port.postMessage({ type: 'set-offset', value: offset });\r\n        }\r\n      }\r\n      this.outputs[0].ref.connect(connector.end.ref);\r\n    });\r\n    this.outputs[0].on('disconnect', (_inst, _connector, _start, end) => {\r\n      this.stopAutomation();\r\n      this.outputs[0].ref.disconnect(end.ref);\r\n    });\r\n  }\r\n}\r\n","import { Flow } from \"../../core/flow\";\r\nimport { Vector } from \"../../core/vector\";\r\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\r\nimport { Node } from \"../../core/node\";\r\nimport { Source } from \"../../ui/index\";\r\n\r\nexport class AudioBufferSource extends Node {\r\n  fileInput: Source\r\n\r\n  static DefaultState: any = { file: null, buffer: null };\r\n\r\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\r\n    super(flow, options.name || 'AudioBuffer Source', options.position || new Vector(50, 50), options.width || 170,\r\n      [],\r\n      [{ name: 'buffer', dataType: 'audio-buffer' }],\r\n      {\r\n        state: options.state ? { ...AudioBufferSource.DefaultState, ...options.state } : AudioBufferSource.DefaultState,\r\n        style: options.style || { rowHeight: 10 },\r\n        terminalStyle: options.terminalStyle || {}\r\n      }\r\n    );\r\n\r\n    this.setupUI();\r\n\r\n    this.fileInput.on('change', () => this.processFile());\r\n    this.on('process', () => this.processFile());\r\n  }\r\n\r\n  async processFile() {\r\n    let file = this.state.file;\r\n    if (!file) return;\r\n\r\n    let cached = this.flow.flowConnect.arrayBufferCache.get(file.name + file.type);\r\n    if (!cached) {\r\n      cached = await file.arrayBuffer();\r\n      this.flow.flowConnect.arrayBufferCache.set(file.name + file.type, cached);\r\n    }\r\n    this.processArrayBuffer(cached);\r\n  }\r\n  async processArrayBuffer(arrayBuffer: ArrayBuffer) {\r\n    let cached = this.flow.flowConnect.audioBufferCache.get(arrayBuffer);\r\n    if (!cached) {\r\n      cached = await this.flow.flowConnect.audioContext.decodeAudioData(arrayBuffer);\r\n      this.flow.flowConnect.audioBufferCache.set(arrayBuffer, cached);\r\n    }\r\n    this.state.buffer = cached;\r\n    this.setOutputs(0, this.state.buffer);\r\n  }\r\n  setupUI() {\r\n    this.fileInput = this.createSource({ height: 20, propName: 'file', style: { grow: 1 } });\r\n    this.ui.append(this.createHozLayout([\r\n      this.createLabel('File'), this.fileInput\r\n    ], { style: { spacing: 20 } }));\r\n  }\r\n}\r\n","import { Flow } from \"../../core/flow\";\r\nimport { Vector } from \"../../core/vector\";\r\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\r\nimport { denormalize } from \"../../utils/utils\";\r\nimport { Node } from \"../../core/node\";\r\nimport { InputType, Input, Envelope, Toggle } from \"../../ui/index\";\r\n\r\nexport class Automate extends Node {\r\n  envelopeInput: Envelope;\r\n  minInput: Input;\r\n  maxInput: Input;\r\n  durationInput: Input;\r\n  autoToggle: Toggle;\r\n  loopToggle: Toggle;\r\n\r\n  proxyParamNode: AudioWorkletNode;\r\n  proxyParam: AudioParam;\r\n\r\n  static DefaultState = { min: 0, max: 1, value: 0.5, duration: 1, auto: true, loop: false };\r\n\r\n  timerId: number;\r\n  scheduleEndTime: number;\r\n  finiteLoop = 2;            // how much iterations to schedule in the future\r\n\r\n  constructor(flow: Flow, options: NodeCreatorOptions = {}, envelope: Array<Vector> = [new Vector(.2, .5), new Vector(.5, .8), new Vector(.9, .2)]) {\r\n    super(flow, options.name || 'Automate', options.position || new Vector(50, 50), options.width || 280,\r\n      [{ name: 'trigger', dataType: 'event' }],\r\n      [{ name: 'out', dataType: 'audio' }],\r\n      {\r\n        state: options.state ? { ...Automate.DefaultState, ...options.state } : Automate.DefaultState,\r\n        style: options.style || { rowHeight: 10, spacing: 15 },\r\n        terminalStyle: options.terminalStyle || {}\r\n      }\r\n    );\r\n\r\n    this.proxyParamNode = new AudioWorkletNode(\r\n      flow.flowConnect.audioContext,\r\n      'proxy-param',\r\n      { numberOfOutputs: 1, parameterData: { param: this.state.value } }\r\n    );\r\n    this.proxyParam = (this.proxyParamNode.parameters as Map<string, AudioParam>).get('param');\r\n    this.setMinMax();\r\n    this.outputs[0].ref = this.proxyParamNode;\r\n\r\n    this.setupUI(envelope);\r\n\r\n    this.minInput.on('blur', () => {\r\n      this.setMinMax();\r\n      this.startAutomation();\r\n    });\r\n    this.maxInput.on('blur', () => {\r\n      this.setMinMax();\r\n      this.startAutomation();\r\n    });\r\n\r\n    this.envelopeInput.on('change', () => this.startAutomation());\r\n    this.durationInput.on('change', () => this.startAutomation());\r\n    this.loopToggle.on('change', () => this.startAutomation());\r\n    this.inputs[0].on('event', () => this.startAutomation());\r\n\r\n    flow.flowConnect.on('start', () => this.state.auto && this.startAutomation());\r\n    flow.flowConnect.on('stop', () => this.stopAutomation());\r\n\r\n    this.handleAudioConnections();\r\n  }\r\n\r\n  startAutomation() {\r\n    // Stop any previously scheduled automations\r\n    this.stopAutomation();\r\n\r\n    // Convert normalized to actual values (x=time, y=param value)\r\n    let values = this.envelopeInput.value;\r\n    for (let currVal of values) {\r\n      currVal.x = currVal.x * this.state.duration;\r\n      currVal.y = denormalize(currVal.y, this.state.min, this.state.max);\r\n    }\r\n\r\n    let automateDuration = values[values.length - 1].x;\r\n    if (this.state.loop) {\r\n      // Schedule far in the future hoping that even if main thread blocks it recovers by the time scheduled automations are finished\r\n      this.schedule(values, this.flow.flowConnect.audioContext.currentTime, this.finiteLoop);\r\n      this.timerId = window.setInterval(() => {\r\n        // If web audio clock reaches final iteration of scheduled automations, then reschedule another finiteLoop iterations\r\n        if (this.flow.flowConnect.audioContext.currentTime > this.scheduleEndTime - automateDuration) {\r\n          this.schedule(values, this.scheduleEndTime, this.finiteLoop);\r\n        }\r\n      }, 50);\r\n    } else {\r\n      this.schedule(values, this.flow.flowConnect.audioContext.currentTime, 1);\r\n    }\r\n  }\r\n  stopAutomation() {\r\n    this.proxyParam.cancelScheduledValues(this.flow.flowConnect.audioContext.currentTime);\r\n    clearInterval(this.timerId);\r\n  }\r\n  schedule(values: Vector[], time: number, iterations: number) {\r\n    for (let i = 0; i < iterations; i += 1) {\r\n      values.forEach(value => {\r\n        this.proxyParam.linearRampToValueAtTime(value.y, time + value.x)\r\n      });\r\n    }\r\n    this.scheduleEndTime = time + values[values.length - 1].x;\r\n  }\r\n  setMinMax() {\r\n    this.proxyParamNode.port.postMessage({ type: 'set-range', value: { min: this.state.min, max: this.state.max } });\r\n  }\r\n  setupUI(envelope: Vector[]) {\r\n    this.envelopeInput = this.createEnvelope(145, envelope, { input: true, output: true });\r\n    this.minInput = this.createInput({\r\n      propName: 'min', height: 20, style: { type: InputType.Number, grow: .5, step: 'any' }\r\n    });\r\n    this.maxInput = this.createInput({\r\n      propName: 'max', height: 20, style: { type: InputType.Number, grow: .5, step: 'any' }\r\n    });\r\n    this.durationInput = this.createInput({\r\n      propName: 'duration', height: 20, style: { type: InputType.Number, step: 'any', grow: .5 }\r\n    });\r\n    this.autoToggle = this.createToggle({ propName: 'auto' });\r\n    this.loopToggle = this.createToggle({ propName: 'loop' });\r\n\r\n    this.ui.append([\r\n      this.envelopeInput,\r\n      this.createHozLayout([\r\n        this.createLabel('Min'), this.minInput,\r\n        this.createLabel('Max'), this.maxInput\r\n      ], { style: { spacing: 5 } }),\r\n      this.createHozLayout([\r\n        this.createLabel('Duration (seconds)', { style: { grow: .5 } }),\r\n        this.durationInput\r\n      ], { style: { spacing: 5 } }),\r\n      this.createHozLayout([\r\n        this.createHozLayout([this.createLabel('Auto Start ?', { height: 20 }), this.autoToggle], { style: { spacing: 5, grow: .5 } }),\r\n        this.createHozLayout([this.createLabel('Loop ?', { height: 20 }), this.loopToggle], { style: { spacing: 5, grow: .5 } })\r\n      ]),\r\n    ]);\r\n  }\r\n  handleAudioConnections() {\r\n    // Handle actual webaudio node stuff\r\n    this.outputs[0].on('connect', (_inst, connector) => {\r\n      if (connector.end.ref instanceof AudioParam) {\r\n        // Need to do this else the value provided by the worklet node as param value is getting offset instead of overwrite\r\n        let offset = Math.max(0, connector.end.ref.minValue);\r\n        connector.end.ref.value = offset;\r\n        if (offset !== 0) {\r\n          this.proxyParamNode.port.postMessage({ type: 'set-offset', value: offset });\r\n        }\r\n      }\r\n      this.outputs[0].ref.connect(connector.end.ref);\r\n      this.startAutomation();\r\n    });\r\n    this.outputs[0].on('disconnect', (_inst, _connector, _start, end) => {\r\n      this.stopAutomation();\r\n      this.outputs[0].ref.disconnect(end.ref);\r\n    });\r\n  }\r\n}\r\n","import { Flow } from \"../../core/flow\";\r\nimport { Vector } from \"../../core/vector\";\r\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\r\nimport { Node } from \"../../core/node\";\r\nimport { Select, Toggle } from \"../../ui/index\";\r\n\r\nexport class BiquadFilter extends Node {\r\n  typeSelect: Select;\r\n  bypassToggle: Toggle\r\n\r\n  inGain: GainNode;\r\n  outGain: GainNode;\r\n  biquadFilter: BiquadFilterNode;\r\n\r\n  static DefaultState = { filterType: 'lowpass', bypass: false };\r\n\r\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\r\n    super(flow, options.name || 'Biquad Filter', options.position || new Vector(50, 50), options.width || 230,\r\n      [\r\n        { name: 'in', dataType: 'audio' }, { name: 'gain', dataType: 'audioparam' },\r\n        { name: 'Q', dataType: 'audioparam' }, { name: 'frequency', dataType: 'audioparam' },\r\n        { name: 'detune', dataType: 'audioparam' }\r\n      ],\r\n      [{ name: 'out', dataType: 'audio' }],\r\n      {\r\n        state: options.state ? { ...BiquadFilter.DefaultState, ...options.state } : BiquadFilter.DefaultState,\r\n        style: options.style || { rowHeight: 10, spacing: 10 },\r\n        terminalStyle: options.terminalStyle || {}\r\n      }\r\n    );\r\n\r\n    this.inGain = flow.flowConnect.audioContext.createGain();\r\n    this.outGain = flow.flowConnect.audioContext.createGain();\r\n    this.inputs[0].ref = this.inGain;\r\n    this.outputs[0].ref = this.outGain;\r\n\r\n    this.biquadFilter = flow.flowConnect.audioContext.createBiquadFilter();\r\n    this.biquadFilter.gain.value = 0;\r\n    this.biquadFilter.Q.value = 1;\r\n    this.biquadFilter.frequency.value = 800;\r\n    this.biquadFilter.detune.value = 0;\r\n    this.biquadFilter.type = this.state.filterType;\r\n\r\n    this.inputs[1].ref = this.biquadFilter.gain;\r\n    this.inputs[2].ref = this.biquadFilter.Q;\r\n    this.inputs[3].ref = this.biquadFilter.frequency;\r\n    this.inputs[4].ref = this.biquadFilter.detune;\r\n    this.inputs[1].on('data', (_, data) => typeof data === 'number' && (this.inputs[1].ref.value = data));\r\n    this.inputs[2].on('data', (_, data) => typeof data === 'number' && (this.inputs[2].ref.value = data));\r\n    this.inputs[3].on('data', (_, data) => typeof data === 'number' && (this.inputs[3].ref.value = data));\r\n    this.inputs[4].on('data', (_, data) => typeof data === 'number' && (this.inputs[4].ref.value = data));\r\n\r\n    this.setBypass();\r\n    this.setupUI();\r\n\r\n    this.typeSelect.on('change', () => {\r\n      this.biquadFilter.type = this.state.filterType\r\n    });\r\n    this.watch('bypass', () => this.setBypass());\r\n\r\n    this.handleAudioConnections();\r\n  }\r\n\r\n  setBypass() {\r\n    if (!this.state.bypass) {\r\n      this.inGain.disconnect();\r\n      this.inGain.connect(this.biquadFilter);\r\n      this.biquadFilter.connect(this.outGain);\r\n    } else {\r\n      this.biquadFilter.disconnect();\r\n      this.inGain.disconnect();\r\n      this.inGain.connect(this.outGain);\r\n    }\r\n  }\r\n  setupUI() {\r\n    this.typeSelect = this.createSelect(\r\n      ['lowpass', 'highpass', 'bandpass', 'lowshelf', 'highshelf', 'peaking', 'notch', 'allpass'],\r\n      { propName: 'filterType', height: 15, style: { grow: .7 } }\r\n    );\r\n    this.bypassToggle = this.createToggle({ propName: 'bypass', style: { grow: .1 } });\r\n    this.ui.append([\r\n      this.createHozLayout([this.createLabel('Type', { style: { grow: .3 } }), this.typeSelect], { style: { spacing: 5 } }),\r\n      this.createHozLayout([this.createLabel('Bypass ?', { style: { grow: .3 } }), this.bypassToggle], { style: { spacing: 5 } })\r\n    ]);\r\n  }\r\n  handleAudioConnections() {\r\n    // Handle actual webaudio node stuff\r\n    this.outputs[0].on('connect', (_, connector) => this.outputs[0].ref.connect(connector.end.ref));\r\n    this.outputs[0].on('disconnect', (_inst, _connector, _start, end) => this.outputs[0].ref.disconnect(end.ref));\r\n  }\r\n}\r\n","import { Flow } from \"../../core/flow\";\r\nimport { Vector } from \"../../core/vector\";\r\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\r\nimport { clamp } from \"../../utils/utils\";\r\nimport { Node } from \"../../core/node\";\r\nimport { InputType, Input, Slider, Toggle } from \"../../ui/index\";\r\n\r\nexport class BitcrusherEffect extends Node {\r\n  bitsSlider: Slider;\r\n  bitsInput: Input;\r\n  normFreqSlider: Slider;\r\n  normFreqInput: Input;\r\n  bypassToggle: Toggle;\r\n\r\n  inGain: GainNode;\r\n  outGain: GainNode;\r\n  bitcrusher: AudioWorkletNode;\r\n\r\n  static DefaultState = { bits: 4, normFreq: 0.1, bypass: false };\r\n\r\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\r\n    super(flow, options.name || 'Bitcrusher Effect', options.position || new Vector(50, 50), options.width || 230,\r\n      [{ name: 'in', dataType: 'audio' }],\r\n      [{ name: 'out', dataType: 'audio' }],\r\n      {\r\n        state: options.state ? { ...BitcrusherEffect.DefaultState, ...options.state } : BitcrusherEffect.DefaultState,\r\n        style: options.style || { rowHeight: 10, spacing: 10 },\r\n        terminalStyle: options.terminalStyle || {}\r\n      }\r\n    );\r\n\r\n    this.inGain = flow.flowConnect.audioContext.createGain();\r\n    this.outGain = flow.flowConnect.audioContext.createGain();\r\n    this.inputs[0].ref = this.inGain;\r\n    this.outputs[0].ref = this.outGain;\r\n\r\n    this.bitcrusher = new AudioWorkletNode(flow.flowConnect.audioContext, 'bitcrusher-effect', {\r\n      numberOfInputs: 1, numberOfOutputs: 1, processorOptions: { bufferSize: 4096 }\r\n    });\r\n\r\n    this.setBypass();\r\n    this.setupUI();\r\n\r\n    this.bitsSlider.on('change', () => this.paramsChanged());\r\n    this.normFreqSlider.on('change', () => this.paramsChanged());\r\n    this.bitsInput.on('change', () => this.paramsChanged());\r\n    this.normFreqInput.on('change', () => this.paramsChanged());\r\n    this.watch('bypass', () => this.setBypass());\r\n    this.watch('bits', () => {\r\n      if (this.state.bits < 1 || this.state.bits > 16 || !Number.isInteger(this.state.bits)) {\r\n        this.state.bits = clamp(Math.floor(this.state.bits), 1, 16);\r\n      }\r\n    });\r\n    this.watch('normFreq', () => {\r\n      if (this.state.normFreq < 0 || this.state.normFreq > 1) this.state.normFreq = clamp(this.state.normFreq, 0, 1);\r\n    });\r\n\r\n    flow.flowConnect.on('start', () => this.paramsChanged());\r\n\r\n    this.handleAudioConnections();\r\n  }\r\n\r\n  setBypass() {\r\n    if (!this.state.bypass) {\r\n      this.inGain.disconnect();\r\n      this.inGain.connect(this.bitcrusher);\r\n      this.bitcrusher.connect(this.outGain);\r\n    } else {\r\n      this.bitcrusher.disconnect();\r\n      this.inGain.disconnect();\r\n      this.inGain.connect(this.outGain);\r\n    }\r\n  }\r\n  paramsChanged() {\r\n    this.bitcrusher.port.postMessage({ bits: this.state.bits, normFreq: this.state.normFreq });\r\n  }\r\n  setupUI() {\r\n    this.bitsSlider = this.createSlider(1, 16, { height: 10, propName: 'bits', style: { grow: .5 } });\r\n    this.normFreqSlider = this.createSlider(0, 1, { height: 10, propName: 'normFreq', style: { grow: .5 } });\r\n    this.bitsInput = this.createInput({ propName: 'bits', height: 20, style: { type: InputType.Number, grow: .2 } });\r\n    this.normFreqInput = this.createInput({ propName: 'normFreq', height: 20, style: { type: InputType.Number, grow: .4, precision: 2 } });\r\n    this.bypassToggle = this.createToggle({ propName: 'bypass', style: { grow: .1 } });\r\n    this.ui.append([\r\n      this.createHozLayout([this.createLabel('Bits', { style: { grow: .3 } }), this.bitsSlider, this.bitsInput], { style: { spacing: 5 } }),\r\n      this.createHozLayout([this.createLabel('Norm Freq.', { style: { grow: .3 } }), this.normFreqSlider, this.normFreqInput], { style: { spacing: 5 } }),\r\n      this.createHozLayout([this.createLabel('Bypass ?', { style: { grow: .3 } }), this.bypassToggle], { style: { spacing: 5 } })\r\n    ]);\r\n  }\r\n  handleAudioConnections() {\r\n    // Handle actual webaudio node stuff\r\n    this.outputs[0].on('connect', (_, connector) => this.outputs[0].ref.connect(connector.end.ref));\r\n    this.outputs[0].on('disconnect', (_inst, _connector, _start, end) => this.outputs[0].ref.disconnect(end.ref));\r\n  }\r\n}\r\n","import { Flow } from \"../../core/flow\";\r\nimport { Vector } from \"../../core/vector\";\r\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\r\nimport { Terminal, TerminalType } from \"../../core/terminal\";\r\nimport { Node } from \"../../core/node\";\r\nimport { Button } from \"../../ui/index\";\r\n\r\nexport class ChannelMerger extends Node {\r\n  addChannelButton: Button\r\n\r\n  merger: ChannelMergerNode;\r\n\r\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\r\n    super(flow, options.name || 'Channel Merger', options.position || new Vector(50, 50), options.width || 160,\r\n      [{ name: 'Channel 1', dataType: 'audio' }, { name: 'Channel 2', dataType: 'audio' }],\r\n      [{ name: 'out', dataType: 'audio' }],\r\n      {\r\n        state: options.state || {},\r\n        style: options.style || { rowHeight: 10, spacing: 15 },\r\n        terminalStyle: options.terminalStyle || {}\r\n      }\r\n    );\r\n\r\n    this.inputs[0].ref = flow.flowConnect.audioContext.createGain();\r\n    this.inputs[1].ref = flow.flowConnect.audioContext.createGain();\r\n    this.outputs[0].ref = flow.flowConnect.audioContext.createGain();\r\n    this.merger = flow.flowConnect.audioContext.createChannelMerger(2);\r\n\r\n    this.inputs[0].ref.connect(this.merger, 0, 0);\r\n    this.inputs[1].ref.connect(this.merger, 0, 1);\r\n    this.merger.connect(this.outputs[0].ref);\r\n\r\n    this.setupUI();\r\n\r\n    this.addChannelButton.on('click', () => {\r\n      this.merger.disconnect();\r\n      this.inputs.forEach(input => input.ref.disconnect());\r\n      this.merger = flow.flowConnect.audioContext.createChannelMerger(this.inputs.length + 1);\r\n\r\n      let newTerm = new Terminal(this, TerminalType.IN, 'audio', 'Channel ' + (this.inputs.length + 1));\r\n      newTerm.ref = flow.flowConnect.audioContext.createGain();\r\n      this.addTerminal(newTerm);\r\n\r\n      this.inputs.forEach((input, index) => input.ref.connect(this.merger, 0, index));\r\n      this.merger.connect(this.outputs[0].ref);\r\n    });\r\n\r\n    this.handleAudioConnections();\r\n  }\r\n\r\n  setupUI() {\r\n    this.addChannelButton = this.createButton('Add In Channel', { height: 20 });\r\n    this.ui.append(this.addChannelButton);\r\n  }\r\n  handleAudioConnections() {\r\n    // Handle actual webaudio node stuff\r\n    this.outputs[0].on('connect', (_, connector) => this.outputs[0].ref.connect(connector.end.ref));\r\n    this.outputs[0].on('disconnect', (_inst, _connector, _start, end) => this.outputs[0].ref.disconnect(end.ref));\r\n  }\r\n}\r\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { Terminal, TerminalType } from \"../../core/terminal\";\nimport { Node } from \"../../core/node\";\n\nexport class ChannelSplitter extends Node {\n  splitter: ChannelSplitterNode;\n\n  oldNoOfChannels = 1;\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'Channel Splitter', options.position || new Vector(50, 50), options.width || 160,\n      [{ name: 'in', dataType: 'audio' }],\n      [{ name: 'Channel 1', dataType: 'audio' }],\n      {\n        state: options.state || {},\n        style: options.style || { rowHeight: 10, spacing: 15 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.inputs[0].ref = flow.flowConnect.audioContext.createGain();\n    this.outputs[0].ref = flow.flowConnect.audioContext.createGain();\n    this.outputs[0].ref.channelCountMode = 'explicit';\n\n    this.on('channel-count-change', (newNoOfChannels) => this.checkChannels(newNoOfChannels));\n\n    this.handleAudioConnections();\n  }\n\n  checkChannels(newNoOfChannels: number) {\n    if (this.oldNoOfChannels === newNoOfChannels) return;\n\n    this.splitter && this.splitter.disconnect();\n    this.inputs[0].ref.disconnect();\n\n    let splitter = this.flow.flowConnect.audioContext.createChannelSplitter(newNoOfChannels);\n    this.inputs[0].ref.connect(splitter);\n\n    let terminalsToRemove = [];\n    for (let i = 0; i < Math.max(newNoOfChannels, this.oldNoOfChannels); i += 1) {\n      if (i < newNoOfChannels) {\n        if (i < this.oldNoOfChannels) {\n          splitter.connect(this.outputs[i].ref, i);\n        } else {\n          let newTerminal = new Terminal(this, TerminalType.OUT, 'audio', 'Channel ' + (i + 1));\n          newTerminal.ref = this.flow.flowConnect.audioContext.createGain();\n          newTerminal.ref.channelCountMode = 'explicit';\n          this.addTerminal(newTerminal);\n          this.outputs[i].on('connect', (_inst, cntr) => this.outputs[i].ref.connect(cntr.end.ref));\n          this.outputs[i].on('disconnect', (_inst, _cntr, _start, end) => this.outputs[i].ref.disconnect(end.ref));\n          splitter.connect(this.outputs[i].ref, i);\n        }\n      } else {\n        terminalsToRemove.push(this.outputs[i]);\n      }\n    }\n    terminalsToRemove.forEach(term => {\n      term.ref.disconnect();\n      this.removeTerminal(term);\n    });\n\n    this.oldNoOfChannels = newNoOfChannels;\n    this.splitter = splitter;\n  }\n  handleAudioConnections() {\n    // Handle actual webaudio node stuff\n    this.outputs[0].on('connect', (_inst, cntr) => this.outputs[0].ref.connect(cntr.end.ref));\n    this.outputs[0].on('disconnect', (_inst, _cntr, _start, end) => this.outputs[0].ref.disconnect(end.ref));\n  }\n}\n","import { Flow } from \"../../core/flow\";\r\nimport { Vector } from \"../../core/vector\";\r\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\r\nimport { clamp } from \"../../utils/utils\";\r\nimport { Node } from '../../core/node';\r\nimport { InputType, Input, Slider, Toggle } from \"../../ui/index\";\r\nlet Tuna = require('../../lib/tuna.js');\r\n\r\nexport class ChorusEffect extends Node {\r\n  delaySlider: Slider;\r\n  delayInput: Input;\r\n  feedbackSlider: Slider;\r\n  feedbackInput: Input;\r\n  rateSlider: Slider;\r\n  rateInput: Input;\r\n  bypassToggle: Toggle;\r\n  depthSlider: Slider;\r\n  depthInput: Input;\r\n  chorus: any;\r\n\r\n  static DefaultState = { feedback: 0.4, delay: 0.0045, depth: 0.7, rate: 0.01, bypass: false };\r\n\r\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\r\n    super(\r\n      flow, options.name || 'Chorus Effect',\r\n      options.position || new Vector(50, 50),\r\n      options.width || 230,\r\n      [{ name: 'in', dataType: 'audio' }],\r\n      [{ name: 'out', dataType: 'audio' }],\r\n      {\r\n        style: options.style || { rowHeight: 10, spacing: 10 },\r\n        terminalStyle: options.terminalStyle || {},\r\n        state: options.state ? { ...ChorusEffect.DefaultState, ...options.state } : ChorusEffect.DefaultState\r\n      }\r\n    )\r\n\r\n    if (!(window as any).__tuna__) (window as any).__tuna__ = new Tuna(flow.flowConnect.audioContext);\r\n\r\n    this.chorus = new (window as any).__tuna__.Chorus();\r\n    this.inputs[0].ref = this.outputs[0].ref = this.chorus;\r\n    this.setupUI();\r\n    Object.assign(this.chorus, {\r\n      delay: this.state.delay,\r\n      depth: this.state.depth,\r\n      feedback: this.state.feedback,\r\n      rate: this.state.rate\r\n    });\r\n\r\n    this.watch('delay', (_oldVal, newVal) => {\r\n      if (newVal < 0 || newVal > 1) this.state.delay = clamp(newVal, 0, 1);\r\n      this.chorus.delay = this.state.delay;\r\n    });\r\n    this.watch('depth', (_oldVal, newVal) => {\r\n      if (newVal < 0 || newVal > 1) this.state.depth = clamp(newVal, 0, 1);\r\n      this.chorus.depth = this.state.depth;\r\n    });\r\n    this.watch('feedback', (_oldVal, newVal) => {\r\n      if (newVal < 0 || newVal > 0.95) this.state.feedback = clamp(newVal, 0, 0.95);\r\n      this.chorus.feedback = this.state.feedback;\r\n    });\r\n    this.watch('rate', (_oldVal, newVal) => {\r\n      if (newVal < 0 || newVal > 0.1) this.state.rate = clamp(newVal, 0, 0.1);\r\n      this.chorus.rate = this.state.rate;\r\n    });\r\n    this.watch('bypass', (_oldVal, newVal) => this.chorus.bypass = newVal);\r\n\r\n    this.handleAudioConnections();\r\n  }\r\n\r\n  setupUI() {\r\n    this.delaySlider = this.createSlider(0, 1, { height: 10, propName: 'delay', style: { grow: .5 } });\r\n    this.delayInput = this.createInput({ propName: 'delay', height: 20, style: { type: InputType.Number, grow: .2, precision: 4 } });\r\n    this.depthSlider = this.createSlider(0, 1, { height: 10, propName: 'depth', style: { grow: .5 } });\r\n    this.depthInput = this.createInput({ propName: 'depth', height: 20, style: { type: InputType.Number, grow: .2, precision: 2 } });\r\n    this.feedbackSlider = this.createSlider(0, 0.95, { height: 10, propName: 'feedback', style: { grow: .5 } });\r\n    this.feedbackInput = this.createInput({ propName: 'feedback', height: 20, style: { type: InputType.Number, grow: .2, precision: 2 } });\r\n    this.rateSlider = this.createSlider(0, 0.1, { height: 10, propName: 'rate', style: { grow: .5 } });\r\n    this.rateInput = this.createInput({ propName: 'rate', height: 20, style: { type: InputType.Number, grow: .2, precision: 2 } });\r\n    this.bypassToggle = this.createToggle({ propName: 'bypass', style: { grow: .1 } });\r\n    this.ui.append([\r\n      this.createHozLayout([this.createLabel('Delay', { style: { grow: .3 } }), this.delaySlider, this.delayInput], { style: { spacing: 5 } }),\r\n      this.createHozLayout([this.createLabel('Depth', { style: { grow: .3 } }), this.depthSlider, this.depthInput], { style: { spacing: 5 } }),\r\n      this.createHozLayout([this.createLabel('Feedback', { style: { grow: .3 } }), this.feedbackSlider, this.feedbackInput], { style: { spacing: 5 } }),\r\n      this.createHozLayout([this.createLabel('Rate', { style: { grow: .3 } }), this.rateSlider, this.rateInput], { style: { spacing: 5 } }),\r\n      this.createHozLayout([this.createLabel('Bypass ?', { style: { grow: .3 } }), this.bypassToggle], { style: { spacing: 5 } })\r\n    ]);\r\n  }\r\n  handleAudioConnections() {\r\n    this.outputs[0].on('connect', (_inst, connector) => this.outputs[0].ref.connect(connector.end.ref));\r\n    this.outputs[0].on('disconnect', (_inst, _connector, _start, end) => this.outputs[0].ref.disconnect(end.ref));\r\n  }\r\n}\r\n","import { Flow } from \"../../core/flow\";\r\nimport { Vector } from \"../../core/vector\";\r\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\r\nimport { Node } from \"../../core/node\";\r\nimport { Toggle } from \"../../ui/index\";\r\n\r\nexport class Convolver extends Node {\r\n  bypassToggle: Toggle\r\n\r\n  inGain: GainNode;\r\n  outGain: GainNode;\r\n  convolver: ConvolverNode;\r\n\r\n  static DefaultState = { bypass: false };\r\n\r\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\r\n    super(flow, options.name || 'Convolver', options.position || new Vector(50, 50), options.width || 160,\r\n      [{ name: 'in', dataType: 'audio' }, { name: 'impulse', dataType: 'audio-buffer' }],\r\n      [{ name: 'out', dataType: 'audio' }],\r\n      {\r\n        state: options.state ? { ...Convolver.DefaultState, ...options.state } : Convolver.DefaultState,\r\n        style: options.style || { rowHeight: 10, spacing: 10 },\r\n        terminalStyle: options.terminalStyle || {}\r\n      }\r\n    );\r\n\r\n    this.inGain = flow.flowConnect.audioContext.createGain();\r\n    this.outGain = flow.flowConnect.audioContext.createGain();\r\n    this.convolver = flow.flowConnect.audioContext.createConvolver();\r\n\r\n    this.inputs[0].ref = this.inGain;\r\n    this.outputs[0].ref = this.outGain;\r\n\r\n    this.setBypass();\r\n\r\n    this.setupUI();\r\n\r\n    this.watch('bypass', () => this.setBypass());\r\n    this.inputs[1].on('data', (_inst, data) => {\r\n      this.convolver.buffer = data;\r\n    });\r\n\r\n    this.handleAudioConnections();\r\n  }\r\n  setBypass() {\r\n    if (!this.state.bypass) {\r\n      this.inGain.disconnect();\r\n      this.inGain.connect(this.convolver);\r\n      this.convolver.connect(this.outGain);\r\n    } else {\r\n      this.inGain.disconnect();\r\n      this.convolver.disconnect();\r\n      this.inGain.connect(this.outGain);\r\n    }\r\n  }\r\n  setupUI() {\r\n    this.bypassToggle = this.createToggle({ propName: 'bypass', style: { grow: .25 } });\r\n    this.ui.append([\r\n      this.createHozLayout([this.createLabel('Bypass ?'), this.bypassToggle], { style: { spacing: 5 } })\r\n    ]);\r\n  }\r\n  handleAudioConnections() {\r\n    // Handle actual webaudio node stuff\r\n    this.outputs[0].on('connect', (_, connector) => this.outputs[0].ref.connect(connector.end.ref));\r\n    this.outputs[0].on('disconnect', (_inst, _connector, _start, end) => this.outputs[0].ref.disconnect(end.ref));\r\n  }\r\n}\r\n","import { Flow, FlowState } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { Node } from \"../../core/node\";\n\nexport class Debug extends Node {\n  inGain: GainNode;\n  outGain: GainNode;\n  debugNode: AudioWorkletNode;\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'Debug', options.position || new Vector(50, 50), options.width || 120,\n      [{ name: 'in', dataType: 'audio' }],\n      [{ name: 'out', dataType: 'audio' }, { name: 'debug', dataType: 'any' }],\n      {\n        state: options.state || {},\n        style: options.style || { rowHeight: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.inGain = flow.flowConnect.audioContext.createGain();\n    this.outGain = flow.flowConnect.audioContext.createGain();\n    this.inputs[0].ref = this.inGain;\n    this.outputs[0].ref = this.outGain;\n\n    this.debugNode = new AudioWorkletNode(flow.flowConnect.audioContext, 'debug', { numberOfInputs: 1, numberOfOutputs: 1 });\n    this.debugNode.port.onmessage = (e: any) => {\n      if (flow.state !== FlowState.Stopped) this.setOutputs(1, e.data);\n    }\n    this.inputs[0].ref.connect(this.debugNode);\n    this.debugNode.connect(this.outputs[0].ref);\n\n    this.handleAudioConnections();\n  }\n\n  handleAudioConnections() {\n    // Handle actual webaudio node stuff\n    this.outputs[0].on('connect', (_, connector) => this.outputs[0].ref.connect(connector.end.ref));\n    this.outputs[0].on('disconnect', (_inst, _connector, _start, end) => this.outputs[0].ref.disconnect(end.ref));\n  }\n}\n","import { Flow } from \"../../core/flow\";\r\nimport { Vector } from \"../../core/vector\";\r\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\r\nimport { clamp } from \"../../utils/utils\";\r\nimport { Node } from \"../../core/node\";\r\nimport { InputType, Slider } from \"../../ui/index\";\r\n\r\nexport class DelayEffect extends Node {\r\n  delaySlider: Slider;\r\n  feedbackSlider: Slider;\r\n  cutoffSlider: Slider;\r\n  drySlider: Slider;\r\n  wetSlider: Slider;\r\n\r\n  inGain: GainNode;\r\n  outGain: GainNode;\r\n  dryGain: GainNode;\r\n  wetGain: GainNode;\r\n  filter: BiquadFilterNode;\r\n  delay: DelayNode;\r\n  feedbackNode: GainNode;\r\n\r\n  static DefaultState = { feedback: 0.45, cutoff: 20000, wet: 0.5, dry: 1, delayTime: 100, bypass: false };\r\n\r\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\r\n    super(flow, options.name || 'Delay', options.position || new Vector(50, 50), options.width || 230,\r\n      [{ name: 'in', dataType: 'audio' }],\r\n      [{ name: 'out', dataType: 'audio' }],\r\n      {\r\n        state: options.state ? { ...DelayEffect.DefaultState, ...options.state } : DelayEffect.DefaultState,\r\n        style: options.style || { rowHeight: 10, spacing: 10 },\r\n        terminalStyle: options.terminalStyle || {}\r\n      }\r\n    );\r\n\r\n    this.inGain = flow.flowConnect.audioContext.createGain();\r\n    this.outGain = flow.flowConnect.audioContext.createGain();\r\n    this.dryGain = flow.flowConnect.audioContext.createGain();\r\n    this.wetGain = flow.flowConnect.audioContext.createGain();\r\n    this.filter = flow.flowConnect.audioContext.createBiquadFilter();\r\n    this.delay = flow.flowConnect.audioContext.createDelay(10);\r\n    this.feedbackNode = flow.flowConnect.audioContext.createGain();\r\n    this.state.filterType = 'lowpass';\r\n\r\n    this.delay.delayTime.value = this.state.delayTime / 1000;\r\n    this.feedbackNode.gain.value = this.state.feedback;\r\n    this.filter.frequency.value = this.state.cutoff;\r\n    this.wetGain.gain.value = this.state.wet;\r\n    this.dryGain.gain.value = this.state.dry;\r\n\r\n    this.inputs[0].ref = this.inGain;\r\n    this.outputs[0].ref = this.outGain;\r\n\r\n    this.delay.connect(this.filter);\r\n    this.filter.connect(this.feedbackNode);\r\n    this.feedbackNode.connect(this.delay);\r\n    this.feedbackNode.connect(this.wetGain);\r\n\r\n    this.setBypass();\r\n\r\n    this.setupUI();\r\n\r\n    let delayChanged = () => this.delay.delayTime.value = this.state.delayTime / 1000;\r\n    this.delaySlider.on('change', delayChanged);\r\n    this.watch('delayTime', () => {\r\n      if (this.state.delayTime < 10 || this.state.delayTime > 10000) {\r\n        this.state.delayTime = clamp(this.state.delayTime, 10, 10000);\r\n        delayChanged();\r\n      }\r\n    });\r\n    let feedbackChanged = () => this.feedbackNode.gain.setTargetAtTime(this.state.feedback, flow.flowConnect.audioContext.currentTime, 0.01);\r\n    this.feedbackSlider.on('change', feedbackChanged);\r\n    this.watch('feedback', () => {\r\n      if (this.state.feedback < 0 || this.state.feedback > 0.9) {\r\n        this.state.feedback = clamp(this.state.feedback, 0, 0.9);\r\n        feedbackChanged();\r\n      }\r\n    });\r\n    let cutoffChanged = () => this.filter.frequency.setTargetAtTime(this.state.cutoff, flow.flowConnect.audioContext.currentTime, 0.01);\r\n    this.cutoffSlider.on('change', cutoffChanged);\r\n    this.watch('cutoff', () => {\r\n      if (this.state.cutoff < 20 || this.state.cutoff > 20000) {\r\n        this.state.cutoff = clamp(this.state.cutoff, 20, 20000);\r\n        cutoffChanged();\r\n      }\r\n    });\r\n    let wetChanged = () => this.wetGain.gain.setTargetAtTime(this.state.wet, flow.flowConnect.audioContext.currentTime, 0.01);\r\n    this.wetSlider.on('change', wetChanged);\r\n    this.watch('wet', () => {\r\n      if (this.state.wet < 0 || this.state.wet > 1) {\r\n        this.state.wet = clamp(this.state.wet, 0, 1);\r\n        wetChanged();\r\n      }\r\n    });\r\n    let dryChanged = () => this.dryGain.gain.setTargetAtTime(this.state.dry, flow.flowConnect.audioContext.currentTime, 0.01);\r\n    this.drySlider.on('change', dryChanged);\r\n    this.watch('dry', () => {\r\n      if (this.state.dry < 0 || this.state.dry > 1) {\r\n        this.state.dry = clamp(this.state.dry, 0, 1);\r\n        dryChanged();\r\n      }\r\n    });\r\n    this.watch('bypass', () => this.setBypass());\r\n\r\n    this.handleAudioConnections();\r\n  }\r\n\r\n  setBypass() {\r\n    if (!this.state.bypass) {\r\n      this.inGain.connect(this.delay);\r\n      this.inGain.connect(this.dryGain);\r\n      this.wetGain.connect(this.outGain);\r\n      this.dryGain.connect(this.outGain);\r\n    } else {\r\n      this.inGain.disconnect();\r\n      this.wetGain.disconnect();\r\n      this.dryGain.disconnect();\r\n      this.inGain.connect(this.outGain);\r\n    }\r\n  }\r\n  setupUI() {\r\n    let bypassToggle = this.createToggle({ propName: 'bypass', style: { grow: .1 } });\r\n    this.delaySlider = this.createSlider(0, 10000, { height: 10, propName: 'delayTime', style: { grow: .5 } });\r\n    let delayInput = this.createInput({ propName: 'delayTime', height: 20, style: { type: InputType.Number, grow: .3, precision: 0 } });\r\n    this.feedbackSlider = this.createSlider(0, 0.9, { height: 10, propName: 'feedback', style: { grow: .5 } });\r\n    let feedbackInput = this.createInput({ propName: 'feedback', height: 20, style: { type: InputType.Number, grow: .3, precision: 2 } });\r\n    this.cutoffSlider = this.createSlider(20, 20000, { height: 10, propName: 'cutoff', style: { grow: .5 } });\r\n    let cutoffInput = this.createInput({ propName: 'cutoff', height: 20, style: { type: InputType.Number, grow: .3, precision: 0 } });\r\n    this.wetSlider = this.createSlider(0, 1, { height: 10, propName: 'wet', style: { grow: .5 } });\r\n    let wetInput = this.createInput({ propName: 'wet', height: 20, style: { type: InputType.Number, grow: .3, precision: 2 } });\r\n    this.drySlider = this.createSlider(0, 1, { height: 10, propName: 'dry', style: { grow: .5 } });\r\n    let dryInput = this.createInput({ propName: 'dry', height: 20, style: { type: InputType.Number, grow: .3, precision: 2 } });\r\n    this.ui.append([\r\n      this.createHozLayout([this.createLabel('Delay', { style: { grow: .3 } }), this.delaySlider, delayInput], { style: { spacing: 5 } }),\r\n      this.createHozLayout([this.createLabel('Feedback', { style: { grow: .3 } }), this.feedbackSlider, feedbackInput], { style: { spacing: 5 } }),\r\n      this.createHozLayout([this.createLabel('Cutoff', { style: { grow: .3 } }), this.cutoffSlider, cutoffInput], { style: { spacing: 5 } }),\r\n      this.createHozLayout([this.createLabel('Wet', { style: { grow: .3 } }), this.wetSlider, wetInput], { style: { spacing: 5 } }),\r\n      this.createHozLayout([this.createLabel('Dry', { style: { grow: .3 } }), this.drySlider, dryInput], { style: { spacing: 5 } }),\r\n      this.createHozLayout([this.createLabel('Bypass ?', { style: { grow: .3 } }), bypassToggle], { style: { spacing: 5 } })\r\n    ]);\r\n  }\r\n  handleAudioConnections() {\r\n    // Handle actual webaudio node stuff\r\n    this.outputs[0].on('connect', (_, connector) => this.outputs[0].ref.connect(connector.end.ref));\r\n    this.outputs[0].on('disconnect', (_inst, _connector, _start, end) => this.outputs[0].ref.disconnect(end.ref));\r\n  }\r\n}\r\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { Node } from \"../../core/node\";\n\nexport class Destination extends Node {\n  masterVolumeGainNode: GainNode;\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'Audio Destination', options.position || new Vector(50, 50), options.width || 160,\n      [{ name: 'out', dataType: 'audio' }, { name: 'gain', dataType: 'audioparam' }], [],\n      {\n        state: options.state || {},\n        style: options.style || { rowHeight: 10, spacing: 15 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.masterVolumeGainNode = flow.flowConnect.audioContext.createGain();\n    this.inputs[0].ref = this.masterVolumeGainNode;\n    this.inputs[0].ref.connect(flow.flowConnect.audioContext.destination);\n    this.inputs[1].ref = this.inputs[0].ref.gain;\n    this.inputs[1].on('data', (_, data) => typeof data === 'number' && (this.inputs[1].ref.value = data));\n  }\n\n}\n","import { Flow } from \"../../core/flow\";\r\nimport { Vector } from \"../../core/vector\";\r\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\r\nimport { clamp } from \"../../utils/utils\";\r\nimport { Node } from '../../core/node';\r\nimport { Toggle, Select, Input, InputType } from \"../../ui/index\";\r\n\r\nexport class Distorter extends Node {\r\n  amountInput: Input;\r\n  oversampleSelect: Select;\r\n  bypassToggle: Toggle;\r\n\r\n  distorter: WaveShaperNode;\r\n  inGain: GainNode;\r\n  outGain: GainNode;\r\n\r\n  oversampleOptions = ['none', '2x', '4x'];\r\n\r\n  static DefaultState = { oversample: 'none', amount: 50, bypass: false };\r\n\r\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\r\n    super(\r\n      flow, options.name || 'Distorter',\r\n      options.position || new Vector(50, 50),\r\n      options.width || 200,\r\n      [{ name: 'in', dataType: 'audio' }],\r\n      [{ name: 'out', dataType: 'audio' }],\r\n      {\r\n        style: options.style || { rowHeight: 10, spacing: 10 },\r\n        terminalStyle: options.terminalStyle || {},\r\n        state: options.state ? { ...Distorter.DefaultState, ...options.state } : Distorter.DefaultState\r\n      }\r\n    )\r\n\r\n    this.inGain = flow.flowConnect.audioContext.createGain();\r\n    this.outGain = flow.flowConnect.audioContext.createGain();\r\n    this.distorter = flow.flowConnect.audioContext.createWaveShaper();\r\n    this.distorter.oversample = 'none';\r\n    this.distorter.curve = this.makeDistortionCurve(400);\r\n\r\n    this.inputs[0].ref = this.inGain;\r\n    this.outputs[0].ref = this.outGain;\r\n\r\n    this.setBypass();\r\n\r\n    this.setupUI();\r\n\r\n    this.watch('oversample', (_oldVal, newVal) => {\r\n      if (!this.oversampleOptions.includes(newVal)) this.state.oversample = 'none';\r\n      this.distorter.oversample = this.state.oversample;\r\n    });\r\n    this.watch('amount', (_oldVal, newVal) => {\r\n      if (newVal < 0 || newVal > 1000) this.state.amount = clamp(parseInt(newVal), 0, 1000);\r\n      this.distorter.curve = this.makeDistortionCurve(parseInt(this.state.amount));\r\n    });\r\n    this.watch('bypass', this.setBypass.bind(this));\r\n\r\n    this.handleAudioConnections();\r\n  }\r\n\r\n  makeDistortionCurve(amount: number) {\r\n    let k = typeof amount === 'number' ? amount : 50,\r\n      n_samples = 44100,\r\n      curve = new Float32Array(n_samples),\r\n      deg = Math.PI / 180,\r\n      i = 0,\r\n      x;\r\n    for (; i < n_samples; ++i) {\r\n      x = i * 2 / n_samples - 1;\r\n      curve[i] = (3 + k) * x * 20 * deg / (Math.PI + k * Math.abs(x));\r\n    }\r\n    return curve;\r\n  }\r\n  setBypass() {\r\n    if (!this.state.bypass) {\r\n      this.inGain.disconnect();\r\n      this.inGain.connect(this.distorter);\r\n      this.distorter.connect(this.outGain);\r\n    } else {\r\n      this.distorter.disconnect();\r\n      this.inGain.disconnect();\r\n      this.inGain.connect(this.outGain);\r\n    }\r\n  }\r\n\r\n  setupUI() {\r\n    this.amountInput = this.createInput({ propName: 'amount', height: 20, style: { grow: 1, type: InputType.Number, precision: 0 } });\r\n    this.oversampleSelect = this.createSelect(this.oversampleOptions, { height: 15, propName: 'oversample', style: { grow: 1 } });\r\n    this.bypassToggle = this.createToggle({ propName: 'bypass', style: { grow: .15 } });\r\n    this.ui.append([\r\n      this.createHozLayout([this.createLabel('Amount'), this.amountInput], { style: { spacing: 10 } }),\r\n      this.createHozLayout([this.createLabel('Oversample'), this.oversampleSelect], { style: { spacing: 10 } }),\r\n      this.createHozLayout([this.createLabel('Bypass ?', { style: { grow: .3 } }), this.bypassToggle], { style: { spacing: 5 } })\r\n    ]);\r\n  }\r\n  handleAudioConnections() {\r\n    this.outputs[0].on('connect', (_inst, connector) => this.outputs[0].ref.connect(connector.end.ref));\r\n    this.outputs[0].on('disconnect', (_inst, _connector, _start, end) => this.outputs[0].ref.disconnect(end.ref));\r\n  }\r\n}\r\n","import { Flow } from \"../../core/flow\";\r\nimport { Vector } from \"../../core/vector\";\r\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\r\nimport { clamp } from \"../../utils/utils\";\r\nimport { Node } from \"../../core/node\";\r\nimport { Toggle } from \"../../ui/index\";\r\n\r\nexport class DynamicsCompressor extends Node {\r\n  bypassToggle: Toggle;\r\n\r\n  inGain: GainNode;\r\n  outGain: GainNode;\r\n  compressor: DynamicsCompressorNode;\r\n\r\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\r\n    super(flow, options.name || 'Dynamics Compressor', options.position || new Vector(50, 50), options.width || 230,\r\n      [\r\n        { name: 'in', dataType: 'audio' }, { name: 'threshold', dataType: 'audioparam' },\r\n        { name: 'ratio', dataType: 'audioparam' }, { name: 'knee', dataType: 'audioparam' },\r\n        { name: 'attack', dataType: 'audioparam' }, { name: 'release', dataType: 'audioparam' }\r\n      ],\r\n      [{ name: 'out', dataType: 'audio' }],\r\n      {\r\n        state: options.state ? { bypass: false, ...options.state } : { bypass: false },\r\n        style: options.style || { rowHeight: 10, spacing: 10 },\r\n        terminalStyle: options.terminalStyle || {}\r\n      }\r\n    );\r\n\r\n    this.inGain = flow.flowConnect.audioContext.createGain();\r\n    this.outGain = flow.flowConnect.audioContext.createGain();\r\n    this.compressor = flow.flowConnect.audioContext.createDynamicsCompressor();\r\n    this.compressor.threshold.value = -20;\r\n    this.compressor.ratio.value = 4;\r\n    this.compressor.knee.value = 5;\r\n    this.compressor.attack.value = 0.01;\r\n    this.compressor.release.value = 0.12;\r\n\r\n    this.inputs[0].ref = this.inGain;\r\n    this.inputs[1].ref = this.compressor.threshold;\r\n    this.inputs[2].ref = this.compressor.ratio;\r\n    this.inputs[3].ref = this.compressor.knee;\r\n    this.inputs[4].ref = this.compressor.attack;\r\n    this.inputs[5].ref = this.compressor.release;\r\n    this.outputs[0].ref = this.outGain;\r\n\r\n    this.inputs[1].on('data', (_, data) => typeof data === 'number' && (this.inputs[1].ref.value = clamp(data, -100, 0)));\r\n    this.inputs[2].on('data', (_, data) => typeof data === 'number' && (this.inputs[2].ref.value = clamp(data, 1, 20)));\r\n    this.inputs[3].on('data', (_, data) => typeof data === 'number' && (this.inputs[3].ref.value = clamp(data, 0, 40)));\r\n    this.inputs[4].on('data', (_, data) => typeof data === 'number' && (this.inputs[4].ref.value = clamp(data, 0, 1)));\r\n    this.inputs[5].on('data', (_, data) => typeof data === 'number' && (this.inputs[5].ref.value = clamp(data, 0, 1)));\r\n\r\n    this.setBypass();\r\n\r\n    this.setupUI();\r\n\r\n    this.watch('bypass', () => this.setBypass());\r\n\r\n    this.handleAudioConnections();\r\n  }\r\n\r\n  setBypass() {\r\n    if (this.state.bypass) {\r\n      this.compressor.disconnect();\r\n      this.inGain.disconnect();\r\n      this.inGain.connect(this.outGain);\r\n    } else {\r\n      this.inGain.disconnect();\r\n      this.inGain.connect(this.compressor);\r\n      this.compressor.connect(this.outGain);\r\n    }\r\n  }\r\n  setupUI() {\r\n    this.bypassToggle = this.createToggle({ propName: 'bypass', style: { grow: .1 } });\r\n    this.ui.append([\r\n      this.createHozLayout([this.createLabel('Bypass ?', { style: { grow: .3 } }), this.bypassToggle], { style: { spacing: 5 } })\r\n    ]);\r\n  }\r\n  handleAudioConnections() {\r\n    // Handle actual webaudio node stuff\r\n    this.outputs[0].on('connect', (_, connector) => this.outputs[0].ref.connect(connector.end.ref));\r\n    this.outputs[0].on('disconnect', (_inst, _connector, _start, end) => this.outputs[0].ref.disconnect(end.ref));\r\n  }\r\n}\r\n","import { Flow } from \"../../core/flow\";\r\nimport { Vector } from \"../../core/vector\";\r\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\r\nimport { clamp, isInRange } from \"../../utils/utils\";\r\nimport { Node } from '../../core/node';\r\nimport { Align } from \"../../common/enums\";\r\nimport { Toggle, VSlider, Stack } from \"../../ui/index\";\r\n\r\nexport class Equalizer extends Node {\r\n  vSliders: VSlider[] = [];\r\n  filters: BiquadFilterNode[] = [];\r\n  bypassToggle: Toggle;\r\n  inGain: GainNode;\r\n  outGain: GainNode;\r\n\r\n  frequencies = [32, 64, 125, 250, 500, 1000, 2000, 4000, 8000, 16000];\r\n  freqDisplay = ['32', '64', '125', '250', '500', '1K', '2K', '4K', '8K', '16K']\r\n\r\n  static DefaultState = { eq1: 0, eq2: 0, eq3: 0, eq4: 0, eq5: 0, eq6: 0, eq7: 0, eq8: 0, eq9: 0, eq10: 0, bypass: false };\r\n\r\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\r\n    super(\r\n      flow, options.name || 'Equalizer',\r\n      options.position || new Vector(50, 50),\r\n      options.width || 300,\r\n      [{ name: 'in', dataType: 'audio' }], [{ name: 'out', dataType: 'audio' }],\r\n      {\r\n        style: options.style || { rowHeight: 10, spacing: 10 },\r\n        terminalStyle: options.terminalStyle || {},\r\n        state: options.state ? { ...Equalizer.DefaultState, ...options.state } : Equalizer.DefaultState\r\n      }\r\n    )\r\n\r\n    this.inGain = flow.flowConnect.audioContext.createGain();\r\n    this.outGain = flow.flowConnect.audioContext.createGain();\r\n    this.frequencies.forEach((freq, index) => {\r\n      let filter = flow.flowConnect.audioContext.createBiquadFilter();\r\n      filter.frequency.value = freq;\r\n      if (index === 0)\r\n        filter.type = 'lowshelf';\r\n      else if (index === 9)\r\n        filter.type = 'highshelf';\r\n      else\r\n        filter.type = 'peaking';\r\n      this.filters.push(filter);\r\n    });\r\n    for (let i = 1; i < 10; ++i) {\r\n      this.filters[i - 1].connect(this.filters[i]);\r\n    }\r\n\r\n    this.inputs[0].ref = this.inGain;\r\n    this.outputs[0].ref = this.outGain;\r\n\r\n    this.setBypass();\r\n\r\n    this.setupUI();\r\n\r\n    this.watch('bypass', this.setBypass.bind(this));\r\n    for (let i = 1; i <= 10; ++i) {\r\n      this.watch(`eq${i}`, (_oldVal, newVal) => {\r\n        if (!isInRange(newVal, -40, 40)) {\r\n          this.state[`eq${i}`] = clamp(newVal, -40, 40);\r\n        }\r\n        this.filters[i - 1].gain.value = this.state[`eq${i}`]\r\n      });\r\n    }\r\n\r\n    this.handleAudioConnections();\r\n  }\r\n\r\n  setBypass() {\r\n    if (!this.state.bypass) {\r\n      this.inGain.disconnect();\r\n      this.inGain.connect(this.filters[0]);\r\n      this.filters[9].connect(this.outGain);\r\n    } else {\r\n      this.inGain.disconnect();\r\n      this.filters[9].disconnect();\r\n      this.inGain.connect(this.outGain);\r\n    }\r\n  }\r\n  setupUI() {\r\n    let stacks: Stack[] = [];\r\n    this.frequencies.forEach((_freq, index) => {\r\n      let vSlider = this.createVSlider(-40, 40, { height: 120, propName: `eq${index + 1}` });\r\n      this.vSliders.push(vSlider);\r\n      let stack = this.createStack({\r\n        childs: [\r\n          this.createLabel(this.freqDisplay[index], { style: { align: Align.Center } }),\r\n          vSlider,\r\n          this.createLabel(this.state[`eq${index + 1}`], { propName: `eq${index + 1}`, style: { align: Align.Center, precision: 0 } }),\r\n        ],\r\n        style: { grow: .1, spacing: 5 }\r\n      });\r\n      stacks.push(stack);\r\n    });\r\n    this.bypassToggle = this.createToggle({ propName: 'bypass', height: 10, style: { grow: .1 } });\r\n    this.ui.append([\r\n      this.createHozLayout(stacks, { style: { spacing: 5 } }),\r\n      this.createHozLayout([this.createLabel('Bypass ?'), this.bypassToggle], { style: { spacing: 5 } })\r\n    ]);\r\n  }\r\n  handleAudioConnections() {\r\n    this.outputs[0].on('connect', (_inst, connector) => this.outputs[0].ref.connect(connector.end.ref));\r\n    this.outputs[0].on('disconnect', (_inst, _connector, _start, end) => this.outputs[0].ref.disconnect(end.ref));\r\n  }\r\n}\r\n","import { Flow } from \"../../core/flow\";\r\nimport { Vector } from \"../../core/vector\";\r\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\r\nimport { clamp } from \"../../utils/utils\";\r\nimport { Node } from '../../core/node';\r\nimport { Align } from \"../../common/enums\";\r\nimport { Slider, Display, Label } from \"../../ui/index\";\r\n\r\nexport class FrequencyAnalyser extends Node {\r\n  freqLabel: Label;\r\n  fftSizeSlider: Slider;\r\n  fftSizeLabel: Label;\r\n  display: Display;\r\n\r\n  analyser: AnalyserNode;\r\n\r\n  static DefaultState = { fftSize: 11, currFreq: 0 };\r\n\r\n  fftSizes = [32, 64, 128, 256, 512, 1024, 2048, 4096, 8192, 16384, 32768];\r\n\r\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\r\n    super(\r\n      flow, options.name || 'Frequency Analyser',\r\n      options.position || new Vector(50, 50),\r\n      options.width || 350,\r\n      [{ name: 'in', dataType: 'audio' }], [{ name: 'out', dataType: 'audio' }],\r\n      {\r\n        style: options.style || { rowHeight: 10, spacing: 10 },\r\n        terminalStyle: options.terminalStyle || {},\r\n        state: options.state ? { ...FrequencyAnalyser.DefaultState, ...options.state } : FrequencyAnalyser.DefaultState\r\n      }\r\n    )\r\n\r\n    this.analyser = flow.flowConnect.audioContext.createAnalyser();\r\n    this.analyser.fftSize = this.getFFTSize();\r\n    this.inputs[0].ref = this.outputs[0].ref = this.analyser;\r\n\r\n    this.setupUI();\r\n\r\n    this.watch('fftSize', (_oldVal, newVal) => {\r\n      if (newVal < 5 || newVal > 15) this.state.fftSize = clamp(Math.round(newVal), 5, 15);\r\n      let actualFFTSize = this.getFFTSize();\r\n      this.fftSizeLabel.text = actualFFTSize;\r\n      this.analyser.fftSize = actualFFTSize;\r\n    });\r\n    this.display.on('over', (_inst, screenPos) => {\r\n      this.state.currFreq = (\r\n        Math.floor(\r\n          (\r\n            screenPos.subtract(this.display.position.transform(this.flow.flowConnect.transform)).x\r\n            / this.display.displayConfigs[0].canvas.width\r\n          )\r\n          * this.analyser.frequencyBinCount\r\n        ) * this.flow.flowConnect.audioContext.sampleRate\r\n      ) / (this.analyser.frequencyBinCount * 2);\r\n    });\r\n    this.display.on('exit', () => (this.state.currFreq = 0));\r\n\r\n    this.handleAudioConnections();\r\n  }\r\n\r\n  getFFTSize() {\r\n    return this.fftSizes[clamp(Math.round(this.state.fftSize), 5, 15) - 5];\r\n  }\r\n  setupUI() {\r\n    this.freqLabel = this.createLabel('Frequency:');\r\n    this.fftSizeSlider = this.createSlider(5, 15, { height: 10, propName: 'fftSize', style: { grow: .6, precision: 0 } });\r\n    this.fftSizeLabel = this.createLabel(this.getFFTSize(), { height: 20, style: { grow: .2, align: Align.Right } });\r\n    this.display = this.createDisplay(200, [{\r\n      auto: true,\r\n      clear: true,\r\n      renderer: (...args) => this.customRenderer(args[0], args[1], args[2])\r\n    }]);\r\n\r\n    this.ui.append([\r\n      this.createHozLayout([\r\n        this.freqLabel, this.createLabel(this.state.currFreq, { propName: 'currFreq', style: { precision: 0, grow: 1 } })\r\n      ], { style: { spacing: 5 } }),\r\n      this.display,\r\n      this.createHozLayout([\r\n        this.createLabel('FFT Size', { style: { grow: .2 } }), this.fftSizeSlider, this.fftSizeLabel\r\n      ], { style: { spacing: 5 } })\r\n    ]);\r\n  }\r\n  customRenderer(context: OffscreenCanvasRenderingContext2D | CanvasRenderingContext2D, width: number, height: number): boolean {\r\n    let value, percent, offset, hue,\r\n      i = 0,\r\n      frequencyBinCount = this.analyser.frequencyBinCount,\r\n      frequencyData = new Uint8Array(frequencyBinCount),\r\n      orgHeight = height,\r\n      barWidth = width / frequencyBinCount;\r\n\r\n    this.analyser.getByteFrequencyData(frequencyData);\r\n\r\n    for (; i < frequencyBinCount; i++) {\r\n      value = frequencyData[i];\r\n      percent = value / 256;\r\n      height = orgHeight * percent;\r\n      offset = orgHeight - height - 1;\r\n      hue = i / frequencyBinCount * 360;\r\n      context.fillStyle = 'hsl(' + hue + ', 100%, 50%)';\r\n      context.fillRect(i * barWidth, offset, barWidth, height);\r\n    }\r\n\r\n    return true;\r\n  }\r\n  handleAudioConnections() {\r\n    this.outputs[0].on('connect', (_inst, connector) => this.outputs[0].ref.connect(connector.end.ref));\r\n    this.outputs[0].on('disconnect', (_inst, _connector, _start, end) => this.outputs[0].ref.disconnect(end.ref));\r\n  }\r\n}\r\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { Node } from \"../../core/node\";\n\nexport class Gain extends Node {\n  gain: GainNode;\n\n  static DefaultState = { gain: 1 };\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'Gain', options.position || new Vector(50, 50), options.width || 120,\n      [{ name: 'in', dataType: 'audio' }, { name: 'gain', dataType: 'audioparam' }],\n      [{ name: 'out', dataType: 'audio' }],\n      {\n        state: options.state ? { ...Gain.DefaultState, ...options.state } : Gain.DefaultState,\n        style: options.style || { rowHeight: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.gain = flow.flowConnect.audioContext.createGain();\n    this.inputs[0].ref = this.gain;\n    this.outputs[0].ref = this.gain;\n    this.inputs[1].ref = this.inputs[0].ref.gain;\n    this.inputs[1].on('data', (_, data) => typeof data === 'number' && (this.inputs[1].ref.value = data));\n\n    this.handleAudioConnections();\n  }\n\n  handleAudioConnections() {\n    // Handle actual webaudio node stuff\n    this.outputs[0].on('connect', (_, connector) => this.outputs[0].ref.connect(connector.end.ref));\n    this.outputs[0].on('disconnect', (_inst, _connector, _start, end) => this.outputs[0].ref.disconnect(end.ref));\n  }\n}\n","import { Flow } from \"../../core/flow\";\r\nimport { Vector } from \"../../core/vector\";\r\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\r\nimport { clamp } from \"../../utils/utils\";\r\nimport { Node } from \"../../core/node\";\r\nimport { FlowConnectState } from \"../../flow-connect\";\r\nimport { Constant } from \"../../resource/constants\";\r\nimport { InputType, Input, Toggle } from \"../../ui/index\";\r\n\r\nexport class Metronome extends Node {\r\n  autoToggle: Toggle;\r\n  freqInput: Input;\r\n  bpmInput: Input;\r\n  source: AudioBufferSourceNode;\r\n\r\n  volumeGainNode: GainNode;\r\n  proxyParamSourceNode: AudioWorkletNode;\r\n\r\n  static DefaultState: any = { frequency: 330, buffer: null, bpm: 130, loop: true, auto: true };\r\n\r\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\r\n    super(flow, options.name || 'Metronome', options.position || new Vector(50, 50), options.width || 200,\r\n      [\r\n        { name: 'trigger', dataType: 'event' }, { name: 'gain', dataType: 'audioparam' },\r\n        { name: 'detune', dataType: 'audioparam' }, { name: 'playback-rate', dataType: 'audioparam' }\r\n      ],\r\n      [{ name: 'out', dataType: 'audio' }],\r\n      {\r\n        state: options.state ? { ...Metronome.DefaultState, ...options.state } : Metronome.DefaultState,\r\n        style: options.style || { rowHeight: 10, spacing: 15 },\r\n        terminalStyle: options.terminalStyle || {}\r\n      }\r\n    );\r\n\r\n    this.volumeGainNode = flow.flowConnect.audioContext.createGain();\r\n    this.proxyParamSourceNode = new AudioWorkletNode(\r\n      flow.flowConnect.audioContext,\r\n      'proxy-param-for-source',\r\n      { numberOfOutputs: 2, parameterData: { detune: 0, playbackRate: 1 } }\r\n    );\r\n    this.inputs[1].ref = this.volumeGainNode.gain;\r\n    this.inputs[2].ref = (this.proxyParamSourceNode.parameters as Map<string, AudioParam>).get('detune');\r\n    this.inputs[3].ref = (this.proxyParamSourceNode.parameters as Map<string, AudioParam>).get('playbackRate');\r\n    this.inputs[1].on('data', (_, data) => typeof data === 'number' && (this.inputs[1].ref.value = data));\r\n    this.inputs[2].on('data', (_, data) => typeof data === 'number' && (this.inputs[2].ref.value = data));\r\n    this.inputs[3].on('data', (_, data) => typeof data === 'number' && (this.inputs[3].ref.value = data));\r\n    this.outputs[0].ref = this.volumeGainNode;\r\n    this.fillBuffer();\r\n\r\n    this.setupUI();\r\n\r\n    this.bpmInput.on('change', () => {\r\n      if (this.source) {\r\n        this.source.loopEnd = 1 / (clamp(this.state.bpm, 30, 300) / 60);\r\n      }\r\n    });\r\n    this.freqInput.on('change', () => {\r\n      if (this.source) {\r\n        this.stopSource();\r\n        this.fillBuffer();\r\n        this.playSource();\r\n      } else this.fillBuffer();\r\n    });\r\n    this.inputs[0].on('event', () => this.playSource());\r\n\r\n    flow.flowConnect.on('start', () => this.state.auto && this.playSource());\r\n    flow.flowConnect.on('stop', () => this.stopSource());\r\n\r\n    this.handleAudioConnections();\r\n  }\r\n  fillBuffer() {\r\n    let ctx = this.flow.flowConnect.audioContext;\r\n\r\n    let buffer = ctx.createBuffer(1, ctx.sampleRate * 2, ctx.sampleRate);\r\n    let channel = buffer.getChannelData(0);\r\n\r\n    let phase = 0;\r\n    let amp = 1;\r\n    let durationFrames = ctx.sampleRate / 50;\r\n\r\n    const f = this.state.frequency;\r\n    for (let i = 0; i < durationFrames; i++) {\r\n      channel[i] = Math.sin(phase) * amp;\r\n      phase += Constant.TAU * f / ctx.sampleRate;\r\n      if (phase > Constant.TAU) {\r\n        phase -= Constant.TAU;\r\n      }\r\n      amp -= 1 / durationFrames;\r\n    }\r\n    this.state.buffer = buffer;\r\n  }\r\n  setupUI() {\r\n    this.autoToggle = this.createToggle({ propName: 'auto', height: 10, style: { grow: 0.2 } });\r\n    this.freqInput = this.createInput({ propName: 'frequency', height: 20, style: { type: InputType.Number, grow: 0.5 } });\r\n    this.bpmInput = this.createInput({ propName: 'bpm', height: 20, style: { type: InputType.Number, grow: 0.5 } });\r\n    this.ui.append([\r\n      this.createHozLayout([this.createLabel('Auto ?'), this.autoToggle], { style: { spacing: 5 } }),\r\n      this.createHozLayout([\r\n        this.createLabel('Frequency'), this.freqInput, this.createLabel('BPM'), this.bpmInput\r\n      ], { style: { spacing: 5 } })\r\n    ]);\r\n  }\r\n  playSource() {\r\n    if (this.flow.flowConnect.state === FlowConnectState.Stopped || !this.state.buffer) return;\r\n\r\n    let audioSource = new AudioBufferSourceNode(this.flow.flowConnect.audioContext);\r\n    audioSource.buffer = this.state.buffer;\r\n    audioSource.loop = true;\r\n    this.source = audioSource;\r\n\r\n    audioSource.loopEnd = 1 / (clamp(this.state.bpm, 30, 300) / 60);\r\n    this.proxyParamSourceNode.connect(audioSource.detune, 0);\r\n    this.proxyParamSourceNode.connect(audioSource.playbackRate, 1);\r\n    audioSource.connect(this.outputs[0].ref);\r\n    audioSource.start(0);\r\n  }\r\n  stopSource() {\r\n    if (this.source) {\r\n      this.source.stop();\r\n      this.source = null;\r\n    }\r\n  }\r\n  handleAudioConnections() {\r\n    // Handle actual webaudio node stuff\r\n    this.outputs[0].on('connect', (_, connector) => this.outputs[0].ref.connect(connector.end.ref));\r\n    this.outputs[0].on('disconnect', (_inst, _connector, _start, end) => this.outputs[0].ref.disconnect(end.ref));\r\n  }\r\n}\r\n","import { Flow, FlowState } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { Node } from '../../core/node';\nimport { Log } from \"../../utils/logger\";\n\nexport class Microphone extends Node {\n  microphone: MediaStreamAudioSourceNode;\n  stream: MediaStream;\n  outGain: GainNode;\n\n  static DefaultState = {};\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(\n      flow, options.name || 'Microphone',\n      options.position || new Vector(50, 50),\n      options.width || 120, [],\n      [{ name: 'out', dataType: 'audio' }],\n      {\n        style: options.style || { rowHeight: 10 },\n        terminalStyle: options.terminalStyle || {},\n        state: options.state ? { ...Microphone.DefaultState, ...options.state } : Microphone.DefaultState\n      }\n    )\n\n    this.outGain = flow.flowConnect.audioContext.createGain();\n    this.outputs[0].ref = this.outGain;\n\n    this.flow.flowConnect.on('start', () => {\n      if (!this.stream) {\n        this.getMicrophone().then(() => {\n          if (this.flow.state !== FlowState.Stopped) this.microphone.connect(this.outGain);\n        }, error => {\n          Log.error('Cannot access microphone: ', error);\n        }).catch(error => Log.error(error));\n      } else {\n        this.microphone.connect(this.outGain);\n      }\n    });\n    this.flow.flowConnect.on('stop', () => this.microphone && this.microphone.disconnect());\n\n    this.handleAudioConnections();\n\n    this.getMicrophone().then(() => { /**/ }, error => {\n      Log.error('Cannot access microphone: ', error);\n    }).catch(error => Log.error(error));\n  }\n\n  async getMicrophone() {\n    this.stream = await navigator.mediaDevices.getUserMedia({ audio: true, video: false });\n    this.microphone = this.flow.flowConnect.audioContext.createMediaStreamSource(this.stream);\n  }\n\n  handleAudioConnections() {\n    this.outputs[0].on('connect', (_inst, connector) => this.outputs[0].ref.connect(connector.end.ref));\n    this.outputs[0].on('disconnect', (_inst, _connector, _start, end) => this.outputs[0].ref.disconnect(end.ref));\n  }\n}\n","import { Flow } from \"../../core/flow\";\r\nimport { Vector } from \"../../core/vector\";\r\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\r\nimport { clamp } from \"../../utils/utils\";\r\nimport { Node } from \"../../core/node\";\r\nimport { InputType, Slider, Toggle } from \"../../ui/index\";\r\n\r\nexport class MoogEffect extends Node {\r\n  cutoffSlider: Slider;\r\n  resonanceSlider: Slider;\r\n  bypassToggle: Toggle;\r\n\r\n  inGain: GainNode;\r\n  outGain: GainNode;\r\n  moog: AudioWorkletNode;\r\n\r\n  static DefaultState = { cutoff: 0.065, resonance: 3.5, bypass: false };\r\n\r\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\r\n    super(flow, options.name || 'Moog Effect', options.position || new Vector(50, 50), options.width || 230,\r\n      [{ name: 'in', dataType: 'audio' }],\r\n      [{ name: 'out', dataType: 'audio' }],\r\n      {\r\n        state: options.state ? { ...MoogEffect.DefaultState, ...options.state } : MoogEffect.DefaultState,\r\n        style: options.style || { rowHeight: 10, spacing: 10 },\r\n        terminalStyle: options.terminalStyle || {}\r\n      }\r\n    );\r\n\r\n    this.inGain = flow.flowConnect.audioContext.createGain();\r\n    this.outGain = flow.flowConnect.audioContext.createGain();\r\n    this.inputs[0].ref = this.inGain;\r\n    this.outputs[0].ref = this.outGain;\r\n\r\n    this.moog = new AudioWorkletNode(flow.flowConnect.audioContext, 'moog-effect', {\r\n      numberOfInputs: 1, numberOfOutputs: 1, processorOptions: { bufferSize: 4096 }\r\n    });\r\n    this.setBypass();\r\n\r\n    this.setupUI();\r\n\r\n    this.watch('bypass', () => this.setBypass());\r\n    this.watch('cutoff', () => {\r\n      if (this.state.cutoff < 0.0001 || this.state.cutoff > 1.0) this.state.cutoff = clamp(this.state.cutoff, 0.0001, 1.0);\r\n      this.paramsChanged();\r\n    });\r\n    this.watch('resonance', () => {\r\n      if (this.state.resonance < 0 || this.state.resonance > 4.0) this.state.resonance = clamp(this.state.resonance, 0, 4.0);\r\n      this.paramsChanged();\r\n    });\r\n\r\n    flow.flowConnect.on('start', () => this.paramsChanged());\r\n\r\n    this.handleAudioConnections();\r\n  }\r\n\r\n  paramsChanged() {\r\n    this.moog.port.postMessage({ cutoff: this.state.cutoff, resonance: this.state.resonance });\r\n  }\r\n  setBypass() {\r\n    if (this.state.bypass) {\r\n      this.moog.disconnect();\r\n      this.inGain.disconnect();\r\n      this.inGain.connect(this.outGain);\r\n    } else {\r\n      this.inGain.disconnect();\r\n      this.inGain.connect(this.moog);\r\n      this.moog.connect(this.outGain);\r\n    }\r\n  }\r\n  setupUI() {\r\n    this.cutoffSlider = this.createSlider(0.0001, 1.0, { height: 10, propName: 'cutoff', style: { grow: .5 } });\r\n    this.resonanceSlider = this.createSlider(0, 4.0, { height: 10, propName: 'resonance', style: { grow: .5 } });\r\n    let cutoffInput = this.createInput({ propName: 'cutoff', height: 20, style: { type: InputType.Number, grow: .2, precision: 2 } });\r\n    let resonanceInput = this.createInput({ propName: 'resonance', height: 20, style: { type: InputType.Number, grow: .4, precision: 2 } });\r\n    this.bypassToggle = this.createToggle({ propName: 'bypass', style: { grow: .1 } });\r\n    this.ui.append([\r\n      this.createHozLayout([this.createLabel('Cutoff', { style: { grow: .3 } }), this.cutoffSlider, cutoffInput], { style: { spacing: 5 } }),\r\n      this.createHozLayout([this.createLabel('Resonance', { style: { grow: .3 } }), this.resonanceSlider, resonanceInput], { style: { spacing: 5 } }),\r\n      this.createHozLayout([this.createLabel('Bypass ?', { style: { grow: .3 } }), this.bypassToggle], { style: { spacing: 5 } })\r\n    ]);\r\n  }\r\n  handleAudioConnections() {\r\n    // Handle actual webaudio node stuff\r\n    this.outputs[0].on('connect', (_, connector) => this.outputs[0].ref.connect(connector.end.ref));\r\n    this.outputs[0].on('disconnect', (_inst, _connector, _start, end) => this.outputs[0].ref.disconnect(end.ref));\r\n  }\r\n}\r\n","import { Flow } from \"../../core/flow\";\r\nimport { Vector } from \"../../core/vector\";\r\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\r\nimport { Node } from '../../core/node';\r\nimport { Select } from \"../../ui/index\";\r\n\r\nexport class Noise extends Node {\r\n  noiseSelect: Select\r\n  noise: AudioWorkletNode;\r\n  outGain: GainNode;\r\n\r\n  static DefaultState = { type: 'white' };\r\n\r\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\r\n    super(\r\n      flow, options.name || 'Noise',\r\n      options.position || new Vector(50, 50),\r\n      options.width || 170, [],\r\n      [{ name: 'out', dataType: 'audio' }],\r\n      {\r\n        style: options.style || { rowHeight: 10, spacing: 10 },\r\n        terminalStyle: options.terminalStyle || {},\r\n        state: options.state ? { ...Noise.DefaultState, ...options.state } : Noise.DefaultState\r\n      }\r\n    )\r\n\r\n    this.outGain = flow.flowConnect.audioContext.createGain();\r\n    this.outputs[0].ref = this.outGain;\r\n\r\n    this.noise = new AudioWorkletNode(flow.flowConnect.audioContext, 'noise', {\r\n      channelCount: 1, channelCountMode: 'explicit', outputChannelCount: [1], numberOfInputs: 1, numberOfOutputs: 1\r\n    });\r\n    this.noise.port.postMessage(this.state.type);\r\n\r\n    this.setupUI();\r\n\r\n    this.watch('type', (_oldVal, newVal) => {\r\n      if (!this.noiseSelect.values.includes(newVal)) newVal = 'white';\r\n      this.noise.port.postMessage(newVal);\r\n    });\r\n\r\n    this.handleAudioConnections();\r\n\r\n    this.flow.flowConnect.on('start', () => {\r\n      this.noise.connect(this.outGain);\r\n    });\r\n    this.flow.flowConnect.on('stop', () => {\r\n      this.noise.disconnect();\r\n    });\r\n  }\r\n\r\n  setupUI() {\r\n    this.noiseSelect = this.createSelect(['white', 'pink', 'brownian'], { height: 15, propName: 'type', style: { grow: .7 } });\r\n    this.ui.append([\r\n      this.createHozLayout([this.createLabel('Type', { style: { grow: .3 } }), this.noiseSelect], { style: { spacing: 5 } })\r\n    ]);\r\n  }\r\n  handleAudioConnections() {\r\n    this.outputs[0].on('connect', (_inst, connector) => this.outputs[0].ref.connect(connector.end.ref));\r\n    this.outputs[0].on('disconnect', (_inst, _connector, _start, end) => this.outputs[0].ref.disconnect(end.ref));\r\n  }\r\n}\r\n","import { Flow } from \"../../core/flow\";\r\nimport { Vector } from \"../../core/vector\";\r\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\r\nimport { clamp } from \"../../utils/utils\";\r\nimport { Node } from '../../core/node';\r\nimport { InputType, Input, RadioGroup, Slider, HorizontalLayout } from \"../../ui/index\";\r\n\r\nexport class Oscillator extends Node {\r\n  freqSlider: Slider;\r\n  freqInput: Input;\r\n  freqHozLayout: HorizontalLayout;\r\n  detuneSlider: Slider;\r\n  detuneInput: Input;\r\n  detuneHozLayout: HorizontalLayout;\r\n  typeGroup: RadioGroup;\r\n\r\n  oscillator: OscillatorNode;\r\n  freqProxy: AudioWorkletNode;\r\n  detuneProxy: AudioWorkletNode;\r\n  outGain: GainNode;\r\n\r\n  types = ['sine', 'square', 'sawtooth', 'triangle'];\r\n\r\n  static DefaultState = { frequency: 440, detune: 0, type: 'sine' };\r\n\r\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\r\n    super(\r\n      flow, options.name || 'Oscillator',\r\n      options.position || new Vector(50, 50),\r\n      options.width || 250, [],\r\n      [{ name: 'out', dataType: 'audio' }],\r\n      {\r\n        style: options.style || { rowHeight: 10, spacing: 10 },\r\n        terminalStyle: options.terminalStyle || {},\r\n        state: options.state ? { ...Oscillator.DefaultState, ...options.state } : Oscillator.DefaultState\r\n      }\r\n    )\r\n\r\n    this.freqProxy = new AudioWorkletNode(flow.flowConnect.audioContext, 'proxy');\r\n    this.detuneProxy = new AudioWorkletNode(flow.flowConnect.audioContext, 'proxy');\r\n    this.outGain = flow.flowConnect.audioContext.createGain();\r\n\r\n    this.setupUI();\r\n\r\n    this.inputsUI[0].ref = this.freqProxy;\r\n    this.inputsUI[1].ref = this.detuneProxy;\r\n    this.inputsUI[0].dataType = 'audioparam';\r\n    this.inputsUI[1].dataType = 'audioparam';\r\n    this.outputs[0].ref = this.outGain;\r\n\r\n    this.inputsUI[0].on('data', (_inst, data) => typeof data === 'number' && (this.state.frequency = data));\r\n    this.inputsUI[1].on('data', (_inst, data) => typeof data === 'number' && (this.state.detune = data));\r\n\r\n    this.watch('frequency', (_oldVal, newVal) => {\r\n      if (newVal < 0 || newVal > 20000) newVal = clamp(newVal, 0, 20000);\r\n      if (!this.freqHozLayout.disabled) this.oscillator && (this.oscillator.frequency.value = newVal);\r\n    });\r\n    this.watch('detune', (_oldVal, newVal) => {\r\n      if (!this.detuneHozLayout.disabled) this.oscillator && (this.oscillator.detune.value = newVal);\r\n    });\r\n    this.watch('type', (_oldVal, newVal) => {\r\n      if (this.types.includes(newVal)) this.oscillator && (this.oscillator.type = newVal);\r\n    });\r\n\r\n    this.flow.flowConnect.on('start', () => this.startOscillator());\r\n    this.flow.flowConnect.on('stop', () => this.stopOscillator());\r\n\r\n    this.handleAudioConnections();\r\n  }\r\n\r\n  startOscillator() {\r\n    this.stopOscillator();\r\n    this.oscillator = this.flow.flowConnect.audioContext.createOscillator();\r\n    if (!this.inputsUI[0].isConnected()) this.oscillator.frequency.value = this.state.frequency;\r\n    else {\r\n      this.freqProxy.connect(this.oscillator.frequency);\r\n      this.oscillator.frequency.value = 0;\r\n    }\r\n    if (!this.inputsUI[1].isConnected()) this.oscillator.detune.value = this.state.detune;\r\n    else {\r\n      this.detuneProxy.connect(this.oscillator.detune);\r\n      this.oscillator.detune.value = 0;\r\n    }\r\n\r\n    this.oscillator.type = this.state.type;\r\n    this.oscillator.connect(this.outGain);\r\n    this.oscillator.start();\r\n  }\r\n  stopOscillator() {\r\n    if (this.oscillator) {\r\n      this.freqProxy.disconnect();\r\n      this.detuneProxy.disconnect();\r\n      this.oscillator.disconnect();\r\n      this.oscillator.stop();\r\n      this.oscillator = null;\r\n    }\r\n  }\r\n  setupUI() {\r\n    this.freqSlider = this.createSlider(0, 20000, { height: 10, propName: 'frequency', style: { grow: .5 } });\r\n    this.freqInput = this.createInput({ propName: 'frequency', height: 20, style: { type: InputType.Number, grow: .3, precision: 0 } });\r\n    this.freqHozLayout = this.createHozLayout([\r\n      this.createLabel('Freq.', { style: { grow: .2 } }), this.freqSlider, this.freqInput\r\n    ], { input: true, style: { spacing: 5 } });\r\n    this.detuneSlider = this.createSlider(-2400, 2400, { height: 10, propName: 'detune', style: { grow: .5 } });\r\n    this.detuneInput = this.createInput({ propName: 'detune', height: 20, style: { type: InputType.Number, grow: .3, precision: 0 } });\r\n    this.detuneHozLayout = this.createHozLayout([\r\n      this.createLabel('Detune', { style: { grow: .2 } }), this.detuneSlider, this.detuneInput\r\n    ], { input: true, style: { spacing: 5 } });\r\n    this.typeGroup = this.createRadioGroup(this.types, this.state.type, { propName: 'type', height: 20 });\r\n\r\n    this.ui.append([this.freqHozLayout, this.detuneHozLayout, this.typeGroup]);\r\n  }\r\n  handleAudioConnections() {\r\n    this.inputsUI[0].on('connect', () => {\r\n      if (this.oscillator) {\r\n        this.freqProxy.connect(this.oscillator.frequency);\r\n        this.oscillator.frequency.value = 0;\r\n      }\r\n    });\r\n    this.inputsUI[0].on('disconnect', () => {\r\n      if (this.oscillator) {\r\n        this.freqProxy.disconnect();\r\n        this.oscillator.frequency.value = this.state.frequency;\r\n      }\r\n    });\r\n    this.inputsUI[1].on('connect', () => {\r\n      if (this.oscillator) {\r\n        this.detuneProxy.connect(this.oscillator.detune);\r\n        this.oscillator.detune.value = 0;\r\n      }\r\n    });\r\n    this.inputsUI[1].on('disconnect', () => {\r\n      if (this.oscillator) {\r\n        this.detuneProxy.disconnect();\r\n        this.oscillator.detune.value = this.state.detune;\r\n      }\r\n    });\r\n    this.outputs[0].on('connect', (_inst, connector) => this.outputs[0].ref.connect(connector.end.ref));\r\n    this.outputs[0].on('disconnect', (_inst, _connector, _start, end) => this.outputs[0].ref.disconnect(end.ref));\r\n  }\r\n}\r\n","import { Flow } from \"../../core/flow\";\r\nimport { Vector } from \"../../core/vector\";\r\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\r\nimport { clamp } from \"../../utils/utils\";\r\nimport { Node } from '../../core/node';\r\nimport { InputType, Input, Slider, Toggle, Select } from \"../../ui/index\";\r\nlet Tuna = require('../../lib/tuna.js');\r\n\r\nexport class OverdriveEffect extends Node {\r\n  driveSlider: Slider;\r\n  driveInput: Input;\r\n  outGainSlider: Slider;\r\n  outGainInput: Input;\r\n  curveAmountSlider: Slider;\r\n  curveAmountInput: Input;\r\n  algorithmSelect: Select;\r\n  bypassToggle: Toggle;\r\n  overdrive: any;\r\n\r\n  static DefaultState = { drive: 0.197, outGain: -9.154, curveAmount: 0.979, algorithm: 1, bypass: false };\r\n\r\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\r\n    super(\r\n      flow, options.name || 'Overdrive Effect',\r\n      options.position || new Vector(50, 50),\r\n      options.width || 230,\r\n      [{ name: 'in', dataType: 'audio' }],\r\n      [{ name: 'out', dataType: 'audio' }],\r\n      {\r\n        style: options.style || { rowHeight: 10, spacing: 10 },\r\n        terminalStyle: options.terminalStyle || {},\r\n        state: options.state ? { ...OverdriveEffect.DefaultState, ...options.state } : OverdriveEffect.DefaultState\r\n      }\r\n    )\r\n\r\n    if (!(window as any).__tuna__) (window as any).__tuna__ = new Tuna(flow.flowConnect.audioContext);\r\n\r\n    this.overdrive = new (window as any).__tuna__.Overdrive();\r\n    this.inputs[0].ref = this.outputs[0].ref = this.overdrive;\r\n    this.setupUI();\r\n    Object.assign(this.overdrive, {\r\n      drive: this.state.drive,\r\n      outputGain: this.state.outGain,\r\n      curveAmount: this.state.curveAmount,\r\n      algorithmIndex: parseInt(this.state.algorithm) - 1\r\n    });\r\n\r\n    this.watch('drive', (_oldVal, newVal) => {\r\n      if (newVal < 0 || newVal > 1) this.state.drive = clamp(newVal, 0, 1);\r\n      this.overdrive.drive = this.state.drive;\r\n    });\r\n    this.watch('outGain', (_oldVal, newVal) => {\r\n      if (newVal < -46 || newVal > 0) this.state.outGain = clamp(newVal, -46, 0);\r\n      this.overdrive.outputGain = this.state.outGain;\r\n    });\r\n    this.watch('curveAmount', (_oldVal, newVal) => {\r\n      if (newVal < 0 || newVal > 1) this.state.curveAmount = clamp(newVal, 0, 1);\r\n      this.overdrive.curveAmount = this.state.curveAmount;\r\n    });\r\n    this.watch('algorithm', (_oldVal, newVal) => {\r\n      newVal = parseInt(newVal);\r\n      if (!newVal) newVal = 1;\r\n      if (newVal < 1 || newVal > 6) newVal = clamp(newVal, 1, 6);\r\n      this.overdrive.algorithmIndex = newVal - 1;\r\n    });\r\n    this.watch('bypass', (_oldVal, newVal) => this.overdrive.bypass = newVal);\r\n\r\n    this.handleAudioConnections();\r\n  }\r\n\r\n  setupUI() {\r\n    this.driveSlider = this.createSlider(0, 1, { height: 10, propName: 'drive', style: { grow: .5 } });\r\n    this.driveInput = this.createInput({ propName: 'drive', height: 20, style: { type: InputType.Number, grow: .2, precision: 4 } });\r\n    this.outGainSlider = this.createSlider(-46, 0, { height: 10, propName: 'outGain', style: { grow: .5 } });\r\n    this.outGainInput = this.createInput({ propName: 'outGain', height: 20, style: { type: InputType.Number, grow: .2, precision: 2 } });\r\n    this.curveAmountSlider = this.createSlider(0, 0.95, { height: 10, propName: 'curveAmount', style: { grow: .5 } });\r\n    this.curveAmountInput = this.createInput({ propName: 'curveAmount', height: 20, style: { type: InputType.Number, grow: .2, precision: 2 } });\r\n    this.algorithmSelect = this.createSelect(['1', '2', '3', '4', '5', '6'], { propName: 'algorithm', height: 20, style: { grow: .7 } })\r\n    this.bypassToggle = this.createToggle({ propName: 'bypass', style: { grow: .1 } });\r\n    this.ui.append([\r\n      this.createHozLayout([this.createLabel('Drive', { style: { grow: .3 } }), this.driveSlider, this.driveInput], { style: { spacing: 5 } }),\r\n      this.createHozLayout([this.createLabel('Output Gain', { style: { grow: .3 } }), this.outGainSlider, this.outGainInput], { style: { spacing: 5 } }),\r\n      this.createHozLayout([this.createLabel('Curve Amount', { style: { grow: .3 } }), this.curveAmountSlider, this.curveAmountInput], { style: { spacing: 5 } }),\r\n      this.createHozLayout([this.createLabel('Algorithm', { style: { grow: .3 } }), this.algorithmSelect], { style: { spacing: 5 } }),\r\n      this.createHozLayout([this.createLabel('Bypass ?', { style: { grow: .3 } }), this.bypassToggle], { style: { spacing: 5 } })\r\n    ]);\r\n  }\r\n  handleAudioConnections() {\r\n    this.outputs[0].on('connect', (_inst, connector) => this.outputs[0].ref.connect(connector.end.ref));\r\n    this.outputs[0].on('disconnect', (_inst, _connector, _start, end) => this.outputs[0].ref.disconnect(end.ref));\r\n  }\r\n}\r\n","import { Flow } from \"../../core/flow\";\r\nimport { Vector } from \"../../core/vector\";\r\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\r\nimport { clamp } from \"../../utils/utils\";\r\nimport { Node } from '../../core/node';\r\nimport { InputType, Input, Slider, Toggle } from \"../../ui/index\";\r\nlet Tuna = require('../../lib/tuna.js');\r\n\r\nexport class PingPongEffect extends Node {\r\n  delayLeftSlider: Slider;\r\n  delayLeftInput: Input;\r\n  delayRightSlider: Slider;\r\n  delayRightInput: Input;\r\n  feedbackSlider: Slider;\r\n  feedbackInput: Input;\r\n  wetSlider: Slider;\r\n  wetInput: Input;\r\n  bypassToggle: Toggle;\r\n  pingPong: any;\r\n\r\n  static DefaultState = { delayLeft: 200, delayRight: 400, feedback: 0.3, wet: 0.5, bypass: false };\r\n\r\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\r\n    super(\r\n      flow, options.name || 'PingPong Effect',\r\n      options.position || new Vector(50, 50),\r\n      options.width || 230,\r\n      [{ name: 'in', dataType: 'audio' }], [{ name: 'out', dataType: 'audio' }],\r\n      {\r\n        style: options.style || { rowHeight: 10, spacing: 10 },\r\n        terminalStyle: options.terminalStyle || {},\r\n        state: options.state ? { ...PingPongEffect.DefaultState, ...options.state } : PingPongEffect.DefaultState\r\n      }\r\n    )\r\n\r\n    if (!(window as any).__tuna__) (window as any).__tuna__ = new Tuna(flow.flowConnect.audioContext);\r\n\r\n    this.pingPong = new (window as any).__tuna__.PingPongDelay();\r\n    this.inputs[0].ref = this.outputs[0].ref = this.pingPong;\r\n\r\n    Object.assign(this.pingPong, {\r\n      delayTimeLeft: this.state.delayLeft,\r\n      delayTimeRight: this.state.delayRight,\r\n      feedback: this.state.feedback,\r\n      wetLevel: this.state.wet\r\n    });\r\n\r\n    this.setupUI();\r\n\r\n    this.watch('delayLeft', (_oldVal, newVal) => {\r\n      if (newVal < 1 || newVal > 10000) this.state.delayLeft = clamp(newVal, 1, 10000);\r\n      this.pingPong.delayTimeLeft = this.state.delayLeft;\r\n    });\r\n    this.watch('delayRight', (_oldVal, newVal) => {\r\n      if (newVal < 1 || newVal > 10000) this.state.delayRight = clamp(newVal, 1, 10000);\r\n      this.pingPong.delayTimeRight = this.state.delayRight;\r\n    });\r\n    this.watch('feedback', (_oldVal, newVal) => {\r\n      if (newVal < 0 || newVal > 1) this.state.feedback = clamp(newVal, 0, 1);\r\n      this.pingPong.feedback = this.state.feedback;\r\n    });\r\n    this.watch('wet', (_oldVal, newVal) => {\r\n      if (newVal < 0 || newVal > 1) this.state.wet = clamp(newVal, 0, 1);\r\n      this.pingPong.wetLevel = this.state.wet;\r\n    });\r\n    this.watch('bypass', (_oldVal, newVal) => this.pingPong.bypass = newVal);\r\n\r\n    this.handleAudioConnections();\r\n  }\r\n\r\n  setupUI() {\r\n    this.delayLeftSlider = this.createSlider(1, 10000, { height: 10, propName: 'delayLeft', style: { grow: .5 } });\r\n    this.delayLeftInput = this.createInput({ propName: 'delayLeft', height: 20, style: { type: InputType.Number, grow: .2, precision: 4 } });\r\n    this.delayRightSlider = this.createSlider(1, 10000, { height: 10, propName: 'delayRight', style: { grow: .5 } });\r\n    this.delayRightInput = this.createInput({ propName: 'delayRight', height: 20, style: { type: InputType.Number, grow: .2, precision: 2 } });\r\n    this.feedbackSlider = this.createSlider(0, 1, { height: 10, propName: 'feedback', style: { grow: .5 } });\r\n    this.feedbackInput = this.createInput({ propName: 'feedback', height: 20, style: { type: InputType.Number, grow: .2, precision: 2 } });\r\n    this.wetSlider = this.createSlider(0, 1, { height: 10, propName: 'wet', style: { grow: .5 } });\r\n    this.wetInput = this.createInput({ propName: 'wet', height: 20, style: { type: InputType.Number, grow: .2, precision: 2 } });\r\n    this.bypassToggle = this.createToggle({ propName: 'bypass', style: { grow: .1 } });\r\n    this.ui.append([\r\n      this.createHozLayout([this.createLabel('Delay L', { style: { grow: .3 } }), this.delayLeftSlider, this.delayLeftInput], { style: { spacing: 5 } }),\r\n      this.createHozLayout([this.createLabel('Delay R', { style: { grow: .3 } }), this.delayRightSlider, this.delayRightInput], { style: { spacing: 5 } }),\r\n      this.createHozLayout([this.createLabel('Feedback', { style: { grow: .3 } }), this.feedbackSlider, this.feedbackInput], { style: { spacing: 5 } }),\r\n      this.createHozLayout([this.createLabel('Wet', { style: { grow: .3 } }), this.wetSlider, this.wetInput], { style: { spacing: 5 } }),\r\n      this.createHozLayout([this.createLabel('Bypass ?', { style: { grow: .3 } }), this.bypassToggle], { style: { spacing: 5 } })\r\n    ]);\r\n  }\r\n  handleAudioConnections() {\r\n    this.outputs[0].on('connect', (_inst, connector) => this.outputs[0].ref.connect(connector.end.ref));\r\n    this.outputs[0].on('disconnect', (_inst, _connector, _start, end) => this.outputs[0].ref.disconnect(end.ref));\r\n  }\r\n}\r\n","import { Flow } from \"../../core/flow\";\r\nimport { Vector } from \"../../core/vector\";\r\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\r\nimport { FlowConnectState } from \"../../flow-connect\";\r\nimport { Log } from \"../../utils/logger\";\r\nimport { Node } from '../../core/node';\r\nimport * as sourceui from '../../ui/source';\r\nimport { Toggle } from \"../../ui/index\";\r\n\r\nexport class Source extends Node {\r\n  fileInput: sourceui.Source;\r\n  loopToggle: Toggle;\r\n  source: AudioBufferSourceNode;\r\n\r\n  volumeGainNode: GainNode;\r\n  proxyParamSourceNode: AudioWorkletNode;\r\n\r\n  static DefaultState: any = { buffer: null, loop: true, prevChannelCount: -1 };\r\n\r\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\r\n    super(flow, options.name || 'Audio Source', options.position || new Vector(50, 50), options.width || 200,\r\n      [\r\n        { name: 'array-buffer', dataType: 'event' }, { name: 'gain', dataType: 'audioparam' },\r\n        { name: 'detune', dataType: 'audioparam' }, { name: 'playback-rate', dataType: 'audioparam' }\r\n      ],\r\n      [{ name: 'out', dataType: 'audio' }, { name: 'ended', dataType: 'event' }],\r\n      {\r\n        state: options.state ? { ...Source.DefaultState, ...options.state } : Source.DefaultState,\r\n        style: options.style || { rowHeight: 10, spacing: 15 },\r\n        terminalStyle: options.terminalStyle || {}\r\n      }\r\n    );\r\n\r\n    this.volumeGainNode = flow.flowConnect.audioContext.createGain();\r\n    this.proxyParamSourceNode = new AudioWorkletNode(\r\n      flow.flowConnect.audioContext,\r\n      'proxy-param-for-source',\r\n      { numberOfOutputs: 2, parameterData: { detune: 0, playbackRate: 1 } }\r\n    );\r\n\r\n    this.inputs[1].ref = this.volumeGainNode.gain;\r\n    this.inputs[2].ref = (this.proxyParamSourceNode.parameters as Map<string, AudioParam>).get('detune');\r\n    this.inputs[3].ref = (this.proxyParamSourceNode.parameters as Map<string, AudioParam>).get('playbackRate');\r\n    this.inputs[1].on('data', (_, data) => typeof data === 'number' && (this.inputs[1].ref.value = data));\r\n    this.inputs[2].on('data', (_, data) => typeof data === 'number' && (this.inputs[2].ref.value = data));\r\n    this.inputs[3].on('data', (_, data) => typeof data === 'number' && (this.inputs[3].ref.value = data));\r\n    this.outputs[0].ref = this.volumeGainNode;\r\n\r\n    this.setupUI();\r\n\r\n    this.loopToggle.on('change', () => {\r\n      if (this.state.loop) {\r\n        this.stopSource();\r\n        this.playSource();\r\n      } else this.source && (this.source.loop = this.state.loop);\r\n    });\r\n    this.inputs[0].on('event', (_, data) => {\r\n      if (!(data instanceof ArrayBuffer)) {\r\n        Log.error('Data received on Audio Source Node is not of type ArrayBuffer');\r\n        return;\r\n      }\r\n      this.processArrayBuffer(data);\r\n    });\r\n    this.fileInput.on('change', (_inst, _oldVal: File, newVal: File) => this.processFile(newVal));\r\n    this.fileInput.on('upload', (_inst, _oldVal: File, newVal: File) => this.processFile(newVal));\r\n\r\n    flow.flowConnect.on('start', () => this.playSource());\r\n    flow.flowConnect.on('stop', () => this.stopSource());\r\n\r\n    this.handleAudioConnections();\r\n  }\r\n\r\n  propagateChannelChange(newNoOfChannels: number) {\r\n    this.flow.executionGraph.propagate(this, (currNode: Node) => {\r\n      currNode.call('channel-count-change', newNoOfChannels);\r\n    });\r\n  }\r\n  async processFile(file: File) {\r\n    let cached = this.flow.flowConnect.arrayBufferCache.get(file.name + file.type);\r\n    if (!cached) {\r\n      cached = await file.arrayBuffer();\r\n      this.flow.flowConnect.arrayBufferCache.set(file.name + file.type, cached);\r\n    }\r\n    this.processArrayBuffer(cached);\r\n  }\r\n  async processArrayBuffer(arrayBuffer: ArrayBuffer) {\r\n    let cached = this.flow.flowConnect.audioBufferCache.get(arrayBuffer);\r\n    if (!cached) {\r\n      cached = await this.flow.flowConnect.audioContext.decodeAudioData(arrayBuffer);\r\n      this.flow.flowConnect.audioBufferCache.set(arrayBuffer, cached);\r\n\r\n      // If no. of channels has been changed, start an event propagation that will notify\r\n      // every node that has a direct/indirect connection in the graph from this node\r\n      if (this.state.prevChannelCount < 0 || this.state.prevChannelCount !== cached.numberOfChannels) {\r\n        this.propagateChannelChange(cached.numberOfChannels);\r\n      }\r\n      this.state.prevChannelCount = cached.numberOfChannels;\r\n    }\r\n    this.state.buffer = cached;\r\n\r\n    this.stopSource();\r\n    this.playSource();\r\n  }\r\n  playSource() {\r\n    if (this.flow.flowConnect.state === FlowConnectState.Stopped || !this.state.buffer) return;\r\n\r\n    let audioSource = new AudioBufferSourceNode(this.flow.flowConnect.audioContext);\r\n    audioSource.buffer = this.state.buffer;\r\n    audioSource.loop = this.state.loop;\r\n    this.source = audioSource;\r\n\r\n    this.proxyParamSourceNode.connect(audioSource.detune, 0);\r\n    this.proxyParamSourceNode.connect(audioSource.playbackRate, 1);\r\n    audioSource.connect(this.outputs[0].ref);\r\n    audioSource.start();\r\n  }\r\n  stopSource() {\r\n    if (this.source) {\r\n      this.source.stop();\r\n      this.source = null;\r\n    }\r\n  }\r\n  setupUI() {\r\n    this.fileInput = this.createSource({ input: true, output: true, height: 25, style: { grow: .7 } });\r\n    this.loopToggle = this.createToggle({ propName: 'loop', input: true, output: true, height: 10, style: { grow: .2 } });\r\n\r\n    this.ui.append([\r\n      this.createHozLayout([this.createLabel('File', { style: { grow: .3 } }), this.fileInput], { style: { spacing: 5 } }),\r\n      this.createHozLayout([this.createLabel('Loop ?'), this.loopToggle], { style: { spacing: 5 } })\r\n    ]);\r\n  }\r\n  handleAudioConnections() {\r\n    // Handle actual webaudio node stuff\r\n    this.outputs[0].on('connect', (_, connector) => {\r\n      this.state.buffer && this.propagateChannelChange(this.state.buffer.numberOfChannels);\r\n      this.outputs[0].ref.connect(connector.end.ref);\r\n    });\r\n    this.outputs[0].on('disconnect', (_inst, _connector, _start, end) => {\r\n      this.outputs[0].ref.disconnect(end.ref);\r\n    });\r\n  }\r\n}\r\n","import { Flow } from \"../../core/flow\";\r\nimport { Vector } from \"../../core/vector\";\r\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\r\nimport { clamp, denormalize } from \"../../utils/utils\";\r\nimport { Node } from '../../core/node';\r\nimport { Toggle, Slider2D, Slider, Input, InputType } from \"../../ui/index\";\r\n\r\nexport class SpatialPanner extends Node {\r\n  panSlider2D: Slider2D;\r\n  zSlider: Slider;\r\n  zInput: Input;\r\n  bypassToggle: Toggle;\r\n\r\n  panner: PannerNode;\r\n  inGain: GainNode;\r\n  outGain: GainNode;\r\n\r\n  posX: number;\r\n  posY: number;\r\n  posZ: number;\r\n  orientationX: number = 0.0;\r\n  orientationY: number = 0.0;\r\n  orientationZ: number = -1.0;\r\n\r\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\r\n    super(\r\n      flow, options.name || '3D Spatial Panner',\r\n      options.position || new Vector(50, 50),\r\n      options.width || 200,\r\n      [{ name: 'in', dataType: 'audio' }],\r\n      [{ name: 'out', dataType: 'audio' }],\r\n      {\r\n        state: options.state ?\r\n          { value: new Vector(.5, .5), z: -1, bypass: false, ...options.state }\r\n          : { value: new Vector(.5, .5), z: -1, bypass: false },\r\n        style: options.style || { rowHeight: 10, spacing: 10 },\r\n        terminalStyle: options.terminalStyle || {}\r\n      }\r\n    )\r\n\r\n    this.posX = this.flow.flowConnect.audioContext.listener.positionX.value;\r\n    this.posY = this.flow.flowConnect.audioContext.listener.positionY.value;\r\n    this.posZ = -1;\r\n\r\n    this.inGain = flow.flowConnect.audioContext.createGain();\r\n    this.outGain = flow.flowConnect.audioContext.createGain();\r\n    this.panner = new PannerNode(flow.flowConnect.audioContext, {\r\n      panningModel: 'HRTF',\r\n      distanceModel: 'linear',\r\n      positionX: this.posX,\r\n      positionY: this.posY,\r\n      positionZ: this.posZ,\r\n      orientationX: this.orientationX,\r\n      orientationY: this.orientationY,\r\n      orientationZ: this.orientationZ\r\n    });\r\n\r\n    this.inputs[0].ref = this.inGain;\r\n    this.outputs[0].ref = this.outGain;\r\n\r\n    this.setBypass();\r\n\r\n    this.setupUI();\r\n\r\n    this.watch('value', (_oldVal, newVal) => {\r\n      let x = denormalize(newVal.x, -1, 1);\r\n      let y = denormalize(newVal.y, -1, 1);\r\n      this.panner.positionX.value = x;\r\n      this.panner.positionY.value = y;\r\n    });\r\n    this.watch('z', (_oldVal, newVal) => {\r\n      if (newVal < -10000 || newVal > 10000) this.state.z = clamp(parseInt(newVal), -10000, 10000);\r\n      this.panner.positionZ.value = this.state.z;\r\n    });\r\n    this.watch('bypass', this.setBypass.bind(this));\r\n\r\n    this.handleAudioConnections();\r\n  }\r\n\r\n  setBypass() {\r\n    if (!this.state.bypass) {\r\n      this.inGain.disconnect();\r\n      this.inGain.connect(this.panner);\r\n      this.panner.connect(this.outGain);\r\n    } else {\r\n      this.panner.disconnect();\r\n      this.inGain.disconnect();\r\n      this.inGain.connect(this.outGain);\r\n    }\r\n  }\r\n\r\n  setupUI() {\r\n    this.panSlider2D = this.createSlider2D({ propName: 'value', height: this.width - this.style.padding * 2 });\r\n    this.zSlider = this.createSlider(-10000, 10000, { height: 10, propName: 'z', style: { grow: .6 } });\r\n    this.zInput = this.createInput({ propName: 'z', height: 20, style: { type: InputType.Number, grow: .3, precision: 0 } });\r\n    this.bypassToggle = this.createToggle({ propName: 'bypass', style: { grow: .15 } });\r\n    this.ui.append([\r\n      this.panSlider2D,\r\n      this.createHozLayout([this.createLabel('Z', { style: { grow: .1 } }), this.zSlider, this.zInput], { style: { spacing: 5 } }),\r\n      this.createHozLayout([this.createLabel('Bypass ?', { style: { grow: .3 } }), this.bypassToggle], { style: { spacing: 5 } })\r\n    ]);\r\n  }\r\n  handleAudioConnections() {\r\n    this.outputs[0].on('connect', (_inst, connector) => this.outputs[0].ref.connect(connector.end.ref));\r\n    this.outputs[0].on('disconnect', (_inst, _connector, _start, end) => this.outputs[0].ref.disconnect(end.ref));\r\n  }\r\n}\r\n","import { Flow } from \"../../core/flow\";\r\nimport { Vector } from \"../../core/vector\";\r\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\r\nimport { clamp, denormalize, normalize } from \"../../utils/utils\";\r\nimport { Node } from '../../core/node';\r\nimport { Align } from \"../../common/enums\";\r\nimport { Color } from \"../../core/color\";\r\nimport { Slider, CanvasType, Display, Label, Select } from \"../../ui/index\";\r\n\r\nexport class SpectrogramAnalyser extends Node {\r\n  colorScaleSelect: Select;\r\n  fftSizeSlider: Slider;\r\n  fftSizeLabel: Label;\r\n  display: Display;\r\n\r\n  analyser: AnalyserNode;\r\n\r\n  static DefaultState = { fftSize: 11, colorScale: 'Heated Metal' };\r\n\r\n  colorScales = ['Heated Metal', 'Monochrome', 'Inverted Monochrome', 'Spectrum'];\r\n  fftSizes = [32, 64, 128, 256, 512, 1024, 2048, 4096, 8192, 16384, 32768];\r\n  timerId: number;\r\n\r\n  colorScaleToInterp: Record<string, Function> = {}\r\n  currInterpolator: Function;\r\n\r\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\r\n    super(\r\n      flow, options.name || 'Spectrogram Analyser',\r\n      options.position || new Vector(50, 50),\r\n      options.width || 350,\r\n      [{ name: 'in', dataType: 'audio' }], [{ name: 'out', dataType: 'audio' }],\r\n      {\r\n        style: options.style || { rowHeight: 10, spacing: 10 },\r\n        terminalStyle: options.terminalStyle || {},\r\n        state: options.state ? { ...SpectrogramAnalyser.DefaultState, ...options.state } : SpectrogramAnalyser.DefaultState\r\n      }\r\n    )\r\n\r\n    this.analyser = flow.flowConnect.audioContext.createAnalyser();\r\n    this.analyser.fftSize = this.getFFTSize();\r\n    this.inputs[0].ref = this.outputs[0].ref = this.analyser;\r\n\r\n    this.setupUI();\r\n\r\n    this.watch('fftSize', (_oldVal, newVal) => {\r\n      if (newVal < 5 || newVal > 15) this.state.fftSize = clamp(Math.round(newVal), 5, 15);\r\n      let actualFFTSize = this.getFFTSize();\r\n      this.fftSizeLabel.text = actualFFTSize;\r\n      this.analyser.fftSize = actualFFTSize;\r\n    });\r\n    this.watch('colorScale', (_oldVal, newVal) => {\r\n      if (!this.colorScales.includes(newVal)) this.state.colorScale = this.colorScales[0];\r\n      this.currInterpolator = this.colorScaleToInterp[this.state.colorScale];\r\n    });\r\n\r\n    this.handleAudioConnections();\r\n\r\n    this.colorScaleToInterp['Heated Metal'] = Color.scale([\r\n      [0, 0, 0, 1], [160, 32, 240, 1], [255, 0, 0, 1], [255, 165, 0, 1], [255, 255, 0, 1], [255, 255, 255, 1]\r\n    ]);\r\n    this.colorScaleToInterp['Monochrome'] = Color.scale([\r\n      [0, 0, 0, 1], [255, 255, 255, 1]\r\n    ]);\r\n    this.colorScaleToInterp['Inverted Monochrome'] = Color.scale([\r\n      [255, 255, 255, 1], [0, 0, 0, 1]\r\n    ]);\r\n    this.colorScaleToInterp['Spectrum'] = Color.scale([\r\n      [135, 206, 235, 1], [0, 255, 0, 1], [255, 255, 0, 1], [255, 165, 0, 1], [255, 0, 0, 1]\r\n    ]);\r\n\r\n    this.currInterpolator = this.colorScaleToInterp['Heated Metal'];\r\n\r\n    this.display.displayConfigs[0].shouldRender = false;\r\n    this.flow.flowConnect.on('start', () => {\r\n      this.display.displayConfigs[0].shouldRender = true;\r\n    });\r\n    this.flow.flowConnect.on('stop', () => {\r\n      this.display.displayConfigs[0].shouldRender = false;\r\n    });\r\n  }\r\n\r\n  getFFTSize() {\r\n    return this.fftSizes[clamp(Math.round(this.state.fftSize), 5, 15) - 5];\r\n  }\r\n\r\n  setupUI() {\r\n    this.fftSizeSlider = this.createSlider(5, 15, { height: 10, propName: 'fftSize', style: { grow: .6, precision: 0 } });\r\n    this.fftSizeLabel = this.createLabel(this.getFFTSize(), { height: 20, style: { grow: .2, align: Align.Right } });\r\n    this.display = this.createDisplay(200, [{\r\n      auto: true,\r\n      canvasType: CanvasType.HTMLCanvasElement,\r\n      renderer: (context, width, height) => this.customRenderer(context, width, height)\r\n    }]);\r\n    this.colorScaleSelect = this.createSelect(this.colorScales, { propName: 'colorScale', height: 15, style: { grow: .6 } });\r\n\r\n    this.ui.append([\r\n      this.display,\r\n      this.createHozLayout([\r\n        this.createLabel('FFT Size', { style: { grow: .2 } }), this.fftSizeSlider, this.fftSizeLabel\r\n      ], { style: { spacing: 5 } }),\r\n      this.createHozLayout([this.createLabel('Color Scale', { style: { grow: .2 } }), this.colorScaleSelect], { style: { spacing: 5 } })\r\n    ]);\r\n  }\r\n\r\n  customRenderer(context: OffscreenCanvasRenderingContext2D | CanvasRenderingContext2D, width: number, height: number): boolean {\r\n    let value,\r\n      i = 0,\r\n      frequencyBinCount = this.analyser.frequencyBinCount,\r\n      frequencyData = new Uint8Array(frequencyBinCount),\r\n      barHeight = height / frequencyBinCount;\r\n\r\n    this.analyser.getByteFrequencyData(frequencyData);\r\n\r\n    for (; i < frequencyBinCount; i++) {\r\n      value = frequencyData[i];\r\n      context.fillStyle = this.currInterpolator(value / 256);\r\n      context.fillRect(width - 1, denormalize(1 - normalize(i, 0, frequencyBinCount), 0, height), 1, barHeight);\r\n    }\r\n\r\n    context.globalCompositeOperation = \"copy\";\r\n    context.drawImage(context.canvas, -1, 0);\r\n    context.globalCompositeOperation = \"source-over\";\r\n\r\n    return true;\r\n  }\r\n\r\n  handleAudioConnections() {\r\n    this.outputs[0].on('connect', (_inst, connector) => this.outputs[0].ref.connect(connector.end.ref));\r\n    this.outputs[0].on('disconnect', (_inst, _connector, _start, end) => this.outputs[0].ref.disconnect(end.ref));\r\n  }\r\n}\r\n","import { Flow } from \"../../core/flow\";\r\nimport { Vector } from \"../../core/vector\";\r\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\r\nimport { clamp } from \"../../utils/utils\";\r\nimport { Node } from '../../core/node';\r\nimport { InputType, Input, Slider, Toggle } from \"../../ui/index\";\r\n\r\nexport class StereoPanner extends Node {\r\n  panSlider: Slider;\r\n  panInput: Input;\r\n  bypassToggle: Toggle;\r\n  panner: StereoPannerNode;\r\n  inGain: GainNode;\r\n  outGain: GainNode;\r\n\r\n  static DefaultState = { pan: 0, bypass: false };\r\n\r\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\r\n    super(\r\n      flow, options.name || 'Stereo Panner',\r\n      options.position || new Vector(50, 50),\r\n      options.width || 200,\r\n      [{ name: 'in', dataType: 'audio' }],\r\n      [{ name: 'out', dataType: 'audio' }],\r\n      {\r\n        style: options.style || { rowHeight: 10, spacing: 10 },\r\n        terminalStyle: options.terminalStyle || {},\r\n        state: options.state ? { ...StereoPanner.DefaultState, ...options.state } : StereoPanner.DefaultState\r\n      }\r\n    )\r\n\r\n    this.inGain = flow.flowConnect.audioContext.createGain();\r\n    this.outGain = flow.flowConnect.audioContext.createGain();\r\n    this.panner = new StereoPannerNode(flow.flowConnect.audioContext);\r\n    this.panner.pan.value = this.state.pan;\r\n    this.inputs[0].ref = this.inGain;\r\n    this.outputs[0].ref = this.outGain;\r\n\r\n    this.setBypass();\r\n\r\n    this.setupUI();\r\n\r\n    this.watch('pan', (_oldVal, newVal) => {\r\n      if (newVal < -1 || newVal > 1) this.state.pan = clamp(newVal, -1, 1);\r\n      this.panner.pan.value = this.state.pan;\r\n    });\r\n    this.watch('bypass', this.setBypass.bind(this));\r\n\r\n    this.handleAudioConnections();\r\n  }\r\n\r\n  setBypass() {\r\n    if (!this.state.bypass) {\r\n      this.inGain.disconnect();\r\n      this.inGain.connect(this.panner);\r\n      this.panner.connect(this.outGain);\r\n    } else {\r\n      this.panner.disconnect();\r\n      this.inGain.disconnect();\r\n      this.inGain.connect(this.outGain);\r\n    }\r\n  }\r\n\r\n  setupUI() {\r\n    this.panSlider = this.createSlider(-1, 1, { height: 10, propName: 'pan', style: { grow: .5 } });\r\n    this.panInput = this.createInput({ propName: 'pan', height: 20, style: { type: InputType.Number, grow: .2, precision: 2 } });\r\n    this.bypassToggle = this.createToggle({ propName: 'bypass', style: { grow: .15 } });\r\n    this.ui.append([\r\n      this.createHozLayout([this.createLabel('Pan', { style: { grow: .3 } }), this.panSlider, this.panInput], { style: { spacing: 5 } }),\r\n      this.createHozLayout([this.createLabel('Bypass ?', { style: { grow: .3 } }), this.bypassToggle], { style: { spacing: 5 } })\r\n    ]);\r\n  }\r\n  handleAudioConnections() {\r\n    this.outputs[0].on('connect', (_inst, connector) => this.outputs[0].ref.connect(connector.end.ref));\r\n    this.outputs[0].on('disconnect', (_inst, _connector, _start, end) => this.outputs[0].ref.disconnect(end.ref));\r\n  }\r\n}\r\n","import { Flow } from \"../../core/flow\";\r\nimport { Vector } from \"../../core/vector\";\r\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\r\nimport { clamp } from \"../../utils/utils\";\r\nimport { Node } from '../../core/node';\r\nimport { InputType, Input, Slider, Toggle } from \"../../ui/index\";\r\nlet Tuna = require('../../lib/tuna.js');\r\n\r\nexport class TremoloEffect extends Node {\r\n  intensitySlider: Slider;\r\n  intensityInput: Input;\r\n  stereoPhaseSlider: Slider;\r\n  stereoPhaseInput: Input;\r\n  rateSlider: Slider;\r\n  rateInput: Input;\r\n  bypassToggle: Toggle;\r\n  tremolo: any;\r\n\r\n  static DefaultState = { intensity: 0.3, stereoPhase: 0, rate: 5, bypass: false };\r\n\r\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\r\n    super(\r\n      flow, options.name || 'Tremolo Effect',\r\n      options.position || new Vector(50, 50),\r\n      options.width || 230,\r\n      [{ name: 'in', dataType: 'audio' }],\r\n      [{ name: 'out', dataType: 'audio' }],\r\n      {\r\n        style: options.style || { rowHeight: 10, spacing: 10 },\r\n        terminalStyle: options.terminalStyle || {},\r\n        state: options.state ? { ...TremoloEffect.DefaultState, ...options.state } : TremoloEffect.DefaultState\r\n      }\r\n    )\r\n\r\n    if (!(window as any).__tuna__) (window as any).__tuna__ = new Tuna(flow.flowConnect.audioContext);\r\n\r\n    this.tremolo = new (window as any).__tuna__.Tremolo();\r\n    this.inputs[0].ref = this.outputs[0].ref = this.tremolo;\r\n\r\n    Object.assign(this.tremolo, {\r\n      intensity: this.state.intensity,\r\n      stereoPhase: this.state.stereoPhase,\r\n      rate: this.state.rate,\r\n    });\r\n\r\n    this.setupUI();\r\n\r\n    this.watch('intensity', (_oldVal, newVal) => {\r\n      if (newVal < 0 || newVal > 1) this.state.intensity = clamp(newVal, 0, 1);\r\n      this.tremolo.intensity = this.state.intensity;\r\n    });\r\n    this.watch('stereoPhase', (_oldVal, newVal) => {\r\n      if (newVal < 0 || newVal > 180) this.state.stereoPhase = clamp(newVal, 0, 180);\r\n      this.tremolo.stereoPhase = this.state.stereoPhase;\r\n    });\r\n    this.watch('rate', (_oldVal, newVal) => {\r\n      if (newVal < 0.1 || newVal > 11) this.state.rate = clamp(newVal, 0.1, 11);\r\n      this.tremolo.rate = this.state.rate;\r\n    });\r\n    this.watch('bypass', (_oldVal, newVal) => this.tremolo.bypass = newVal);\r\n\r\n    this.handleAudioConnections();\r\n  }\r\n\r\n  setupUI() {\r\n    this.intensitySlider = this.createSlider(0, 1, { height: 10, propName: 'intensity', style: { grow: .5 } });\r\n    this.intensityInput = this.createInput({ propName: 'intensity', height: 20, style: { type: InputType.Number, grow: .2, precision: 4 } });\r\n    this.stereoPhaseSlider = this.createSlider(0, 180, { height: 10, propName: 'stereoPhase', style: { grow: .5 } });\r\n    this.stereoPhaseInput = this.createInput({ propName: 'stereoPhase', height: 20, style: { type: InputType.Number, grow: .2, precision: 2 } });\r\n    this.rateSlider = this.createSlider(0.1, 11, { height: 10, propName: 'rate', style: { grow: .5 } });\r\n    this.rateInput = this.createInput({ propName: 'rate', height: 20, style: { type: InputType.Number, grow: .2, precision: 2 } });\r\n    this.bypassToggle = this.createToggle({ propName: 'bypass', style: { grow: .1 } });\r\n    this.ui.append([\r\n      this.createHozLayout([this.createLabel('Intensity', { style: { grow: .3 } }), this.intensitySlider, this.intensityInput], { style: { spacing: 5 } }),\r\n      this.createHozLayout([this.createLabel('Stereo Phase', { style: { grow: .3 } }), this.stereoPhaseSlider, this.stereoPhaseInput], { style: { spacing: 5 } }),\r\n      this.createHozLayout([this.createLabel('Rate', { style: { grow: .3 } }), this.rateSlider, this.rateInput], { style: { spacing: 5 } }),\r\n      this.createHozLayout([this.createLabel('Bypass ?', { style: { grow: .3 } }), this.bypassToggle], { style: { spacing: 5 } })\r\n    ]);\r\n  }\r\n  handleAudioConnections() {\r\n    this.outputs[0].on('connect', (_inst, connector) => this.outputs[0].ref.connect(connector.end.ref));\r\n    this.outputs[0].on('disconnect', (_inst, _connector, _start, end) => this.outputs[0].ref.disconnect(end.ref));\r\n  }\r\n}\r\n","import { Flow } from \"../../core/flow\";\r\nimport { Vector } from \"../../core/vector\";\r\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\r\nimport { clamp } from \"../../utils/utils\";\r\nimport { Node } from '../../core/node';\r\nimport { Align } from \"../../common/enums\";\r\nimport { Slider, Display, Label } from \"../../ui/index\";\r\n\r\nexport class WaveformAnalyser extends Node {\r\n  fftSizeSlider: Slider;\r\n  fftSizeLabel: Label;\r\n  display: Display;\r\n\r\n  analyser: AnalyserNode;\r\n\r\n  static DefaultState = { fftSize: 11 };\r\n\r\n  fftSizes = [32, 64, 128, 256, 512, 1024, 2048, 4096, 8192, 16384, 32768];\r\n\r\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\r\n    super(\r\n      flow, options.name || 'Waveform Analyser',\r\n      options.position || new Vector(50, 50),\r\n      options.width || 350,\r\n      [{ name: 'in', dataType: 'audio' }], [{ name: 'out', dataType: 'audio' }],\r\n      {\r\n        style: options.style || { rowHeight: 10, spacing: 10 },\r\n        terminalStyle: options.terminalStyle || {},\r\n        state: options.state ? { ...WaveformAnalyser.DefaultState, ...options.state } : WaveformAnalyser.DefaultState\r\n      }\r\n    )\r\n\r\n    this.analyser = flow.flowConnect.audioContext.createAnalyser();\r\n    this.analyser.fftSize = this.getFFTSize();\r\n    this.inputs[0].ref = this.outputs[0].ref = this.analyser;\r\n\r\n    this.setupUI();\r\n\r\n    this.watch('fftSize', (_oldVal, newVal) => {\r\n      if (newVal < 5 || newVal > 15) this.state.fftSize = clamp(Math.round(newVal), 5, 15);\r\n      let actualFFTSize = this.getFFTSize();\r\n      this.fftSizeLabel.text = actualFFTSize;\r\n      this.analyser.fftSize = actualFFTSize;\r\n    });\r\n\r\n    this.handleAudioConnections();\r\n  }\r\n\r\n  getFFTSize() {\r\n    return this.fftSizes[clamp(Math.round(this.state.fftSize), 5, 15) - 5];\r\n  }\r\n\r\n  setupUI() {\r\n    this.fftSizeSlider = this.createSlider(5, 15, { height: 10, propName: 'fftSize', style: { grow: .6, precision: 0 } });\r\n    this.fftSizeLabel = this.createLabel(this.getFFTSize(), { height: 20, style: { grow: .2, align: Align.Right } });\r\n    this.display = this.createDisplay(200, [{\r\n      auto: true,\r\n      clear: true,\r\n      renderer: (...args) => this.customRenderer(args[0], args[1], args[2])\r\n    }]);\r\n\r\n    this.ui.append([\r\n      this.display,\r\n      this.createHozLayout([\r\n        this.createLabel('FFT Size', { style: { grow: .2 } }), this.fftSizeSlider, this.fftSizeLabel\r\n      ], { style: { spacing: 5 } })\r\n    ]);\r\n  }\r\n\r\n  customRenderer(context: OffscreenCanvasRenderingContext2D | CanvasRenderingContext2D, width: number, height: number): boolean {\r\n    let value, percent, offset, barWidth,\r\n      frequencyBinCount = this.analyser.frequencyBinCount,\r\n      waveformData = new Uint8Array(frequencyBinCount),\r\n      orgHeight = height,\r\n      i = 1;\r\n\r\n    this.analyser.getByteTimeDomainData(waveformData);\r\n\r\n    value = waveformData[0];\r\n    percent = value / 256;\r\n    height = orgHeight * percent;\r\n    offset = orgHeight - height - 1;\r\n    barWidth = width / frequencyBinCount;\r\n\r\n    context.strokeStyle = \"#000\";\r\n    context.beginPath();\r\n    context.moveTo(0, offset);\r\n    for (; i < frequencyBinCount; i++) {\r\n      value = waveformData[i];\r\n      percent = value / 256;\r\n      height = orgHeight * percent;\r\n      offset = orgHeight - height - 1;\r\n      barWidth = width / frequencyBinCount;\r\n      context.lineTo(i * barWidth, offset);\r\n    }\r\n    context.stroke();\r\n\r\n    return true;\r\n  }\r\n\r\n  handleAudioConnections() {\r\n    this.outputs[0].on('connect', (_inst, connector) => this.outputs[0].ref.connect(connector.end.ref));\r\n    this.outputs[0].on('disconnect', (_inst, _connector, _start, end) => this.outputs[0].ref.disconnect(end.ref));\r\n  }\r\n}\r\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { Node } from \"../../core/node\";\n\nexport class ArrayIndex extends Node {\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'Array Index', options.position || new Vector(50, 50), options.width || 120,\n      [{ name: 'data', dataType: 'array' }, { name: 'index', dataType: 'number' }],\n      [{ name: 'value', dataType: 'any' }],\n      {\n        state: options.state ? { ...options.state } : {},\n        style: options.style || { rowHeight: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.on('process', (_, inputs) => {\n      if (!inputs || !inputs[0] || typeof inputs[1] !== 'number') return;\n      this.setOutputs(0, inputs[0][inputs[1]]);\n    });\n  }\n}\n","import { Flow } from \"../../core/flow\";\r\nimport { Vector } from \"../../core/vector\";\r\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\r\nimport { Node } from \"../../core/node\";\r\nimport { Align } from \"../../common/enums\";\r\nimport { InputType, Input, Toggle, HorizontalLayout, Stack } from \"../../ui/index\";\r\n\r\nexport class ArraySource extends Node {\r\n  arrayInput: Input;\r\n  minInput: Input;\r\n  maxInput: Input;\r\n  numberToggle: Toggle;\r\n  rangeToggle: Toggle;\r\n  stepInput: Input;\r\n  rangeLayout: HorizontalLayout;\r\n  rangeStack: Stack\r\n\r\n  static DefaultState: any = { number: true, range: false, min: 0, max: 100, step: 0.1, value: [] };\r\n\r\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\r\n    super(flow, options.name || 'Array Source', options.position || new Vector(50, 50), options.width || 180, [],\r\n      [{ name: 'array', dataType: 'array' }],\r\n      {\r\n        state: options.state ? { ...ArraySource.DefaultState, ...options.state } : ArraySource.DefaultState,\r\n        style: options.style || { rowHeight: 10 },\r\n        terminalStyle: options.terminalStyle || {}\r\n      }\r\n    );\r\n\r\n\r\n    this.setupUI();\r\n\r\n    this.minInput.on('change', () => this.process());\r\n    this.maxInput.on('change', () => this.process());\r\n    this.numberToggle.on('change', () => this.process());\r\n    this.arrayInput.on('change', () => this.process());\r\n    this.stepInput.on('change', () => this.process());\r\n    this.on('process', () => this.process());\r\n\r\n    this.watch('number', () => this.numberToggled());\r\n    this.watch('range', () => this.rangeToggled());\r\n\r\n    this.numberToggled();\r\n    this.rangeToggled();\r\n  }\r\n\r\n  numberToggled() {\r\n    this.rangeLayout.visible = this.state.number;\r\n    if (!this.state.number) this.state.range = false;\r\n  }\r\n  rangeToggled() {\r\n    if (this.state.number && this.state.range) {\r\n      this.arrayInput.visible = false;\r\n      this.rangeStack.visible = true;\r\n    } else {\r\n      this.arrayInput.visible = true;\r\n      this.rangeStack.visible = false;\r\n    }\r\n  }\r\n  process() {\r\n    if (this.state.range) {\r\n      let values = [];\r\n      for (let i = this.state.min; i <= this.state.max; i += this.state.step) values.push(i);\r\n      this.state.value = values;\r\n    } else {\r\n      if (!this.arrayInput.inputEl.validity.patternMismatch) {\r\n        if (!this.arrayInput.value || this.arrayInput.value === '') return;\r\n        let value: any[] = (this.arrayInput.value as string).split(',');\r\n        if (this.state.number) value = value.map(item => Number(item.trim()));\r\n        this.state.value = value;\r\n      }\r\n    }\r\n    this.setOutputs(0, this.state.value);\r\n  }\r\n  setupUI() {\r\n    this.numberToggle = this.createToggle({ propName: 'number', input: true, output: true, height: 10, style: { grow: .2 } });\r\n    this.rangeToggle = this.createToggle({ propName: 'range', input: true, output: true, height: 10, style: { grow: .2 } });\r\n    this.rangeLayout = this.createHozLayout([this.createLabel('Range ?', { style: { grow: .4 } }), this.rangeToggle], { style: { spacing: 10 } });\r\n    this.minInput = this.createInput({\r\n      propName: 'min', height: 20, style: { type: InputType.Number, grow: .4, step: 'any' }\r\n    });\r\n    this.maxInput = this.createInput({\r\n      propName: 'max', height: 20, style: { type: InputType.Number, grow: .4, step: 'any' }\r\n    });\r\n    let rangeInputLayout = this.createHozLayout([\r\n      this.minInput, this.createLabel('to', { style: { grow: .2, align: Align.Center } }), this.maxInput\r\n    ], { style: { spacing: 5 } });\r\n    this.stepInput = this.createInput({ propName: 'step', height: 20, style: { type: InputType.Number, step: 'any', grow: .6 } });\r\n    this.rangeStack = this.createStack({\r\n      childs: [\r\n        rangeInputLayout,\r\n        this.createHozLayout([\r\n          this.createLabel('Step', { style: { grow: .4 } }),\r\n          this.stepInput\r\n        ], { style: { spacing: 5 } })\r\n      ], style: { spacing: 10 }\r\n    });\r\n    this.arrayInput = this.createInput({ value: '', height: 20, style: { pattern: '^[^,]+(\\s*,\\s*[^,]+)*$' } });\r\n    this.ui.append([\r\n      this.createHozLayout([this.createLabel('Numbers ?', { style: { grow: .4 } }), this.numberToggle], { style: { spacing: 10 } }),\r\n      this.rangeLayout,\r\n      this.rangeStack,\r\n      this.arrayInput\r\n    ]);\r\n  }\r\n}\r\n","import { Flow } from \"../../core/flow\";\r\nimport { Vector } from \"../../core/vector\";\r\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\r\nimport { Node } from \"../../core/node\";\r\nimport { Toggle } from \"../../ui/index\";\r\n\r\nexport class BooleanSource extends Node {\r\n  toggle: Toggle;\r\n\r\n  static DefaultState = { value: false };\r\n\r\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\r\n    super(flow, options.name || 'Boolean Source', options.position || new Vector(50, 50), options.width || 130, [],\r\n      [{ name: 'value', dataType: 'boolean' }],\r\n      {\r\n        state: options.state ? { ...BooleanSource.DefaultState, ...options.state } : BooleanSource.DefaultState,\r\n        style: options.style || { rowHeight: 10 },\r\n        terminalStyle: options.terminalStyle || {}\r\n      }\r\n    );\r\n\r\n    this.setupUI();\r\n\r\n    this.toggle.on('change', () => this.process());\r\n    this.on('process', () => this.process());\r\n  }\r\n\r\n\r\n  process() { this.setOutputs(0, this.state.value); }\r\n  setupUI() {\r\n    this.toggle = this.createToggle({ propName: 'value', input: true, output: true, height: 10, style: { grow: .4 } });\r\n    this.ui.append(this.createHozLayout([\r\n      this.createLabel('Value'),\r\n      this.toggle\r\n    ], { style: { spacing: 20 } }));\r\n  }\r\n}\r\n","import { Flow } from \"../../core/flow\";\r\nimport { Vector } from \"../../core/vector\";\r\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\r\nimport { Node } from \"../../core/node\";\r\nimport { InputType, Input } from \"../../ui/index\";\r\n\r\nexport class Buffer extends Node {\r\n  sizeInput: Input;\r\n\r\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\r\n    super(flow, options.name || 'Buffer', options.position || new Vector(50, 50), options.width || 150,\r\n      [{ name: 'data', dataType: 'any' }],\r\n      [{ name: 'buffer', dataType: 'array' }],\r\n      {\r\n        state: options.state ? { buffer: [], size: 10, ...options.state } : { buffer: [], size: 10 },\r\n        style: options.style || { rowHeight: 10 },\r\n        terminalStyle: options.terminalStyle || {}\r\n      }\r\n    );\r\n\r\n    this.setupUI();\r\n\r\n    this.sizeInput.on('change', () => this.process(this.getInputs()));\r\n    this.on('process', (_, inputs) => this.process(inputs));\r\n  }\r\n\r\n  process(inputs: any[]) {\r\n    if (inputs[0] === null || typeof inputs[0] === 'undefined') return;\r\n    if (this.state.size <= 0) this.state.size = 1;\r\n    if (this.state.buffer.length === this.state.size) {\r\n      this.state.buffer.shift();\r\n    } else if (this.state.buffer.length > this.state.size) {\r\n      this.state.buffer.splice(0, this.state.buffer.length - this.state.size + 1);\r\n    }\r\n    this.state.buffer.push(inputs[0]);\r\n    this.setOutputs('buffer', this.state.buffer);\r\n  }\r\n  setupUI() {\r\n    this.sizeInput = this.createInput({ propName: 'size', input: true, output: true, height: 20, style: { type: InputType.Number, grow: .7 } });\r\n    this.ui.append(this.createHozLayout([\r\n      this.createLabel('Size', { style: { grow: .3 } }),\r\n      this.sizeInput\r\n    ], { style: { spacing: 20 } }));\r\n  }\r\n}\r\n","import { Flow } from \"../../core/flow\";\r\nimport { Vector } from \"../../core/vector\";\r\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\r\nimport { Node } from \"../../core/node\";\r\nimport { Select } from \"../../ui/index\";\r\n\r\nexport class Compare extends Node {\r\n  select: Select\r\n\r\n  static DefaultState = { value: '==' };\r\n\r\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\r\n    super(flow, options.name || 'Compare', options.position || new Vector(50, 50), options.width || 150,\r\n      [{ name: 'x', dataType: 'any' }, { name: 'y', dataType: 'any' }],\r\n      [{ name: 'result', dataType: 'boolean' }],\r\n      {\r\n        state: options.state ? { ...Compare.DefaultState, ...options.state } : Compare.DefaultState,\r\n        style: options.style || { rowHeight: 10 },\r\n        terminalStyle: options.terminalStyle || {}\r\n      }\r\n    );\r\n\r\n    this.setupUI();\r\n\r\n    this.select.on('change', () => this.process(this.getInputs()));\r\n    this.on('process', (_, inputs) => this.process(inputs));\r\n  }\r\n\r\n  process(inputs: any[]) {\r\n    if (inputs[0] === null || typeof inputs[0] === 'undefined' || inputs[1] === null || typeof inputs[1] === 'undefined') return;\r\n    let res;\r\n    switch (this.state.value) {\r\n      case '==': { res = inputs[0] == inputs[1]; break; }\r\n      case '===': { res = inputs[0] === inputs[1]; break; }\r\n      case '!=': { res = inputs[0] != inputs[1]; break; }\r\n      case '!==': { res = inputs[0] !== inputs[1]; break; }\r\n      case '<': { res = inputs[0] < inputs[1]; break; }\r\n      case '<=': { res = inputs[0] <= inputs[1]; break; }\r\n      case '>': { res = inputs[0] > inputs[1]; break; }\r\n      case '>=': { res = inputs[0] >= inputs[1]; break; }\r\n      case '&&': { res = inputs[0] && inputs[1]; break; }\r\n      case '||': { res = inputs[0] || inputs[1]; break; }\r\n      default: res = false;\r\n    }\r\n    this.setOutputs(0, res);\r\n  }\r\n  setupUI() {\r\n    let select = this.createSelect(\r\n      ['==', '===', '!=', '!==', '<', '<=', '>', '>=', '&&', '||'],\r\n      { propName: 'value', input: true, output: true, height: 15, style: { fontSize: '14px' } }\r\n    );\r\n    this.ui.append(select);\r\n  }\r\n}\r\n","import { Flow } from \"../../core/flow\";\r\nimport { Vector } from \"../../core/vector\";\r\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\r\nimport { List, ListNode } from \"../../utils/linked-list\";\r\nimport { Node } from \"../../core/node\";\r\nimport { InputType } from \"../../ui/index\";\r\n\r\ninterface BufferedEvent {\r\n  data: any;\r\n  timeoutId: number,\r\n  start: number,\r\n  remaining?: number\r\n}\r\n\r\nexport class Delay extends Node {\r\n\r\n  static DefaultState: any = { delay: 0, eventQueue: null };\r\n\r\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\r\n    super(flow, options.name || 'Delay', options.position || new Vector(50, 50), options.width || 130,\r\n      [{ name: 'event', dataType: 'event' }],\r\n      [{ name: 'trigger', dataType: 'event' }],\r\n      {\r\n        state: options.state ? { ...Delay.DefaultState, ...options.state } : Delay.DefaultState,\r\n        style: options.style || { rowHeight: 10 },\r\n        terminalStyle: options.terminalStyle || {}\r\n      }\r\n    );\r\n\r\n    this.setupUI();\r\n\r\n    this.state.eventQueue = new List<BufferedEvent>((a, b) => a.timeoutId - b.timeoutId);\r\n    this.state.eventQueue.on('removefirst', () => {\r\n      while (this.state.eventQueue.head && (performance.now() - this.state.eventQueue.head.data.start) >= this.state.delay) {\r\n        let bufferedEvent = this.state.eventQueue.removeFirst(false);\r\n        this.outputs[0].emit(bufferedEvent.data);\r\n      }\r\n    });\r\n    this.inputs[0].on('event', (_, data) => {\r\n      let eventNode = new ListNode<BufferedEvent>();\r\n      eventNode.data = {\r\n        data,\r\n        timeoutId: window.setTimeout(() => this.triggerEvent(eventNode), this.state.delay),\r\n        start: performance.now()\r\n      }\r\n      this.state.eventQueue.append(eventNode);\r\n    });\r\n    flow.on('start', () => {\r\n      this.state.eventQueue.forEach((eventNode: ListNode<BufferedEvent>) => {\r\n        eventNode.data.start = performance.now() + eventNode.data.remaining - this.state.delay;\r\n        eventNode.data.timeoutId = window.setTimeout(() => this.triggerEvent(eventNode), eventNode.data.remaining);\r\n      })\r\n    });\r\n    flow.on('stop', () => {\r\n      this.state.eventQueue.forEach((eventNode: ListNode<BufferedEvent>) => {\r\n        clearTimeout(eventNode.data.timeoutId);\r\n        eventNode.data.remaining = performance.now() - eventNode.data.start;\r\n      });\r\n    });\r\n  }\r\n\r\n  triggerEvent(eventNode: ListNode<BufferedEvent>) {\r\n    if (eventNode === this.state.eventQueue.head) {\r\n      let bufferedEvent = this.state.eventQueue.removeFirst();\r\n      this.outputs[0].emit(bufferedEvent.data);\r\n    }\r\n  }\r\n  setupUI() {\r\n    this.ui.append(this.createHozLayout([\r\n      this.createLabel('Delay', { style: { grow: .3 } }),\r\n      this.createInput({ propName: 'delay', input: true, output: true, height: 20, style: { type: InputType.Number, grow: .7 } })\r\n    ], { style: { spacing: 10 } }));\r\n  }\r\n}\r\n","import { Flow } from \"../../core/flow\";\r\nimport { Vector } from \"../../core/vector\";\r\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\r\nimport { Node } from \"../../core/node\";\r\nimport { Source } from \"../../ui/index\";\r\n\r\nexport class FileSource extends Node {\r\n  fileInput: Source\r\n\r\n  static DefaultState: any = { file: null };\r\n\r\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\r\n    super(flow, options.name || 'File Source', options.position || new Vector(50, 50), options.width || 130, [],\r\n      [{ name: 'file', dataType: 'file' }],\r\n      {\r\n        state: options.state ? { ...FileSource.DefaultState, ...options.state } : FileSource.DefaultState,\r\n        style: options.style || { rowHeight: 10 },\r\n        terminalStyle: options.terminalStyle || {}\r\n      }\r\n    );\r\n\r\n    this.setupUI();\r\n\r\n    this.fileInput.on('change', () => this.process());\r\n    this.on('process', () => this.process());\r\n  }\r\n\r\n  process() { this.setOutputs(0, this.state.file); }\r\n  setupUI() {\r\n    this.fileInput = this.createSource({ propName: 'file', input: true, output: true, height: 20 });\r\n    this.ui.append(this.fileInput);\r\n  }\r\n}\r\n","import { Flow } from \"../../core/flow\";\r\nimport { Vector } from \"../../core/vector\";\r\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\r\nimport { GlobalEventType } from \"../../common/enums\";\r\nimport { Node } from \"../../core/node\";\r\nimport { get, getNewUUID } from \"../../utils/utils\";\r\nimport { InputType, Input } from \"../../ui/index\";\r\n\r\nexport class GlobalEvent extends Node {\r\n  eventInput: Input;\r\n\r\n  static DefaultState = { prevEvent: '', eventId: -1 };\r\n\r\n  constructor(flow: Flow, type: GlobalEventType, name: string, options: NodeCreatorOptions = {}) {\r\n    super(flow, options.name || 'Global Event', options.position || new Vector(50, 50), options.width || 150,\r\n      type === GlobalEventType.Emitter ? [{ name: 'emit', dataType: 'event' }] : [],\r\n      type === GlobalEventType.Receiver ? [{ name: 'receive', dataType: 'event' }] : [],\r\n      {\r\n        state: options.state ? { ...GlobalEvent.DefaultState, ...options.state } : GlobalEvent.DefaultState,\r\n        style: options.style || { rowHeight: 10 },\r\n        terminalStyle: options.terminalStyle || {}\r\n      }\r\n    );\r\n\r\n    this.state.prevEvent = name;\r\n    this.state.name = get(name, getNewUUID());\r\n\r\n    this.setupUI();\r\n\r\n    if (type === GlobalEventType.Emitter) {\r\n      this.inputs[0].on('event', (_, data) => flow.globalEvents.call(this.state.name, data));\r\n    } else {\r\n      this.state.eventId = flow.globalEvents.on(this.state.name, data => this.outputs[0].emit(data));\r\n\r\n      this.on('change', (_, __, prevVal) => {\r\n        flow.globalEvents.off(prevVal, this.state.eventId);\r\n        this.state.eventId = flow.globalEvents.on(this.state.name, data => this.outputs[0].emit(data));\r\n      });\r\n    }\r\n  }\r\n\r\n  setupUI() {\r\n    this.eventInput = this.createInput({ propName: 'name', height: 20, style: { type: InputType.Text, grow: .6 } });\r\n    this.ui.append(this.createHozLayout([\r\n      this.createLabel('Event', { style: { grow: .4 } }),\r\n      this.eventInput\r\n    ], { style: { spacing: 10 } }));\r\n  }\r\n}\r\n","import { Flow } from \"../../core/flow\";\r\nimport { Vector } from \"../../core/vector\";\r\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\r\nimport { Log } from \"../../utils/logger\";\r\nimport { Node } from \"../../core/node\";\r\nimport { InputType, Input } from \"../../ui/index\";\r\n\r\nexport class JsonSource extends Node {\r\n  input: Input;\r\n\r\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\r\n    super(flow, options.name || 'JSON Source', options.position || new Vector(50, 50), options.width || 150, [],\r\n      [{ name: 'value', dataType: 'any' }],\r\n      {\r\n        state: options.state ? { ...options.state } : {},\r\n        style: options.style || { rowHeight: 10 },\r\n        terminalStyle: options.terminalStyle || {}\r\n      }\r\n    );\r\n\r\n    this.setupUI();\r\n\r\n    this.input.on('change', () => this.process());\r\n    this.on('process', () => this.process());\r\n  }\r\n\r\n  process() {\r\n    if (!this.input.value || this.input.value === '') return;\r\n    try {\r\n      let value = JSON.parse(this.input.value as string);\r\n      this.setOutputs(0, value);\r\n    } catch (error) {\r\n      this.input.inputEl.style.backgroundColor = 'red';\r\n      Log.error(\"StandardNode 'JsonSource' json parse error\", error);\r\n    }\r\n  }\r\n  setupUI() {\r\n    this.input = this.createInput({ value: '', input: true, output: true, height: 20, style: { type: InputType.Text, grow: .7 } });\r\n    this.ui.append(this.createHozLayout([\r\n      this.createLabel('Value', { style: { grow: .3 } }),\r\n      this.input\r\n    ], { style: { spacing: 20 } }));\r\n  }\r\n}\r\n","import { Flow } from \"../../core/flow\";\r\nimport { Vector } from \"../../core/vector\";\r\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\r\nimport { Terminal, TerminalType } from \"../../core/terminal\";\r\nimport { Log as Logger } from '../../utils/logger';\r\nimport { Node } from \"../../core/node\";\r\nimport { Button } from \"../../ui/index\";\r\n\r\nexport class Log extends Node {\r\n  addEventButton: Button;\r\n  addDataButton: Button;\r\n\r\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\r\n    super(flow, options.name || 'Log', options.position || new Vector(50, 50), options.width || 170,\r\n      [{ name: 'Log 1', dataType: 'event' }, { name: 'Log 2', dataType: 'any' }], [],\r\n      {\r\n        state: options.state ? { ...options.state } : {},\r\n        style: options.style || { rowHeight: 10 },\r\n        terminalStyle: options.terminalStyle || {}\r\n      }\r\n    );\r\n\r\n    this.inputs[0].on('event', (terminal, data) => Logger.log(terminal.name + ':', data));\r\n    this.inputs[1].on('data', (terminal, data) => Logger.log(terminal.name + ':', data));\r\n\r\n    this.setupUI();\r\n\r\n    this.addEventButton.on('click', () => this.addNewTerminal('event'));\r\n    this.addDataButton.on('click', () => this.addNewTerminal('data'));\r\n  }\r\n\r\n  setupUI() {\r\n    this.addEventButton = this.createButton('Add Event', { style: { grow: .5 } });\r\n    this.addDataButton = this.createButton('Add Data', { style: { grow: .5 } });\r\n    this.ui.append(this.createHozLayout([this.addEventButton, this.addDataButton], { style: { spacing: 20 } }));\r\n  }\r\n  addNewTerminal(type: string) {\r\n    let newTerminal = new Terminal(this, TerminalType.IN, type === 'event' ? type : 'any', 'Log ' + (this.inputs.length + 1));\r\n    newTerminal.on(type, (terminal, data) => Logger.log(terminal.name, data));\r\n    this.addTerminal(newTerminal);\r\n  }\r\n}\r\n","import { Flow } from \"../../core/flow\";\r\nimport { Vector } from \"../../core/vector\";\r\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\r\nimport { Node } from \"../../core/node\";\r\nimport { InputType, Input, Toggle } from \"../../ui/index\";\r\n\r\nexport class NumberRange extends Node {\r\n  minInput: Input;\r\n  maxInput: Input;\r\n  stepInput: Input;\r\n  loopToggle: Toggle;\r\n\r\n  static DefaultState = { value: 0, min: 0, max: 100, step: 1, loop: false };\r\n\r\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\r\n    super(flow, options.name || 'Number Range', options.position || new Vector(50, 50), options.width || 200,\r\n      [{ name: 'trigger', dataType: 'event' }, { name: 'reset', dataType: 'event' }],\r\n      [{ name: 'value', dataType: 'number' }],\r\n      {\r\n        state: options.state ? { ...NumberRange.DefaultState, ...options.state } : NumberRange.DefaultState,\r\n        style: options.style || { rowHeight: 10 },\r\n        terminalStyle: options.terminalStyle || {}\r\n      }\r\n    );\r\n\r\n    this.state.startValue = this.state.value;\r\n\r\n    this.setupUI();\r\n\r\n    this.minInput.on('change', () => this.process());\r\n    this.maxInput.on('change', () => this.process());\r\n    this.stepInput.on('change', () => this.process());\r\n    this.loopToggle.on('change', () => this.process());\r\n\r\n    this.inputs[0].on('event', () => this.process());\r\n    this.inputs[1].on('event', () => this.state.value = this.state.min);\r\n  }\r\n\r\n  process() {\r\n    let value = this.state.value;\r\n    this.state.value = value + this.state.step;\r\n    if (this.state.value < this.state.min) {\r\n      this.state.value = this.state.min;\r\n      if (this.state.loop) this.state.value = this.state.startValue;\r\n      else return;\r\n    } else if (this.state.value > this.state.max) {\r\n      this.state.value = this.state.max;\r\n      if (this.state.loop) this.state.value = this.state.startValue;\r\n      else return;\r\n    } else {\r\n      this.setOutputs(0, value);\r\n    }\r\n  }\r\n  setupUI() {\r\n    this.minInput = this.createInput({ propName: 'min', input: true, output: true, height: 20, style: { type: InputType.Number, grow: .3, step: 'any' } });\r\n    this.maxInput = this.createInput({ propName: 'max', input: true, output: true, height: 20, style: { type: InputType.Number, grow: .3, step: 'any' } });\r\n    this.stepInput = this.createInput({ propName: 'step', input: true, output: true, height: 20, style: { type: InputType.Number, grow: .3, step: 'any' } });\r\n    this.loopToggle = this.createToggle({ propName: 'loop', input: true, output: true, height: 10, style: { grow: .2 } });\r\n    this.ui.append([\r\n      this.createHozLayout([\r\n        this.createLabel('Min', { style: { grow: .2 } }), this.minInput,\r\n        this.createLabel('Max', { style: { grow: .2 } }), this.maxInput\r\n      ], { style: { spacing: 5 } }),\r\n      this.createHozLayout([\r\n        this.createLabel('Step', { style: { grow: .2 } }), this.stepInput\r\n      ], { style: { spacing: 5 } }),\r\n      this.createHozLayout([\r\n        this.createLabel('Loop ?', { style: { grow: .2 } }), this.loopToggle\r\n      ], { style: { spacing: 10 } })\r\n    ]);\r\n  }\r\n}\r\n","import { Flow } from \"../../core/flow\";\r\nimport { Vector } from \"../../core/vector\";\r\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\r\nimport { Node } from \"../../core/node\";\r\nimport { InputType, Input, Toggle } from \"../../ui/index\";\r\n\r\nexport class NumberSource extends Node {\r\n  fractionalToggle: Toggle;\r\n  input: Input;\r\n\r\n  static DefaultState = { fractional: false, value: 0 };\r\n\r\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\r\n    super(flow, options.name || 'Number Source', options.position || new Vector(50, 50), options.width || 160, [],\r\n      [{ name: 'value', dataType: 'number' }],\r\n      {\r\n        state: options.state ? { ...NumberSource.DefaultState, ...options.state } : NumberSource.DefaultState,\r\n        style: options.style || { rowHeight: 10 },\r\n        terminalStyle: options.terminalStyle || {}\r\n      }\r\n    );\r\n\r\n    this.setupUI();\r\n\r\n    this.fractionalToggle.on('change', (_inst, _oldVal, newVal) => {\r\n      this.input.style.step = newVal ? 'any' : '';\r\n      if (!newVal) this.state.value = Math.floor(this.state.value);\r\n      this.process();\r\n    });\r\n    this.input.on('change', () => {\r\n      if (!this.state.fractional) this.state.value = Math.floor(this.state.value);\r\n      this.process();\r\n    });\r\n    this.outputs[0].on('connect', () => this.process());\r\n    this.on('process', () => this.process());\r\n  }\r\n\r\n  process() { this.setOutputs(0, this.state.fractional ? this.state.value : Math.floor(this.state.value)); }\r\n  setupUI() {\r\n    this.fractionalToggle = this.createToggle({ propName: 'fractional', input: true, output: true, height: 10, style: { grow: .2 } });\r\n    this.input = this.createInput({\r\n      value: 0, propName: 'value', input: true, output: true, height: 20, style: { type: InputType.Number, grow: .6, step: this.state.fractional ? 'any' : '' }\r\n    })\r\n    this.ui.append([\r\n      this.createHozLayout([this.createLabel('Value', { style: { grow: .4 } }), this.input], { style: { spacing: 20 } }),\r\n      this.createHozLayout([this.createLabel('Fractional ?', { style: { grow: .5 } }), this.fractionalToggle], { style: { spacing: 20 } }),\r\n    ]);\r\n  }\r\n}\r\n","import { Flow } from \"../../core/flow\";\nimport { Vector} from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { Node } from \"../../core/node\";\n\nexport class Property extends Node {\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'Property', options.position || new Vector(50, 50), options.width || 130,\n      [{ name: 'object', dataType: 'any' }, { name: 'key', dataType: 'string' }],\n      [{ name: 'value', dataType: 'any' }],\n      {\n        state: options.state ? { ...options.state } : {},\n        style: options.style || { rowHeight: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.on('process', (_, inputs) => {\n      if (!inputs[0]) return;\n      this.setOutputs(0, inputs[0][inputs[1]]);\n    });\n  }\n}\n","import { Flow } from \"../../core/flow\";\r\nimport { Vector } from \"../../core/vector\";\r\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\r\nimport { getRandom } from \"../../utils/utils\";\r\nimport { Node } from \"../../core/node\";\r\nimport { InputType, Input, Toggle } from \"../../ui/index\";\r\n\r\nexport class Random extends Node {\r\n  minInput: Input;\r\n  maxInput: Input;\r\n  fractionalToggle: Toggle;\r\n\r\n  static DefaultState = { min: 0, max: 100, fractional: false };\r\n\r\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\r\n    super(flow, options.name || 'Random', options.position || new Vector(50, 50), options.width || 150,\r\n      [{ name: 'trigger', dataType: 'event' }],\r\n      [{ name: 'value', dataType: 'number' }],\r\n      {\r\n        state: options.state ? { ...Random.DefaultState, ...options.state } : Random.DefaultState,\r\n        style: options.style || { rowHeight: 10 },\r\n        terminalStyle: options.terminalStyle || {}\r\n      }\r\n    );\r\n\r\n    this.setupUI();\r\n\r\n    this.minInput.on('change', () => this.process());\r\n    this.maxInput.on('change', () => this.process());\r\n    this.fractionalToggle.on('change', () => this.process());\r\n    this.inputs[0].on('event', () => this.process());\r\n    this.on('process', () => this.process());\r\n  }\r\n\r\n  process() {\r\n    let random;\r\n    if (this.state.fractional) random = getRandom(this.state.min, this.state.max)\r\n    else random = Math.floor(getRandom(Math.floor(this.state.min), Math.floor(this.state.max)));\r\n\r\n    this.setOutputs(0, random);\r\n  }\r\n  setupUI() {\r\n    this.minInput = this.createInput({ propName: 'min', input: true, output: true, height: 20, style: { type: InputType.Number, grow: 1, step: 'any' } });\r\n    this.maxInput = this.createInput({ propName: 'max', input: true, output: true, height: 20, style: { type: InputType.Number, grow: 1, step: 'any' } });\r\n    this.fractionalToggle = this.createToggle({ propName: 'fractional', input: true, output: true, height: 10, style: { grow: .2 } });\r\n    this.ui.append([\r\n      this.createHozLayout([\r\n        this.createLabel('Min:', { style: { grow: .3 } }),\r\n        this.minInput\r\n      ], { style: { spacing: 20 } }),\r\n      this.createHozLayout([\r\n        this.createLabel('Max:', { style: { grow: .3 } }),\r\n        this.maxInput\r\n      ], { style: { spacing: 20 } }),\r\n      this.createHozLayout([\r\n        this.createLabel('Fractional ?', { style: { grow: .8 } }),\r\n        this.fractionalToggle\r\n      ], { style: { spacing: 10 } })\r\n    ]);\r\n  }\r\n}\r\n","import { Flow } from \"../../core/flow\";\r\nimport { Vector } from \"../../core/vector\";\r\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\r\nimport { Node } from \"../../core/node\";\r\nimport { InputType, Input } from \"../../ui/index\";\r\n\r\nexport class StringSource extends Node {\r\n  input: Input;\r\n\r\n  static DefaultState = { value: '' };\r\n\r\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\r\n    super(flow, options.name || 'String Source', options.position || new Vector(50, 50), options.width || 160, [],\r\n      [{ name: 'value', dataType: 'string' }],\r\n      {\r\n        state: options.state ? { ...StringSource.DefaultState, ...options.state } : StringSource.DefaultState,\r\n        style: options.style || { rowHeight: 10 },\r\n        terminalStyle: options.terminalStyle || {}\r\n      }\r\n    );\r\n\r\n    this.setupUI();\r\n\r\n    this.input.on('change', () => this.process());\r\n    this.on('process', () => this.process());\r\n  }\r\n\r\n  process = () => this.setOutputs(0, this.state.value);\r\n  setupUI() {\r\n    this.input = this.createInput({ value: '', propName: 'value', input: true, output: true, height: 20, style: { type: InputType.Text, grow: .7 } })\r\n    this.ui.append(this.createHozLayout([\r\n      this.createLabel('Value', { style: { grow: .3 } }), this.input\r\n    ], { style: { spacing: 10 } }));\r\n  }\r\n}\r\n","import { Flow } from \"../../core/flow\";\r\nimport { Vector } from \"../../core/vector\";\r\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\r\nimport { Terminal, TerminalType } from \"../../core/terminal\";\r\nimport { Node } from \"../../core/node\";\r\nimport { RadioGroup, Button } from \"../../ui/index\";\r\n\r\nexport class SyncData extends Node {\r\n  syncTypeInput: RadioGroup;\r\n  addButton: Button;\r\n\r\n  eventIds: number[] = [];\r\n\r\n  static DefaultState = { syncType: 'partial' };\r\n\r\n  constructor(flow: Flow, options: NodeCreatorOptions = {}, inputs?: number) {\r\n    super(flow, options.name || 'Sync Data', options.position || new Vector(50, 50), options.width || 160,\r\n      [{ name: 'Data 1', dataType: 'any' }, { name: 'Data 2', dataType: 'any' }],\r\n      [{ name: 'synced', dataType: 'any' }],\r\n      {\r\n        state: options.state ? { ...SyncData.DefaultState, ...options.state, hold: {} } : { ...SyncData.DefaultState, hold: {} },\r\n        style: options.style || { rowHeight: 10 },\r\n        terminalStyle: options.terminalStyle || {}\r\n      }\r\n    );\r\n\r\n    if (inputs) {\r\n      for (let i = 0; i < inputs - 2; i++) {\r\n        this.addTerminal(new Terminal(this, TerminalType.IN, 'any', 'Data ' + (this.inputs.length + 1)));\r\n      }\r\n    }\r\n\r\n    this.setupUI();\r\n\r\n    for (let terminal of this.inputs) {\r\n      this.eventIds.push(terminal.on('data', (inst, data) => this.process(inst, data)));\r\n    }\r\n\r\n    this.on('process', () => process);\r\n  }\r\n  setupUI() {\r\n    this.syncTypeInput = this.createRadioGroup(['partial', 'full'], this.state.syncType, { propName: 'syncType', height: 20 });\r\n    this.addButton = this.createButton('Add', { input: true, output: true, height: 20 });\r\n    this.ui.append([this.syncTypeInput, this.addButton]);\r\n    this.addButton.on('click', () => {\r\n      let newTerminal = new Terminal(this, TerminalType.IN, 'any', 'Data ' + (this.inputs.length + 1));\r\n      this.addTerminal(newTerminal);\r\n      this.eventIds.push(newTerminal.on('data', (inst, data) => this.process(inst, data)));\r\n    });\r\n  }\r\n  process(terminal: Terminal, data: any) {\r\n    this.state.hold[terminal.id] = data;\r\n\r\n    let hold = [];\r\n    for (let term of this.inputs) {\r\n      if (this.state.hold.hasOwnProperty(term.id)) {\r\n        hold.push(this.state.hold[term.id]);\r\n      }\r\n      else return;\r\n    }\r\n\r\n    if (this.state.syncType === 'full') this.state.hold = {};\r\n    this.outputs[0].emit(hold);\r\n\r\n    for (let term of this.inputs) if (term.connectors.length > 0 && typeof term.getData() === 'undefined') return;\r\n    this.setOutputs(0, this.getInputs());\r\n  }\r\n}\r\n","import { Flow } from \"../../core/flow\";\r\nimport { Vector } from \"../../core/vector\";\r\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\r\nimport { Terminal, TerminalType } from \"../../core/terminal\";\r\nimport { Node } from \"../../core/node\";\r\nimport { Button } from \"../../ui/index\";\r\n\r\nexport class SyncEvent extends Node {\r\n  addButton: Button;\r\n\r\n  constructor(flow: Flow, options: NodeCreatorOptions = {}, events?: number) {\r\n    super(flow, options.name || 'Sync Event', options.position || new Vector(50, 50), options.width || 160,\r\n      [{ name: 'Event 1', dataType: 'event' }, { name: 'Event 2', dataType: 'event' }],\r\n      [{ name: 'synced', dataType: 'event' }],\r\n      {\r\n        state: options.state ? { ...options.state, hold: {} } : { hold: {} },\r\n        style: options.style || { rowHeight: 10 },\r\n        terminalStyle: options.terminalStyle || {}\r\n      }\r\n    );\r\n\r\n    if (events) {\r\n      for (let i = 0; i < events - 2; i++)\r\n        this.addTerminal(new Terminal(this, TerminalType.IN, 'event', 'Event ' + (this.inputs.length + 1)));\r\n    }\r\n    this.inputs.forEach(terminal => terminal.on('event', (inst, data) => this.process(inst, data)));\r\n\r\n    this.setupUI();\r\n\r\n    this.addButton.on('click', () => {\r\n      let newTerminal = new Terminal(this, TerminalType.IN, 'event', 'Event ' + (this.inputs.length + 1));\r\n      this.addTerminal(newTerminal);\r\n      newTerminal.on('event', (terminal, data) => this.process(terminal, data));\r\n    });\r\n  }\r\n\r\n  process(terminal: Terminal, data: any) {\r\n    this.state.hold[terminal.id] = data;\r\n\r\n    let hold = [];\r\n    for (let term of this.inputs) {\r\n      if (this.state.hold.hasOwnProperty(term.id)) {\r\n        hold.push(this.state.hold[term.id]);\r\n      }\r\n      else return;\r\n    }\r\n\r\n    this.state.hold = {};\r\n    this.outputs[0].emit(hold);\r\n  }\r\n  setupUI() {\r\n    this.addButton = this.createButton('Add', { input: true, output: true, height: 20 });\r\n    this.ui.append(this.addButton);\r\n  }\r\n}\r\n","import { Flow } from \"../../core/flow\";\r\nimport { Vector } from \"../../core/vector\";\r\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\r\nimport { Node } from \"../../core/node\";\r\nimport { InputType } from \"../../ui/index\";\r\n\r\nexport class Timer extends Node {\r\n  lastTrigger: number = Number.MIN_VALUE;\r\n\r\n  static DefaultState: any = { delay: 1000, emitValue: null };\r\n\r\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\r\n    super(flow, options.name || 'Timer', options.position || new Vector(50, 50), options.width || 120, [],\r\n      [{ name: 'timer', dataType: 'event' }],\r\n      {\r\n        state: options.state ? { ...Timer.DefaultState, ...options.state } : Timer.DefaultState,\r\n        style: options.style || { rowHeight: 10 },\r\n        terminalStyle: options.terminalStyle || {}\r\n      }\r\n    );\r\n\r\n    this.setupUI();\r\n\r\n    flow.flowConnect.on('tickreset', () => this.lastTrigger = Number.MIN_VALUE);\r\n    flow.flowConnect.on('tick', () => {\r\n      let current = flow.flowConnect.time;\r\n      if (current - this.lastTrigger >= this.state.delay) {\r\n        this.outputs[0].emit(this.state.emitValue);\r\n        this.lastTrigger = current;\r\n      }\r\n    });\r\n  }\r\n\r\n  setupUI() {\r\n    this.ui.append(this.createInput({ propName: 'delay', height: 20, style: { type: InputType.Number } }));\r\n  }\r\n}\r\n","import { Flow } from \"../../core/flow\";\r\nimport { Vector } from \"../../core/vector\";\r\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\r\nimport { Terminal, TerminalType } from \"../../core/terminal\";\r\nimport { Node } from \"../../core/node\";\r\nimport { Button } from \"../../ui/index\";\r\n\r\nexport class ToArray extends Node {\r\n  addButton: Button;\r\n\r\n  constructor(flow: Flow, inputs: number, options: NodeCreatorOptions = {}) {\r\n    super(flow, options.name || 'To Array', options.position || new Vector(50, 50), options.width || 100,\r\n      (inputs && inputs > 0\r\n        ? (new Array(inputs).fill(null).map((_, index) => ({ name: 'In ' + (index + 1), dataType: 'any' })))\r\n        : [{ name: 'In 1', dataType: 'any' }]\r\n      ),\r\n      [{ name: 'out', dataType: 'array' }],\r\n      {\r\n        state: options.state ? { ...options.state } : {},\r\n        style: options.style || { rowHeight: 10 },\r\n        terminalStyle: options.terminalStyle || {}\r\n      }\r\n    );\r\n\r\n    this.setupUI();\r\n\r\n    this.addButton.on('click', () => this.addTerminal(new Terminal(this, TerminalType.IN, 'any', 'In ' + this.inputs.length + 1)));\r\n    this.on('process', (_, inData) => this.setOutputs(0, [...inData]));\r\n  }\r\n\r\n  setupUI() {\r\n    this.addButton = this.createButton('Add', { style: { grow: .5 } });\r\n    this.ui.append(this.addButton);\r\n  }\r\n}\r\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { Log } from \"../../utils/logger\";\nimport { Node } from \"../../core/node\";\n\nexport class ToVector extends Node {\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'To Vector', options.position || new Vector(50, 50), options.width || 100,\n      [{ name: 'x', dataType: 'any' }, { name: 'y', dataType: 'any' }],\n      [{ name: 'vector', dataType: 'any' }],\n      {\n        state: options.state ? { ...options.state } : {},\n        style: options.style || { rowHeight: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.on('process', (_, inputs) => {\n      if (typeof inputs[0] === 'number' && typeof inputs[1] === 'number') {\n        this.setOutputs(0, { x: inputs[0], y: inputs[1] });\n      } else if (Array.isArray(inputs[0]) && Array.isArray(inputs[1])) {\n        let result = [];\n        for (let i = 0; i < inputs[0].length; i++) {\n          result.push({ x: inputs[0][i], y: inputs[1][i] });\n        }\n        this.setOutputs(0, result);\n      } else {\n        Log.error('Type mismatch: Inputs to standard node \\'ToVector\\' should be of same type');\n      }\n    });\n  }\n}\n","import * as timer from './common/timer';\nimport * as log from './common/log';\nimport * as buffer from './common/buffer';\nimport * as toArray from './common/to-array';\nimport * as arrayIndex from './common/array-index';\nimport * as arraySource from './common/array-source';\nimport * as random from './common/random';\nimport * as booleanSource from './common/boolean-source';\nimport * as jsonSource from './common/json-source';\nimport * as numberSource from './common/number-source';\nimport * as stringSource from './common/string-source';\nimport * as fileSource from './common/file-source';\nimport * as compare from './common/compare';\nimport * as property from './common/property';\nimport * as syncEvent from './common/sync-event';\nimport * as syncData from './common/sync-data';\nimport * as delay from './common/delay';\nimport * as toVector from './common/to-vector';\nimport * as numberRange from './common/number-range';\nimport * as globalEvent from './common/global-event';\n\nimport * as abs from './math/abs';\nimport * as average from './math/average';\nimport * as normalize from './math/normalize';\nimport * as clamp from './math/clamp';\nimport * as floor from './math/floor';\nimport * as ceil from './math/ceil';\nimport * as func from './math/func';\n\nimport * as api from './net/api';\n\nimport * as functionPlotter from './visual/function-plotter';\nimport * as lineChartMini from './visual/line-chart-mini';\n\nimport * as source from './audio/source';\nimport * as destination from './audio/destination';\nimport * as automate from './audio/automate';\nimport * as channelSplitter from './audio/channel-splitter';\nimport * as debug from './audio/debug';\nimport * as channelMerger from './audio/channel-merger';\nimport * as adsr from './audio/adsr';\nimport * as gain from './audio/gain';\nimport * as metronome from './audio/metronome';\nimport * as moogEffect from './audio/moog';\nimport * as bitcrusherEffect from './audio/bitcrusher';\nimport * as biquadFilter from './audio/biquad-filter';\nimport * as delayEffect from './audio/delay';\nimport * as dynamicsCompressor from './audio/dynamics-compressor';\nimport * as chorusEffect from './audio/chorus';\nimport * as overdriveEffect from './audio/overdrive';\nimport * as audioBuffer from './audio/audio-buffer-source';\nimport * as convolver from './audio/convolver';\nimport * as tremoloEffect from './audio/tremolo';\nimport * as pingPong from './audio/ping-pong-delay';\nimport * as stereoPanner from './audio/stereo-panner';\nimport * as spatialPanner from './audio/spatial-panner';\nimport * as noise from './audio/noise';\nimport * as oscillator from './audio/oscillator';\nimport * as microphone from './audio/microphone';\nimport * as distorter from './audio/distorter';\nimport * as equalizer from './audio/equalizer';\nimport * as frequencyAnalyser from './audio/frequency-analyser';\nimport * as waveformAnalyser from './audio/waveform-analyser';\nimport * as spectrogramAnalyser from './audio/spectrogram-analyser';\n\nimport * as dial from './ui/dial';\n\nexport namespace StandardNodes.Common {\n  export import Timer = timer.Timer;\n  export import Log = log.Log;\n  export import Buffer = buffer.Buffer;\n  export import ToArray = toArray.ToArray;\n  export import ArrayIndex = arrayIndex.ArrayIndex;\n  export import ArraySource = arraySource.ArraySource;\n  export import BooleanSource = booleanSource.BooleanSource;\n  export import JsonSource = jsonSource.JsonSource;\n  export import NumberSource = numberSource.NumberSource;\n  export import StringSource = stringSource.StringSource;\n  export import FileSource = fileSource.FileSource;\n  export import Random = random.Random;\n  export import Compare = compare.Compare;\n  export import Property = property.Property;\n  export import SyncEvent = syncEvent.SyncEvent;\n  export import SyncData = syncData.SyncData;\n  export import Delay = delay.Delay;\n  export import ToVector = toVector.ToVector;\n  export import NumberRange = numberRange.NumberRange;\n  export import GlobalEvent = globalEvent.GlobalEvent;\n}\nexport namespace StandardNodes.Math {\n  export import Abs = abs.Abs;\n  export import Average = average.Average;\n  export import Normalize = normalize.Normalize;\n  export import Clamp = clamp.Clamp;\n  export import Floor = floor.Floor;\n  export import Ceil = ceil.Ceil;\n  export import Function = func.Func;\n}\nexport namespace StandardNodes.Net {\n  export import API = api.API;\n}\nexport namespace StandardNodes.Visual {\n  export import LineChartMini = lineChartMini.LineChartMini;\n  export import FunctionPlotter = functionPlotter.FunctionPlotter;\n}\nexport namespace StandardNodes.Audio {\n  export import Source = source.Source;\n  export import Destination = destination.Destination;\n  export import Automate = automate.Automate;\n  export import ChannelSplitter = channelSplitter.ChannelSplitter;\n  export import Debug = debug.Debug;\n  export import ChannelMerger = channelMerger.ChannelMerger;\n  export import ADSR = adsr.ADSR;\n  export import Gain = gain.Gain;\n  export import Metronome = metronome.Metronome;\n  export import MoogEffect = moogEffect.MoogEffect;\n  export import BitcrusherEffect = bitcrusherEffect.BitcrusherEffect;\n  export import BiquadFilter = biquadFilter.BiquadFilter;\n  export import DelayEffect = delayEffect.DelayEffect;\n  export import DynamicsCompressor = dynamicsCompressor.DynamicsCompressor;\n  export import ChorusEffect = chorusEffect.ChorusEffect;\n  export import OverdriveEffect = overdriveEffect.OverdriveEffect;\n  export import AudioBufferSource = audioBuffer.AudioBufferSource;\n  export import Convolver = convolver.Convolver;\n  export import TremoloEffect = tremoloEffect.TremoloEffect;\n  export import PingPongDelay = pingPong.PingPongEffect;\n  export import StereoPanner = stereoPanner.StereoPanner;\n  export import SpatialPanner = spatialPanner.SpatialPanner;\n  export import Noise = noise.Noise;\n  export import Oscillator = oscillator.Oscillator;\n  export import Microphone = microphone.Microphone;\n  export import Distorter = distorter.Distorter;\n  export import Equalizer = equalizer.Equalizer;\n  export import FrequencyAnalyser = frequencyAnalyser.FrequencyAnalyser;\n  export import WaveformAnalyser = waveformAnalyser.WaveformAnalyser;\n  export import SpectrogramAnalyser = spectrogramAnalyser.SpectrogramAnalyser;\n}\nexport namespace StandardNodes.UI {\n  export import Dial = dial.Dial;\n}\nexport namespace StandardNodes.Image {\n\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { Node } from \"../../core/node\";\n\nexport class Abs extends Node {\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'Abs', options.position || new Vector(50, 50), options.width || 120,\n      [{ name: 'x', dataType: 'any' }],\n      [{ name: '|x|', dataType: 'any' }],\n      {\n        state: options.state ? { ...options.state } : {},\n        style: options.style || { rowHeight: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.on('process', (_, inputs) => {\n      if (typeof inputs[0] === 'number') {\n        this.setOutputs(0, Math.abs(inputs[0]));\n      } else if (Array.isArray(inputs[0])) {\n        this.setOutputs(0, inputs[0].map(item => Math.abs(item)));\n      }\n    });\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { Node } from \"../../core/node\";\n\nexport class Average extends Node {\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'Average', options.position || new Vector(50, 50), options.width || 120,\n      [{ name: 'n', dataType: 'any' }],\n      [{ name: 'μ', dataType: 'any' }],\n      {\n        state: options.state ? { ...options.state } : {},\n        style: options.style || { rowHeight: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.on('process', (_, inputs) => {\n      if (Array.isArray(inputs[0])) {\n        this.setOutputs(0, inputs[0].reduce((acc, curr) => acc + curr, 0) / inputs[0].length);\n      }\n    });\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { Node } from \"../../core/node\";\n\nexport class Ceil extends Node {\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'Ceil', options.position || new Vector(50, 50), options.width || 120,\n      [{ name: 'x', dataType: 'any' }],\n      [{ name: '|x|', dataType: 'any' }],\n      {\n        state: options.state ? { ...options.state } : {},\n        style: options.style || { rowHeight: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.on('process', (_, inputs) => {\n      if (typeof inputs[0] === 'number') {\n        this.setOutputs(0, Math.ceil(inputs[0]));\n      } else if (Array.isArray(inputs[0])) {\n        this.setOutputs(0, inputs[0].map(item => Math.ceil(item)));\n      }\n    });\n  }\n}\n","import { Flow } from \"../../core/flow\";\r\nimport { Vector } from \"../../core/vector\";\r\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\r\nimport { clamp } from \"../../utils/utils\";\r\nimport { Node } from \"../../core/node\";\r\nimport { InputType, Input } from \"../../ui/index\";\r\n\r\nexport class Clamp extends Node {\r\n  minInput: Input;\r\n  maxInput: Input;\r\n\r\n  static DefaultState = { min: 0, max: 100 };\r\n\r\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\r\n    super(flow, options.name || 'Clamp', options.position || new Vector(50, 50), options.width || 150,\r\n      [{ name: 'x', dataType: 'any' }],\r\n      [{ name: '[x]', dataType: 'any' }],\r\n      {\r\n        state: options.state ? { ...Clamp.DefaultState, ...options.state } : Clamp.DefaultState,\r\n        style: options.style || { rowHeight: 10 },\r\n        terminalStyle: options.terminalStyle || {}\r\n      }\r\n    );\r\n\r\n    this.setupUI();\r\n\r\n    this.minInput.on('change', () => this.process(this.getInputs()[0]));\r\n    this.maxInput.on('change', () => this.process(this.getInputs()[0]));\r\n    this.on('process', (_, inputs) => this.process(inputs[0]));\r\n  }\r\n\r\n  setupUI() {\r\n    this.minInput = this.createInput({ propName: 'min', input: true, output: true, height: 20, style: { type: InputType.Number, grow: .7 } });\r\n    this.maxInput = this.createInput({ propName: 'max', input: true, output: true, height: 20, style: { type: InputType.Number, grow: .7 } });\r\n    this.ui.append([\r\n      this.createHozLayout([\r\n        this.createLabel('Min', { style: { grow: .3 } }),\r\n        this.minInput\r\n      ], { style: { spacing: 10 } }),\r\n      this.createHozLayout([\r\n        this.createLabel('Max', { style: { grow: .3 } }),\r\n        this.maxInput\r\n      ], { style: { spacing: 10 } })\r\n    ]);\r\n  }\r\n  process(input: number | []) {\r\n    if (typeof input === 'number') {\r\n      this.setOutputs(0, clamp(input, this.state.min, this.state.max));\r\n    } else if (Array.isArray(input)) {\r\n      this.setOutputs(0, input.map(item => clamp(item, this.state.min, this.state.max)));\r\n    }\r\n  }\r\n}\r\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { Node } from \"../../core/node\";\n\nexport class Floor extends Node {\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'Floor', options.position || new Vector(50, 50), options.width || 120,\n      [{ name: 'x', dataType: 'any' }],\n      [{ name: '|x|', dataType: 'any' }],\n      {\n        state: options.state ? { ...options.state } : {},\n        style: options.style || { rowHeight: 10 },\n        terminalStyle: options.terminalStyle || {},\n      }\n    );\n\n    this.on('process', (_, inputs) => {\n      if (typeof inputs[0] === 'number') {\n        this.setOutputs(0, Math.floor(inputs[0]));\n      } else if (Array.isArray(inputs[0])) {\n        this.setOutputs(0, inputs[0].map(item => Math.floor(item)));\n      }\n    });\n  }\n}\n","import { Flow } from \"../../core/flow\";\r\nimport { Vector } from \"../../core/vector\";\r\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\r\nimport { Terminal, TerminalType } from \"../../core/terminal\";\r\nimport { Evaluator } from \"../../utils/evaluator\";\r\nimport { Log } from \"../../utils/logger\";\r\nimport { Parser } from \"../../utils/parser\";\r\nimport { Token, TokenType } from \"../../utils/lexer\";\r\nimport { Node } from \"../../core/node\";\r\nimport { InputType, Input, Button } from \"../../ui/index\";\r\n\r\nexport class Func extends Node {\r\n  addVarButton: Button\r\n\r\n  static DefaultState = { newVar: 'y' };\r\n\r\n  constructor(flow: Flow, options: NodeCreatorOptions = {}, expression?: string) {\r\n    super(flow, options.name || 'Function', options.position || new Vector(50, 50), options.width || 200, [],\r\n      [{ name: '𝒇', dataType: 'any' }],\r\n      {\r\n        state: options.state\r\n          ? { ...Func.DefaultState, ...options.state, expression: (expression || 'a*sin(a^2)+cos(a*tan(a))'), evaluator: new Evaluator({}) }\r\n          : { ...Func.DefaultState, expression: (expression || 'a*sin(a^2)+cos(a*tan(a))'), evaluator: new Evaluator({}) },\r\n        style: options.style || { rowHeight: 10 },\r\n        terminalStyle: options.terminalStyle || {}\r\n      }\r\n    );\r\n\r\n    let vars = new Set<string>();\r\n    let parser = new Parser();\r\n    let tokens: Token[];\r\n    try {\r\n      tokens = parser.parse(expression);\r\n    } catch (error) {\r\n      Log.error('Error while parsing expression: ', expression, error);\r\n      return;\r\n    }\r\n    try {\r\n      tokens.forEach(token => {\r\n        if (token.type === TokenType.Variable) {\r\n          if ((token.value as string).length > 1) throw new Error('Only single character variables are allowed: ' + token.value);\r\n          else vars.add(token.value as string);\r\n        }\r\n      });\r\n    } catch (error) { Log.error(error); return; }\r\n\r\n    vars.forEach(variable => this.addTerminal(new Terminal(this, TerminalType.IN, 'any', variable)));\r\n    this.state.expression = expression;\r\n\r\n    this.setupUI();\r\n\r\n    this.watch('expression', () => this.process());\r\n\r\n    this.addVarButton.on('click', () => {\r\n      if (!this.state.newVar || this.state.newVar.trim() === '') return;\r\n      if (this.inputs.map(input => input.name).includes(this.state.newVar.trim().toLowerCase())) {\r\n        Log.error('Variable', this.state.newVar.trim(), 'already exists');\r\n        return;\r\n      }\r\n      this.addTerminal(new Terminal(this, TerminalType.IN, 'any', this.state.newVar.trim()));\r\n    });\r\n    this.on('process', () => this.process());\r\n  }\r\n\r\n  process() {\r\n    let bulkEvalIterations = -1;\r\n    this.state.evaluator.variables = {};\r\n    for (let inTerminal of this.inputs) {\r\n      let data = inTerminal.getData();\r\n\r\n      // Some checks to determine if the intention is to pass variables with array values to this function\r\n      // Which should mean its a bulk evaluation (t=[2,5,6,8...], f(t)=cos(t)  ==>  f(t)=[cos(2),cos(5),cos(6),cos(8)...])\r\n      if (Array.isArray(data)) {\r\n        let expr = this.state.expression;\r\n        let regex = new RegExp('([a-z]+)\\\\(' + inTerminal.name + '\\\\)', 'g');\r\n        expr = expr.replace(/\\s+/g, '');\r\n        let matches = [...expr.matchAll(regex)];\r\n        let result = matches\r\n          .map(match => !Evaluator.multiargFunctions.includes(match[1]))\r\n          .reduce((acc, curr) => acc = acc && curr, true);\r\n\r\n        if (result) bulkEvalIterations = Math.max(bulkEvalIterations, data.length);\r\n      }\r\n\r\n      this.state.evaluator.variables[inTerminal.name] = (typeof data !== 'undefined' && data !== null) ? data : 0;\r\n    }\r\n    try {\r\n      let result: number[] | number;\r\n      if (bulkEvalIterations !== -1) {\r\n        let resultArr = [];\r\n        for (let i = 0; i < bulkEvalIterations; i += 1) {\r\n          resultArr.push(this.state.evaluator.evaluate(this.state.expression, i));\r\n        }\r\n        result = resultArr;\r\n      } else {\r\n        result = this.state.evaluator.evaluate(this.state.expression);\r\n      }\r\n      this.setOutputs(0, result);\r\n    } catch (error) {\r\n      Log.error('Error while evaluating the expression: ', this.state.expression, error);\r\n    }\r\n  }\r\n  lowerCase(input: Input) {\r\n    if (/[A-Z]/g.test(input.inputEl.value)) input.inputEl.value = input.inputEl.value.toLowerCase();\r\n  }\r\n  setupUI() {\r\n    let exprInput = this.createInput({\r\n      propName: 'expression', input: true, output: true, height: 20, style: { type: InputType.Text, grow: .9 }\r\n    });\r\n    exprInput.on('input', this.lowerCase);\r\n    this.addVarButton = this.createButton('Add', { height: 20, style: { grow: .4 } });\r\n    this.ui.append([\r\n      this.createHozLayout([\r\n        this.createLabel('𝒇', { style: { grow: .1 } }),\r\n        exprInput\r\n      ], { style: { spacing: 10 } }),\r\n      this.createHozLayout([\r\n        this.createInput({ propName: 'newVar', height: 20, style: { type: InputType.Text, maxLength: 1, grow: .6 } }),\r\n        this.addVarButton\r\n      ], { style: { spacing: 10 } })\r\n    ]);\r\n  }\r\n}\r\n","import { Flow } from \"../../core/flow\";\r\nimport { Vector } from \"../../core/vector\";\r\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\r\nimport { normalize } from \"../../utils/utils\";\r\nimport { Node } from \"../../core/node\";\r\nimport { InputType } from \"../../ui/index\";\r\n\r\nexport class Normalize extends Node {\r\n  min = Number.MAX_SAFE_INTEGER;\r\n  max = Number.MIN_SAFE_INTEGER;\r\n\r\n  static DefaultState = { min: 0, max: 100, relative: false };\r\n\r\n  constructor(flow: Flow, public type: 'number' | 'array', options: NodeCreatorOptions = {}) {\r\n    super(flow, options.name || 'Normalize', options.position || new Vector(50, 50), options.width || 150,\r\n      [{ name: 'data', dataType: type }],\r\n      [{ name: 'normalized', dataType: type }],\r\n      {\r\n        state: options.state ? { ...Normalize.DefaultState, ...options.state } : Normalize.DefaultState,\r\n        style: options.style || { rowHeight: 10 },\r\n        terminalStyle: options.terminalStyle || {}\r\n      }\r\n    );\r\n\r\n    if (type === 'array') {\r\n      let relativeToggle = this.createToggle({ propName: 'relative', height: 10, style: { grow: .5 } });\r\n      this.ui.append(this.createHozLayout([\r\n        this.createLabel('Relative ?'),\r\n        relativeToggle\r\n      ], { style: { spacing: 20 } }));\r\n      relativeToggle.on('change', () => this.process());\r\n    }\r\n    if (type === 'number' || !this.state.relative) {\r\n      let minInput = this.createInput({ propName: 'min', height: 20, style: { type: InputType.Number, grow: .3 } });\r\n      let maxInput = this.createInput({ propName: 'max', height: 20, style: { type: InputType.Number, grow: .3 } });\r\n      this.ui.append(this.createHozLayout([\r\n        this.createLabel('Min', { style: { grow: .2 } }),\r\n        minInput,\r\n        this.createLabel('Max', { style: { grow: .2 } }),\r\n        maxInput\r\n      ], { style: { spacing: 5 } }));\r\n\r\n      minInput.on('change', () => this.process());\r\n      maxInput.on('change', () => this.process());\r\n    }\r\n    if (this.state.constant) {\r\n      let constantInput = this.createInput({ propName: 'constant', height: 20, style: { type: InputType.Number, grow: .5 } });\r\n      this.ui.append(this.createHozLayout([\r\n        this.createLabel('Constant'),\r\n        constantInput\r\n      ], { style: { spacing: 20 } }));\r\n\r\n      constantInput.on('change', () => this.process());\r\n    }\r\n\r\n    this.on('process', () => this.process())\r\n  }\r\n\r\n\r\n  process() {\r\n    let data = this.getInput(0);\r\n    if (!data) return;\r\n\r\n    let normalized;\r\n    if (this.type === 'number') {\r\n      normalized = Number(normalize(data, this.state.min, this.state.max).toFixed(2));\r\n    } else {\r\n      if (this.state.relative) {\r\n        let currMin = Math.min(...data);\r\n        let currMax = Math.max(...data);\r\n        if (currMin < this.min) this.min = currMin - (this.state.constant || 0);\r\n        if (currMax > this.max) this.max = currMax + (this.state.constant || 0);\r\n        normalized = data.map((item: number) => Number(normalize(item, this.min, this.max).toFixed(2)));\r\n      } else {\r\n        normalized = data.map((item: number) => Number(normalize(item, this.state.min, this.state.max).toFixed(2)));\r\n      }\r\n    }\r\n    this.setOutputs('normalized', normalized);\r\n  }\r\n}\r\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { Align } from \"../../common/enums\";\nimport { Log } from \"../../utils/logger\";\nimport { isEmpty } from \"../../utils/utils\";\nimport { Node } from \"../../core/node\";\n\nexport class API extends Node {\n\n  static DefaultState = { src: '' };\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'API', options.position || new Vector(50, 50), options.width || 150,\n      [{ name: 'trigger', dataType: 'event' }],\n      [{ name: 'text', dataType: 'string' }, { name: 'json', dataType: 'any' }, { name: 'array-buffer', dataType: 'array-buffer' }],\n      {\n        state: options.state ? { ...API.DefaultState, ...options.state } : API.DefaultState,\n        style: options.style || { rowHeight: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.setupUI();\n\n    this.inputs[0].on('event', async () => {\n      if (!this.state.src || this.state.src === '') Log.error(\"Prop 'src' of API Node is invalid, cannot make an API call\");\n      else {\n        let response, outputs: Record<string, any> = {};\n        if (this.outputs.map(terminal => terminal.connectors.length).reduce((acc, curr) => acc + curr, 0) > 0) {\n          response = await fetch(this.state.src);\n\n          if (this.outputs[0].connectors.length > 0) outputs[this.outputs[0].name] = await response.text();\n          else if (this.outputs[1].connectors.length > 0) outputs[this.outputs[1].name] = await response.json();\n          else if (this.outputs[2].connectors.length > 0) {\n            // If this is an audio connection then check the arrayBufferCache first\n            if (this.outputs[2].connectors.map(connector => connector.end.dataType).includes('audio')) {\n              let cached = flow.flowConnect.arrayBufferCache.get(this.state.src);\n              if (!cached) {\n                cached = await response.arrayBuffer();\n                flow.flowConnect.arrayBufferCache.set(this.state.src, cached);\n              }\n              outputs[this.outputs[2].name] = cached;\n            } else {\n              outputs[this.outputs[2].name] = await response.arrayBuffer();\n            }\n          }\n\n          if (!isEmpty(outputs)) this.setOutputs(outputs);\n        }\n      }\n    });\n  }\n\n  setupUI() {\n    this.ui.append(this.createLabel('', { propName: 'src', input: true, output: true, style: { align: Align.Center } }));\n  }\n}\n","import { Flow } from \"../../core/flow\";\r\nimport { Vector } from \"../../core/vector\";\r\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\r\nimport { Align } from \"../../common/enums\";\r\nimport { Node } from \"../../core/node\";\r\nimport { DialStyle } from \"../../ui/index\";\r\n\r\nexport class Dial extends Node {\r\n\r\n  static DefaultState = { value: 0, min: 0, max: 1 };\r\n\r\n  constructor(flow: Flow, options: NodeCreatorOptions = new Object(), dialStyle: DialStyle = new Object()) {\r\n    super(flow, options.name || 'Dial', options.position || new Vector(50, 50), options.width || 90, [], [],\r\n      {\r\n        state: options.state ? { ...Dial.DefaultState, ...options.state } : Dial.DefaultState,\r\n        style: options.style || { rowHeight: 10, padding: 5, spacing: 10 },\r\n        terminalStyle: options.terminalStyle || {}\r\n      }\r\n    );\r\n\r\n    Object.assign(this.ui.style, {\r\n      backgroundColor: 'transparent',\r\n      borderColor: 'transparent',\r\n      borderWidth: 0,\r\n      shadowBlur: 0,\r\n      shadowColor: 'transparent'\r\n    });\r\n\r\n    this.setupUI(dialStyle);\r\n\r\n    this.outputsUI[0].on('connect', (_inst, connector) => {\r\n      if (connector.end.ref instanceof AudioParam) this.state.value = connector.end.ref.value;\r\n    });\r\n  }\r\n\r\n  setupUI(dialStyle: DialStyle) {\r\n    let dial = this.createDial(this.state.min, this.state.max, this.width, {\r\n      value: this.state.value, propName: 'value', input: true, output: true, style: dialStyle\r\n    });\r\n    this.ui.append([\r\n      dial,\r\n      this.createStack({\r\n        childs: [\r\n          this.createHozLayout([\r\n            this.createLabel('', { propName: 'min', style: { precision: 1, fontSize: '11px', align: Align.Left, grow: .5 } }),\r\n            this.createLabel('', { propName: 'max', style: { precision: 1, fontSize: '11px', align: Align.Right, grow: .5 } })\r\n          ]),\r\n          this.createHozLayout([\r\n            this.createLabel('', { propName: 'value', style: { precision: 1, fontSize: '20px', align: Align.Center, grow: 1 } })\r\n          ])\r\n        ],\r\n        style: { spacing: 5 }\r\n      })\r\n    ]);\r\n  }\r\n}\r\n","import { Flow } from \"../../core/flow\";\r\nimport { Vector } from \"../../core/vector\";\r\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\r\nimport { Node } from \"../../core/node\";\r\nimport { get } from \"../../utils/utils\";\r\nimport { Display, Toggle } from \"../../ui/index\";\r\n\r\nexport class FunctionPlotter extends Node {\r\n  display: Display;\r\n  polarToggle: Toggle;\r\n\r\n  static DefaultState: any = { points: [], polar: false, config: { gX: 3, gY: 3, xMin: -1.5, xMax: 1.5, yMin: -1.5, yMax: 1.5 } }\r\n\r\n  constructor(flow: Flow, height: number, public plotStyle: PlotStyle = new Object(), options: NodeCreatorOptions = {}) {\r\n    super(flow, options.name || 'Parametric Plotter', options.position || new Vector(50, 50), options.width || 300,\r\n      [{ name: 'data', dataType: 'any' }], [],\r\n      {\r\n        state: options.state ? { ...FunctionPlotter.DefaultState, ...options.state } : FunctionPlotter.DefaultState,\r\n        style: options.style || { rowHeight: 10 },\r\n        terminalStyle: options.terminalStyle || {}\r\n      }\r\n    );\r\n\r\n    this.setupUI(height);\r\n\r\n    this.polarToggle.on('change', () => this.process(this.getInputs()));\r\n\r\n    let dragStart: Vector = null;\r\n    this.display.on('up', () => dragStart = null);\r\n    this.display.on('exit', () => dragStart = null);\r\n    this.display.on('down', (_, screenPos) => {\r\n      dragStart = screenPos.subtract(this.display.position.transform(flow.flowConnect.transform));\r\n      dragStart.x = this.xPixToCoord(this.state.config, this.display.displayConfigs[0].canvas.width, dragStart.x);\r\n      dragStart.y = this.yPixToCoord(this.state.config, this.display.displayConfigs[0].canvas.height, dragStart.y);\r\n    });\r\n    this.display.on('drag', (_, screenPos) => {\r\n      if (dragStart) {\r\n        let curr = screenPos.subtract(this.display.position.transform(flow.flowConnect.transform));\r\n        curr.x = this.xPixToCoord(this.state.config, this.display.displayConfigs[0].canvas.width, curr.x);\r\n        curr.y = this.yPixToCoord(this.state.config, this.display.displayConfigs[0].canvas.height, curr.y);\r\n\r\n        let delta = dragStart.subtract(curr);\r\n        Object.assign(this.state.config, {\r\n          xMin: this.state.config.xMin + delta.x,\r\n          xMax: this.state.config.xMax + delta.x,\r\n          yMin: this.state.config.yMin + delta.y,\r\n          yMax: this.state.config.yMax + delta.y,\r\n        });\r\n\r\n        this.gridRenderer(\r\n          this.display.displayConfigs[0].context,\r\n          this.display.displayConfigs[0].canvas.width,\r\n          this.display.displayConfigs[0].canvas.height\r\n        );\r\n        this.functionRenderer(\r\n          this.display.displayConfigs[1].context,\r\n          this.display.displayConfigs[1].canvas.width,\r\n          this.display.displayConfigs[1].canvas.height\r\n        );\r\n      }\r\n    });\r\n    this.display.on('wheel', (_, direction, screenPos) => {\r\n      let cursor = screenPos.subtract(this.display.position.transform(flow.flowConnect.transform));\r\n      cursor.x = this.xPixToCoord(this.state.config, this.display.displayConfigs[0].canvas.width, cursor.x);\r\n      cursor.y = this.yPixToCoord(this.state.config, this.display.displayConfigs[0].canvas.height, cursor.y);\r\n\r\n      Object.assign(this.state.config, {\r\n        xMin: this.state.config.xMin - cursor.x,\r\n        xMax: this.state.config.xMax - cursor.x,\r\n        yMin: this.state.config.yMin - cursor.y,\r\n        yMax: this.state.config.yMax - cursor.y\r\n      });\r\n      if (!direction) {\r\n        Object.assign(this.state.config, {\r\n          xMin: this.state.config.xMin + this.state.config.xMin * 0.1,\r\n          xMax: this.state.config.xMax + this.state.config.xMax * 0.1,\r\n          yMin: this.state.config.yMin + this.state.config.yMin * 0.1,\r\n          yMax: this.state.config.yMax + this.state.config.yMax * 0.1\r\n        });\r\n      } else {\r\n        Object.assign(this.state.config, {\r\n          xMin: this.state.config.xMin - this.state.config.xMin * 0.1,\r\n          xMax: this.state.config.xMax - this.state.config.xMax * 0.1,\r\n          yMin: this.state.config.yMin - this.state.config.yMin * 0.1,\r\n          yMax: this.state.config.yMax - this.state.config.yMax * 0.1\r\n        });\r\n      }\r\n      Object.assign(this.state.config, {\r\n        xMin: this.state.config.xMin + cursor.x,\r\n        xMax: this.state.config.xMax + cursor.x,\r\n        yMin: this.state.config.yMin + cursor.y,\r\n        yMax: this.state.config.yMax + cursor.y\r\n      });\r\n\r\n      this.gridRenderer(\r\n        this.display.displayConfigs[0].context,\r\n        this.display.displayConfigs[0].canvas.width,\r\n        this.display.displayConfigs[0].canvas.height\r\n      );\r\n      this.functionRenderer(\r\n        this.display.displayConfigs[1].context,\r\n        this.display.displayConfigs[1].canvas.width,\r\n        this.display.displayConfigs[1].canvas.height\r\n      );\r\n    });\r\n    flow.flowConnect.on('scale', () => this.functionRenderer(\r\n      this.display.displayConfigs[1].context,\r\n      this.display.displayConfigs[1].canvas.width,\r\n      this.display.displayConfigs[1].canvas.height\r\n    ));\r\n\r\n\r\n    this.inputsUI[0].on('event', () => this.state.points = []);\r\n    this.on('process', (_, inputs) => this.process(inputs));\r\n  }\r\n\r\n\r\n  gridRenderer(context: CanvasRenderingContext2D | OffscreenCanvasRenderingContext2D, width: number, height: number) {\r\n    this.drawGrid(context, width, height);\r\n    return false;\r\n  }\r\n  process(inputs: any) {\r\n    if (!inputs[0]) return;\r\n    if (Array.isArray(inputs[0])) {\r\n      if (this.state.polar) {\r\n        this.state.points = [];\r\n        for (let i of inputs[0]) {\r\n          this.state.points.push({ x: i.x * Math.cos(i.y), y: i.x * Math.sin(i.y) });\r\n        }\r\n      } else {\r\n        this.state.points = inputs[0];\r\n      }\r\n    } else {\r\n      this.state.points.push(this.state.polar\r\n        ? { x: inputs[0].x * Math.cos(inputs[0].y), y: inputs[0].x * Math.sin(inputs[0].y) }\r\n        : inputs[0]\r\n      );\r\n    }\r\n    this.functionRenderer(\r\n      this.display.displayConfigs[1].context,\r\n      this.display.displayConfigs[1].canvas.width,\r\n      this.display.displayConfigs[1].canvas.height\r\n    );\r\n  }\r\n  xCoordToPix(config: any, width: number, xCoord: number) {\r\n    const xDiff = config.xMax - config.xMin;\r\n    const xPixPerUnit = width / xDiff;\r\n    return Math.round((xCoord - config.xMin) * xPixPerUnit);\r\n  }\r\n  yCoordToPix(config: any, height: number, yCoord: number) {\r\n    const yDiff = config.yMax - config.yMin;\r\n    const yPixPerUnit = height / yDiff;\r\n    return Math.round(height - (yCoord - config.yMin) * yPixPerUnit);\r\n  }\r\n  xPixToCoord(config: any, width: number, xPix: number) {\r\n    const xDiff = config.xMax - config.xMin;\r\n    const xPixPerUnit = width / xDiff;\r\n    return xPix / xPixPerUnit + config.xMin;\r\n  }\r\n  yPixToCoord(config: any, height: number, yPix: number) {\r\n    const yDiff = config.yMax - config.yMin;\r\n    const yPixPerUnit = height / yDiff;\r\n    return -(yPix - height) / yPixPerUnit + config.yMin;\r\n  }\r\n  drawLine(context: CanvasRenderingContext2D | OffscreenCanvasRenderingContext2D, x1: number, y1: number, x2: number, y2: number) {\r\n    context.beginPath();\r\n    context.moveTo(x1, y1);\r\n    context.lineTo(x2, y2);\r\n    context.stroke();\r\n  }\r\n  getGridPointDist(min: number, max: number, factor: number) {\r\n    const diff = max - min;\r\n    let result = Math.pow(10.0, Math.ceil(Math.log(diff) / Math.log(10.0)) - 1);\r\n    switch (Math.floor(diff / result)) {\r\n      case 9: result /= 2; break;\r\n      case 8: result /= 3; break;\r\n      case 7: result /= 4; break;\r\n      case 6: result /= 5; break;\r\n      case 5: result /= 6; break;\r\n      case 4: result /= 7; break;\r\n      case 3: result /= 8; break;\r\n      case 2: result /= 9; break;\r\n      case 1: result /= 10; break;\r\n    }\r\n    result *= factor;\r\n    return result;\r\n  }\r\n  drawGrid(context: CanvasRenderingContext2D | OffscreenCanvasRenderingContext2D, width: number, height: number) {\r\n    context.clearRect(0, 0, width, height);\r\n    const xDiff = this.state.config.xMax - this.state.config.xMin;\r\n    const xPixPerUnit = width / xDiff;\r\n    const yDiff = this.state.config.yMax - this.state.config.yMin;\r\n    const yPixPerUnit = height / yDiff;\r\n    const xF = this.getGridPointDist(this.state.config.xMin, this.state.config.xMax, this.state.config.gX);\r\n    const yF = this.getGridPointDist(this.state.config.yMin, this.state.config.yMax, this.state.config.gY);\r\n    this.plotStyle.axisColor = get(this.plotStyle.axisColor, '#000000');\r\n    this.plotStyle.gridColor = get(this.plotStyle.gridColor, '#b0b0b0');\r\n\r\n    let startValue = Math.ceil(this.state.config.xMin / xF) * xF;\r\n    let number = Math.round(Math.floor(xDiff / xF)) + 1;\r\n    let axisPosition;\r\n    if (this.state.config.yMin < 0 && this.state.config.yMax > 0) {\r\n      axisPosition = height + this.state.config.yMin * yPixPerUnit + 12;\r\n    } else {\r\n      axisPosition = height - 12;\r\n    }\r\n    context.strokeStyle = this.plotStyle.gridColor;\r\n    for (let i = 0; i < number; i++) {\r\n      if (Math.abs(startValue) < xF * 0.5) {\r\n        context.strokeStyle = this.plotStyle.axisColor;\r\n      }\r\n      const position = Math.round((startValue - this.state.config.xMin) * xPixPerUnit);\r\n      this.drawLine(context, position, 0, position, height);\r\n      context.fillStyle = this.plotStyle.axisColor;\r\n      const text = Math.round(startValue * 100) / 100;\r\n      context.fillText(text + '', position + 4, axisPosition);\r\n      context.strokeStyle = this.plotStyle.gridColor;\r\n      startValue += xF;\r\n    }\r\n\r\n    startValue = Math.ceil(this.state.config.yMin / yF) * yF;\r\n    number = Math.round(Math.floor(yDiff / yF)) + 1;\r\n    if (this.state.config.xMin < 0 && this.state.config.xMax > 0) {\r\n      axisPosition = -this.state.config.xMin * xPixPerUnit + 5;\r\n    } else {\r\n      axisPosition = 5;\r\n    }\r\n    context.strokeStyle = this.plotStyle.gridColor;\r\n    for (let i = 0; i < number; i++) {\r\n      if (Math.abs(startValue) < yF * 0.5) {\r\n        context.strokeStyle = this.plotStyle.axisColor;\r\n      }\r\n      const position = height - Math.round((startValue - this.state.config.yMin) * yPixPerUnit);\r\n      this.drawLine(context, 0, position, width, position);\r\n      let axisVal = Math.round(startValue * 100) / 100;\r\n      if (axisVal !== 0) {\r\n        context.fillStyle = this.plotStyle.axisColor;\r\n        const text = axisVal;\r\n        context.fillText(text + '', axisPosition, position - 4);\r\n      }\r\n      context.strokeStyle = this.plotStyle.gridColor;\r\n      startValue += yF;\r\n    }\r\n  }\r\n  functionRenderer(context: CanvasRenderingContext2D | OffscreenCanvasRenderingContext2D, width: number, height: number) {\r\n    if (this.state.points.length <= 0) return;\r\n    context.clearRect(0, 0, width, height);\r\n    context.strokeStyle = get(this.plotStyle.plotColor, '#000');\r\n    context.lineWidth = 2;\r\n    context.beginPath();\r\n    let startX = this.xCoordToPix(this.state.config, width, this.state.points[0].x);\r\n    let startY = this.yCoordToPix(this.state.config, height, this.state.points[0].y);\r\n    context.moveTo(startX, startY);\r\n    for (let i = 1; i < this.state.points.length; i += 1) {\r\n      const x = this.xCoordToPix(this.state.config, width, this.state.points[i].x);\r\n      const y = this.yCoordToPix(this.state.config, height, this.state.points[i].y);\r\n      context.lineTo(x, y);\r\n    }\r\n    context.stroke();\r\n  }\r\n  setupUI(height: number) {\r\n    this.display = this.createDisplay(height, [\r\n      { auto: true, renderer: (context, width, height) => this.gridRenderer(context, width, height) },\r\n      { auto: false }\r\n    ]);\r\n    this.polarToggle = this.createToggle({ propName: 'polar', height: 10, style: { grow: .1 } });\r\n    this.ui.append([\r\n      this.display,\r\n      this.createHozLayout([this.createLabel('Polar ?', { style: { grow: .2 } }), this.polarToggle], { style: { spacing: 5 } })\r\n    ]);\r\n  }\r\n}\r\n\r\nexport interface PlotStyle {\r\n  axisColor?: string, gridColor?: string, plotColor?: string\r\n}\r\n","import { Flow } from \"../../core/flow\";\r\nimport { Vector } from \"../../core/vector\";\r\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\r\nimport { Color } from \"../../core/color\";\r\nimport { Node } from \"../../core/node\";\r\nimport { InputType, DisplayStyle } from \"../../ui/index\";\r\n\r\nexport class LineChartMini extends Node {\r\n\r\n  static DefaultState = { size: 10 };\r\n\r\n  constructor(flow: Flow, height: number, colors: string[], displayStyle: DisplayStyle, options: NodeCreatorOptions = {}) {\r\n    super(flow, options.name || 'Line Chart Mini', options.position || new Vector(50, 50), options.width || 150,\r\n      [{ name: 'data', dataType: 'array' }], [],\r\n      {\r\n        state: options.state ? { ...LineChartMini.DefaultState, ...options.state } : LineChartMini.DefaultState,\r\n        style: options.style || { rowHeight: 10 },\r\n        terminalStyle: options.terminalStyle || {}\r\n      }\r\n    );\r\n\r\n    this.setupUI(height, colors, displayStyle);\r\n  }\r\n\r\n  setupUI(height: number, colors: string[], displayStyle: DisplayStyle) {\r\n    let display = this.createDisplay(height, [{\r\n      auto: true,\r\n      renderer: (context, wdth, hght) => {\r\n        let data = this.getInputs();\r\n        if (!data || !data[0]) return true;\r\n        data[0].forEach((input: number[], index: number) => {\r\n          if (!input) return;\r\n          let spacing = Number((wdth / (this.state.size - 1)).toFixed(2));\r\n          context.strokeStyle = colors[index] || Color.Random().rgbaCSSString;\r\n          context.lineWidth = 2;\r\n          context.beginPath();\r\n          context.moveTo(0, (1 - input[0]) * hght);\r\n          for (let i = 1; i < input.length; i += 1) context.lineTo(i * spacing, (1 - input[i]) * hght);\r\n          context.stroke();\r\n        });\r\n        return true;\r\n      }\r\n    }], { style: displayStyle ? displayStyle : {} });\r\n    this.ui.append(display);\r\n    let sizeInput = this.createInput({ propName: 'size', input: true, output: true, height: 20, style: { type: InputType.Number, grow: .5 } });\r\n    this.ui.append(this.createHozLayout([\r\n      this.createLabel('Size'),\r\n      sizeInput\r\n    ], { style: { spacing: 20 } }));\r\n  }\r\n}\r\n","/*Copyright (c) 2012 DinahMoe AB & Oskar Eriksson\n\n  Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation\n  files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy,\n  modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software\n  is furnished to do so, subject to the following conditions:\n\n  The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n\n  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n  DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE\n  OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n*/\n\nvar userContext,\n  userInstance,\n  pipe = function (param, val) {\n    param.value = val;\n  },\n  Super = Object.create(null, {\n    activate: {\n      writable: true,\n      value: function (doActivate) {\n        if (doActivate) {\n          this.input.disconnect();\n          this.input.connect(this.activateNode);\n          if (this.activateCallback) {\n            this.activateCallback(doActivate);\n          }\n        } else {\n          this.input.disconnect();\n          this.input.connect(this.output);\n        }\n      }\n    },\n    bypass: {\n      get: function () {\n        return this._bypass;\n      },\n      set: function (value) {\n        if (this._lastBypassValue === value) {\n          return;\n        }\n        this._bypass = value;\n        this.activate(!value);\n        this._lastBypassValue = value;\n      }\n    },\n    connect: {\n      value: function (target) {\n        this.output.connect(target);\n      }\n    },\n    disconnect: {\n      value: function (target) {\n        this.output.disconnect(target);\n      }\n    },\n    connectInOrder: {\n      value: function (nodeArray) {\n        var i = nodeArray.length - 1;\n        while (i--) {\n          if (!nodeArray[i].connect) {\n            return console.error(\"AudioNode.connectInOrder: TypeError: Not an AudioNode.\", nodeArray[i]);\n          }\n          if (nodeArray[i + 1].input) {\n            nodeArray[i].connect(nodeArray[i + 1].input);\n          } else {\n            nodeArray[i].connect(nodeArray[i + 1]);\n          }\n        }\n      }\n    },\n    getDefaults: {\n      value: function () {\n        var result = {};\n        for (var key in this.defaults) {\n          result[key] = this.defaults[key].value;\n        }\n        return result;\n      }\n    },\n    automate: {\n      value: function (property, value, duration, startTime) {\n        var start = startTime ? ~~(startTime / 1000) : userContext.currentTime,\n          dur = duration ? ~~(duration / 1000) : 0,\n          _is = this.defaults[property],\n          param = this[property],\n          method;\n\n        if (param) {\n          if (_is.automatable) {\n            if (!duration) {\n              method = \"setValueAtTime\";\n            } else {\n              method = \"linearRampToValueAtTime\";\n              param.cancelScheduledValues(start);\n              param.setValueAtTime(param.value, start);\n            }\n            param[method](value, dur + start);\n          } else {\n            param = value;\n          }\n        } else {\n          console.error(\"Invalid Property for \" + this.name);\n        }\n      }\n    }\n  }),\n  FLOAT = \"float\",\n  BOOLEAN = \"boolean\",\n  STRING = \"string\",\n  INT = \"int\";\n\nif (typeof module !== \"undefined\" && module.exports) {\n  module.exports = Tuna;\n} else if (typeof define === \"function\") {\n  window.define(\"Tuna\", definition);\n} else {\n  window.Tuna = Tuna;\n}\n\nfunction definition() {\n  return Tuna;\n}\n\nfunction Tuna(context) {\n  if (!(this instanceof Tuna)) {\n    return new Tuna(context);\n  }\n\n  var _window = typeof window === \"undefined\" ? {} : window;\n\n  if (!_window.AudioContext) {\n    _window.AudioContext = _window.webkitAudioContext;\n  }\n  if (!context) {\n    console.log(\"tuna.js: Missing audio context! Creating a new context for you.\");\n    context = _window.AudioContext && (new _window.AudioContext());\n  }\n  if (!context) {\n    throw new Error(\"Tuna cannot initialize because this environment does not support web audio.\");\n  }\n  connectify(context);\n  userContext = context;\n  userInstance = this;\n}\n\nfunction connectify(context) {\n  if (context.__connectified__ === true) return;\n\n  var gain = context.createGain(),\n    proto = Object.getPrototypeOf(Object.getPrototypeOf(gain)),\n    oconnect = proto.connect;\n\n  proto.connect = shimConnect;\n  context.__connectified__ = true; // Prevent overriding connect more than once\n\n  function shimConnect() {\n    var node = arguments[0];\n    arguments[0] = Super.isPrototypeOf ? (Super.isPrototypeOf(node) ? node.input : node) : (node.input || node);\n    oconnect.apply(this, arguments);\n    return node;\n  }\n}\n\nfunction dbToWAVolume(db) {\n  return Math.max(0, Math.round(100 * Math.pow(2, db / 6)) / 100);\n}\n\nfunction fmod(x, y) {\n  // http://kevin.vanzonneveld.net\n  // *     example 1: fmod(5.7, 1.3);\n  // *     returns 1: 0.5\n  var tmp, tmp2, p = 0,\n    pY = 0,\n    l = 0.0,\n    l2 = 0.0;\n\n  tmp = x.toExponential().match(/^.\\.?(.*)e(.+)$/);\n  p = parseInt(tmp[2], 10) - (tmp[1] + \"\").length;\n  tmp = y.toExponential().match(/^.\\.?(.*)e(.+)$/);\n  pY = parseInt(tmp[2], 10) - (tmp[1] + \"\").length;\n\n  if (pY > p) {\n    p = pY;\n  }\n\n  tmp2 = (x % y);\n\n  if (p < -100 || p > 20) {\n    // toFixed will give an out of bound error so we fix it like this:\n    l = Math.round(Math.log(tmp2) / Math.log(10));\n    l2 = Math.pow(10, l);\n\n    return (tmp2 / l2).toFixed(l - p) * l2;\n  } else {\n    return parseFloat(tmp2.toFixed(-p));\n  }\n}\n\nfunction sign(x) {\n  if (x === 0) {\n    return 1;\n  } else {\n    return Math.abs(x) / x;\n  }\n}\n\nfunction tanh(n) {\n  return (Math.exp(n) - Math.exp(-n)) / (Math.exp(n) + Math.exp(-n));\n}\n\nfunction initValue(userVal, defaultVal) {\n  return userVal === undefined ? defaultVal : userVal;\n}\n\nTuna.prototype.Bitcrusher = function (properties) {\n  if (!properties) {\n    properties = this.getDefaults();\n  }\n  this.bufferSize = properties.bufferSize || this.defaults.bufferSize.value;\n\n  this.input = userContext.createGain();\n  this.activateNode = userContext.createGain();\n  this.processor = userContext.createScriptProcessor(this.bufferSize, 1, 1);\n  this.output = userContext.createGain();\n\n  this.activateNode.connect(this.processor);\n  this.processor.connect(this.output);\n\n  var phaser = 0,\n    last = 0,\n    input, output, step, i, length;\n  this.processor.onaudioprocess = function (e) {\n    input = e.inputBuffer.getChannelData(0),\n      output = e.outputBuffer.getChannelData(0),\n      step = Math.pow(1 / 2, this.bits);\n    length = input.length;\n    for (i = 0; i < length; i++) {\n      phaser += this.normfreq;\n      if (phaser >= 1.0) {\n        phaser -= 1.0;\n        last = step * Math.floor(input[i] / step + 0.5);\n      }\n      output[i] = last;\n    }\n  };\n\n  this.bits = properties.bits || this.defaults.bits.value;\n  this.normfreq = initValue(properties.normfreq, this.defaults.normfreq.value);\n  this.bypass = properties.bypass || this.defaults.bypass.value;\n};\nTuna.prototype.Bitcrusher.prototype = Object.create(Super, {\n  name: {\n    value: \"Bitcrusher\"\n  },\n  defaults: {\n    writable: true,\n    value: {\n      bits: {\n        value: 4,\n        min: 1,\n        max: 16,\n        automatable: false,\n        type: INT\n      },\n      bufferSize: {\n        value: 4096,\n        min: 256,\n        max: 16384,\n        automatable: false,\n        type: INT\n      },\n      bypass: {\n        value: false,\n        automatable: false,\n        type: BOOLEAN\n      },\n      normfreq: {\n        value: 0.1,\n        min: 0.0001,\n        max: 1.0,\n        automatable: false,\n        type: FLOAT\n      }\n    }\n  },\n  bits: {\n    enumerable: true,\n    get: function () {\n      return this.processor.bits;\n    },\n    set: function (value) {\n      this.processor.bits = value;\n    }\n  },\n  normfreq: {\n    enumerable: true,\n    get: function () {\n      return this.processor.normfreq;\n    },\n    set: function (value) {\n      this.processor.normfreq = value;\n    }\n  }\n});\n\nTuna.prototype.Cabinet = function (properties) {\n  if (!properties) {\n    properties = this.getDefaults();\n  }\n  this.input = userContext.createGain();\n  this.activateNode = userContext.createGain();\n  this.convolver = this.newConvolver(properties.impulsePath || \"../impulses/impulse_guitar.wav\");\n  this.makeupNode = userContext.createGain();\n  this.output = userContext.createGain();\n\n  this.activateNode.connect(this.convolver.input);\n  this.convolver.output.connect(this.makeupNode);\n  this.makeupNode.connect(this.output);\n  //don't use makeupGain setter at init to avoid smoothing\n  this.makeupNode.gain.value = initValue(properties.makeupGain, this.defaults.makeupGain.value);\n  this.bypass = properties.bypass || this.defaults.bypass.value;\n};\nTuna.prototype.Cabinet.prototype = Object.create(Super, {\n  name: {\n    value: \"Cabinet\"\n  },\n  defaults: {\n    writable: true,\n    value: {\n      makeupGain: {\n        value: 1,\n        min: 0,\n        max: 20,\n        automatable: true,\n        type: FLOAT\n      },\n      bypass: {\n        value: false,\n        automatable: false,\n        type: BOOLEAN\n      }\n    }\n  },\n  makeupGain: {\n    enumerable: true,\n    get: function () {\n      return this.makeupNode.gain;\n    },\n    set: function (value) {\n      this.makeupNode.gain.setTargetAtTime(value, userContext.currentTime, 0.01);\n    }\n  },\n  newConvolver: {\n    value: function (impulsePath) {\n      return new userInstance.Convolver({\n        impulse: impulsePath,\n        dryLevel: 0,\n        wetLevel: 1\n      });\n    }\n  }\n});\n\nTuna.prototype.Chorus = function (properties) {\n  if (!properties) {\n    properties = this.getDefaults();\n  }\n  this.input = userContext.createGain();\n  this.attenuator = this.activateNode = userContext.createGain();\n  this.splitter = userContext.createChannelSplitter(2);\n  this.delayL = userContext.createDelay();\n  this.delayR = userContext.createDelay();\n  this.feedbackGainNodeLR = userContext.createGain();\n  this.feedbackGainNodeRL = userContext.createGain();\n  this.merger = userContext.createChannelMerger(2);\n  this.output = userContext.createGain();\n  this.delayL.delayTime = 0;\n  this.delayR.delayTime = 0;\n\n  this.lfoL = new userInstance.LFO({\n    target: this.delayL.delayTime,\n    callback: pipe\n  });\n  this.lfoR = new userInstance.LFO({\n    target: this.delayR.delayTime,\n    callback: pipe\n  });\n\n  this.input.connect(this.attenuator);\n  this.attenuator.connect(this.output);\n  this.attenuator.connect(this.splitter);\n  this.splitter.connect(this.delayL, 0);\n  this.splitter.connect(this.delayR, 1);\n  this.delayL.connect(this.feedbackGainNodeLR);\n  this.delayR.connect(this.feedbackGainNodeRL);\n  this.feedbackGainNodeLR.connect(this.delayR);\n  this.feedbackGainNodeRL.connect(this.delayL);\n  this.delayL.connect(this.merger, 0, 0);\n  this.delayR.connect(this.merger, 0, 1);\n  this.merger.connect(this.output);\n\n  this.feedback = initValue(properties.feedback, this.defaults.feedback.value);\n  this.rate = initValue(properties.rate, this.defaults.rate.value);\n  this.delay = initValue(properties.delay, this.defaults.delay.value);\n  this.depth = initValue(properties.depth, this.defaults.depth.value);\n  this.lfoR.phase = Math.PI / 2;\n  this.attenuator.gain.value = 0.6934; // 1 / (10 ^ (((20 * log10(3)) / 3) / 20))\n  this.lfoL.activate(true);\n  this.lfoR.activate(true);\n  this.bypass = properties.bypass || this.defaults.bypass.value;\n};\nTuna.prototype.Chorus.prototype = Object.create(Super, {\n  name: {\n    value: \"Chorus\"\n  },\n  defaults: {\n    writable: true,\n    value: {\n      feedback: {\n        value: 0.4,\n        min: 0,\n        max: 0.95,\n        automatable: false,\n        type: FLOAT\n      },\n      delay: {\n        value: 0.0045,\n        min: 0,\n        max: 1,\n        automatable: false,\n        type: FLOAT\n      },\n      depth: {\n        value: 0.7,\n        min: 0,\n        max: 1,\n        automatable: false,\n        type: FLOAT\n      },\n      rate: {\n        value: 1.5,\n        min: 0,\n        max: 8,\n        automatable: false,\n        type: FLOAT\n      },\n      bypass: {\n        value: false,\n        automatable: false,\n        type: BOOLEAN\n      }\n    }\n  },\n  delay: {\n    enumerable: true,\n    get: function () {\n      return this._delay;\n    },\n    set: function (value) {\n      this._delay = 0.0002 * (Math.pow(10, value) * 2);\n      this.lfoL.offset = this._delay;\n      this.lfoR.offset = this._delay;\n      this._depth = this._depth;\n    }\n  },\n  depth: {\n    enumerable: true,\n    get: function () {\n      return this._depth;\n    },\n    set: function (value) {\n      this._depth = value;\n      this.lfoL.oscillation = this._depth * this._delay;\n      this.lfoR.oscillation = this._depth * this._delay;\n    }\n  },\n  feedback: {\n    enumerable: true,\n    get: function () {\n      return this._feedback;\n    },\n    set: function (value) {\n      this._feedback = value;\n      this.feedbackGainNodeLR.gain.setTargetAtTime(this._feedback, userContext.currentTime, 0.01);\n      this.feedbackGainNodeRL.gain.setTargetAtTime(this._feedback, userContext.currentTime, 0.01);\n    }\n  },\n  rate: {\n    enumerable: true,\n    get: function () {\n      return this._rate;\n    },\n    set: function (value) {\n      this._rate = value;\n      this.lfoL.frequency = this._rate;\n      this.lfoR.frequency = this._rate;\n    }\n  }\n});\n\nTuna.prototype.Compressor = function (properties) {\n  if (!properties) {\n    properties = this.getDefaults();\n  }\n  this.input = userContext.createGain();\n  this.compNode = this.activateNode = userContext.createDynamicsCompressor();\n  this.makeupNode = userContext.createGain();\n  this.output = userContext.createGain();\n\n  this.compNode.connect(this.makeupNode);\n  this.makeupNode.connect(this.output);\n\n  this.automakeup = initValue(properties.automakeup, this.defaults.automakeup.value);\n\n  //don't use makeupGain setter at initialization to avoid smoothing\n  if (this.automakeup) {\n    this.makeupNode.gain.value = dbToWAVolume(this.computeMakeup());\n  } else {\n    this.makeupNode.gain.value = dbToWAVolume(initValue(properties.makeupGain, this.defaults.makeupGain.value));\n  }\n  this.threshold = initValue(properties.threshold, this.defaults.threshold.value);\n  this.release = initValue(properties.release, this.defaults.release.value);\n  this.attack = initValue(properties.attack, this.defaults.attack.value);\n  this.ratio = properties.ratio || this.defaults.ratio.value;\n  this.knee = initValue(properties.knee, this.defaults.knee.value);\n  this.bypass = properties.bypass || this.defaults.bypass.value;\n};\nTuna.prototype.Compressor.prototype = Object.create(Super, {\n  name: {\n    value: \"Compressor\"\n  },\n  defaults: {\n    writable: true,\n    value: {\n      threshold: {\n        value: -20,\n        min: -60,\n        max: 0,\n        automatable: true,\n        type: FLOAT\n      },\n      release: {\n        value: 250,\n        min: 10,\n        max: 2000,\n        automatable: true,\n        type: FLOAT\n      },\n      makeupGain: {\n        value: 1,\n        min: 1,\n        max: 100,\n        automatable: true,\n        type: FLOAT\n      },\n      attack: {\n        value: 1,\n        min: 0,\n        max: 1000,\n        automatable: true,\n        type: FLOAT\n      },\n      ratio: {\n        value: 4,\n        min: 1,\n        max: 50,\n        automatable: true,\n        type: FLOAT\n      },\n      knee: {\n        value: 5,\n        min: 0,\n        max: 40,\n        automatable: true,\n        type: FLOAT\n      },\n      automakeup: {\n        value: false,\n        automatable: false,\n        type: BOOLEAN\n      },\n      bypass: {\n        value: false,\n        automatable: false,\n        type: BOOLEAN\n      }\n    }\n  },\n  computeMakeup: {\n    value: function () {\n      var magicCoefficient = 4, // raise me if the output is too hot\n        c = this.compNode;\n      return -(c.threshold.value - c.threshold.value / c.ratio.value) / magicCoefficient;\n    }\n  },\n  automakeup: {\n    enumerable: true,\n    get: function () {\n      return this._automakeup;\n    },\n    set: function (value) {\n      this._automakeup = value;\n      if (this._automakeup) this.makeupGain = this.computeMakeup();\n    }\n  },\n  threshold: {\n    enumerable: true,\n    get: function () {\n      return this.compNode.threshold;\n    },\n    set: function (value) {\n      this.compNode.threshold.value = value;\n      if (this._automakeup) this.makeupGain = this.computeMakeup();\n    }\n  },\n  ratio: {\n    enumerable: true,\n    get: function () {\n      return this.compNode.ratio;\n    },\n    set: function (value) {\n      this.compNode.ratio.value = value;\n      if (this._automakeup) this.makeupGain = this.computeMakeup();\n    }\n  },\n  knee: {\n    enumerable: true,\n    get: function () {\n      return this.compNode.knee;\n    },\n    set: function (value) {\n      this.compNode.knee.value = value;\n      if (this._automakeup) this.makeupGain = this.computeMakeup();\n    }\n  },\n  attack: {\n    enumerable: true,\n    get: function () {\n      return this.compNode.attack;\n    },\n    set: function (value) {\n      this.compNode.attack.value = value / 1000;\n    }\n  },\n  release: {\n    enumerable: true,\n    get: function () {\n      return this.compNode.release;\n    },\n    set: function (value) {\n      this.compNode.release.value = value / 1000;\n    }\n  },\n  makeupGain: {\n    enumerable: true,\n    get: function () {\n      return this.makeupNode.gain;\n    },\n    set: function (value) {\n      this.makeupNode.gain.setTargetAtTime(dbToWAVolume(value), userContext.currentTime, 0.01);\n    }\n  }\n});\n\nTuna.prototype.Convolver = function (properties) {\n  if (!properties) {\n    properties = this.getDefaults();\n  }\n  this.input = userContext.createGain();\n  this.activateNode = userContext.createGain();\n  this.convolver = userContext.createConvolver();\n  this.dry = userContext.createGain();\n  this.filterLow = userContext.createBiquadFilter();\n  this.filterHigh = userContext.createBiquadFilter();\n  this.wet = userContext.createGain();\n  this.output = userContext.createGain();\n\n  this.activateNode.connect(this.filterLow);\n  this.activateNode.connect(this.dry);\n  this.filterLow.connect(this.filterHigh);\n  this.filterHigh.connect(this.convolver);\n  this.convolver.connect(this.wet);\n  this.wet.connect(this.output);\n  this.dry.connect(this.output);\n\n  //don't use setters at init to avoid smoothing\n  this.dry.gain.value = initValue(properties.dryLevel, this.defaults.dryLevel.value);\n  this.wet.gain.value = initValue(properties.wetLevel, this.defaults.wetLevel.value);\n  this.filterHigh.frequency.value = properties.highCut || this.defaults.highCut.value;\n  this.filterLow.frequency.value = properties.lowCut || this.defaults.lowCut.value;\n  this.output.gain.value = initValue(properties.level, this.defaults.level.value);\n  this.filterHigh.type = \"lowpass\";\n  this.filterLow.type = \"highpass\";\n  this.buffer = properties.impulse || \"../impulses/ir_rev_short.wav\";\n  this.bypass = properties.bypass || this.defaults.bypass.value;\n};\nTuna.prototype.Convolver.prototype = Object.create(Super, {\n  name: {\n    value: \"Convolver\"\n  },\n  defaults: {\n    writable: true,\n    value: {\n      highCut: {\n        value: 22050,\n        min: 20,\n        max: 22050,\n        automatable: true,\n        type: FLOAT\n      },\n      lowCut: {\n        value: 20,\n        min: 20,\n        max: 22050,\n        automatable: true,\n        type: FLOAT\n      },\n      dryLevel: {\n        value: 1,\n        min: 0,\n        max: 1,\n        automatable: true,\n        type: FLOAT\n      },\n      wetLevel: {\n        value: 1,\n        min: 0,\n        max: 1,\n        automatable: true,\n        type: FLOAT\n      },\n      level: {\n        value: 1,\n        min: 0,\n        max: 1,\n        automatable: true,\n        type: FLOAT\n      },\n      bypass: {\n        value: false,\n        automatable: false,\n        type: BOOLEAN\n      }\n    }\n  },\n  lowCut: {\n    get: function () {\n      return this.filterLow.frequency;\n    },\n    set: function (value) {\n      this.filterLow.frequency.setTargetAtTime(value, userContext.currentTime, 0.01);\n    }\n  },\n  highCut: {\n    get: function () {\n      return this.filterHigh.frequency;\n    },\n    set: function (value) {\n      this.filterHigh.frequency.setTargetAtTime(value, userContext.currentTime, 0.01);\n    }\n  },\n  level: {\n    get: function () {\n      return this.output.gain;\n    },\n    set: function (value) {\n      this.output.gain.setTargetAtTime(value, userContext.currentTime, 0.01);\n    }\n  },\n  dryLevel: {\n    get: function () {\n      return this.dry.gain;\n    },\n    set: function (value) {\n      this.dry.gain.setTargetAtTime(value, userContext.currentTime, 0.01);\n    }\n  },\n  wetLevel: {\n    get: function () {\n      return this.wet.gain;\n    },\n    set: function (value) {\n      this.wet.gain.setTargetAtTime(value, userContext.currentTime, 0.01);\n    }\n  },\n  buffer: {\n    enumerable: false,\n    get: function () {\n      return this.convolver.buffer;\n    },\n    set: function (impulse) {\n      var convolver = this.convolver,\n        xhr = new XMLHttpRequest();\n      if (!impulse) {\n        console.log(\"Tuna.Convolver.setBuffer: Missing impulse path!\");\n        return;\n      }\n      xhr.open(\"GET\", impulse, true);\n      xhr.responseType = \"arraybuffer\";\n      xhr.onreadystatechange = function () {\n        if (xhr.readyState === 4) {\n          if (xhr.status < 300 && xhr.status > 199 || xhr.status === 302) {\n            userContext.decodeAudioData(xhr.response, function (buffer) {\n              convolver.buffer = buffer;\n            }, function (e) {\n              if (e) console.log(\"Tuna.Convolver.setBuffer: Error decoding data\" + e);\n            });\n          }\n        }\n      };\n      xhr.send(null);\n    }\n  }\n});\n\nTuna.prototype.Delay = function (properties) {\n  if (!properties) {\n    properties = this.getDefaults();\n  }\n  this.input = userContext.createGain();\n  this.activateNode = userContext.createGain();\n  this.dry = userContext.createGain();\n  this.wet = userContext.createGain();\n  this.filter = userContext.createBiquadFilter();\n  this.delay = userContext.createDelay(10);\n  this.feedbackNode = userContext.createGain();\n  this.output = userContext.createGain();\n\n  this.activateNode.connect(this.delay);\n  this.activateNode.connect(this.dry);\n  this.delay.connect(this.filter);\n  this.filter.connect(this.feedbackNode);\n  this.feedbackNode.connect(this.delay);\n  this.feedbackNode.connect(this.wet);\n  this.wet.connect(this.output);\n  this.dry.connect(this.output);\n\n  this.delayTime = properties.delayTime || this.defaults.delayTime.value;\n  //don't use setters at init to avoid smoothing\n  this.feedbackNode.gain.value = initValue(properties.feedback, this.defaults.feedback.value);\n  this.wet.gain.value = initValue(properties.wetLevel, this.defaults.wetLevel.value);\n  this.dry.gain.value = initValue(properties.dryLevel, this.defaults.dryLevel.value);\n  this.filter.frequency.value = properties.cutoff || this.defaults.cutoff.value;\n  this.filter.type = \"lowpass\";\n  this.bypass = properties.bypass || this.defaults.bypass.value;\n};\nTuna.prototype.Delay.prototype = Object.create(Super, {\n  name: {\n    value: \"Delay\"\n  },\n  defaults: {\n    writable: true,\n    value: {\n      delayTime: {\n        value: 100,\n        min: 20,\n        max: 1000,\n        automatable: false,\n        type: FLOAT\n      },\n      feedback: {\n        value: 0.45,\n        min: 0,\n        max: 0.9,\n        automatable: true,\n        type: FLOAT\n      },\n      cutoff: {\n        value: 20000,\n        min: 20,\n        max: 20000,\n        automatable: true,\n        type: FLOAT\n      },\n      wetLevel: {\n        value: 0.5,\n        min: 0,\n        max: 1,\n        automatable: true,\n        type: FLOAT\n      },\n      dryLevel: {\n        value: 1,\n        min: 0,\n        max: 1,\n        automatable: true,\n        type: FLOAT\n      },\n      bypass: {\n        value: false,\n        automatable: false,\n        type: BOOLEAN\n      }\n    }\n  },\n  delayTime: {\n    enumerable: true,\n    get: function () {\n      return this.delay.delayTime;\n    },\n    set: function (value) {\n      this.delay.delayTime.value = value / 1000;\n    }\n  },\n  wetLevel: {\n    enumerable: true,\n    get: function () {\n      return this.wet.gain;\n    },\n    set: function (value) {\n      this.wet.gain.setTargetAtTime(value, userContext.currentTime, 0.01);\n    }\n  },\n  dryLevel: {\n    enumerable: true,\n    get: function () {\n      return this.dry.gain;\n    },\n    set: function (value) {\n      this.dry.gain.setTargetAtTime(value, userContext.currentTime, 0.01);\n    }\n  },\n  feedback: {\n    enumerable: true,\n    get: function () {\n      return this.feedbackNode.gain;\n    },\n    set: function (value) {\n      this.feedbackNode.gain.setTargetAtTime(value, userContext.currentTime, 0.01);\n    }\n  },\n  cutoff: {\n    enumerable: true,\n    get: function () {\n      return this.filter.frequency;\n    },\n    set: function (value) {\n      this.filter.frequency.setTargetAtTime(value, userContext.currentTime, 0.01);\n    }\n  }\n});\n\nTuna.prototype.Filter = function (properties) {\n  if (!properties) {\n    properties = this.getDefaults();\n  }\n  this.input = userContext.createGain();\n  this.activateNode = userContext.createGain();\n  this.filter = userContext.createBiquadFilter();\n  this.output = userContext.createGain();\n\n  this.activateNode.connect(this.filter);\n  this.filter.connect(this.output);\n\n  //don't use setters for freq and gain at init to avoid smoothing\n  this.filter.frequency.value = properties.frequency || this.defaults.frequency.value;\n  this.Q = properties.resonance || this.defaults.Q.value;\n  this.filterType = initValue(properties.filterType, this.defaults.filterType.value);\n  this.filter.gain.value = initValue(properties.gain, this.defaults.gain.value);\n  this.bypass = properties.bypass || this.defaults.bypass.value;\n};\nTuna.prototype.Filter.prototype = Object.create(Super, {\n  name: {\n    value: \"Filter\"\n  },\n  defaults: {\n    writable: true,\n    value: {\n      frequency: {\n        value: 800,\n        min: 20,\n        max: 22050,\n        automatable: true,\n        type: FLOAT\n      },\n      Q: {\n        value: 1,\n        min: 0.001,\n        max: 100,\n        automatable: true,\n        type: FLOAT\n      },\n      gain: {\n        value: 0,\n        min: -40,\n        max: 40,\n        automatable: true,\n        type: FLOAT\n      },\n      bypass: {\n        value: false,\n        automatable: false,\n        type: BOOLEAN\n      },\n      filterType: {\n        value: \"lowpass\",\n        automatable: false,\n        type: STRING\n      }\n    }\n  },\n  filterType: {\n    enumerable: true,\n    get: function () {\n      return this.filter.type;\n    },\n    set: function (value) {\n      this.filter.type = value;\n    }\n  },\n  Q: {\n    enumerable: true,\n    get: function () {\n      return this.filter.Q;\n    },\n    set: function (value) {\n      this.filter.Q.value = value;\n    }\n  },\n  gain: {\n    enumerable: true,\n    get: function () {\n      return this.filter.gain;\n    },\n    set: function (value) {\n      this.filter.gain.setTargetAtTime(value, userContext.currentTime, 0.01);\n    }\n  },\n  frequency: {\n    enumerable: true,\n    get: function () {\n      return this.filter.frequency;\n    },\n    set: function (value) {\n      this.filter.frequency.setTargetAtTime(value, userContext.currentTime, 0.01);\n    }\n  }\n});\n\nTuna.prototype.Gain = function (properties) {\n  if (!properties) {\n    properties = this.getDefaults();\n  }\n\n  this.input = userContext.createGain();\n  this.activateNode = userContext.createGain();\n  this.gainNode = userContext.createGain();\n  this.output = userContext.createGain();\n\n  this.activateNode.connect(this.gainNode);\n  this.gainNode.connect(this.output);\n\n  //don't use setter at init to avoid smoothing\n  this.gainNode.gain.value = initValue(properties.gain, this.defaults.gain.value);\n  this.bypass = properties.bypass || this.defaults.bypass.value;\n};\nTuna.prototype.Gain.prototype = Object.create(Super, {\n  name: {\n    value: \"Gain\"\n  },\n  defaults: {\n    writable: true,\n    value: {\n      bypass: {\n        value: false,\n        automatable: false,\n        type: BOOLEAN\n      },\n      gain: {\n        value: 1.0,\n        automatable: true,\n        type: FLOAT\n      }\n    }\n  },\n  gain: {\n    enumerable: true,\n    get: function () {\n      return this.gainNode.gain;\n    },\n    set: function (value) {\n      this.gainNode.gain.setTargetAtTime(value, userContext.currentTime, 0.01);\n    }\n  }\n});\n\nTuna.prototype.MoogFilter = function (properties) {\n  if (!properties) {\n    properties = this.getDefaults();\n  }\n  this.bufferSize = properties.bufferSize || this.defaults.bufferSize.value;\n\n  this.input = userContext.createGain();\n  this.activateNode = userContext.createGain();\n  this.processor = userContext.createScriptProcessor(this.bufferSize, 1, 1);\n  this.output = userContext.createGain();\n\n  this.activateNode.connect(this.processor);\n  this.processor.connect(this.output);\n\n  var in1, in2, in3, in4, out1, out2, out3, out4;\n  in1 = in2 = in3 = in4 = out1 = out2 = out3 = out4 = 0.0;\n  var input, output, f, fb, i, length, inputFactor;\n  this.processor.onaudioprocess = function (e) {\n    input = e.inputBuffer.getChannelData(0);\n    output = e.outputBuffer.getChannelData(0);\n    f = this.cutoff * 1.16;\n    inputFactor = 0.35013 * (f * f) * (f * f);\n    fb = this.resonance * (1.0 - 0.15 * f * f);\n    length = input.length;\n    for (i = 0; i < length; i++) {\n      input[i] -= out4 * fb;\n      input[i] *= inputFactor;\n      out1 = input[i] + 0.3 * in1 + (1 - f) * out1; // Pole 1\n      in1 = input[i];\n      out2 = out1 + 0.3 * in2 + (1 - f) * out2; // Pole 2\n      in2 = out1;\n      out3 = out2 + 0.3 * in3 + (1 - f) * out3; // Pole 3\n      in3 = out2;\n      out4 = out3 + 0.3 * in4 + (1 - f) * out4; // Pole 4\n      in4 = out3;\n      output[i] = out4;\n    }\n  };\n\n  this.cutoff = initValue(properties.cutoff, this.defaults.cutoff.value);\n  this.resonance = initValue(properties.resonance, this.defaults.resonance.value);\n  this.bypass = properties.bypass || this.defaults.bypass.value;\n};\nTuna.prototype.MoogFilter.prototype = Object.create(Super, {\n  name: {\n    value: \"MoogFilter\"\n  },\n  defaults: {\n    writable: true,\n    value: {\n      bufferSize: {\n        value: 4096,\n        min: 256,\n        max: 16384,\n        automatable: false,\n        type: INT\n      },\n      bypass: {\n        value: false,\n        automatable: false,\n        type: BOOLEAN\n      },\n      cutoff: {\n        value: 0.065,\n        min: 0.0001,\n        max: 1.0,\n        automatable: false,\n        type: FLOAT\n      },\n      resonance: {\n        value: 3.5,\n        min: 0.0,\n        max: 4.0,\n        automatable: false,\n        type: FLOAT\n      }\n    }\n  },\n  cutoff: {\n    enumerable: true,\n    get: function () {\n      return this.processor.cutoff;\n    },\n    set: function (value) {\n      this.processor.cutoff = value;\n    }\n  },\n  resonance: {\n    enumerable: true,\n    get: function () {\n      return this.processor.resonance;\n    },\n    set: function (value) {\n      this.processor.resonance = value;\n    }\n  }\n});\n\nTuna.prototype.Overdrive = function (properties) {\n  if (!properties) {\n    properties = this.getDefaults();\n  }\n  this.input = userContext.createGain();\n  this.activateNode = userContext.createGain();\n  this.inputDrive = userContext.createGain();\n  this.waveshaper = userContext.createWaveShaper();\n  this.outputDrive = userContext.createGain();\n  this.output = userContext.createGain();\n\n  this.activateNode.connect(this.inputDrive);\n  this.inputDrive.connect(this.waveshaper);\n  this.waveshaper.connect(this.outputDrive);\n  this.outputDrive.connect(this.output);\n\n  this.ws_table = new Float32Array(this.k_nSamples);\n  this.drive = initValue(properties.drive, this.defaults.drive.value);\n  this.outputGain = initValue(properties.outputGain, this.defaults.outputGain.value);\n  this.curveAmount = initValue(properties.curveAmount, this.defaults.curveAmount.value);\n  this.algorithmIndex = initValue(properties.algorithmIndex, this.defaults.algorithmIndex.value);\n  this.bypass = properties.bypass || this.defaults.bypass.value;\n};\nTuna.prototype.Overdrive.prototype = Object.create(Super, {\n  name: {\n    value: \"Overdrive\"\n  },\n  defaults: {\n    writable: true,\n    value: {\n      drive: {\n        value: 0.197,\n        min: 0,\n        max: 1,\n        automatable: true,\n        type: FLOAT,\n        scaled: true\n      },\n      outputGain: {\n        value: -9.154,\n        min: -46,\n        max: 0,\n        automatable: true,\n        type: FLOAT,\n        scaled: true\n      },\n      curveAmount: {\n        value: 0.979,\n        min: 0,\n        max: 1,\n        automatable: false,\n        type: FLOAT\n      },\n      algorithmIndex: {\n        value: 0,\n        min: 0,\n        max: 5,\n        automatable: false,\n        type: INT\n      },\n      bypass: {\n        value: false,\n        automatable: false,\n        type: BOOLEAN\n      }\n    }\n  },\n  k_nSamples: {\n    value: 8192\n  },\n  drive: {\n    get: function () {\n      return this.inputDrive.gain;\n    },\n    set: function (value) {\n      this.inputDrive.gain.value = value;\n    }\n  },\n  curveAmount: {\n    get: function () {\n      return this._curveAmount;\n    },\n    set: function (value) {\n      this._curveAmount = value;\n      if (this._algorithmIndex === undefined) {\n        this._algorithmIndex = 0;\n      }\n      this.waveshaperAlgorithms[this._algorithmIndex](this._curveAmount, this.k_nSamples, this.ws_table);\n      this.waveshaper.curve = this.ws_table;\n    }\n  },\n  outputGain: {\n    get: function () {\n      return this.outputDrive.gain;\n    },\n    set: function (value) {\n      this._outputGain = dbToWAVolume(value);\n      this.outputDrive.gain.setValueAtTime(this._outputGain, userContext.currentTime, 0.01);\n    }\n  },\n  algorithmIndex: {\n    get: function () {\n      return this._algorithmIndex;\n    },\n    set: function (value) {\n      this._algorithmIndex = value;\n      this.curveAmount = this._curveAmount;\n    }\n  },\n  waveshaperAlgorithms: {\n    value: [\n      function (amount, n_samples, ws_table) {\n        amount = Math.min(amount, 0.9999);\n        var k = 2 * amount / (1 - amount),\n          i, x;\n        for (i = 0; i < n_samples; i++) {\n          x = i * 2 / n_samples - 1;\n          ws_table[i] = (1 + k) * x / (1 + k * Math.abs(x));\n        }\n      },\n      function (amount, n_samples, ws_table) {\n        var i, x, y;\n        for (i = 0; i < n_samples; i++) {\n          x = i * 2 / n_samples - 1;\n          y = ((0.5 * Math.pow((x + 1.4), 2)) - 1) * (y >= 0 ? 5.8 : 1.2);\n          ws_table[i] = tanh(y);\n        }\n      },\n      function (amount, n_samples, ws_table) {\n        var i, x, y, a = 1 - amount;\n        for (i = 0; i < n_samples; i++) {\n          x = i * 2 / n_samples - 1;\n          y = x < 0 ? -Math.pow(Math.abs(x), a + 0.04) : Math.pow(x, a);\n          ws_table[i] = tanh(y * 2);\n        }\n      },\n      function (amount, n_samples, ws_table) {\n        var i, x, y, abx, a = 1 - amount > 0.99 ? 0.99 : 1 - amount;\n        for (i = 0; i < n_samples; i++) {\n          x = i * 2 / n_samples - 1;\n          abx = Math.abs(x);\n          if (abx < a) {\n            y = abx;\n          } else if (abx > a) {\n            y = a + (abx - a) / (1 + Math.pow((abx - a) / (1 - a), 2));\n          } else if (abx > 1) {\n            y = abx;\n          }\n          ws_table[i] = sign(x) * y * (1 / ((a + 1) / 2));\n        }\n      },\n      function (amount, n_samples, ws_table) { // fixed curve, amount doesn't do anything, the distortion is just from the drive\n        var i, x;\n        for (i = 0; i < n_samples; i++) {\n          x = i * 2 / n_samples - 1;\n          if (x < -0.08905) {\n            ws_table[i] = (-3 / 4) * (1 - (Math.pow((1 - (Math.abs(x) - 0.032857)), 12)) + (1 / 3) * (Math.abs(x) - 0.032847)) + 0.01;\n          } else if (x >= -0.08905 && x < 0.320018) {\n            ws_table[i] = (-6.153 * (x * x)) + 3.9375 * x;\n          } else {\n            ws_table[i] = 0.630035;\n          }\n        }\n      },\n      function (amount, n_samples, ws_table) {\n        var a = 2 + Math.round(amount * 14),\n          // we go from 2 to 16 bits, keep in mind for the UI\n          bits = Math.round(Math.pow(2, a - 1)),\n          // real number of quantization steps divided by 2\n          i, x;\n        for (i = 0; i < n_samples; i++) {\n          x = i * 2 / n_samples - 1;\n          ws_table[i] = Math.round(x * bits) / bits;\n        }\n      }\n    ]\n  }\n});\n\nTuna.prototype.Panner = function (properties) {\n  if (!properties) {\n    properties = this.getDefaults();\n  }\n\n  this.input = userContext.createGain();\n  this.activateNode = userContext.createGain();\n  this.panner = userContext.createStereoPanner();\n  this.output = userContext.createGain();\n\n  this.activateNode.connect(this.panner);\n  this.panner.connect(this.output);\n\n  this.pan = initValue(properties.pan, this.defaults.pan.value);\n  this.bypass = properties.bypass || this.defaults.bypass.value;\n};\nTuna.prototype.Panner.prototype = Object.create(Super, {\n  name: {\n    value: \"Panner\"\n  },\n  defaults: {\n    writable: true,\n    value: {\n      bypass: {\n        value: false,\n        automatable: false,\n        type: BOOLEAN\n      },\n      pan: {\n        value: 0.0,\n        min: -1.0,\n        max: 1.0,\n        automatable: true,\n        type: FLOAT\n      }\n    }\n  },\n  pan: {\n    enumerable: true,\n    get: function () {\n      return this.panner.pan;\n    },\n    set: function (value) {\n      this.panner.pan.value = value;\n    }\n  }\n});\n\nTuna.prototype.Phaser = function (properties) {\n  if (!properties) {\n    properties = this.getDefaults();\n  }\n  this.input = userContext.createGain();\n  this.splitter = this.activateNode = userContext.createChannelSplitter(2);\n  this.filtersL = [];\n  this.filtersR = [];\n  this.feedbackGainNodeL = userContext.createGain();\n  this.feedbackGainNodeR = userContext.createGain();\n  this.merger = userContext.createChannelMerger(2);\n  this.filteredSignal = userContext.createGain();\n  this.output = userContext.createGain();\n  this.lfoL = new userInstance.LFO({\n    target: this.filtersL,\n    callback: this.callback\n  });\n  this.lfoR = new userInstance.LFO({\n    target: this.filtersR,\n    callback: this.callback\n  });\n\n  var i = this.stage;\n  while (i--) {\n    this.filtersL[i] = userContext.createBiquadFilter();\n    this.filtersR[i] = userContext.createBiquadFilter();\n    this.filtersL[i].type = \"allpass\";\n    this.filtersR[i].type = \"allpass\";\n  }\n  this.input.connect(this.splitter);\n  this.input.connect(this.output);\n  this.splitter.connect(this.filtersL[0], 0, 0);\n  this.splitter.connect(this.filtersR[0], 1, 0);\n  this.connectInOrder(this.filtersL);\n  this.connectInOrder(this.filtersR);\n  this.filtersL[this.stage - 1].connect(this.feedbackGainNodeL);\n  this.filtersL[this.stage - 1].connect(this.merger, 0, 0);\n  this.filtersR[this.stage - 1].connect(this.feedbackGainNodeR);\n  this.filtersR[this.stage - 1].connect(this.merger, 0, 1);\n  this.feedbackGainNodeL.connect(this.filtersL[0]);\n  this.feedbackGainNodeR.connect(this.filtersR[0]);\n  this.merger.connect(this.output);\n\n  this.rate = initValue(properties.rate, this.defaults.rate.value);\n  this.baseModulationFrequency = properties.baseModulationFrequency || this.defaults.baseModulationFrequency.value;\n  this.depth = initValue(properties.depth, this.defaults.depth.value);\n  this.feedback = initValue(properties.feedback, this.defaults.feedback.value);\n  this.stereoPhase = initValue(properties.stereoPhase, this.defaults.stereoPhase.value);\n\n  this.lfoL.activate(true);\n  this.lfoR.activate(true);\n  this.bypass = properties.bypass || this.defaults.bypass.value;\n};\nTuna.prototype.Phaser.prototype = Object.create(Super, {\n  name: {\n    value: \"Phaser\"\n  },\n  stage: {\n    value: 4\n  },\n  defaults: {\n    writable: true,\n    value: {\n      rate: {\n        value: 0.1,\n        min: 0,\n        max: 8,\n        automatable: false,\n        type: FLOAT\n      },\n      depth: {\n        value: 0.6,\n        min: 0,\n        max: 1,\n        automatable: false,\n        type: FLOAT\n      },\n      feedback: {\n        value: 0.7,\n        min: 0,\n        max: 1,\n        automatable: false,\n        type: FLOAT\n      },\n      stereoPhase: {\n        value: 40,\n        min: 0,\n        max: 180,\n        automatable: false,\n        type: FLOAT\n      },\n      baseModulationFrequency: {\n        value: 700,\n        min: 500,\n        max: 1500,\n        automatable: false,\n        type: FLOAT\n      },\n      bypass: {\n        value: false,\n        automatable: false,\n        type: BOOLEAN\n      }\n    }\n  },\n  callback: {\n    value: function (filters, value) {\n      for (var stage = 0; stage < 4; stage++) {\n        filters[stage].frequency.value = value;\n      }\n    }\n  },\n  depth: {\n    get: function () {\n      return this._depth;\n    },\n    set: function (value) {\n      this._depth = value;\n      this.lfoL.oscillation = this._baseModulationFrequency * this._depth;\n      this.lfoR.oscillation = this._baseModulationFrequency * this._depth;\n    }\n  },\n  rate: {\n    get: function () {\n      return this._rate;\n    },\n    set: function (value) {\n      this._rate = value;\n      this.lfoL.frequency = this._rate;\n      this.lfoR.frequency = this._rate;\n    }\n  },\n  baseModulationFrequency: {\n    enumerable: true,\n    get: function () {\n      return this._baseModulationFrequency;\n    },\n    set: function (value) {\n      this._baseModulationFrequency = value;\n      this.lfoL.offset = this._baseModulationFrequency;\n      this.lfoR.offset = this._baseModulationFrequency;\n      this.depth = this._depth;\n    }\n  },\n  feedback: {\n    get: function () {\n      return this._feedback;\n    },\n    set: function (value) {\n      this._feedback = value;\n      this.feedbackGainNodeL.gain.setTargetAtTime(this._feedback, userContext.currentTime, 0.01);\n      this.feedbackGainNodeR.gain.setTargetAtTime(this._feedback, userContext.currentTime, 0.01);\n    }\n  },\n  stereoPhase: {\n    get: function () {\n      return this._stereoPhase;\n    },\n    set: function (value) {\n      this._stereoPhase = value;\n      var newPhase = this.lfoL._phase + this._stereoPhase * Math.PI / 180;\n      newPhase = fmod(newPhase, 2 * Math.PI);\n      this.lfoR._phase = newPhase;\n    }\n  }\n});\n\nTuna.prototype.PingPongDelay = function (properties) {\n  if (!properties) {\n    properties = this.getDefaults();\n  }\n  this.input = userContext.createGain();\n  this.wet = userContext.createGain();\n  this.stereoToMonoMix = userContext.createGain();\n  this.feedbackLevel = userContext.createGain();\n  this.output = userContext.createGain();\n  this.delayLeft = userContext.createDelay(10);\n  this.delayRight = userContext.createDelay(10);\n\n  this.activateNode = userContext.createGain();\n  this.splitter = userContext.createChannelSplitter(2);\n  this.merger = userContext.createChannelMerger(2);\n\n  this.activateNode.connect(this.splitter);\n  this.splitter.connect(this.stereoToMonoMix, 0, 0);\n  this.splitter.connect(this.stereoToMonoMix, 1, 0);\n  this.stereoToMonoMix.gain.value = .5;\n  this.stereoToMonoMix.connect(this.wet);\n  this.wet.connect(this.delayLeft);\n  this.feedbackLevel.connect(this.wet);\n  this.delayLeft.connect(this.delayRight);\n  this.delayRight.connect(this.feedbackLevel);\n  this.delayLeft.connect(this.merger, 0, 0);\n  this.delayRight.connect(this.merger, 0, 1);\n  this.merger.connect(this.output);\n  this.activateNode.connect(this.output);\n\n  this.delayTimeLeft = properties.delayTimeLeft !== undefined ? properties.delayTimeLeft : this.defaults.delayTimeLeft.value;\n  this.delayTimeRight = properties.delayTimeRight !== undefined ? properties.delayTimeRight : this.defaults.delayTimeRight.value;\n  this.feedbackLevel.gain.value = properties.feedback !== undefined ? properties.feedback : this.defaults.feedback.value;\n  this.wet.gain.value = properties.wetLevel !== undefined ? properties.wetLevel : this.defaults.wetLevel.value;\n  this.bypass = properties.bypass || this.defaults.bypass.value;\n};\nTuna.prototype.PingPongDelay.prototype = Object.create(Super, {\n  name: {\n    value: \"PingPongDelay\"\n  },\n  delayTimeLeft: {\n    enumerable: true,\n    get: function () {\n      return this._delayTimeLeft;\n    },\n    set: function (value) {\n      this._delayTimeLeft = value;\n      this.delayLeft.delayTime.value = value / 1000;\n    }\n  },\n  delayTimeRight: {\n    enumerable: true,\n    get: function () {\n      return this._delayTimeRight;\n    },\n    set: function (value) {\n      this._delayTimeRight = value;\n      this.delayRight.delayTime.value = value / 1000;\n    }\n  },\n  wetLevel: {\n    enumerable: true,\n    get: function () {\n      return this.wet.gain;\n    },\n    set: function (value) {\n      this.wet.gain.setTargetAtTime(value, userContext.currentTime, 0.01);\n    }\n  },\n  feedback: {\n    enumerable: true,\n    get: function () {\n      return this.feedbackLevel.gain;\n    },\n    set: function (value) {\n      this.feedbackLevel.gain.setTargetAtTime(value, userContext.currentTime, 0.01);\n    }\n  },\n  defaults: {\n    writable: true,\n    value: {\n      delayTimeLeft: {\n        value: 200,\n        min: 1,\n        max: 10000,\n        automatable: false,\n        type: INT\n      },\n      delayTimeRight: {\n        value: 400,\n        min: 1,\n        max: 10000,\n        automatable: false,\n        type: INT\n      },\n      feedback: {\n        value: 0.3,\n        min: 0,\n        max: 1,\n        automatable: true,\n        type: FLOAT\n      },\n      wetLevel: {\n        value: 0.5,\n        min: 0,\n        max: 1,\n        automatable: true,\n        type: FLOAT\n      },\n      bypass: {\n        value: false,\n        automatable: false,\n        type: BOOLEAN\n      }\n    }\n  }\n});\n\nTuna.prototype.Tremolo = function (properties) {\n  if (!properties) {\n    properties = this.getDefaults();\n  }\n  this.input = userContext.createGain();\n  this.splitter = this.activateNode = userContext.createChannelSplitter(2);\n  this.amplitudeL = userContext.createGain();\n  this.amplitudeR = userContext.createGain();\n  this.merger = userContext.createChannelMerger(2);\n  this.output = userContext.createGain();\n  this.lfoL = new userInstance.LFO({\n    target: this.amplitudeL.gain,\n    callback: pipe\n  });\n  this.lfoR = new userInstance.LFO({\n    target: this.amplitudeR.gain,\n    callback: pipe\n  });\n\n  this.input.connect(this.splitter);\n  this.splitter.connect(this.amplitudeL, 0);\n  this.splitter.connect(this.amplitudeR, 1);\n  this.amplitudeL.connect(this.merger, 0, 0);\n  this.amplitudeR.connect(this.merger, 0, 1);\n  this.merger.connect(this.output);\n\n  this.rate = properties.rate || this.defaults.rate.value;\n  this.intensity = initValue(properties.intensity, this.defaults.intensity.value);\n  this.stereoPhase = initValue(properties.stereoPhase, this.defaults.stereoPhase.value);\n\n  this.lfoL.offset = 1 - (this.intensity / 2);\n  this.lfoR.offset = 1 - (this.intensity / 2);\n  this.lfoL.phase = this.stereoPhase * Math.PI / 180;\n\n  this.lfoL.activate(true);\n  this.lfoR.activate(true);\n  this.bypass = properties.bypass || this.defaults.bypass.value;\n};\nTuna.prototype.Tremolo.prototype = Object.create(Super, {\n  name: {\n    value: \"Tremolo\"\n  },\n  defaults: {\n    writable: true,\n    value: {\n      intensity: {\n        value: 0.3,\n        min: 0,\n        max: 1,\n        automatable: false,\n        type: FLOAT\n      },\n      stereoPhase: {\n        value: 0,\n        min: 0,\n        max: 180,\n        automatable: false,\n        type: FLOAT\n      },\n      rate: {\n        value: 5,\n        min: 0.1,\n        max: 11,\n        automatable: false,\n        type: FLOAT\n      },\n      bypass: {\n        value: false,\n        automatable: false,\n        type: BOOLEAN\n      }\n    }\n  },\n  intensity: {\n    enumerable: true,\n    get: function () {\n      return this._intensity;\n    },\n    set: function (value) {\n      this._intensity = value;\n      this.lfoL.offset = 1 - this._intensity / 2;\n      this.lfoR.offset = 1 - this._intensity / 2;\n      this.lfoL.oscillation = this._intensity;\n      this.lfoR.oscillation = this._intensity;\n    }\n  },\n  rate: {\n    enumerable: true,\n    get: function () {\n      return this._rate;\n    },\n    set: function (value) {\n      this._rate = value;\n      this.lfoL.frequency = this._rate;\n      this.lfoR.frequency = this._rate;\n    }\n  },\n  stereoPhase: {\n    enumerable: true,\n    get: function () {\n      return this._stereoPhase;\n    },\n    set: function (value) {\n      this._stereoPhase = value;\n      var newPhase = this.lfoL._phase + this._stereoPhase * Math.PI / 180;\n      newPhase = fmod(newPhase, 2 * Math.PI);\n      this.lfoR.phase = newPhase;\n    }\n  }\n});\n\nTuna.prototype.WahWah = function (properties) {\n  if (!properties) {\n    properties = this.getDefaults();\n  }\n  this.input = userContext.createGain();\n  this.activateNode = userContext.createGain();\n  this.envelopeFollower = new userInstance.EnvelopeFollower({\n    target: this,\n    callback: function (context, value) {\n      context.sweep = value;\n    }\n  });\n  this.filterBp = userContext.createBiquadFilter();\n  this.filterPeaking = userContext.createBiquadFilter();\n  this.output = userContext.createGain();\n\n  //Connect AudioNodes\n  this.activateNode.connect(this.filterBp);\n  this.filterBp.connect(this.filterPeaking);\n  this.filterPeaking.connect(this.output);\n\n  //Set Properties\n  this.init();\n  this.automode = initValue(properties.automode, this.defaults.automode.value);\n  this.resonance = properties.resonance || this.defaults.resonance.value;\n  this.sensitivity = initValue(properties.sensitivity, this.defaults.sensitivity.value);\n  this.baseFrequency = initValue(properties.baseFrequency, this.defaults.baseFrequency.value);\n  this.excursionOctaves = properties.excursionOctaves || this.defaults.excursionOctaves.value;\n  this.sweep = initValue(properties.sweep, this.defaults.sweep.value);\n\n  this.activateNode.gain.value = 2;\n  this.envelopeFollower.activate(true);\n  this.bypass = properties.bypass || this.defaults.bypass.value;\n};\nTuna.prototype.WahWah.prototype = Object.create(Super, {\n  name: {\n    value: \"WahWah\"\n  },\n  defaults: {\n    writable: true,\n    value: {\n      automode: {\n        value: true,\n        automatable: false,\n        type: BOOLEAN\n      },\n      baseFrequency: {\n        value: 0.153,\n        min: 0,\n        max: 1,\n        automatable: false,\n        type: FLOAT\n      },\n      excursionOctaves: {\n        value: 3.3,\n        min: 1,\n        max: 6,\n        automatable: false,\n        type: FLOAT\n      },\n      sweep: {\n        value: 0.35,\n        min: 0,\n        max: 1,\n        automatable: false,\n        type: FLOAT\n      },\n      resonance: {\n        value: 19,\n        min: 1,\n        max: 100,\n        automatable: false,\n        type: FLOAT\n      },\n      sensitivity: {\n        value: -0.5,\n        min: -1,\n        max: 1,\n        automatable: false,\n        type: FLOAT\n      },\n      bypass: {\n        value: false,\n        automatable: false,\n        type: BOOLEAN\n      }\n    }\n  },\n  automode: {\n    get: function () {\n      return this._automode;\n    },\n    set: function (value) {\n      this._automode = value;\n      if (value) {\n        this.activateNode.connect(this.envelopeFollower.input);\n        this.envelopeFollower.activate(true);\n      } else {\n        this.envelopeFollower.activate(false);\n        this.activateNode.disconnect();\n        this.activateNode.connect(this.filterBp);\n      }\n    }\n  },\n  filterFreqTimeout: {\n    writable: true,\n    value: 0\n  },\n  setFilterFreq: {\n    value: function () {\n      try {\n        this.filterBp.frequency.value = Math.min(22050, this._baseFrequency + this._excursionFrequency * this._sweep);\n        this.filterPeaking.frequency.value = Math.min(22050, this._baseFrequency + this._excursionFrequency * this._sweep);\n      } catch (e) {\n        clearTimeout(this.filterFreqTimeout);\n        //put on the next cycle to let all init properties be set\n        this.filterFreqTimeout = setTimeout(function () {\n          this.setFilterFreq();\n        }.bind(this), 0);\n      }\n    }\n  },\n  sweep: {\n    enumerable: true,\n    get: function () {\n      return this._sweep;\n    },\n    set: function (value) {\n      this._sweep = Math.pow(value > 1 ? 1 : value < 0 ? 0 : value, this._sensitivity);\n      this.setFilterFreq();\n    }\n  },\n  baseFrequency: {\n    enumerable: true,\n    get: function () {\n      return this._baseFrequency;\n    },\n    set: function (value) {\n      this._baseFrequency = 50 * Math.pow(10, value * 2);\n      this._excursionFrequency = Math.min(userContext.sampleRate / 2, this.baseFrequency * Math.pow(2, this._excursionOctaves));\n      this.setFilterFreq();\n    }\n  },\n  excursionOctaves: {\n    enumerable: true,\n    get: function () {\n      return this._excursionOctaves;\n    },\n    set: function (value) {\n      this._excursionOctaves = value;\n      this._excursionFrequency = Math.min(userContext.sampleRate / 2, this.baseFrequency * Math.pow(2, this._excursionOctaves));\n      this.setFilterFreq();\n    }\n  },\n  sensitivity: {\n    enumerable: true,\n    get: function () {\n      return this._sensitivity;\n    },\n    set: function (value) {\n      this._sensitivity = Math.pow(10, value);\n    }\n  },\n  resonance: {\n    enumerable: true,\n    get: function () {\n      return this._resonance;\n    },\n    set: function (value) {\n      this._resonance = value;\n      this.filterPeaking.Q.value = this._resonance;\n    }\n  },\n  init: {\n    value: function () {\n      this.output.gain.value = 1;\n      this.filterPeaking.type = \"peaking\";\n      this.filterBp.type = \"bandpass\";\n      this.filterPeaking.frequency.value = 100;\n      this.filterPeaking.gain.value = 20;\n      this.filterPeaking.Q.value = 5;\n      this.filterBp.frequency.value = 100;\n      this.filterBp.Q.value = 1;\n    }\n  }\n});\n\nTuna.prototype.EnvelopeFollower = function (properties) {\n  if (!properties) {\n    properties = this.getDefaults();\n  }\n  this.input = userContext.createGain();\n  this.jsNode = this.output = userContext.createScriptProcessor(this.buffersize, 1, 1);\n\n  this.input.connect(this.output);\n\n  this.attackTime = initValue(properties.attackTime, this.defaults.attackTime.value);\n  this.releaseTime = initValue(properties.releaseTime, this.defaults.releaseTime.value);\n  this._envelope = 0;\n  this.target = properties.target || {};\n  this.callback = properties.callback || function () { };\n\n  this.bypass = properties.bypass || this.defaults.bypass.value;\n};\nTuna.prototype.EnvelopeFollower.prototype = Object.create(Super, {\n  name: {\n    value: \"EnvelopeFollower\"\n  },\n  defaults: {\n    value: {\n      attackTime: {\n        value: 0.003,\n        min: 0,\n        max: 0.5,\n        automatable: false,\n        type: FLOAT\n      },\n      releaseTime: {\n        value: 0.5,\n        min: 0,\n        max: 0.5,\n        automatable: false,\n        type: FLOAT\n      },\n      bypass: {\n        value: false,\n        automatable: false,\n        type: BOOLEAN\n      }\n    }\n  },\n  buffersize: {\n    value: 256\n  },\n  envelope: {\n    value: 0\n  },\n  sampleRate: {\n    value: 44100\n  },\n  attackTime: {\n    enumerable: true,\n    get: function () {\n      return this._attackTime;\n    },\n    set: function (value) {\n      this._attackTime = value;\n      this._attackC = Math.exp(-1 / this._attackTime * this.sampleRate / this.buffersize);\n    }\n  },\n  releaseTime: {\n    enumerable: true,\n    get: function () {\n      return this._releaseTime;\n    },\n    set: function (value) {\n      this._releaseTime = value;\n      this._releaseC = Math.exp(-1 / this._releaseTime * this.sampleRate / this.buffersize);\n    }\n  },\n  callback: {\n    get: function () {\n      return this._callback;\n    },\n    set: function (value) {\n      if (typeof value === \"function\") {\n        this._callback = value;\n      } else {\n        console.error(\"tuna.js: \" + this.name + \": Callback must be a function!\");\n      }\n    }\n  },\n  target: {\n    get: function () {\n      return this._target;\n    },\n    set: function (value) {\n      this._target = value;\n    }\n  },\n  activate: {\n    value: function (doActivate) {\n      this.activated = doActivate;\n      if (doActivate) {\n        this.jsNode.connect(userContext.destination);\n        this.jsNode.onaudioprocess = this.returnCompute(this);\n      } else {\n        this.jsNode.disconnect();\n        this.jsNode.onaudioprocess = null;\n      }\n      if (this.activateCallback) {\n        this.activateCallback(doActivate);\n      }\n    }\n  },\n  returnCompute: {\n    value: function (instance) {\n      return function (event) {\n        instance.compute(event);\n      };\n    }\n  },\n  compute: {\n    value: function (event) {\n      var count = event.inputBuffer.getChannelData(0).length,\n        channels = event.inputBuffer.numberOfChannels,\n        current, chan, rms, i;\n      chan = rms = i = 0;\n\n      for (chan = 0; chan < channels; ++chan) {\n        for (i = 0; i < count; ++i) {\n          current = event.inputBuffer.getChannelData(chan)[i];\n          rms += (current * current);\n        }\n      }\n      rms = Math.sqrt(rms / channels);\n\n      if (this._envelope < rms) {\n        this._envelope *= this._attackC;\n        this._envelope += (1 - this._attackC) * rms;\n      } else {\n        this._envelope *= this._releaseC;\n        this._envelope += (1 - this._releaseC) * rms;\n      }\n      this._callback(this._target, this._envelope);\n    }\n  }\n});\n\nTuna.prototype.LFO = function (properties) {\n  if (!properties) {\n    properties = this.getDefaults();\n  }\n\n  //Instantiate AudioNode\n  this.input = userContext.createGain();\n  this.output = new AudioWorkletNode(userContext, 'lfo', {\n    processorOptions: { sampleRate: userContext.sampleRate }, channelCount: 1, channelCountMode: 'explicit', outputChannelCount: [1]\n  });\n\n  this.output.connect(properties.target);\n  this.activateNode = userContext.destination;\n\n  //Set Properties\n  this.frequency = initValue(properties.frequency, this.defaults.frequency.value);\n  this.offset = initValue(properties.offset, this.defaults.offset.value);\n  this.oscillation = initValue(properties.oscillation, this.defaults.oscillation.value);\n  this.phase = initValue(properties.phase, this.defaults.phase.value);\n  // this.target = properties.target || {};\n  this.bypass = properties.bypass || this.defaults.bypass.value;\n\n  this.output.port.postMessage({\n    type: 'set-all',\n    value: { oscillation: this.oscillation, offset: this.offset, frequency: this.frequency, phase: this.phase }\n  });\n};\nTuna.prototype.LFO.prototype = Object.create(Super, {\n  name: {\n    value: \"LFO\"\n  },\n  bufferSize: {\n    value: 128\n  },\n  sampleRate: {\n    value: 44100\n  },\n  defaults: {\n    value: {\n      frequency: {\n        value: 1,\n        min: 0,\n        max: 20,\n        automatable: false,\n        type: FLOAT\n      },\n      offset: {\n        value: 0.85,\n        min: 0,\n        max: 22049,\n        automatable: false,\n        type: FLOAT\n      },\n      oscillation: {\n        value: 0.3,\n        min: -22050,\n        max: 22050,\n        automatable: false,\n        type: FLOAT\n      },\n      phase: {\n        value: 0,\n        min: 0,\n        max: 2 * Math.PI,\n        automatable: false,\n        type: FLOAT\n      },\n      bypass: {\n        value: false,\n        automatable: false,\n        type: BOOLEAN\n      }\n    }\n  },\n  frequency: {\n    get: function () {\n      return this._frequency;\n    },\n    set: function (value) {\n      this._frequency = value;\n      this._phaseInc = 2 * Math.PI * this._frequency * this.bufferSize / this.sampleRate;\n      this.output.port.postMessage({\n        type: 'set-frequency',\n        value: this.frequency\n      });\n    }\n  },\n  offset: {\n    get: function () {\n      return this._offset;\n    },\n    set: function (value) {\n      this._offset = value;\n      this.output.port.postMessage({\n        type: 'set-offset',\n        value: this.offset\n      });\n    }\n  },\n  oscillation: {\n    get: function () {\n      return this._oscillation;\n    },\n    set: function (value) {\n      this._oscillation = value;\n      this.output.port.postMessage({\n        type: 'set-oscillation',\n        value: this.oscillation\n      });\n    }\n  },\n  phase: {\n    get: function () {\n      return this._phase;\n    },\n    set: function (value) {\n      this._phase = value;\n      this.output.port.postMessage({\n        type: 'set-phase',\n        value: this.phase\n      });\n    }\n  },\n  activate: {\n    value: function (doActivate) {\n      if (doActivate) {\n        // this.output.connect(userContext.destination);\n        if (this.activateCallback) {\n          this.activateCallback(doActivate);\n        }\n      } else {\n        // this.output.disconnect();\n      }\n    }\n  }\n});\n\nTuna.toString = Tuna.prototype.toString = function () {\n  return \"Please visit https://github.com/Theodeus/tuna/wiki for instructions on how to use Tuna.js\";\n};\n"],"names":["root","factory","exports","module","define","amd","a","i","self","ADSR","Node","constructor","flow","options","super","name","position","Vector","width","dataType","state","DefaultState","style","rowHeight","spacing","terminalStyle","this","proxyParamNode","AudioWorkletNode","flowConnect","audioContext","numberOfOutputs","parameterData","param","proxyParam","parameters","get","outputs","ref","setMinMax","s","clamp","setupUI","minInput","on","maxInput","aInput","adsrChanged","dInput","sInput","rInput","inputs","trigger","currTime","currentTime","d","r","cancelScheduledValues","setValueAtTime","min","linearRampToValueAtTime","max","denormalize","value","handleAudioConnections","totalDur","envelopeInput","Zero","stopAutomation","port","postMessage","type","atck","dcay","rlse","duration","createEnvelope","pointColor","disabled","createInput","propName","height","InputType","Number","grow","step","precision","ui","append","createHozLayout","createLabel","_inst","connector","end","AudioParam","offset","Math","minValue","connect","_connector","_start","disconnect","AudioBufferSource","fileInput","processFile","async","file","cached","arrayBufferCache","arrayBuffer","set","processArrayBuffer","audioBufferCache","decodeAudioData","buffer","setOutputs","createSource","Automate","envelope","finiteLoop","startAutomation","durationInput","loopToggle","auto","values","currVal","x","y","automateDuration","length","loop","schedule","timerId","window","setInterval","scheduleEndTime","clearInterval","time","iterations","forEach","input","output","autoToggle","createToggle","BiquadFilter","inGain","createGain","outGain","biquadFilter","createBiquadFilter","gain","Q","frequency","detune","filterType","_","data","setBypass","typeSelect","watch","bypass","createSelect","bypassToggle","BitcrusherEffect","bitcrusher","numberOfInputs","processorOptions","bufferSize","bitsSlider","paramsChanged","normFreqSlider","bitsInput","normFreqInput","bits","isInteger","floor","normFreq","createSlider","ChannelMerger","merger","createChannelMerger","addChannelButton","newTerm","Terminal","TerminalType","IN","addTerminal","index","createButton","ChannelSplitter","oldNoOfChannels","channelCountMode","newNoOfChannels","checkChannels","splitter","createChannelSplitter","terminalsToRemove","newTerminal","OUT","cntr","_cntr","push","term","removeTerminal","Tuna","ChorusEffect","__tuna__","chorus","Chorus","Object","assign","delay","depth","feedback","rate","_oldVal","newVal","delaySlider","delayInput","depthSlider","depthInput","feedbackSlider","feedbackInput","rateSlider","rateInput","Convolver","convolver","createConvolver","Debug","debugNode","onmessage","e","FlowState","Stopped","DelayEffect","dryGain","wetGain","filter","createDelay","feedbackNode","delayTime","cutoff","wet","dry","delayChanged","feedbackChanged","setTargetAtTime","cutoffChanged","cutoffSlider","wetChanged","wetSlider","dryChanged","drySlider","cutoffInput","wetInput","dryInput","Destination","masterVolumeGainNode","destination","Distorter","oversampleOptions","distorter","createWaveShaper","oversample","curve","makeDistortionCurve","includes","amount","parseInt","bind","k","n_samples","Float32Array","deg","PI","abs","amountInput","oversampleSelect","DynamicsCompressor","compressor","createDynamicsCompressor","threshold","ratio","knee","attack","release","Equalizer","vSliders","filters","frequencies","freqDisplay","freq","isInRange","stacks","_freq","vSlider","createVSlider","stack","createStack","childs","align","Align","Center","eq1","eq2","eq3","eq4","eq5","eq6","eq7","eq8","eq9","eq10","FrequencyAnalyser","fftSizes","analyser","createAnalyser","fftSize","getFFTSize","round","actualFFTSize","fftSizeLabel","text","display","screenPos","currFreq","subtract","transform","displayConfigs","canvas","frequencyBinCount","sampleRate","freqLabel","fftSizeSlider","Right","createDisplay","clear","renderer","args","customRenderer","context","percent","hue","frequencyData","Uint8Array","orgHeight","barWidth","getByteFrequencyData","fillStyle","fillRect","Gain","Metronome","volumeGainNode","proxyParamSourceNode","playbackRate","fillBuffer","bpmInput","source","loopEnd","bpm","freqInput","stopSource","playSource","ctx","createBuffer","channel","getChannelData","phase","amp","durationFrames","f","sin","Constant","TAU","FlowConnectState","audioSource","AudioBufferSourceNode","start","stop","Microphone","stream","microphone","getMicrophone","then","error","Log","catch","navigator","mediaDevices","getUserMedia","audio","video","createMediaStreamSource","MoogEffect","moog","resonance","resonanceSlider","resonanceInput","Noise","noise","channelCount","outputChannelCount","noiseSelect","Oscillator","types","freqProxy","detuneProxy","inputsUI","freqHozLayout","oscillator","detuneHozLayout","startOscillator","stopOscillator","createOscillator","isConnected","freqSlider","detuneSlider","detuneInput","typeGroup","createRadioGroup","OverdriveEffect","overdrive","Overdrive","drive","outputGain","curveAmount","algorithmIndex","algorithm","driveSlider","driveInput","outGainSlider","outGainInput","curveAmountSlider","curveAmountInput","algorithmSelect","PingPongEffect","pingPong","PingPongDelay","delayTimeLeft","delayLeft","delayTimeRight","delayRight","wetLevel","delayLeftSlider","delayLeftInput","delayRightSlider","delayRightInput","Source","ArrayBuffer","propagateChannelChange","executionGraph","propagate","currNode","call","prevChannelCount","numberOfChannels","SpatialPanner","z","orientationX","orientationY","orientationZ","posX","listener","positionX","posY","positionY","posZ","panner","PannerNode","panningModel","distanceModel","positionZ","panSlider2D","createSlider2D","padding","zSlider","zInput","SpectrogramAnalyser","colorScales","colorScaleToInterp","colorScale","currInterpolator","Color","scale","shouldRender","canvasType","CanvasType","HTMLCanvasElement","colorScaleSelect","barHeight","normalize","globalCompositeOperation","drawImage","StereoPanner","StereoPannerNode","pan","panSlider","panInput","TremoloEffect","tremolo","Tremolo","intensity","stereoPhase","intensitySlider","intensityInput","stereoPhaseSlider","stereoPhaseInput","WaveformAnalyser","waveformData","getByteTimeDomainData","strokeStyle","beginPath","moveTo","lineTo","stroke","ArrayIndex","ArraySource","process","numberToggle","arrayInput","stepInput","numberToggled","rangeToggled","rangeLayout","visible","number","range","rangeStack","inputEl","validity","patternMismatch","split","map","item","trim","rangeToggle","rangeInputLayout","pattern","BooleanSource","toggle","Buffer","size","sizeInput","getInputs","shift","splice","Compare","select","res","fontSize","Delay","eventQueue","List","b","timeoutId","head","performance","now","bufferedEvent","removeFirst","emit","eventNode","ListNode","setTimeout","triggerEvent","remaining","clearTimeout","FileSource","GlobalEvent","GlobalEventType","Emitter","Receiver","prevEvent","getNewUUID","globalEvents","eventId","__","prevVal","off","eventInput","Text","JsonSource","JSON","parse","backgroundColor","terminal","log","addEventButton","addNewTerminal","addDataButton","NumberRange","startValue","NumberSource","fractionalToggle","fractional","Property","Random","random","getRandom","StringSource","SyncData","hold","eventIds","inst","syncTypeInput","syncType","addButton","id","hasOwnProperty","connectors","getData","SyncEvent","events","Timer","lastTrigger","MIN_VALUE","current","emitValue","ToArray","Array","fill","inData","ToVector","isArray","result","StandardNodes","Common","timer","toArray","arrayIndex","arraySource","booleanSource","jsonSource","numberSource","stringSource","fileSource","compare","property","syncEvent","syncData","toVector","numberRange","globalEvent","Abs","Average","average","Normalize","Clamp","Floor","Ceil","ceil","Function","func","Func","Net","API","api","Visual","LineChartMini","lineChartMini","FunctionPlotter","functionPlotter","Audio","automate","channelSplitter","debug","channelMerger","adsr","metronome","moogEffect","bitcrusherEffect","delayEffect","dynamicsCompressor","chorusEffect","overdriveEffect","audioBuffer","tremoloEffect","stereoPanner","spatialPanner","equalizer","frequencyAnalyser","waveformAnalyser","spectrogramAnalyser","UI","Dial","dial","reduce","acc","curr","expression","evaluator","Evaluator","tokens","vars","Set","parser","Parser","token","TokenType","Variable","Error","add","variable","addVarButton","newVar","toLowerCase","bulkEvalIterations","variables","inTerminal","expr","regex","RegExp","replace","matchAll","match","multiargFunctions","resultArr","evaluate","lowerCase","test","exprInput","maxLength","MAX_SAFE_INTEGER","MIN_SAFE_INTEGER","relativeToggle","relative","constant","constantInput","normalized","getInput","toFixed","currMin","currMax","src","response","fetch","json","isEmpty","dialStyle","borderColor","borderWidth","shadowBlur","shadowColor","outputsUI","createDial","Left","plotStyle","polarToggle","dragStart","xPixToCoord","config","yPixToCoord","delta","xMin","xMax","yMin","yMax","gridRenderer","functionRenderer","direction","cursor","points","drawGrid","polar","cos","xCoordToPix","xCoord","xPixPerUnit","yCoordToPix","yCoord","yPixPerUnit","xPix","yPix","drawLine","x1","y1","x2","y2","getGridPointDist","factor","diff","pow","clearRect","xDiff","yDiff","xF","gX","yF","gY","axisColor","gridColor","axisPosition","fillText","axisVal","plotColor","lineWidth","startX","startY","colors","displayStyle","wdth","hght","rgbaCSSString","userContext","userInstance","pipe","val","Super","create","activate","writable","doActivate","activateNode","activateCallback","_bypass","_lastBypassValue","target","connectInOrder","nodeArray","console","getDefaults","key","defaults","startTime","method","dur","_is","automatable","FLOAT","BOOLEAN","INT","_window","AudioContext","webkitAudioContext","__connectified__","proto","getPrototypeOf","oconnect","shimConnect","node","arguments","isPrototypeOf","apply","connectify","dbToWAVolume","db","fmod","tmp","tmp2","pY","p","l","l2","toExponential","parseFloat","sign","tanh","n","exp","initValue","userVal","defaultVal","undefined","prototype","Bitcrusher","properties","processor","createScriptProcessor","phaser","last","onaudioprocess","inputBuffer","outputBuffer","normfreq","enumerable","Cabinet","newConvolver","impulsePath","makeupNode","makeupGain","impulse","dryLevel","attenuator","delayL","delayR","feedbackGainNodeLR","feedbackGainNodeRL","lfoL","LFO","callback","lfoR","_delay","_depth","oscillation","_feedback","_rate","Compressor","compNode","automakeup","computeMakeup","c","_automakeup","filterLow","filterHigh","highCut","lowCut","level","xhr","XMLHttpRequest","open","responseType","onreadystatechange","readyState","status","send","Filter","gainNode","MoogFilter","in1","in2","in3","in4","out1","out2","out3","out4","fb","inputFactor","inputDrive","waveshaper","outputDrive","ws_table","k_nSamples","scaled","_curveAmount","_algorithmIndex","waveshaperAlgorithms","_outputGain","abx","Panner","createStereoPanner","Phaser","filtersL","filtersR","feedbackGainNodeL","feedbackGainNodeR","filteredSignal","stage","baseModulationFrequency","_baseModulationFrequency","_stereoPhase","newPhase","_phase","stereoToMonoMix","feedbackLevel","_delayTimeLeft","_delayTimeRight","amplitudeL","amplitudeR","_intensity","WahWah","envelopeFollower","EnvelopeFollower","sweep","filterBp","filterPeaking","init","automode","sensitivity","baseFrequency","excursionOctaves","_automode","filterFreqTimeout","setFilterFreq","_baseFrequency","_excursionFrequency","_sweep","_sensitivity","_excursionOctaves","_resonance","jsNode","buffersize","attackTime","releaseTime","_envelope","_attackTime","_attackC","_releaseTime","_releaseC","_callback","_target","activated","returnCompute","instance","event","compute","chan","rms","count","channels","sqrt","_frequency","_phaseInc","_offset","_oscillation","toString"],"sourceRoot":""}