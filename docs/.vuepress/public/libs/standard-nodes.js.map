{"version":3,"file":"standard-nodes.js","mappings":"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","sources":["webpack://flow-connect/webpack/universalModuleDefinition","webpack://flow-connect/./src/standard-nodes/audio/adsr.ts","webpack://flow-connect/./src/standard-nodes/audio/audio-buffer-source.ts","webpack://flow-connect/./src/standard-nodes/audio/automate.ts","webpack://flow-connect/./src/standard-nodes/audio/biquad-filter.ts","webpack://flow-connect/./src/standard-nodes/audio/bitcrusher.ts","webpack://flow-connect/./src/standard-nodes/audio/channel-merger.ts","webpack://flow-connect/./src/standard-nodes/audio/channel-splitter.ts","webpack://flow-connect/./src/standard-nodes/audio/chorus.ts","webpack://flow-connect/./src/standard-nodes/audio/convolver.ts","webpack://flow-connect/./src/standard-nodes/audio/debug.ts","webpack://flow-connect/./src/standard-nodes/audio/delay.ts","webpack://flow-connect/./src/standard-nodes/audio/destination.ts","webpack://flow-connect/./src/standard-nodes/audio/distorter.ts","webpack://flow-connect/./src/standard-nodes/audio/dynamics-compressor.ts","webpack://flow-connect/./src/standard-nodes/audio/equalizer.ts","webpack://flow-connect/./src/standard-nodes/audio/frequency-analyser.ts","webpack://flow-connect/./src/standard-nodes/audio/gain.ts","webpack://flow-connect/./src/standard-nodes/audio/metronome.ts","webpack://flow-connect/./src/standard-nodes/audio/microphone.ts","webpack://flow-connect/./src/standard-nodes/audio/moog.ts","webpack://flow-connect/./src/standard-nodes/audio/noise.ts","webpack://flow-connect/./src/standard-nodes/audio/oscillator.ts","webpack://flow-connect/./src/standard-nodes/audio/overdrive.ts","webpack://flow-connect/./src/standard-nodes/audio/ping-pong-delay.ts","webpack://flow-connect/./src/standard-nodes/audio/source.ts","webpack://flow-connect/./src/standard-nodes/audio/spatial-panner.ts","webpack://flow-connect/./src/standard-nodes/audio/spectrogram-analyser.ts","webpack://flow-connect/./src/standard-nodes/audio/stereo-panner.ts","webpack://flow-connect/./src/standard-nodes/audio/tremolo.ts","webpack://flow-connect/./src/standard-nodes/audio/waveform-analyser.ts","webpack://flow-connect/./src/standard-nodes/common/array-index.ts","webpack://flow-connect/./src/standard-nodes/common/array-source.ts","webpack://flow-connect/./src/standard-nodes/common/boolean-source.ts","webpack://flow-connect/./src/standard-nodes/common/buffer.ts","webpack://flow-connect/./src/standard-nodes/common/compare.ts","webpack://flow-connect/./src/standard-nodes/common/delay.ts","webpack://flow-connect/./src/standard-nodes/common/file-source.ts","webpack://flow-connect/./src/standard-nodes/common/global-event.ts","webpack://flow-connect/./src/standard-nodes/common/json-source.ts","webpack://flow-connect/./src/standard-nodes/common/log.ts","webpack://flow-connect/./src/standard-nodes/common/number-range.ts","webpack://flow-connect/./src/standard-nodes/common/number-source.ts","webpack://flow-connect/./src/standard-nodes/common/property.ts","webpack://flow-connect/./src/standard-nodes/common/random.ts","webpack://flow-connect/./src/standard-nodes/common/string-source.ts","webpack://flow-connect/./src/standard-nodes/common/sync-data.ts","webpack://flow-connect/./src/standard-nodes/common/sync-event.ts","webpack://flow-connect/./src/standard-nodes/common/timer.ts","webpack://flow-connect/./src/standard-nodes/common/to-array.ts","webpack://flow-connect/./src/standard-nodes/common/to-vector.ts","webpack://flow-connect/./src/standard-nodes/index.ts","webpack://flow-connect/./src/standard-nodes/math/abs.ts","webpack://flow-connect/./src/standard-nodes/math/average.ts","webpack://flow-connect/./src/standard-nodes/math/ceil.ts","webpack://flow-connect/./src/standard-nodes/math/clamp.ts","webpack://flow-connect/./src/standard-nodes/math/floor.ts","webpack://flow-connect/./src/standard-nodes/math/func.ts","webpack://flow-connect/./src/standard-nodes/math/normalize.ts","webpack://flow-connect/./src/standard-nodes/net/api.ts","webpack://flow-connect/./src/standard-nodes/ui/dial.ts","webpack://flow-connect/./src/standard-nodes/visual/function-plotter.ts","webpack://flow-connect/./src/standard-nodes/visual/line-chart-mini.ts","webpack://flow-connect/./src/lib/tuna.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(self, () => {\nreturn ","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { clamp, denormalize } from \"../../utils/utils\";\nimport { Node } from \"../../core/node\";\nimport { InputType, Input, Envelope } from \"../../ui/index\";\n\nexport class ADSR extends Node {\n  envelopeInput: Envelope;\n  minInput: Input;\n  maxInput: Input;\n  aInput: Input;\n  dInput: Input;\n  sInput: Input;\n  rInput: Input;\n\n  proxyParamNode: AudioWorkletNode;\n  proxyParam: AudioParam;\n\n  static DefaultState = { min: 0, max: 1, a: 0.4, d: 0.2, s: 0.6, r: 0.4, trigger: false };\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'ADSR', options.position || new Vector(50, 50), options.width || 280,\n      [{ name: 'trigger', dataType: 'event' }],\n      [{ name: 'out', dataType: 'audio' }],\n      {\n        state: options.state ? { ...ADSR.DefaultState, ...options.state } : ADSR.DefaultState,\n        style: options.style || { rowHeight: 10, spacing: 15 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.proxyParamNode = new AudioWorkletNode(\n      flow.flowConnect.audioContext,\n      'proxy-param',\n      { numberOfOutputs: 1, parameterData: { param: 0 } }\n    );\n    this.proxyParam = (this.proxyParamNode.parameters as Map<string, AudioParam>).get('param');\n    this.outputs[0].ref = this.proxyParamNode;\n    this.setMinMax();\n    this.state.s = clamp(this.state.s, 0, 1);\n\n    this.setupUI();\n\n    this.minInput.on('blur', this.setMinMax);\n    this.maxInput.on('blur', this.setMinMax);\n    this.aInput.on('blur', () => this.adsrChanged());\n    this.dInput.on('blur', () => this.adsrChanged());\n    this.sInput.on('blur', () => this.adsrChanged());\n    this.rInput.on('blur', () => this.adsrChanged());\n\n    this.inputs[0].on('event', () => {\n      this.state.trigger = !this.state.trigger;\n      let currTime = flow.flowConnect.audioContext.currentTime;\n      let { a, d, s, r } = this.state;\n      if (this.state.trigger) {\n        // Attack\n        this.proxyParam.cancelScheduledValues(0);\n        this.proxyParam.setValueAtTime(this.state.min, currTime);\n        this.proxyParam.linearRampToValueAtTime(1 * this.state.max, currTime + a);\n        this.proxyParam.linearRampToValueAtTime(denormalize(s, this.state.min, this.state.max), currTime + a + d);\n      } else {\n        // Release\n        this.proxyParam.cancelScheduledValues(0);\n        this.proxyParam.setValueAtTime(this.proxyParam.value, currTime);\n        this.proxyParam.linearRampToValueAtTime(this.state.min, currTime + r);\n      }\n    });\n\n    this.handleAudioConnections();\n  }\n  adsrChanged() {\n    this.state.s = clamp(this.state.s, 0, 1);\n    let { a, d, r } = this.state;\n    let totalDur = a + d + r;\n    this.envelopeInput.value = [\n      Vector.Zero(), new Vector(a / totalDur, 1), new Vector((a + d) / totalDur, this.state.s), new Vector(1, 0)\n    ];\n  }\n  stopAutomation() {\n    this.proxyParam.cancelScheduledValues(this.flow.flowConnect.audioContext.currentTime);\n  }\n  setMinMax() {\n    this.state.proxyParamNode.port.postMessage({\n      type: 'set-range',\n      value: { min: this.state.min, max: this.state.max }\n    });\n  }\n  setupUI() {\n    let { a: atck, d: dcay, r: rlse } = this.state;\n    let duration = atck + dcay + rlse;\n\n    this.envelopeInput = this.createEnvelope(145, [\n      Vector.Zero(), new Vector(atck / duration, 1), new Vector((atck + dcay) / duration, this.state.s), new Vector(1, 0)\n    ], { style: { pointColor: '#fcba03' } });\n    this.envelopeInput.disabled = true;\n\n    this.minInput = this.createInput({\n      propName: 'min', height: 20, style: { type: InputType.Number, grow: .5, step: 'any' }\n    });\n    this.maxInput = this.createInput({\n      propName: 'max', height: 20, style: { type: InputType.Number, grow: .5, step: 'any' }\n    });\n    this.aInput = this.createInput({ propName: 'a', height: 20, style: { type: InputType.Number, step: 'any', grow: .5, precision: 3 } });\n    this.dInput = this.createInput({ propName: 'd', height: 20, style: { type: InputType.Number, step: 'any', grow: .5, precision: 3 } });\n    this.sInput = this.createInput({ propName: 's', height: 20, style: { type: InputType.Number, step: 'any', grow: .5, precision: 3 } });\n    this.rInput = this.createInput({ propName: 'r', height: 20, style: { type: InputType.Number, step: 'any', grow: .5, precision: 3 } });\n\n    this.ui.append([\n      this.envelopeInput,\n      this.createHozLayout([\n        this.createLabel('Min'), this.minInput,\n        this.createLabel('Max'), this.maxInput\n      ], { style: { spacing: 5 } }),\n      this.createHozLayout([\n        this.createLabel('A'), this.aInput, this.createLabel('D'), this.dInput\n      ], { style: { spacing: 5 } }),\n      this.createHozLayout([\n        this.createLabel('S'), this.sInput, this.createLabel('R'), this.rInput\n      ], { style: { spacing: 5 } })\n    ]);\n  }\n  handleAudioConnections() {\n    // Handle actual webaudio node stuff\n    this.outputs[0].on('connect', (_inst, connector) => {\n      if (connector.end.ref instanceof AudioParam) {\n        // Need to do this else the value provided by the worklet node as param value is getting offset instead of overwrite\n        let offset = Math.max(0, connector.end.ref.minValue);\n        connector.end.ref.value = offset;\n        if (offset !== 0) {\n          this.proxyParamNode.port.postMessage({ type: 'set-offset', value: offset });\n        }\n      }\n      this.outputs[0].ref.connect(connector.end.ref);\n    });\n    this.outputs[0].on('disconnect', (_inst, _connector, _start, end) => {\n      this.stopAutomation();\n      this.outputs[0].ref.disconnect(end.ref);\n    });\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { Node } from \"../../core/node\";\nimport { Source } from \"../../ui/index\";\n\nexport class AudioBufferSource extends Node {\n  fileInput: Source\n\n  static DefaultState: any = { file: null, buffer: null };\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'AudioBuffer Source', options.position || new Vector(50, 50), options.width || 170,\n      [],\n      [{ name: 'buffer', dataType: 'audio-buffer' }],\n      {\n        state: options.state ? { ...AudioBufferSource.DefaultState, ...options.state } : AudioBufferSource.DefaultState,\n        style: options.style || { rowHeight: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.setupUI();\n\n    this.fileInput.on('change', () => this.processFile());\n    this.on('process', () => this.processFile());\n  }\n\n  async processFile() {\n    let file = this.state.file;\n    if (!file) return;\n\n    let cached = this.flow.flowConnect.arrayBufferCache.get(file.name + file.type);\n    if (!cached) {\n      cached = await file.arrayBuffer();\n      this.flow.flowConnect.arrayBufferCache.set(file.name + file.type, cached);\n    }\n    this.processArrayBuffer(cached);\n  }\n  async processArrayBuffer(arrayBuffer: ArrayBuffer) {\n    let cached = this.flow.flowConnect.audioBufferCache.get(arrayBuffer);\n    if (!cached) {\n      cached = await this.flow.flowConnect.audioContext.decodeAudioData(arrayBuffer);\n      this.flow.flowConnect.audioBufferCache.set(arrayBuffer, cached);\n    }\n    this.state.buffer = cached;\n    this.setOutputs(0, this.state.buffer);\n  }\n  setupUI() {\n    this.fileInput = this.createSource({ height: 20, propName: 'file', style: { grow: 1 } });\n    this.ui.append(this.createHozLayout([\n      this.createLabel('File'), this.fileInput\n    ], { style: { spacing: 20 } }));\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { denormalize } from \"../../utils/utils\";\nimport { Node } from \"../../core/node\";\nimport { InputType, Input, Envelope, Toggle } from \"../../ui/index\";\n\nexport class Automate extends Node {\n  envelopeInput: Envelope;\n  minInput: Input;\n  maxInput: Input;\n  durationInput: Input;\n  autoToggle: Toggle;\n  loopToggle: Toggle;\n\n  proxyParamNode: AudioWorkletNode;\n  proxyParam: AudioParam;\n\n  static DefaultState = { min: 0, max: 1, value: 0.5, duration: 1, auto: true, loop: false };\n\n  timerId: number;\n  scheduleEndTime: number;\n  finiteLoop = 2;            // how much iterations to schedule in the future\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}, envelope: Array<Vector> = [new Vector(.2, .5), new Vector(.5, .8), new Vector(.9, .2)]) {\n    super(flow, options.name || 'Automate', options.position || new Vector(50, 50), options.width || 280,\n      [{ name: 'trigger', dataType: 'event' }],\n      [{ name: 'out', dataType: 'audio' }],\n      {\n        state: options.state ? { ...Automate.DefaultState, ...options.state } : Automate.DefaultState,\n        style: options.style || { rowHeight: 10, spacing: 15 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.proxyParamNode = new AudioWorkletNode(\n      flow.flowConnect.audioContext,\n      'proxy-param',\n      { numberOfOutputs: 1, parameterData: { param: this.state.value } }\n    );\n    this.proxyParam = (this.proxyParamNode.parameters as Map<string, AudioParam>).get('param');\n    this.setMinMax();\n    this.outputs[0].ref = this.proxyParamNode;\n\n    this.setupUI(envelope);\n\n    this.minInput.on('blur', () => {\n      this.setMinMax();\n      this.startAutomation();\n    });\n    this.maxInput.on('blur', () => {\n      this.setMinMax();\n      this.startAutomation();\n    });\n\n    this.envelopeInput.on('change', () => this.startAutomation());\n    this.durationInput.on('change', () => this.startAutomation());\n    this.loopToggle.on('change', () => this.startAutomation());\n    this.inputs[0].on('event', () => this.startAutomation());\n\n    flow.flowConnect.on('start', () => this.state.auto && this.startAutomation());\n    flow.flowConnect.on('stop', () => this.stopAutomation());\n\n    this.handleAudioConnections();\n  }\n\n  startAutomation() {\n    // Stop any previously scheduled automations\n    this.stopAutomation();\n\n    // Convert normalized to actual values (x=time, y=param value)\n    let values = this.envelopeInput.value;\n    for (let currVal of values) {\n      currVal.x = currVal.x * this.state.duration;\n      currVal.y = denormalize(currVal.y, this.state.min, this.state.max);\n    }\n\n    let automateDuration = values[values.length - 1].x;\n    if (this.state.loop) {\n      // Schedule far in the future hoping that even if main thread blocks it recovers by the time scheduled automations are finished\n      this.schedule(values, this.flow.flowConnect.audioContext.currentTime, this.finiteLoop);\n      this.timerId = window.setInterval(() => {\n        // If web audio clock reaches final iteration of scheduled automations, then reschedule another finiteLoop iterations\n        if (this.flow.flowConnect.audioContext.currentTime > this.scheduleEndTime - automateDuration) {\n          this.schedule(values, this.scheduleEndTime, this.finiteLoop);\n        }\n      }, 50);\n    } else {\n      this.schedule(values, this.flow.flowConnect.audioContext.currentTime, 1);\n    }\n  }\n  stopAutomation() {\n    this.proxyParam.cancelScheduledValues(this.flow.flowConnect.audioContext.currentTime);\n    clearInterval(this.timerId);\n  }\n  schedule(values: Vector[], time: number, iterations: number) {\n    for (let i = 0; i < iterations; i += 1) {\n      values.forEach(value => {\n        this.proxyParam.linearRampToValueAtTime(value.y, time + value.x)\n      });\n    }\n    this.scheduleEndTime = time + values[values.length - 1].x;\n  }\n  setMinMax() {\n    this.proxyParamNode.port.postMessage({ type: 'set-range', value: { min: this.state.min, max: this.state.max } });\n  }\n  setupUI(envelope: Vector[]) {\n    this.envelopeInput = this.createEnvelope(145, envelope, { input: true, output: true });\n    this.minInput = this.createInput({\n      propName: 'min', height: 20, style: { type: InputType.Number, grow: .5, step: 'any' }\n    });\n    this.maxInput = this.createInput({\n      propName: 'max', height: 20, style: { type: InputType.Number, grow: .5, step: 'any' }\n    });\n    this.durationInput = this.createInput({\n      propName: 'duration', height: 20, style: { type: InputType.Number, step: 'any', grow: .5 }\n    });\n    this.autoToggle = this.createToggle({ propName: 'auto' });\n    this.loopToggle = this.createToggle({ propName: 'loop' });\n\n    this.ui.append([\n      this.envelopeInput,\n      this.createHozLayout([\n        this.createLabel('Min'), this.minInput,\n        this.createLabel('Max'), this.maxInput\n      ], { style: { spacing: 5 } }),\n      this.createHozLayout([\n        this.createLabel('Duration (seconds)', { style: { grow: .5 } }),\n        this.durationInput\n      ], { style: { spacing: 5 } }),\n      this.createHozLayout([\n        this.createHozLayout([this.createLabel('Auto Start ?', { height: 20 }), this.autoToggle], { style: { spacing: 5, grow: .5 } }),\n        this.createHozLayout([this.createLabel('Loop ?', { height: 20 }), this.loopToggle], { style: { spacing: 5, grow: .5 } })\n      ]),\n    ]);\n  }\n  handleAudioConnections() {\n    // Handle actual webaudio node stuff\n    this.outputs[0].on('connect', (_inst, connector) => {\n      if (connector.end.ref instanceof AudioParam) {\n        // Need to do this else the value provided by the worklet node as param value is getting offset instead of overwrite\n        let offset = Math.max(0, connector.end.ref.minValue);\n        connector.end.ref.value = offset;\n        if (offset !== 0) {\n          this.proxyParamNode.port.postMessage({ type: 'set-offset', value: offset });\n        }\n      }\n      this.outputs[0].ref.connect(connector.end.ref);\n      this.startAutomation();\n    });\n    this.outputs[0].on('disconnect', (_inst, _connector, _start, end) => {\n      this.stopAutomation();\n      this.outputs[0].ref.disconnect(end.ref);\n    });\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { Node } from \"../../core/node\";\nimport { Select, Toggle } from \"../../ui/index\";\n\nexport class BiquadFilter extends Node {\n  typeSelect: Select;\n  bypassToggle: Toggle\n\n  inGain: GainNode;\n  outGain: GainNode;\n  biquadFilter: BiquadFilterNode;\n\n  static DefaultState = { filterType: 'lowpass', bypass: false };\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'Biquad Filter', options.position || new Vector(50, 50), options.width || 230,\n      [\n        { name: 'in', dataType: 'audio' }, { name: 'gain', dataType: 'audioparam' },\n        { name: 'Q', dataType: 'audioparam' }, { name: 'frequency', dataType: 'audioparam' },\n        { name: 'detune', dataType: 'audioparam' }\n      ],\n      [{ name: 'out', dataType: 'audio' }],\n      {\n        state: options.state ? { ...BiquadFilter.DefaultState, ...options.state } : BiquadFilter.DefaultState,\n        style: options.style || { rowHeight: 10, spacing: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.inGain = flow.flowConnect.audioContext.createGain();\n    this.outGain = flow.flowConnect.audioContext.createGain();\n    this.inputs[0].ref = this.inGain;\n    this.outputs[0].ref = this.outGain;\n\n    this.biquadFilter = flow.flowConnect.audioContext.createBiquadFilter();\n    this.biquadFilter.gain.value = 0;\n    this.biquadFilter.Q.value = 1;\n    this.biquadFilter.frequency.value = 800;\n    this.biquadFilter.detune.value = 0;\n    this.biquadFilter.type = this.state.filterType;\n\n    this.inputs[1].ref = this.biquadFilter.gain;\n    this.inputs[2].ref = this.biquadFilter.Q;\n    this.inputs[3].ref = this.biquadFilter.frequency;\n    this.inputs[4].ref = this.biquadFilter.detune;\n    this.inputs[1].on('data', (_, data) => typeof data === 'number' && (this.inputs[1].ref.value = data));\n    this.inputs[2].on('data', (_, data) => typeof data === 'number' && (this.inputs[2].ref.value = data));\n    this.inputs[3].on('data', (_, data) => typeof data === 'number' && (this.inputs[3].ref.value = data));\n    this.inputs[4].on('data', (_, data) => typeof data === 'number' && (this.inputs[4].ref.value = data));\n\n    this.setBypass();\n    this.setupUI();\n\n    this.typeSelect.on('change', () => {\n      this.biquadFilter.type = this.state.filterType\n    });\n    this.watch('bypass', () => this.setBypass());\n\n    this.handleAudioConnections();\n  }\n\n  setBypass() {\n    if (!this.state.bypass) {\n      this.inGain.disconnect();\n      this.inGain.connect(this.biquadFilter);\n      this.biquadFilter.connect(this.outGain);\n    } else {\n      this.biquadFilter.disconnect();\n      this.inGain.disconnect();\n      this.inGain.connect(this.outGain);\n    }\n  }\n  setupUI() {\n    this.typeSelect = this.createSelect(\n      ['lowpass', 'highpass', 'bandpass', 'lowshelf', 'highshelf', 'peaking', 'notch', 'allpass'],\n      { propName: 'filterType', height: 15, style: { grow: .7 } }\n    );\n    this.bypassToggle = this.createToggle({ propName: 'bypass', style: { grow: .1 } });\n    this.ui.append([\n      this.createHozLayout([this.createLabel('Type', { style: { grow: .3 } }), this.typeSelect], { style: { spacing: 5 } }),\n      this.createHozLayout([this.createLabel('Bypass ?', { style: { grow: .3 } }), this.bypassToggle], { style: { spacing: 5 } })\n    ]);\n  }\n  handleAudioConnections() {\n    // Handle actual webaudio node stuff\n    this.outputs[0].on('connect', (_, connector) => this.outputs[0].ref.connect(connector.end.ref));\n    this.outputs[0].on('disconnect', (_inst, _connector, _start, end) => this.outputs[0].ref.disconnect(end.ref));\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { clamp } from \"../../utils/utils\";\nimport { Node } from \"../../core/node\";\nimport { InputType, Input, Slider, Toggle } from \"../../ui/index\";\n\nexport class BitcrusherEffect extends Node {\n  bitsSlider: Slider;\n  bitsInput: Input;\n  normFreqSlider: Slider;\n  normFreqInput: Input;\n  bypassToggle: Toggle;\n\n  inGain: GainNode;\n  outGain: GainNode;\n  bitcrusher: AudioWorkletNode;\n\n  static DefaultState = { bits: 4, normFreq: 0.1, bypass: false };\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'Bitcrusher Effect', options.position || new Vector(50, 50), options.width || 230,\n      [{ name: 'in', dataType: 'audio' }],\n      [{ name: 'out', dataType: 'audio' }],\n      {\n        state: options.state ? { ...BitcrusherEffect.DefaultState, ...options.state } : BitcrusherEffect.DefaultState,\n        style: options.style || { rowHeight: 10, spacing: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.inGain = flow.flowConnect.audioContext.createGain();\n    this.outGain = flow.flowConnect.audioContext.createGain();\n    this.inputs[0].ref = this.inGain;\n    this.outputs[0].ref = this.outGain;\n\n    this.bitcrusher = new AudioWorkletNode(flow.flowConnect.audioContext, 'bitcrusher-effect', {\n      numberOfInputs: 1, numberOfOutputs: 1, processorOptions: { bufferSize: 4096 }\n    });\n\n    this.setBypass();\n    this.setupUI();\n\n    this.bitsSlider.on('change', () => this.paramsChanged());\n    this.normFreqSlider.on('change', () => this.paramsChanged());\n    this.bitsInput.on('change', () => this.paramsChanged());\n    this.normFreqInput.on('change', () => this.paramsChanged());\n    this.watch('bypass', () => this.setBypass());\n    this.watch('bits', () => {\n      if (this.state.bits < 1 || this.state.bits > 16 || !Number.isInteger(this.state.bits)) {\n        this.state.bits = clamp(Math.floor(this.state.bits), 1, 16);\n      }\n    });\n    this.watch('normFreq', () => {\n      if (this.state.normFreq < 0 || this.state.normFreq > 1) this.state.normFreq = clamp(this.state.normFreq, 0, 1);\n    });\n\n    flow.flowConnect.on('start', () => this.paramsChanged());\n\n    this.handleAudioConnections();\n  }\n\n  setBypass() {\n    if (!this.state.bypass) {\n      this.inGain.disconnect();\n      this.inGain.connect(this.bitcrusher);\n      this.bitcrusher.connect(this.outGain);\n    } else {\n      this.bitcrusher.disconnect();\n      this.inGain.disconnect();\n      this.inGain.connect(this.outGain);\n    }\n  }\n  paramsChanged() {\n    this.bitcrusher.port.postMessage({ bits: this.state.bits, normFreq: this.state.normFreq });\n  }\n  setupUI() {\n    this.bitsSlider = this.createSlider(1, 16, { height: 10, propName: 'bits', style: { grow: .5 } });\n    this.normFreqSlider = this.createSlider(0, 1, { height: 10, propName: 'normFreq', style: { grow: .5 } });\n    this.bitsInput = this.createInput({ propName: 'bits', height: 20, style: { type: InputType.Number, grow: .2 } });\n    this.normFreqInput = this.createInput({ propName: 'normFreq', height: 20, style: { type: InputType.Number, grow: .4, precision: 2 } });\n    this.bypassToggle = this.createToggle({ propName: 'bypass', style: { grow: .1 } });\n    this.ui.append([\n      this.createHozLayout([this.createLabel('Bits', { style: { grow: .3 } }), this.bitsSlider, this.bitsInput], { style: { spacing: 5 } }),\n      this.createHozLayout([this.createLabel('Norm Freq.', { style: { grow: .3 } }), this.normFreqSlider, this.normFreqInput], { style: { spacing: 5 } }),\n      this.createHozLayout([this.createLabel('Bypass ?', { style: { grow: .3 } }), this.bypassToggle], { style: { spacing: 5 } })\n    ]);\n  }\n  handleAudioConnections() {\n    // Handle actual webaudio node stuff\n    this.outputs[0].on('connect', (_, connector) => this.outputs[0].ref.connect(connector.end.ref));\n    this.outputs[0].on('disconnect', (_inst, _connector, _start, end) => this.outputs[0].ref.disconnect(end.ref));\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { Terminal, TerminalType } from \"../../core/terminal\";\nimport { Node } from \"../../core/node\";\nimport { Button } from \"../../ui/index\";\n\nexport class ChannelMerger extends Node {\n  addChannelButton: Button\n\n  merger: ChannelMergerNode;\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'Channel Merger', options.position || new Vector(50, 50), options.width || 160,\n      [{ name: 'Channel 1', dataType: 'audio' }, { name: 'Channel 2', dataType: 'audio' }],\n      [{ name: 'out', dataType: 'audio' }],\n      {\n        state: options.state || {},\n        style: options.style || { rowHeight: 10, spacing: 15 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.inputs[0].ref = flow.flowConnect.audioContext.createGain();\n    this.inputs[1].ref = flow.flowConnect.audioContext.createGain();\n    this.outputs[0].ref = flow.flowConnect.audioContext.createGain();\n    this.merger = flow.flowConnect.audioContext.createChannelMerger(2);\n\n    this.inputs[0].ref.connect(this.merger, 0, 0);\n    this.inputs[1].ref.connect(this.merger, 0, 1);\n    this.merger.connect(this.outputs[0].ref);\n\n    this.setupUI();\n\n    this.addChannelButton.on('click', () => {\n      this.merger.disconnect();\n      this.inputs.forEach(input => input.ref.disconnect());\n      this.merger = flow.flowConnect.audioContext.createChannelMerger(this.inputs.length + 1);\n\n      let newTerm = new Terminal(this, TerminalType.IN, 'audio', 'Channel ' + (this.inputs.length + 1));\n      newTerm.ref = flow.flowConnect.audioContext.createGain();\n      this.addTerminal(newTerm);\n\n      this.inputs.forEach((input, index) => input.ref.connect(this.merger, 0, index));\n      this.merger.connect(this.outputs[0].ref);\n    });\n\n    this.handleAudioConnections();\n  }\n\n  setupUI() {\n    this.addChannelButton = this.createButton('Add In Channel', { height: 20 });\n    this.ui.append(this.addChannelButton);\n  }\n  handleAudioConnections() {\n    // Handle actual webaudio node stuff\n    this.outputs[0].on('connect', (_, connector) => this.outputs[0].ref.connect(connector.end.ref));\n    this.outputs[0].on('disconnect', (_inst, _connector, _start, end) => this.outputs[0].ref.disconnect(end.ref));\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { Terminal, TerminalType } from \"../../core/terminal\";\nimport { Node } from \"../../core/node\";\n\nexport class ChannelSplitter extends Node {\n  splitter: ChannelSplitterNode;\n\n  oldNoOfChannels = 1;\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'Channel Splitter', options.position || new Vector(50, 50), options.width || 160,\n      [{ name: 'in', dataType: 'audio' }],\n      [{ name: 'Channel 1', dataType: 'audio' }],\n      {\n        state: options.state || {},\n        style: options.style || { rowHeight: 10, spacing: 15 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.inputs[0].ref = flow.flowConnect.audioContext.createGain();\n    this.outputs[0].ref = flow.flowConnect.audioContext.createGain();\n    this.outputs[0].ref.channelCountMode = 'explicit';\n\n    this.on('channel-count-change', (newNoOfChannels) => this.checkChannels(newNoOfChannels));\n\n    this.handleAudioConnections();\n  }\n\n  checkChannels(newNoOfChannels: number) {\n    if (this.oldNoOfChannels === newNoOfChannels) return;\n\n    this.splitter && this.splitter.disconnect();\n    this.inputs[0].ref.disconnect();\n\n    let splitter = this.flow.flowConnect.audioContext.createChannelSplitter(newNoOfChannels);\n    this.inputs[0].ref.connect(splitter);\n\n    let terminalsToRemove = [];\n    for (let i = 0; i < Math.max(newNoOfChannels, this.oldNoOfChannels); i += 1) {\n      if (i < newNoOfChannels) {\n        if (i < this.oldNoOfChannels) {\n          splitter.connect(this.outputs[i].ref, i);\n        } else {\n          let newTerminal = new Terminal(this, TerminalType.OUT, 'audio', 'Channel ' + (i + 1));\n          newTerminal.ref = this.flow.flowConnect.audioContext.createGain();\n          newTerminal.ref.channelCountMode = 'explicit';\n          this.addTerminal(newTerminal);\n          this.outputs[i].on('connect', (_inst, cntr) => this.outputs[i].ref.connect(cntr.end.ref));\n          this.outputs[i].on('disconnect', (_inst, _cntr, _start, end) => this.outputs[i].ref.disconnect(end.ref));\n          splitter.connect(this.outputs[i].ref, i);\n        }\n      } else {\n        terminalsToRemove.push(this.outputs[i]);\n      }\n    }\n    terminalsToRemove.forEach(term => {\n      term.ref.disconnect();\n      this.removeTerminal(term);\n    });\n\n    this.oldNoOfChannels = newNoOfChannels;\n    this.splitter = splitter;\n  }\n  handleAudioConnections() {\n    // Handle actual webaudio node stuff\n    this.outputs[0].on('connect', (_inst, cntr) => this.outputs[0].ref.connect(cntr.end.ref));\n    this.outputs[0].on('disconnect', (_inst, _cntr, _start, end) => this.outputs[0].ref.disconnect(end.ref));\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { clamp } from \"../../utils/utils\";\nimport { Node } from '../../core/node';\nimport { InputType, Input, Slider, Toggle } from \"../../ui/index\";\nlet Tuna = require('../../lib/tuna.js');\n\nexport class ChorusEffect extends Node {\n  delaySlider: Slider;\n  delayInput: Input;\n  feedbackSlider: Slider;\n  feedbackInput: Input;\n  rateSlider: Slider;\n  rateInput: Input;\n  bypassToggle: Toggle;\n  depthSlider: Slider;\n  depthInput: Input;\n  chorus: any;\n\n  static DefaultState = { feedback: 0.4, delay: 0.0045, depth: 0.7, rate: 0.01, bypass: false };\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(\n      flow, options.name || 'Chorus Effect',\n      options.position || new Vector(50, 50),\n      options.width || 230,\n      [{ name: 'in', dataType: 'audio' }],\n      [{ name: 'out', dataType: 'audio' }],\n      {\n        style: options.style || { rowHeight: 10, spacing: 10 },\n        terminalStyle: options.terminalStyle || {},\n        state: options.state ? { ...ChorusEffect.DefaultState, ...options.state } : ChorusEffect.DefaultState\n      }\n    )\n\n    if (!(window as any).__tuna__) (window as any).__tuna__ = new Tuna(flow.flowConnect.audioContext);\n\n    this.chorus = new (window as any).__tuna__.Chorus();\n    this.inputs[0].ref = this.outputs[0].ref = this.chorus;\n    this.setupUI();\n    Object.assign(this.chorus, {\n      delay: this.state.delay,\n      depth: this.state.depth,\n      feedback: this.state.feedback,\n      rate: this.state.rate\n    });\n\n    this.watch('delay', (_oldVal, newVal) => {\n      if (newVal < 0 || newVal > 1) this.state.delay = clamp(newVal, 0, 1);\n      this.chorus.delay = this.state.delay;\n    });\n    this.watch('depth', (_oldVal, newVal) => {\n      if (newVal < 0 || newVal > 1) this.state.depth = clamp(newVal, 0, 1);\n      this.chorus.depth = this.state.depth;\n    });\n    this.watch('feedback', (_oldVal, newVal) => {\n      if (newVal < 0 || newVal > 0.95) this.state.feedback = clamp(newVal, 0, 0.95);\n      this.chorus.feedback = this.state.feedback;\n    });\n    this.watch('rate', (_oldVal, newVal) => {\n      if (newVal < 0 || newVal > 0.1) this.state.rate = clamp(newVal, 0, 0.1);\n      this.chorus.rate = this.state.rate;\n    });\n    this.watch('bypass', (_oldVal, newVal) => this.chorus.bypass = newVal);\n\n    this.handleAudioConnections();\n  }\n\n  setupUI() {\n    this.delaySlider = this.createSlider(0, 1, { height: 10, propName: 'delay', style: { grow: .5 } });\n    this.delayInput = this.createInput({ propName: 'delay', height: 20, style: { type: InputType.Number, grow: .2, precision: 4 } });\n    this.depthSlider = this.createSlider(0, 1, { height: 10, propName: 'depth', style: { grow: .5 } });\n    this.depthInput = this.createInput({ propName: 'depth', height: 20, style: { type: InputType.Number, grow: .2, precision: 2 } });\n    this.feedbackSlider = this.createSlider(0, 0.95, { height: 10, propName: 'feedback', style: { grow: .5 } });\n    this.feedbackInput = this.createInput({ propName: 'feedback', height: 20, style: { type: InputType.Number, grow: .2, precision: 2 } });\n    this.rateSlider = this.createSlider(0, 0.1, { height: 10, propName: 'rate', style: { grow: .5 } });\n    this.rateInput = this.createInput({ propName: 'rate', height: 20, style: { type: InputType.Number, grow: .2, precision: 2 } });\n    this.bypassToggle = this.createToggle({ propName: 'bypass', style: { grow: .1 } });\n    this.ui.append([\n      this.createHozLayout([this.createLabel('Delay', { style: { grow: .3 } }), this.delaySlider, this.delayInput], { style: { spacing: 5 } }),\n      this.createHozLayout([this.createLabel('Depth', { style: { grow: .3 } }), this.depthSlider, this.depthInput], { style: { spacing: 5 } }),\n      this.createHozLayout([this.createLabel('Feedback', { style: { grow: .3 } }), this.feedbackSlider, this.feedbackInput], { style: { spacing: 5 } }),\n      this.createHozLayout([this.createLabel('Rate', { style: { grow: .3 } }), this.rateSlider, this.rateInput], { style: { spacing: 5 } }),\n      this.createHozLayout([this.createLabel('Bypass ?', { style: { grow: .3 } }), this.bypassToggle], { style: { spacing: 5 } })\n    ]);\n  }\n  handleAudioConnections() {\n    this.outputs[0].on('connect', (_inst, connector) => this.outputs[0].ref.connect(connector.end.ref));\n    this.outputs[0].on('disconnect', (_inst, _connector, _start, end) => this.outputs[0].ref.disconnect(end.ref));\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { Node } from \"../../core/node\";\nimport { Toggle } from \"../../ui/index\";\n\nexport class Convolver extends Node {\n  bypassToggle: Toggle\n\n  inGain: GainNode;\n  outGain: GainNode;\n  convolver: ConvolverNode;\n\n  static DefaultState = { bypass: false };\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'Convolver', options.position || new Vector(50, 50), options.width || 160,\n      [{ name: 'in', dataType: 'audio' }, { name: 'impulse', dataType: 'audio-buffer' }],\n      [{ name: 'out', dataType: 'audio' }],\n      {\n        state: options.state ? { ...Convolver.DefaultState, ...options.state } : Convolver.DefaultState,\n        style: options.style || { rowHeight: 10, spacing: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.inGain = flow.flowConnect.audioContext.createGain();\n    this.outGain = flow.flowConnect.audioContext.createGain();\n    this.convolver = flow.flowConnect.audioContext.createConvolver();\n\n    this.inputs[0].ref = this.inGain;\n    this.outputs[0].ref = this.outGain;\n\n    this.setBypass();\n\n    this.setupUI();\n\n    this.watch('bypass', () => this.setBypass());\n    this.inputs[1].on('data', (_inst, data) => {\n      this.convolver.buffer = data;\n    });\n\n    this.handleAudioConnections();\n  }\n  setBypass() {\n    if (!this.state.bypass) {\n      this.inGain.disconnect();\n      this.inGain.connect(this.convolver);\n      this.convolver.connect(this.outGain);\n    } else {\n      this.inGain.disconnect();\n      this.convolver.disconnect();\n      this.inGain.connect(this.outGain);\n    }\n  }\n  setupUI() {\n    this.bypassToggle = this.createToggle({ propName: 'bypass', style: { grow: .25 } });\n    this.ui.append([\n      this.createHozLayout([this.createLabel('Bypass ?'), this.bypassToggle], { style: { spacing: 5 } })\n    ]);\n  }\n  handleAudioConnections() {\n    // Handle actual webaudio node stuff\n    this.outputs[0].on('connect', (_, connector) => this.outputs[0].ref.connect(connector.end.ref));\n    this.outputs[0].on('disconnect', (_inst, _connector, _start, end) => this.outputs[0].ref.disconnect(end.ref));\n  }\n}\n","import { Flow, FlowState } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { Node } from \"../../core/node\";\n\nexport class Debug extends Node {\n  inGain: GainNode;\n  outGain: GainNode;\n  debugNode: AudioWorkletNode;\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'Debug', options.position || new Vector(50, 50), options.width || 120,\n      [{ name: 'in', dataType: 'audio' }],\n      [{ name: 'out', dataType: 'audio' }, { name: 'debug', dataType: 'any' }],\n      {\n        state: options.state || {},\n        style: options.style || { rowHeight: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.inGain = flow.flowConnect.audioContext.createGain();\n    this.outGain = flow.flowConnect.audioContext.createGain();\n    this.inputs[0].ref = this.inGain;\n    this.outputs[0].ref = this.outGain;\n\n    this.debugNode = new AudioWorkletNode(flow.flowConnect.audioContext, 'debug', { numberOfInputs: 1, numberOfOutputs: 1 });\n    this.debugNode.port.onmessage = (e: any) => {\n      if (flow.state !== FlowState.Stopped) this.setOutputs(1, e.data);\n    }\n    this.inputs[0].ref.connect(this.debugNode);\n    this.debugNode.connect(this.outputs[0].ref);\n\n    this.handleAudioConnections();\n  }\n\n  handleAudioConnections() {\n    // Handle actual webaudio node stuff\n    this.outputs[0].on('connect', (_, connector) => this.outputs[0].ref.connect(connector.end.ref));\n    this.outputs[0].on('disconnect', (_inst, _connector, _start, end) => this.outputs[0].ref.disconnect(end.ref));\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { clamp } from \"../../utils/utils\";\nimport { Node } from \"../../core/node\";\nimport { InputType, Slider } from \"../../ui/index\";\n\nexport class DelayEffect extends Node {\n  delaySlider: Slider;\n  feedbackSlider: Slider;\n  cutoffSlider: Slider;\n  drySlider: Slider;\n  wetSlider: Slider;\n\n  inGain: GainNode;\n  outGain: GainNode;\n  dryGain: GainNode;\n  wetGain: GainNode;\n  filter: BiquadFilterNode;\n  delay: DelayNode;\n  feedbackNode: GainNode;\n\n  static DefaultState = { feedback: 0.45, cutoff: 20000, wet: 0.5, dry: 1, delayTime: 100, bypass: false };\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'Delay', options.position || new Vector(50, 50), options.width || 230,\n      [{ name: 'in', dataType: 'audio' }],\n      [{ name: 'out', dataType: 'audio' }],\n      {\n        state: options.state ? { ...DelayEffect.DefaultState, ...options.state } : DelayEffect.DefaultState,\n        style: options.style || { rowHeight: 10, spacing: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.inGain = flow.flowConnect.audioContext.createGain();\n    this.outGain = flow.flowConnect.audioContext.createGain();\n    this.dryGain = flow.flowConnect.audioContext.createGain();\n    this.wetGain = flow.flowConnect.audioContext.createGain();\n    this.filter = flow.flowConnect.audioContext.createBiquadFilter();\n    this.delay = flow.flowConnect.audioContext.createDelay(10);\n    this.feedbackNode = flow.flowConnect.audioContext.createGain();\n    this.state.filterType = 'lowpass';\n\n    this.delay.delayTime.value = this.state.delayTime / 1000;\n    this.feedbackNode.gain.value = this.state.feedback;\n    this.filter.frequency.value = this.state.cutoff;\n    this.wetGain.gain.value = this.state.wet;\n    this.dryGain.gain.value = this.state.dry;\n\n    this.inputs[0].ref = this.inGain;\n    this.outputs[0].ref = this.outGain;\n\n    this.delay.connect(this.filter);\n    this.filter.connect(this.feedbackNode);\n    this.feedbackNode.connect(this.delay);\n    this.feedbackNode.connect(this.wetGain);\n\n    this.setBypass();\n\n    this.setupUI();\n\n    let delayChanged = () => this.delay.delayTime.value = this.state.delayTime / 1000;\n    this.delaySlider.on('change', delayChanged);\n    this.watch('delayTime', () => {\n      if (this.state.delayTime < 10 || this.state.delayTime > 10000) {\n        this.state.delayTime = clamp(this.state.delayTime, 10, 10000);\n        delayChanged();\n      }\n    });\n    let feedbackChanged = () => this.feedbackNode.gain.setTargetAtTime(this.state.feedback, flow.flowConnect.audioContext.currentTime, 0.01);\n    this.feedbackSlider.on('change', feedbackChanged);\n    this.watch('feedback', () => {\n      if (this.state.feedback < 0 || this.state.feedback > 0.9) {\n        this.state.feedback = clamp(this.state.feedback, 0, 0.9);\n        feedbackChanged();\n      }\n    });\n    let cutoffChanged = () => this.filter.frequency.setTargetAtTime(this.state.cutoff, flow.flowConnect.audioContext.currentTime, 0.01);\n    this.cutoffSlider.on('change', cutoffChanged);\n    this.watch('cutoff', () => {\n      if (this.state.cutoff < 20 || this.state.cutoff > 20000) {\n        this.state.cutoff = clamp(this.state.cutoff, 20, 20000);\n        cutoffChanged();\n      }\n    });\n    let wetChanged = () => this.wetGain.gain.setTargetAtTime(this.state.wet, flow.flowConnect.audioContext.currentTime, 0.01);\n    this.wetSlider.on('change', wetChanged);\n    this.watch('wet', () => {\n      if (this.state.wet < 0 || this.state.wet > 1) {\n        this.state.wet = clamp(this.state.wet, 0, 1);\n        wetChanged();\n      }\n    });\n    let dryChanged = () => this.dryGain.gain.setTargetAtTime(this.state.dry, flow.flowConnect.audioContext.currentTime, 0.01);\n    this.drySlider.on('change', dryChanged);\n    this.watch('dry', () => {\n      if (this.state.dry < 0 || this.state.dry > 1) {\n        this.state.dry = clamp(this.state.dry, 0, 1);\n        dryChanged();\n      }\n    });\n    this.watch('bypass', () => this.setBypass());\n\n    this.handleAudioConnections();\n  }\n\n  setBypass() {\n    if (!this.state.bypass) {\n      this.inGain.connect(this.delay);\n      this.inGain.connect(this.dryGain);\n      this.wetGain.connect(this.outGain);\n      this.dryGain.connect(this.outGain);\n    } else {\n      this.inGain.disconnect();\n      this.wetGain.disconnect();\n      this.dryGain.disconnect();\n      this.inGain.connect(this.outGain);\n    }\n  }\n  setupUI() {\n    let bypassToggle = this.createToggle({ propName: 'bypass', style: { grow: .1 } });\n    this.delaySlider = this.createSlider(0, 10000, { height: 10, propName: 'delayTime', style: { grow: .5 } });\n    let delayInput = this.createInput({ propName: 'delayTime', height: 20, style: { type: InputType.Number, grow: .3, precision: 0 } });\n    this.feedbackSlider = this.createSlider(0, 0.9, { height: 10, propName: 'feedback', style: { grow: .5 } });\n    let feedbackInput = this.createInput({ propName: 'feedback', height: 20, style: { type: InputType.Number, grow: .3, precision: 2 } });\n    this.cutoffSlider = this.createSlider(20, 20000, { height: 10, propName: 'cutoff', style: { grow: .5 } });\n    let cutoffInput = this.createInput({ propName: 'cutoff', height: 20, style: { type: InputType.Number, grow: .3, precision: 0 } });\n    this.wetSlider = this.createSlider(0, 1, { height: 10, propName: 'wet', style: { grow: .5 } });\n    let wetInput = this.createInput({ propName: 'wet', height: 20, style: { type: InputType.Number, grow: .3, precision: 2 } });\n    this.drySlider = this.createSlider(0, 1, { height: 10, propName: 'dry', style: { grow: .5 } });\n    let dryInput = this.createInput({ propName: 'dry', height: 20, style: { type: InputType.Number, grow: .3, precision: 2 } });\n    this.ui.append([\n      this.createHozLayout([this.createLabel('Delay', { style: { grow: .3 } }), this.delaySlider, delayInput], { style: { spacing: 5 } }),\n      this.createHozLayout([this.createLabel('Feedback', { style: { grow: .3 } }), this.feedbackSlider, feedbackInput], { style: { spacing: 5 } }),\n      this.createHozLayout([this.createLabel('Cutoff', { style: { grow: .3 } }), this.cutoffSlider, cutoffInput], { style: { spacing: 5 } }),\n      this.createHozLayout([this.createLabel('Wet', { style: { grow: .3 } }), this.wetSlider, wetInput], { style: { spacing: 5 } }),\n      this.createHozLayout([this.createLabel('Dry', { style: { grow: .3 } }), this.drySlider, dryInput], { style: { spacing: 5 } }),\n      this.createHozLayout([this.createLabel('Bypass ?', { style: { grow: .3 } }), bypassToggle], { style: { spacing: 5 } })\n    ]);\n  }\n  handleAudioConnections() {\n    // Handle actual webaudio node stuff\n    this.outputs[0].on('connect', (_, connector) => this.outputs[0].ref.connect(connector.end.ref));\n    this.outputs[0].on('disconnect', (_inst, _connector, _start, end) => this.outputs[0].ref.disconnect(end.ref));\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { Node } from \"../../core/node\";\n\nexport class Destination extends Node {\n  masterVolumeGainNode: GainNode;\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'Audio Destination', options.position || new Vector(50, 50), options.width || 160,\n      [{ name: 'out', dataType: 'audio' }, { name: 'gain', dataType: 'audioparam' }], [],\n      {\n        state: options.state || {},\n        style: options.style || { rowHeight: 10, spacing: 15 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.masterVolumeGainNode = flow.flowConnect.audioContext.createGain();\n    this.inputs[0].ref = this.masterVolumeGainNode;\n    this.inputs[0].ref.connect(flow.flowConnect.audioContext.destination);\n    this.inputs[1].ref = this.inputs[0].ref.gain;\n    this.inputs[1].on('data', (_, data) => typeof data === 'number' && (this.inputs[1].ref.value = data));\n  }\n\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { clamp } from \"../../utils/utils\";\nimport { Node } from '../../core/node';\nimport { Toggle, Select, Input, InputType } from \"../../ui/index\";\n\nexport class Distorter extends Node {\n  amountInput: Input;\n  oversampleSelect: Select;\n  bypassToggle: Toggle;\n\n  distorter: WaveShaperNode;\n  inGain: GainNode;\n  outGain: GainNode;\n\n  oversampleOptions = ['none', '2x', '4x'];\n\n  static DefaultState = { oversample: 'none', amount: 50, bypass: false };\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(\n      flow, options.name || 'Distorter',\n      options.position || new Vector(50, 50),\n      options.width || 200,\n      [{ name: 'in', dataType: 'audio' }],\n      [{ name: 'out', dataType: 'audio' }],\n      {\n        style: options.style || { rowHeight: 10, spacing: 10 },\n        terminalStyle: options.terminalStyle || {},\n        state: options.state ? { ...Distorter.DefaultState, ...options.state } : Distorter.DefaultState\n      }\n    )\n\n    this.inGain = flow.flowConnect.audioContext.createGain();\n    this.outGain = flow.flowConnect.audioContext.createGain();\n    this.distorter = flow.flowConnect.audioContext.createWaveShaper();\n    this.distorter.oversample = 'none';\n    this.distorter.curve = this.makeDistortionCurve(400);\n\n    this.inputs[0].ref = this.inGain;\n    this.outputs[0].ref = this.outGain;\n\n    this.setBypass();\n\n    this.setupUI();\n\n    this.watch('oversample', (_oldVal, newVal) => {\n      if (!this.oversampleOptions.includes(newVal)) this.state.oversample = 'none';\n      this.distorter.oversample = this.state.oversample;\n    });\n    this.watch('amount', (_oldVal, newVal) => {\n      if (newVal < 0 || newVal > 1000) this.state.amount = clamp(parseInt(newVal), 0, 1000);\n      this.distorter.curve = this.makeDistortionCurve(parseInt(this.state.amount));\n    });\n    this.watch('bypass', this.setBypass.bind(this));\n\n    this.handleAudioConnections();\n  }\n\n  makeDistortionCurve(amount: number) {\n    let k = typeof amount === 'number' ? amount : 50,\n      n_samples = 44100,\n      curve = new Float32Array(n_samples),\n      deg = Math.PI / 180,\n      i = 0,\n      x;\n    for (; i < n_samples; ++i) {\n      x = i * 2 / n_samples - 1;\n      curve[i] = (3 + k) * x * 20 * deg / (Math.PI + k * Math.abs(x));\n    }\n    return curve;\n  }\n  setBypass() {\n    if (!this.state.bypass) {\n      this.inGain.disconnect();\n      this.inGain.connect(this.distorter);\n      this.distorter.connect(this.outGain);\n    } else {\n      this.distorter.disconnect();\n      this.inGain.disconnect();\n      this.inGain.connect(this.outGain);\n    }\n  }\n\n  setupUI() {\n    this.amountInput = this.createInput({ propName: 'amount', height: 20, style: { grow: 1, type: InputType.Number, precision: 0 } });\n    this.oversampleSelect = this.createSelect(this.oversampleOptions, { height: 15, propName: 'oversample', style: { grow: 1 } });\n    this.bypassToggle = this.createToggle({ propName: 'bypass', style: { grow: .15 } });\n    this.ui.append([\n      this.createHozLayout([this.createLabel('Amount'), this.amountInput], { style: { spacing: 10 } }),\n      this.createHozLayout([this.createLabel('Oversample'), this.oversampleSelect], { style: { spacing: 10 } }),\n      this.createHozLayout([this.createLabel('Bypass ?', { style: { grow: .3 } }), this.bypassToggle], { style: { spacing: 5 } })\n    ]);\n  }\n  handleAudioConnections() {\n    this.outputs[0].on('connect', (_inst, connector) => this.outputs[0].ref.connect(connector.end.ref));\n    this.outputs[0].on('disconnect', (_inst, _connector, _start, end) => this.outputs[0].ref.disconnect(end.ref));\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { clamp } from \"../../utils/utils\";\nimport { Node } from \"../../core/node\";\nimport { Toggle } from \"../../ui/index\";\n\nexport class DynamicsCompressor extends Node {\n  bypassToggle: Toggle;\n\n  inGain: GainNode;\n  outGain: GainNode;\n  compressor: DynamicsCompressorNode;\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'Dynamics Compressor', options.position || new Vector(50, 50), options.width || 230,\n      [\n        { name: 'in', dataType: 'audio' }, { name: 'threshold', dataType: 'audioparam' },\n        { name: 'ratio', dataType: 'audioparam' }, { name: 'knee', dataType: 'audioparam' },\n        { name: 'attack', dataType: 'audioparam' }, { name: 'release', dataType: 'audioparam' }\n      ],\n      [{ name: 'out', dataType: 'audio' }],\n      {\n        state: options.state ? { bypass: false, ...options.state } : { bypass: false },\n        style: options.style || { rowHeight: 10, spacing: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.inGain = flow.flowConnect.audioContext.createGain();\n    this.outGain = flow.flowConnect.audioContext.createGain();\n    this.compressor = flow.flowConnect.audioContext.createDynamicsCompressor();\n    this.compressor.threshold.value = -20;\n    this.compressor.ratio.value = 4;\n    this.compressor.knee.value = 5;\n    this.compressor.attack.value = 0.01;\n    this.compressor.release.value = 0.12;\n\n    this.inputs[0].ref = this.inGain;\n    this.inputs[1].ref = this.compressor.threshold;\n    this.inputs[2].ref = this.compressor.ratio;\n    this.inputs[3].ref = this.compressor.knee;\n    this.inputs[4].ref = this.compressor.attack;\n    this.inputs[5].ref = this.compressor.release;\n    this.outputs[0].ref = this.outGain;\n\n    this.inputs[1].on('data', (_, data) => typeof data === 'number' && (this.inputs[1].ref.value = clamp(data, -100, 0)));\n    this.inputs[2].on('data', (_, data) => typeof data === 'number' && (this.inputs[2].ref.value = clamp(data, 1, 20)));\n    this.inputs[3].on('data', (_, data) => typeof data === 'number' && (this.inputs[3].ref.value = clamp(data, 0, 40)));\n    this.inputs[4].on('data', (_, data) => typeof data === 'number' && (this.inputs[4].ref.value = clamp(data, 0, 1)));\n    this.inputs[5].on('data', (_, data) => typeof data === 'number' && (this.inputs[5].ref.value = clamp(data, 0, 1)));\n\n    this.setBypass();\n\n    this.setupUI();\n\n    this.watch('bypass', () => this.setBypass());\n\n    this.handleAudioConnections();\n  }\n\n  setBypass() {\n    if (this.state.bypass) {\n      this.compressor.disconnect();\n      this.inGain.disconnect();\n      this.inGain.connect(this.outGain);\n    } else {\n      this.inGain.disconnect();\n      this.inGain.connect(this.compressor);\n      this.compressor.connect(this.outGain);\n    }\n  }\n  setupUI() {\n    this.bypassToggle = this.createToggle({ propName: 'bypass', style: { grow: .1 } });\n    this.ui.append([\n      this.createHozLayout([this.createLabel('Bypass ?', { style: { grow: .3 } }), this.bypassToggle], { style: { spacing: 5 } })\n    ]);\n  }\n  handleAudioConnections() {\n    // Handle actual webaudio node stuff\n    this.outputs[0].on('connect', (_, connector) => this.outputs[0].ref.connect(connector.end.ref));\n    this.outputs[0].on('disconnect', (_inst, _connector, _start, end) => this.outputs[0].ref.disconnect(end.ref));\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { clamp, isInRange } from \"../../utils/utils\";\nimport { Node } from '../../core/node';\nimport { Align } from \"../../common/enums\";\nimport { Toggle, VSlider, Stack } from \"../../ui/index\";\n\nexport class Equalizer extends Node {\n  vSliders: VSlider[] = [];\n  filters: BiquadFilterNode[] = [];\n  bypassToggle: Toggle;\n  inGain: GainNode;\n  outGain: GainNode;\n\n  frequencies = [32, 64, 125, 250, 500, 1000, 2000, 4000, 8000, 16000];\n  freqDisplay = ['32', '64', '125', '250', '500', '1K', '2K', '4K', '8K', '16K']\n\n  static DefaultState = { eq1: 0, eq2: 0, eq3: 0, eq4: 0, eq5: 0, eq6: 0, eq7: 0, eq8: 0, eq9: 0, eq10: 0, bypass: false };\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(\n      flow, options.name || 'Equalizer',\n      options.position || new Vector(50, 50),\n      options.width || 300,\n      [{ name: 'in', dataType: 'audio' }], [{ name: 'out', dataType: 'audio' }],\n      {\n        style: options.style || { rowHeight: 10, spacing: 10 },\n        terminalStyle: options.terminalStyle || {},\n        state: options.state ? { ...Equalizer.DefaultState, ...options.state } : Equalizer.DefaultState\n      }\n    )\n\n    this.inGain = flow.flowConnect.audioContext.createGain();\n    this.outGain = flow.flowConnect.audioContext.createGain();\n    this.frequencies.forEach((freq, index) => {\n      let filter = flow.flowConnect.audioContext.createBiquadFilter();\n      filter.frequency.value = freq;\n      if (index === 0)\n        filter.type = 'lowshelf';\n      else if (index === 9)\n        filter.type = 'highshelf';\n      else\n        filter.type = 'peaking';\n      this.filters.push(filter);\n    });\n    for (let i = 1; i < 10; ++i) {\n      this.filters[i - 1].connect(this.filters[i]);\n    }\n\n    this.inputs[0].ref = this.inGain;\n    this.outputs[0].ref = this.outGain;\n\n    this.setBypass();\n\n    this.setupUI();\n\n    this.watch('bypass', this.setBypass.bind(this));\n    for (let i = 1; i <= 10; ++i) {\n      this.watch(`eq${i}`, (_oldVal, newVal) => {\n        if (!isInRange(newVal, -40, 40)) {\n          this.state[`eq${i}`] = clamp(newVal, -40, 40);\n        }\n        this.filters[i - 1].gain.value = this.state[`eq${i}`]\n      });\n    }\n\n    this.handleAudioConnections();\n  }\n\n  setBypass() {\n    if (!this.state.bypass) {\n      this.inGain.disconnect();\n      this.inGain.connect(this.filters[0]);\n      this.filters[9].connect(this.outGain);\n    } else {\n      this.inGain.disconnect();\n      this.filters[9].disconnect();\n      this.inGain.connect(this.outGain);\n    }\n  }\n  setupUI() {\n    let stacks: Stack[] = [];\n    this.frequencies.forEach((_freq, index) => {\n      let vSlider = this.createVSlider(-40, 40, { height: 120, propName: `eq${index + 1}` });\n      this.vSliders.push(vSlider);\n      let stack = this.createStack({\n        childs: [\n          this.createLabel(this.freqDisplay[index], { style: { align: Align.Center } }),\n          vSlider,\n          this.createLabel(this.state[`eq${index + 1}`], { propName: `eq${index + 1}`, style: { align: Align.Center, precision: 0 } }),\n        ],\n        style: { grow: .1, spacing: 5 }\n      });\n      stacks.push(stack);\n    });\n    this.bypassToggle = this.createToggle({ propName: 'bypass', height: 10, style: { grow: .1 } });\n    this.ui.append([\n      this.createHozLayout(stacks, { style: { spacing: 5 } }),\n      this.createHozLayout([this.createLabel('Bypass ?'), this.bypassToggle], { style: { spacing: 5 } })\n    ]);\n  }\n  handleAudioConnections() {\n    this.outputs[0].on('connect', (_inst, connector) => this.outputs[0].ref.connect(connector.end.ref));\n    this.outputs[0].on('disconnect', (_inst, _connector, _start, end) => this.outputs[0].ref.disconnect(end.ref));\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { clamp } from \"../../utils/utils\";\nimport { Node } from '../../core/node';\nimport { Align } from \"../../common/enums\";\nimport { Slider, Display, Label } from \"../../ui/index\";\n\nexport class FrequencyAnalyser extends Node {\n  freqLabel: Label;\n  fftSizeSlider: Slider;\n  fftSizeLabel: Label;\n  display: Display;\n\n  analyser: AnalyserNode;\n\n  static DefaultState = { fftSize: 11, currFreq: 0 };\n\n  fftSizes = [32, 64, 128, 256, 512, 1024, 2048, 4096, 8192, 16384, 32768];\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(\n      flow, options.name || 'Frequency Analyser',\n      options.position || new Vector(50, 50),\n      options.width || 350,\n      [{ name: 'in', dataType: 'audio' }], [{ name: 'out', dataType: 'audio' }],\n      {\n        style: options.style || { rowHeight: 10, spacing: 10 },\n        terminalStyle: options.terminalStyle || {},\n        state: options.state ? { ...FrequencyAnalyser.DefaultState, ...options.state } : FrequencyAnalyser.DefaultState\n      }\n    )\n\n    this.analyser = flow.flowConnect.audioContext.createAnalyser();\n    this.analyser.fftSize = this.getFFTSize();\n    this.inputs[0].ref = this.outputs[0].ref = this.analyser;\n\n    this.setupUI();\n\n    this.watch('fftSize', (_oldVal, newVal) => {\n      if (newVal < 5 || newVal > 15) this.state.fftSize = clamp(Math.round(newVal), 5, 15);\n      let actualFFTSize = this.getFFTSize();\n      this.fftSizeLabel.text = actualFFTSize;\n      this.analyser.fftSize = actualFFTSize;\n    });\n    this.display.on('over', (_inst, screenPos) => {\n      this.state.currFreq = (\n        Math.floor(\n          (\n            screenPos.subtract(this.display.position.transform(this.flow.flowConnect.transform)).x\n            / this.display.displayConfigs[0].canvas.width\n          )\n          * this.analyser.frequencyBinCount\n        ) * this.flow.flowConnect.audioContext.sampleRate\n      ) / (this.analyser.frequencyBinCount * 2);\n    });\n    this.display.on('exit', () => (this.state.currFreq = 0));\n\n    this.handleAudioConnections();\n  }\n\n  getFFTSize() {\n    return this.fftSizes[clamp(Math.round(this.state.fftSize), 5, 15) - 5];\n  }\n  setupUI() {\n    this.freqLabel = this.createLabel('Frequency:');\n    this.fftSizeSlider = this.createSlider(5, 15, { height: 10, propName: 'fftSize', style: { grow: .6, precision: 0 } });\n    this.fftSizeLabel = this.createLabel(this.getFFTSize(), { height: 20, style: { grow: .2, align: Align.Right } });\n    this.display = this.createDisplay(200, [{\n      auto: true,\n      renderer: (...args) => this.customRenderer(args[0], args[1], args[2])\n    }]);\n\n    this.ui.append([\n      this.createHozLayout([\n        this.freqLabel, this.createLabel(this.state.currFreq, { propName: 'currFreq', style: { precision: 0, grow: 1 } })\n      ], { style: { spacing: 5 } }),\n      this.display,\n      this.createHozLayout([\n        this.createLabel('FFT Size', { style: { grow: .2 } }), this.fftSizeSlider, this.fftSizeLabel\n      ], { style: { spacing: 5 } })\n    ]);\n  }\n  customRenderer(context: OffscreenCanvasRenderingContext2D | CanvasRenderingContext2D, width: number, height: number): boolean {\n    let value, percent, offset, hue,\n      i = 0,\n      frequencyBinCount = this.analyser.frequencyBinCount,\n      frequencyData = new Uint8Array(frequencyBinCount),\n      orgHeight = height,\n      barWidth = width / frequencyBinCount;\n\n    this.analyser.getByteFrequencyData(frequencyData);\n\n    for (; i < frequencyBinCount; i++) {\n      value = frequencyData[i];\n      percent = value / 256;\n      height = orgHeight * percent;\n      offset = orgHeight - height - 1;\n      hue = i / frequencyBinCount * 360;\n      context.fillStyle = 'hsl(' + hue + ', 100%, 50%)';\n      context.fillRect(i * barWidth, offset, barWidth, height);\n    }\n\n    return true;\n  }\n  handleAudioConnections() {\n    this.outputs[0].on('connect', (_inst, connector) => this.outputs[0].ref.connect(connector.end.ref));\n    this.outputs[0].on('disconnect', (_inst, _connector, _start, end) => this.outputs[0].ref.disconnect(end.ref));\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { Node } from \"../../core/node\";\n\nexport class Gain extends Node {\n  gain: GainNode;\n\n  static DefaultState = { gain: 1 };\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'Gain', options.position || new Vector(50, 50), options.width || 120,\n      [{ name: 'in', dataType: 'audio' }, { name: 'gain', dataType: 'audioparam' }],\n      [{ name: 'out', dataType: 'audio' }],\n      {\n        state: options.state ? { ...Gain.DefaultState, ...options.state } : Gain.DefaultState,\n        style: options.style || { rowHeight: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.gain = flow.flowConnect.audioContext.createGain();\n    this.inputs[0].ref = this.gain;\n    this.outputs[0].ref = this.gain;\n    this.inputs[1].ref = this.inputs[0].ref.gain;\n    this.inputs[1].on('data', (_, data) => typeof data === 'number' && (this.inputs[1].ref.value = data));\n\n    this.handleAudioConnections();\n  }\n\n  handleAudioConnections() {\n    // Handle actual webaudio node stuff\n    this.outputs[0].on('connect', (_, connector) => this.outputs[0].ref.connect(connector.end.ref));\n    this.outputs[0].on('disconnect', (_inst, _connector, _start, end) => this.outputs[0].ref.disconnect(end.ref));\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { clamp } from \"../../utils/utils\";\nimport { Node } from \"../../core/node\";\nimport { FlowConnectState } from \"../../flow-connect\";\nimport { Constant } from \"../../resource/constants\";\nimport { InputType, Input, Toggle } from \"../../ui/index\";\n\nexport class Metronome extends Node {\n  autoToggle: Toggle;\n  freqInput: Input;\n  bpmInput: Input;\n  source: AudioBufferSourceNode;\n\n  volumeGainNode: GainNode;\n  proxyParamSourceNode: AudioWorkletNode;\n\n  static DefaultState: any = { frequency: 330, buffer: null, bpm: 130, loop: true, auto: true };\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'Metronome', options.position || new Vector(50, 50), options.width || 200,\n      [\n        { name: 'trigger', dataType: 'event' }, { name: 'gain', dataType: 'audioparam' },\n        { name: 'detune', dataType: 'audioparam' }, { name: 'playback-rate', dataType: 'audioparam' }\n      ],\n      [{ name: 'out', dataType: 'audio' }],\n      {\n        state: options.state ? { ...Metronome.DefaultState, ...options.state } : Metronome.DefaultState,\n        style: options.style || { rowHeight: 10, spacing: 15 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.volumeGainNode = flow.flowConnect.audioContext.createGain();\n    this.proxyParamSourceNode = new AudioWorkletNode(\n      flow.flowConnect.audioContext,\n      'proxy-param-for-source',\n      { numberOfOutputs: 2, parameterData: { detune: 0, playbackRate: 1 } }\n    );\n    this.inputs[1].ref = this.volumeGainNode.gain;\n    this.inputs[2].ref = (this.proxyParamSourceNode.parameters as Map<string, AudioParam>).get('detune');\n    this.inputs[3].ref = (this.proxyParamSourceNode.parameters as Map<string, AudioParam>).get('playbackRate');\n    this.inputs[1].on('data', (_, data) => typeof data === 'number' && (this.inputs[1].ref.value = data));\n    this.inputs[2].on('data', (_, data) => typeof data === 'number' && (this.inputs[2].ref.value = data));\n    this.inputs[3].on('data', (_, data) => typeof data === 'number' && (this.inputs[3].ref.value = data));\n    this.outputs[0].ref = this.volumeGainNode;\n    this.fillBuffer();\n\n    this.setupUI();\n\n    this.bpmInput.on('change', () => {\n      if (this.source) {\n        this.source.loopEnd = 1 / (clamp(this.state.bpm, 30, 300) / 60);\n      }\n    });\n    this.freqInput.on('change', () => {\n      if (this.source) {\n        this.stopSource();\n        this.fillBuffer();\n        this.playSource();\n      } else this.fillBuffer();\n    });\n    this.inputs[0].on('event', () => this.playSource());\n\n    flow.flowConnect.on('start', () => this.state.auto && this.playSource());\n    flow.flowConnect.on('stop', () => this.stopSource());\n\n    this.handleAudioConnections();\n  }\n  fillBuffer() {\n    let ctx = this.flow.flowConnect.audioContext;\n\n    let buffer = ctx.createBuffer(1, ctx.sampleRate * 2, ctx.sampleRate);\n    let channel = buffer.getChannelData(0);\n\n    let phase = 0;\n    let amp = 1;\n    let durationFrames = ctx.sampleRate / 50;\n\n    const f = this.state.frequency;\n    for (let i = 0; i < durationFrames; i++) {\n      channel[i] = Math.sin(phase) * amp;\n      phase += Constant.TAU * f / ctx.sampleRate;\n      if (phase > Constant.TAU) {\n        phase -= Constant.TAU;\n      }\n      amp -= 1 / durationFrames;\n    }\n    this.state.buffer = buffer;\n  }\n  setupUI() {\n    this.autoToggle = this.createToggle({ propName: 'auto', height: 10, style: { grow: 0.2 } });\n    this.freqInput = this.createInput({ propName: 'frequency', height: 20, style: { type: InputType.Number, grow: 0.5 } });\n    this.bpmInput = this.createInput({ propName: 'bpm', height: 20, style: { type: InputType.Number, grow: 0.5 } });\n    this.ui.append([\n      this.createHozLayout([this.createLabel('Auto ?'), this.autoToggle], { style: { spacing: 5 } }),\n      this.createHozLayout([\n        this.createLabel('Frequency'), this.freqInput, this.createLabel('BPM'), this.bpmInput\n      ], { style: { spacing: 5 } })\n    ]);\n  }\n  playSource() {\n    if (this.flow.flowConnect.state === FlowConnectState.Stopped || !this.state.buffer) return;\n\n    let audioSource = new AudioBufferSourceNode(this.flow.flowConnect.audioContext);\n    audioSource.buffer = this.state.buffer;\n    audioSource.loop = true;\n    this.source = audioSource;\n\n    audioSource.loopEnd = 1 / (clamp(this.state.bpm, 30, 300) / 60);\n    this.proxyParamSourceNode.connect(audioSource.detune, 0);\n    this.proxyParamSourceNode.connect(audioSource.playbackRate, 1);\n    audioSource.connect(this.outputs[0].ref);\n    audioSource.start(0);\n  }\n  stopSource() {\n    if (this.source) {\n      this.source.stop();\n      this.source = null;\n    }\n  }\n  handleAudioConnections() {\n    // Handle actual webaudio node stuff\n    this.outputs[0].on('connect', (_, connector) => this.outputs[0].ref.connect(connector.end.ref));\n    this.outputs[0].on('disconnect', (_inst, _connector, _start, end) => this.outputs[0].ref.disconnect(end.ref));\n  }\n}\n","import { Flow, FlowState } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { Node } from '../../core/node';\nimport { Log } from \"../../utils/logger\";\n\nexport class Microphone extends Node {\n  microphone: MediaStreamAudioSourceNode;\n  stream: MediaStream;\n  outGain: GainNode;\n\n  static DefaultState = {};\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(\n      flow, options.name || 'Microphone',\n      options.position || new Vector(50, 50),\n      options.width || 120, [],\n      [{ name: 'out', dataType: 'audio' }],\n      {\n        style: options.style || { rowHeight: 10 },\n        terminalStyle: options.terminalStyle || {},\n        state: options.state ? { ...Microphone.DefaultState, ...options.state } : Microphone.DefaultState\n      }\n    )\n\n    this.outGain = flow.flowConnect.audioContext.createGain();\n    this.outputs[0].ref = this.outGain;\n\n    this.flow.flowConnect.on('start', () => {\n      if (!this.stream) {\n        this.getMicrophone().then(() => {\n          if (this.flow.state !== FlowState.Stopped) this.microphone.connect(this.outGain);\n        }, error => {\n          Log.error('Cannot access microphone: ', error);\n        }).catch(error => Log.error(error));\n      } else {\n        this.microphone.connect(this.outGain);\n      }\n    });\n    this.flow.flowConnect.on('stop', () => this.microphone && this.microphone.disconnect());\n\n    this.handleAudioConnections();\n\n    this.getMicrophone().then(() => { /**/ }, error => {\n      Log.error('Cannot access microphone: ', error);\n    }).catch(error => Log.error(error));\n  }\n\n  async getMicrophone() {\n    this.stream = await navigator.mediaDevices.getUserMedia({ audio: true, video: false });\n    this.microphone = this.flow.flowConnect.audioContext.createMediaStreamSource(this.stream);\n  }\n\n  handleAudioConnections() {\n    this.outputs[0].on('connect', (_inst, connector) => this.outputs[0].ref.connect(connector.end.ref));\n    this.outputs[0].on('disconnect', (_inst, _connector, _start, end) => this.outputs[0].ref.disconnect(end.ref));\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { clamp } from \"../../utils/utils\";\nimport { Node } from \"../../core/node\";\nimport { InputType, Slider, Toggle } from \"../../ui/index\";\n\nexport class MoogEffect extends Node {\n  cutoffSlider: Slider;\n  resonanceSlider: Slider;\n  bypassToggle: Toggle;\n\n  inGain: GainNode;\n  outGain: GainNode;\n  moog: AudioWorkletNode;\n\n  static DefaultState = { cutoff: 0.065, resonance: 3.5, bypass: false };\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'Moog Effect', options.position || new Vector(50, 50), options.width || 230,\n      [{ name: 'in', dataType: 'audio' }],\n      [{ name: 'out', dataType: 'audio' }],\n      {\n        state: options.state ? { ...MoogEffect.DefaultState, ...options.state } : MoogEffect.DefaultState,\n        style: options.style || { rowHeight: 10, spacing: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.inGain = flow.flowConnect.audioContext.createGain();\n    this.outGain = flow.flowConnect.audioContext.createGain();\n    this.inputs[0].ref = this.inGain;\n    this.outputs[0].ref = this.outGain;\n\n    this.moog = new AudioWorkletNode(flow.flowConnect.audioContext, 'moog-effect', {\n      numberOfInputs: 1, numberOfOutputs: 1, processorOptions: { bufferSize: 4096 }\n    });\n    this.setBypass();\n\n    this.setupUI();\n\n    this.watch('bypass', () => this.setBypass());\n    this.watch('cutoff', () => {\n      if (this.state.cutoff < 0.0001 || this.state.cutoff > 1.0) this.state.cutoff = clamp(this.state.cutoff, 0.0001, 1.0);\n      this.paramsChanged();\n    });\n    this.watch('resonance', () => {\n      if (this.state.resonance < 0 || this.state.resonance > 4.0) this.state.resonance = clamp(this.state.resonance, 0, 4.0);\n      this.paramsChanged();\n    });\n\n    flow.flowConnect.on('start', () => this.paramsChanged());\n\n    this.handleAudioConnections();\n  }\n\n  paramsChanged() {\n    this.moog.port.postMessage({ cutoff: this.state.cutoff, resonance: this.state.resonance });\n  }\n  setBypass() {\n    if (this.state.bypass) {\n      this.moog.disconnect();\n      this.inGain.disconnect();\n      this.inGain.connect(this.outGain);\n    } else {\n      this.inGain.disconnect();\n      this.inGain.connect(this.moog);\n      this.moog.connect(this.outGain);\n    }\n  }\n  setupUI() {\n    this.cutoffSlider = this.createSlider(0.0001, 1.0, { height: 10, propName: 'cutoff', style: { grow: .5 } });\n    this.resonanceSlider = this.createSlider(0, 4.0, { height: 10, propName: 'resonance', style: { grow: .5 } });\n    let cutoffInput = this.createInput({ propName: 'cutoff', height: 20, style: { type: InputType.Number, grow: .2, precision: 2 } });\n    let resonanceInput = this.createInput({ propName: 'resonance', height: 20, style: { type: InputType.Number, grow: .4, precision: 2 } });\n    this.bypassToggle = this.createToggle({ propName: 'bypass', style: { grow: .1 } });\n    this.ui.append([\n      this.createHozLayout([this.createLabel('Cutoff', { style: { grow: .3 } }), this.cutoffSlider, cutoffInput], { style: { spacing: 5 } }),\n      this.createHozLayout([this.createLabel('Resonance', { style: { grow: .3 } }), this.resonanceSlider, resonanceInput], { style: { spacing: 5 } }),\n      this.createHozLayout([this.createLabel('Bypass ?', { style: { grow: .3 } }), this.bypassToggle], { style: { spacing: 5 } })\n    ]);\n  }\n  handleAudioConnections() {\n    // Handle actual webaudio node stuff\n    this.outputs[0].on('connect', (_, connector) => this.outputs[0].ref.connect(connector.end.ref));\n    this.outputs[0].on('disconnect', (_inst, _connector, _start, end) => this.outputs[0].ref.disconnect(end.ref));\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { Node } from '../../core/node';\nimport { Select } from \"../../ui/index\";\n\nexport class Noise extends Node {\n  noiseSelect: Select\n  noise: AudioWorkletNode;\n  outGain: GainNode;\n\n  static DefaultState = { type: 'white' };\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(\n      flow, options.name || 'Noise',\n      options.position || new Vector(50, 50),\n      options.width || 170, [],\n      [{ name: 'out', dataType: 'audio' }],\n      {\n        style: options.style || { rowHeight: 10, spacing: 10 },\n        terminalStyle: options.terminalStyle || {},\n        state: options.state ? { ...Noise.DefaultState, ...options.state } : Noise.DefaultState\n      }\n    )\n\n    this.outGain = flow.flowConnect.audioContext.createGain();\n    this.outputs[0].ref = this.outGain;\n\n    this.noise = new AudioWorkletNode(flow.flowConnect.audioContext, 'noise', {\n      channelCount: 1, channelCountMode: 'explicit', outputChannelCount: [1], numberOfInputs: 1, numberOfOutputs: 1\n    });\n    this.noise.port.postMessage(this.state.type);\n\n    this.setupUI();\n\n    this.watch('type', (_oldVal, newVal) => {\n      if (!this.noiseSelect.values.includes(newVal)) newVal = 'white';\n      this.noise.port.postMessage(newVal);\n    });\n\n    this.handleAudioConnections();\n\n    this.flow.flowConnect.on('start', () => {\n      this.noise.connect(this.outGain);\n    });\n    this.flow.flowConnect.on('stop', () => {\n      this.noise.disconnect();\n    });\n  }\n\n  setupUI() {\n    this.noiseSelect = this.createSelect(['white', 'pink', 'brownian'], { height: 15, propName: 'type', style: { grow: .7 } });\n    this.ui.append([\n      this.createHozLayout([this.createLabel('Type', { style: { grow: .3 } }), this.noiseSelect], { style: { spacing: 5 } })\n    ]);\n  }\n  handleAudioConnections() {\n    this.outputs[0].on('connect', (_inst, connector) => this.outputs[0].ref.connect(connector.end.ref));\n    this.outputs[0].on('disconnect', (_inst, _connector, _start, end) => this.outputs[0].ref.disconnect(end.ref));\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { clamp } from \"../../utils/utils\";\nimport { Node } from '../../core/node';\nimport { InputType, Input, RadioGroup, Slider, HorizontalLayout } from \"../../ui/index\";\n\nexport class Oscillator extends Node {\n  freqSlider: Slider;\n  freqInput: Input;\n  freqHozLayout: HorizontalLayout;\n  detuneSlider: Slider;\n  detuneInput: Input;\n  detuneHozLayout: HorizontalLayout;\n  typeGroup: RadioGroup;\n\n  oscillator: OscillatorNode;\n  freqProxy: AudioWorkletNode;\n  detuneProxy: AudioWorkletNode;\n  outGain: GainNode;\n\n  types = ['sine', 'square', 'sawtooth', 'triangle'];\n\n  static DefaultState = { frequency: 440, detune: 0, type: 'sine' };\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(\n      flow, options.name || 'Oscillator',\n      options.position || new Vector(50, 50),\n      options.width || 250, [],\n      [{ name: 'out', dataType: 'audio' }],\n      {\n        style: options.style || { rowHeight: 10, spacing: 10 },\n        terminalStyle: options.terminalStyle || {},\n        state: options.state ? { ...Oscillator.DefaultState, ...options.state } : Oscillator.DefaultState\n      }\n    )\n\n    this.freqProxy = new AudioWorkletNode(flow.flowConnect.audioContext, 'proxy');\n    this.detuneProxy = new AudioWorkletNode(flow.flowConnect.audioContext, 'proxy');\n    this.outGain = flow.flowConnect.audioContext.createGain();\n\n    this.setupUI();\n\n    this.inputsUI[0].ref = this.freqProxy;\n    this.inputsUI[1].ref = this.detuneProxy;\n    this.inputsUI[0].dataType = 'audioparam';\n    this.inputsUI[1].dataType = 'audioparam';\n    this.outputs[0].ref = this.outGain;\n\n    this.inputsUI[0].on('data', (_inst, data) => typeof data === 'number' && (this.state.frequency = data));\n    this.inputsUI[1].on('data', (_inst, data) => typeof data === 'number' && (this.state.detune = data));\n\n    this.watch('frequency', (_oldVal, newVal) => {\n      if (newVal < 0 || newVal > 20000) newVal = clamp(newVal, 0, 20000);\n      if (!this.freqHozLayout.disabled) this.oscillator && (this.oscillator.frequency.value = newVal);\n    });\n    this.watch('detune', (_oldVal, newVal) => {\n      if (!this.detuneHozLayout.disabled) this.oscillator && (this.oscillator.detune.value = newVal);\n    });\n    this.watch('type', (_oldVal, newVal) => {\n      if (this.types.includes(newVal)) this.oscillator && (this.oscillator.type = newVal);\n    });\n\n    this.flow.flowConnect.on('start', () => this.startOscillator());\n    this.flow.flowConnect.on('stop', () => this.stopOscillator());\n\n    this.handleAudioConnections();\n  }\n\n  startOscillator() {\n    this.stopOscillator();\n    this.oscillator = this.flow.flowConnect.audioContext.createOscillator();\n    if (!this.inputsUI[0].isConnected()) this.oscillator.frequency.value = this.state.frequency;\n    else {\n      this.freqProxy.connect(this.oscillator.frequency);\n      this.oscillator.frequency.value = 0;\n    }\n    if (!this.inputsUI[1].isConnected()) this.oscillator.detune.value = this.state.detune;\n    else {\n      this.detuneProxy.connect(this.oscillator.detune);\n      this.oscillator.detune.value = 0;\n    }\n\n    this.oscillator.type = this.state.type;\n    this.oscillator.connect(this.outGain);\n    this.oscillator.start();\n  }\n  stopOscillator() {\n    if (this.oscillator) {\n      this.freqProxy.disconnect();\n      this.detuneProxy.disconnect();\n      this.oscillator.disconnect();\n      this.oscillator.stop();\n      this.oscillator = null;\n    }\n  }\n  setupUI() {\n    this.freqSlider = this.createSlider(0, 20000, { height: 10, propName: 'frequency', style: { grow: .5 } });\n    this.freqInput = this.createInput({ propName: 'frequency', height: 20, style: { type: InputType.Number, grow: .3, precision: 0 } });\n    this.freqHozLayout = this.createHozLayout([\n      this.createLabel('Freq.', { style: { grow: .2 } }), this.freqSlider, this.freqInput\n    ], { input: true, style: { spacing: 5 } });\n    this.detuneSlider = this.createSlider(-2400, 2400, { height: 10, propName: 'detune', style: { grow: .5 } });\n    this.detuneInput = this.createInput({ propName: 'detune', height: 20, style: { type: InputType.Number, grow: .3, precision: 0 } });\n    this.detuneHozLayout = this.createHozLayout([\n      this.createLabel('Detune', { style: { grow: .2 } }), this.detuneSlider, this.detuneInput\n    ], { input: true, style: { spacing: 5 } });\n    this.typeGroup = this.createRadioGroup(this.types, this.state.type, { propName: 'type', height: 20 });\n\n    this.ui.append([this.freqHozLayout, this.detuneHozLayout, this.typeGroup]);\n  }\n  handleAudioConnections() {\n    this.inputsUI[0].on('connect', () => {\n      if (this.oscillator) {\n        this.freqProxy.connect(this.oscillator.frequency);\n        this.oscillator.frequency.value = 0;\n      }\n    });\n    this.inputsUI[0].on('disconnect', () => {\n      if (this.oscillator) {\n        this.freqProxy.disconnect();\n        this.oscillator.frequency.value = this.state.frequency;\n      }\n    });\n    this.inputsUI[1].on('connect', () => {\n      if (this.oscillator) {\n        this.detuneProxy.connect(this.oscillator.detune);\n        this.oscillator.detune.value = 0;\n      }\n    });\n    this.inputsUI[1].on('disconnect', () => {\n      if (this.oscillator) {\n        this.detuneProxy.disconnect();\n        this.oscillator.detune.value = this.state.detune;\n      }\n    });\n    this.outputs[0].on('connect', (_inst, connector) => this.outputs[0].ref.connect(connector.end.ref));\n    this.outputs[0].on('disconnect', (_inst, _connector, _start, end) => this.outputs[0].ref.disconnect(end.ref));\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { clamp } from \"../../utils/utils\";\nimport { Node } from '../../core/node';\nimport { InputType, Input, Slider, Toggle, Select } from \"../../ui/index\";\nlet Tuna = require('../../lib/tuna.js');\n\nexport class OverdriveEffect extends Node {\n  driveSlider: Slider;\n  driveInput: Input;\n  outGainSlider: Slider;\n  outGainInput: Input;\n  curveAmountSlider: Slider;\n  curveAmountInput: Input;\n  algorithmSelect: Select;\n  bypassToggle: Toggle;\n  overdrive: any;\n\n  static DefaultState = { drive: 0.197, outGain: -9.154, curveAmount: 0.979, algorithm: 1, bypass: false };\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(\n      flow, options.name || 'Overdrive Effect',\n      options.position || new Vector(50, 50),\n      options.width || 230,\n      [{ name: 'in', dataType: 'audio' }],\n      [{ name: 'out', dataType: 'audio' }],\n      {\n        style: options.style || { rowHeight: 10, spacing: 10 },\n        terminalStyle: options.terminalStyle || {},\n        state: options.state ? { ...OverdriveEffect.DefaultState, ...options.state } : OverdriveEffect.DefaultState\n      }\n    )\n\n    if (!(window as any).__tuna__) (window as any).__tuna__ = new Tuna(flow.flowConnect.audioContext);\n\n    this.overdrive = new (window as any).__tuna__.Overdrive();\n    this.inputs[0].ref = this.outputs[0].ref = this.overdrive;\n    this.setupUI();\n    Object.assign(this.overdrive, {\n      drive: this.state.drive,\n      outputGain: this.state.outGain,\n      curveAmount: this.state.curveAmount,\n      algorithmIndex: parseInt(this.state.algorithm) - 1\n    });\n\n    this.watch('drive', (_oldVal, newVal) => {\n      if (newVal < 0 || newVal > 1) this.state.drive = clamp(newVal, 0, 1);\n      this.overdrive.drive = this.state.drive;\n    });\n    this.watch('outGain', (_oldVal, newVal) => {\n      if (newVal < -46 || newVal > 0) this.state.outGain = clamp(newVal, -46, 0);\n      this.overdrive.outputGain = this.state.outGain;\n    });\n    this.watch('curveAmount', (_oldVal, newVal) => {\n      if (newVal < 0 || newVal > 1) this.state.curveAmount = clamp(newVal, 0, 1);\n      this.overdrive.curveAmount = this.state.curveAmount;\n    });\n    this.watch('algorithm', (_oldVal, newVal) => {\n      newVal = parseInt(newVal);\n      if (!newVal) newVal = 1;\n      if (newVal < 1 || newVal > 6) newVal = clamp(newVal, 1, 6);\n      this.overdrive.algorithmIndex = newVal - 1;\n    });\n    this.watch('bypass', (_oldVal, newVal) => this.overdrive.bypass = newVal);\n\n    this.handleAudioConnections();\n  }\n\n  setupUI() {\n    this.driveSlider = this.createSlider(0, 1, { height: 10, propName: 'drive', style: { grow: .5 } });\n    this.driveInput = this.createInput({ propName: 'drive', height: 20, style: { type: InputType.Number, grow: .2, precision: 4 } });\n    this.outGainSlider = this.createSlider(-46, 0, { height: 10, propName: 'outGain', style: { grow: .5 } });\n    this.outGainInput = this.createInput({ propName: 'outGain', height: 20, style: { type: InputType.Number, grow: .2, precision: 2 } });\n    this.curveAmountSlider = this.createSlider(0, 0.95, { height: 10, propName: 'curveAmount', style: { grow: .5 } });\n    this.curveAmountInput = this.createInput({ propName: 'curveAmount', height: 20, style: { type: InputType.Number, grow: .2, precision: 2 } });\n    this.algorithmSelect = this.createSelect(['1', '2', '3', '4', '5', '6'], { propName: 'algorithm', height: 20, style: { grow: .7 } })\n    this.bypassToggle = this.createToggle({ propName: 'bypass', style: { grow: .1 } });\n    this.ui.append([\n      this.createHozLayout([this.createLabel('Drive', { style: { grow: .3 } }), this.driveSlider, this.driveInput], { style: { spacing: 5 } }),\n      this.createHozLayout([this.createLabel('Output Gain', { style: { grow: .3 } }), this.outGainSlider, this.outGainInput], { style: { spacing: 5 } }),\n      this.createHozLayout([this.createLabel('Curve Amount', { style: { grow: .3 } }), this.curveAmountSlider, this.curveAmountInput], { style: { spacing: 5 } }),\n      this.createHozLayout([this.createLabel('Algorithm', { style: { grow: .3 } }), this.algorithmSelect], { style: { spacing: 5 } }),\n      this.createHozLayout([this.createLabel('Bypass ?', { style: { grow: .3 } }), this.bypassToggle], { style: { spacing: 5 } })\n    ]);\n  }\n  handleAudioConnections() {\n    this.outputs[0].on('connect', (_inst, connector) => this.outputs[0].ref.connect(connector.end.ref));\n    this.outputs[0].on('disconnect', (_inst, _connector, _start, end) => this.outputs[0].ref.disconnect(end.ref));\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { clamp } from \"../../utils/utils\";\nimport { Node } from '../../core/node';\nimport { InputType, Input, Slider, Toggle } from \"../../ui/index\";\nlet Tuna = require('../../lib/tuna.js');\n\nexport class PingPongEffect extends Node {\n  delayLeftSlider: Slider;\n  delayLeftInput: Input;\n  delayRightSlider: Slider;\n  delayRightInput: Input;\n  feedbackSlider: Slider;\n  feedbackInput: Input;\n  wetSlider: Slider;\n  wetInput: Input;\n  bypassToggle: Toggle;\n  pingPong: any;\n\n  static DefaultState = { delayLeft: 200, delayRight: 400, feedback: 0.3, wet: 0.5, bypass: false };\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(\n      flow, options.name || 'PingPong Effect',\n      options.position || new Vector(50, 50),\n      options.width || 230,\n      [{ name: 'in', dataType: 'audio' }], [{ name: 'out', dataType: 'audio' }],\n      {\n        style: options.style || { rowHeight: 10, spacing: 10 },\n        terminalStyle: options.terminalStyle || {},\n        state: options.state ? { ...PingPongEffect.DefaultState, ...options.state } : PingPongEffect.DefaultState\n      }\n    )\n\n    if (!(window as any).__tuna__) (window as any).__tuna__ = new Tuna(flow.flowConnect.audioContext);\n\n    this.pingPong = new (window as any).__tuna__.PingPongDelay();\n    this.inputs[0].ref = this.outputs[0].ref = this.pingPong;\n\n    Object.assign(this.pingPong, {\n      delayTimeLeft: this.state.delayLeft,\n      delayTimeRight: this.state.delayRight,\n      feedback: this.state.feedback,\n      wetLevel: this.state.wet\n    });\n\n    this.setupUI();\n\n    this.watch('delayLeft', (_oldVal, newVal) => {\n      if (newVal < 1 || newVal > 10000) this.state.delayLeft = clamp(newVal, 1, 10000);\n      this.pingPong.delayTimeLeft = this.state.delayLeft;\n    });\n    this.watch('delayRight', (_oldVal, newVal) => {\n      if (newVal < 1 || newVal > 10000) this.state.delayRight = clamp(newVal, 1, 10000);\n      this.pingPong.delayTimeRight = this.state.delayRight;\n    });\n    this.watch('feedback', (_oldVal, newVal) => {\n      if (newVal < 0 || newVal > 1) this.state.feedback = clamp(newVal, 0, 1);\n      this.pingPong.feedback = this.state.feedback;\n    });\n    this.watch('wet', (_oldVal, newVal) => {\n      if (newVal < 0 || newVal > 1) this.state.wet = clamp(newVal, 0, 1);\n      this.pingPong.wetLevel = this.state.wet;\n    });\n    this.watch('bypass', (_oldVal, newVal) => this.pingPong.bypass = newVal);\n\n    this.handleAudioConnections();\n  }\n\n  setupUI() {\n    this.delayLeftSlider = this.createSlider(1, 10000, { height: 10, propName: 'delayLeft', style: { grow: .5 } });\n    this.delayLeftInput = this.createInput({ propName: 'delayLeft', height: 20, style: { type: InputType.Number, grow: .2, precision: 4 } });\n    this.delayRightSlider = this.createSlider(1, 10000, { height: 10, propName: 'delayRight', style: { grow: .5 } });\n    this.delayRightInput = this.createInput({ propName: 'delayRight', height: 20, style: { type: InputType.Number, grow: .2, precision: 2 } });\n    this.feedbackSlider = this.createSlider(0, 1, { height: 10, propName: 'feedback', style: { grow: .5 } });\n    this.feedbackInput = this.createInput({ propName: 'feedback', height: 20, style: { type: InputType.Number, grow: .2, precision: 2 } });\n    this.wetSlider = this.createSlider(0, 1, { height: 10, propName: 'wet', style: { grow: .5 } });\n    this.wetInput = this.createInput({ propName: 'wet', height: 20, style: { type: InputType.Number, grow: .2, precision: 2 } });\n    this.bypassToggle = this.createToggle({ propName: 'bypass', style: { grow: .1 } });\n    this.ui.append([\n      this.createHozLayout([this.createLabel('Delay L', { style: { grow: .3 } }), this.delayLeftSlider, this.delayLeftInput], { style: { spacing: 5 } }),\n      this.createHozLayout([this.createLabel('Delay R', { style: { grow: .3 } }), this.delayRightSlider, this.delayRightInput], { style: { spacing: 5 } }),\n      this.createHozLayout([this.createLabel('Feedback', { style: { grow: .3 } }), this.feedbackSlider, this.feedbackInput], { style: { spacing: 5 } }),\n      this.createHozLayout([this.createLabel('Wet', { style: { grow: .3 } }), this.wetSlider, this.wetInput], { style: { spacing: 5 } }),\n      this.createHozLayout([this.createLabel('Bypass ?', { style: { grow: .3 } }), this.bypassToggle], { style: { spacing: 5 } })\n    ]);\n  }\n  handleAudioConnections() {\n    this.outputs[0].on('connect', (_inst, connector) => this.outputs[0].ref.connect(connector.end.ref));\n    this.outputs[0].on('disconnect', (_inst, _connector, _start, end) => this.outputs[0].ref.disconnect(end.ref));\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { FlowConnectState } from \"../../flow-connect\";\nimport { Log } from \"../../utils/logger\";\nimport { Node } from '../../core/node';\nimport * as sourceui from '../../ui/source';\nimport { Toggle } from \"../../ui/index\";\n\nexport class Source extends Node {\n  fileInput: sourceui.Source;\n  loopToggle: Toggle;\n  source: AudioBufferSourceNode;\n\n  volumeGainNode: GainNode;\n  proxyParamSourceNode: AudioWorkletNode;\n\n  static DefaultState: any = { buffer: null, loop: true, prevChannelCount: -1 };\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'Audio Source', options.position || new Vector(50, 50), options.width || 200,\n      [\n        { name: 'array-buffer', dataType: 'event' }, { name: 'gain', dataType: 'audioparam' },\n        { name: 'detune', dataType: 'audioparam' }, { name: 'playback-rate', dataType: 'audioparam' }\n      ],\n      [{ name: 'out', dataType: 'audio' }, { name: 'ended', dataType: 'event' }],\n      {\n        state: options.state ? { ...Source.DefaultState, ...options.state } : Source.DefaultState,\n        style: options.style || { rowHeight: 10, spacing: 15 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.volumeGainNode = flow.flowConnect.audioContext.createGain();\n    this.proxyParamSourceNode = new AudioWorkletNode(\n      flow.flowConnect.audioContext,\n      'proxy-param-for-source',\n      { numberOfOutputs: 2, parameterData: { detune: 0, playbackRate: 1 } }\n    );\n\n    this.inputs[1].ref = this.volumeGainNode.gain;\n    this.inputs[2].ref = (this.proxyParamSourceNode.parameters as Map<string, AudioParam>).get('detune');\n    this.inputs[3].ref = (this.proxyParamSourceNode.parameters as Map<string, AudioParam>).get('playbackRate');\n    this.inputs[1].on('data', (_, data) => typeof data === 'number' && (this.inputs[1].ref.value = data));\n    this.inputs[2].on('data', (_, data) => typeof data === 'number' && (this.inputs[2].ref.value = data));\n    this.inputs[3].on('data', (_, data) => typeof data === 'number' && (this.inputs[3].ref.value = data));\n    this.outputs[0].ref = this.volumeGainNode;\n\n    this.setupUI();\n\n    this.loopToggle.on('change', () => {\n      if (this.state.loop) {\n        this.stopSource();\n        this.playSource();\n      } else this.source && (this.source.loop = this.state.loop);\n    });\n    this.inputs[0].on('event', (_, data) => {\n      if (!(data instanceof ArrayBuffer)) {\n        Log.error('Data received on Audio Source Node is not of type ArrayBuffer');\n        return;\n      }\n      this.processArrayBuffer(data);\n    });\n    this.fileInput.on('change', (_inst, _oldVal: File, newVal: File) => this.processFile(newVal));\n    this.fileInput.on('upload', (_inst, _oldVal: File, newVal: File) => this.processFile(newVal));\n\n    flow.flowConnect.on('start', () => this.playSource());\n    flow.flowConnect.on('stop', () => this.stopSource());\n\n    this.handleAudioConnections();\n  }\n\n  propagateChannelChange(newNoOfChannels: number) {\n    this.flow.executionGraph.propagate(this, (currNode: Node) => {\n      currNode.call('channel-count-change', newNoOfChannels);\n    });\n  }\n  async processFile(file: File) {\n    let cached = this.flow.flowConnect.arrayBufferCache.get(file.name + file.type);\n    if (!cached) {\n      cached = await file.arrayBuffer();\n      this.flow.flowConnect.arrayBufferCache.set(file.name + file.type, cached);\n    }\n    this.processArrayBuffer(cached);\n  }\n  async processArrayBuffer(arrayBuffer: ArrayBuffer) {\n    let cached = this.flow.flowConnect.audioBufferCache.get(arrayBuffer);\n    if (!cached) {\n      cached = await this.flow.flowConnect.audioContext.decodeAudioData(arrayBuffer);\n      this.flow.flowConnect.audioBufferCache.set(arrayBuffer, cached);\n\n      // If no. of channels has been changed, start an event propagation that will notify\n      // every node that has a direct/indirect connection in the graph from this node\n      if (this.state.prevChannelCount < 0 || this.state.prevChannelCount !== cached.numberOfChannels) {\n        this.propagateChannelChange(cached.numberOfChannels);\n      }\n      this.state.prevChannelCount = cached.numberOfChannels;\n    }\n    this.state.buffer = cached;\n\n    this.stopSource();\n    this.playSource();\n  }\n  playSource() {\n    if (this.flow.flowConnect.state === FlowConnectState.Stopped || !this.state.buffer) return;\n\n    let audioSource = new AudioBufferSourceNode(this.flow.flowConnect.audioContext);\n    audioSource.buffer = this.state.buffer;\n    audioSource.loop = this.state.loop;\n    this.source = audioSource;\n\n    this.proxyParamSourceNode.connect(audioSource.detune, 0);\n    this.proxyParamSourceNode.connect(audioSource.playbackRate, 1);\n    audioSource.connect(this.outputs[0].ref);\n    audioSource.start();\n  }\n  stopSource() {\n    if (this.source) {\n      this.source.stop();\n      this.source = null;\n    }\n  }\n  setupUI() {\n    this.fileInput = this.createSource({ input: true, output: true, height: 25, style: { grow: .7 } });\n    this.loopToggle = this.createToggle({ propName: 'loop', input: true, output: true, height: 10, style: { grow: .2 } });\n\n    this.ui.append([\n      this.createHozLayout([this.createLabel('File', { style: { grow: .3 } }), this.fileInput], { style: { spacing: 5 } }),\n      this.createHozLayout([this.createLabel('Loop ?'), this.loopToggle], { style: { spacing: 5 } })\n    ]);\n  }\n  handleAudioConnections() {\n    // Handle actual webaudio node stuff\n    this.outputs[0].on('connect', (_, connector) => {\n      this.state.buffer && this.propagateChannelChange(this.state.buffer.numberOfChannels);\n      this.outputs[0].ref.connect(connector.end.ref);\n    });\n    this.outputs[0].on('disconnect', (_inst, _connector, _start, end) => {\n      this.outputs[0].ref.disconnect(end.ref);\n    });\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { clamp, denormalize } from \"../../utils/utils\";\nimport { Node } from '../../core/node';\nimport { Toggle, Slider2D, Slider, Input, InputType } from \"../../ui/index\";\n\nexport class SpatialPanner extends Node {\n  panSlider2D: Slider2D;\n  zSlider: Slider;\n  zInput: Input;\n  bypassToggle: Toggle;\n\n  panner: PannerNode;\n  inGain: GainNode;\n  outGain: GainNode;\n\n  posX: number;\n  posY: number;\n  posZ: number;\n  orientationX: number = 0.0;\n  orientationY: number = 0.0;\n  orientationZ: number = -1.0;\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(\n      flow, options.name || '3D Spatial Panner',\n      options.position || new Vector(50, 50),\n      options.width || 200,\n      [{ name: 'in', dataType: 'audio' }],\n      [{ name: 'out', dataType: 'audio' }],\n      {\n        state: options.state ?\n          { value: new Vector(.5, .5), z: -1, bypass: false, ...options.state }\n          : { value: new Vector(.5, .5), z: -1, bypass: false },\n        style: options.style || { rowHeight: 10, spacing: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    )\n\n    this.posX = this.flow.flowConnect.audioContext.listener.positionX.value;\n    this.posY = this.flow.flowConnect.audioContext.listener.positionY.value;\n    this.posZ = -1;\n\n    this.inGain = flow.flowConnect.audioContext.createGain();\n    this.outGain = flow.flowConnect.audioContext.createGain();\n    this.panner = new PannerNode(flow.flowConnect.audioContext, {\n      panningModel: 'HRTF',\n      distanceModel: 'linear',\n      positionX: this.posX,\n      positionY: this.posY,\n      positionZ: this.posZ,\n      orientationX: this.orientationX,\n      orientationY: this.orientationY,\n      orientationZ: this.orientationZ\n    });\n\n    this.inputs[0].ref = this.inGain;\n    this.outputs[0].ref = this.outGain;\n\n    this.setBypass();\n\n    this.setupUI();\n\n    this.watch('value', (_oldVal, newVal) => {\n      let x = denormalize(newVal.x, -1, 1);\n      let y = denormalize(newVal.y, -1, 1);\n      this.panner.positionX.value = x;\n      this.panner.positionY.value = y;\n    });\n    this.watch('z', (_oldVal, newVal) => {\n      if (newVal < -10000 || newVal > 10000) this.state.z = clamp(parseInt(newVal), -10000, 10000);\n      this.panner.positionZ.value = this.state.z;\n    });\n    this.watch('bypass', this.setBypass.bind(this));\n\n    this.handleAudioConnections();\n  }\n\n  setBypass() {\n    if (!this.state.bypass) {\n      this.inGain.disconnect();\n      this.inGain.connect(this.panner);\n      this.panner.connect(this.outGain);\n    } else {\n      this.panner.disconnect();\n      this.inGain.disconnect();\n      this.inGain.connect(this.outGain);\n    }\n  }\n\n  setupUI() {\n    this.panSlider2D = this.createSlider2D({ propName: 'value', height: this.width - this.style.padding * 2 });\n    this.zSlider = this.createSlider(-10000, 10000, { height: 10, propName: 'z', style: { grow: .6 } });\n    this.zInput = this.createInput({ propName: 'z', height: 20, style: { type: InputType.Number, grow: .3, precision: 0 } });\n    this.bypassToggle = this.createToggle({ propName: 'bypass', style: { grow: .15 } });\n    this.ui.append([\n      this.panSlider2D,\n      this.createHozLayout([this.createLabel('Z', { style: { grow: .1 } }), this.zSlider, this.zInput], { style: { spacing: 5 } }),\n      this.createHozLayout([this.createLabel('Bypass ?', { style: { grow: .3 } }), this.bypassToggle], { style: { spacing: 5 } })\n    ]);\n  }\n  handleAudioConnections() {\n    this.outputs[0].on('connect', (_inst, connector) => this.outputs[0].ref.connect(connector.end.ref));\n    this.outputs[0].on('disconnect', (_inst, _connector, _start, end) => this.outputs[0].ref.disconnect(end.ref));\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { clamp, denormalize, normalize } from \"../../utils/utils\";\nimport { Node } from '../../core/node';\nimport { Align } from \"../../common/enums\";\nimport { Color } from \"../../core/color\";\nimport { Slider, CanvasType, Display, Label, Select } from \"../../ui/index\";\n\nexport class SpectrogramAnalyser extends Node {\n  colorScaleSelect: Select;\n  fftSizeSlider: Slider;\n  fftSizeLabel: Label;\n  display: Display;\n\n  analyser: AnalyserNode;\n\n  static DefaultState = { fftSize: 11, colorScale: 'Heated Metal' };\n\n  colorScales = ['Heated Metal', 'Monochrome', 'Inverted Monochrome', 'Spectrum'];\n  fftSizes = [32, 64, 128, 256, 512, 1024, 2048, 4096, 8192, 16384, 32768];\n  timerId: number;\n\n  colorScaleToInterp: Record<string, Function> = {}\n  currInterpolator: Function;\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(\n      flow, options.name || 'Spectrogram Analyser',\n      options.position || new Vector(50, 50),\n      options.width || 350,\n      [{ name: 'in', dataType: 'audio' }], [{ name: 'out', dataType: 'audio' }],\n      {\n        style: options.style || { rowHeight: 10, spacing: 10 },\n        terminalStyle: options.terminalStyle || {},\n        state: options.state ? { ...SpectrogramAnalyser.DefaultState, ...options.state } : SpectrogramAnalyser.DefaultState\n      }\n    )\n\n    this.analyser = flow.flowConnect.audioContext.createAnalyser();\n    this.analyser.fftSize = this.getFFTSize();\n    this.inputs[0].ref = this.outputs[0].ref = this.analyser;\n\n    this.setupUI();\n\n    this.watch('fftSize', (_oldVal, newVal) => {\n      if (newVal < 5 || newVal > 15) this.state.fftSize = clamp(Math.round(newVal), 5, 15);\n      let actualFFTSize = this.getFFTSize();\n      this.fftSizeLabel.text = actualFFTSize;\n      this.analyser.fftSize = actualFFTSize;\n    });\n    this.watch('colorScale', (_oldVal, newVal) => {\n      if (!this.colorScales.includes(newVal)) this.state.colorScale = this.colorScales[0];\n      this.currInterpolator = this.colorScaleToInterp[this.state.colorScale];\n    });\n\n    this.handleAudioConnections();\n\n    this.colorScaleToInterp['Heated Metal'] = Color.scale([\n      [0, 0, 0, 1], [160, 32, 240, 1], [255, 0, 0, 1], [255, 165, 0, 1], [255, 255, 0, 1], [255, 255, 255, 1]\n    ]);\n    this.colorScaleToInterp['Monochrome'] = Color.scale([\n      [0, 0, 0, 1], [255, 255, 255, 1]\n    ]);\n    this.colorScaleToInterp['Inverted Monochrome'] = Color.scale([\n      [255, 255, 255, 1], [0, 0, 0, 1]\n    ]);\n    this.colorScaleToInterp['Spectrum'] = Color.scale([\n      [135, 206, 235, 1], [0, 255, 0, 1], [255, 255, 0, 1], [255, 165, 0, 1], [255, 0, 0, 1]\n    ]);\n\n    this.currInterpolator = this.colorScaleToInterp['Heated Metal'];\n\n    this.display.displayConfigs[0].shouldRender = false;\n    this.flow.flowConnect.on('start', () => {\n      this.display.displayConfigs[0].shouldRender = true;\n    });\n    this.flow.flowConnect.on('stop', () => {\n      this.display.displayConfigs[0].shouldRender = false;\n    });\n  }\n\n  getFFTSize() {\n    return this.fftSizes[clamp(Math.round(this.state.fftSize), 5, 15) - 5];\n  }\n\n  setupUI() {\n    this.fftSizeSlider = this.createSlider(5, 15, { height: 10, propName: 'fftSize', style: { grow: .6, precision: 0 } });\n    this.fftSizeLabel = this.createLabel(this.getFFTSize(), { height: 20, style: { grow: .2, align: Align.Right } });\n    this.display = this.createDisplay(200, [{\n      auto: true,\n      canvasType: CanvasType.HTMLCanvasElement,\n      renderer: (context, width, height) => this.customRenderer(context, width, height)\n    }]);\n    this.colorScaleSelect = this.createSelect(this.colorScales, { propName: 'colorScale', height: 15, style: { grow: .6 } });\n\n    this.ui.append([\n      this.display,\n      this.createHozLayout([\n        this.createLabel('FFT Size', { style: { grow: .2 } }), this.fftSizeSlider, this.fftSizeLabel\n      ], { style: { spacing: 5 } }),\n      this.createHozLayout([this.createLabel('Color Scale', { style: { grow: .2 } }), this.colorScaleSelect], { style: { spacing: 5 } })\n    ]);\n  }\n\n  customRenderer(context: OffscreenCanvasRenderingContext2D | CanvasRenderingContext2D, width: number, height: number): boolean {\n    let value,\n      i = 0,\n      frequencyBinCount = this.analyser.frequencyBinCount,\n      frequencyData = new Uint8Array(frequencyBinCount),\n      barHeight = height / frequencyBinCount;\n\n    this.analyser.getByteFrequencyData(frequencyData);\n\n    for (; i < frequencyBinCount; i++) {\n      value = frequencyData[i];\n      context.fillStyle = this.currInterpolator(value / 256);\n      context.fillRect(width - 1, denormalize(1 - normalize(i, 0, frequencyBinCount), 0, height), 1, barHeight);\n    }\n\n    context.globalCompositeOperation = \"copy\";\n    context.drawImage(context.canvas, -1, 0);\n    context.globalCompositeOperation = \"source-over\";\n\n    return true;\n  }\n\n  handleAudioConnections() {\n    this.outputs[0].on('connect', (_inst, connector) => this.outputs[0].ref.connect(connector.end.ref));\n    this.outputs[0].on('disconnect', (_inst, _connector, _start, end) => this.outputs[0].ref.disconnect(end.ref));\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { clamp } from \"../../utils/utils\";\nimport { Node } from '../../core/node';\nimport { InputType, Input, Slider, Toggle } from \"../../ui/index\";\n\nexport class StereoPanner extends Node {\n  panSlider: Slider;\n  panInput: Input;\n  bypassToggle: Toggle;\n  panner: StereoPannerNode;\n  inGain: GainNode;\n  outGain: GainNode;\n\n  static DefaultState = { pan: 0, bypass: false };\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(\n      flow, options.name || 'Stereo Panner',\n      options.position || new Vector(50, 50),\n      options.width || 200,\n      [{ name: 'in', dataType: 'audio' }],\n      [{ name: 'out', dataType: 'audio' }],\n      {\n        style: options.style || { rowHeight: 10, spacing: 10 },\n        terminalStyle: options.terminalStyle || {},\n        state: options.state ? { ...StereoPanner.DefaultState, ...options.state } : StereoPanner.DefaultState\n      }\n    )\n\n    this.inGain = flow.flowConnect.audioContext.createGain();\n    this.outGain = flow.flowConnect.audioContext.createGain();\n    this.panner = new StereoPannerNode(flow.flowConnect.audioContext);\n    this.panner.pan.value = this.state.pan;\n    this.inputs[0].ref = this.inGain;\n    this.outputs[0].ref = this.outGain;\n\n    this.setBypass();\n\n    this.setupUI();\n\n    this.watch('pan', (_oldVal, newVal) => {\n      if (newVal < -1 || newVal > 1) this.state.pan = clamp(newVal, -1, 1);\n      this.panner.pan.value = this.state.pan;\n    });\n    this.watch('bypass', this.setBypass.bind(this));\n\n    this.handleAudioConnections();\n  }\n\n  setBypass() {\n    if (!this.state.bypass) {\n      this.inGain.disconnect();\n      this.inGain.connect(this.panner);\n      this.panner.connect(this.outGain);\n    } else {\n      this.panner.disconnect();\n      this.inGain.disconnect();\n      this.inGain.connect(this.outGain);\n    }\n  }\n\n  setupUI() {\n    this.panSlider = this.createSlider(-1, 1, { height: 10, propName: 'pan', style: { grow: .5 } });\n    this.panInput = this.createInput({ propName: 'pan', height: 20, style: { type: InputType.Number, grow: .2, precision: 2 } });\n    this.bypassToggle = this.createToggle({ propName: 'bypass', style: { grow: .15 } });\n    this.ui.append([\n      this.createHozLayout([this.createLabel('Pan', { style: { grow: .3 } }), this.panSlider, this.panInput], { style: { spacing: 5 } }),\n      this.createHozLayout([this.createLabel('Bypass ?', { style: { grow: .3 } }), this.bypassToggle], { style: { spacing: 5 } })\n    ]);\n  }\n  handleAudioConnections() {\n    this.outputs[0].on('connect', (_inst, connector) => this.outputs[0].ref.connect(connector.end.ref));\n    this.outputs[0].on('disconnect', (_inst, _connector, _start, end) => this.outputs[0].ref.disconnect(end.ref));\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { clamp } from \"../../utils/utils\";\nimport { Node } from '../../core/node';\nimport { InputType, Input, Slider, Toggle } from \"../../ui/index\";\nlet Tuna = require('../../lib/tuna.js');\n\nexport class TremoloEffect extends Node {\n  intensitySlider: Slider;\n  intensityInput: Input;\n  stereoPhaseSlider: Slider;\n  stereoPhaseInput: Input;\n  rateSlider: Slider;\n  rateInput: Input;\n  bypassToggle: Toggle;\n  tremolo: any;\n\n  static DefaultState = { intensity: 0.3, stereoPhase: 0, rate: 5, bypass: false };\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(\n      flow, options.name || 'Tremolo Effect',\n      options.position || new Vector(50, 50),\n      options.width || 230,\n      [{ name: 'in', dataType: 'audio' }],\n      [{ name: 'out', dataType: 'audio' }],\n      {\n        style: options.style || { rowHeight: 10, spacing: 10 },\n        terminalStyle: options.terminalStyle || {},\n        state: options.state ? { ...TremoloEffect.DefaultState, ...options.state } : TremoloEffect.DefaultState\n      }\n    )\n\n    if (!(window as any).__tuna__) (window as any).__tuna__ = new Tuna(flow.flowConnect.audioContext);\n\n    this.tremolo = new (window as any).__tuna__.Tremolo();\n    this.inputs[0].ref = this.outputs[0].ref = this.tremolo;\n\n    Object.assign(this.tremolo, {\n      intensity: this.state.intensity,\n      stereoPhase: this.state.stereoPhase,\n      rate: this.state.rate,\n    });\n\n    this.setupUI();\n\n    this.watch('intensity', (_oldVal, newVal) => {\n      if (newVal < 0 || newVal > 1) this.state.intensity = clamp(newVal, 0, 1);\n      this.tremolo.intensity = this.state.intensity;\n    });\n    this.watch('stereoPhase', (_oldVal, newVal) => {\n      if (newVal < 0 || newVal > 180) this.state.stereoPhase = clamp(newVal, 0, 180);\n      this.tremolo.stereoPhase = this.state.stereoPhase;\n    });\n    this.watch('rate', (_oldVal, newVal) => {\n      if (newVal < 0.1 || newVal > 11) this.state.rate = clamp(newVal, 0.1, 11);\n      this.tremolo.rate = this.state.rate;\n    });\n    this.watch('bypass', (_oldVal, newVal) => this.tremolo.bypass = newVal);\n\n    this.handleAudioConnections();\n  }\n\n  setupUI() {\n    this.intensitySlider = this.createSlider(0, 1, { height: 10, propName: 'intensity', style: { grow: .5 } });\n    this.intensityInput = this.createInput({ propName: 'intensity', height: 20, style: { type: InputType.Number, grow: .2, precision: 4 } });\n    this.stereoPhaseSlider = this.createSlider(0, 180, { height: 10, propName: 'stereoPhase', style: { grow: .5 } });\n    this.stereoPhaseInput = this.createInput({ propName: 'stereoPhase', height: 20, style: { type: InputType.Number, grow: .2, precision: 2 } });\n    this.rateSlider = this.createSlider(0.1, 11, { height: 10, propName: 'rate', style: { grow: .5 } });\n    this.rateInput = this.createInput({ propName: 'rate', height: 20, style: { type: InputType.Number, grow: .2, precision: 2 } });\n    this.bypassToggle = this.createToggle({ propName: 'bypass', style: { grow: .1 } });\n    this.ui.append([\n      this.createHozLayout([this.createLabel('Intensity', { style: { grow: .3 } }), this.intensitySlider, this.intensityInput], { style: { spacing: 5 } }),\n      this.createHozLayout([this.createLabel('Stereo Phase', { style: { grow: .3 } }), this.stereoPhaseSlider, this.stereoPhaseInput], { style: { spacing: 5 } }),\n      this.createHozLayout([this.createLabel('Rate', { style: { grow: .3 } }), this.rateSlider, this.rateInput], { style: { spacing: 5 } }),\n      this.createHozLayout([this.createLabel('Bypass ?', { style: { grow: .3 } }), this.bypassToggle], { style: { spacing: 5 } })\n    ]);\n  }\n  handleAudioConnections() {\n    this.outputs[0].on('connect', (_inst, connector) => this.outputs[0].ref.connect(connector.end.ref));\n    this.outputs[0].on('disconnect', (_inst, _connector, _start, end) => this.outputs[0].ref.disconnect(end.ref));\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { clamp } from \"../../utils/utils\";\nimport { Node } from '../../core/node';\nimport { Align } from \"../../common/enums\";\nimport { Slider, Display, Label } from \"../../ui/index\";\n\nexport class WaveformAnalyser extends Node {\n  fftSizeSlider: Slider;\n  fftSizeLabel: Label;\n  display: Display;\n\n  analyser: AnalyserNode;\n\n  static DefaultState = { fftSize: 11 };\n\n  fftSizes = [32, 64, 128, 256, 512, 1024, 2048, 4096, 8192, 16384, 32768];\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(\n      flow, options.name || 'Waveform Analyser',\n      options.position || new Vector(50, 50),\n      options.width || 350,\n      [{ name: 'in', dataType: 'audio' }], [{ name: 'out', dataType: 'audio' }],\n      {\n        style: options.style || { rowHeight: 10, spacing: 10 },\n        terminalStyle: options.terminalStyle || {},\n        state: options.state ? { ...WaveformAnalyser.DefaultState, ...options.state } : WaveformAnalyser.DefaultState\n      }\n    )\n\n    this.analyser = flow.flowConnect.audioContext.createAnalyser();\n    this.analyser.fftSize = this.getFFTSize();\n    this.inputs[0].ref = this.outputs[0].ref = this.analyser;\n\n    this.setupUI();\n\n    this.watch('fftSize', (_oldVal, newVal) => {\n      if (newVal < 5 || newVal > 15) this.state.fftSize = clamp(Math.round(newVal), 5, 15);\n      let actualFFTSize = this.getFFTSize();\n      this.fftSizeLabel.text = actualFFTSize;\n      this.analyser.fftSize = actualFFTSize;\n    });\n\n    this.handleAudioConnections();\n  }\n\n  getFFTSize() {\n    return this.fftSizes[clamp(Math.round(this.state.fftSize), 5, 15) - 5];\n  }\n\n  setupUI() {\n    this.fftSizeSlider = this.createSlider(5, 15, { height: 10, propName: 'fftSize', style: { grow: .6, precision: 0 } });\n    this.fftSizeLabel = this.createLabel(this.getFFTSize(), { height: 20, style: { grow: .2, align: Align.Right } });\n    this.display = this.createDisplay(200, [{\n      auto: true,\n      renderer: (...args) => this.customRenderer(args[0], args[1], args[2])\n    }]);\n\n    this.ui.append([\n      this.display,\n      this.createHozLayout([\n        this.createLabel('FFT Size', { style: { grow: .2 } }), this.fftSizeSlider, this.fftSizeLabel\n      ], { style: { spacing: 5 } })\n    ]);\n  }\n\n  customRenderer(context: OffscreenCanvasRenderingContext2D | CanvasRenderingContext2D, width: number, height: number): boolean {\n    let value, percent, offset, barWidth,\n      frequencyBinCount = this.analyser.frequencyBinCount,\n      waveformData = new Uint8Array(frequencyBinCount),\n      orgHeight = height,\n      i = 1;\n\n    this.analyser.getByteTimeDomainData(waveformData);\n\n    value = waveformData[0];\n    percent = value / 256;\n    height = orgHeight * percent;\n    offset = orgHeight - height - 1;\n    barWidth = width / frequencyBinCount;\n\n    context.strokeStyle = \"#000\";\n    context.beginPath();\n    context.moveTo(0, offset);\n    for (; i < frequencyBinCount; i++) {\n      value = waveformData[i];\n      percent = value / 256;\n      height = orgHeight * percent;\n      offset = orgHeight - height - 1;\n      barWidth = width / frequencyBinCount;\n      context.lineTo(i * barWidth, offset);\n    }\n    context.stroke();\n\n    return true;\n  }\n\n  handleAudioConnections() {\n    this.outputs[0].on('connect', (_inst, connector) => this.outputs[0].ref.connect(connector.end.ref));\n    this.outputs[0].on('disconnect', (_inst, _connector, _start, end) => this.outputs[0].ref.disconnect(end.ref));\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { Node } from \"../../core/node\";\n\nexport class ArrayIndex extends Node {\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'Array Index', options.position || new Vector(50, 50), options.width || 120,\n      [{ name: 'data', dataType: 'array' }, { name: 'index', dataType: 'number' }],\n      [{ name: 'value', dataType: 'any' }],\n      {\n        state: options.state ? { ...options.state } : {},\n        style: options.style || { rowHeight: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.on('process', (_, inputs) => {\n      if (!inputs || !inputs[0] || typeof inputs[1] !== 'number') return;\n      this.setOutputs(0, inputs[0][inputs[1]]);\n    });\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { Node } from \"../../core/node\";\nimport { Align } from \"../../common/enums\";\nimport { InputType, Input, Toggle, HorizontalLayout, Stack } from \"../../ui/index\";\n\nexport class ArraySource extends Node {\n  arrayInput: Input;\n  minInput: Input;\n  maxInput: Input;\n  numberToggle: Toggle;\n  rangeToggle: Toggle;\n  stepInput: Input;\n  rangeLayout: HorizontalLayout;\n  rangeStack: Stack\n\n  static DefaultState: any = { number: true, range: false, min: 0, max: 100, step: 0.1, value: [] };\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'Array Source', options.position || new Vector(50, 50), options.width || 180, [],\n      [{ name: 'array', dataType: 'array' }],\n      {\n        state: options.state ? { ...ArraySource.DefaultState, ...options.state } : ArraySource.DefaultState,\n        style: options.style || { rowHeight: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n\n    this.setupUI();\n\n    this.minInput.on('change', () => this.process());\n    this.maxInput.on('change', () => this.process());\n    this.numberToggle.on('change', () => this.process());\n    this.arrayInput.on('change', () => this.process());\n    this.stepInput.on('change', () => this.process());\n    this.on('process', () => this.process());\n\n    this.watch('number', () => this.numberToggled());\n    this.watch('range', () => this.rangeToggled());\n\n    this.numberToggled();\n    this.rangeToggled();\n  }\n\n  numberToggled() {\n    this.rangeLayout.visible = this.state.number;\n    if (!this.state.number) this.state.range = false;\n  }\n  rangeToggled() {\n    if (this.state.number && this.state.range) {\n      this.arrayInput.visible = false;\n      this.rangeStack.visible = true;\n    } else {\n      this.arrayInput.visible = true;\n      this.rangeStack.visible = false;\n    }\n  }\n  process() {\n    if (this.state.range) {\n      let values = [];\n      for (let i = this.state.min; i <= this.state.max; i += this.state.step) values.push(i);\n      this.state.value = values;\n    } else {\n      if (!this.arrayInput.inputEl.validity.patternMismatch) {\n        if (!this.arrayInput.value || this.arrayInput.value === '') return;\n        let value: any[] = (this.arrayInput.value as string).split(',');\n        if (this.state.number) value = value.map(item => Number(item.trim()));\n        this.state.value = value;\n      }\n    }\n    this.setOutputs(0, this.state.value);\n  }\n  setupUI() {\n    this.numberToggle = this.createToggle({ propName: 'number', input: true, output: true, height: 10, style: { grow: .2 } });\n    this.rangeToggle = this.createToggle({ propName: 'range', input: true, output: true, height: 10, style: { grow: .2 } });\n    this.rangeLayout = this.createHozLayout([this.createLabel('Range ?', { style: { grow: .4 } }), this.rangeToggle], { style: { spacing: 10 } });\n    this.minInput = this.createInput({\n      propName: 'min', height: 20, style: { type: InputType.Number, grow: .4, step: 'any' }\n    });\n    this.maxInput = this.createInput({\n      propName: 'max', height: 20, style: { type: InputType.Number, grow: .4, step: 'any' }\n    });\n    let rangeInputLayout = this.createHozLayout([\n      this.minInput, this.createLabel('to', { style: { grow: .2, align: Align.Center } }), this.maxInput\n    ], { style: { spacing: 5 } });\n    this.stepInput = this.createInput({ propName: 'step', height: 20, style: { type: InputType.Number, step: 'any', grow: .6 } });\n    this.rangeStack = this.createStack({\n      childs: [\n        rangeInputLayout,\n        this.createHozLayout([\n          this.createLabel('Step', { style: { grow: .4 } }),\n          this.stepInput\n        ], { style: { spacing: 5 } })\n      ], style: { spacing: 10 }\n    });\n    this.arrayInput = this.createInput({ value: '', height: 20, style: { pattern: '^[^,]+(\\s*,\\s*[^,]+)*$' } });\n    this.ui.append([\n      this.createHozLayout([this.createLabel('Numbers ?', { style: { grow: .4 } }), this.numberToggle], { style: { spacing: 10 } }),\n      this.rangeLayout,\n      this.rangeStack,\n      this.arrayInput\n    ]);\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { Node } from \"../../core/node\";\nimport { Toggle } from \"../../ui/index\";\n\nexport class BooleanSource extends Node {\n  toggle: Toggle;\n\n  static DefaultState = { value: false };\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'Boolean Source', options.position || new Vector(50, 50), options.width || 130, [],\n      [{ name: 'value', dataType: 'boolean' }],\n      {\n        state: options.state ? { ...BooleanSource.DefaultState, ...options.state } : BooleanSource.DefaultState,\n        style: options.style || { rowHeight: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.setupUI();\n\n    this.toggle.on('change', () => this.process());\n    this.on('process', () => this.process());\n  }\n\n\n  process() { this.setOutputs(0, this.state.value); }\n  setupUI() {\n    this.toggle = this.createToggle({ propName: 'value', input: true, output: true, height: 10, style: { grow: .4 } });\n    this.ui.append(this.createHozLayout([\n      this.createLabel('Value'),\n      this.toggle\n    ], { style: { spacing: 20 } }));\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { Node } from \"../../core/node\";\nimport { InputType, Input } from \"../../ui/index\";\n\nexport class Buffer extends Node {\n  sizeInput: Input;\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'Buffer', options.position || new Vector(50, 50), options.width || 150,\n      [{ name: 'data', dataType: 'any' }],\n      [{ name: 'buffer', dataType: 'array' }],\n      {\n        state: options.state ? { buffer: [], size: 10, ...options.state } : { buffer: [], size: 10 },\n        style: options.style || { rowHeight: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.setupUI();\n\n    this.sizeInput.on('change', () => this.process(this.getInputs()));\n    this.on('process', (_, inputs) => this.process(inputs));\n  }\n\n  process(inputs: any[]) {\n    if (inputs[0] === null || typeof inputs[0] === 'undefined') return;\n    if (this.state.size <= 0) this.state.size = 1;\n    if (this.state.buffer.length === this.state.size) {\n      this.state.buffer.shift();\n    } else if (this.state.buffer.length > this.state.size) {\n      this.state.buffer.splice(0, this.state.buffer.length - this.state.size + 1);\n    }\n    this.state.buffer.push(inputs[0]);\n    this.setOutputs('buffer', this.state.buffer);\n  }\n  setupUI() {\n    this.sizeInput = this.createInput({ propName: 'size', input: true, output: true, height: 20, style: { type: InputType.Number, grow: .7 } });\n    this.ui.append(this.createHozLayout([\n      this.createLabel('Size', { style: { grow: .3 } }),\n      this.sizeInput\n    ], { style: { spacing: 20 } }));\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { Node } from \"../../core/node\";\nimport { Select } from \"../../ui/index\";\n\nexport class Compare extends Node {\n  select: Select\n\n  static DefaultState = { value: '==' };\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'Compare', options.position || new Vector(50, 50), options.width || 150,\n      [{ name: 'x', dataType: 'any' }, { name: 'y', dataType: 'any' }],\n      [{ name: 'result', dataType: 'boolean' }],\n      {\n        state: options.state ? { ...Compare.DefaultState, ...options.state } : Compare.DefaultState,\n        style: options.style || { rowHeight: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.setupUI();\n\n    this.select.on('change', () => this.process(this.getInputs()));\n    this.on('process', (_, inputs) => this.process(inputs));\n  }\n\n  process(inputs: any[]) {\n    if (inputs[0] === null || typeof inputs[0] === 'undefined' || inputs[1] === null || typeof inputs[1] === 'undefined') return;\n    let res;\n    switch (this.state.value) {\n      case '==': { res = inputs[0] == inputs[1]; break; }\n      case '===': { res = inputs[0] === inputs[1]; break; }\n      case '!=': { res = inputs[0] != inputs[1]; break; }\n      case '!==': { res = inputs[0] !== inputs[1]; break; }\n      case '<': { res = inputs[0] < inputs[1]; break; }\n      case '<=': { res = inputs[0] <= inputs[1]; break; }\n      case '>': { res = inputs[0] > inputs[1]; break; }\n      case '>=': { res = inputs[0] >= inputs[1]; break; }\n      case '&&': { res = inputs[0] && inputs[1]; break; }\n      case '||': { res = inputs[0] || inputs[1]; break; }\n      default: res = false;\n    }\n    this.setOutputs(0, res);\n  }\n  setupUI() {\n    let select = this.createSelect(\n      ['==', '===', '!=', '!==', '<', '<=', '>', '>=', '&&', '||'],\n      { propName: 'value', input: true, output: true, height: 15, style: { fontSize: '14px' } }\n    );\n    this.ui.append(select);\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { List, ListNode } from \"../../utils/linked-list\";\nimport { Node } from \"../../core/node\";\nimport { InputType } from \"../../ui/index\";\n\ninterface BufferedEvent {\n  data: any;\n  timeoutId: number,\n  start: number,\n  remaining?: number\n}\n\nexport class Delay extends Node {\n\n  static DefaultState: any = { delay: 0, eventQueue: null };\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'Delay', options.position || new Vector(50, 50), options.width || 130,\n      [{ name: 'event', dataType: 'event' }],\n      [{ name: 'trigger', dataType: 'event' }],\n      {\n        state: options.state ? { ...Delay.DefaultState, ...options.state } : Delay.DefaultState,\n        style: options.style || { rowHeight: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.setupUI();\n\n    this.state.eventQueue = new List<BufferedEvent>((a, b) => a.timeoutId - b.timeoutId);\n    this.state.eventQueue.on('removefirst', () => {\n      while (this.state.eventQueue.head && (performance.now() - this.state.eventQueue.head.data.start) >= this.state.delay) {\n        let bufferedEvent = this.state.eventQueue.removeFirst(false);\n        this.outputs[0].emit(bufferedEvent.data);\n      }\n    });\n    this.inputs[0].on('event', (_, data) => {\n      let eventNode = new ListNode<BufferedEvent>();\n      eventNode.data = {\n        data,\n        timeoutId: window.setTimeout(() => this.triggerEvent(eventNode), this.state.delay),\n        start: performance.now()\n      }\n      this.state.eventQueue.append(eventNode);\n    });\n    flow.on('start', () => {\n      this.state.eventQueue.forEach((eventNode: ListNode<BufferedEvent>) => {\n        eventNode.data.start = performance.now() + eventNode.data.remaining - this.state.delay;\n        eventNode.data.timeoutId = window.setTimeout(() => this.triggerEvent(eventNode), eventNode.data.remaining);\n      })\n    });\n    flow.on('stop', () => {\n      this.state.eventQueue.forEach((eventNode: ListNode<BufferedEvent>) => {\n        clearTimeout(eventNode.data.timeoutId);\n        eventNode.data.remaining = performance.now() - eventNode.data.start;\n      });\n    });\n  }\n\n  triggerEvent(eventNode: ListNode<BufferedEvent>) {\n    if (eventNode === this.state.eventQueue.head) {\n      let bufferedEvent = this.state.eventQueue.removeFirst();\n      this.outputs[0].emit(bufferedEvent.data);\n    }\n  }\n  setupUI() {\n    this.ui.append(this.createHozLayout([\n      this.createLabel('Delay', { style: { grow: .3 } }),\n      this.createInput({ propName: 'delay', input: true, output: true, height: 20, style: { type: InputType.Number, grow: .7 } })\n    ], { style: { spacing: 10 } }));\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { Node } from \"../../core/node\";\nimport { Source } from \"../../ui/index\";\n\nexport class FileSource extends Node {\n  fileInput: Source\n\n  static DefaultState: any = { file: null };\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'File Source', options.position || new Vector(50, 50), options.width || 130, [],\n      [{ name: 'file', dataType: 'file' }],\n      {\n        state: options.state ? { ...FileSource.DefaultState, ...options.state } : FileSource.DefaultState,\n        style: options.style || { rowHeight: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.setupUI();\n\n    this.fileInput.on('change', () => this.process());\n    this.on('process', () => this.process());\n  }\n\n  process() { this.setOutputs(0, this.state.file); }\n  setupUI() {\n    this.fileInput = this.createSource({ propName: 'file', input: true, output: true, height: 20 });\n    this.ui.append(this.fileInput);\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { GlobalEventType } from \"../../common/enums\";\nimport { Node } from \"../../core/node\";\nimport { get, getNewUUID } from \"../../utils/utils\";\nimport { InputType, Input } from \"../../ui/index\";\n\nexport class GlobalEvent extends Node {\n  eventInput: Input;\n\n  static DefaultState = { prevEvent: '', eventId: -1 };\n\n  constructor(flow: Flow, type: GlobalEventType, name: string, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'Global Event', options.position || new Vector(50, 50), options.width || 150,\n      type === GlobalEventType.Emitter ? [{ name: 'emit', dataType: 'event' }] : [],\n      type === GlobalEventType.Receiver ? [{ name: 'receive', dataType: 'event' }] : [],\n      {\n        state: options.state ? { ...GlobalEvent.DefaultState, ...options.state } : GlobalEvent.DefaultState,\n        style: options.style || { rowHeight: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.state.prevEvent = name;\n    this.state.name = get(name, getNewUUID());\n\n    this.setupUI();\n\n    if (type === GlobalEventType.Emitter) {\n      this.inputs[0].on('event', (_, data) => flow.globalEvents.call(this.state.name, data));\n    } else {\n      this.state.eventId = flow.globalEvents.on(this.state.name, data => this.outputs[0].emit(data));\n\n      this.on('change', (_, __, prevVal) => {\n        flow.globalEvents.off(prevVal, this.state.eventId);\n        this.state.eventId = flow.globalEvents.on(this.state.name, data => this.outputs[0].emit(data));\n      });\n    }\n  }\n\n  setupUI() {\n    this.eventInput = this.createInput({ propName: 'name', height: 20, style: { type: InputType.Text, grow: .6 } });\n    this.ui.append(this.createHozLayout([\n      this.createLabel('Event', { style: { grow: .4 } }),\n      this.eventInput\n    ], { style: { spacing: 10 } }));\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { Log } from \"../../utils/logger\";\nimport { Node } from \"../../core/node\";\nimport { InputType, Input } from \"../../ui/index\";\n\nexport class JsonSource extends Node {\n  input: Input;\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'JSON Source', options.position || new Vector(50, 50), options.width || 150, [],\n      [{ name: 'value', dataType: 'any' }],\n      {\n        state: options.state ? { ...options.state } : {},\n        style: options.style || { rowHeight: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.setupUI();\n\n    this.input.on('change', () => this.process());\n    this.on('process', () => this.process());\n  }\n\n  process() {\n    if (!this.input.value || this.input.value === '') return;\n    try {\n      let value = JSON.parse(this.input.value as string);\n      this.setOutputs(0, value);\n    } catch (error) {\n      this.input.inputEl.style.backgroundColor = 'red';\n      Log.error(\"StandardNode 'JsonSource' json parse error\", error);\n    }\n  }\n  setupUI() {\n    this.input = this.createInput({ value: '', input: true, output: true, height: 20, style: { type: InputType.Text, grow: .7 } });\n    this.ui.append(this.createHozLayout([\n      this.createLabel('Value', { style: { grow: .3 } }),\n      this.input\n    ], { style: { spacing: 20 } }));\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { Terminal, TerminalType } from \"../../core/terminal\";\nimport { Log as Logger } from '../../utils/logger';\nimport { Node } from \"../../core/node\";\nimport { Button } from \"../../ui/index\";\n\nexport class Log extends Node {\n  addEventButton: Button;\n  addDataButton: Button;\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'Log', options.position || new Vector(50, 50), options.width || 170,\n      [{ name: 'Log 1', dataType: 'event' }, { name: 'Log 2', dataType: 'any' }], [],\n      {\n        state: options.state ? { ...options.state } : {},\n        style: options.style || { rowHeight: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.inputs[0].on('event', (terminal, data) => Logger.log(terminal.name + ':', data));\n    this.inputs[1].on('data', (terminal, data) => Logger.log(terminal.name + ':', data));\n\n    this.setupUI();\n\n    this.addEventButton.on('click', () => this.addNewTerminal('event'));\n    this.addDataButton.on('click', () => this.addNewTerminal('data'));\n  }\n\n  setupUI() {\n    this.addEventButton = this.createButton('Add Event', { style: { grow: .5 } });\n    this.addDataButton = this.createButton('Add Data', { style: { grow: .5 } });\n    this.ui.append(this.createHozLayout([this.addEventButton, this.addDataButton], { style: { spacing: 20 } }));\n  }\n  addNewTerminal(type: string) {\n    let newTerminal = new Terminal(this, TerminalType.IN, type === 'event' ? type : 'any', 'Log ' + (this.inputs.length + 1));\n    newTerminal.on(type, (terminal, data) => Logger.log(terminal.name, data));\n    this.addTerminal(newTerminal);\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { Node } from \"../../core/node\";\nimport { InputType, Input, Toggle } from \"../../ui/index\";\n\nexport class NumberRange extends Node {\n  minInput: Input;\n  maxInput: Input;\n  stepInput: Input;\n  loopToggle: Toggle;\n\n  static DefaultState = { value: 0, min: 0, max: 100, step: 1, loop: false };\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'Number Range', options.position || new Vector(50, 50), options.width || 200,\n      [{ name: 'trigger', dataType: 'event' }, { name: 'reset', dataType: 'event' }],\n      [{ name: 'value', dataType: 'number' }],\n      {\n        state: options.state ? { ...NumberRange.DefaultState, ...options.state } : NumberRange.DefaultState,\n        style: options.style || { rowHeight: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.state.startValue = this.state.value;\n\n    this.setupUI();\n\n    this.minInput.on('change', () => this.process());\n    this.maxInput.on('change', () => this.process());\n    this.stepInput.on('change', () => this.process());\n    this.loopToggle.on('change', () => this.process());\n\n    this.inputs[0].on('event', () => this.process());\n    this.inputs[1].on('event', () => this.state.value = this.state.min);\n  }\n\n  process() {\n    let value = this.state.value;\n    this.state.value = value + this.state.step;\n    if (this.state.value < this.state.min) {\n      this.state.value = this.state.min;\n      if (this.state.loop) this.state.value = this.state.startValue;\n      else return;\n    } else if (this.state.value > this.state.max) {\n      this.state.value = this.state.max;\n      if (this.state.loop) this.state.value = this.state.startValue;\n      else return;\n    } else {\n      this.setOutputs(0, value);\n    }\n  }\n  setupUI() {\n    this.minInput = this.createInput({ propName: 'min', input: true, output: true, height: 20, style: { type: InputType.Number, grow: .3, step: 'any' } });\n    this.maxInput = this.createInput({ propName: 'max', input: true, output: true, height: 20, style: { type: InputType.Number, grow: .3, step: 'any' } });\n    this.stepInput = this.createInput({ propName: 'step', input: true, output: true, height: 20, style: { type: InputType.Number, grow: .3, step: 'any' } });\n    this.loopToggle = this.createToggle({ propName: 'loop', input: true, output: true, height: 10, style: { grow: .2 } });\n    this.ui.append([\n      this.createHozLayout([\n        this.createLabel('Min', { style: { grow: .2 } }), this.minInput,\n        this.createLabel('Max', { style: { grow: .2 } }), this.maxInput\n      ], { style: { spacing: 5 } }),\n      this.createHozLayout([\n        this.createLabel('Step', { style: { grow: .2 } }), this.stepInput\n      ], { style: { spacing: 5 } }),\n      this.createHozLayout([\n        this.createLabel('Loop ?', { style: { grow: .2 } }), this.loopToggle\n      ], { style: { spacing: 10 } })\n    ]);\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { Node } from \"../../core/node\";\nimport { InputType, Input, Toggle } from \"../../ui/index\";\n\nexport class NumberSource extends Node {\n  fractionalToggle: Toggle;\n  input: Input;\n\n  static DefaultState = { fractional: false, value: 0 };\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'Number Source', options.position || new Vector(50, 50), options.width || 160, [],\n      [{ name: 'value', dataType: 'number' }],\n      {\n        state: options.state ? { ...NumberSource.DefaultState, ...options.state } : NumberSource.DefaultState,\n        style: options.style || { rowHeight: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.setupUI();\n\n    this.fractionalToggle.on('change', (_inst, _oldVal, newVal) => {\n      this.input.style.step = newVal ? 'any' : '';\n      if (!newVal) this.state.value = Math.floor(this.state.value);\n      this.process();\n    });\n    this.input.on('change', () => {\n      if (!this.state.fractional) this.state.value = Math.floor(this.state.value);\n      this.process();\n    });\n    this.outputs[0].on('connect', () => this.process());\n    this.on('process', () => this.process());\n  }\n\n  process() { this.setOutputs(0, this.state.fractional ? this.state.value : Math.floor(this.state.value)); }\n  setupUI() {\n    this.fractionalToggle = this.createToggle({ propName: 'fractional', input: true, output: true, height: 10, style: { grow: .2 } });\n    this.input = this.createInput({\n      value: 0, propName: 'value', input: true, output: true, height: 20, style: { type: InputType.Number, grow: .6, step: this.state.fractional ? 'any' : '' }\n    })\n    this.ui.append([\n      this.createHozLayout([this.createLabel('Value', { style: { grow: .4 } }), this.input], { style: { spacing: 20 } }),\n      this.createHozLayout([this.createLabel('Fractional ?', { style: { grow: .5 } }), this.fractionalToggle], { style: { spacing: 20 } }),\n    ]);\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector} from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { Node } from \"../../core/node\";\n\nexport class Property extends Node {\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'Property', options.position || new Vector(50, 50), options.width || 130,\n      [{ name: 'object', dataType: 'any' }, { name: 'key', dataType: 'string' }],\n      [{ name: 'value', dataType: 'any' }],\n      {\n        state: options.state ? { ...options.state } : {},\n        style: options.style || { rowHeight: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.on('process', (_, inputs) => {\n      if (!inputs[0]) return;\n      this.setOutputs(0, inputs[0][inputs[1]]);\n    });\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { getRandom } from \"../../utils/utils\";\nimport { Node } from \"../../core/node\";\nimport { InputType, Input, Toggle } from \"../../ui/index\";\n\nexport class Random extends Node {\n  minInput: Input;\n  maxInput: Input;\n  fractionalToggle: Toggle;\n\n  static DefaultState = { min: 0, max: 100, fractional: false };\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'Random', options.position || new Vector(50, 50), options.width || 150,\n      [{ name: 'trigger', dataType: 'event' }],\n      [{ name: 'value', dataType: 'number' }],\n      {\n        state: options.state ? { ...Random.DefaultState, ...options.state } : Random.DefaultState,\n        style: options.style || { rowHeight: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.setupUI();\n\n    this.minInput.on('change', () => this.process());\n    this.maxInput.on('change', () => this.process());\n    this.fractionalToggle.on('change', () => this.process());\n    this.inputs[0].on('event', () => this.process());\n    this.on('process', () => this.process());\n  }\n\n  process() {\n    let random;\n    if (this.state.fractional) random = getRandom(this.state.min, this.state.max)\n    else random = Math.floor(getRandom(Math.floor(this.state.min), Math.floor(this.state.max)));\n\n    this.setOutputs(0, random);\n  }\n  setupUI() {\n    this.minInput = this.createInput({ propName: 'min', input: true, output: true, height: 20, style: { type: InputType.Number, grow: 1, step: 'any' } });\n    this.maxInput = this.createInput({ propName: 'max', input: true, output: true, height: 20, style: { type: InputType.Number, grow: 1, step: 'any' } });\n    this.fractionalToggle = this.createToggle({ propName: 'fractional', input: true, output: true, height: 10, style: { grow: .2 } });\n    this.ui.append([\n      this.createHozLayout([\n        this.createLabel('Min:', { style: { grow: .3 } }),\n        this.minInput\n      ], { style: { spacing: 20 } }),\n      this.createHozLayout([\n        this.createLabel('Max:', { style: { grow: .3 } }),\n        this.maxInput\n      ], { style: { spacing: 20 } }),\n      this.createHozLayout([\n        this.createLabel('Fractional ?', { style: { grow: .8 } }),\n        this.fractionalToggle\n      ], { style: { spacing: 10 } })\n    ]);\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { Node } from \"../../core/node\";\nimport { InputType, Input } from \"../../ui/index\";\n\nexport class StringSource extends Node {\n  input: Input;\n\n  static DefaultState = { value: '' };\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'String Source', options.position || new Vector(50, 50), options.width || 160, [],\n      [{ name: 'value', dataType: 'string' }],\n      {\n        state: options.state ? { ...StringSource.DefaultState, ...options.state } : StringSource.DefaultState,\n        style: options.style || { rowHeight: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.setupUI();\n\n    this.input.on('change', () => this.process());\n    this.on('process', () => this.process());\n  }\n\n  process = () => this.setOutputs(0, this.state.value);\n  setupUI() {\n    this.input = this.createInput({ value: '', propName: 'value', input: true, output: true, height: 20, style: { type: InputType.Text, grow: .7 } })\n    this.ui.append(this.createHozLayout([\n      this.createLabel('Value', { style: { grow: .3 } }), this.input\n    ], { style: { spacing: 10 } }));\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { Terminal, TerminalType } from \"../../core/terminal\";\nimport { Node } from \"../../core/node\";\nimport { RadioGroup, Button } from \"../../ui/index\";\n\nexport class SyncData extends Node {\n  syncTypeInput: RadioGroup;\n  addButton: Button;\n\n  eventIds: number[] = [];\n\n  static DefaultState = { syncType: 'partial' };\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}, inputs?: number) {\n    super(flow, options.name || 'Sync Data', options.position || new Vector(50, 50), options.width || 160,\n      [{ name: 'Data 1', dataType: 'any' }, { name: 'Data 2', dataType: 'any' }],\n      [{ name: 'synced', dataType: 'any' }],\n      {\n        state: options.state ? { ...SyncData.DefaultState, ...options.state, hold: {} } : { ...SyncData.DefaultState, hold: {} },\n        style: options.style || { rowHeight: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    if (inputs) {\n      for (let i = 0; i < inputs - 2; i++) {\n        this.addTerminal(new Terminal(this, TerminalType.IN, 'any', 'Data ' + (this.inputs.length + 1)));\n      }\n    }\n\n    this.setupUI();\n\n    for (let terminal of this.inputs) {\n      this.eventIds.push(terminal.on('data', (inst, data) => this.process(inst, data)));\n    }\n\n    this.on('process', () => process);\n  }\n  setupUI() {\n    this.syncTypeInput = this.createRadioGroup(['partial', 'full'], this.state.syncType, { propName: 'syncType', height: 20 });\n    this.addButton = this.createButton('Add', { input: true, output: true, height: 20 });\n    this.ui.append([this.syncTypeInput, this.addButton]);\n    this.addButton.on('click', () => {\n      let newTerminal = new Terminal(this, TerminalType.IN, 'any', 'Data ' + (this.inputs.length + 1));\n      this.addTerminal(newTerminal);\n      this.eventIds.push(newTerminal.on('data', (inst, data) => this.process(inst, data)));\n    });\n  }\n  process(terminal: Terminal, data: any) {\n    this.state.hold[terminal.id] = data;\n\n    let hold = [];\n    for (let term of this.inputs) {\n      if (this.state.hold.hasOwnProperty(term.id)) {\n        hold.push(this.state.hold[term.id]);\n      }\n      else return;\n    }\n\n    if (this.state.syncType === 'full') this.state.hold = {};\n    this.outputs[0].emit(hold);\n\n    for (let term of this.inputs) if (term.connectors.length > 0 && typeof term.getData() === 'undefined') return;\n    this.setOutputs(0, this.getInputs());\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { Terminal, TerminalType } from \"../../core/terminal\";\nimport { Node } from \"../../core/node\";\nimport { Button } from \"../../ui/index\";\n\nexport class SyncEvent extends Node {\n  addButton: Button;\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}, events?: number) {\n    super(flow, options.name || 'Sync Event', options.position || new Vector(50, 50), options.width || 160,\n      [{ name: 'Event 1', dataType: 'event' }, { name: 'Event 2', dataType: 'event' }],\n      [{ name: 'synced', dataType: 'event' }],\n      {\n        state: options.state ? { ...options.state, hold: {} } : { hold: {} },\n        style: options.style || { rowHeight: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    if (events) {\n      for (let i = 0; i < events - 2; i++)\n        this.addTerminal(new Terminal(this, TerminalType.IN, 'event', 'Event ' + (this.inputs.length + 1)));\n    }\n    this.inputs.forEach(terminal => terminal.on('event', (inst, data) => this.process(inst, data)));\n\n    this.setupUI();\n\n    this.addButton.on('click', () => {\n      let newTerminal = new Terminal(this, TerminalType.IN, 'event', 'Event ' + (this.inputs.length + 1));\n      this.addTerminal(newTerminal);\n      newTerminal.on('event', (terminal, data) => this.process(terminal, data));\n    });\n  }\n\n  process(terminal: Terminal, data: any) {\n    this.state.hold[terminal.id] = data;\n\n    let hold = [];\n    for (let term of this.inputs) {\n      if (this.state.hold.hasOwnProperty(term.id)) {\n        hold.push(this.state.hold[term.id]);\n      }\n      else return;\n    }\n\n    this.state.hold = {};\n    this.outputs[0].emit(hold);\n  }\n  setupUI() {\n    this.addButton = this.createButton('Add', { input: true, output: true, height: 20 });\n    this.ui.append(this.addButton);\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { Node } from \"../../core/node\";\nimport { InputType } from \"../../ui/index\";\n\nexport class Timer extends Node {\n  lastTrigger: number = Number.MIN_VALUE;\n\n  static DefaultState: any = { delay: 1000, emitValue: null };\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'Timer', options.position || new Vector(50, 50), options.width || 120, [],\n      [{ name: 'timer', dataType: 'event' }],\n      {\n        state: options.state ? { ...Timer.DefaultState, ...options.state } : Timer.DefaultState,\n        style: options.style || { rowHeight: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.setupUI();\n\n    flow.flowConnect.on('tickreset', () => this.lastTrigger = Number.MIN_VALUE);\n    flow.flowConnect.on('tick', () => {\n      let current = flow.flowConnect.time;\n      if (current - this.lastTrigger >= this.state.delay) {\n        this.outputs[0].emit(this.state.emitValue);\n        this.lastTrigger = current;\n      }\n    });\n  }\n\n  setupUI() {\n    this.ui.append(this.createInput({ propName: 'delay', height: 20, style: { type: InputType.Number } }));\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { Terminal, TerminalType } from \"../../core/terminal\";\nimport { Node } from \"../../core/node\";\nimport { Button } from \"../../ui/index\";\n\nexport class ToArray extends Node {\n  addButton: Button;\n\n  constructor(flow: Flow, inputs: number, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'To Array', options.position || new Vector(50, 50), options.width || 100,\n      (inputs && inputs > 0\n        ? (new Array(inputs).fill(null).map((_, index) => ({ name: 'In ' + (index + 1), dataType: 'any' })))\n        : [{ name: 'In 1', dataType: 'any' }]\n      ),\n      [{ name: 'out', dataType: 'array' }],\n      {\n        state: options.state ? { ...options.state } : {},\n        style: options.style || { rowHeight: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.setupUI();\n\n    this.addButton.on('click', () => this.addTerminal(new Terminal(this, TerminalType.IN, 'any', 'In ' + this.inputs.length + 1)));\n    this.on('process', (_, inData) => this.setOutputs(0, [...inData]));\n  }\n\n  setupUI() {\n    this.addButton = this.createButton('Add', { style: { grow: .5 } });\n    this.ui.append(this.addButton);\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { Log } from \"../../utils/logger\";\nimport { Node } from \"../../core/node\";\n\nexport class ToVector extends Node {\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'To Vector', options.position || new Vector(50, 50), options.width || 100,\n      [{ name: 'x', dataType: 'any' }, { name: 'y', dataType: 'any' }],\n      [{ name: 'vector', dataType: 'any' }],\n      {\n        state: options.state ? { ...options.state } : {},\n        style: options.style || { rowHeight: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.on('process', (_, inputs) => {\n      if (typeof inputs[0] === 'number' && typeof inputs[1] === 'number') {\n        this.setOutputs(0, { x: inputs[0], y: inputs[1] });\n      } else if (Array.isArray(inputs[0]) && Array.isArray(inputs[1])) {\n        let result = [];\n        for (let i = 0; i < inputs[0].length; i++) {\n          result.push({ x: inputs[0][i], y: inputs[1][i] });\n        }\n        this.setOutputs(0, result);\n      } else {\n        Log.error('Type mismatch: Inputs to standard node \\'ToVector\\' should be of same type');\n      }\n    });\n  }\n}\n","import * as timer from './common/timer';\nimport * as log from './common/log';\nimport * as buffer from './common/buffer';\nimport * as toArray from './common/to-array';\nimport * as arrayIndex from './common/array-index';\nimport * as arraySource from './common/array-source';\nimport * as random from './common/random';\nimport * as booleanSource from './common/boolean-source';\nimport * as jsonSource from './common/json-source';\nimport * as numberSource from './common/number-source';\nimport * as stringSource from './common/string-source';\nimport * as fileSource from './common/file-source';\nimport * as compare from './common/compare';\nimport * as property from './common/property';\nimport * as syncEvent from './common/sync-event';\nimport * as syncData from './common/sync-data';\nimport * as delay from './common/delay';\nimport * as toVector from './common/to-vector';\nimport * as numberRange from './common/number-range';\nimport * as globalEvent from './common/global-event';\n\nimport * as abs from './math/abs';\nimport * as average from './math/average';\nimport * as normalize from './math/normalize';\nimport * as clamp from './math/clamp';\nimport * as floor from './math/floor';\nimport * as ceil from './math/ceil';\nimport * as func from './math/func';\n\nimport * as api from './net/api';\n\nimport * as functionPlotter from './visual/function-plotter';\nimport * as lineChartMini from './visual/line-chart-mini';\n\nimport * as source from './audio/source';\nimport * as destination from './audio/destination';\nimport * as automate from './audio/automate';\nimport * as channelSplitter from './audio/channel-splitter';\nimport * as debug from './audio/debug';\nimport * as channelMerger from './audio/channel-merger';\nimport * as adsr from './audio/adsr';\nimport * as gain from './audio/gain';\nimport * as metronome from './audio/metronome';\nimport * as moogEffect from './audio/moog';\nimport * as bitcrusherEffect from './audio/bitcrusher';\nimport * as biquadFilter from './audio/biquad-filter';\nimport * as delayEffect from './audio/delay';\nimport * as dynamicsCompressor from './audio/dynamics-compressor';\nimport * as chorusEffect from './audio/chorus';\nimport * as overdriveEffect from './audio/overdrive';\nimport * as audioBuffer from './audio/audio-buffer-source';\nimport * as convolver from './audio/convolver';\nimport * as tremoloEffect from './audio/tremolo';\nimport * as pingPong from './audio/ping-pong-delay';\nimport * as stereoPanner from './audio/stereo-panner';\nimport * as spatialPanner from './audio/spatial-panner';\nimport * as noise from './audio/noise';\nimport * as oscillator from './audio/oscillator';\nimport * as microphone from './audio/microphone';\nimport * as distorter from './audio/distorter';\nimport * as equalizer from './audio/equalizer';\nimport * as frequencyAnalyser from './audio/frequency-analyser';\nimport * as waveformAnalyser from './audio/waveform-analyser';\nimport * as spectrogramAnalyser from './audio/spectrogram-analyser';\n\nimport * as dial from './ui/dial';\n\nexport namespace StandardNodes.Common {\n  export import Timer = timer.Timer;\n  export import Log = log.Log;\n  export import Buffer = buffer.Buffer;\n  export import ToArray = toArray.ToArray;\n  export import ArrayIndex = arrayIndex.ArrayIndex;\n  export import ArraySource = arraySource.ArraySource;\n  export import BooleanSource = booleanSource.BooleanSource;\n  export import JsonSource = jsonSource.JsonSource;\n  export import NumberSource = numberSource.NumberSource;\n  export import StringSource = stringSource.StringSource;\n  export import FileSource = fileSource.FileSource;\n  export import Random = random.Random;\n  export import Compare = compare.Compare;\n  export import Property = property.Property;\n  export import SyncEvent = syncEvent.SyncEvent;\n  export import SyncData = syncData.SyncData;\n  export import Delay = delay.Delay;\n  export import ToVector = toVector.ToVector;\n  export import NumberRange = numberRange.NumberRange;\n  export import GlobalEvent = globalEvent.GlobalEvent;\n}\nexport namespace StandardNodes.Math {\n  export import Abs = abs.Abs;\n  export import Average = average.Average;\n  export import Normalize = normalize.Normalize;\n  export import Clamp = clamp.Clamp;\n  export import Floor = floor.Floor;\n  export import Ceil = ceil.Ceil;\n  export import Function = func.Func;\n}\nexport namespace StandardNodes.Net {\n  export import API = api.API;\n}\nexport namespace StandardNodes.Visual {\n  export import LineChartMini = lineChartMini.LineChartMini;\n  export import FunctionPlotter = functionPlotter.FunctionPlotter;\n}\nexport namespace StandardNodes.Audio {\n  export import Source = source.Source;\n  export import Destination = destination.Destination;\n  export import Automate = automate.Automate;\n  export import ChannelSplitter = channelSplitter.ChannelSplitter;\n  export import Debug = debug.Debug;\n  export import ChannelMerger = channelMerger.ChannelMerger;\n  export import ADSR = adsr.ADSR;\n  export import Gain = gain.Gain;\n  export import Metronome = metronome.Metronome;\n  export import MoogEffect = moogEffect.MoogEffect;\n  export import BitcrusherEffect = bitcrusherEffect.BitcrusherEffect;\n  export import BiquadFilter = biquadFilter.BiquadFilter;\n  export import DelayEffect = delayEffect.DelayEffect;\n  export import DynamicsCompressor = dynamicsCompressor.DynamicsCompressor;\n  export import ChorusEffect = chorusEffect.ChorusEffect;\n  export import OverdriveEffect = overdriveEffect.OverdriveEffect;\n  export import AudioBufferSource = audioBuffer.AudioBufferSource;\n  export import Convolver = convolver.Convolver;\n  export import TremoloEffect = tremoloEffect.TremoloEffect;\n  export import PingPongDelay = pingPong.PingPongEffect;\n  export import StereoPanner = stereoPanner.StereoPanner;\n  export import SpatialPanner = spatialPanner.SpatialPanner;\n  export import Noise = noise.Noise;\n  export import Oscillator = oscillator.Oscillator;\n  export import Microphone = microphone.Microphone;\n  export import Distorter = distorter.Distorter;\n  export import Equalizer = equalizer.Equalizer;\n  export import FrequencyAnalyser = frequencyAnalyser.FrequencyAnalyser;\n  export import WaveformAnalyser = waveformAnalyser.WaveformAnalyser;\n  export import SpectrogramAnalyser = spectrogramAnalyser.SpectrogramAnalyser;\n}\nexport namespace StandardNodes.UI {\n  export import Dial = dial.Dial;\n}\nexport namespace StandardNodes.Image {\n\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { Node } from \"../../core/node\";\n\nexport class Abs extends Node {\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'Abs', options.position || new Vector(50, 50), options.width || 120,\n      [{ name: 'x', dataType: 'any' }],\n      [{ name: '|x|', dataType: 'any' }],\n      {\n        state: options.state ? { ...options.state } : {},\n        style: options.style || { rowHeight: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.on('process', (_, inputs) => {\n      if (typeof inputs[0] === 'number') {\n        this.setOutputs(0, Math.abs(inputs[0]));\n      } else if (Array.isArray(inputs[0])) {\n        this.setOutputs(0, inputs[0].map(item => Math.abs(item)));\n      }\n    });\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { Node } from \"../../core/node\";\n\nexport class Average extends Node {\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'Average', options.position || new Vector(50, 50), options.width || 120,\n      [{ name: 'n', dataType: 'any' }],\n      [{ name: '', dataType: 'any' }],\n      {\n        state: options.state ? { ...options.state } : {},\n        style: options.style || { rowHeight: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.on('process', (_, inputs) => {\n      if (Array.isArray(inputs[0])) {\n        this.setOutputs(0, inputs[0].reduce((acc, curr) => acc + curr, 0) / inputs[0].length);\n      }\n    });\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { Node } from \"../../core/node\";\n\nexport class Ceil extends Node {\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'Ceil', options.position || new Vector(50, 50), options.width || 120,\n      [{ name: 'x', dataType: 'any' }],\n      [{ name: '|x|', dataType: 'any' }],\n      {\n        state: options.state ? { ...options.state } : {},\n        style: options.style || { rowHeight: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.on('process', (_, inputs) => {\n      if (typeof inputs[0] === 'number') {\n        this.setOutputs(0, Math.ceil(inputs[0]));\n      } else if (Array.isArray(inputs[0])) {\n        this.setOutputs(0, inputs[0].map(item => Math.ceil(item)));\n      }\n    });\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { clamp } from \"../../utils/utils\";\nimport { Node } from \"../../core/node\";\nimport { InputType, Input } from \"../../ui/index\";\n\nexport class Clamp extends Node {\n  minInput: Input;\n  maxInput: Input;\n\n  static DefaultState = { min: 0, max: 100 };\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'Clamp', options.position || new Vector(50, 50), options.width || 150,\n      [{ name: 'x', dataType: 'any' }],\n      [{ name: '[x]', dataType: 'any' }],\n      {\n        state: options.state ? { ...Clamp.DefaultState, ...options.state } : Clamp.DefaultState,\n        style: options.style || { rowHeight: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.setupUI();\n\n    this.minInput.on('change', () => this.process(this.getInputs()[0]));\n    this.maxInput.on('change', () => this.process(this.getInputs()[0]));\n    this.on('process', (_, inputs) => this.process(inputs[0]));\n  }\n\n  setupUI() {\n    this.minInput = this.createInput({ propName: 'min', input: true, output: true, height: 20, style: { type: InputType.Number, grow: .7 } });\n    this.maxInput = this.createInput({ propName: 'max', input: true, output: true, height: 20, style: { type: InputType.Number, grow: .7 } });\n    this.ui.append([\n      this.createHozLayout([\n        this.createLabel('Min', { style: { grow: .3 } }),\n        this.minInput\n      ], { style: { spacing: 10 } }),\n      this.createHozLayout([\n        this.createLabel('Max', { style: { grow: .3 } }),\n        this.maxInput\n      ], { style: { spacing: 10 } })\n    ]);\n  }\n  process(input: number | []) {\n    if (typeof input === 'number') {\n      this.setOutputs(0, clamp(input, this.state.min, this.state.max));\n    } else if (Array.isArray(input)) {\n      this.setOutputs(0, input.map(item => clamp(item, this.state.min, this.state.max)));\n    }\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { Node } from \"../../core/node\";\n\nexport class Floor extends Node {\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'Floor', options.position || new Vector(50, 50), options.width || 120,\n      [{ name: 'x', dataType: 'any' }],\n      [{ name: '|x|', dataType: 'any' }],\n      {\n        state: options.state ? { ...options.state } : {},\n        style: options.style || { rowHeight: 10 },\n        terminalStyle: options.terminalStyle || {},\n      }\n    );\n\n    this.on('process', (_, inputs) => {\n      if (typeof inputs[0] === 'number') {\n        this.setOutputs(0, Math.floor(inputs[0]));\n      } else if (Array.isArray(inputs[0])) {\n        this.setOutputs(0, inputs[0].map(item => Math.floor(item)));\n      }\n    });\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { Terminal, TerminalType } from \"../../core/terminal\";\nimport { Evaluator } from \"../../utils/evaluator\";\nimport { Log } from \"../../utils/logger\";\nimport { Parser } from \"../../utils/parser\";\nimport { Token, TokenType } from \"../../utils/lexer\";\nimport { Node } from \"../../core/node\";\nimport { InputType, Input, Button } from \"../../ui/index\";\n\nexport class Func extends Node {\n  addVarButton: Button\n\n  static DefaultState = { newVar: 'y' };\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}, expression?: string) {\n    super(flow, options.name || 'Function', options.position || new Vector(50, 50), options.width || 200, [],\n      [{ name: '', dataType: 'any' }],\n      {\n        state: options.state\n          ? { ...Func.DefaultState, ...options.state, expression: (expression || 'a*sin(a^2)+cos(a*tan(a))'), evaluator: new Evaluator({}) }\n          : { ...Func.DefaultState, expression: (expression || 'a*sin(a^2)+cos(a*tan(a))'), evaluator: new Evaluator({}) },\n        style: options.style || { rowHeight: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    let vars = new Set<string>();\n    let parser = new Parser();\n    let tokens: Token[];\n    try {\n      tokens = parser.parse(expression);\n    } catch (error) {\n      Log.error('Error while parsing expression: ', expression, error);\n      return;\n    }\n    try {\n      tokens.forEach(token => {\n        if (token.type === TokenType.Variable) {\n          if ((token.value as string).length > 1) throw new Error('Only single character variables are allowed: ' + token.value);\n          else vars.add(token.value as string);\n        }\n      });\n    } catch (error) { Log.error(error); return; }\n\n    vars.forEach(variable => this.addTerminal(new Terminal(this, TerminalType.IN, 'any', variable)));\n    this.state.expression = expression;\n\n    this.setupUI();\n\n    this.watch('expression', () => this.process());\n\n    this.addVarButton.on('click', () => {\n      if (!this.state.newVar || this.state.newVar.trim() === '') return;\n      if (this.inputs.map(input => input.name).includes(this.state.newVar.trim().toLowerCase())) {\n        Log.error('Variable', this.state.newVar.trim(), 'already exists');\n        return;\n      }\n      this.addTerminal(new Terminal(this, TerminalType.IN, 'any', this.state.newVar.trim()));\n    });\n    this.on('process', () => this.process());\n  }\n\n  process() {\n    let bulkEvalIterations = -1;\n    this.state.evaluator.variables = {};\n    for (let inTerminal of this.inputs) {\n      let data = inTerminal.getData();\n\n      // Some checks to determine if the intention is to pass variables with array values to this function\n      // Which should mean its a bulk evaluation (t=[2,5,6,8...], f(t)=cos(t)  ==>  f(t)=[cos(2),cos(5),cos(6),cos(8)...])\n      if (Array.isArray(data)) {\n        let expr = this.state.expression;\n        let regex = new RegExp('([a-z]+)\\\\(' + inTerminal.name + '\\\\)', 'g');\n        expr = expr.replace(/\\s+/g, '');\n        let matches = [...expr.matchAll(regex)];\n        let result = matches\n          .map(match => !Evaluator.multiargFunctions.includes(match[1]))\n          .reduce((acc, curr) => acc = acc && curr, true);\n\n        if (result) bulkEvalIterations = Math.max(bulkEvalIterations, data.length);\n      }\n\n      this.state.evaluator.variables[inTerminal.name] = (typeof data !== 'undefined' && data !== null) ? data : 0;\n    }\n    try {\n      let result: number[] | number;\n      if (bulkEvalIterations !== -1) {\n        let resultArr = [];\n        for (let i = 0; i < bulkEvalIterations; i += 1) {\n          resultArr.push(this.state.evaluator.evaluate(this.state.expression, i));\n        }\n        result = resultArr;\n      } else {\n        result = this.state.evaluator.evaluate(this.state.expression);\n      }\n      this.setOutputs(0, result);\n    } catch (error) {\n      Log.error('Error while evaluating the expression: ', this.state.expression, error);\n    }\n  }\n  lowerCase(input: Input) {\n    if (/[A-Z]/g.test(input.inputEl.value)) input.inputEl.value = input.inputEl.value.toLowerCase();\n  }\n  setupUI() {\n    let exprInput = this.createInput({\n      propName: 'expression', input: true, output: true, height: 20, style: { type: InputType.Text, grow: .9 }\n    });\n    exprInput.on('input', this.lowerCase);\n    this.addVarButton = this.createButton('Add', { height: 20, style: { grow: .4 } });\n    this.ui.append([\n      this.createHozLayout([\n        this.createLabel('', { style: { grow: .1 } }),\n        exprInput\n      ], { style: { spacing: 10 } }),\n      this.createHozLayout([\n        this.createInput({ propName: 'newVar', height: 20, style: { type: InputType.Text, maxLength: 1, grow: .6 } }),\n        this.addVarButton\n      ], { style: { spacing: 10 } })\n    ]);\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { normalize } from \"../../utils/utils\";\nimport { Node } from \"../../core/node\";\nimport { InputType } from \"../../ui/index\";\n\nexport class Normalize extends Node {\n  min = Number.MAX_SAFE_INTEGER;\n  max = Number.MIN_SAFE_INTEGER;\n\n  static DefaultState = { min: 0, max: 100, relative: false };\n\n  constructor(flow: Flow, public type: 'number' | 'array', options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'Normalize', options.position || new Vector(50, 50), options.width || 150,\n      [{ name: 'data', dataType: type }],\n      [{ name: 'normalized', dataType: type }],\n      {\n        state: options.state ? { ...Normalize.DefaultState, ...options.state } : Normalize.DefaultState,\n        style: options.style || { rowHeight: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    if (type === 'array') {\n      let relativeToggle = this.createToggle({ propName: 'relative', height: 10, style: { grow: .5 } });\n      this.ui.append(this.createHozLayout([\n        this.createLabel('Relative ?'),\n        relativeToggle\n      ], { style: { spacing: 20 } }));\n      relativeToggle.on('change', () => this.process());\n    }\n    if (type === 'number' || !this.state.relative) {\n      let minInput = this.createInput({ propName: 'min', height: 20, style: { type: InputType.Number, grow: .3 } });\n      let maxInput = this.createInput({ propName: 'max', height: 20, style: { type: InputType.Number, grow: .3 } });\n      this.ui.append(this.createHozLayout([\n        this.createLabel('Min', { style: { grow: .2 } }),\n        minInput,\n        this.createLabel('Max', { style: { grow: .2 } }),\n        maxInput\n      ], { style: { spacing: 5 } }));\n\n      minInput.on('change', () => this.process());\n      maxInput.on('change', () => this.process());\n    }\n    if (this.state.constant) {\n      let constantInput = this.createInput({ propName: 'constant', height: 20, style: { type: InputType.Number, grow: .5 } });\n      this.ui.append(this.createHozLayout([\n        this.createLabel('Constant'),\n        constantInput\n      ], { style: { spacing: 20 } }));\n\n      constantInput.on('change', () => this.process());\n    }\n\n    this.on('process', () => this.process())\n  }\n\n\n  process() {\n    let data = this.getInput(0);\n    if (!data) return;\n\n    let normalized;\n    if (this.type === 'number') {\n      normalized = Number(normalize(data, this.state.min, this.state.max).toFixed(2));\n    } else {\n      if (this.state.relative) {\n        let currMin = Math.min(...data);\n        let currMax = Math.max(...data);\n        if (currMin < this.min) this.min = currMin - (this.state.constant || 0);\n        if (currMax > this.max) this.max = currMax + (this.state.constant || 0);\n        normalized = data.map((item: number) => Number(normalize(item, this.min, this.max).toFixed(2)));\n      } else {\n        normalized = data.map((item: number) => Number(normalize(item, this.state.min, this.state.max).toFixed(2)));\n      }\n    }\n    this.setOutputs('normalized', normalized);\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { Align } from \"../../common/enums\";\nimport { Log } from \"../../utils/logger\";\nimport { isEmpty } from \"../../utils/utils\";\nimport { Node } from \"../../core/node\";\n\nexport class API extends Node {\n\n  static DefaultState = { src: '' };\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'API', options.position || new Vector(50, 50), options.width || 150,\n      [{ name: 'trigger', dataType: 'event' }],\n      [{ name: 'text', dataType: 'string' }, { name: 'json', dataType: 'any' }, { name: 'array-buffer', dataType: 'array-buffer' }],\n      {\n        state: options.state ? { ...API.DefaultState, ...options.state } : API.DefaultState,\n        style: options.style || { rowHeight: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.setupUI();\n\n    this.inputs[0].on('event', async () => {\n      if (!this.state.src || this.state.src === '') Log.error(\"Prop 'src' of API Node is invalid, cannot make an API call\");\n      else {\n        let response, outputs: Record<string, any> = {};\n        if (this.outputs.map(terminal => terminal.connectors.length).reduce((acc, curr) => acc + curr, 0) > 0) {\n          response = await fetch(this.state.src);\n\n          if (this.outputs[0].connectors.length > 0) outputs[this.outputs[0].name] = await response.text();\n          else if (this.outputs[1].connectors.length > 0) outputs[this.outputs[1].name] = await response.json();\n          else if (this.outputs[2].connectors.length > 0) {\n            // If this is an audio connection then check the arrayBufferCache first\n            if (this.outputs[2].connectors.map(connector => connector.end.dataType).includes('audio')) {\n              let cached = flow.flowConnect.arrayBufferCache.get(this.state.src);\n              if (!cached) {\n                cached = await response.arrayBuffer();\n                flow.flowConnect.arrayBufferCache.set(this.state.src, cached);\n              }\n              outputs[this.outputs[2].name] = cached;\n            } else {\n              outputs[this.outputs[2].name] = await response.arrayBuffer();\n            }\n          }\n\n          if (!isEmpty(outputs)) this.setOutputs(outputs);\n        }\n      }\n    });\n  }\n\n  setupUI() {\n    this.ui.append(this.createLabel('', { propName: 'src', input: true, output: true, style: { align: Align.Center } }));\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { Align } from \"../../common/enums\";\nimport { Node } from \"../../core/node\";\nimport { DialStyle } from \"../../ui/index\";\n\nexport class Dial extends Node {\n\n  static DefaultState = { value: 0, min: 0, max: 1 };\n\n  constructor(flow: Flow, options: NodeCreatorOptions = new Object(), dialStyle: DialStyle = new Object()) {\n    super(flow, options.name || 'Dial', options.position || new Vector(50, 50), options.width || 90, [], [],\n      {\n        state: options.state ? { ...Dial.DefaultState, ...options.state } : Dial.DefaultState,\n        style: options.style || { rowHeight: 10, padding: 5, spacing: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    Object.assign(this.ui.style, {\n      backgroundColor: 'transparent',\n      borderColor: 'transparent',\n      borderWidth: 0,\n      shadowBlur: 0,\n      shadowColor: 'transparent'\n    });\n\n    this.setupUI(dialStyle);\n\n    this.outputsUI[0].on('connect', (_inst, connector) => {\n      if (connector.end.ref instanceof AudioParam) this.state.value = connector.end.ref.value;\n    });\n  }\n\n  setupUI(dialStyle: DialStyle) {\n    let dial = this.createDial(this.state.min, this.state.max, this.width, {\n      value: this.state.value, propName: 'value', input: true, output: true, style: dialStyle\n    });\n    this.ui.append([\n      dial,\n      this.createStack({\n        childs: [\n          this.createHozLayout([\n            this.createLabel('', { propName: 'min', style: { precision: 1, fontSize: '11px', align: Align.Left, grow: .5 } }),\n            this.createLabel('', { propName: 'max', style: { precision: 1, fontSize: '11px', align: Align.Right, grow: .5 } })\n          ]),\n          this.createHozLayout([\n            this.createLabel('', { propName: 'value', style: { precision: 1, fontSize: '20px', align: Align.Center, grow: 1 } })\n          ])\n        ],\n        style: { spacing: 5 }\n      })\n    ]);\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { Node } from \"../../core/node\";\nimport { get } from \"../../utils/utils\";\nimport { Display, Toggle } from \"../../ui/index\";\n\nexport class FunctionPlotter extends Node {\n  display: Display;\n  polarToggle: Toggle;\n\n  static DefaultState: any = { points: [], polar: false, config: { gX: 3, gY: 3, xMin: -1.5, xMax: 1.5, yMin: -1.5, yMax: 1.5 } }\n\n  constructor(flow: Flow, height: number, public plotStyle: PlotStyle = new Object(), options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'Parametric Plotter', options.position || new Vector(50, 50), options.width || 300,\n      [{ name: 'data', dataType: 'any' }], [],\n      {\n        state: options.state ? { ...FunctionPlotter.DefaultState, ...options.state } : FunctionPlotter.DefaultState,\n        style: options.style || { rowHeight: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.setupUI(height);\n\n    this.polarToggle.on('change', () => this.process(this.getInputs()));\n\n    let dragStart: Vector = null;\n    this.display.on('up', () => dragStart = null);\n    this.display.on('exit', () => dragStart = null);\n    this.display.on('down', (_, screenPos) => {\n      dragStart = screenPos.subtract(this.display.position.transform(flow.flowConnect.transform));\n      dragStart.x = this.xPixToCoord(this.state.config, this.display.displayConfigs[0].canvas.width, dragStart.x);\n      dragStart.y = this.yPixToCoord(this.state.config, this.display.displayConfigs[0].canvas.height, dragStart.y);\n    });\n    this.display.on('drag', (_, screenPos) => {\n      if (dragStart) {\n        let curr = screenPos.subtract(this.display.position.transform(flow.flowConnect.transform));\n        curr.x = this.xPixToCoord(this.state.config, this.display.displayConfigs[0].canvas.width, curr.x);\n        curr.y = this.yPixToCoord(this.state.config, this.display.displayConfigs[0].canvas.height, curr.y);\n\n        let delta = dragStart.subtract(curr);\n        Object.assign(this.state.config, {\n          xMin: this.state.config.xMin + delta.x,\n          xMax: this.state.config.xMax + delta.x,\n          yMin: this.state.config.yMin + delta.y,\n          yMax: this.state.config.yMax + delta.y,\n        });\n\n        this.gridRenderer(\n          this.display.displayConfigs[0].context,\n          this.display.displayConfigs[0].canvas.width,\n          this.display.displayConfigs[0].canvas.height\n        );\n        this.functionRenderer(\n          this.display.displayConfigs[1].context,\n          this.display.displayConfigs[1].canvas.width,\n          this.display.displayConfigs[1].canvas.height\n        );\n      }\n    });\n    this.display.on('wheel', (_, direction, screenPos) => {\n      let cursor = screenPos.subtract(this.display.position.transform(flow.flowConnect.transform));\n      cursor.x = this.xPixToCoord(this.state.config, this.display.displayConfigs[0].canvas.width, cursor.x);\n      cursor.y = this.yPixToCoord(this.state.config, this.display.displayConfigs[0].canvas.height, cursor.y);\n\n      Object.assign(this.state.config, {\n        xMin: this.state.config.xMin - cursor.x,\n        xMax: this.state.config.xMax - cursor.x,\n        yMin: this.state.config.yMin - cursor.y,\n        yMax: this.state.config.yMax - cursor.y\n      });\n      if (!direction) {\n        Object.assign(this.state.config, {\n          xMin: this.state.config.xMin + this.state.config.xMin * 0.1,\n          xMax: this.state.config.xMax + this.state.config.xMax * 0.1,\n          yMin: this.state.config.yMin + this.state.config.yMin * 0.1,\n          yMax: this.state.config.yMax + this.state.config.yMax * 0.1\n        });\n      } else {\n        Object.assign(this.state.config, {\n          xMin: this.state.config.xMin - this.state.config.xMin * 0.1,\n          xMax: this.state.config.xMax - this.state.config.xMax * 0.1,\n          yMin: this.state.config.yMin - this.state.config.yMin * 0.1,\n          yMax: this.state.config.yMax - this.state.config.yMax * 0.1\n        });\n      }\n      Object.assign(this.state.config, {\n        xMin: this.state.config.xMin + cursor.x,\n        xMax: this.state.config.xMax + cursor.x,\n        yMin: this.state.config.yMin + cursor.y,\n        yMax: this.state.config.yMax + cursor.y\n      });\n\n      this.gridRenderer(\n        this.display.displayConfigs[0].context,\n        this.display.displayConfigs[0].canvas.width,\n        this.display.displayConfigs[0].canvas.height\n      );\n      this.functionRenderer(\n        this.display.displayConfigs[1].context,\n        this.display.displayConfigs[1].canvas.width,\n        this.display.displayConfigs[1].canvas.height\n      );\n    });\n    flow.flowConnect.on('scale', () => this.functionRenderer(\n      this.display.displayConfigs[1].context,\n      this.display.displayConfigs[1].canvas.width,\n      this.display.displayConfigs[1].canvas.height\n    ));\n\n\n    this.inputsUI[0].on('event', () => this.state.points = []);\n    this.on('process', (_, inputs) => this.process(inputs));\n  }\n\n\n  gridRenderer(context: CanvasRenderingContext2D | OffscreenCanvasRenderingContext2D, width: number, height: number) {\n    this.drawGrid(context, width, height);\n    return false;\n  }\n  process(inputs: any) {\n    if (Array.isArray(inputs[0])) {\n      if (this.state.polar) {\n        this.state.points = [];\n        for (let i of inputs[0]) {\n          this.state.points.push({ x: i.x * Math.cos(i.y), y: i.x * Math.sin(i.y) });\n        }\n      } else {\n        this.state.points = inputs[0];\n      }\n    } else {\n      this.state.points.push(this.state.polar\n        ? { x: inputs[0].x * Math.cos(inputs[0].y), y: inputs[0].x * Math.sin(inputs[0].y) }\n        : inputs[0]\n      );\n    }\n    this.functionRenderer(\n      this.display.displayConfigs[1].context,\n      this.display.displayConfigs[1].canvas.width,\n      this.display.displayConfigs[1].canvas.height\n    );\n  }\n  xCoordToPix(config: any, width: number, xCoord: number) {\n    const xDiff = config.xMax - config.xMin;\n    const xPixPerUnit = width / xDiff;\n    return Math.round((xCoord - config.xMin) * xPixPerUnit);\n  }\n  yCoordToPix(config: any, height: number, yCoord: number) {\n    const yDiff = config.yMax - config.yMin;\n    const yPixPerUnit = height / yDiff;\n    return Math.round(height - (yCoord - config.yMin) * yPixPerUnit);\n  }\n  xPixToCoord(config: any, width: number, xPix: number) {\n    const xDiff = config.xMax - config.xMin;\n    const xPixPerUnit = width / xDiff;\n    return xPix / xPixPerUnit + config.xMin;\n  }\n  yPixToCoord(config: any, height: number, yPix: number) {\n    const yDiff = config.yMax - config.yMin;\n    const yPixPerUnit = height / yDiff;\n    return -(yPix - height) / yPixPerUnit + config.yMin;\n  }\n  drawLine(context: CanvasRenderingContext2D | OffscreenCanvasRenderingContext2D, x1: number, y1: number, x2: number, y2: number) {\n    context.beginPath();\n    context.moveTo(x1, y1);\n    context.lineTo(x2, y2);\n    context.stroke();\n  }\n  getGridPointDist(min: number, max: number, factor: number) {\n    const diff = max - min;\n    let result = Math.pow(10.0, Math.ceil(Math.log(diff) / Math.log(10.0)) - 1);\n    switch (Math.floor(diff / result)) {\n      case 9: result /= 2; break;\n      case 8: result /= 3; break;\n      case 7: result /= 4; break;\n      case 6: result /= 5; break;\n      case 5: result /= 6; break;\n      case 4: result /= 7; break;\n      case 3: result /= 8; break;\n      case 2: result /= 9; break;\n      case 1: result /= 10; break;\n    }\n    result *= factor;\n    return result;\n  }\n  drawGrid(context: CanvasRenderingContext2D | OffscreenCanvasRenderingContext2D, width: number, height: number) {\n    context.clearRect(0, 0, width, height);\n    const xDiff = this.state.config.xMax - this.state.config.xMin;\n    const xPixPerUnit = width / xDiff;\n    const yDiff = this.state.config.yMax - this.state.config.yMin;\n    const yPixPerUnit = height / yDiff;\n    const xF = this.getGridPointDist(this.state.config.xMin, this.state.config.xMax, this.state.config.gX);\n    const yF = this.getGridPointDist(this.state.config.yMin, this.state.config.yMax, this.state.config.gY);\n    this.plotStyle.axisColor = get(this.plotStyle.axisColor, '#000000');\n    this.plotStyle.gridColor = get(this.plotStyle.gridColor, '#b0b0b0');\n\n    let startValue = Math.ceil(this.state.config.xMin / xF) * xF;\n    let number = Math.round(Math.floor(xDiff / xF)) + 1;\n    let axisPosition;\n    if (this.state.config.yMin < 0 && this.state.config.yMax > 0) {\n      axisPosition = height + this.state.config.yMin * yPixPerUnit + 12;\n    } else {\n      axisPosition = height - 12;\n    }\n    context.strokeStyle = this.plotStyle.gridColor;\n    for (let i = 0; i < number; i++) {\n      if (Math.abs(startValue) < xF * 0.5) {\n        context.strokeStyle = this.plotStyle.axisColor;\n      }\n      const position = Math.round((startValue - this.state.config.xMin) * xPixPerUnit);\n      this.drawLine(context, position, 0, position, height);\n      context.fillStyle = this.plotStyle.axisColor;\n      const text = Math.round(startValue * 100) / 100;\n      context.fillText(text + '', position + 4, axisPosition);\n      context.strokeStyle = this.plotStyle.gridColor;\n      startValue += xF;\n    }\n\n    startValue = Math.ceil(this.state.config.yMin / yF) * yF;\n    number = Math.round(Math.floor(yDiff / yF)) + 1;\n    if (this.state.config.xMin < 0 && this.state.config.xMax > 0) {\n      axisPosition = -this.state.config.xMin * xPixPerUnit + 5;\n    } else {\n      axisPosition = 5;\n    }\n    context.strokeStyle = this.plotStyle.gridColor;\n    for (let i = 0; i < number; i++) {\n      if (Math.abs(startValue) < yF * 0.5) {\n        context.strokeStyle = this.plotStyle.axisColor;\n      }\n      const position = height - Math.round((startValue - this.state.config.yMin) * yPixPerUnit);\n      this.drawLine(context, 0, position, width, position);\n      let axisVal = Math.round(startValue * 100) / 100;\n      if (axisVal !== 0) {\n        context.fillStyle = this.plotStyle.axisColor;\n        const text = axisVal;\n        context.fillText(text + '', axisPosition, position - 4);\n      }\n      context.strokeStyle = this.plotStyle.gridColor;\n      startValue += yF;\n    }\n  }\n  functionRenderer(context: CanvasRenderingContext2D | OffscreenCanvasRenderingContext2D, width: number, height: number) {\n    if (this.state.points.length <= 0) return;\n    context.clearRect(0, 0, width, height);\n    context.strokeStyle = get(this.plotStyle.plotColor, '#000');\n    context.lineWidth = 2;\n    context.beginPath();\n    let startX = this.xCoordToPix(this.state.config, width, this.state.points[0].x);\n    let startY = this.yCoordToPix(this.state.config, height, this.state.points[0].y);\n    context.moveTo(startX, startY);\n    for (let i = 1; i < this.state.points.length; i += 1) {\n      const x = this.xCoordToPix(this.state.config, width, this.state.points[i].x);\n      const y = this.yCoordToPix(this.state.config, height, this.state.points[i].y);\n      context.lineTo(x, y);\n    }\n    context.stroke();\n  }\n  setupUI(height: number) {\n    this.display = this.createDisplay(height, [\n      { auto: true, renderer: (context, width, height) => this.gridRenderer(context, width, height) },\n      { auto: false }\n    ]);\n    this.polarToggle = this.createToggle({ propName: 'polar', height: 10, style: { grow: .1 } });\n    this.ui.append([\n      this.display,\n      this.createHozLayout([this.createLabel('Polar ?', { style: { grow: .2 } }), this.polarToggle], { style: { spacing: 5 } })\n    ]);\n  }\n}\n\nexport interface PlotStyle {\n  axisColor?: string, gridColor?: string, plotColor?: string\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { Color } from \"../../core/color\";\nimport { Node } from \"../../core/node\";\nimport { InputType, DisplayStyle } from \"../../ui/index\";\n\nexport class LineChartMini extends Node {\n\n  static DefaultState = { size: 10 };\n\n  constructor(flow: Flow, height: number, colors: string[], displayStyle: DisplayStyle, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'Line Chart Mini', options.position || new Vector(50, 50), options.width || 150,\n      [{ name: 'data', dataType: 'array' }], [],\n      {\n        state: options.state ? { ...LineChartMini.DefaultState, ...options.state } : LineChartMini.DefaultState,\n        style: options.style || { rowHeight: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.setupUI(height, colors, displayStyle);\n  }\n\n  setupUI(height: number, colors: string[], displayStyle: DisplayStyle) {\n    let display = this.createDisplay(height, [{\n      auto: true,\n      renderer: (context, wdth, hght) => {\n        let data = this.getInputs();\n        if (!data || !data[0]) return true;\n        data[0].forEach((input: number[], index: number) => {\n          if (!input) return;\n          let spacing = Number((wdth / (this.state.size - 1)).toFixed(2));\n          context.strokeStyle = colors[index] || Color.Random().rgbaCSSString;\n          context.lineWidth = 2;\n          context.beginPath();\n          context.moveTo(0, (1 - input[0]) * hght);\n          for (let i = 1; i < input.length; i += 1) context.lineTo(i * spacing, (1 - input[i]) * hght);\n          context.stroke();\n        });\n        return true;\n      }\n    }], { style: displayStyle ? displayStyle : {} });\n    this.ui.append(display);\n    let sizeInput = this.createInput({ propName: 'size', input: true, output: true, height: 20, style: { type: InputType.Number, grow: .5 } });\n    this.ui.append(this.createHozLayout([\n      this.createLabel('Size'),\n      sizeInput\n    ], { style: { spacing: 20 } }));\n  }\n}\n","/*Copyright (c) 2012 DinahMoe AB & Oskar Eriksson\n\n  Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation\n  files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy,\n  modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software\n  is furnished to do so, subject to the following conditions:\n\n  The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n\n  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n  DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE\n  OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n*/\n\nvar userContext,\n  userInstance,\n  pipe = function (param, val) {\n    param.value = val;\n  },\n  Super = Object.create(null, {\n    activate: {\n      writable: true,\n      value: function (doActivate) {\n        if (doActivate) {\n          this.input.disconnect();\n          this.input.connect(this.activateNode);\n          if (this.activateCallback) {\n            this.activateCallback(doActivate);\n          }\n        } else {\n          this.input.disconnect();\n          this.input.connect(this.output);\n        }\n      }\n    },\n    bypass: {\n      get: function () {\n        return this._bypass;\n      },\n      set: function (value) {\n        if (this._lastBypassValue === value) {\n          return;\n        }\n        this._bypass = value;\n        this.activate(!value);\n        this._lastBypassValue = value;\n      }\n    },\n    connect: {\n      value: function (target) {\n        this.output.connect(target);\n      }\n    },\n    disconnect: {\n      value: function (target) {\n        this.output.disconnect(target);\n      }\n    },\n    connectInOrder: {\n      value: function (nodeArray) {\n        var i = nodeArray.length - 1;\n        while (i--) {\n          if (!nodeArray[i].connect) {\n            return console.error(\"AudioNode.connectInOrder: TypeError: Not an AudioNode.\", nodeArray[i]);\n          }\n          if (nodeArray[i + 1].input) {\n            nodeArray[i].connect(nodeArray[i + 1].input);\n          } else {\n            nodeArray[i].connect(nodeArray[i + 1]);\n          }\n        }\n      }\n    },\n    getDefaults: {\n      value: function () {\n        var result = {};\n        for (var key in this.defaults) {\n          result[key] = this.defaults[key].value;\n        }\n        return result;\n      }\n    },\n    automate: {\n      value: function (property, value, duration, startTime) {\n        var start = startTime ? ~~(startTime / 1000) : userContext.currentTime,\n          dur = duration ? ~~(duration / 1000) : 0,\n          _is = this.defaults[property],\n          param = this[property],\n          method;\n\n        if (param) {\n          if (_is.automatable) {\n            if (!duration) {\n              method = \"setValueAtTime\";\n            } else {\n              method = \"linearRampToValueAtTime\";\n              param.cancelScheduledValues(start);\n              param.setValueAtTime(param.value, start);\n            }\n            param[method](value, dur + start);\n          } else {\n            param = value;\n          }\n        } else {\n          console.error(\"Invalid Property for \" + this.name);\n        }\n      }\n    }\n  }),\n  FLOAT = \"float\",\n  BOOLEAN = \"boolean\",\n  STRING = \"string\",\n  INT = \"int\";\n\nif (typeof module !== \"undefined\" && module.exports) {\n  module.exports = Tuna;\n} else if (typeof define === \"function\") {\n  window.define(\"Tuna\", definition);\n} else {\n  window.Tuna = Tuna;\n}\n\nfunction definition() {\n  return Tuna;\n}\n\nfunction Tuna(context) {\n  if (!(this instanceof Tuna)) {\n    return new Tuna(context);\n  }\n\n  var _window = typeof window === \"undefined\" ? {} : window;\n\n  if (!_window.AudioContext) {\n    _window.AudioContext = _window.webkitAudioContext;\n  }\n  if (!context) {\n    console.log(\"tuna.js: Missing audio context! Creating a new context for you.\");\n    context = _window.AudioContext && (new _window.AudioContext());\n  }\n  if (!context) {\n    throw new Error(\"Tuna cannot initialize because this environment does not support web audio.\");\n  }\n  connectify(context);\n  userContext = context;\n  userInstance = this;\n}\n\nfunction connectify(context) {\n  if (context.__connectified__ === true) return;\n\n  var gain = context.createGain(),\n    proto = Object.getPrototypeOf(Object.getPrototypeOf(gain)),\n    oconnect = proto.connect;\n\n  proto.connect = shimConnect;\n  context.__connectified__ = true; // Prevent overriding connect more than once\n\n  function shimConnect() {\n    var node = arguments[0];\n    arguments[0] = Super.isPrototypeOf ? (Super.isPrototypeOf(node) ? node.input : node) : (node.input || node);\n    oconnect.apply(this, arguments);\n    return node;\n  }\n}\n\nfunction dbToWAVolume(db) {\n  return Math.max(0, Math.round(100 * Math.pow(2, db / 6)) / 100);\n}\n\nfunction fmod(x, y) {\n  // http://kevin.vanzonneveld.net\n  // *     example 1: fmod(5.7, 1.3);\n  // *     returns 1: 0.5\n  var tmp, tmp2, p = 0,\n    pY = 0,\n    l = 0.0,\n    l2 = 0.0;\n\n  tmp = x.toExponential().match(/^.\\.?(.*)e(.+)$/);\n  p = parseInt(tmp[2], 10) - (tmp[1] + \"\").length;\n  tmp = y.toExponential().match(/^.\\.?(.*)e(.+)$/);\n  pY = parseInt(tmp[2], 10) - (tmp[1] + \"\").length;\n\n  if (pY > p) {\n    p = pY;\n  }\n\n  tmp2 = (x % y);\n\n  if (p < -100 || p > 20) {\n    // toFixed will give an out of bound error so we fix it like this:\n    l = Math.round(Math.log(tmp2) / Math.log(10));\n    l2 = Math.pow(10, l);\n\n    return (tmp2 / l2).toFixed(l - p) * l2;\n  } else {\n    return parseFloat(tmp2.toFixed(-p));\n  }\n}\n\nfunction sign(x) {\n  if (x === 0) {\n    return 1;\n  } else {\n    return Math.abs(x) / x;\n  }\n}\n\nfunction tanh(n) {\n  return (Math.exp(n) - Math.exp(-n)) / (Math.exp(n) + Math.exp(-n));\n}\n\nfunction initValue(userVal, defaultVal) {\n  return userVal === undefined ? defaultVal : userVal;\n}\n\nTuna.prototype.Bitcrusher = function (properties) {\n  if (!properties) {\n    properties = this.getDefaults();\n  }\n  this.bufferSize = properties.bufferSize || this.defaults.bufferSize.value;\n\n  this.input = userContext.createGain();\n  this.activateNode = userContext.createGain();\n  this.processor = userContext.createScriptProcessor(this.bufferSize, 1, 1);\n  this.output = userContext.createGain();\n\n  this.activateNode.connect(this.processor);\n  this.processor.connect(this.output);\n\n  var phaser = 0,\n    last = 0,\n    input, output, step, i, length;\n  this.processor.onaudioprocess = function (e) {\n    input = e.inputBuffer.getChannelData(0),\n      output = e.outputBuffer.getChannelData(0),\n      step = Math.pow(1 / 2, this.bits);\n    length = input.length;\n    for (i = 0; i < length; i++) {\n      phaser += this.normfreq;\n      if (phaser >= 1.0) {\n        phaser -= 1.0;\n        last = step * Math.floor(input[i] / step + 0.5);\n      }\n      output[i] = last;\n    }\n  };\n\n  this.bits = properties.bits || this.defaults.bits.value;\n  this.normfreq = initValue(properties.normfreq, this.defaults.normfreq.value);\n  this.bypass = properties.bypass || this.defaults.bypass.value;\n};\nTuna.prototype.Bitcrusher.prototype = Object.create(Super, {\n  name: {\n    value: \"Bitcrusher\"\n  },\n  defaults: {\n    writable: true,\n    value: {\n      bits: {\n        value: 4,\n        min: 1,\n        max: 16,\n        automatable: false,\n        type: INT\n      },\n      bufferSize: {\n        value: 4096,\n        min: 256,\n        max: 16384,\n        automatable: false,\n        type: INT\n      },\n      bypass: {\n        value: false,\n        automatable: false,\n        type: BOOLEAN\n      },\n      normfreq: {\n        value: 0.1,\n        min: 0.0001,\n        max: 1.0,\n        automatable: false,\n        type: FLOAT\n      }\n    }\n  },\n  bits: {\n    enumerable: true,\n    get: function () {\n      return this.processor.bits;\n    },\n    set: function (value) {\n      this.processor.bits = value;\n    }\n  },\n  normfreq: {\n    enumerable: true,\n    get: function () {\n      return this.processor.normfreq;\n    },\n    set: function (value) {\n      this.processor.normfreq = value;\n    }\n  }\n});\n\nTuna.prototype.Cabinet = function (properties) {\n  if (!properties) {\n    properties = this.getDefaults();\n  }\n  this.input = userContext.createGain();\n  this.activateNode = userContext.createGain();\n  this.convolver = this.newConvolver(properties.impulsePath || \"../impulses/impulse_guitar.wav\");\n  this.makeupNode = userContext.createGain();\n  this.output = userContext.createGain();\n\n  this.activateNode.connect(this.convolver.input);\n  this.convolver.output.connect(this.makeupNode);\n  this.makeupNode.connect(this.output);\n  //don't use makeupGain setter at init to avoid smoothing\n  this.makeupNode.gain.value = initValue(properties.makeupGain, this.defaults.makeupGain.value);\n  this.bypass = properties.bypass || this.defaults.bypass.value;\n};\nTuna.prototype.Cabinet.prototype = Object.create(Super, {\n  name: {\n    value: \"Cabinet\"\n  },\n  defaults: {\n    writable: true,\n    value: {\n      makeupGain: {\n        value: 1,\n        min: 0,\n        max: 20,\n        automatable: true,\n        type: FLOAT\n      },\n      bypass: {\n        value: false,\n        automatable: false,\n        type: BOOLEAN\n      }\n    }\n  },\n  makeupGain: {\n    enumerable: true,\n    get: function () {\n      return this.makeupNode.gain;\n    },\n    set: function (value) {\n      this.makeupNode.gain.setTargetAtTime(value, userContext.currentTime, 0.01);\n    }\n  },\n  newConvolver: {\n    value: function (impulsePath) {\n      return new userInstance.Convolver({\n        impulse: impulsePath,\n        dryLevel: 0,\n        wetLevel: 1\n      });\n    }\n  }\n});\n\nTuna.prototype.Chorus = function (properties) {\n  if (!properties) {\n    properties = this.getDefaults();\n  }\n  this.input = userContext.createGain();\n  this.attenuator = this.activateNode = userContext.createGain();\n  this.splitter = userContext.createChannelSplitter(2);\n  this.delayL = userContext.createDelay();\n  this.delayR = userContext.createDelay();\n  this.feedbackGainNodeLR = userContext.createGain();\n  this.feedbackGainNodeRL = userContext.createGain();\n  this.merger = userContext.createChannelMerger(2);\n  this.output = userContext.createGain();\n  this.delayL.delayTime = 0;\n  this.delayR.delayTime = 0;\n\n  this.lfoL = new userInstance.LFO({\n    target: this.delayL.delayTime,\n    callback: pipe\n  });\n  this.lfoR = new userInstance.LFO({\n    target: this.delayR.delayTime,\n    callback: pipe\n  });\n\n  this.input.connect(this.attenuator);\n  this.attenuator.connect(this.output);\n  this.attenuator.connect(this.splitter);\n  this.splitter.connect(this.delayL, 0);\n  this.splitter.connect(this.delayR, 1);\n  this.delayL.connect(this.feedbackGainNodeLR);\n  this.delayR.connect(this.feedbackGainNodeRL);\n  this.feedbackGainNodeLR.connect(this.delayR);\n  this.feedbackGainNodeRL.connect(this.delayL);\n  this.delayL.connect(this.merger, 0, 0);\n  this.delayR.connect(this.merger, 0, 1);\n  this.merger.connect(this.output);\n\n  this.feedback = initValue(properties.feedback, this.defaults.feedback.value);\n  this.rate = initValue(properties.rate, this.defaults.rate.value);\n  this.delay = initValue(properties.delay, this.defaults.delay.value);\n  this.depth = initValue(properties.depth, this.defaults.depth.value);\n  this.lfoR.phase = Math.PI / 2;\n  this.attenuator.gain.value = 0.6934; // 1 / (10 ^ (((20 * log10(3)) / 3) / 20))\n  this.lfoL.activate(true);\n  this.lfoR.activate(true);\n  this.bypass = properties.bypass || this.defaults.bypass.value;\n};\nTuna.prototype.Chorus.prototype = Object.create(Super, {\n  name: {\n    value: \"Chorus\"\n  },\n  defaults: {\n    writable: true,\n    value: {\n      feedback: {\n        value: 0.4,\n        min: 0,\n        max: 0.95,\n        automatable: false,\n        type: FLOAT\n      },\n      delay: {\n        value: 0.0045,\n        min: 0,\n        max: 1,\n        automatable: false,\n        type: FLOAT\n      },\n      depth: {\n        value: 0.7,\n        min: 0,\n        max: 1,\n        automatable: false,\n        type: FLOAT\n      },\n      rate: {\n        value: 1.5,\n        min: 0,\n        max: 8,\n        automatable: false,\n        type: FLOAT\n      },\n      bypass: {\n        value: false,\n        automatable: false,\n        type: BOOLEAN\n      }\n    }\n  },\n  delay: {\n    enumerable: true,\n    get: function () {\n      return this._delay;\n    },\n    set: function (value) {\n      this._delay = 0.0002 * (Math.pow(10, value) * 2);\n      this.lfoL.offset = this._delay;\n      this.lfoR.offset = this._delay;\n      this._depth = this._depth;\n    }\n  },\n  depth: {\n    enumerable: true,\n    get: function () {\n      return this._depth;\n    },\n    set: function (value) {\n      this._depth = value;\n      this.lfoL.oscillation = this._depth * this._delay;\n      this.lfoR.oscillation = this._depth * this._delay;\n    }\n  },\n  feedback: {\n    enumerable: true,\n    get: function () {\n      return this._feedback;\n    },\n    set: function (value) {\n      this._feedback = value;\n      this.feedbackGainNodeLR.gain.setTargetAtTime(this._feedback, userContext.currentTime, 0.01);\n      this.feedbackGainNodeRL.gain.setTargetAtTime(this._feedback, userContext.currentTime, 0.01);\n    }\n  },\n  rate: {\n    enumerable: true,\n    get: function () {\n      return this._rate;\n    },\n    set: function (value) {\n      this._rate = value;\n      this.lfoL.frequency = this._rate;\n      this.lfoR.frequency = this._rate;\n    }\n  }\n});\n\nTuna.prototype.Compressor = function (properties) {\n  if (!properties) {\n    properties = this.getDefaults();\n  }\n  this.input = userContext.createGain();\n  this.compNode = this.activateNode = userContext.createDynamicsCompressor();\n  this.makeupNode = userContext.createGain();\n  this.output = userContext.createGain();\n\n  this.compNode.connect(this.makeupNode);\n  this.makeupNode.connect(this.output);\n\n  this.automakeup = initValue(properties.automakeup, this.defaults.automakeup.value);\n\n  //don't use makeupGain setter at initialization to avoid smoothing\n  if (this.automakeup) {\n    this.makeupNode.gain.value = dbToWAVolume(this.computeMakeup());\n  } else {\n    this.makeupNode.gain.value = dbToWAVolume(initValue(properties.makeupGain, this.defaults.makeupGain.value));\n  }\n  this.threshold = initValue(properties.threshold, this.defaults.threshold.value);\n  this.release = initValue(properties.release, this.defaults.release.value);\n  this.attack = initValue(properties.attack, this.defaults.attack.value);\n  this.ratio = properties.ratio || this.defaults.ratio.value;\n  this.knee = initValue(properties.knee, this.defaults.knee.value);\n  this.bypass = properties.bypass || this.defaults.bypass.value;\n};\nTuna.prototype.Compressor.prototype = Object.create(Super, {\n  name: {\n    value: \"Compressor\"\n  },\n  defaults: {\n    writable: true,\n    value: {\n      threshold: {\n        value: -20,\n        min: -60,\n        max: 0,\n        automatable: true,\n        type: FLOAT\n      },\n      release: {\n        value: 250,\n        min: 10,\n        max: 2000,\n        automatable: true,\n        type: FLOAT\n      },\n      makeupGain: {\n        value: 1,\n        min: 1,\n        max: 100,\n        automatable: true,\n        type: FLOAT\n      },\n      attack: {\n        value: 1,\n        min: 0,\n        max: 1000,\n        automatable: true,\n        type: FLOAT\n      },\n      ratio: {\n        value: 4,\n        min: 1,\n        max: 50,\n        automatable: true,\n        type: FLOAT\n      },\n      knee: {\n        value: 5,\n        min: 0,\n        max: 40,\n        automatable: true,\n        type: FLOAT\n      },\n      automakeup: {\n        value: false,\n        automatable: false,\n        type: BOOLEAN\n      },\n      bypass: {\n        value: false,\n        automatable: false,\n        type: BOOLEAN\n      }\n    }\n  },\n  computeMakeup: {\n    value: function () {\n      var magicCoefficient = 4, // raise me if the output is too hot\n        c = this.compNode;\n      return -(c.threshold.value - c.threshold.value / c.ratio.value) / magicCoefficient;\n    }\n  },\n  automakeup: {\n    enumerable: true,\n    get: function () {\n      return this._automakeup;\n    },\n    set: function (value) {\n      this._automakeup = value;\n      if (this._automakeup) this.makeupGain = this.computeMakeup();\n    }\n  },\n  threshold: {\n    enumerable: true,\n    get: function () {\n      return this.compNode.threshold;\n    },\n    set: function (value) {\n      this.compNode.threshold.value = value;\n      if (this._automakeup) this.makeupGain = this.computeMakeup();\n    }\n  },\n  ratio: {\n    enumerable: true,\n    get: function () {\n      return this.compNode.ratio;\n    },\n    set: function (value) {\n      this.compNode.ratio.value = value;\n      if (this._automakeup) this.makeupGain = this.computeMakeup();\n    }\n  },\n  knee: {\n    enumerable: true,\n    get: function () {\n      return this.compNode.knee;\n    },\n    set: function (value) {\n      this.compNode.knee.value = value;\n      if (this._automakeup) this.makeupGain = this.computeMakeup();\n    }\n  },\n  attack: {\n    enumerable: true,\n    get: function () {\n      return this.compNode.attack;\n    },\n    set: function (value) {\n      this.compNode.attack.value = value / 1000;\n    }\n  },\n  release: {\n    enumerable: true,\n    get: function () {\n      return this.compNode.release;\n    },\n    set: function (value) {\n      this.compNode.release.value = value / 1000;\n    }\n  },\n  makeupGain: {\n    enumerable: true,\n    get: function () {\n      return this.makeupNode.gain;\n    },\n    set: function (value) {\n      this.makeupNode.gain.setTargetAtTime(dbToWAVolume(value), userContext.currentTime, 0.01);\n    }\n  }\n});\n\nTuna.prototype.Convolver = function (properties) {\n  if (!properties) {\n    properties = this.getDefaults();\n  }\n  this.input = userContext.createGain();\n  this.activateNode = userContext.createGain();\n  this.convolver = userContext.createConvolver();\n  this.dry = userContext.createGain();\n  this.filterLow = userContext.createBiquadFilter();\n  this.filterHigh = userContext.createBiquadFilter();\n  this.wet = userContext.createGain();\n  this.output = userContext.createGain();\n\n  this.activateNode.connect(this.filterLow);\n  this.activateNode.connect(this.dry);\n  this.filterLow.connect(this.filterHigh);\n  this.filterHigh.connect(this.convolver);\n  this.convolver.connect(this.wet);\n  this.wet.connect(this.output);\n  this.dry.connect(this.output);\n\n  //don't use setters at init to avoid smoothing\n  this.dry.gain.value = initValue(properties.dryLevel, this.defaults.dryLevel.value);\n  this.wet.gain.value = initValue(properties.wetLevel, this.defaults.wetLevel.value);\n  this.filterHigh.frequency.value = properties.highCut || this.defaults.highCut.value;\n  this.filterLow.frequency.value = properties.lowCut || this.defaults.lowCut.value;\n  this.output.gain.value = initValue(properties.level, this.defaults.level.value);\n  this.filterHigh.type = \"lowpass\";\n  this.filterLow.type = \"highpass\";\n  this.buffer = properties.impulse || \"../impulses/ir_rev_short.wav\";\n  this.bypass = properties.bypass || this.defaults.bypass.value;\n};\nTuna.prototype.Convolver.prototype = Object.create(Super, {\n  name: {\n    value: \"Convolver\"\n  },\n  defaults: {\n    writable: true,\n    value: {\n      highCut: {\n        value: 22050,\n        min: 20,\n        max: 22050,\n        automatable: true,\n        type: FLOAT\n      },\n      lowCut: {\n        value: 20,\n        min: 20,\n        max: 22050,\n        automatable: true,\n        type: FLOAT\n      },\n      dryLevel: {\n        value: 1,\n        min: 0,\n        max: 1,\n        automatable: true,\n        type: FLOAT\n      },\n      wetLevel: {\n        value: 1,\n        min: 0,\n        max: 1,\n        automatable: true,\n        type: FLOAT\n      },\n      level: {\n        value: 1,\n        min: 0,\n        max: 1,\n        automatable: true,\n        type: FLOAT\n      },\n      bypass: {\n        value: false,\n        automatable: false,\n        type: BOOLEAN\n      }\n    }\n  },\n  lowCut: {\n    get: function () {\n      return this.filterLow.frequency;\n    },\n    set: function (value) {\n      this.filterLow.frequency.setTargetAtTime(value, userContext.currentTime, 0.01);\n    }\n  },\n  highCut: {\n    get: function () {\n      return this.filterHigh.frequency;\n    },\n    set: function (value) {\n      this.filterHigh.frequency.setTargetAtTime(value, userContext.currentTime, 0.01);\n    }\n  },\n  level: {\n    get: function () {\n      return this.output.gain;\n    },\n    set: function (value) {\n      this.output.gain.setTargetAtTime(value, userContext.currentTime, 0.01);\n    }\n  },\n  dryLevel: {\n    get: function () {\n      return this.dry.gain;\n    },\n    set: function (value) {\n      this.dry.gain.setTargetAtTime(value, userContext.currentTime, 0.01);\n    }\n  },\n  wetLevel: {\n    get: function () {\n      return this.wet.gain;\n    },\n    set: function (value) {\n      this.wet.gain.setTargetAtTime(value, userContext.currentTime, 0.01);\n    }\n  },\n  buffer: {\n    enumerable: false,\n    get: function () {\n      return this.convolver.buffer;\n    },\n    set: function (impulse) {\n      var convolver = this.convolver,\n        xhr = new XMLHttpRequest();\n      if (!impulse) {\n        console.log(\"Tuna.Convolver.setBuffer: Missing impulse path!\");\n        return;\n      }\n      xhr.open(\"GET\", impulse, true);\n      xhr.responseType = \"arraybuffer\";\n      xhr.onreadystatechange = function () {\n        if (xhr.readyState === 4) {\n          if (xhr.status < 300 && xhr.status > 199 || xhr.status === 302) {\n            userContext.decodeAudioData(xhr.response, function (buffer) {\n              convolver.buffer = buffer;\n            }, function (e) {\n              if (e) console.log(\"Tuna.Convolver.setBuffer: Error decoding data\" + e);\n            });\n          }\n        }\n      };\n      xhr.send(null);\n    }\n  }\n});\n\nTuna.prototype.Delay = function (properties) {\n  if (!properties) {\n    properties = this.getDefaults();\n  }\n  this.input = userContext.createGain();\n  this.activateNode = userContext.createGain();\n  this.dry = userContext.createGain();\n  this.wet = userContext.createGain();\n  this.filter = userContext.createBiquadFilter();\n  this.delay = userContext.createDelay(10);\n  this.feedbackNode = userContext.createGain();\n  this.output = userContext.createGain();\n\n  this.activateNode.connect(this.delay);\n  this.activateNode.connect(this.dry);\n  this.delay.connect(this.filter);\n  this.filter.connect(this.feedbackNode);\n  this.feedbackNode.connect(this.delay);\n  this.feedbackNode.connect(this.wet);\n  this.wet.connect(this.output);\n  this.dry.connect(this.output);\n\n  this.delayTime = properties.delayTime || this.defaults.delayTime.value;\n  //don't use setters at init to avoid smoothing\n  this.feedbackNode.gain.value = initValue(properties.feedback, this.defaults.feedback.value);\n  this.wet.gain.value = initValue(properties.wetLevel, this.defaults.wetLevel.value);\n  this.dry.gain.value = initValue(properties.dryLevel, this.defaults.dryLevel.value);\n  this.filter.frequency.value = properties.cutoff || this.defaults.cutoff.value;\n  this.filter.type = \"lowpass\";\n  this.bypass = properties.bypass || this.defaults.bypass.value;\n};\nTuna.prototype.Delay.prototype = Object.create(Super, {\n  name: {\n    value: \"Delay\"\n  },\n  defaults: {\n    writable: true,\n    value: {\n      delayTime: {\n        value: 100,\n        min: 20,\n        max: 1000,\n        automatable: false,\n        type: FLOAT\n      },\n      feedback: {\n        value: 0.45,\n        min: 0,\n        max: 0.9,\n        automatable: true,\n        type: FLOAT\n      },\n      cutoff: {\n        value: 20000,\n        min: 20,\n        max: 20000,\n        automatable: true,\n        type: FLOAT\n      },\n      wetLevel: {\n        value: 0.5,\n        min: 0,\n        max: 1,\n        automatable: true,\n        type: FLOAT\n      },\n      dryLevel: {\n        value: 1,\n        min: 0,\n        max: 1,\n        automatable: true,\n        type: FLOAT\n      },\n      bypass: {\n        value: false,\n        automatable: false,\n        type: BOOLEAN\n      }\n    }\n  },\n  delayTime: {\n    enumerable: true,\n    get: function () {\n      return this.delay.delayTime;\n    },\n    set: function (value) {\n      this.delay.delayTime.value = value / 1000;\n    }\n  },\n  wetLevel: {\n    enumerable: true,\n    get: function () {\n      return this.wet.gain;\n    },\n    set: function (value) {\n      this.wet.gain.setTargetAtTime(value, userContext.currentTime, 0.01);\n    }\n  },\n  dryLevel: {\n    enumerable: true,\n    get: function () {\n      return this.dry.gain;\n    },\n    set: function (value) {\n      this.dry.gain.setTargetAtTime(value, userContext.currentTime, 0.01);\n    }\n  },\n  feedback: {\n    enumerable: true,\n    get: function () {\n      return this.feedbackNode.gain;\n    },\n    set: function (value) {\n      this.feedbackNode.gain.setTargetAtTime(value, userContext.currentTime, 0.01);\n    }\n  },\n  cutoff: {\n    enumerable: true,\n    get: function () {\n      return this.filter.frequency;\n    },\n    set: function (value) {\n      this.filter.frequency.setTargetAtTime(value, userContext.currentTime, 0.01);\n    }\n  }\n});\n\nTuna.prototype.Filter = function (properties) {\n  if (!properties) {\n    properties = this.getDefaults();\n  }\n  this.input = userContext.createGain();\n  this.activateNode = userContext.createGain();\n  this.filter = userContext.createBiquadFilter();\n  this.output = userContext.createGain();\n\n  this.activateNode.connect(this.filter);\n  this.filter.connect(this.output);\n\n  //don't use setters for freq and gain at init to avoid smoothing\n  this.filter.frequency.value = properties.frequency || this.defaults.frequency.value;\n  this.Q = properties.resonance || this.defaults.Q.value;\n  this.filterType = initValue(properties.filterType, this.defaults.filterType.value);\n  this.filter.gain.value = initValue(properties.gain, this.defaults.gain.value);\n  this.bypass = properties.bypass || this.defaults.bypass.value;\n};\nTuna.prototype.Filter.prototype = Object.create(Super, {\n  name: {\n    value: \"Filter\"\n  },\n  defaults: {\n    writable: true,\n    value: {\n      frequency: {\n        value: 800,\n        min: 20,\n        max: 22050,\n        automatable: true,\n        type: FLOAT\n      },\n      Q: {\n        value: 1,\n        min: 0.001,\n        max: 100,\n        automatable: true,\n        type: FLOAT\n      },\n      gain: {\n        value: 0,\n        min: -40,\n        max: 40,\n        automatable: true,\n        type: FLOAT\n      },\n      bypass: {\n        value: false,\n        automatable: false,\n        type: BOOLEAN\n      },\n      filterType: {\n        value: \"lowpass\",\n        automatable: false,\n        type: STRING\n      }\n    }\n  },\n  filterType: {\n    enumerable: true,\n    get: function () {\n      return this.filter.type;\n    },\n    set: function (value) {\n      this.filter.type = value;\n    }\n  },\n  Q: {\n    enumerable: true,\n    get: function () {\n      return this.filter.Q;\n    },\n    set: function (value) {\n      this.filter.Q.value = value;\n    }\n  },\n  gain: {\n    enumerable: true,\n    get: function () {\n      return this.filter.gain;\n    },\n    set: function (value) {\n      this.filter.gain.setTargetAtTime(value, userContext.currentTime, 0.01);\n    }\n  },\n  frequency: {\n    enumerable: true,\n    get: function () {\n      return this.filter.frequency;\n    },\n    set: function (value) {\n      this.filter.frequency.setTargetAtTime(value, userContext.currentTime, 0.01);\n    }\n  }\n});\n\nTuna.prototype.Gain = function (properties) {\n  if (!properties) {\n    properties = this.getDefaults();\n  }\n\n  this.input = userContext.createGain();\n  this.activateNode = userContext.createGain();\n  this.gainNode = userContext.createGain();\n  this.output = userContext.createGain();\n\n  this.activateNode.connect(this.gainNode);\n  this.gainNode.connect(this.output);\n\n  //don't use setter at init to avoid smoothing\n  this.gainNode.gain.value = initValue(properties.gain, this.defaults.gain.value);\n  this.bypass = properties.bypass || this.defaults.bypass.value;\n};\nTuna.prototype.Gain.prototype = Object.create(Super, {\n  name: {\n    value: \"Gain\"\n  },\n  defaults: {\n    writable: true,\n    value: {\n      bypass: {\n        value: false,\n        automatable: false,\n        type: BOOLEAN\n      },\n      gain: {\n        value: 1.0,\n        automatable: true,\n        type: FLOAT\n      }\n    }\n  },\n  gain: {\n    enumerable: true,\n    get: function () {\n      return this.gainNode.gain;\n    },\n    set: function (value) {\n      this.gainNode.gain.setTargetAtTime(value, userContext.currentTime, 0.01);\n    }\n  }\n});\n\nTuna.prototype.MoogFilter = function (properties) {\n  if (!properties) {\n    properties = this.getDefaults();\n  }\n  this.bufferSize = properties.bufferSize || this.defaults.bufferSize.value;\n\n  this.input = userContext.createGain();\n  this.activateNode = userContext.createGain();\n  this.processor = userContext.createScriptProcessor(this.bufferSize, 1, 1);\n  this.output = userContext.createGain();\n\n  this.activateNode.connect(this.processor);\n  this.processor.connect(this.output);\n\n  var in1, in2, in3, in4, out1, out2, out3, out4;\n  in1 = in2 = in3 = in4 = out1 = out2 = out3 = out4 = 0.0;\n  var input, output, f, fb, i, length, inputFactor;\n  this.processor.onaudioprocess = function (e) {\n    input = e.inputBuffer.getChannelData(0);\n    output = e.outputBuffer.getChannelData(0);\n    f = this.cutoff * 1.16;\n    inputFactor = 0.35013 * (f * f) * (f * f);\n    fb = this.resonance * (1.0 - 0.15 * f * f);\n    length = input.length;\n    for (i = 0; i < length; i++) {\n      input[i] -= out4 * fb;\n      input[i] *= inputFactor;\n      out1 = input[i] + 0.3 * in1 + (1 - f) * out1; // Pole 1\n      in1 = input[i];\n      out2 = out1 + 0.3 * in2 + (1 - f) * out2; // Pole 2\n      in2 = out1;\n      out3 = out2 + 0.3 * in3 + (1 - f) * out3; // Pole 3\n      in3 = out2;\n      out4 = out3 + 0.3 * in4 + (1 - f) * out4; // Pole 4\n      in4 = out3;\n      output[i] = out4;\n    }\n  };\n\n  this.cutoff = initValue(properties.cutoff, this.defaults.cutoff.value);\n  this.resonance = initValue(properties.resonance, this.defaults.resonance.value);\n  this.bypass = properties.bypass || this.defaults.bypass.value;\n};\nTuna.prototype.MoogFilter.prototype = Object.create(Super, {\n  name: {\n    value: \"MoogFilter\"\n  },\n  defaults: {\n    writable: true,\n    value: {\n      bufferSize: {\n        value: 4096,\n        min: 256,\n        max: 16384,\n        automatable: false,\n        type: INT\n      },\n      bypass: {\n        value: false,\n        automatable: false,\n        type: BOOLEAN\n      },\n      cutoff: {\n        value: 0.065,\n        min: 0.0001,\n        max: 1.0,\n        automatable: false,\n        type: FLOAT\n      },\n      resonance: {\n        value: 3.5,\n        min: 0.0,\n        max: 4.0,\n        automatable: false,\n        type: FLOAT\n      }\n    }\n  },\n  cutoff: {\n    enumerable: true,\n    get: function () {\n      return this.processor.cutoff;\n    },\n    set: function (value) {\n      this.processor.cutoff = value;\n    }\n  },\n  resonance: {\n    enumerable: true,\n    get: function () {\n      return this.processor.resonance;\n    },\n    set: function (value) {\n      this.processor.resonance = value;\n    }\n  }\n});\n\nTuna.prototype.Overdrive = function (properties) {\n  if (!properties) {\n    properties = this.getDefaults();\n  }\n  this.input = userContext.createGain();\n  this.activateNode = userContext.createGain();\n  this.inputDrive = userContext.createGain();\n  this.waveshaper = userContext.createWaveShaper();\n  this.outputDrive = userContext.createGain();\n  this.output = userContext.createGain();\n\n  this.activateNode.connect(this.inputDrive);\n  this.inputDrive.connect(this.waveshaper);\n  this.waveshaper.connect(this.outputDrive);\n  this.outputDrive.connect(this.output);\n\n  this.ws_table = new Float32Array(this.k_nSamples);\n  this.drive = initValue(properties.drive, this.defaults.drive.value);\n  this.outputGain = initValue(properties.outputGain, this.defaults.outputGain.value);\n  this.curveAmount = initValue(properties.curveAmount, this.defaults.curveAmount.value);\n  this.algorithmIndex = initValue(properties.algorithmIndex, this.defaults.algorithmIndex.value);\n  this.bypass = properties.bypass || this.defaults.bypass.value;\n};\nTuna.prototype.Overdrive.prototype = Object.create(Super, {\n  name: {\n    value: \"Overdrive\"\n  },\n  defaults: {\n    writable: true,\n    value: {\n      drive: {\n        value: 0.197,\n        min: 0,\n        max: 1,\n        automatable: true,\n        type: FLOAT,\n        scaled: true\n      },\n      outputGain: {\n        value: -9.154,\n        min: -46,\n        max: 0,\n        automatable: true,\n        type: FLOAT,\n        scaled: true\n      },\n      curveAmount: {\n        value: 0.979,\n        min: 0,\n        max: 1,\n        automatable: false,\n        type: FLOAT\n      },\n      algorithmIndex: {\n        value: 0,\n        min: 0,\n        max: 5,\n        automatable: false,\n        type: INT\n      },\n      bypass: {\n        value: false,\n        automatable: false,\n        type: BOOLEAN\n      }\n    }\n  },\n  k_nSamples: {\n    value: 8192\n  },\n  drive: {\n    get: function () {\n      return this.inputDrive.gain;\n    },\n    set: function (value) {\n      this.inputDrive.gain.value = value;\n    }\n  },\n  curveAmount: {\n    get: function () {\n      return this._curveAmount;\n    },\n    set: function (value) {\n      this._curveAmount = value;\n      if (this._algorithmIndex === undefined) {\n        this._algorithmIndex = 0;\n      }\n      this.waveshaperAlgorithms[this._algorithmIndex](this._curveAmount, this.k_nSamples, this.ws_table);\n      this.waveshaper.curve = this.ws_table;\n    }\n  },\n  outputGain: {\n    get: function () {\n      return this.outputDrive.gain;\n    },\n    set: function (value) {\n      this._outputGain = dbToWAVolume(value);\n      this.outputDrive.gain.setValueAtTime(this._outputGain, userContext.currentTime, 0.01);\n    }\n  },\n  algorithmIndex: {\n    get: function () {\n      return this._algorithmIndex;\n    },\n    set: function (value) {\n      this._algorithmIndex = value;\n      this.curveAmount = this._curveAmount;\n    }\n  },\n  waveshaperAlgorithms: {\n    value: [\n      function (amount, n_samples, ws_table) {\n        amount = Math.min(amount, 0.9999);\n        var k = 2 * amount / (1 - amount),\n          i, x;\n        for (i = 0; i < n_samples; i++) {\n          x = i * 2 / n_samples - 1;\n          ws_table[i] = (1 + k) * x / (1 + k * Math.abs(x));\n        }\n      },\n      function (amount, n_samples, ws_table) {\n        var i, x, y;\n        for (i = 0; i < n_samples; i++) {\n          x = i * 2 / n_samples - 1;\n          y = ((0.5 * Math.pow((x + 1.4), 2)) - 1) * (y >= 0 ? 5.8 : 1.2);\n          ws_table[i] = tanh(y);\n        }\n      },\n      function (amount, n_samples, ws_table) {\n        var i, x, y, a = 1 - amount;\n        for (i = 0; i < n_samples; i++) {\n          x = i * 2 / n_samples - 1;\n          y = x < 0 ? -Math.pow(Math.abs(x), a + 0.04) : Math.pow(x, a);\n          ws_table[i] = tanh(y * 2);\n        }\n      },\n      function (amount, n_samples, ws_table) {\n        var i, x, y, abx, a = 1 - amount > 0.99 ? 0.99 : 1 - amount;\n        for (i = 0; i < n_samples; i++) {\n          x = i * 2 / n_samples - 1;\n          abx = Math.abs(x);\n          if (abx < a) {\n            y = abx;\n          } else if (abx > a) {\n            y = a + (abx - a) / (1 + Math.pow((abx - a) / (1 - a), 2));\n          } else if (abx > 1) {\n            y = abx;\n          }\n          ws_table[i] = sign(x) * y * (1 / ((a + 1) / 2));\n        }\n      },\n      function (amount, n_samples, ws_table) { // fixed curve, amount doesn't do anything, the distortion is just from the drive\n        var i, x;\n        for (i = 0; i < n_samples; i++) {\n          x = i * 2 / n_samples - 1;\n          if (x < -0.08905) {\n            ws_table[i] = (-3 / 4) * (1 - (Math.pow((1 - (Math.abs(x) - 0.032857)), 12)) + (1 / 3) * (Math.abs(x) - 0.032847)) + 0.01;\n          } else if (x >= -0.08905 && x < 0.320018) {\n            ws_table[i] = (-6.153 * (x * x)) + 3.9375 * x;\n          } else {\n            ws_table[i] = 0.630035;\n          }\n        }\n      },\n      function (amount, n_samples, ws_table) {\n        var a = 2 + Math.round(amount * 14),\n          // we go from 2 to 16 bits, keep in mind for the UI\n          bits = Math.round(Math.pow(2, a - 1)),\n          // real number of quantization steps divided by 2\n          i, x;\n        for (i = 0; i < n_samples; i++) {\n          x = i * 2 / n_samples - 1;\n          ws_table[i] = Math.round(x * bits) / bits;\n        }\n      }\n    ]\n  }\n});\n\nTuna.prototype.Panner = function (properties) {\n  if (!properties) {\n    properties = this.getDefaults();\n  }\n\n  this.input = userContext.createGain();\n  this.activateNode = userContext.createGain();\n  this.panner = userContext.createStereoPanner();\n  this.output = userContext.createGain();\n\n  this.activateNode.connect(this.panner);\n  this.panner.connect(this.output);\n\n  this.pan = initValue(properties.pan, this.defaults.pan.value);\n  this.bypass = properties.bypass || this.defaults.bypass.value;\n};\nTuna.prototype.Panner.prototype = Object.create(Super, {\n  name: {\n    value: \"Panner\"\n  },\n  defaults: {\n    writable: true,\n    value: {\n      bypass: {\n        value: false,\n        automatable: false,\n        type: BOOLEAN\n      },\n      pan: {\n        value: 0.0,\n        min: -1.0,\n        max: 1.0,\n        automatable: true,\n        type: FLOAT\n      }\n    }\n  },\n  pan: {\n    enumerable: true,\n    get: function () {\n      return this.panner.pan;\n    },\n    set: function (value) {\n      this.panner.pan.value = value;\n    }\n  }\n});\n\nTuna.prototype.Phaser = function (properties) {\n  if (!properties) {\n    properties = this.getDefaults();\n  }\n  this.input = userContext.createGain();\n  this.splitter = this.activateNode = userContext.createChannelSplitter(2);\n  this.filtersL = [];\n  this.filtersR = [];\n  this.feedbackGainNodeL = userContext.createGain();\n  this.feedbackGainNodeR = userContext.createGain();\n  this.merger = userContext.createChannelMerger(2);\n  this.filteredSignal = userContext.createGain();\n  this.output = userContext.createGain();\n  this.lfoL = new userInstance.LFO({\n    target: this.filtersL,\n    callback: this.callback\n  });\n  this.lfoR = new userInstance.LFO({\n    target: this.filtersR,\n    callback: this.callback\n  });\n\n  var i = this.stage;\n  while (i--) {\n    this.filtersL[i] = userContext.createBiquadFilter();\n    this.filtersR[i] = userContext.createBiquadFilter();\n    this.filtersL[i].type = \"allpass\";\n    this.filtersR[i].type = \"allpass\";\n  }\n  this.input.connect(this.splitter);\n  this.input.connect(this.output);\n  this.splitter.connect(this.filtersL[0], 0, 0);\n  this.splitter.connect(this.filtersR[0], 1, 0);\n  this.connectInOrder(this.filtersL);\n  this.connectInOrder(this.filtersR);\n  this.filtersL[this.stage - 1].connect(this.feedbackGainNodeL);\n  this.filtersL[this.stage - 1].connect(this.merger, 0, 0);\n  this.filtersR[this.stage - 1].connect(this.feedbackGainNodeR);\n  this.filtersR[this.stage - 1].connect(this.merger, 0, 1);\n  this.feedbackGainNodeL.connect(this.filtersL[0]);\n  this.feedbackGainNodeR.connect(this.filtersR[0]);\n  this.merger.connect(this.output);\n\n  this.rate = initValue(properties.rate, this.defaults.rate.value);\n  this.baseModulationFrequency = properties.baseModulationFrequency || this.defaults.baseModulationFrequency.value;\n  this.depth = initValue(properties.depth, this.defaults.depth.value);\n  this.feedback = initValue(properties.feedback, this.defaults.feedback.value);\n  this.stereoPhase = initValue(properties.stereoPhase, this.defaults.stereoPhase.value);\n\n  this.lfoL.activate(true);\n  this.lfoR.activate(true);\n  this.bypass = properties.bypass || this.defaults.bypass.value;\n};\nTuna.prototype.Phaser.prototype = Object.create(Super, {\n  name: {\n    value: \"Phaser\"\n  },\n  stage: {\n    value: 4\n  },\n  defaults: {\n    writable: true,\n    value: {\n      rate: {\n        value: 0.1,\n        min: 0,\n        max: 8,\n        automatable: false,\n        type: FLOAT\n      },\n      depth: {\n        value: 0.6,\n        min: 0,\n        max: 1,\n        automatable: false,\n        type: FLOAT\n      },\n      feedback: {\n        value: 0.7,\n        min: 0,\n        max: 1,\n        automatable: false,\n        type: FLOAT\n      },\n      stereoPhase: {\n        value: 40,\n        min: 0,\n        max: 180,\n        automatable: false,\n        type: FLOAT\n      },\n      baseModulationFrequency: {\n        value: 700,\n        min: 500,\n        max: 1500,\n        automatable: false,\n        type: FLOAT\n      },\n      bypass: {\n        value: false,\n        automatable: false,\n        type: BOOLEAN\n      }\n    }\n  },\n  callback: {\n    value: function (filters, value) {\n      for (var stage = 0; stage < 4; stage++) {\n        filters[stage].frequency.value = value;\n      }\n    }\n  },\n  depth: {\n    get: function () {\n      return this._depth;\n    },\n    set: function (value) {\n      this._depth = value;\n      this.lfoL.oscillation = this._baseModulationFrequency * this._depth;\n      this.lfoR.oscillation = this._baseModulationFrequency * this._depth;\n    }\n  },\n  rate: {\n    get: function () {\n      return this._rate;\n    },\n    set: function (value) {\n      this._rate = value;\n      this.lfoL.frequency = this._rate;\n      this.lfoR.frequency = this._rate;\n    }\n  },\n  baseModulationFrequency: {\n    enumerable: true,\n    get: function () {\n      return this._baseModulationFrequency;\n    },\n    set: function (value) {\n      this._baseModulationFrequency = value;\n      this.lfoL.offset = this._baseModulationFrequency;\n      this.lfoR.offset = this._baseModulationFrequency;\n      this.depth = this._depth;\n    }\n  },\n  feedback: {\n    get: function () {\n      return this._feedback;\n    },\n    set: function (value) {\n      this._feedback = value;\n      this.feedbackGainNodeL.gain.setTargetAtTime(this._feedback, userContext.currentTime, 0.01);\n      this.feedbackGainNodeR.gain.setTargetAtTime(this._feedback, userContext.currentTime, 0.01);\n    }\n  },\n  stereoPhase: {\n    get: function () {\n      return this._stereoPhase;\n    },\n    set: function (value) {\n      this._stereoPhase = value;\n      var newPhase = this.lfoL._phase + this._stereoPhase * Math.PI / 180;\n      newPhase = fmod(newPhase, 2 * Math.PI);\n      this.lfoR._phase = newPhase;\n    }\n  }\n});\n\nTuna.prototype.PingPongDelay = function (properties) {\n  if (!properties) {\n    properties = this.getDefaults();\n  }\n  this.input = userContext.createGain();\n  this.wet = userContext.createGain();\n  this.stereoToMonoMix = userContext.createGain();\n  this.feedbackLevel = userContext.createGain();\n  this.output = userContext.createGain();\n  this.delayLeft = userContext.createDelay(10);\n  this.delayRight = userContext.createDelay(10);\n\n  this.activateNode = userContext.createGain();\n  this.splitter = userContext.createChannelSplitter(2);\n  this.merger = userContext.createChannelMerger(2);\n\n  this.activateNode.connect(this.splitter);\n  this.splitter.connect(this.stereoToMonoMix, 0, 0);\n  this.splitter.connect(this.stereoToMonoMix, 1, 0);\n  this.stereoToMonoMix.gain.value = .5;\n  this.stereoToMonoMix.connect(this.wet);\n  this.wet.connect(this.delayLeft);\n  this.feedbackLevel.connect(this.wet);\n  this.delayLeft.connect(this.delayRight);\n  this.delayRight.connect(this.feedbackLevel);\n  this.delayLeft.connect(this.merger, 0, 0);\n  this.delayRight.connect(this.merger, 0, 1);\n  this.merger.connect(this.output);\n  this.activateNode.connect(this.output);\n\n  this.delayTimeLeft = properties.delayTimeLeft !== undefined ? properties.delayTimeLeft : this.defaults.delayTimeLeft.value;\n  this.delayTimeRight = properties.delayTimeRight !== undefined ? properties.delayTimeRight : this.defaults.delayTimeRight.value;\n  this.feedbackLevel.gain.value = properties.feedback !== undefined ? properties.feedback : this.defaults.feedback.value;\n  this.wet.gain.value = properties.wetLevel !== undefined ? properties.wetLevel : this.defaults.wetLevel.value;\n  this.bypass = properties.bypass || this.defaults.bypass.value;\n};\nTuna.prototype.PingPongDelay.prototype = Object.create(Super, {\n  name: {\n    value: \"PingPongDelay\"\n  },\n  delayTimeLeft: {\n    enumerable: true,\n    get: function () {\n      return this._delayTimeLeft;\n    },\n    set: function (value) {\n      this._delayTimeLeft = value;\n      this.delayLeft.delayTime.value = value / 1000;\n    }\n  },\n  delayTimeRight: {\n    enumerable: true,\n    get: function () {\n      return this._delayTimeRight;\n    },\n    set: function (value) {\n      this._delayTimeRight = value;\n      this.delayRight.delayTime.value = value / 1000;\n    }\n  },\n  wetLevel: {\n    enumerable: true,\n    get: function () {\n      return this.wet.gain;\n    },\n    set: function (value) {\n      this.wet.gain.setTargetAtTime(value, userContext.currentTime, 0.01);\n    }\n  },\n  feedback: {\n    enumerable: true,\n    get: function () {\n      return this.feedbackLevel.gain;\n    },\n    set: function (value) {\n      this.feedbackLevel.gain.setTargetAtTime(value, userContext.currentTime, 0.01);\n    }\n  },\n  defaults: {\n    writable: true,\n    value: {\n      delayTimeLeft: {\n        value: 200,\n        min: 1,\n        max: 10000,\n        automatable: false,\n        type: INT\n      },\n      delayTimeRight: {\n        value: 400,\n        min: 1,\n        max: 10000,\n        automatable: false,\n        type: INT\n      },\n      feedback: {\n        value: 0.3,\n        min: 0,\n        max: 1,\n        automatable: true,\n        type: FLOAT\n      },\n      wetLevel: {\n        value: 0.5,\n        min: 0,\n        max: 1,\n        automatable: true,\n        type: FLOAT\n      },\n      bypass: {\n        value: false,\n        automatable: false,\n        type: BOOLEAN\n      }\n    }\n  }\n});\n\nTuna.prototype.Tremolo = function (properties) {\n  if (!properties) {\n    properties = this.getDefaults();\n  }\n  this.input = userContext.createGain();\n  this.splitter = this.activateNode = userContext.createChannelSplitter(2);\n  this.amplitudeL = userContext.createGain();\n  this.amplitudeR = userContext.createGain();\n  this.merger = userContext.createChannelMerger(2);\n  this.output = userContext.createGain();\n  this.lfoL = new userInstance.LFO({\n    target: this.amplitudeL.gain,\n    callback: pipe\n  });\n  this.lfoR = new userInstance.LFO({\n    target: this.amplitudeR.gain,\n    callback: pipe\n  });\n\n  this.input.connect(this.splitter);\n  this.splitter.connect(this.amplitudeL, 0);\n  this.splitter.connect(this.amplitudeR, 1);\n  this.amplitudeL.connect(this.merger, 0, 0);\n  this.amplitudeR.connect(this.merger, 0, 1);\n  this.merger.connect(this.output);\n\n  this.rate = properties.rate || this.defaults.rate.value;\n  this.intensity = initValue(properties.intensity, this.defaults.intensity.value);\n  this.stereoPhase = initValue(properties.stereoPhase, this.defaults.stereoPhase.value);\n\n  this.lfoL.offset = 1 - (this.intensity / 2);\n  this.lfoR.offset = 1 - (this.intensity / 2);\n  this.lfoL.phase = this.stereoPhase * Math.PI / 180;\n\n  this.lfoL.activate(true);\n  this.lfoR.activate(true);\n  this.bypass = properties.bypass || this.defaults.bypass.value;\n};\nTuna.prototype.Tremolo.prototype = Object.create(Super, {\n  name: {\n    value: \"Tremolo\"\n  },\n  defaults: {\n    writable: true,\n    value: {\n      intensity: {\n        value: 0.3,\n        min: 0,\n        max: 1,\n        automatable: false,\n        type: FLOAT\n      },\n      stereoPhase: {\n        value: 0,\n        min: 0,\n        max: 180,\n        automatable: false,\n        type: FLOAT\n      },\n      rate: {\n        value: 5,\n        min: 0.1,\n        max: 11,\n        automatable: false,\n        type: FLOAT\n      },\n      bypass: {\n        value: false,\n        automatable: false,\n        type: BOOLEAN\n      }\n    }\n  },\n  intensity: {\n    enumerable: true,\n    get: function () {\n      return this._intensity;\n    },\n    set: function (value) {\n      this._intensity = value;\n      this.lfoL.offset = 1 - this._intensity / 2;\n      this.lfoR.offset = 1 - this._intensity / 2;\n      this.lfoL.oscillation = this._intensity;\n      this.lfoR.oscillation = this._intensity;\n    }\n  },\n  rate: {\n    enumerable: true,\n    get: function () {\n      return this._rate;\n    },\n    set: function (value) {\n      this._rate = value;\n      this.lfoL.frequency = this._rate;\n      this.lfoR.frequency = this._rate;\n    }\n  },\n  stereoPhase: {\n    enumerable: true,\n    get: function () {\n      return this._stereoPhase;\n    },\n    set: function (value) {\n      this._stereoPhase = value;\n      var newPhase = this.lfoL._phase + this._stereoPhase * Math.PI / 180;\n      newPhase = fmod(newPhase, 2 * Math.PI);\n      this.lfoR.phase = newPhase;\n    }\n  }\n});\n\nTuna.prototype.WahWah = function (properties) {\n  if (!properties) {\n    properties = this.getDefaults();\n  }\n  this.input = userContext.createGain();\n  this.activateNode = userContext.createGain();\n  this.envelopeFollower = new userInstance.EnvelopeFollower({\n    target: this,\n    callback: function (context, value) {\n      context.sweep = value;\n    }\n  });\n  this.filterBp = userContext.createBiquadFilter();\n  this.filterPeaking = userContext.createBiquadFilter();\n  this.output = userContext.createGain();\n\n  //Connect AudioNodes\n  this.activateNode.connect(this.filterBp);\n  this.filterBp.connect(this.filterPeaking);\n  this.filterPeaking.connect(this.output);\n\n  //Set Properties\n  this.init();\n  this.automode = initValue(properties.automode, this.defaults.automode.value);\n  this.resonance = properties.resonance || this.defaults.resonance.value;\n  this.sensitivity = initValue(properties.sensitivity, this.defaults.sensitivity.value);\n  this.baseFrequency = initValue(properties.baseFrequency, this.defaults.baseFrequency.value);\n  this.excursionOctaves = properties.excursionOctaves || this.defaults.excursionOctaves.value;\n  this.sweep = initValue(properties.sweep, this.defaults.sweep.value);\n\n  this.activateNode.gain.value = 2;\n  this.envelopeFollower.activate(true);\n  this.bypass = properties.bypass || this.defaults.bypass.value;\n};\nTuna.prototype.WahWah.prototype = Object.create(Super, {\n  name: {\n    value: \"WahWah\"\n  },\n  defaults: {\n    writable: true,\n    value: {\n      automode: {\n        value: true,\n        automatable: false,\n        type: BOOLEAN\n      },\n      baseFrequency: {\n        value: 0.153,\n        min: 0,\n        max: 1,\n        automatable: false,\n        type: FLOAT\n      },\n      excursionOctaves: {\n        value: 3.3,\n        min: 1,\n        max: 6,\n        automatable: false,\n        type: FLOAT\n      },\n      sweep: {\n        value: 0.35,\n        min: 0,\n        max: 1,\n        automatable: false,\n        type: FLOAT\n      },\n      resonance: {\n        value: 19,\n        min: 1,\n        max: 100,\n        automatable: false,\n        type: FLOAT\n      },\n      sensitivity: {\n        value: -0.5,\n        min: -1,\n        max: 1,\n        automatable: false,\n        type: FLOAT\n      },\n      bypass: {\n        value: false,\n        automatable: false,\n        type: BOOLEAN\n      }\n    }\n  },\n  automode: {\n    get: function () {\n      return this._automode;\n    },\n    set: function (value) {\n      this._automode = value;\n      if (value) {\n        this.activateNode.connect(this.envelopeFollower.input);\n        this.envelopeFollower.activate(true);\n      } else {\n        this.envelopeFollower.activate(false);\n        this.activateNode.disconnect();\n        this.activateNode.connect(this.filterBp);\n      }\n    }\n  },\n  filterFreqTimeout: {\n    writable: true,\n    value: 0\n  },\n  setFilterFreq: {\n    value: function () {\n      try {\n        this.filterBp.frequency.value = Math.min(22050, this._baseFrequency + this._excursionFrequency * this._sweep);\n        this.filterPeaking.frequency.value = Math.min(22050, this._baseFrequency + this._excursionFrequency * this._sweep);\n      } catch (e) {\n        clearTimeout(this.filterFreqTimeout);\n        //put on the next cycle to let all init properties be set\n        this.filterFreqTimeout = setTimeout(function () {\n          this.setFilterFreq();\n        }.bind(this), 0);\n      }\n    }\n  },\n  sweep: {\n    enumerable: true,\n    get: function () {\n      return this._sweep;\n    },\n    set: function (value) {\n      this._sweep = Math.pow(value > 1 ? 1 : value < 0 ? 0 : value, this._sensitivity);\n      this.setFilterFreq();\n    }\n  },\n  baseFrequency: {\n    enumerable: true,\n    get: function () {\n      return this._baseFrequency;\n    },\n    set: function (value) {\n      this._baseFrequency = 50 * Math.pow(10, value * 2);\n      this._excursionFrequency = Math.min(userContext.sampleRate / 2, this.baseFrequency * Math.pow(2, this._excursionOctaves));\n      this.setFilterFreq();\n    }\n  },\n  excursionOctaves: {\n    enumerable: true,\n    get: function () {\n      return this._excursionOctaves;\n    },\n    set: function (value) {\n      this._excursionOctaves = value;\n      this._excursionFrequency = Math.min(userContext.sampleRate / 2, this.baseFrequency * Math.pow(2, this._excursionOctaves));\n      this.setFilterFreq();\n    }\n  },\n  sensitivity: {\n    enumerable: true,\n    get: function () {\n      return this._sensitivity;\n    },\n    set: function (value) {\n      this._sensitivity = Math.pow(10, value);\n    }\n  },\n  resonance: {\n    enumerable: true,\n    get: function () {\n      return this._resonance;\n    },\n    set: function (value) {\n      this._resonance = value;\n      this.filterPeaking.Q.value = this._resonance;\n    }\n  },\n  init: {\n    value: function () {\n      this.output.gain.value = 1;\n      this.filterPeaking.type = \"peaking\";\n      this.filterBp.type = \"bandpass\";\n      this.filterPeaking.frequency.value = 100;\n      this.filterPeaking.gain.value = 20;\n      this.filterPeaking.Q.value = 5;\n      this.filterBp.frequency.value = 100;\n      this.filterBp.Q.value = 1;\n    }\n  }\n});\n\nTuna.prototype.EnvelopeFollower = function (properties) {\n  if (!properties) {\n    properties = this.getDefaults();\n  }\n  this.input = userContext.createGain();\n  this.jsNode = this.output = userContext.createScriptProcessor(this.buffersize, 1, 1);\n\n  this.input.connect(this.output);\n\n  this.attackTime = initValue(properties.attackTime, this.defaults.attackTime.value);\n  this.releaseTime = initValue(properties.releaseTime, this.defaults.releaseTime.value);\n  this._envelope = 0;\n  this.target = properties.target || {};\n  this.callback = properties.callback || function () { };\n\n  this.bypass = properties.bypass || this.defaults.bypass.value;\n};\nTuna.prototype.EnvelopeFollower.prototype = Object.create(Super, {\n  name: {\n    value: \"EnvelopeFollower\"\n  },\n  defaults: {\n    value: {\n      attackTime: {\n        value: 0.003,\n        min: 0,\n        max: 0.5,\n        automatable: false,\n        type: FLOAT\n      },\n      releaseTime: {\n        value: 0.5,\n        min: 0,\n        max: 0.5,\n        automatable: false,\n        type: FLOAT\n      },\n      bypass: {\n        value: false,\n        automatable: false,\n        type: BOOLEAN\n      }\n    }\n  },\n  buffersize: {\n    value: 256\n  },\n  envelope: {\n    value: 0\n  },\n  sampleRate: {\n    value: 44100\n  },\n  attackTime: {\n    enumerable: true,\n    get: function () {\n      return this._attackTime;\n    },\n    set: function (value) {\n      this._attackTime = value;\n      this._attackC = Math.exp(-1 / this._attackTime * this.sampleRate / this.buffersize);\n    }\n  },\n  releaseTime: {\n    enumerable: true,\n    get: function () {\n      return this._releaseTime;\n    },\n    set: function (value) {\n      this._releaseTime = value;\n      this._releaseC = Math.exp(-1 / this._releaseTime * this.sampleRate / this.buffersize);\n    }\n  },\n  callback: {\n    get: function () {\n      return this._callback;\n    },\n    set: function (value) {\n      if (typeof value === \"function\") {\n        this._callback = value;\n      } else {\n        console.error(\"tuna.js: \" + this.name + \": Callback must be a function!\");\n      }\n    }\n  },\n  target: {\n    get: function () {\n      return this._target;\n    },\n    set: function (value) {\n      this._target = value;\n    }\n  },\n  activate: {\n    value: function (doActivate) {\n      this.activated = doActivate;\n      if (doActivate) {\n        this.jsNode.connect(userContext.destination);\n        this.jsNode.onaudioprocess = this.returnCompute(this);\n      } else {\n        this.jsNode.disconnect();\n        this.jsNode.onaudioprocess = null;\n      }\n      if (this.activateCallback) {\n        this.activateCallback(doActivate);\n      }\n    }\n  },\n  returnCompute: {\n    value: function (instance) {\n      return function (event) {\n        instance.compute(event);\n      };\n    }\n  },\n  compute: {\n    value: function (event) {\n      var count = event.inputBuffer.getChannelData(0).length,\n        channels = event.inputBuffer.numberOfChannels,\n        current, chan, rms, i;\n      chan = rms = i = 0;\n\n      for (chan = 0; chan < channels; ++chan) {\n        for (i = 0; i < count; ++i) {\n          current = event.inputBuffer.getChannelData(chan)[i];\n          rms += (current * current);\n        }\n      }\n      rms = Math.sqrt(rms / channels);\n\n      if (this._envelope < rms) {\n        this._envelope *= this._attackC;\n        this._envelope += (1 - this._attackC) * rms;\n      } else {\n        this._envelope *= this._releaseC;\n        this._envelope += (1 - this._releaseC) * rms;\n      }\n      this._callback(this._target, this._envelope);\n    }\n  }\n});\n\nTuna.prototype.LFO = function (properties) {\n  if (!properties) {\n    properties = this.getDefaults();\n  }\n\n  //Instantiate AudioNode\n  this.input = userContext.createGain();\n  this.output = new AudioWorkletNode(userContext, 'lfo', {\n    processorOptions: { sampleRate: userContext.sampleRate }, channelCount: 1, channelCountMode: 'explicit', outputChannelCount: [1]\n  });\n\n  this.output.connect(properties.target);\n  this.activateNode = userContext.destination;\n\n  //Set Properties\n  this.frequency = initValue(properties.frequency, this.defaults.frequency.value);\n  this.offset = initValue(properties.offset, this.defaults.offset.value);\n  this.oscillation = initValue(properties.oscillation, this.defaults.oscillation.value);\n  this.phase = initValue(properties.phase, this.defaults.phase.value);\n  // this.target = properties.target || {};\n  this.bypass = properties.bypass || this.defaults.bypass.value;\n\n  this.output.port.postMessage({\n    type: 'set-all',\n    value: { oscillation: this.oscillation, offset: this.offset, frequency: this.frequency, phase: this.phase }\n  });\n};\nTuna.prototype.LFO.prototype = Object.create(Super, {\n  name: {\n    value: \"LFO\"\n  },\n  bufferSize: {\n    value: 128\n  },\n  sampleRate: {\n    value: 44100\n  },\n  defaults: {\n    value: {\n      frequency: {\n        value: 1,\n        min: 0,\n        max: 20,\n        automatable: false,\n        type: FLOAT\n      },\n      offset: {\n        value: 0.85,\n        min: 0,\n        max: 22049,\n        automatable: false,\n        type: FLOAT\n      },\n      oscillation: {\n        value: 0.3,\n        min: -22050,\n        max: 22050,\n        automatable: false,\n        type: FLOAT\n      },\n      phase: {\n        value: 0,\n        min: 0,\n        max: 2 * Math.PI,\n        automatable: false,\n        type: FLOAT\n      },\n      bypass: {\n        value: false,\n        automatable: false,\n        type: BOOLEAN\n      }\n    }\n  },\n  frequency: {\n    get: function () {\n      return this._frequency;\n    },\n    set: function (value) {\n      this._frequency = value;\n      this._phaseInc = 2 * Math.PI * this._frequency * this.bufferSize / this.sampleRate;\n      this.output.port.postMessage({\n        type: 'set-frequency',\n        value: this.frequency\n      });\n    }\n  },\n  offset: {\n    get: function () {\n      return this._offset;\n    },\n    set: function (value) {\n      this._offset = value;\n      this.output.port.postMessage({\n        type: 'set-offset',\n        value: this.offset\n      });\n    }\n  },\n  oscillation: {\n    get: function () {\n      return this._oscillation;\n    },\n    set: function (value) {\n      this._oscillation = value;\n      this.output.port.postMessage({\n        type: 'set-oscillation',\n        value: this.oscillation\n      });\n    }\n  },\n  phase: {\n    get: function () {\n      return this._phase;\n    },\n    set: function (value) {\n      this._phase = value;\n      this.output.port.postMessage({\n        type: 'set-phase',\n        value: this.phase\n      });\n    }\n  },\n  activate: {\n    value: function (doActivate) {\n      if (doActivate) {\n        // this.output.connect(userContext.destination);\n        if (this.activateCallback) {\n          this.activateCallback(doActivate);\n        }\n      } else {\n        // this.output.disconnect();\n      }\n    }\n  }\n});\n\nTuna.toString = Tuna.prototype.toString = function () {\n  return \"Please visit https://github.com/Theodeus/tuna/wiki for instructions on how to use Tuna.js\";\n};\n"],"names":["root","factory","exports","module","define","amd","a","i","self","ADSR","Node","constructor","flow","options","super","name","position","Vector","width","dataType","state","DefaultState","style","rowHeight","spacing","terminalStyle","this","proxyParamNode","AudioWorkletNode","flowConnect","audioContext","numberOfOutputs","parameterData","param","proxyParam","parameters","get","outputs","ref","setMinMax","s","clamp","setupUI","minInput","on","maxInput","aInput","adsrChanged","dInput","sInput","rInput","inputs","trigger","currTime","currentTime","d","r","cancelScheduledValues","setValueAtTime","min","linearRampToValueAtTime","max","denormalize","value","handleAudioConnections","totalDur","envelopeInput","Zero","stopAutomation","port","postMessage","type","atck","dcay","rlse","duration","createEnvelope","pointColor","disabled","createInput","propName","height","InputType","Number","grow","step","precision","ui","append","createHozLayout","createLabel","_inst","connector","end","AudioParam","offset","Math","minValue","connect","_connector","_start","disconnect","AudioBufferSource","fileInput","processFile","async","file","cached","arrayBufferCache","arrayBuffer","set","processArrayBuffer","audioBufferCache","decodeAudioData","buffer","setOutputs","createSource","Automate","envelope","finiteLoop","startAutomation","durationInput","loopToggle","auto","values","currVal","x","y","automateDuration","length","loop","schedule","timerId","window","setInterval","scheduleEndTime","clearInterval","time","iterations","forEach","input","output","autoToggle","createToggle","BiquadFilter","inGain","createGain","outGain","biquadFilter","createBiquadFilter","gain","Q","frequency","detune","filterType","_","data","setBypass","typeSelect","watch","bypass","createSelect","bypassToggle","BitcrusherEffect","bitcrusher","numberOfInputs","processorOptions","bufferSize","bitsSlider","paramsChanged","normFreqSlider","bitsInput","normFreqInput","bits","isInteger","floor","normFreq","createSlider","ChannelMerger","merger","createChannelMerger","addChannelButton","newTerm","Terminal","TerminalType","IN","addTerminal","index","createButton","ChannelSplitter","oldNoOfChannels","channelCountMode","newNoOfChannels","checkChannels","splitter","createChannelSplitter","terminalsToRemove","newTerminal","OUT","cntr","_cntr","push","term","removeTerminal","Tuna","ChorusEffect","__tuna__","chorus","Chorus","Object","assign","delay","depth","feedback","rate","_oldVal","newVal","delaySlider","delayInput","depthSlider","depthInput","feedbackSlider","feedbackInput","rateSlider","rateInput","Convolver","convolver","createConvolver","Debug","debugNode","onmessage","e","FlowState","Stopped","DelayEffect","dryGain","wetGain","filter","createDelay","feedbackNode","delayTime","cutoff","wet","dry","delayChanged","feedbackChanged","setTargetAtTime","cutoffChanged","cutoffSlider","wetChanged","wetSlider","dryChanged","drySlider","cutoffInput","wetInput","dryInput","Destination","masterVolumeGainNode","destination","Distorter","oversampleOptions","distorter","createWaveShaper","oversample","curve","makeDistortionCurve","includes","amount","parseInt","bind","k","n_samples","Float32Array","deg","PI","abs","amountInput","oversampleSelect","DynamicsCompressor","compressor","createDynamicsCompressor","threshold","ratio","knee","attack","release","Equalizer","vSliders","filters","frequencies","freqDisplay","freq","isInRange","stacks","_freq","vSlider","createVSlider","stack","createStack","childs","align","Align","Center","eq1","eq2","eq3","eq4","eq5","eq6","eq7","eq8","eq9","eq10","FrequencyAnalyser","fftSizes","analyser","createAnalyser","fftSize","getFFTSize","round","actualFFTSize","fftSizeLabel","text","display","screenPos","currFreq","subtract","transform","displayConfigs","canvas","frequencyBinCount","sampleRate","freqLabel","fftSizeSlider","Right","createDisplay","renderer","args","customRenderer","context","percent","hue","frequencyData","Uint8Array","orgHeight","barWidth","getByteFrequencyData","fillStyle","fillRect","Gain","Metronome","volumeGainNode","proxyParamSourceNode","playbackRate","fillBuffer","bpmInput","source","loopEnd","bpm","freqInput","stopSource","playSource","ctx","createBuffer","channel","getChannelData","phase","amp","durationFrames","f","sin","Constant","TAU","FlowConnectState","audioSource","AudioBufferSourceNode","start","stop","Microphone","stream","microphone","getMicrophone","then","error","Log","catch","navigator","mediaDevices","getUserMedia","audio","video","createMediaStreamSource","MoogEffect","moog","resonance","resonanceSlider","resonanceInput","Noise","noise","channelCount","outputChannelCount","noiseSelect","Oscillator","types","freqProxy","detuneProxy","inputsUI","freqHozLayout","oscillator","detuneHozLayout","startOscillator","stopOscillator","createOscillator","isConnected","freqSlider","detuneSlider","detuneInput","typeGroup","createRadioGroup","OverdriveEffect","overdrive","Overdrive","drive","outputGain","curveAmount","algorithmIndex","algorithm","driveSlider","driveInput","outGainSlider","outGainInput","curveAmountSlider","curveAmountInput","algorithmSelect","PingPongEffect","pingPong","PingPongDelay","delayTimeLeft","delayLeft","delayTimeRight","delayRight","wetLevel","delayLeftSlider","delayLeftInput","delayRightSlider","delayRightInput","Source","ArrayBuffer","propagateChannelChange","executionGraph","propagate","currNode","call","prevChannelCount","numberOfChannels","SpatialPanner","z","orientationX","orientationY","orientationZ","posX","listener","positionX","posY","positionY","posZ","panner","PannerNode","panningModel","distanceModel","positionZ","panSlider2D","createSlider2D","padding","zSlider","zInput","SpectrogramAnalyser","colorScales","colorScaleToInterp","colorScale","currInterpolator","Color","scale","shouldRender","canvasType","CanvasType","HTMLCanvasElement","colorScaleSelect","barHeight","normalize","globalCompositeOperation","drawImage","StereoPanner","StereoPannerNode","pan","panSlider","panInput","TremoloEffect","tremolo","Tremolo","intensity","stereoPhase","intensitySlider","intensityInput","stereoPhaseSlider","stereoPhaseInput","WaveformAnalyser","waveformData","getByteTimeDomainData","strokeStyle","beginPath","moveTo","lineTo","stroke","ArrayIndex","ArraySource","process","numberToggle","arrayInput","stepInput","numberToggled","rangeToggled","rangeLayout","visible","number","range","rangeStack","inputEl","validity","patternMismatch","split","map","item","trim","rangeToggle","rangeInputLayout","pattern","BooleanSource","toggle","Buffer","size","sizeInput","getInputs","shift","splice","Compare","select","res","fontSize","Delay","eventQueue","List","b","timeoutId","head","performance","now","bufferedEvent","removeFirst","emit","eventNode","ListNode","setTimeout","triggerEvent","remaining","clearTimeout","FileSource","GlobalEvent","GlobalEventType","Emitter","Receiver","prevEvent","getNewUUID","globalEvents","eventId","__","prevVal","off","eventInput","Text","JsonSource","JSON","parse","backgroundColor","terminal","log","addEventButton","addNewTerminal","addDataButton","NumberRange","startValue","NumberSource","fractionalToggle","fractional","Property","Random","random","getRandom","StringSource","SyncData","hold","eventIds","inst","syncTypeInput","syncType","addButton","id","hasOwnProperty","connectors","getData","SyncEvent","events","Timer","lastTrigger","MIN_VALUE","current","emitValue","ToArray","Array","fill","inData","ToVector","isArray","result","StandardNodes","Common","timer","toArray","arrayIndex","arraySource","booleanSource","jsonSource","numberSource","stringSource","fileSource","compare","property","syncEvent","syncData","toVector","numberRange","globalEvent","Abs","Average","average","Normalize","Clamp","Floor","Ceil","ceil","Function","func","Func","Net","API","api","Visual","LineChartMini","lineChartMini","FunctionPlotter","functionPlotter","Audio","automate","channelSplitter","debug","channelMerger","adsr","metronome","moogEffect","bitcrusherEffect","delayEffect","dynamicsCompressor","chorusEffect","overdriveEffect","audioBuffer","tremoloEffect","stereoPanner","spatialPanner","equalizer","frequencyAnalyser","waveformAnalyser","spectrogramAnalyser","UI","Dial","dial","reduce","acc","curr","expression","evaluator","Evaluator","tokens","vars","Set","parser","Parser","token","TokenType","Variable","Error","add","variable","addVarButton","newVar","toLowerCase","bulkEvalIterations","variables","inTerminal","expr","regex","RegExp","replace","matchAll","match","multiargFunctions","resultArr","evaluate","lowerCase","test","exprInput","maxLength","MAX_SAFE_INTEGER","MIN_SAFE_INTEGER","relativeToggle","relative","constant","constantInput","normalized","getInput","toFixed","currMin","currMax","src","response","fetch","json","isEmpty","dialStyle","borderColor","borderWidth","shadowBlur","shadowColor","outputsUI","createDial","Left","plotStyle","polarToggle","dragStart","xPixToCoord","config","yPixToCoord","delta","xMin","xMax","yMin","yMax","gridRenderer","functionRenderer","direction","cursor","points","drawGrid","polar","cos","xCoordToPix","xCoord","xPixPerUnit","yCoordToPix","yCoord","yPixPerUnit","xPix","yPix","drawLine","x1","y1","x2","y2","getGridPointDist","factor","diff","pow","clearRect","xDiff","yDiff","xF","gX","yF","gY","axisColor","gridColor","axisPosition","fillText","axisVal","plotColor","lineWidth","startX","startY","colors","displayStyle","wdth","hght","rgbaCSSString","userContext","userInstance","pipe","val","Super","create","activate","writable","doActivate","activateNode","activateCallback","_bypass","_lastBypassValue","target","connectInOrder","nodeArray","console","getDefaults","key","defaults","startTime","method","dur","_is","automatable","FLOAT","BOOLEAN","INT","_window","AudioContext","webkitAudioContext","__connectified__","proto","getPrototypeOf","oconnect","shimConnect","node","arguments","isPrototypeOf","apply","connectify","dbToWAVolume","db","fmod","tmp","tmp2","pY","p","l","l2","toExponential","parseFloat","sign","tanh","n","exp","initValue","userVal","defaultVal","undefined","prototype","Bitcrusher","properties","processor","createScriptProcessor","phaser","last","onaudioprocess","inputBuffer","outputBuffer","normfreq","enumerable","Cabinet","newConvolver","impulsePath","makeupNode","makeupGain","impulse","dryLevel","attenuator","delayL","delayR","feedbackGainNodeLR","feedbackGainNodeRL","lfoL","LFO","callback","lfoR","_delay","_depth","oscillation","_feedback","_rate","Compressor","compNode","automakeup","computeMakeup","c","_automakeup","filterLow","filterHigh","highCut","lowCut","level","xhr","XMLHttpRequest","open","responseType","onreadystatechange","readyState","status","send","Filter","gainNode","MoogFilter","in1","in2","in3","in4","out1","out2","out3","out4","fb","inputFactor","inputDrive","waveshaper","outputDrive","ws_table","k_nSamples","scaled","_curveAmount","_algorithmIndex","waveshaperAlgorithms","_outputGain","abx","Panner","createStereoPanner","Phaser","filtersL","filtersR","feedbackGainNodeL","feedbackGainNodeR","filteredSignal","stage","baseModulationFrequency","_baseModulationFrequency","_stereoPhase","newPhase","_phase","stereoToMonoMix","feedbackLevel","_delayTimeLeft","_delayTimeRight","amplitudeL","amplitudeR","_intensity","WahWah","envelopeFollower","EnvelopeFollower","sweep","filterBp","filterPeaking","init","automode","sensitivity","baseFrequency","excursionOctaves","_automode","filterFreqTimeout","setFilterFreq","_baseFrequency","_excursionFrequency","_sweep","_sensitivity","_excursionOctaves","_resonance","jsNode","buffersize","attackTime","releaseTime","_envelope","_attackTime","_attackC","_releaseTime","_releaseC","_callback","_target","activated","returnCompute","instance","event","compute","chan","rms","count","channels","sqrt","_frequency","_phaseInc","_offset","_oscillation","toString"],"sourceRoot":""}