{"version":3,"file":"standard-nodes.js","mappings":"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","sources":["webpack://flow-connect/webpack/universalModuleDefinition","webpack://flow-connect/./src/standard-nodes/audio/3d-panner.ts","webpack://flow-connect/./src/standard-nodes/audio/adsr.ts","webpack://flow-connect/./src/standard-nodes/audio/audio-buffer-source.ts","webpack://flow-connect/./src/standard-nodes/audio/automate.ts","webpack://flow-connect/./src/standard-nodes/audio/biquad-filter.ts","webpack://flow-connect/./src/standard-nodes/audio/bitcrusher.ts","webpack://flow-connect/./src/standard-nodes/audio/channel-merger.ts","webpack://flow-connect/./src/standard-nodes/audio/channel-splitter.ts","webpack://flow-connect/./src/standard-nodes/audio/chorus.ts","webpack://flow-connect/./src/standard-nodes/audio/convolver.ts","webpack://flow-connect/./src/standard-nodes/audio/debug.ts","webpack://flow-connect/./src/standard-nodes/audio/delay.ts","webpack://flow-connect/./src/standard-nodes/audio/destination.ts","webpack://flow-connect/./src/standard-nodes/audio/distorter.ts","webpack://flow-connect/./src/standard-nodes/audio/dynamics-compressor.ts","webpack://flow-connect/./src/standard-nodes/audio/equalizer.ts","webpack://flow-connect/./src/standard-nodes/audio/frequency-analyser.ts","webpack://flow-connect/./src/standard-nodes/audio/gain.ts","webpack://flow-connect/./src/standard-nodes/audio/metronome.ts","webpack://flow-connect/./src/standard-nodes/audio/microphone.ts","webpack://flow-connect/./src/standard-nodes/audio/moog.ts","webpack://flow-connect/./src/standard-nodes/audio/noise.ts","webpack://flow-connect/./src/standard-nodes/audio/oscillator.ts","webpack://flow-connect/./src/standard-nodes/audio/overdrive.ts","webpack://flow-connect/./src/standard-nodes/audio/ping-pong-delay.ts","webpack://flow-connect/./src/standard-nodes/audio/source.ts","webpack://flow-connect/./src/standard-nodes/audio/spectrogram-analyser.ts","webpack://flow-connect/./src/standard-nodes/audio/stereo-panner.ts","webpack://flow-connect/./src/standard-nodes/audio/tremolo.ts","webpack://flow-connect/./src/standard-nodes/audio/waveform-analyser.ts","webpack://flow-connect/./src/standard-nodes/common/array-index.ts","webpack://flow-connect/./src/standard-nodes/common/array-source.ts","webpack://flow-connect/./src/standard-nodes/common/boolean-source.ts","webpack://flow-connect/./src/standard-nodes/common/buffer.ts","webpack://flow-connect/./src/standard-nodes/common/compare.ts","webpack://flow-connect/./src/standard-nodes/common/delay.ts","webpack://flow-connect/./src/standard-nodes/common/file-source.ts","webpack://flow-connect/./src/standard-nodes/common/global-event.ts","webpack://flow-connect/./src/standard-nodes/common/json-source.ts","webpack://flow-connect/./src/standard-nodes/common/log.ts","webpack://flow-connect/./src/standard-nodes/common/number-range.ts","webpack://flow-connect/./src/standard-nodes/common/number-source.ts","webpack://flow-connect/./src/standard-nodes/common/property.ts","webpack://flow-connect/./src/standard-nodes/common/random.ts","webpack://flow-connect/./src/standard-nodes/common/string-source.ts","webpack://flow-connect/./src/standard-nodes/common/sync-data.ts","webpack://flow-connect/./src/standard-nodes/common/sync-event.ts","webpack://flow-connect/./src/standard-nodes/common/timer.ts","webpack://flow-connect/./src/standard-nodes/common/to-array.ts","webpack://flow-connect/./src/standard-nodes/common/to-vector2.ts","webpack://flow-connect/./src/standard-nodes/index.ts","webpack://flow-connect/./src/standard-nodes/math/abs.ts","webpack://flow-connect/./src/standard-nodes/math/average.ts","webpack://flow-connect/./src/standard-nodes/math/ceil.ts","webpack://flow-connect/./src/standard-nodes/math/clamp.ts","webpack://flow-connect/./src/standard-nodes/math/floor.ts","webpack://flow-connect/./src/standard-nodes/math/func.ts","webpack://flow-connect/./src/standard-nodes/math/normalize.ts","webpack://flow-connect/./src/standard-nodes/net/api.ts","webpack://flow-connect/./src/standard-nodes/ui/dial.ts","webpack://flow-connect/./src/standard-nodes/visual/function-plotter.ts","webpack://flow-connect/./src/standard-nodes/visual/line-chart-mini.ts","webpack://flow-connect/./src/lib/tuna.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(self, function() {\nreturn ","import { Flow } from \"../../core/flow\";\nimport { Vector2 } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { clamp, denormalize } from \"../../utils/utils\";\nimport { Node } from '../../core/node';\nimport { Toggle } from \"../../ui/toggle\";\nimport { Slider2D } from \"../../ui/2d-slider\";\nimport { Slider } from \"../../ui/slider\";\nimport { Input, InputType } from \"../../ui/input\";\n\nexport class SpatialPanner extends Node {\n  panSlider2D: Slider2D;\n  zSlider: Slider;\n  zInput: Input;\n  bypassToggle: Toggle;\n\n  panner: PannerNode;\n  inGain: GainNode;\n  outGain: GainNode;\n\n  posX: number;\n  posY: number;\n  posZ: number;\n  orientationX: number = 0.0;\n  orientationY: number = 0.0;\n  orientationZ: number = -1.0;\n\n  static DefaultProps = { value: new Vector2(.5, .5), z: -1, bypass: false };\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(\n      flow, options.name || '3D Spatial Panner',\n      options.position || new Vector2(50, 50),\n      options.width || 200,\n      [{ name: 'in', dataType: 'audio' }],\n      [{ name: 'out', dataType: 'audio' }],\n      {\n        props: options.props ? { ...SpatialPanner.DefaultProps, ...options.props } : SpatialPanner.DefaultProps,\n        style: options.style || { rowHeight: 10, spacing: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    )\n\n    this.posX = this.flow.flowConnect.audioContext.listener.positionX.value;\n    this.posY = this.flow.flowConnect.audioContext.listener.positionY.value;\n    this.posZ = -1;\n\n    this.inGain = flow.flowConnect.audioContext.createGain();\n    this.outGain = flow.flowConnect.audioContext.createGain();\n    this.panner = new PannerNode(flow.flowConnect.audioContext, {\n      panningModel: 'HRTF',\n      distanceModel: 'linear',\n      positionX: this.posX,\n      positionY: this.posY,\n      positionZ: this.posZ,\n      orientationX: this.orientationX,\n      orientationY: this.orientationY,\n      orientationZ: this.orientationZ\n    });\n\n    this.inputs[0].ref = this.inGain;\n    this.outputs[0].ref = this.outGain;\n\n    this.setBypass();\n\n    this.setupUI();\n\n    this.watch('value', (_oldVal, newVal) => {\n      let x = denormalize(newVal.x, -1, 1);\n      let y = denormalize(newVal.y, -1, 1);\n      this.panner.positionX.value = x;\n      this.panner.positionY.value = y;\n    });\n    this.watch('z', (_oldVal, newVal) => {\n      if (newVal < -10000 || newVal > 10000) this.props.z = clamp(parseInt(newVal), -10000, 10000);\n      this.panner.positionZ.value = this.props.z;\n    });\n    this.watch('bypass', this.setBypass.bind(this));\n\n    this.handleAudioConnections();\n  }\n\n  setBypass() {\n    if (!this.props.bypass) {\n      this.inGain.disconnect();\n      this.inGain.connect(this.panner);\n      this.panner.connect(this.outGain);\n    } else {\n      this.panner.disconnect();\n      this.inGain.disconnect();\n      this.inGain.connect(this.outGain);\n    }\n  }\n\n  setupUI() {\n    this.panSlider2D = this.createSlider2D({ propName: 'value', height: this.width - this.style.padding * 2 });\n    this.zSlider = this.createSlider(-10000, 10000, { height: 10, propName: 'z', style: { grow: .6 } });\n    this.zInput = this.createInput({ propName: 'z', height: 20, style: { type: InputType.Number, grow: .3, precision: 0 } });\n    this.bypassToggle = this.createToggle({ propName: 'bypass', style: { grow: .15 } });\n    this.ui.append([\n      this.panSlider2D,\n      this.createHozLayout([this.createLabel('Z', { style: { grow: .1 } }), this.zSlider, this.zInput], { style: { spacing: 5 } }),\n      this.createHozLayout([this.createLabel('Bypass ?', { style: { grow: .3 } }), this.bypassToggle], { style: { spacing: 5 } })\n    ]);\n  }\n  handleAudioConnections() {\n    this.outputs[0].on('connect', (_inst, connector) => this.outputs[0].ref.connect(connector.end.ref));\n    this.outputs[0].on('disconnect', (_inst, _connector, _start, end) => this.outputs[0].ref.disconnect(end.ref));\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector2 } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { InputType, Input } from \"../../ui/input\";\nimport { clamp, denormalize } from \"../../utils/utils\";\nimport { Node } from \"../../core/node\";\nimport { Envelope } from \"../../ui/envelope\";\n\nexport class ADSR extends Node {\n  envelopeInput: Envelope;\n  minInput: Input;\n  maxInput: Input;\n  aInput: Input;\n  dInput: Input;\n  sInput: Input;\n  rInput: Input;\n\n  proxyParamNode: AudioWorkletNode;\n  proxyParam: AudioParam;\n\n  static DefaultProps = { min: 0, max: 1, a: 0.4, d: 0.2, s: 0.6, r: 0.4, trigger: false };\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'ADSR', options.position || new Vector2(50, 50), options.width || 280,\n      [{ name: 'trigger', dataType: 'event' }],\n      [{ name: 'out', dataType: 'audio' }],\n      {\n        props: options.props ? { ...ADSR.DefaultProps, ...options.props } : ADSR.DefaultProps,\n        style: options.style || { rowHeight: 10, spacing: 15 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.proxyParamNode = new AudioWorkletNode(\n      flow.flowConnect.audioContext,\n      'proxy-param',\n      { numberOfOutputs: 1, parameterData: { param: 0 } }\n    );\n    this.proxyParam = (this.proxyParamNode.parameters as Map<string, AudioParam>).get('param');\n    this.outputs[0].ref = this.proxyParamNode;\n    this.setMinMax();\n    this.props.s = clamp(this.props.s, 0, 1);\n\n    this.setupUI();\n\n    this.minInput.on('blur', this.setMinMax);\n    this.maxInput.on('blur', this.setMinMax);\n    this.aInput.on('blur', () => this.adsrChanged());\n    this.dInput.on('blur', () => this.adsrChanged());\n    this.sInput.on('blur', () => this.adsrChanged());\n    this.rInput.on('blur', () => this.adsrChanged());\n\n    this.inputs[0].on('event', () => {\n      this.props.trigger = !this.props.trigger;\n      let currTime = flow.flowConnect.audioContext.currentTime;\n      let { a, d, s, r } = this.props;\n      if (this.props.trigger) {\n        // Attack\n        this.proxyParam.cancelScheduledValues(0);\n        this.proxyParam.setValueAtTime(this.props.min, currTime);\n        this.proxyParam.linearRampToValueAtTime(1 * this.props.max, currTime + a);\n        this.proxyParam.linearRampToValueAtTime(denormalize(s, this.props.min, this.props.max), currTime + a + d);\n      } else {\n        // Release\n        this.proxyParam.cancelScheduledValues(0);\n        this.proxyParam.setValueAtTime(this.proxyParam.value, currTime);\n        this.proxyParam.linearRampToValueAtTime(this.props.min, currTime + r);\n      }\n    });\n\n    this.handleAudioConnections();\n  }\n  adsrChanged() {\n    this.props.s = clamp(this.props.s, 0, 1);\n    let { a, d, r } = this.props;\n    let totalDur = a + d + r;\n    this.envelopeInput.value = [\n      Vector2.Zero(), new Vector2(a / totalDur, 1), new Vector2((a + d) / totalDur, this.props.s), new Vector2(1, 0)\n    ];\n  }\n  stopAutomation() {\n    this.proxyParam.cancelScheduledValues(this.flow.flowConnect.audioContext.currentTime);\n  }\n  setMinMax() {\n    this.props.proxyParamNode.port.postMessage({\n      type: 'set-range',\n      value: { min: this.props.min, max: this.props.max }\n    });\n  }\n  setupUI() {\n    let { a: atck, d: dcay, r: rlse } = this.props;\n    let duration = atck + dcay + rlse;\n\n    this.envelopeInput = this.createEnvelope(145, [\n      Vector2.Zero(), new Vector2(atck / duration, 1), new Vector2((atck + dcay) / duration, this.props.s), new Vector2(1, 0)\n    ], { style: { pointColor: '#fcba03' } });\n    this.envelopeInput.disabled = true;\n\n    this.minInput = this.createInput({\n      propName: 'min', height: 20, style: { type: InputType.Number, grow: .5, step: 'any' }\n    });\n    this.maxInput = this.createInput({\n      propName: 'max', height: 20, style: { type: InputType.Number, grow: .5, step: 'any' }\n    });\n    this.aInput = this.createInput({ propName: 'a', height: 20, style: { type: InputType.Number, step: 'any', grow: .5, precision: 3 } });\n    this.dInput = this.createInput({ propName: 'd', height: 20, style: { type: InputType.Number, step: 'any', grow: .5, precision: 3 } });\n    this.sInput = this.createInput({ propName: 's', height: 20, style: { type: InputType.Number, step: 'any', grow: .5, precision: 3 } });\n    this.rInput = this.createInput({ propName: 'r', height: 20, style: { type: InputType.Number, step: 'any', grow: .5, precision: 3 } });\n\n    this.ui.append([\n      this.envelopeInput,\n      this.createHozLayout([\n        this.createLabel('Min'), this.minInput,\n        this.createLabel('Max'), this.maxInput\n      ], { style: { spacing: 5 } }),\n      this.createHozLayout([\n        this.createLabel('A'), this.aInput, this.createLabel('D'), this.dInput\n      ], { style: { spacing: 5 } }),\n      this.createHozLayout([\n        this.createLabel('S'), this.sInput, this.createLabel('R'), this.rInput\n      ], { style: { spacing: 5 } })\n    ]);\n  }\n  handleAudioConnections() {\n    // Handle actual webaudio node stuff\n    this.outputs[0].on('connect', (_inst, connector) => {\n      if (connector.end.ref instanceof AudioParam) {\n        // Need to do this else the value provided by the worklet node as param value is getting offset instead of overwrite\n        let offset = Math.max(0, connector.end.ref.minValue);\n        connector.end.ref.value = offset;\n        if (offset !== 0) {\n          this.proxyParamNode.port.postMessage({ type: 'set-offset', value: offset });\n        }\n      }\n      this.outputs[0].ref.connect(connector.end.ref);\n    });\n    this.outputs[0].on('disconnect', (_inst, _connector, _start, end) => {\n      this.stopAutomation();\n      this.outputs[0].ref.disconnect(end.ref);\n    });\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector2 } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { Node } from \"../../core/node\";\nimport { Source } from \"../../ui/source\";\n\nexport class AudioBufferSource extends Node {\n  fileInput: Source\n\n  static DefaultProps: any = { file: null, buffer: null };\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'AudioBuffer Source', options.position || new Vector2(50, 50), options.width || 170,\n      [],\n      [{ name: 'buffer', dataType: 'audio-buffer' }],\n      {\n        props: options.props ? { ...AudioBufferSource.DefaultProps, ...options.props } : AudioBufferSource.DefaultProps,\n        style: options.style || { rowHeight: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.setupUI();\n\n    this.fileInput.on('change', () => this.processFile());\n    this.on('process', () => this.processFile());\n  }\n\n  async processFile() {\n    let file = this.props.file;\n    if (!file) return;\n\n    let cached = this.flow.flowConnect.arrayBufferCache.get(file.name + file.type);\n    if (!cached) {\n      cached = await file.arrayBuffer();\n      this.flow.flowConnect.arrayBufferCache.set(file.name + file.type, cached);\n    }\n    this.processArrayBuffer(cached);\n  }\n  async processArrayBuffer(arrayBuffer: ArrayBuffer) {\n    let cached = this.flow.flowConnect.audioBufferCache.get(arrayBuffer);\n    if (!cached) {\n      cached = await this.flow.flowConnect.audioContext.decodeAudioData(arrayBuffer);\n      this.flow.flowConnect.audioBufferCache.set(arrayBuffer, cached);\n    }\n    this.props.buffer = cached;\n    this.setOutputs(0, this.props.buffer);\n  }\n  setupUI() {\n    this.fileInput = this.createSource({ height: 20, propName: 'file', style: { grow: 1 } });\n    this.ui.append(this.createHozLayout([\n      this.createLabel('File'), this.fileInput\n    ], { style: { spacing: 20 } }));\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector2 } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { InputType, Input } from \"../../ui/input\";\nimport { denormalize } from \"../../utils/utils\";\nimport { Node } from \"../../core/node\";\nimport { Envelope } from \"../../ui/envelope\";\nimport { Toggle } from \"../../ui/toggle\";\n\nexport class Automate extends Node {\n  envelopeInput: Envelope;\n  minInput: Input;\n  maxInput: Input;\n  durationInput: Input;\n  autoToggle: Toggle;\n  loopToggle: Toggle;\n\n  proxyParamNode: AudioWorkletNode;\n  proxyParam: AudioParam;\n\n  static DefaultProps = { min: 0, max: 1, value: 0.5, duration: 1, auto: true, loop: false };\n\n  timerId: number;\n  scheduleEndTime: number;\n  finiteLoop = 2;            // how much iterations to schedule in the future\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}, envelope: Array<Vector2> = [new Vector2(.2, .5), new Vector2(.5, .8), new Vector2(.9, .2)]) {\n    super(flow, options.name || 'Automate', options.position || new Vector2(50, 50), options.width || 280,\n      [{ name: 'trigger', dataType: 'event' }],\n      [{ name: 'out', dataType: 'audio' }],\n      {\n        props: options.props ? { ...Automate.DefaultProps, ...options.props } : Automate.DefaultProps,\n        style: options.style || { rowHeight: 10, spacing: 15 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.proxyParamNode = new AudioWorkletNode(\n      flow.flowConnect.audioContext,\n      'proxy-param',\n      { numberOfOutputs: 1, parameterData: { param: this.props.value } }\n    );\n    this.proxyParam = (this.proxyParamNode.parameters as Map<string, AudioParam>).get('param');\n    this.setMinMax();\n    this.outputs[0].ref = this.proxyParamNode;\n\n    this.setupUI(envelope);\n\n    this.minInput.on('blur', () => {\n      this.setMinMax();\n      this.startAutomation();\n    });\n    this.maxInput.on('blur', () => {\n      this.setMinMax();\n      this.startAutomation();\n    });\n\n    this.envelopeInput.on('change', () => this.startAutomation());\n    this.durationInput.on('change', () => this.startAutomation());\n    this.loopToggle.on('change', () => this.startAutomation());\n    this.inputs[0].on('event', () => this.startAutomation());\n\n    flow.flowConnect.on('start', () => this.props.auto && this.startAutomation());\n    flow.flowConnect.on('stop', () => this.stopAutomation());\n\n    this.handleAudioConnections();\n  }\n\n  startAutomation() {\n    // Stop any previously scheduled automations\n    this.stopAutomation();\n\n    // Convert normalized to actual values (x=time, y=param value)\n    let values = this.envelopeInput.value;\n    for (let currVal of values) {\n      currVal.x = currVal.x * this.props.duration;\n      currVal.y = denormalize(currVal.y, this.props.min, this.props.max);\n    }\n\n    let automateDuration = values[values.length - 1].x;\n    if (this.props.loop) {\n      // Schedule far in the future hoping that even if main thread blocks it recovers by the time scheduled automations are finished\n      this.schedule(values, this.flow.flowConnect.audioContext.currentTime, this.finiteLoop);\n      this.timerId = window.setInterval(() => {\n        // If web audio clock reaches final iteration of scheduled automations, then reschedule another finiteLoop iterations\n        if (this.flow.flowConnect.audioContext.currentTime > this.scheduleEndTime - automateDuration) {\n          this.schedule(values, this.scheduleEndTime, this.finiteLoop);\n        }\n      }, 50);\n    } else {\n      this.schedule(values, this.flow.flowConnect.audioContext.currentTime, 1);\n    }\n  }\n  stopAutomation() {\n    this.proxyParam.cancelScheduledValues(this.flow.flowConnect.audioContext.currentTime);\n    clearInterval(this.timerId);\n  }\n  schedule(values: Vector2[], time: number, iterations: number) {\n    for (let i = 0; i < iterations; i += 1) {\n      values.forEach(value => {\n        this.proxyParam.linearRampToValueAtTime(value.y, time + value.x)\n      });\n    }\n    this.scheduleEndTime = time + values[values.length - 1].x;\n  }\n  setMinMax() {\n    this.proxyParamNode.port.postMessage({ type: 'set-range', value: { min: this.props.min, max: this.props.max } });\n  }\n  setupUI(envelope: Vector2[]) {\n    this.envelopeInput = this.createEnvelope(145, envelope, { input: true, output: true });\n    this.minInput = this.createInput({\n      propName: 'min', height: 20, style: { type: InputType.Number, grow: .5, step: 'any' }\n    });\n    this.maxInput = this.createInput({\n      propName: 'max', height: 20, style: { type: InputType.Number, grow: .5, step: 'any' }\n    });\n    this.durationInput = this.createInput({\n      propName: 'duration', height: 20, style: { type: InputType.Number, step: 'any', grow: .5 }\n    });\n    this.autoToggle = this.createToggle({ propName: 'auto' });\n    this.loopToggle = this.createToggle({ propName: 'loop' });\n\n    this.ui.append([\n      this.envelopeInput,\n      this.createHozLayout([\n        this.createLabel('Min'), this.minInput,\n        this.createLabel('Max'), this.maxInput\n      ], { style: { spacing: 5 } }),\n      this.createHozLayout([\n        this.createLabel('Duration (seconds)', { style: { grow: .5 } }),\n        this.durationInput\n      ], { style: { spacing: 5 } }),\n      this.createHozLayout([\n        this.createHozLayout([this.createLabel('Auto Start ?', { height: 20 }), this.autoToggle], { style: { spacing: 5, grow: .5 } }),\n        this.createHozLayout([this.createLabel('Loop ?', { height: 20 }), this.loopToggle], { style: { spacing: 5, grow: .5 } })\n      ]),\n    ]);\n  }\n  handleAudioConnections() {\n    // Handle actual webaudio node stuff\n    this.outputs[0].on('connect', (_inst, connector) => {\n      if (connector.end.ref instanceof AudioParam) {\n        // Need to do this else the value provided by the worklet node as param value is getting offset instead of overwrite\n        let offset = Math.max(0, connector.end.ref.minValue);\n        connector.end.ref.value = offset;\n        if (offset !== 0) {\n          this.proxyParamNode.port.postMessage({ type: 'set-offset', value: offset });\n        }\n      }\n      this.outputs[0].ref.connect(connector.end.ref);\n      this.startAutomation();\n    });\n    this.outputs[0].on('disconnect', (_inst, _connector, _start, end) => {\n      this.stopAutomation();\n      this.outputs[0].ref.disconnect(end.ref);\n    });\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector2 } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { Node } from \"../../core/node\";\nimport { Select } from \"../../ui/select\";\nimport { Toggle } from \"../../ui/toggle\";\n\nexport class BiquadFilter extends Node {\n  typeSelect: Select;\n  bypassToggle: Toggle\n\n  inGain: GainNode;\n  outGain: GainNode;\n  biquadFilter: BiquadFilterNode;\n\n  static DefaultProps = { filterType: 'lowpass', bypass: false };\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'Biquad Filter', options.position || new Vector2(50, 50), options.width || 230,\n      [\n        { name: 'in', dataType: 'audio' }, { name: 'gain', dataType: 'audioparam' },\n        { name: 'Q', dataType: 'audioparam' }, { name: 'frequency', dataType: 'audioparam' },\n        { name: 'detune', dataType: 'audioparam' }\n      ],\n      [{ name: 'out', dataType: 'audio' }],\n      {\n        props: options.props ? { ...BiquadFilter.DefaultProps, ...options.props } : BiquadFilter.DefaultProps,\n        style: options.style || { rowHeight: 10, spacing: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.inGain = flow.flowConnect.audioContext.createGain();\n    this.outGain = flow.flowConnect.audioContext.createGain();\n    this.inputs[0].ref = this.inGain;\n    this.outputs[0].ref = this.outGain;\n\n    this.biquadFilter = flow.flowConnect.audioContext.createBiquadFilter();\n    this.biquadFilter.gain.value = 0;\n    this.biquadFilter.Q.value = 1;\n    this.biquadFilter.frequency.value = 800;\n    this.biquadFilter.detune.value = 0;\n    this.biquadFilter.type = this.props.filterType;\n\n    this.inputs[1].ref = this.biquadFilter.gain;\n    this.inputs[2].ref = this.biquadFilter.Q;\n    this.inputs[3].ref = this.biquadFilter.frequency;\n    this.inputs[4].ref = this.biquadFilter.detune;\n    this.inputs[1].on('data', (_, data) => typeof data === 'number' && (this.inputs[1].ref.value = data));\n    this.inputs[2].on('data', (_, data) => typeof data === 'number' && (this.inputs[2].ref.value = data));\n    this.inputs[3].on('data', (_, data) => typeof data === 'number' && (this.inputs[3].ref.value = data));\n    this.inputs[4].on('data', (_, data) => typeof data === 'number' && (this.inputs[4].ref.value = data));\n\n    this.setBypass();\n    this.setupUI();\n\n    this.typeSelect.on('change', () => {\n      this.biquadFilter.type = this.props.filterType\n    });\n    this.watch('bypass', () => this.setBypass());\n\n    this.handleAudioConnections();\n  }\n\n  setBypass() {\n    if (!this.props.bypass) {\n      this.inGain.disconnect();\n      this.inGain.connect(this.biquadFilter);\n      this.biquadFilter.connect(this.outGain);\n    } else {\n      this.biquadFilter.disconnect();\n      this.inGain.disconnect();\n      this.inGain.connect(this.outGain);\n    }\n  }\n  setupUI() {\n    this.typeSelect = this.createSelect(\n      ['lowpass', 'highpass', 'bandpass', 'lowshelf', 'highshelf', 'peaking', 'notch', 'allpass'],\n      { propName: 'filterType', height: 15, style: { grow: .7 } }\n    );\n    this.bypassToggle = this.createToggle({ propName: 'bypass', style: { grow: .1 } });\n    this.ui.append([\n      this.createHozLayout([this.createLabel('Type', { style: { grow: .3 } }), this.typeSelect], { style: { spacing: 5 } }),\n      this.createHozLayout([this.createLabel('Bypass ?', { style: { grow: .3 } }), this.bypassToggle], { style: { spacing: 5 } })\n    ]);\n  }\n  handleAudioConnections() {\n    // Handle actual webaudio node stuff\n    this.outputs[0].on('connect', (_, connector) => this.outputs[0].ref.connect(connector.end.ref));\n    this.outputs[0].on('disconnect', (_inst, _connector, _start, end) => this.outputs[0].ref.disconnect(end.ref));\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector2 } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { InputType, Input } from \"../../ui/input\";\nimport { clamp } from \"../../utils/utils\";\nimport { Node } from \"../../core/node\";\nimport { Slider } from \"../../ui/slider\";\nimport { Toggle } from \"../../ui/toggle\";\n\nexport class BitcrusherEffect extends Node {\n  bitsSlider: Slider;\n  bitsInput: Input;\n  normFreqSlider: Slider;\n  normFreqInput: Input;\n  bypassToggle: Toggle;\n\n  inGain: GainNode;\n  outGain: GainNode;\n  bitcrusher: AudioWorkletNode;\n\n  static DefaultProps = { bits: 4, normFreq: 0.1, bypass: false };\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'Bitcrusher Effect', options.position || new Vector2(50, 50), options.width || 230,\n      [{ name: 'in', dataType: 'audio' }],\n      [{ name: 'out', dataType: 'audio' }],\n      {\n        props: options.props ? { ...BitcrusherEffect.DefaultProps, ...options.props } : BitcrusherEffect.DefaultProps,\n        style: options.style || { rowHeight: 10, spacing: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.inGain = flow.flowConnect.audioContext.createGain();\n    this.outGain = flow.flowConnect.audioContext.createGain();\n    this.inputs[0].ref = this.inGain;\n    this.outputs[0].ref = this.outGain;\n\n    this.bitcrusher = new AudioWorkletNode(flow.flowConnect.audioContext, 'bitcrusher-effect', {\n      numberOfInputs: 1, numberOfOutputs: 1, processorOptions: { bufferSize: 4096 }\n    });\n\n    this.setBypass();\n    this.setupUI();\n\n    this.bitsSlider.on('change', () => this.paramsChanged());\n    this.normFreqSlider.on('change', () => this.paramsChanged());\n    this.bitsInput.on('change', () => this.paramsChanged());\n    this.normFreqInput.on('change', () => this.paramsChanged());\n    this.watch('bypass', () => this.setBypass());\n    this.watch('bits', () => {\n      if (this.props.bits < 1 || this.props.bits > 16 || !Number.isInteger(this.props.bits)) {\n        this.props.bits = clamp(Math.floor(this.props.bits), 1, 16);\n      }\n    });\n    this.watch('normFreq', () => {\n      if (this.props.normFreq < 0 || this.props.normFreq > 1) this.props.normFreq = clamp(this.props.normFreq, 0, 1);\n    });\n\n    flow.flowConnect.on('start', () => this.paramsChanged());\n\n    this.handleAudioConnections();\n  }\n\n  setBypass() {\n    if (!this.props.bypass) {\n      this.inGain.disconnect();\n      this.inGain.connect(this.bitcrusher);\n      this.bitcrusher.connect(this.outGain);\n    } else {\n      this.bitcrusher.disconnect();\n      this.inGain.disconnect();\n      this.inGain.connect(this.outGain);\n    }\n  }\n  paramsChanged() {\n    this.bitcrusher.port.postMessage({ bits: this.props.bits, normFreq: this.props.normFreq });\n  }\n  setupUI() {\n    this.bitsSlider = this.createSlider(1, 16, { height: 10, propName: 'bits', style: { grow: .5 } });\n    this.normFreqSlider = this.createSlider(0, 1, { height: 10, propName: 'normFreq', style: { grow: .5 } });\n    this.bitsInput = this.createInput({ propName: 'bits', height: 20, style: { type: InputType.Number, grow: .2 } });\n    this.normFreqInput = this.createInput({ propName: 'normFreq', height: 20, style: { type: InputType.Number, grow: .4, precision: 2 } });\n    this.bypassToggle = this.createToggle({ propName: 'bypass', style: { grow: .1 } });\n    this.ui.append([\n      this.createHozLayout([this.createLabel('Bits', { style: { grow: .3 } }), this.bitsSlider, this.bitsInput], { style: { spacing: 5 } }),\n      this.createHozLayout([this.createLabel('Norm Freq.', { style: { grow: .3 } }), this.normFreqSlider, this.normFreqInput], { style: { spacing: 5 } }),\n      this.createHozLayout([this.createLabel('Bypass ?', { style: { grow: .3 } }), this.bypassToggle], { style: { spacing: 5 } })\n    ]);\n  }\n  handleAudioConnections() {\n    // Handle actual webaudio node stuff\n    this.outputs[0].on('connect', (_, connector) => this.outputs[0].ref.connect(connector.end.ref));\n    this.outputs[0].on('disconnect', (_inst, _connector, _start, end) => this.outputs[0].ref.disconnect(end.ref));\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector2 } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { Terminal, TerminalType } from \"../../core/terminal\";\nimport { Node } from \"../../core/node\";\nimport { Button } from \"../../ui/button\";\n\nexport class ChannelMerger extends Node {\n  addChannelButton: Button\n\n  merger: ChannelMergerNode;\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'Channel Merger', options.position || new Vector2(50, 50), options.width || 160,\n      [{ name: 'Channel 1', dataType: 'audio' }, { name: 'Channel 2', dataType: 'audio' }],\n      [{ name: 'out', dataType: 'audio' }],\n      {\n        props: options.props || {},\n        style: options.style || { rowHeight: 10, spacing: 15 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.inputs[0].ref = flow.flowConnect.audioContext.createGain();\n    this.inputs[1].ref = flow.flowConnect.audioContext.createGain();\n    this.outputs[0].ref = flow.flowConnect.audioContext.createGain();\n    this.merger = flow.flowConnect.audioContext.createChannelMerger(2);\n\n    this.inputs[0].ref.connect(this.merger, 0, 0);\n    this.inputs[1].ref.connect(this.merger, 0, 1);\n    this.merger.connect(this.outputs[0].ref);\n\n    this.setupUI();\n\n    this.addChannelButton.on('click', () => {\n      this.merger.disconnect();\n      this.inputs.forEach(input => input.ref.disconnect());\n      this.merger = flow.flowConnect.audioContext.createChannelMerger(this.inputs.length + 1);\n\n      let newTerm = new Terminal(this, TerminalType.IN, 'audio', 'Channel ' + (this.inputs.length + 1));\n      newTerm.ref = flow.flowConnect.audioContext.createGain();\n      this.addTerminal(newTerm);\n\n      this.inputs.forEach((input, index) => input.ref.connect(this.merger, 0, index));\n      this.merger.connect(this.outputs[0].ref);\n    });\n\n    this.handleAudioConnections();\n  }\n\n  setupUI() {\n    this.addChannelButton = this.createButton('Add In Channel', { height: 20 });\n    this.ui.append(this.addChannelButton);\n  }\n  handleAudioConnections() {\n    // Handle actual webaudio node stuff\n    this.outputs[0].on('connect', (_, connector) => this.outputs[0].ref.connect(connector.end.ref));\n    this.outputs[0].on('disconnect', (_inst, _connector, _start, end) => this.outputs[0].ref.disconnect(end.ref));\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector2 } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { Terminal, TerminalType } from \"../../core/terminal\";\nimport { Node } from \"../../core/node\";\n\nexport class ChannelSplitter extends Node {\n  splitter: ChannelSplitterNode;\n\n  oldNoOfChannels = 1;\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'Channel Splitter', options.position || new Vector2(50, 50), options.width || 160,\n      [{ name: 'in', dataType: 'audio' }],\n      [{ name: 'Channel 1', dataType: 'audio' }],\n      {\n        props: options.props || {},\n        style: options.style || { rowHeight: 10, spacing: 15 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.inputs[0].ref = flow.flowConnect.audioContext.createGain();\n    this.outputs[0].ref = flow.flowConnect.audioContext.createGain();\n    this.outputs[0].ref.channelCountMode = 'explicit';\n\n    this.on('channel-count-change', (newNoOfChannels) => this.checkChannels(newNoOfChannels));\n\n    this.handleAudioConnections();\n  }\n\n  checkChannels(newNoOfChannels: number) {\n    if (this.oldNoOfChannels === newNoOfChannels) return;\n\n    this.splitter && this.splitter.disconnect();\n    this.inputs[0].ref.disconnect();\n\n    let splitter = this.flow.flowConnect.audioContext.createChannelSplitter(newNoOfChannels);\n    this.inputs[0].ref.connect(splitter);\n\n    let terminalsToRemove = [];\n    for (let i = 0; i < Math.max(newNoOfChannels, this.oldNoOfChannels); i += 1) {\n      if (i < newNoOfChannels) {\n        if (i < this.oldNoOfChannels) {\n          splitter.connect(this.outputs[i].ref, i);\n        } else {\n          let newTerminal = new Terminal(this, TerminalType.OUT, 'audio', 'Channel ' + (i + 1));\n          newTerminal.ref = this.flow.flowConnect.audioContext.createGain();\n          newTerminal.ref.channelCountMode = 'explicit';\n          this.addTerminal(newTerminal);\n          this.outputs[i].on('connect', (_inst, cntr) => this.outputs[i].ref.connect(cntr.end.ref));\n          this.outputs[i].on('disconnect', (_inst, _cntr, _start, end) => this.outputs[i].ref.disconnect(end.ref));\n          splitter.connect(this.outputs[i].ref, i);\n        }\n      } else {\n        terminalsToRemove.push(this.outputs[i]);\n      }\n    }\n    terminalsToRemove.forEach(term => {\n      term.ref.disconnect();\n      this.removeTerminal(term);\n    });\n\n    this.oldNoOfChannels = newNoOfChannels;\n    this.splitter = splitter;\n  }\n  handleAudioConnections() {\n    // Handle actual webaudio node stuff\n    this.outputs[0].on('connect', (_inst, cntr) => this.outputs[0].ref.connect(cntr.end.ref));\n    this.outputs[0].on('disconnect', (_inst, _cntr, _start, end) => this.outputs[0].ref.disconnect(end.ref));\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector2 } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { InputType, Input } from \"../../ui/input\";\nimport { clamp } from \"../../utils/utils\";\nimport { Node } from '../../core/node';\nimport { Slider } from \"../../ui/slider\";\nimport { Toggle } from \"../../ui/toggle\";\nlet Tuna = require('../../lib/tuna.js');\n\nexport class ChorusEffect extends Node {\n  delaySlider: Slider;\n  delayInput: Input;\n  feedbackSlider: Slider;\n  feedbackInput: Input;\n  rateSlider: Slider;\n  rateInput: Input;\n  bypassToggle: Toggle;\n  depthSlider: Slider;\n  depthInput: Input;\n  chorus: any;\n\n  static DefaultProps = { feedback: 0.4, delay: 0.0045, depth: 0.7, rate: 0.01, bypass: false };\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(\n      flow, options.name || 'Chorus Effect',\n      options.position || new Vector2(50, 50),\n      options.width || 230,\n      [{ name: 'in', dataType: 'audio' }],\n      [{ name: 'out', dataType: 'audio' }],\n      {\n        style: options.style || { rowHeight: 10, spacing: 10 },\n        terminalStyle: options.terminalStyle || {},\n        props: options.props ? { ...ChorusEffect.DefaultProps, ...options.props } : ChorusEffect.DefaultProps\n      }\n    )\n\n    if (!(window as any).__tuna__) (window as any).__tuna__ = new Tuna(flow.flowConnect.audioContext);\n\n    this.chorus = new (window as any).__tuna__.Chorus();\n    this.inputs[0].ref = this.outputs[0].ref = this.chorus;\n    this.setupUI();\n    Object.assign(this.chorus, {\n      delay: this.props.delay,\n      depth: this.props.depth,\n      feedback: this.props.feedback,\n      rate: this.props.rate\n    });\n\n    this.watch('delay', (_oldVal, newVal) => {\n      if (newVal < 0 || newVal > 1) this.props.delay = clamp(newVal, 0, 1);\n      this.chorus.delay = this.props.delay;\n    });\n    this.watch('depth', (_oldVal, newVal) => {\n      if (newVal < 0 || newVal > 1) this.props.depth = clamp(newVal, 0, 1);\n      this.chorus.depth = this.props.depth;\n    });\n    this.watch('feedback', (_oldVal, newVal) => {\n      if (newVal < 0 || newVal > 0.95) this.props.feedback = clamp(newVal, 0, 0.95);\n      this.chorus.feedback = this.props.feedback;\n    });\n    this.watch('rate', (_oldVal, newVal) => {\n      if (newVal < 0 || newVal > 0.1) this.props.rate = clamp(newVal, 0, 0.1);\n      this.chorus.rate = this.props.rate;\n    });\n    this.watch('bypass', (_oldVal, newVal) => this.chorus.bypass = newVal);\n\n    this.handleAudioConnections();\n  }\n\n  setupUI() {\n    this.delaySlider = this.createSlider(0, 1, { height: 10, propName: 'delay', style: { grow: .5 } });\n    this.delayInput = this.createInput({ propName: 'delay', height: 20, style: { type: InputType.Number, grow: .2, precision: 4 } });\n    this.depthSlider = this.createSlider(0, 1, { height: 10, propName: 'depth', style: { grow: .5 } });\n    this.depthInput = this.createInput({ propName: 'depth', height: 20, style: { type: InputType.Number, grow: .2, precision: 2 } });\n    this.feedbackSlider = this.createSlider(0, 0.95, { height: 10, propName: 'feedback', style: { grow: .5 } });\n    this.feedbackInput = this.createInput({ propName: 'feedback', height: 20, style: { type: InputType.Number, grow: .2, precision: 2 } });\n    this.rateSlider = this.createSlider(0, 0.1, { height: 10, propName: 'rate', style: { grow: .5 } });\n    this.rateInput = this.createInput({ propName: 'rate', height: 20, style: { type: InputType.Number, grow: .2, precision: 2 } });\n    this.bypassToggle = this.createToggle({ propName: 'bypass', style: { grow: .1 } });\n    this.ui.append([\n      this.createHozLayout([this.createLabel('Delay', { style: { grow: .3 } }), this.delaySlider, this.delayInput], { style: { spacing: 5 } }),\n      this.createHozLayout([this.createLabel('Depth', { style: { grow: .3 } }), this.depthSlider, this.depthInput], { style: { spacing: 5 } }),\n      this.createHozLayout([this.createLabel('Feedback', { style: { grow: .3 } }), this.feedbackSlider, this.feedbackInput], { style: { spacing: 5 } }),\n      this.createHozLayout([this.createLabel('Rate', { style: { grow: .3 } }), this.rateSlider, this.rateInput], { style: { spacing: 5 } }),\n      this.createHozLayout([this.createLabel('Bypass ?', { style: { grow: .3 } }), this.bypassToggle], { style: { spacing: 5 } })\n    ]);\n  }\n  handleAudioConnections() {\n    this.outputs[0].on('connect', (_inst, connector) => this.outputs[0].ref.connect(connector.end.ref));\n    this.outputs[0].on('disconnect', (_inst, _connector, _start, end) => this.outputs[0].ref.disconnect(end.ref));\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector2 } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { Node } from \"../../core/node\";\nimport { Toggle } from \"../../ui/toggle\";\n\nexport class Convolver extends Node {\n  bypassToggle: Toggle\n\n  inGain: GainNode;\n  outGain: GainNode;\n  convolver: ConvolverNode;\n\n  static DefaultProps = { bypass: false };\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'Convolver', options.position || new Vector2(50, 50), options.width || 160,\n      [{ name: 'in', dataType: 'audio' }, { name: 'impulse', dataType: 'audio-buffer' }],\n      [{ name: 'out', dataType: 'audio' }],\n      {\n        props: options.props ? { ...Convolver.DefaultProps, ...options.props } : Convolver.DefaultProps,\n        style: options.style || { rowHeight: 10, spacing: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.inGain = flow.flowConnect.audioContext.createGain();\n    this.outGain = flow.flowConnect.audioContext.createGain();\n    this.convolver = flow.flowConnect.audioContext.createConvolver();\n\n    this.inputs[0].ref = this.inGain;\n    this.outputs[0].ref = this.outGain;\n\n    this.setBypass();\n\n    this.setupUI();\n\n    this.watch('bypass', () => this.setBypass());\n    this.inputs[1].on('data', (_inst, data) => {\n      this.convolver.buffer = data;\n    });\n\n    this.handleAudioConnections();\n  }\n  setBypass() {\n    if (!this.props.bypass) {\n      this.inGain.disconnect();\n      this.inGain.connect(this.convolver);\n      this.convolver.connect(this.outGain);\n    } else {\n      this.inGain.disconnect();\n      this.convolver.disconnect();\n      this.inGain.connect(this.outGain);\n    }\n  }\n  setupUI() {\n    this.bypassToggle = this.createToggle({ propName: 'bypass', style: { grow: .25 } });\n    this.ui.append([\n      this.createHozLayout([this.createLabel('Bypass ?'), this.bypassToggle], { style: { spacing: 5 } })\n    ]);\n  }\n  handleAudioConnections() {\n    // Handle actual webaudio node stuff\n    this.outputs[0].on('connect', (_, connector) => this.outputs[0].ref.connect(connector.end.ref));\n    this.outputs[0].on('disconnect', (_inst, _connector, _start, end) => this.outputs[0].ref.disconnect(end.ref));\n  }\n}\n","import { Flow, FlowState } from \"../../core/flow\";\nimport { Vector2 } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { Node } from \"../../core/node\";\n\nexport class Debug extends Node {\n  inGain: GainNode;\n  outGain: GainNode;\n  debugNode: AudioWorkletNode;\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'Debug', options.position || new Vector2(50, 50), options.width || 120,\n      [{ name: 'in', dataType: 'audio' }],\n      [{ name: 'out', dataType: 'audio' }, { name: 'debug', dataType: 'any' }],\n      {\n        props: options.props || {},\n        style: options.style || { rowHeight: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.inGain = flow.flowConnect.audioContext.createGain();\n    this.outGain = flow.flowConnect.audioContext.createGain();\n    this.inputs[0].ref = this.inGain;\n    this.outputs[0].ref = this.outGain;\n\n    this.debugNode = new AudioWorkletNode(flow.flowConnect.audioContext, 'debug', { numberOfInputs: 1, numberOfOutputs: 1 });\n    this.debugNode.port.onmessage = (e: any) => {\n      if (flow.state !== FlowState.Stopped) this.setOutputs(1, e.data);\n    }\n    this.inputs[0].ref.connect(this.debugNode);\n    this.debugNode.connect(this.outputs[0].ref);\n\n    this.handleAudioConnections();\n  }\n\n  handleAudioConnections() {\n    // Handle actual webaudio node stuff\n    this.outputs[0].on('connect', (_, connector) => this.outputs[0].ref.connect(connector.end.ref));\n    this.outputs[0].on('disconnect', (_inst, _connector, _start, end) => this.outputs[0].ref.disconnect(end.ref));\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector2 } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { InputType } from \"../../ui/input\";\nimport { clamp } from \"../../utils/utils\";\nimport { Node } from \"../../core/node\";\nimport { Slider } from \"../../ui/slider\";\n\nexport class DelayEffect extends Node {\n  delaySlider: Slider;\n  feedbackSlider: Slider;\n  cutoffSlider: Slider;\n  drySlider: Slider;\n  wetSlider: Slider;\n\n  inGain: GainNode;\n  outGain: GainNode;\n  dryGain: GainNode;\n  wetGain: GainNode;\n  filter: BiquadFilterNode;\n  delay: DelayNode;\n  feedbackNode: GainNode;\n\n  static DefaultProps = { feedback: 0.45, cutoff: 20000, wet: 0.5, dry: 1, delayTime: 100, bypass: false };\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'Delay', options.position || new Vector2(50, 50), options.width || 230,\n      [{ name: 'in', dataType: 'audio' }],\n      [{ name: 'out', dataType: 'audio' }],\n      {\n        props: options.props ? { ...DelayEffect.DefaultProps, ...options.props } : DelayEffect.DefaultProps,\n        style: options.style || { rowHeight: 10, spacing: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.inGain = flow.flowConnect.audioContext.createGain();\n    this.outGain = flow.flowConnect.audioContext.createGain();\n    this.dryGain = flow.flowConnect.audioContext.createGain();\n    this.wetGain = flow.flowConnect.audioContext.createGain();\n    this.filter = flow.flowConnect.audioContext.createBiquadFilter();\n    this.delay = flow.flowConnect.audioContext.createDelay(10);\n    this.feedbackNode = flow.flowConnect.audioContext.createGain();\n    this.props.filterType = 'lowpass';\n\n    this.delay.delayTime.value = this.props.delayTime / 1000;\n    this.feedbackNode.gain.value = this.props.feedback;\n    this.filter.frequency.value = this.props.cutoff;\n    this.wetGain.gain.value = this.props.wet;\n    this.dryGain.gain.value = this.props.dry;\n\n    this.inputs[0].ref = this.inGain;\n    this.outputs[0].ref = this.outGain;\n\n    this.delay.connect(this.filter);\n    this.filter.connect(this.feedbackNode);\n    this.feedbackNode.connect(this.delay);\n    this.feedbackNode.connect(this.wetGain);\n\n    this.setBypass();\n\n    this.setupUI();\n\n    let delayChanged = () => this.delay.delayTime.value = this.props.delayTime / 1000;\n    this.delaySlider.on('change', delayChanged);\n    this.watch('delayTime', () => {\n      if (this.props.delayTime < 10 || this.props.delayTime > 10000) {\n        this.props.delayTime = clamp(this.props.delayTime, 10, 10000);\n        delayChanged();\n      }\n    });\n    let feedbackChanged = () => this.feedbackNode.gain.setTargetAtTime(this.props.feedback, flow.flowConnect.audioContext.currentTime, 0.01);\n    this.feedbackSlider.on('change', feedbackChanged);\n    this.watch('feedback', () => {\n      if (this.props.feedback < 0 || this.props.feedback > 0.9) {\n        this.props.feedback = clamp(this.props.feedback, 0, 0.9);\n        feedbackChanged();\n      }\n    });\n    let cutoffChanged = () => this.filter.frequency.setTargetAtTime(this.props.cutoff, flow.flowConnect.audioContext.currentTime, 0.01);\n    this.cutoffSlider.on('change', cutoffChanged);\n    this.watch('cutoff', () => {\n      if (this.props.cutoff < 20 || this.props.cutoff > 20000) {\n        this.props.cutoff = clamp(this.props.cutoff, 20, 20000);\n        cutoffChanged();\n      }\n    });\n    let wetChanged = () => this.wetGain.gain.setTargetAtTime(this.props.wet, flow.flowConnect.audioContext.currentTime, 0.01);\n    this.wetSlider.on('change', wetChanged);\n    this.watch('wet', () => {\n      if (this.props.wet < 0 || this.props.wet > 1) {\n        this.props.wet = clamp(this.props.wet, 0, 1);\n        wetChanged();\n      }\n    });\n    let dryChanged = () => this.dryGain.gain.setTargetAtTime(this.props.dry, flow.flowConnect.audioContext.currentTime, 0.01);\n    this.drySlider.on('change', dryChanged);\n    this.watch('dry', () => {\n      if (this.props.dry < 0 || this.props.dry > 1) {\n        this.props.dry = clamp(this.props.dry, 0, 1);\n        dryChanged();\n      }\n    });\n    this.watch('bypass', () => this.setBypass());\n\n    this.handleAudioConnections();\n  }\n\n  setBypass() {\n    if (!this.props.bypass) {\n      this.inGain.connect(this.delay);\n      this.inGain.connect(this.dryGain);\n      this.wetGain.connect(this.outGain);\n      this.dryGain.connect(this.outGain);\n    } else {\n      this.inGain.disconnect();\n      this.wetGain.disconnect();\n      this.dryGain.disconnect();\n      this.inGain.connect(this.outGain);\n    }\n  }\n  setupUI() {\n    let bypassToggle = this.createToggle({ propName: 'bypass', style: { grow: .1 } });\n    this.delaySlider = this.createSlider(0, 10000, { height: 10, propName: 'delayTime', style: { grow: .5 } });\n    let delayInput = this.createInput({ propName: 'delayTime', height: 20, style: { type: InputType.Number, grow: .3, precision: 0 } });\n    this.feedbackSlider = this.createSlider(0, 0.9, { height: 10, propName: 'feedback', style: { grow: .5 } });\n    let feedbackInput = this.createInput({ propName: 'feedback', height: 20, style: { type: InputType.Number, grow: .3, precision: 2 } });\n    this.cutoffSlider = this.createSlider(20, 20000, { height: 10, propName: 'cutoff', style: { grow: .5 } });\n    let cutoffInput = this.createInput({ propName: 'cutoff', height: 20, style: { type: InputType.Number, grow: .3, precision: 0 } });\n    this.wetSlider = this.createSlider(0, 1, { height: 10, propName: 'wet', style: { grow: .5 } });\n    let wetInput = this.createInput({ propName: 'wet', height: 20, style: { type: InputType.Number, grow: .3, precision: 2 } });\n    this.drySlider = this.createSlider(0, 1, { height: 10, propName: 'dry', style: { grow: .5 } });\n    let dryInput = this.createInput({ propName: 'dry', height: 20, style: { type: InputType.Number, grow: .3, precision: 2 } });\n    this.ui.append([\n      this.createHozLayout([this.createLabel('Delay', { style: { grow: .3 } }), this.delaySlider, delayInput], { style: { spacing: 5 } }),\n      this.createHozLayout([this.createLabel('Feedback', { style: { grow: .3 } }), this.feedbackSlider, feedbackInput], { style: { spacing: 5 } }),\n      this.createHozLayout([this.createLabel('Cutoff', { style: { grow: .3 } }), this.cutoffSlider, cutoffInput], { style: { spacing: 5 } }),\n      this.createHozLayout([this.createLabel('Wet', { style: { grow: .3 } }), this.wetSlider, wetInput], { style: { spacing: 5 } }),\n      this.createHozLayout([this.createLabel('Dry', { style: { grow: .3 } }), this.drySlider, dryInput], { style: { spacing: 5 } }),\n      this.createHozLayout([this.createLabel('Bypass ?', { style: { grow: .3 } }), bypassToggle], { style: { spacing: 5 } })\n    ]);\n  }\n  handleAudioConnections() {\n    // Handle actual webaudio node stuff\n    this.outputs[0].on('connect', (_, connector) => this.outputs[0].ref.connect(connector.end.ref));\n    this.outputs[0].on('disconnect', (_inst, _connector, _start, end) => this.outputs[0].ref.disconnect(end.ref));\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector2 } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { Node } from \"../../core/node\";\n\nexport class Destination extends Node {\n  masterVolumeGainNode: GainNode;\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'Audio Destination', options.position || new Vector2(50, 50), options.width || 160,\n      [{ name: 'out', dataType: 'audio' }, { name: 'gain', dataType: 'audioparam' }], [],\n      {\n        props: options.props || {},\n        style: options.style || { rowHeight: 10, spacing: 15 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.masterVolumeGainNode = flow.flowConnect.audioContext.createGain();\n    this.inputs[0].ref = this.masterVolumeGainNode;\n    this.inputs[0].ref.connect(flow.flowConnect.audioContext.destination);\n    this.inputs[1].ref = this.inputs[0].ref.gain;\n    this.inputs[1].on('data', (_, data) => typeof data === 'number' && (this.inputs[1].ref.value = data));\n  }\n\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector2 } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { Node } from '../../core/node';\nimport { Toggle } from \"../../ui/toggle\";\nimport { Select } from \"../../ui/select\";\nimport { Input, InputType } from \"../../ui/input\";\nimport { clamp } from \"../../utils/utils\";\n\nexport class Distorter extends Node {\n  amountInput: Input;\n  oversampleSelect: Select;\n  bypassToggle: Toggle;\n\n  distorter: WaveShaperNode;\n  inGain: GainNode;\n  outGain: GainNode;\n\n  oversampleOptions = ['none', '2x', '4x'];\n\n  static DefaultProps = { oversample: 'none', amount: 50, bypass: false };\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(\n      flow, options.name || 'Distorter',\n      options.position || new Vector2(50, 50),\n      options.width || 200,\n      [{ name: 'in', dataType: 'audio' }],\n      [{ name: 'out', dataType: 'audio' }],\n      {\n        style: options.style || { rowHeight: 10, spacing: 10 },\n        terminalStyle: options.terminalStyle || {},\n        props: options.props ? { ...Distorter.DefaultProps, ...options.props } : Distorter.DefaultProps\n      }\n    )\n\n    this.inGain = flow.flowConnect.audioContext.createGain();\n    this.outGain = flow.flowConnect.audioContext.createGain();\n    this.distorter = flow.flowConnect.audioContext.createWaveShaper();\n    this.distorter.oversample = 'none';\n    this.distorter.curve = this.makeDistortionCurve(400);\n\n    this.inputs[0].ref = this.inGain;\n    this.outputs[0].ref = this.outGain;\n\n    this.setBypass();\n\n    this.setupUI();\n\n    this.watch('oversample', (_oldVal, newVal) => {\n      if (!this.oversampleOptions.includes(newVal)) this.props.oversample = 'none';\n      this.distorter.oversample = this.props.oversample;\n    });\n    this.watch('amount', (_oldVal, newVal) => {\n      if (newVal < 0 || newVal > 1000) this.props.amount = clamp(parseInt(newVal), 0, 1000);\n      this.distorter.curve = this.makeDistortionCurve(parseInt(this.props.amount));\n    });\n    this.watch('bypass', this.setBypass.bind(this));\n\n    this.handleAudioConnections();\n  }\n\n  makeDistortionCurve(amount: number) {\n    let k = typeof amount === 'number' ? amount : 50,\n      n_samples = 44100,\n      curve = new Float32Array(n_samples),\n      deg = Math.PI / 180,\n      i = 0,\n      x;\n    for (; i < n_samples; ++i) {\n      x = i * 2 / n_samples - 1;\n      curve[i] = (3 + k) * x * 20 * deg / (Math.PI + k * Math.abs(x));\n    }\n    return curve;\n  }\n  setBypass() {\n    if (!this.props.bypass) {\n      this.inGain.disconnect();\n      this.inGain.connect(this.distorter);\n      this.distorter.connect(this.outGain);\n    } else {\n      this.distorter.disconnect();\n      this.inGain.disconnect();\n      this.inGain.connect(this.outGain);\n    }\n  }\n\n  setupUI() {\n    this.amountInput = this.createInput({ propName: 'amount', height: 20, style: { grow: 1, type: InputType.Number, precision: 0 } });\n    this.oversampleSelect = this.createSelect(this.oversampleOptions, { height: 15, propName: 'oversample', style: { grow: 1 } });\n    this.bypassToggle = this.createToggle({ propName: 'bypass', style: { grow: .15 } });\n    this.ui.append([\n      this.createHozLayout([this.createLabel('Amount'), this.amountInput], { style: { spacing: 10 } }),\n      this.createHozLayout([this.createLabel('Oversample'), this.oversampleSelect], { style: { spacing: 10 } }),\n      this.createHozLayout([this.createLabel('Bypass ?', { style: { grow: .3 } }), this.bypassToggle], { style: { spacing: 5 } })\n    ]);\n  }\n  handleAudioConnections() {\n    this.outputs[0].on('connect', (_inst, connector) => this.outputs[0].ref.connect(connector.end.ref));\n    this.outputs[0].on('disconnect', (_inst, _connector, _start, end) => this.outputs[0].ref.disconnect(end.ref));\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector2 } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { clamp } from \"../../utils/utils\";\nimport { Node } from \"../../core/node\";\nimport { Toggle } from \"../../ui/toggle\";\n\nexport class DynamicsCompressor extends Node {\n  bypassToggle: Toggle;\n\n  inGain: GainNode;\n  outGain: GainNode;\n  compressor: DynamicsCompressorNode;\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'Dynamics Compressor', options.position || new Vector2(50, 50), options.width || 230,\n      [\n        { name: 'in', dataType: 'audio' }, { name: 'threshold', dataType: 'audioparam' },\n        { name: 'ratio', dataType: 'audioparam' }, { name: 'knee', dataType: 'audioparam' },\n        { name: 'attack', dataType: 'audioparam' }, { name: 'release', dataType: 'audioparam' }\n      ],\n      [{ name: 'out', dataType: 'audio' }],\n      {\n        props: options.props ? { bypass: false, ...options.props } : { bypass: false },\n        style: options.style || { rowHeight: 10, spacing: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.inGain = flow.flowConnect.audioContext.createGain();\n    this.outGain = flow.flowConnect.audioContext.createGain();\n    this.compressor = flow.flowConnect.audioContext.createDynamicsCompressor();\n    this.compressor.threshold.value = -20;\n    this.compressor.ratio.value = 4;\n    this.compressor.knee.value = 5;\n    this.compressor.attack.value = 0.01;\n    this.compressor.release.value = 0.12;\n\n    this.inputs[0].ref = this.inGain;\n    this.inputs[1].ref = this.compressor.threshold;\n    this.inputs[2].ref = this.compressor.ratio;\n    this.inputs[3].ref = this.compressor.knee;\n    this.inputs[4].ref = this.compressor.attack;\n    this.inputs[5].ref = this.compressor.release;\n    this.outputs[0].ref = this.outGain;\n\n    this.inputs[1].on('data', (_, data) => typeof data === 'number' && (this.inputs[1].ref.value = clamp(data, -100, 0)));\n    this.inputs[2].on('data', (_, data) => typeof data === 'number' && (this.inputs[2].ref.value = clamp(data, 1, 20)));\n    this.inputs[3].on('data', (_, data) => typeof data === 'number' && (this.inputs[3].ref.value = clamp(data, 0, 40)));\n    this.inputs[4].on('data', (_, data) => typeof data === 'number' && (this.inputs[4].ref.value = clamp(data, 0, 1)));\n    this.inputs[5].on('data', (_, data) => typeof data === 'number' && (this.inputs[5].ref.value = clamp(data, 0, 1)));\n\n    this.setBypass();\n\n    this.setupUI();\n\n    this.watch('bypass', () => this.setBypass());\n\n    this.handleAudioConnections();\n  }\n\n  setBypass() {\n    if (this.props.bypass) {\n      this.compressor.disconnect();\n      this.inGain.disconnect();\n      this.inGain.connect(this.outGain);\n    } else {\n      this.inGain.disconnect();\n      this.inGain.connect(this.compressor);\n      this.compressor.connect(this.outGain);\n    }\n  }\n  setupUI() {\n    this.bypassToggle = this.createToggle({ propName: 'bypass', style: { grow: .1 } });\n    this.ui.append([\n      this.createHozLayout([this.createLabel('Bypass ?', { style: { grow: .3 } }), this.bypassToggle], { style: { spacing: 5 } })\n    ]);\n  }\n  handleAudioConnections() {\n    // Handle actual webaudio node stuff\n    this.outputs[0].on('connect', (_, connector) => this.outputs[0].ref.connect(connector.end.ref));\n    this.outputs[0].on('disconnect', (_inst, _connector, _start, end) => this.outputs[0].ref.disconnect(end.ref));\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector2 } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { Node } from '../../core/node';\nimport { Toggle } from \"../../ui/toggle\";\nimport { VSlider } from \"../../ui/v-slider\";\nimport { clamp, isInRange } from \"../../utils/utils\";\nimport { Align } from \"../../common/enums\";\nimport { Stack } from \"../../ui/stack\";\n\nexport class Equalizer extends Node {\n  vSliders: VSlider[] = [];\n  filters: BiquadFilterNode[] = [];\n  bypassToggle: Toggle;\n  inGain: GainNode;\n  outGain: GainNode;\n\n  frequencies = [32, 64, 125, 250, 500, 1000, 2000, 4000, 8000, 16000];\n  freqDisplay = ['32', '64', '125', '250', '500', '1K', '2K', '4K', '8K', '16K']\n\n  static DefaultProps = { eq1: 0, eq2: 0, eq3: 0, eq4: 0, eq5: 0, eq6: 0, eq7: 0, eq8: 0, eq9: 0, eq10: 0, bypass: false };\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(\n      flow, options.name || 'Equalizer',\n      options.position || new Vector2(50, 50),\n      options.width || 300,\n      [{ name: 'in', dataType: 'audio' }], [{ name: 'out', dataType: 'audio' }],\n      {\n        style: options.style || { rowHeight: 10, spacing: 10 },\n        terminalStyle: options.terminalStyle || {},\n        props: options.props ? { ...Equalizer.DefaultProps, ...options.props } : Equalizer.DefaultProps\n      }\n    )\n\n    this.inGain = flow.flowConnect.audioContext.createGain();\n    this.outGain = flow.flowConnect.audioContext.createGain();\n    this.frequencies.forEach((freq, index) => {\n      let filter = flow.flowConnect.audioContext.createBiquadFilter();\n      filter.frequency.value = freq;\n      if (index === 0)\n        filter.type = 'lowshelf';\n      else if (index === 9)\n        filter.type = 'highshelf';\n      else\n        filter.type = 'peaking';\n      this.filters.push(filter);\n    });\n    for (let i = 1; i < 10; ++i) {\n      this.filters[i - 1].connect(this.filters[i]);\n    }\n\n    this.inputs[0].ref = this.inGain;\n    this.outputs[0].ref = this.outGain;\n\n    this.setBypass();\n\n    this.setupUI();\n\n    this.watch('bypass', this.setBypass.bind(this));\n    for (let i = 1; i <= 10; ++i) {\n      this.watch(`eq${i}`, (_oldVal, newVal) => {\n        if (!isInRange(newVal, -40, 40)) {\n          this.props[`eq${i}`] = clamp(newVal, -40, 40);\n        }\n        this.filters[i - 1].gain.value = this.props[`eq${i}`]\n      });\n    }\n\n    this.handleAudioConnections();\n  }\n\n  setBypass() {\n    if (!this.props.bypass) {\n      this.inGain.disconnect();\n      this.inGain.connect(this.filters[0]);\n      this.filters[9].connect(this.outGain);\n    } else {\n      this.inGain.disconnect();\n      this.filters[9].disconnect();\n      this.inGain.connect(this.outGain);\n    }\n  }\n  setupUI() {\n    let stacks: Stack[] = [];\n    this.frequencies.forEach((_freq, index) => {\n      let vSlider = this.createVSlider(-40, 40, { height: 120, propName: `eq${index + 1}` });\n      this.vSliders.push(vSlider);\n      let stack = this.createStack({\n        childs: [\n          this.createLabel(this.freqDisplay[index], { style: { align: Align.Center } }),\n          vSlider,\n          this.createLabel(this.props[`eq${index + 1}`], { propName: `eq${index + 1}`, style: { align: Align.Center, precision: 0 } }),\n        ],\n        style: { grow: .1, spacing: 5 }\n      });\n      stacks.push(stack);\n    });\n    this.bypassToggle = this.createToggle({ propName: 'bypass', height: 10, style: { grow: .1 } });\n    this.ui.append([\n      this.createHozLayout(stacks, { style: { spacing: 5 } }),\n      this.createHozLayout([this.createLabel('Bypass ?'), this.bypassToggle], { style: { spacing: 5 } })\n    ]);\n  }\n  handleAudioConnections() {\n    this.outputs[0].on('connect', (_inst, connector) => this.outputs[0].ref.connect(connector.end.ref));\n    this.outputs[0].on('disconnect', (_inst, _connector, _start, end) => this.outputs[0].ref.disconnect(end.ref));\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector2 } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { clamp } from \"../../utils/utils\";\nimport { Node } from '../../core/node';\nimport { Slider } from \"../../ui/slider\";\nimport { Display } from \"../../ui/display\";\nimport { Label } from \"../../ui/label\";\nimport { Align } from \"../../common/enums\";\n\nexport class FrequencyAnalyser extends Node {\n  freqLabel: Label;\n  fftSizeSlider: Slider;\n  fftSizeLabel: Label;\n  display: Display;\n\n  analyser: AnalyserNode;\n\n  static DefaultProps = { fftSize: 11, currFreq: 0 };\n\n  fftSizes = [32, 64, 128, 256, 512, 1024, 2048, 4096, 8192, 16384, 32768];\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(\n      flow, options.name || 'Frequency Analyser',\n      options.position || new Vector2(50, 50),\n      options.width || 350,\n      [{ name: 'in', dataType: 'audio' }], [{ name: 'out', dataType: 'audio' }],\n      {\n        style: options.style || { rowHeight: 10, spacing: 10 },\n        terminalStyle: options.terminalStyle || {},\n        props: options.props ? { ...FrequencyAnalyser.DefaultProps, ...options.props } : FrequencyAnalyser.DefaultProps\n      }\n    )\n\n    this.analyser = flow.flowConnect.audioContext.createAnalyser();\n    this.analyser.fftSize = this.getFFTSize();\n    this.inputs[0].ref = this.outputs[0].ref = this.analyser;\n\n    this.setupUI();\n\n    this.watch('fftSize', (_oldVal, newVal) => {\n      if (newVal < 5 || newVal > 15) this.props.fftSize = clamp(Math.round(newVal), 5, 15);\n      let actualFFTSize = this.getFFTSize();\n      this.fftSizeLabel.text = actualFFTSize;\n      this.analyser.fftSize = actualFFTSize;\n    });\n    this.display.on('over', (_inst, screenPos) => {\n      this.props.currFreq = (\n        Math.floor(\n          (\n            screenPos.subtract(this.display.position.transform(this.flow.flowConnect.transform)).x\n            / this.display.offCanvasConfigs[0].canvas.width\n          )\n          * this.analyser.frequencyBinCount\n        ) * this.flow.flowConnect.audioContext.sampleRate\n      ) / (this.analyser.frequencyBinCount * 2);\n    });\n    this.display.on('exit', () => (this.props.currFreq = 0));\n\n    this.handleAudioConnections();\n  }\n\n  getFFTSize() {\n    return this.fftSizes[clamp(Math.round(this.props.fftSize), 5, 15) - 5];\n  }\n  setupUI() {\n    this.freqLabel = this.createLabel('Frequency:');\n    this.fftSizeSlider = this.createSlider(5, 15, { height: 10, propName: 'fftSize', style: { grow: .6, precision: 0 } });\n    this.fftSizeLabel = this.createLabel(this.getFFTSize(), { height: 20, style: { grow: .2, align: Align.Right } });\n    this.display = this.createDisplay(200, [{\n      auto: true,\n      renderer: (...args) => this.customRenderer(args[0], args[1], args[2])\n    }]);\n\n    this.ui.append([\n      this.createHozLayout([\n        this.freqLabel, this.createLabel(this.props.currFreq, { propName: 'currFreq', style: { precision: 0, grow: 1 } })\n      ], { style: { spacing: 5 } }),\n      this.display,\n      this.createHozLayout([\n        this.createLabel('FFT Size', { style: { grow: .2 } }), this.fftSizeSlider, this.fftSizeLabel\n      ], { style: { spacing: 5 } })\n    ]);\n  }\n  customRenderer(context: OffscreenCanvasRenderingContext2D | CanvasRenderingContext2D, width: number, height: number): boolean {\n    let value, percent, offset, hue,\n      i = 0,\n      frequencyBinCount = this.analyser.frequencyBinCount,\n      frequencyData = new Uint8Array(frequencyBinCount),\n      orgHeight = height,\n      barWidth = width / frequencyBinCount;\n\n    this.analyser.getByteFrequencyData(frequencyData);\n\n    for (; i < frequencyBinCount; i++) {\n      value = frequencyData[i];\n      percent = value / 256;\n      height = orgHeight * percent;\n      offset = orgHeight - height - 1;\n      hue = i / frequencyBinCount * 360;\n      context.fillStyle = 'hsl(' + hue + ', 100%, 50%)';\n      context.fillRect(i * barWidth, offset, barWidth, height);\n    }\n\n    return true;\n  }\n  handleAudioConnections() {\n    this.outputs[0].on('connect', (_inst, connector) => this.outputs[0].ref.connect(connector.end.ref));\n    this.outputs[0].on('disconnect', (_inst, _connector, _start, end) => this.outputs[0].ref.disconnect(end.ref));\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector2 } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { Node } from \"../../core/node\";\n\nexport class Gain extends Node {\n  gain: GainNode;\n\n  static DefaultProps = { gain: 1 };\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'Gain', options.position || new Vector2(50, 50), options.width || 120,\n      [{ name: 'in', dataType: 'audio' }, { name: 'gain', dataType: 'audioparam' }],\n      [{ name: 'out', dataType: 'audio' }],\n      {\n        props: options.props ? { ...Gain.DefaultProps, ...options.props } : Gain.DefaultProps,\n        style: options.style || { rowHeight: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.gain = flow.flowConnect.audioContext.createGain();\n    this.inputs[0].ref = this.gain;\n    this.outputs[0].ref = this.gain;\n    this.inputs[1].ref = this.inputs[0].ref.gain;\n    this.inputs[1].on('data', (_, data) => typeof data === 'number' && (this.inputs[1].ref.value = data));\n\n    this.handleAudioConnections();\n  }\n\n  handleAudioConnections() {\n    // Handle actual webaudio node stuff\n    this.outputs[0].on('connect', (_, connector) => this.outputs[0].ref.connect(connector.end.ref));\n    this.outputs[0].on('disconnect', (_inst, _connector, _start, end) => this.outputs[0].ref.disconnect(end.ref));\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector2 } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { FlowConnectState } from \"../../flow-connect\";\nimport { Constant } from \"../../resource/constants\";\nimport { clamp } from \"../../utils/utils\";\nimport { InputType, Input } from \"../../ui/input\";\nimport { Node } from \"../../core/node\";\nimport { Toggle } from \"../../ui/toggle\";\n\nexport class Metronome extends Node {\n  autoToggle: Toggle;\n  freqInput: Input;\n  bpmInput: Input;\n  source: AudioBufferSourceNode;\n\n  volumeGainNode: GainNode;\n  proxyParamSourceNode: AudioWorkletNode;\n\n  static DefaultProps: any = { frequency: 330, buffer: null, bpm: 130, loop: true, auto: true };\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'Metronome', options.position || new Vector2(50, 50), options.width || 200,\n      [\n        { name: 'trigger', dataType: 'event' }, { name: 'gain', dataType: 'audioparam' },\n        { name: 'detune', dataType: 'audioparam' }, { name: 'playback-rate', dataType: 'audioparam' }\n      ],\n      [{ name: 'out', dataType: 'audio' }],\n      {\n        props: options.props ? { ...Metronome.DefaultProps, ...options.props } : Metronome.DefaultProps,\n        style: options.style || { rowHeight: 10, spacing: 15 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.volumeGainNode = flow.flowConnect.audioContext.createGain();\n    this.proxyParamSourceNode = new AudioWorkletNode(\n      flow.flowConnect.audioContext,\n      'proxy-param-for-source',\n      { numberOfOutputs: 2, parameterData: { detune: 0, playbackRate: 1 } }\n    );\n    this.inputs[1].ref = this.volumeGainNode.gain;\n    this.inputs[2].ref = (this.proxyParamSourceNode.parameters as Map<string, AudioParam>).get('detune');\n    this.inputs[3].ref = (this.proxyParamSourceNode.parameters as Map<string, AudioParam>).get('playbackRate');\n    this.inputs[1].on('data', (_, data) => typeof data === 'number' && (this.inputs[1].ref.value = data));\n    this.inputs[2].on('data', (_, data) => typeof data === 'number' && (this.inputs[2].ref.value = data));\n    this.inputs[3].on('data', (_, data) => typeof data === 'number' && (this.inputs[3].ref.value = data));\n    this.outputs[0].ref = this.volumeGainNode;\n    this.fillBuffer();\n\n    this.setupUI();\n\n    this.bpmInput.on('change', () => {\n      if (this.source) {\n        this.source.loopEnd = 1 / (clamp(this.props.bpm, 30, 300) / 60);\n      }\n    });\n    this.freqInput.on('change', () => {\n      if (this.source) {\n        this.stopSource();\n        this.fillBuffer();\n        this.playSource();\n      } else this.fillBuffer();\n    });\n    this.inputs[0].on('event', () => this.playSource());\n\n    flow.flowConnect.on('start', () => this.props.auto && this.playSource());\n    flow.flowConnect.on('stop', () => this.stopSource());\n\n    this.handleAudioConnections();\n  }\n  fillBuffer() {\n    let ctx = this.flow.flowConnect.audioContext;\n\n    let buffer = ctx.createBuffer(1, ctx.sampleRate * 2, ctx.sampleRate);\n    let channel = buffer.getChannelData(0);\n\n    let phase = 0;\n    let amp = 1;\n    let durationFrames = ctx.sampleRate / 50;\n\n    const f = this.props.frequency;\n    for (let i = 0; i < durationFrames; i++) {\n      channel[i] = Math.sin(phase) * amp;\n      phase += Constant.TAU * f / ctx.sampleRate;\n      if (phase > Constant.TAU) {\n        phase -= Constant.TAU;\n      }\n      amp -= 1 / durationFrames;\n    }\n    this.props.buffer = buffer;\n  }\n  setupUI() {\n    this.autoToggle = this.createToggle({ propName: 'auto', height: 10, style: { grow: 0.2 } });\n    this.freqInput = this.createInput({ propName: 'frequency', height: 20, style: { type: InputType.Number, grow: 0.5 } });\n    this.bpmInput = this.createInput({ propName: 'bpm', height: 20, style: { type: InputType.Number, grow: 0.5 } });\n    this.ui.append([\n      this.createHozLayout([this.createLabel('Auto ?'), this.autoToggle], { style: { spacing: 5 } }),\n      this.createHozLayout([\n        this.createLabel('Frequency'), this.freqInput, this.createLabel('BPM'), this.bpmInput\n      ], { style: { spacing: 5 } })\n    ]);\n  }\n  playSource() {\n    if (this.flow.flowConnect.state === FlowConnectState.Stopped || !this.props.buffer) return;\n\n    let audioSource = new AudioBufferSourceNode(this.flow.flowConnect.audioContext);\n    audioSource.buffer = this.props.buffer;\n    audioSource.loop = true;\n    this.source = audioSource;\n\n    audioSource.loopEnd = 1 / (clamp(this.props.bpm, 30, 300) / 60);\n    this.proxyParamSourceNode.connect(audioSource.detune, 0);\n    this.proxyParamSourceNode.connect(audioSource.playbackRate, 1);\n    audioSource.connect(this.outputs[0].ref);\n    audioSource.start(0);\n  }\n  stopSource() {\n    if (this.source) {\n      this.source.stop();\n      this.source = null;\n    }\n  }\n  handleAudioConnections() {\n    // Handle actual webaudio node stuff\n    this.outputs[0].on('connect', (_, connector) => this.outputs[0].ref.connect(connector.end.ref));\n    this.outputs[0].on('disconnect', (_inst, _connector, _start, end) => this.outputs[0].ref.disconnect(end.ref));\n  }\n}\n","import { Flow, FlowState } from \"../../core/flow\";\nimport { Vector2 } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { Node } from '../../core/node';\nimport { Log } from \"../../utils/logger\";\n\nexport class Microphone extends Node {\n  microphone: MediaStreamAudioSourceNode;\n  stream: MediaStream;\n  outGain: GainNode;\n\n  static DefaultProps = {};\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(\n      flow, options.name || 'Microphone',\n      options.position || new Vector2(50, 50),\n      options.width || 120, [],\n      [{ name: 'out', dataType: 'audio' }],\n      {\n        style: options.style || { rowHeight: 10 },\n        terminalStyle: options.terminalStyle || {},\n        props: options.props ? { ...Microphone.DefaultProps, ...options.props } : Microphone.DefaultProps\n      }\n    )\n\n    this.outGain = flow.flowConnect.audioContext.createGain();\n    this.outputs[0].ref = this.outGain;\n\n    this.flow.flowConnect.on('start', () => {\n      if (!this.stream) {\n        this.getMicrophone().then(() => {\n          if (this.flow.state !== FlowState.Stopped) this.microphone.connect(this.outGain);\n        }, error => {\n          Log.error('Cannot access microphone: ', error);\n        }).catch(error => Log.error(error));\n      } else {\n        this.microphone.connect(this.outGain);\n      }\n    });\n    this.flow.flowConnect.on('stop', () => this.microphone && this.microphone.disconnect());\n\n    this.handleAudioConnections();\n\n    this.getMicrophone().then(() => { /**/ }, error => {\n      Log.error('Cannot access microphone: ', error);\n    }).catch(error => Log.error(error));\n  }\n\n  async getMicrophone() {\n    this.stream = await navigator.mediaDevices.getUserMedia({ audio: true, video: false });\n    this.microphone = this.flow.flowConnect.audioContext.createMediaStreamSource(this.stream);\n  }\n\n  handleAudioConnections() {\n    this.outputs[0].on('connect', (_inst, connector) => this.outputs[0].ref.connect(connector.end.ref));\n    this.outputs[0].on('disconnect', (_inst, _connector, _start, end) => this.outputs[0].ref.disconnect(end.ref));\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector2 } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { InputType } from \"../../ui/input\";\nimport { clamp } from \"../../utils/utils\";\nimport { Node } from \"../../core/node\";\nimport { Slider } from \"../../ui/slider\";\nimport { Toggle } from \"../../ui/toggle\";\n\nexport class MoogEffect extends Node {\n  cutoffSlider: Slider;\n  resonanceSlider: Slider;\n  bypassToggle: Toggle;\n\n  inGain: GainNode;\n  outGain: GainNode;\n  moog: AudioWorkletNode;\n\n  static DefaultProps = { cutoff: 0.065, resonance: 3.5, bypass: false };\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'Moog Effect', options.position || new Vector2(50, 50), options.width || 230,\n      [{ name: 'in', dataType: 'audio' }],\n      [{ name: 'out', dataType: 'audio' }],\n      {\n        props: options.props ? { ...MoogEffect.DefaultProps, ...options.props } : MoogEffect.DefaultProps,\n        style: options.style || { rowHeight: 10, spacing: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.inGain = flow.flowConnect.audioContext.createGain();\n    this.outGain = flow.flowConnect.audioContext.createGain();\n    this.inputs[0].ref = this.inGain;\n    this.outputs[0].ref = this.outGain;\n\n    this.moog = new AudioWorkletNode(flow.flowConnect.audioContext, 'moog-effect', {\n      numberOfInputs: 1, numberOfOutputs: 1, processorOptions: { bufferSize: 4096 }\n    });\n    this.setBypass();\n\n    this.setupUI();\n\n    this.watch('bypass', () => this.setBypass());\n    this.watch('cutoff', () => {\n      if (this.props.cutoff < 0.0001 || this.props.cutoff > 1.0) this.props.cutoff = clamp(this.props.cutoff, 0.0001, 1.0);\n      this.paramsChanged();\n    });\n    this.watch('resonance', () => {\n      if (this.props.resonance < 0 || this.props.resonance > 4.0) this.props.resonance = clamp(this.props.resonance, 0, 4.0);\n      this.paramsChanged();\n    });\n\n    flow.flowConnect.on('start', () => this.paramsChanged());\n\n    this.handleAudioConnections();\n  }\n\n  paramsChanged() {\n    this.moog.port.postMessage({ cutoff: this.props.cutoff, resonance: this.props.resonance });\n  }\n  setBypass() {\n    if (this.props.bypass) {\n      this.moog.disconnect();\n      this.inGain.disconnect();\n      this.inGain.connect(this.outGain);\n    } else {\n      this.inGain.disconnect();\n      this.inGain.connect(this.moog);\n      this.moog.connect(this.outGain);\n    }\n  }\n  setupUI() {\n    this.cutoffSlider = this.createSlider(0.0001, 1.0, { height: 10, propName: 'cutoff', style: { grow: .5 } });\n    this.resonanceSlider = this.createSlider(0, 4.0, { height: 10, propName: 'resonance', style: { grow: .5 } });\n    let cutoffInput = this.createInput({ propName: 'cutoff', height: 20, style: { type: InputType.Number, grow: .2, precision: 2 } });\n    let resonanceInput = this.createInput({ propName: 'resonance', height: 20, style: { type: InputType.Number, grow: .4, precision: 2 } });\n    this.bypassToggle = this.createToggle({ propName: 'bypass', style: { grow: .1 } });\n    this.ui.append([\n      this.createHozLayout([this.createLabel('Cutoff', { style: { grow: .3 } }), this.cutoffSlider, cutoffInput], { style: { spacing: 5 } }),\n      this.createHozLayout([this.createLabel('Resonance', { style: { grow: .3 } }), this.resonanceSlider, resonanceInput], { style: { spacing: 5 } }),\n      this.createHozLayout([this.createLabel('Bypass ?', { style: { grow: .3 } }), this.bypassToggle], { style: { spacing: 5 } })\n    ]);\n  }\n  handleAudioConnections() {\n    // Handle actual webaudio node stuff\n    this.outputs[0].on('connect', (_, connector) => this.outputs[0].ref.connect(connector.end.ref));\n    this.outputs[0].on('disconnect', (_inst, _connector, _start, end) => this.outputs[0].ref.disconnect(end.ref));\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector2 } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { Node } from '../../core/node';\nimport { Select } from \"../../ui/select\";\n\nexport class Noise extends Node {\n  noiseSelect: Select\n  noise: AudioWorkletNode;\n  outGain: GainNode;\n\n  static DefaultProps = { type: 'white' };\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(\n      flow, options.name || 'Noise',\n      options.position || new Vector2(50, 50),\n      options.width || 170, [],\n      [{ name: 'out', dataType: 'audio' }],\n      {\n        style: options.style || { rowHeight: 10, spacing: 10 },\n        terminalStyle: options.terminalStyle || {},\n        props: options.props ? { ...Noise.DefaultProps, ...options.props } : Noise.DefaultProps\n      }\n    )\n\n    this.outGain = flow.flowConnect.audioContext.createGain();\n    this.outputs[0].ref = this.outGain;\n\n    this.noise = new AudioWorkletNode(flow.flowConnect.audioContext, 'noise', {\n      channelCount: 1, channelCountMode: 'explicit', outputChannelCount: [1], numberOfInputs: 1, numberOfOutputs: 1\n    });\n    this.noise.port.postMessage(this.props.type);\n\n    this.setupUI();\n\n    this.watch('type', (_oldVal, newVal) => {\n      if (!this.noiseSelect.values.includes(newVal)) newVal = 'white';\n      this.noise.port.postMessage(newVal);\n    });\n\n    this.handleAudioConnections();\n\n    this.flow.flowConnect.on('start', () => {\n      this.noise.connect(this.outGain);\n    });\n    this.flow.flowConnect.on('stop', () => {\n      this.noise.disconnect();\n    });\n  }\n\n  setupUI() {\n    this.noiseSelect = this.createSelect(['white', 'pink', 'brownian'], { height: 15, propName: 'type', style: { grow: .7 } });\n    this.ui.append([\n      this.createHozLayout([this.createLabel('Type', { style: { grow: .3 } }), this.noiseSelect], { style: { spacing: 5 } })\n    ]);\n  }\n  handleAudioConnections() {\n    this.outputs[0].on('connect', (_inst, connector) => this.outputs[0].ref.connect(connector.end.ref));\n    this.outputs[0].on('disconnect', (_inst, _connector, _start, end) => this.outputs[0].ref.disconnect(end.ref));\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector2 } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { InputType, Input } from \"../../ui/input\";\nimport { Node } from '../../core/node';\nimport { RadioGroup } from \"../../ui/radio-group\";\nimport { Slider } from \"../../ui/slider\";\nimport { HorizontalLayout } from \"../../ui/horizontal-layout\";\nimport { clamp } from \"../../utils/utils\";\n\nexport class Oscillator extends Node {\n  freqSlider: Slider;\n  freqInput: Input;\n  freqHozLayout: HorizontalLayout;\n  detuneSlider: Slider;\n  detuneInput: Input;\n  detuneHozLayout: HorizontalLayout;\n  typeGroup: RadioGroup;\n\n  oscillator: OscillatorNode;\n  freqProxy: AudioWorkletNode;\n  detuneProxy: AudioWorkletNode;\n  outGain: GainNode;\n\n  types = ['sine', 'square', 'sawtooth', 'triangle'];\n\n  static DefaultProps = { frequency: 440, detune: 0, type: 'sine' };\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(\n      flow, options.name || 'Oscillator',\n      options.position || new Vector2(50, 50),\n      options.width || 250, [],\n      [{ name: 'out', dataType: 'audio' }],\n      {\n        style: options.style || { rowHeight: 10, spacing: 10 },\n        terminalStyle: options.terminalStyle || {},\n        props: options.props ? { ...Oscillator.DefaultProps, ...options.props } : Oscillator.DefaultProps\n      }\n    )\n\n    this.freqProxy = new AudioWorkletNode(flow.flowConnect.audioContext, 'proxy');\n    this.detuneProxy = new AudioWorkletNode(flow.flowConnect.audioContext, 'proxy');\n    this.outGain = flow.flowConnect.audioContext.createGain();\n\n    this.setupUI();\n\n    this.inputsUI[0].ref = this.freqProxy;\n    this.inputsUI[1].ref = this.detuneProxy;\n    this.inputsUI[0].dataType = 'audioparam';\n    this.inputsUI[1].dataType = 'audioparam';\n    this.outputs[0].ref = this.outGain;\n\n    this.inputsUI[0].on('data', (_inst, data) => typeof data === 'number' && (this.props.frequency = data));\n    this.inputsUI[1].on('data', (_inst, data) => typeof data === 'number' && (this.props.detune = data));\n\n    this.watch('frequency', (_oldVal, newVal) => {\n      if (newVal < 0 || newVal > 20000) newVal = clamp(newVal, 0, 20000);\n      if (!this.freqHozLayout.disabled) this.oscillator && (this.oscillator.frequency.value = newVal);\n    });\n    this.watch('detune', (_oldVal, newVal) => {\n      if (!this.detuneHozLayout.disabled) this.oscillator && (this.oscillator.detune.value = newVal);\n    });\n    this.watch('type', (_oldVal, newVal) => {\n      if (this.types.includes(newVal)) this.oscillator && (this.oscillator.type = newVal);\n    });\n\n    this.flow.flowConnect.on('start', () => this.startOscillator());\n    this.flow.flowConnect.on('stop', () => this.stopOscillator());\n\n    this.handleAudioConnections();\n  }\n\n  startOscillator() {\n    this.stopOscillator();\n    this.oscillator = this.flow.flowConnect.audioContext.createOscillator();\n    if (!this.inputsUI[0].isConnected()) this.oscillator.frequency.value = this.props.frequency;\n    else {\n      this.freqProxy.connect(this.oscillator.frequency);\n      this.oscillator.frequency.value = 0;\n    }\n    if (!this.inputsUI[1].isConnected()) this.oscillator.detune.value = this.props.detune;\n    else {\n      this.detuneProxy.connect(this.oscillator.detune);\n      this.oscillator.detune.value = 0;\n    }\n\n    this.oscillator.type = this.props.type;\n    this.oscillator.connect(this.outGain);\n    this.oscillator.start();\n  }\n  stopOscillator() {\n    if (this.oscillator) {\n      this.freqProxy.disconnect();\n      this.detuneProxy.disconnect();\n      this.oscillator.disconnect();\n      this.oscillator.stop();\n      this.oscillator = null;\n    }\n  }\n  setupUI() {\n    this.freqSlider = this.createSlider(0, 20000, { height: 10, propName: 'frequency', style: { grow: .5 } });\n    this.freqInput = this.createInput({ propName: 'frequency', height: 20, style: { type: InputType.Number, grow: .3, precision: 0 } });\n    this.freqHozLayout = this.createHozLayout([\n      this.createLabel('Freq.', { style: { grow: .2 } }), this.freqSlider, this.freqInput\n    ], { input: true, style: { spacing: 5 } });\n    this.detuneSlider = this.createSlider(-2400, 2400, { height: 10, propName: 'detune', style: { grow: .5 } });\n    this.detuneInput = this.createInput({ propName: 'detune', height: 20, style: { type: InputType.Number, grow: .3, precision: 0 } });\n    this.detuneHozLayout = this.createHozLayout([\n      this.createLabel('Detune', { style: { grow: .2 } }), this.detuneSlider, this.detuneInput\n    ], { input: true, style: { spacing: 5 } });\n    this.typeGroup = this.createRadioGroup(this.types, this.props.type, { propName: 'type', height: 20 });\n\n    this.ui.append([this.freqHozLayout, this.detuneHozLayout, this.typeGroup]);\n  }\n  handleAudioConnections() {\n    this.inputsUI[0].on('connect', () => {\n      if (this.oscillator) {\n        this.freqProxy.connect(this.oscillator.frequency);\n        this.oscillator.frequency.value = 0;\n      }\n    });\n    this.inputsUI[0].on('disconnect', () => {\n      if (this.oscillator) {\n        this.freqProxy.disconnect();\n        this.oscillator.frequency.value = this.props.frequency;\n      }\n    });\n    this.inputsUI[1].on('connect', () => {\n      if (this.oscillator) {\n        this.detuneProxy.connect(this.oscillator.detune);\n        this.oscillator.detune.value = 0;\n      }\n    });\n    this.inputsUI[1].on('disconnect', () => {\n      if (this.oscillator) {\n        this.detuneProxy.disconnect();\n        this.oscillator.detune.value = this.props.detune;\n      }\n    });\n    this.outputs[0].on('connect', (_inst, connector) => this.outputs[0].ref.connect(connector.end.ref));\n    this.outputs[0].on('disconnect', (_inst, _connector, _start, end) => this.outputs[0].ref.disconnect(end.ref));\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector2 } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { InputType, Input } from \"../../ui/input\";\nimport { clamp } from \"../../utils/utils\";\nimport { Node } from '../../core/node';\nimport { Slider } from \"../../ui/slider\";\nimport { Toggle } from \"../../ui/toggle\";\nimport { Select } from \"../../ui/select\";\nlet Tuna = require('../../lib/tuna.js');\n\nexport class OverdriveEffect extends Node {\n  driveSlider: Slider;\n  driveInput: Input;\n  outGainSlider: Slider;\n  outGainInput: Input;\n  curveAmountSlider: Slider;\n  curveAmountInput: Input;\n  algorithmSelect: Select;\n  bypassToggle: Toggle;\n  overdrive: any;\n\n  static DefaultProps = { drive: 0.197, outGain: -9.154, curveAmount: 0.979, algorithm: 1, bypass: false };\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(\n      flow, options.name || 'Overdrive Effect',\n      options.position || new Vector2(50, 50),\n      options.width || 230,\n      [{ name: 'in', dataType: 'audio' }],\n      [{ name: 'out', dataType: 'audio' }],\n      {\n        style: options.style || { rowHeight: 10, spacing: 10 },\n        terminalStyle: options.terminalStyle || {},\n        props: options.props ? { ...OverdriveEffect.DefaultProps, ...options.props } : OverdriveEffect.DefaultProps\n      }\n    )\n\n    if (!(window as any).__tuna__) (window as any).__tuna__ = new Tuna(flow.flowConnect.audioContext);\n\n    this.overdrive = new (window as any).__tuna__.Overdrive();\n    this.inputs[0].ref = this.outputs[0].ref = this.overdrive;\n    this.setupUI();\n    Object.assign(this.overdrive, {\n      drive: this.props.drive,\n      outputGain: this.props.outGain,\n      curveAmount: this.props.curveAmount,\n      algorithmIndex: parseInt(this.props.algorithm) - 1\n    });\n\n    this.watch('drive', (_oldVal, newVal) => {\n      if (newVal < 0 || newVal > 1) this.props.drive = clamp(newVal, 0, 1);\n      this.overdrive.drive = this.props.drive;\n    });\n    this.watch('outGain', (_oldVal, newVal) => {\n      if (newVal < -46 || newVal > 0) this.props.outGain = clamp(newVal, -46, 0);\n      this.overdrive.outputGain = this.props.outGain;\n    });\n    this.watch('curveAmount', (_oldVal, newVal) => {\n      if (newVal < 0 || newVal > 1) this.props.curveAmount = clamp(newVal, 0, 1);\n      this.overdrive.curveAmount = this.props.curveAmount;\n    });\n    this.watch('algorithm', (_oldVal, newVal) => {\n      newVal = parseInt(newVal);\n      if (!newVal) newVal = 1;\n      if (newVal < 1 || newVal > 6) newVal = clamp(newVal, 1, 6);\n      this.overdrive.algorithmIndex = newVal - 1;\n    });\n    this.watch('bypass', (_oldVal, newVal) => this.overdrive.bypass = newVal);\n\n    this.handleAudioConnections();\n  }\n\n  setupUI() {\n    this.driveSlider = this.createSlider(0, 1, { height: 10, propName: 'drive', style: { grow: .5 } });\n    this.driveInput = this.createInput({ propName: 'drive', height: 20, style: { type: InputType.Number, grow: .2, precision: 4 } });\n    this.outGainSlider = this.createSlider(-46, 0, { height: 10, propName: 'outGain', style: { grow: .5 } });\n    this.outGainInput = this.createInput({ propName: 'outGain', height: 20, style: { type: InputType.Number, grow: .2, precision: 2 } });\n    this.curveAmountSlider = this.createSlider(0, 0.95, { height: 10, propName: 'curveAmount', style: { grow: .5 } });\n    this.curveAmountInput = this.createInput({ propName: 'curveAmount', height: 20, style: { type: InputType.Number, grow: .2, precision: 2 } });\n    this.algorithmSelect = this.createSelect(['1', '2', '3', '4', '5', '6'], { propName: 'algorithm', height: 20, style: { grow: .7 } })\n    this.bypassToggle = this.createToggle({ propName: 'bypass', style: { grow: .1 } });\n    this.ui.append([\n      this.createHozLayout([this.createLabel('Drive', { style: { grow: .3 } }), this.driveSlider, this.driveInput], { style: { spacing: 5 } }),\n      this.createHozLayout([this.createLabel('Output Gain', { style: { grow: .3 } }), this.outGainSlider, this.outGainInput], { style: { spacing: 5 } }),\n      this.createHozLayout([this.createLabel('Curve Amount', { style: { grow: .3 } }), this.curveAmountSlider, this.curveAmountInput], { style: { spacing: 5 } }),\n      this.createHozLayout([this.createLabel('Algorithm', { style: { grow: .3 } }), this.algorithmSelect], { style: { spacing: 5 } }),\n      this.createHozLayout([this.createLabel('Bypass ?', { style: { grow: .3 } }), this.bypassToggle], { style: { spacing: 5 } })\n    ]);\n  }\n  handleAudioConnections() {\n    this.outputs[0].on('connect', (_inst, connector) => this.outputs[0].ref.connect(connector.end.ref));\n    this.outputs[0].on('disconnect', (_inst, _connector, _start, end) => this.outputs[0].ref.disconnect(end.ref));\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector2 } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { InputType, Input } from \"../../ui/input\";\nimport { clamp } from \"../../utils/utils\";\nimport { Node } from '../../core/node';\nimport { Slider } from \"../../ui/slider\";\nimport { Toggle } from \"../../ui/toggle\";\nlet Tuna = require('../../lib/tuna.js');\n\nexport class PingPongEffect extends Node {\n  delayLeftSlider: Slider;\n  delayLeftInput: Input;\n  delayRightSlider: Slider;\n  delayRightInput: Input;\n  feedbackSlider: Slider;\n  feedbackInput: Input;\n  wetSlider: Slider;\n  wetInput: Input;\n  bypassToggle: Toggle;\n  pingPong: any;\n\n  static DefaultProps = { delayLeft: 200, delayRight: 400, feedback: 0.3, wet: 0.5, bypass: false };\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(\n      flow, options.name || 'PingPong Effect',\n      options.position || new Vector2(50, 50),\n      options.width || 230,\n      [{ name: 'in', dataType: 'audio' }], [{ name: 'out', dataType: 'audio' }],\n      {\n        style: options.style || { rowHeight: 10, spacing: 10 },\n        terminalStyle: options.terminalStyle || {},\n        props: options.props ? { ...PingPongEffect.DefaultProps, ...options.props } : PingPongEffect.DefaultProps\n      }\n    )\n\n    if (!(window as any).__tuna__) (window as any).__tuna__ = new Tuna(flow.flowConnect.audioContext);\n\n    this.pingPong = new (window as any).__tuna__.PingPongDelay();\n    this.inputs[0].ref = this.outputs[0].ref = this.pingPong;\n\n    Object.assign(this.pingPong, {\n      delayTimeLeft: this.props.delayLeft,\n      delayTimeRight: this.props.delayRight,\n      feedback: this.props.feedback,\n      wetLevel: this.props.wet\n    });\n\n    this.setupUI();\n\n    this.watch('delayLeft', (_oldVal, newVal) => {\n      if (newVal < 1 || newVal > 10000) this.props.delayLeft = clamp(newVal, 1, 10000);\n      this.pingPong.delayTimeLeft = this.props.delayLeft;\n    });\n    this.watch('delayRight', (_oldVal, newVal) => {\n      if (newVal < 1 || newVal > 10000) this.props.delayRight = clamp(newVal, 1, 10000);\n      this.pingPong.delayTimeRight = this.props.delayRight;\n    });\n    this.watch('feedback', (_oldVal, newVal) => {\n      if (newVal < 0 || newVal > 1) this.props.feedback = clamp(newVal, 0, 1);\n      this.pingPong.feedback = this.props.feedback;\n    });\n    this.watch('wet', (_oldVal, newVal) => {\n      if (newVal < 0 || newVal > 1) this.props.wet = clamp(newVal, 0, 1);\n      this.pingPong.wetLevel = this.props.wet;\n    });\n    this.watch('bypass', (_oldVal, newVal) => this.pingPong.bypass = newVal);\n\n    this.handleAudioConnections();\n  }\n\n  setupUI() {\n    this.delayLeftSlider = this.createSlider(1, 10000, { height: 10, propName: 'delayLeft', style: { grow: .5 } });\n    this.delayLeftInput = this.createInput({ propName: 'delayLeft', height: 20, style: { type: InputType.Number, grow: .2, precision: 4 } });\n    this.delayRightSlider = this.createSlider(1, 10000, { height: 10, propName: 'delayRight', style: { grow: .5 } });\n    this.delayRightInput = this.createInput({ propName: 'delayRight', height: 20, style: { type: InputType.Number, grow: .2, precision: 2 } });\n    this.feedbackSlider = this.createSlider(0, 1, { height: 10, propName: 'feedback', style: { grow: .5 } });\n    this.feedbackInput = this.createInput({ propName: 'feedback', height: 20, style: { type: InputType.Number, grow: .2, precision: 2 } });\n    this.wetSlider = this.createSlider(0, 1, { height: 10, propName: 'wet', style: { grow: .5 } });\n    this.wetInput = this.createInput({ propName: 'wet', height: 20, style: { type: InputType.Number, grow: .2, precision: 2 } });\n    this.bypassToggle = this.createToggle({ propName: 'bypass', style: { grow: .1 } });\n    this.ui.append([\n      this.createHozLayout([this.createLabel('Delay L', { style: { grow: .3 } }), this.delayLeftSlider, this.delayLeftInput], { style: { spacing: 5 } }),\n      this.createHozLayout([this.createLabel('Delay R', { style: { grow: .3 } }), this.delayRightSlider, this.delayRightInput], { style: { spacing: 5 } }),\n      this.createHozLayout([this.createLabel('Feedback', { style: { grow: .3 } }), this.feedbackSlider, this.feedbackInput], { style: { spacing: 5 } }),\n      this.createHozLayout([this.createLabel('Wet', { style: { grow: .3 } }), this.wetSlider, this.wetInput], { style: { spacing: 5 } }),\n      this.createHozLayout([this.createLabel('Bypass ?', { style: { grow: .3 } }), this.bypassToggle], { style: { spacing: 5 } })\n    ]);\n  }\n  handleAudioConnections() {\n    this.outputs[0].on('connect', (_inst, connector) => this.outputs[0].ref.connect(connector.end.ref));\n    this.outputs[0].on('disconnect', (_inst, _connector, _start, end) => this.outputs[0].ref.disconnect(end.ref));\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector2 } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { FlowConnectState } from \"../../flow-connect\";\nimport { Log } from \"../../utils/logger\";\nimport { Node } from '../../core/node';\nimport * as sourceui from '../../ui/source';\nimport { Toggle } from \"../../ui/toggle\";\n\nexport class Source extends Node {\n  fileInput: sourceui.Source;\n  loopToggle: Toggle;\n  source: AudioBufferSourceNode;\n\n  volumeGainNode: GainNode;\n  proxyParamSourceNode: AudioWorkletNode;\n\n  static DefaultProps: any = { buffer: null, loop: true, prevChannelCount: -1 };\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'Audio Source', options.position || new Vector2(50, 50), options.width || 200,\n      [\n        { name: 'array-buffer', dataType: 'event' }, { name: 'gain', dataType: 'audioparam' },\n        { name: 'detune', dataType: 'audioparam' }, { name: 'playback-rate', dataType: 'audioparam' }\n      ],\n      [{ name: 'out', dataType: 'audio' }, { name: 'ended', dataType: 'event' }],\n      {\n        props: options.props ? { ...Source.DefaultProps, ...options.props } : Source.DefaultProps,\n        style: options.style || { rowHeight: 10, spacing: 15 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.volumeGainNode = flow.flowConnect.audioContext.createGain();\n    this.proxyParamSourceNode = new AudioWorkletNode(\n      flow.flowConnect.audioContext,\n      'proxy-param-for-source',\n      { numberOfOutputs: 2, parameterData: { detune: 0, playbackRate: 1 } }\n    );\n\n    this.inputs[1].ref = this.volumeGainNode.gain;\n    this.inputs[2].ref = (this.proxyParamSourceNode.parameters as Map<string, AudioParam>).get('detune');\n    this.inputs[3].ref = (this.proxyParamSourceNode.parameters as Map<string, AudioParam>).get('playbackRate');\n    this.inputs[1].on('data', (_, data) => typeof data === 'number' && (this.inputs[1].ref.value = data));\n    this.inputs[2].on('data', (_, data) => typeof data === 'number' && (this.inputs[2].ref.value = data));\n    this.inputs[3].on('data', (_, data) => typeof data === 'number' && (this.inputs[3].ref.value = data));\n    this.outputs[0].ref = this.volumeGainNode;\n\n    this.setupUI();\n\n    this.loopToggle.on('change', () => {\n      if (this.props.loop) {\n        this.stopSource();\n        this.playSource();\n      } else this.source && (this.source.loop = this.props.loop);\n    });\n    this.inputs[0].on('event', (_, data) => {\n      if (!(data instanceof ArrayBuffer)) {\n        Log.error('Data received on Audio Source Node is not of type ArrayBuffer');\n        return;\n      }\n      this.processArrayBuffer(data);\n    });\n    this.fileInput.on('change', (_inst, _oldVal: File, newVal: File) => this.processFile(newVal));\n    this.fileInput.on('upload', (_inst, _oldVal: File, newVal: File) => this.processFile(newVal));\n\n    flow.flowConnect.on('start', () => this.playSource());\n    flow.flowConnect.on('stop', () => this.stopSource());\n\n    this.handleAudioConnections();\n  }\n\n  propagateChannelChange(newNoOfChannels: number) {\n    this.flow.executionGraph.propagate(this, (currNode: Node) => {\n      currNode.call('channel-count-change', newNoOfChannels);\n    });\n  }\n  async processFile(file: File) {\n    let cached = this.flow.flowConnect.arrayBufferCache.get(file.name + file.type);\n    if (!cached) {\n      cached = await file.arrayBuffer();\n      this.flow.flowConnect.arrayBufferCache.set(file.name + file.type, cached);\n    }\n    this.processArrayBuffer(cached);\n  }\n  async processArrayBuffer(arrayBuffer: ArrayBuffer) {\n    let cached = this.flow.flowConnect.audioBufferCache.get(arrayBuffer);\n    if (!cached) {\n      cached = await this.flow.flowConnect.audioContext.decodeAudioData(arrayBuffer);\n      this.flow.flowConnect.audioBufferCache.set(arrayBuffer, cached);\n\n      // If no. of channels has been changed, start an event propagation that will notify\n      // every node that has a direct/indirect connection in the graph from this node\n      if (this.props.prevChannelCount < 0 || this.props.prevChannelCount !== cached.numberOfChannels) {\n        this.propagateChannelChange(cached.numberOfChannels);\n      }\n      this.props.prevChannelCount = cached.numberOfChannels;\n    }\n    this.props.buffer = cached;\n\n    this.stopSource();\n    this.playSource();\n  }\n  playSource() {\n    if (this.flow.flowConnect.state === FlowConnectState.Stopped || !this.props.buffer) return;\n\n    let audioSource = new AudioBufferSourceNode(this.flow.flowConnect.audioContext);\n    audioSource.buffer = this.props.buffer;\n    audioSource.loop = this.props.loop;\n    this.source = audioSource;\n\n    this.proxyParamSourceNode.connect(audioSource.detune, 0);\n    this.proxyParamSourceNode.connect(audioSource.playbackRate, 1);\n    audioSource.connect(this.outputs[0].ref);\n    audioSource.start();\n  }\n  stopSource() {\n    if (this.source) {\n      this.source.stop();\n      this.source = null;\n    }\n  }\n  setupUI() {\n    this.fileInput = this.createSource({ input: true, output: true, height: 25, style: { grow: .7 } });\n    this.loopToggle = this.createToggle({ propName: 'loop', input: true, output: true, height: 10, style: { grow: .2 } });\n\n    this.ui.append([\n      this.createHozLayout([this.createLabel('File', { style: { grow: .3 } }), this.fileInput], { style: { spacing: 5 } }),\n      this.createHozLayout([this.createLabel('Loop ?'), this.loopToggle], { style: { spacing: 5 } })\n    ]);\n  }\n  handleAudioConnections() {\n    // Handle actual webaudio node stuff\n    this.outputs[0].on('connect', (_, connector) => {\n      this.props.buffer && this.propagateChannelChange(this.props.buffer.numberOfChannels);\n      this.outputs[0].ref.connect(connector.end.ref);\n    });\n    this.outputs[0].on('disconnect', (_inst, _connector, _start, end) => {\n      this.outputs[0].ref.disconnect(end.ref);\n    });\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector2 } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { clamp, denormalize, normalize } from \"../../utils/utils\";\nimport { Node } from '../../core/node';\nimport { Slider } from \"../../ui/slider\";\nimport { CanvasType, Display } from \"../../ui/display\";\nimport { Label } from \"../../ui/label\";\nimport { Align } from \"../../common/enums\";\nimport { Select } from \"../../ui/select\";\nimport { Color } from \"../../core/color\";\n\nexport class SpectrogramAnalyser extends Node {\n  colorScaleSelect: Select;\n  fftSizeSlider: Slider;\n  fftSizeLabel: Label;\n  display: Display;\n\n  analyser: AnalyserNode;\n\n  static DefaultProps = { fftSize: 11, colorScale: 'Heated Metal' };\n\n  colorScales = ['Heated Metal', 'Monochrome', 'Inverted Monochrome', 'Spectrum'];\n  fftSizes = [32, 64, 128, 256, 512, 1024, 2048, 4096, 8192, 16384, 32768];\n  timerId: number;\n\n  colorScaleToInterp: { [scale: string]: Function } = {\n    'Heated Metal': Function,\n    'Monochrome': Function,\n    'Inverted Monochrome': Function,\n    'Spectrum': Function\n  }\n  currInterpolator: Function;\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(\n      flow, options.name || 'Spectrogram Analyser',\n      options.position || new Vector2(50, 50),\n      options.width || 350,\n      [{ name: 'in', dataType: 'audio' }], [{ name: 'out', dataType: 'audio' }],\n      {\n        style: options.style || { rowHeight: 10, spacing: 10 },\n        terminalStyle: options.terminalStyle || {},\n        props: options.props ? { ...SpectrogramAnalyser.DefaultProps, ...options.props } : SpectrogramAnalyser.DefaultProps\n      }\n    )\n\n    this.analyser = flow.flowConnect.audioContext.createAnalyser();\n    this.analyser.fftSize = this.getFFTSize();\n    this.inputs[0].ref = this.outputs[0].ref = this.analyser;\n\n    this.setupUI();\n\n    this.watch('fftSize', (_oldVal, newVal) => {\n      if (newVal < 5 || newVal > 15) this.props.fftSize = clamp(Math.round(newVal), 5, 15);\n      let actualFFTSize = this.getFFTSize();\n      this.fftSizeLabel.text = actualFFTSize;\n      this.analyser.fftSize = actualFFTSize;\n    });\n    this.watch('colorScale', (_oldVal, newVal) => {\n      if (!this.colorScales.includes(newVal)) this.props.colorScale = this.colorScales[0];\n      this.currInterpolator = this.colorScaleToInterp[this.props.colorScale];\n    });\n\n    this.handleAudioConnections();\n\n    this.colorScaleToInterp['Heated Metal'] = Color.scale([\n      [0, 0, 0, 1], [160, 32, 240, 1], [255, 0, 0, 1], [255, 165, 0, 1], [255, 255, 0, 1], [255, 255, 255, 1]\n    ]);\n    this.colorScaleToInterp['Monochrome'] = Color.scale([\n      [0, 0, 0, 1], [255, 255, 255, 1]\n    ]);\n    this.colorScaleToInterp['Inverted Monochrome'] = Color.scale([\n      [255, 255, 255, 1], [0, 0, 0, 1]\n    ]);\n    this.colorScaleToInterp['Spectrum'] = Color.scale([\n      [135, 206, 235, 1], [0, 255, 0, 1], [255, 255, 0, 1], [255, 165, 0, 1], [255, 0, 0, 1]\n    ]);\n\n    this.currInterpolator = this.colorScaleToInterp['Heated Metal'];\n\n    this.display.offCanvasConfigs[0].shouldRender = false;\n    this.flow.flowConnect.on('start', () => {\n      this.display.offCanvasConfigs[0].shouldRender = true;\n    });\n    this.flow.flowConnect.on('stop', () => {\n      this.display.offCanvasConfigs[0].shouldRender = false;\n    });\n  }\n\n  getFFTSize() {\n    return this.fftSizes[clamp(Math.round(this.props.fftSize), 5, 15) - 5];\n  }\n\n  setupUI() {\n    this.fftSizeSlider = this.createSlider(5, 15, { height: 10, propName: 'fftSize', style: { grow: .6, precision: 0 } });\n    this.fftSizeLabel = this.createLabel(this.getFFTSize(), { height: 20, style: { grow: .2, align: Align.Right } });\n    this.display = this.createDisplay(200, [{\n      auto: true,\n      canvasType: CanvasType.HTMLCanvasElement,\n      renderer: (context, width, height) => this.customRenderer(context, width, height)\n    }]);\n    this.colorScaleSelect = this.createSelect(this.colorScales, { propName: 'colorScale', height: 15, style: { grow: .6 } });\n\n    this.ui.append([\n      this.display,\n      this.createHozLayout([\n        this.createLabel('FFT Size', { style: { grow: .2 } }), this.fftSizeSlider, this.fftSizeLabel\n      ], { style: { spacing: 5 } }),\n      this.createHozLayout([this.createLabel('Color Scale', { style: { grow: .2 } }), this.colorScaleSelect], { style: { spacing: 5 } })\n    ]);\n  }\n\n  customRenderer(context: OffscreenCanvasRenderingContext2D | CanvasRenderingContext2D, width: number, height: number): boolean {\n    let value,\n      i = 0,\n      frequencyBinCount = this.analyser.frequencyBinCount,\n      frequencyData = new Uint8Array(frequencyBinCount),\n      barHeight = height / frequencyBinCount;\n\n    this.analyser.getByteFrequencyData(frequencyData);\n\n    for (; i < frequencyBinCount; i++) {\n      value = frequencyData[i];\n      context.fillStyle = this.currInterpolator(value / 256);\n      context.fillRect(width - 1, denormalize(1 - normalize(i, 0, frequencyBinCount), 0, height), 1, barHeight);\n    }\n\n    context.globalCompositeOperation = \"copy\";\n    context.drawImage(context.canvas, -1, 0);\n    context.globalCompositeOperation = \"source-over\";\n\n    return true;\n  }\n\n  handleAudioConnections() {\n    this.outputs[0].on('connect', (_inst, connector) => this.outputs[0].ref.connect(connector.end.ref));\n    this.outputs[0].on('disconnect', (_inst, _connector, _start, end) => this.outputs[0].ref.disconnect(end.ref));\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector2 } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { InputType, Input } from \"../../ui/input\";\nimport { clamp } from \"../../utils/utils\";\nimport { Node } from '../../core/node';\nimport { Slider } from \"../../ui/slider\";\nimport { Toggle } from \"../../ui/toggle\";\n\nexport class StereoPanner extends Node {\n  panSlider: Slider;\n  panInput: Input;\n  bypassToggle: Toggle;\n  panner: StereoPannerNode;\n  inGain: GainNode;\n  outGain: GainNode;\n\n  static DefaultProps = { pan: 0, bypass: false };\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(\n      flow, options.name || 'Stereo Panner',\n      options.position || new Vector2(50, 50),\n      options.width || 200,\n      [{ name: 'in', dataType: 'audio' }],\n      [{ name: 'out', dataType: 'audio' }],\n      {\n        style: options.style || { rowHeight: 10, spacing: 10 },\n        terminalStyle: options.terminalStyle || {},\n        props: options.props ? { ...StereoPanner.DefaultProps, ...options.props } : StereoPanner.DefaultProps\n      }\n    )\n\n    this.inGain = flow.flowConnect.audioContext.createGain();\n    this.outGain = flow.flowConnect.audioContext.createGain();\n    this.panner = new StereoPannerNode(flow.flowConnect.audioContext);\n    this.panner.pan.value = this.props.pan;\n    this.inputs[0].ref = this.inGain;\n    this.outputs[0].ref = this.outGain;\n\n    this.setBypass();\n\n    this.setupUI();\n\n    this.watch('pan', (_oldVal, newVal) => {\n      if (newVal < -1 || newVal > 1) this.props.pan = clamp(newVal, -1, 1);\n      this.panner.pan.value = this.props.pan;\n    });\n    this.watch('bypass', this.setBypass.bind(this));\n\n    this.handleAudioConnections();\n  }\n\n  setBypass() {\n    if (!this.props.bypass) {\n      this.inGain.disconnect();\n      this.inGain.connect(this.panner);\n      this.panner.connect(this.outGain);\n    } else {\n      this.panner.disconnect();\n      this.inGain.disconnect();\n      this.inGain.connect(this.outGain);\n    }\n  }\n\n  setupUI() {\n    this.panSlider = this.createSlider(-1, 1, { height: 10, propName: 'pan', style: { grow: .5 } });\n    this.panInput = this.createInput({ propName: 'pan', height: 20, style: { type: InputType.Number, grow: .2, precision: 2 } });\n    this.bypassToggle = this.createToggle({ propName: 'bypass', style: { grow: .15 } });\n    this.ui.append([\n      this.createHozLayout([this.createLabel('Pan', { style: { grow: .3 } }), this.panSlider, this.panInput], { style: { spacing: 5 } }),\n      this.createHozLayout([this.createLabel('Bypass ?', { style: { grow: .3 } }), this.bypassToggle], { style: { spacing: 5 } })\n    ]);\n  }\n  handleAudioConnections() {\n    this.outputs[0].on('connect', (_inst, connector) => this.outputs[0].ref.connect(connector.end.ref));\n    this.outputs[0].on('disconnect', (_inst, _connector, _start, end) => this.outputs[0].ref.disconnect(end.ref));\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector2 } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { InputType, Input } from \"../../ui/input\";\nimport { clamp } from \"../../utils/utils\";\nimport { Node } from '../../core/node';\nimport { Slider } from \"../../ui/slider\";\nimport { Toggle } from \"../../ui/toggle\";\nlet Tuna = require('../../lib/tuna.js');\n\nexport class TremoloEffect extends Node {\n  intensitySlider: Slider;\n  intensityInput: Input;\n  stereoPhaseSlider: Slider;\n  stereoPhaseInput: Input;\n  rateSlider: Slider;\n  rateInput: Input;\n  bypassToggle: Toggle;\n  tremolo: any;\n\n  static DefaultProps = { intensity: 0.3, stereoPhase: 0, rate: 5, bypass: false };\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(\n      flow, options.name || 'Tremolo Effect',\n      options.position || new Vector2(50, 50),\n      options.width || 230,\n      [{ name: 'in', dataType: 'audio' }],\n      [{ name: 'out', dataType: 'audio' }],\n      {\n        style: options.style || { rowHeight: 10, spacing: 10 },\n        terminalStyle: options.terminalStyle || {},\n        props: options.props ? { ...TremoloEffect.DefaultProps, ...options.props } : TremoloEffect.DefaultProps\n      }\n    )\n\n    if (!(window as any).__tuna__) (window as any).__tuna__ = new Tuna(flow.flowConnect.audioContext);\n\n    this.tremolo = new (window as any).__tuna__.Tremolo();\n    this.inputs[0].ref = this.outputs[0].ref = this.tremolo;\n\n    Object.assign(this.tremolo, {\n      intensity: this.props.intensity,\n      stereoPhase: this.props.stereoPhase,\n      rate: this.props.rate,\n    });\n\n    this.setupUI();\n\n    this.watch('intensity', (_oldVal, newVal) => {\n      if (newVal < 0 || newVal > 1) this.props.intensity = clamp(newVal, 0, 1);\n      this.tremolo.intensity = this.props.intensity;\n    });\n    this.watch('stereoPhase', (_oldVal, newVal) => {\n      if (newVal < 0 || newVal > 180) this.props.stereoPhase = clamp(newVal, 0, 180);\n      this.tremolo.stereoPhase = this.props.stereoPhase;\n    });\n    this.watch('rate', (_oldVal, newVal) => {\n      if (newVal < 0.1 || newVal > 11) this.props.rate = clamp(newVal, 0.1, 11);\n      this.tremolo.rate = this.props.rate;\n    });\n    this.watch('bypass', (_oldVal, newVal) => this.tremolo.bypass = newVal);\n\n    this.handleAudioConnections();\n  }\n\n  setupUI() {\n    this.intensitySlider = this.createSlider(0, 1, { height: 10, propName: 'intensity', style: { grow: .5 } });\n    this.intensityInput = this.createInput({ propName: 'intensity', height: 20, style: { type: InputType.Number, grow: .2, precision: 4 } });\n    this.stereoPhaseSlider = this.createSlider(0, 180, { height: 10, propName: 'stereoPhase', style: { grow: .5 } });\n    this.stereoPhaseInput = this.createInput({ propName: 'stereoPhase', height: 20, style: { type: InputType.Number, grow: .2, precision: 2 } });\n    this.rateSlider = this.createSlider(0.1, 11, { height: 10, propName: 'rate', style: { grow: .5 } });\n    this.rateInput = this.createInput({ propName: 'rate', height: 20, style: { type: InputType.Number, grow: .2, precision: 2 } });\n    this.bypassToggle = this.createToggle({ propName: 'bypass', style: { grow: .1 } });\n    this.ui.append([\n      this.createHozLayout([this.createLabel('Intensity', { style: { grow: .3 } }), this.intensitySlider, this.intensityInput], { style: { spacing: 5 } }),\n      this.createHozLayout([this.createLabel('Stereo Phase', { style: { grow: .3 } }), this.stereoPhaseSlider, this.stereoPhaseInput], { style: { spacing: 5 } }),\n      this.createHozLayout([this.createLabel('Rate', { style: { grow: .3 } }), this.rateSlider, this.rateInput], { style: { spacing: 5 } }),\n      this.createHozLayout([this.createLabel('Bypass ?', { style: { grow: .3 } }), this.bypassToggle], { style: { spacing: 5 } })\n    ]);\n  }\n  handleAudioConnections() {\n    this.outputs[0].on('connect', (_inst, connector) => this.outputs[0].ref.connect(connector.end.ref));\n    this.outputs[0].on('disconnect', (_inst, _connector, _start, end) => this.outputs[0].ref.disconnect(end.ref));\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector2 } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { clamp } from \"../../utils/utils\";\nimport { Node } from '../../core/node';\nimport { Slider } from \"../../ui/slider\";\nimport { Display } from \"../../ui/display\";\nimport { Label } from \"../../ui/label\";\nimport { Align } from \"../../common/enums\";\n\nexport class WaveformAnalyser extends Node {\n  fftSizeSlider: Slider;\n  fftSizeLabel: Label;\n  display: Display;\n\n  analyser: AnalyserNode;\n\n  static DefaultProps = { fftSize: 11 };\n\n  fftSizes = [32, 64, 128, 256, 512, 1024, 2048, 4096, 8192, 16384, 32768];\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(\n      flow, options.name || 'Waveform Analyser',\n      options.position || new Vector2(50, 50),\n      options.width || 350,\n      [{ name: 'in', dataType: 'audio' }], [{ name: 'out', dataType: 'audio' }],\n      {\n        style: options.style || { rowHeight: 10, spacing: 10 },\n        terminalStyle: options.terminalStyle || {},\n        props: options.props ? { ...WaveformAnalyser.DefaultProps, ...options.props } : WaveformAnalyser.DefaultProps\n      }\n    )\n\n    this.analyser = flow.flowConnect.audioContext.createAnalyser();\n    this.analyser.fftSize = this.getFFTSize();\n    this.inputs[0].ref = this.outputs[0].ref = this.analyser;\n\n    this.setupUI();\n\n    this.watch('fftSize', (_oldVal, newVal) => {\n      if (newVal < 5 || newVal > 15) this.props.fftSize = clamp(Math.round(newVal), 5, 15);\n      let actualFFTSize = this.getFFTSize();\n      this.fftSizeLabel.text = actualFFTSize;\n      this.analyser.fftSize = actualFFTSize;\n    });\n\n    this.handleAudioConnections();\n  }\n\n  getFFTSize() {\n    return this.fftSizes[clamp(Math.round(this.props.fftSize), 5, 15) - 5];\n  }\n\n  setupUI() {\n    this.fftSizeSlider = this.createSlider(5, 15, { height: 10, propName: 'fftSize', style: { grow: .6, precision: 0 } });\n    this.fftSizeLabel = this.createLabel(this.getFFTSize(), { height: 20, style: { grow: .2, align: Align.Right } });\n    this.display = this.createDisplay(200, [{\n      auto: true,\n      renderer: (...args) => this.customRenderer(args[0], args[1], args[2])\n    }]);\n\n    this.ui.append([\n      this.display,\n      this.createHozLayout([\n        this.createLabel('FFT Size', { style: { grow: .2 } }), this.fftSizeSlider, this.fftSizeLabel\n      ], { style: { spacing: 5 } })\n    ]);\n  }\n\n  customRenderer(context: OffscreenCanvasRenderingContext2D | CanvasRenderingContext2D, width: number, height: number): boolean {\n    let value, percent, offset, barWidth,\n      frequencyBinCount = this.analyser.frequencyBinCount,\n      waveformData = new Uint8Array(frequencyBinCount),\n      orgHeight = height,\n      i = 1;\n\n    this.analyser.getByteTimeDomainData(waveformData);\n\n    value = waveformData[0];\n    percent = value / 256;\n    height = orgHeight * percent;\n    offset = orgHeight - height - 1;\n    barWidth = width / frequencyBinCount;\n\n    context.strokeStyle = \"#000\";\n    context.beginPath();\n    context.moveTo(0, offset);\n    for (; i < frequencyBinCount; i++) {\n      value = waveformData[i];\n      percent = value / 256;\n      height = orgHeight * percent;\n      offset = orgHeight - height - 1;\n      barWidth = width / frequencyBinCount;\n      context.lineTo(i * barWidth, offset);\n    }\n    context.stroke();\n\n    return true;\n  }\n\n  handleAudioConnections() {\n    this.outputs[0].on('connect', (_inst, connector) => this.outputs[0].ref.connect(connector.end.ref));\n    this.outputs[0].on('disconnect', (_inst, _connector, _start, end) => this.outputs[0].ref.disconnect(end.ref));\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector2 } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { Node } from \"../../core/node\";\n\nexport class ArrayIndex extends Node {\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'Array Index', options.position || new Vector2(50, 50), options.width || 120,\n      [{ name: 'data', dataType: 'array' }, { name: 'index', dataType: 'number' }],\n      [{ name: 'value', dataType: 'any' }],\n      {\n        props: options.props ? { ...options.props } : {},\n        style: options.style || { rowHeight: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.on('process', (_, inputs) => {\n      if (!inputs || !inputs[0] || typeof inputs[1] !== 'number') return;\n      this.setOutputs(0, inputs[0][inputs[1]]);\n    });\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector2 } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { InputType, Input } from \"../../ui/input\";\nimport { Align } from \"../../common/enums\";\nimport { Node } from \"../../core/node\";\nimport { Toggle } from \"../../ui/toggle\";\nimport { HorizontalLayout } from \"../../ui/horizontal-layout\";\nimport { Stack } from \"../../ui/stack\";\n\nexport class ArraySource extends Node {\n  arrayInput: Input;\n  minInput: Input;\n  maxInput: Input;\n  numberToggle: Toggle;\n  rangeToggle: Toggle;\n  stepInput: Input;\n  rangeLayout: HorizontalLayout;\n  rangeStack: Stack\n\n  static DefaultProps: any = { number: true, range: false, min: 0, max: 100, step: 0.1, value: [] };\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'Array Source', options.position || new Vector2(50, 50), options.width || 180, [],\n      [{ name: 'array', dataType: 'array' }],\n      {\n        props: options.props ? { ...ArraySource.DefaultProps, ...options.props } : ArraySource.DefaultProps,\n        style: options.style || { rowHeight: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n\n    this.setupUI();\n\n    this.minInput.on('change', () => this.process());\n    this.maxInput.on('change', () => this.process());\n    this.numberToggle.on('change', () => this.process());\n    this.arrayInput.on('change', () => this.process());\n    this.stepInput.on('change', () => this.process());\n    this.on('process', () => this.process());\n\n    this.watch('number', () => this.numberToggled());\n    this.watch('range', () => this.rangeToggled());\n\n    this.numberToggled();\n    this.rangeToggled();\n  }\n\n  numberToggled() {\n    this.rangeLayout.visible = this.props.number;\n    if (!this.props.number) this.props.range = false;\n  }\n  rangeToggled() {\n    if (this.props.number && this.props.range) {\n      this.arrayInput.visible = false;\n      this.rangeStack.visible = true;\n    } else {\n      this.arrayInput.visible = true;\n      this.rangeStack.visible = false;\n    }\n  }\n  process() {\n    if (this.props.range) {\n      let values = [];\n      for (let i = this.props.min; i <= this.props.max; i += this.props.step) values.push(i);\n      this.props.value = values;\n    } else {\n      if (!this.arrayInput.inputEl.validity.patternMismatch) {\n        if (!this.arrayInput.value || this.arrayInput.value === '') return;\n        let value: any[] = (this.arrayInput.value as string).split(',');\n        if (this.props.number) value = value.map(item => Number(item.trim()));\n        this.props.value = value;\n      }\n    }\n    this.setOutputs(0, this.props.value);\n  }\n  setupUI() {\n    this.numberToggle = this.createToggle({ propName: 'number', input: true, output: true, height: 10, style: { grow: .2 } });\n    this.rangeToggle = this.createToggle({ propName: 'range', input: true, output: true, height: 10, style: { grow: .2 } });\n    this.rangeLayout = this.createHozLayout([this.createLabel('Range ?'), this.rangeToggle], { style: { spacing: 10 } });\n    this.minInput = this.createInput({\n      propName: 'min', height: 20, style: { type: InputType.Number, grow: .4, step: 'any' }\n    });\n    this.maxInput = this.createInput({\n      propName: 'max', height: 20, style: { type: InputType.Number, grow: .4, step: 'any' }\n    });\n    let rangeInputLayout = this.createHozLayout([\n      this.minInput, this.createLabel('to', { style: { grow: .2, align: Align.Center } }), this.maxInput\n    ], { style: { spacing: 5 } });\n    this.stepInput = this.createInput({ propName: 'step', height: 20, style: { type: InputType.Number, step: 'any', grow: .6 } });\n    this.rangeStack = this.createStack({\n      childs: [\n        rangeInputLayout,\n        this.createHozLayout([\n          this.createLabel('Step', { style: { grow: .4 } }),\n          this.stepInput\n        ], { style: { spacing: 5 } })\n      ], style: { spacing: 10 }\n    });\n    this.arrayInput = this.createInput({ value: '', height: 20, style: { pattern: '^[^,]+(\\s*,\\s*[^,]+)*$' } });\n    this.ui.append([\n      this.createHozLayout([this.createLabel('Numbers ?'), this.numberToggle], { style: { spacing: 10 } }),\n      this.rangeLayout,\n      this.rangeStack,\n      this.arrayInput\n    ]);\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector2 } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { Node } from \"../../core/node\";\nimport { Toggle } from \"../../ui/toggle\";\n\nexport class BooleanSource extends Node {\n  toggle: Toggle;\n\n  static DefaultProps = { value: false };\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'Boolean Source', options.position || new Vector2(50, 50), options.width || 130, [],\n      [{ name: 'value', dataType: 'boolean' }],\n      {\n        props: options.props ? { ...BooleanSource.DefaultProps, ...options.props } : BooleanSource.DefaultProps,\n        style: options.style || { rowHeight: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.setupUI();\n\n    this.toggle.on('change', () => this.process());\n    this.on('process', () => this.process());\n  }\n\n\n  process() { this.setOutputs(0, this.props.value); }\n  setupUI() {\n    let toggle = this.createToggle({ propName: 'value', input: true, output: true, height: 10, style: { grow: .3 } });\n    this.ui.append(this.createHozLayout([\n      this.createLabel('Value'),\n      toggle\n    ], { style: { spacing: 20 } }));\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector2 } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { InputType, Input } from \"../../ui/input\";\nimport { Node } from \"../../core/node\";\n\nexport class Buffer extends Node {\n  sizeInput: Input;\n\n  static DefaultProps: any = { buffer: [], size: 10 };\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'Buffer', options.position || new Vector2(50, 50), options.width || 150,\n      [{ name: 'data', dataType: 'any' }],\n      [{ name: 'buffer', dataType: 'array' }],\n      {\n        props: options.props ? { ...Buffer.DefaultProps, ...options.props } : Buffer.DefaultProps,\n        style: options.style || { rowHeight: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.setupUI();\n\n    this.sizeInput.on('change', () => this.process(this.getInputs()));\n    this.on('process', (_, inputs) => this.process(inputs));\n  }\n\n  process(inputs: any[]) {\n    if (inputs[0] === null || typeof inputs[0] === 'undefined') return;\n    if (this.props.size <= 0) this.props.size = 1;\n    if (this.props.buffer.length === this.props.size) {\n      this.props.buffer.shift();\n    } else if (this.props.buffer.length > this.props.size) {\n      this.props.buffer.splice(0, this.props.buffer.length - this.props.size + 1);\n    }\n    this.props.buffer.push(inputs[0]);\n    this.setOutputs('buffer', this.props.buffer);\n  }\n  setupUI() {\n    this.sizeInput = this.createInput({ propName: 'size', input: true, output: true, height: 20, style: { type: InputType.Number, grow: .7 } });\n    this.ui.append(this.createHozLayout([\n      this.createLabel('Size', { style: { grow: .3 } }),\n      this.sizeInput\n    ], { style: { spacing: 20 } }));\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector2 } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { Node } from \"../../core/node\";\nimport { Select } from \"../../ui/select\";\n\nexport class Compare extends Node {\n  select: Select\n\n  static DefaultProps = { value: '==' };\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'Compare', options.position || new Vector2(50, 50), options.width || 150,\n      [{ name: 'x', dataType: 'any' }, { name: 'y', dataType: 'any' }],\n      [{ name: 'result', dataType: 'boolean' }],\n      {\n        props: options.props ? { ...Compare.DefaultProps, ...options.props } : Compare.DefaultProps,\n        style: options.style || { rowHeight: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.setupUI();\n\n    this.select.on('change', () => this.process(this.getInputs()));\n    this.on('process', (_, inputs) => this.process(inputs));\n  }\n\n  process(inputs: any[]) {\n    if (inputs[0] === null || typeof inputs[0] === 'undefined' || inputs[1] === null || typeof inputs[1] === 'undefined') return;\n    let res;\n    switch (this.props.value) {\n      case '==': { res = inputs[0] == inputs[1]; break; }\n      case '===': { res = inputs[0] === inputs[1]; break; }\n      case '!=': { res = inputs[0] != inputs[1]; break; }\n      case '!==': { res = inputs[0] !== inputs[1]; break; }\n      case '<': { res = inputs[0] < inputs[1]; break; }\n      case '<=': { res = inputs[0] <= inputs[1]; break; }\n      case '>': { res = inputs[0] > inputs[1]; break; }\n      case '>=': { res = inputs[0] >= inputs[1]; break; }\n      case '&&': { res = inputs[0] && inputs[1]; break; }\n      case '||': { res = inputs[0] || inputs[1]; break; }\n      default: res = false;\n    }\n    this.setOutputs(0, res);\n  }\n  setupUI() {\n    let select = this.createSelect(\n      ['==', '===', '!=', '!==', '<', '<=', '>', '>=', '&&', '||'],\n      { propName: 'value', input: true, output: true, height: 15, style: { fontSize: '14px' } }\n    );\n    this.ui.append(select);\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector2 } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { List, ListNode } from \"../../utils/linked-list\";\nimport { InputType } from \"../../ui/input\";\nimport { Node } from \"../../core/node\";\n\ninterface BufferedEvent {\n  data: any;\n  timeoutId: number,\n  start: number,\n  remaining?: number\n}\n\nexport class Delay extends Node {\n\n  static DefaultProps: any = { delay: 0, eventQueue: null };\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'Delay', options.position || new Vector2(50, 50), options.width || 130,\n      [{ name: 'event', dataType: 'event' }],\n      [{ name: 'trigger', dataType: 'event' }],\n      {\n        props: options.props ? { ...Delay.DefaultProps, ...options.props } : Delay.DefaultProps,\n        style: options.style || { rowHeight: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.setupUI();\n\n    this.props.eventQueue = new List<BufferedEvent>((a, b) => a.timeoutId - b.timeoutId);\n    this.props.eventQueue.on('removefirst', () => {\n      while (this.props.eventQueue.head && (performance.now() - this.props.eventQueue.head.data.start) >= this.props.delay) {\n        let bufferedEvent = this.props.eventQueue.removeFirst(false);\n        this.outputs[0].emit(bufferedEvent.data);\n      }\n    });\n    this.inputs[0].on('event', (_, data) => {\n      let eventNode = new ListNode<BufferedEvent>();\n      eventNode.data = {\n        data,\n        timeoutId: window.setTimeout(() => this.triggerEvent(eventNode), this.props.delay),\n        start: performance.now()\n      }\n      this.props.eventQueue.append(eventNode);\n    });\n    flow.on('start', () => {\n      this.props.eventQueue.forEach((eventNode: ListNode<BufferedEvent>) => {\n        eventNode.data.start = performance.now() + eventNode.data.remaining - this.props.delay;\n        eventNode.data.timeoutId = window.setTimeout(() => this.triggerEvent(eventNode), eventNode.data.remaining);\n      })\n    });\n    flow.on('stop', () => {\n      this.props.eventQueue.forEach((eventNode: ListNode<BufferedEvent>) => {\n        clearTimeout(eventNode.data.timeoutId);\n        eventNode.data.remaining = performance.now() - eventNode.data.start;\n      });\n    });\n  }\n\n  triggerEvent(eventNode: ListNode<BufferedEvent>) {\n    if (eventNode === this.props.eventQueue.head) {\n      let bufferedEvent = this.props.eventQueue.removeFirst();\n      this.outputs[0].emit(bufferedEvent.data);\n    }\n  }\n  setupUI() {\n    this.ui.append(this.createHozLayout([\n      this.createLabel('Delay', { style: { grow: .3 } }),\n      this.createInput({ propName: 'delay', input: true, output: true, height: 20, style: { type: InputType.Number, grow: .7 } })\n    ], { style: { spacing: 10 } }));\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector2 } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { Node } from \"../../core/node\";\nimport { Source } from \"../../ui/source\";\n\nexport class FileSource extends Node {\n  fileInput: Source\n\n  static DefaultProps: any = { file: null };\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'File Source', options.position || new Vector2(50, 50), options.width || 130, [],\n      [{ name: 'file', dataType: 'file' }],\n      {\n        props: options.props ? { ...FileSource.DefaultProps, ...options.props } : FileSource.DefaultProps,\n        style: options.style || { rowHeight: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.setupUI();\n\n    this.fileInput.on('change', () => this.process());\n    this.on('process', () => this.process());\n  }\n\n  process() { this.setOutputs(0, this.props.file); }\n  setupUI() {\n    this.fileInput = this.createSource({ propName: 'file', input: true, output: true, height: 20 });\n    this.ui.append(this.fileInput);\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector2 } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { GlobalEventType } from \"../../common/enums\";\nimport { InputType, Input } from \"../../ui/input\";\nimport { Node } from \"../../core/node\";\nimport { get, getNewUUID } from \"../../utils/utils\";\n\nexport class GlobalEvent extends Node {\n  eventInput: Input;\n\n  static DefaultProps = { prevEvent: '', eventId: -1 };\n\n  constructor(flow: Flow, type: GlobalEventType, name: string, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'Global Event', options.position || new Vector2(50, 50), options.width || 150,\n      type === GlobalEventType.Emitter ? [{ name: 'emit', dataType: 'event' }] : [],\n      type === GlobalEventType.Receiver ? [{ name: 'receive', dataType: 'event' }] : [],\n      {\n        props: options.props ? { ...GlobalEvent.DefaultProps, ...options.props } : GlobalEvent.DefaultProps,\n        style: options.style || { rowHeight: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.props.prevEvent = name;\n    this.props.name = get(name, getNewUUID());\n\n    this.setupUI();\n\n    if (type === GlobalEventType.Emitter) {\n      this.inputs[0].on('event', (_, data) => flow.globalEvents.call(this.props.name, data));\n    } else {\n      this.props.eventId = flow.globalEvents.on(this.props.name, data => this.outputs[0].emit(data));\n\n      this.on('change', (_, __, prevVal) => {\n        flow.globalEvents.off(prevVal, this.props.eventId);\n        this.props.eventId = flow.globalEvents.on(this.props.name, data => this.outputs[0].emit(data));\n      });\n    }\n  }\n\n  setupUI() {\n    this.eventInput = this.createInput({ propName: 'name', height: 20, style: { type: InputType.Text, grow: .6 } });\n    this.ui.append(this.createHozLayout([\n      this.createLabel('Event', { style: { grow: .4 } }),\n      this.eventInput\n    ], { style: { spacing: 10 } }));\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector2 } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { InputType, Input } from \"../../ui/input\";\nimport { Log } from \"../../utils/logger\";\nimport { Node } from \"../../core/node\";\n\nexport class JsonSource extends Node {\n  input: Input;\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'JSON Source', options.position || new Vector2(50, 50), options.width || 150, [],\n      [{ name: 'value', dataType: 'any' }],\n      {\n        props: options.props ? { ...options.props } : {},\n        style: options.style || { rowHeight: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.setupUI();\n\n    this.input.on('change', () => this.process());\n    this.on('process', () => this.process());\n  }\n\n  process() {\n    if (!this.input.value || this.input.value === '') return;\n    try {\n      let value = JSON.parse(this.input.value as string);\n      this.setOutputs(0, value);\n    } catch (error) {\n      this.input.inputEl.style.backgroundColor = 'red';\n      Log.error(\"StandardNode 'JsonSource' json parse error\", error);\n    }\n  }\n  setupUI() {\n    this.input = this.createInput({ value: '', input: true, output: true, height: 20, style: { type: InputType.Text, grow: .7 } });\n    this.ui.append(this.createHozLayout([\n      this.createLabel('Value', { style: { grow: .3 } }),\n      this.input\n    ], { style: { spacing: 20 } }));\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector2 } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { Terminal, TerminalType } from \"../../core/terminal\";\nimport { Log as Logger } from '../../utils/logger';\nimport { Node } from \"../../core/node\";\nimport { Button } from \"../../ui/button\";\n\nexport class Log extends Node {\n  addEventButton: Button;\n  addDataButton: Button;\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'Log', options.position || new Vector2(50, 50), options.width || 170,\n      [{ name: 'Log 1', dataType: 'event' }, { name: 'Log 2', dataType: 'any' }], [],\n      {\n        props: options.props ? { ...options.props } : {},\n        style: options.style || { rowHeight: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.inputs[0].on('event', (terminal, data) => Logger.log(terminal.name, data));\n    this.inputs[1].on('data', (terminal, data) => Logger.log(terminal.name, data));\n    \n    this.setupUI();\n\n    this.addEventButton.on('click', () => this.addNewTerminal('event'));\n    this.addDataButton.on('click', () => this.addNewTerminal('data'));\n  }\n\n  setupUI() {\n    this.addEventButton = this.createButton('Add Event', { style: { grow: .5 } });\n    this.addDataButton = this.createButton('Add Data', { style: { grow: .5 } });\n    this.ui.append(this.createHozLayout([this.addEventButton, this.addDataButton], { style: { spacing: 20 } }));\n  }\n  addNewTerminal(type: string) {\n    let newTerminal = new Terminal(this, TerminalType.IN, type === 'event' ? type : 'any', 'Log ' + (this.inputs.length + 1));\n    newTerminal.on(type, (terminal, data) => Logger.log(terminal.name, data));\n    this.addTerminal(newTerminal);\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector2 } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { InputType, Input } from \"../../ui/input\";\nimport { Node } from \"../../core/node\";\nimport { Toggle } from \"../../ui/toggle\";\n\nexport class NumberRange extends Node {\n  minInput: Input;\n  maxInput: Input;\n  stepInput: Input;\n  loopToggle: Toggle;\n\n  static DefaultProps = { value: 0, min: 0, max: 100, step: 1, loop: false };\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'Number Range', options.position || new Vector2(50, 50), options.width || 200,\n      [{ name: 'trigger', dataType: 'event' }, { name: 'reset', dataType: 'event' }],\n      [{ name: 'value', dataType: 'number' }],\n      {\n        props: options.props ? { ...NumberRange.DefaultProps, ...options.props } : NumberRange.DefaultProps,\n        style: options.style || { rowHeight: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.props.startValue = this.props.value;\n\n    this.setupUI();\n\n    this.minInput.on('change', () => this.process());\n    this.maxInput.on('change', () => this.process());\n    this.stepInput.on('change', () => this.process());\n    this.loopToggle.on('change', () => this.process());\n\n    this.inputs[0].on('event', () => this.process());\n    this.inputs[1].on('event', () => this.props.value = this.props.min);\n  }\n\n  process() {\n    let value = this.props.value;\n    this.props.value = value + this.props.step;\n    if (this.props.value < this.props.min) {\n      this.props.value = this.props.min;\n      if (this.props.loop) this.props.value = this.props.startValue;\n      else return;\n    } else if (this.props.value > this.props.max) {\n      this.props.value = this.props.max;\n      if (this.props.loop) this.props.value = this.props.startValue;\n      else return;\n    } else {\n      this.setOutputs(0, value);\n    }\n  }\n  setupUI() {\n    this.minInput = this.createInput({ propName: 'min', input: true, output: true, height: 20, style: { type: InputType.Number, grow: .3, step: 'any' } });\n    this.maxInput = this.createInput({ propName: 'max', input: true, output: true, height: 20, style: { type: InputType.Number, grow: .3, step: 'any' } });\n    this.stepInput = this.createInput({ propName: 'step', input: true, output: true, height: 20, style: { type: InputType.Number, grow: .3, step: 'any' } });\n    this.loopToggle = this.createToggle({ propName: 'loop', input: true, output: true, height: 10, style: { grow: .2 } });\n    this.ui.append([\n      this.createHozLayout([\n        this.createLabel('Min', { style: { grow: .2 } }), this.minInput,\n        this.createLabel('Max', { style: { grow: .2 } }), this.maxInput\n      ], { style: { spacing: 5 } }),\n      this.createHozLayout([\n        this.createLabel('Step', { style: { grow: .2 } }), this.stepInput\n      ], { style: { spacing: 5 } }),\n      this.createHozLayout([\n        this.createLabel('Loop ?', { style: { grow: .2 } }), this.loopToggle\n      ], { style: { spacing: 10 } })\n    ]);\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector2 } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { InputType, Input } from \"../../ui/input\";\nimport { Node } from \"../../core/node\";\nimport { Toggle } from \"../../ui/toggle\";\n\nexport class NumberSource extends Node {\n  fractionalToggle: Toggle;\n  input: Input;\n\n  static DefaultProps = { fractional: false, value: 0 };\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'Number Source', options.position || new Vector2(50, 50), options.width || 160, [],\n      [{ name: 'value', dataType: 'number' }],\n      {\n        props: options.props ? { ...NumberSource.DefaultProps, ...options.props } : NumberSource.DefaultProps,\n        style: options.style || { rowHeight: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.setupUI();\n\n    this.fractionalToggle.on('change', (_inst, _oldVal, newVal) => {\n      this.input.style.step = newVal ? 'any' : '';\n      if (!newVal) this.props.value = Math.floor(this.props.value);\n      this.process();\n    });\n    this.input.on('change', () => {\n      if (!this.props.fractional) this.props.value = Math.floor(this.props.value);\n      this.process();\n    });\n    this.outputs[0].on('connect', () => this.process());\n    this.on('process', () => this.process());\n  }\n\n  process() { this.setOutputs(0, this.props.fractional ? this.props.value : Math.floor(this.props.value)); }\n  setupUI() {\n    this.fractionalToggle = this.createToggle({ propName: 'fractional', input: true, output: true, height: 10, style: { grow: .3 } });\n    this.input = this.createInput({\n      value: 0, propName: 'value', input: true, output: true, height: 20, style: { type: InputType.Number, grow: .6, step: this.props.fractional ? 'any' : '' }\n    })\n    this.ui.append([\n      this.createHozLayout([this.createLabel('Fractional ?', { style: { grow: .5 } }), this.fractionalToggle], { style: { spacing: 20 } }),\n      this.createHozLayout([this.createLabel('Value', { style: { grow: .4 } }), this.input], { style: { spacing: 20 } }),\n    ]);\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector2 } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { Node } from \"../../core/node\";\n\nexport class Property extends Node {\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'Property', options.position || new Vector2(50, 50), options.width || 130,\n      [{ name: 'object', dataType: 'any' }, { name: 'key', dataType: 'string' }],\n      [{ name: 'value', dataType: 'any' }],\n      {\n        props: options.props ? { ...options.props } : {},\n        style: options.style || { rowHeight: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.on('process', (_, inputs) => {\n      if (!inputs[0]) return;\n      this.setOutputs(0, inputs[0][inputs[1]]);\n    });\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector2 } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { getRandom } from \"../../utils/utils\";\nimport { InputType, Input } from \"../../ui/input\";\nimport { Node } from \"../../core/node\";\nimport { Toggle } from \"../../ui/toggle\";\n\nexport class Random extends Node {\n  minInput: Input;\n  maxInput: Input;\n  fractionalToggle: Toggle;\n\n  static DefaultProps = { min: 0, max: 100, fractional: false };\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'Random', options.position || new Vector2(50, 50), options.width || 150,\n      [{ name: 'trigger', dataType: 'event' }],\n      [{ name: 'value', dataType: 'number' }],\n      {\n        props: options.props ? { ...Random.DefaultProps, ...options.props } : Random.DefaultProps,\n        style: options.style || { rowHeight: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.setupUI();\n\n    this.minInput.on('change', () => this.process());\n    this.maxInput.on('change', () => this.process());\n    this.fractionalToggle.on('change', () => this.process());\n    this.inputs[0].on('event', () => this.process());\n    this.on('process', () => this.process());\n  }\n\n  process() {\n    let random;\n    if (this.props.fractional) random = getRandom(this.props.min, this.props.max)\n    else random = Math.floor(getRandom(Math.floor(this.props.min), Math.floor(this.props.max)));\n\n    this.setOutputs(0, random);\n  }\n  setupUI() {\n    this.minInput = this.createInput({ propName: 'min', input: true, output: true, height: 20, style: { type: InputType.Number, grow: .5, step: 'any' } });\n    this.maxInput = this.createInput({ propName: 'max', input: true, output: true, height: 20, style: { type: InputType.Number, grow: .5, step: 'any' } });\n    this.fractionalToggle = this.createToggle({ propName: 'fractional', input: true, output: true, height: 10, style: { grow: .2 } });\n    this.ui.append([\n      this.createHozLayout([\n        this.createLabel('Min:'),\n        this.minInput\n      ], { style: { spacing: 20 } }),\n      this.createHozLayout([\n        this.createLabel('Max:'),\n        this.maxInput\n      ], { style: { spacing: 20 } }),\n      this.createHozLayout([\n        this.createLabel('Fractional ?'),\n        this.fractionalToggle\n      ], { style: { spacing: 10 } })\n    ]);\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector2 } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { InputType, Input } from \"../../ui/input\";\nimport { Node } from \"../../core/node\";\n\nexport class StringSource extends Node {\n  input: Input;\n\n  static DefaultProps = { value: '' };\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'String Source', options.position || new Vector2(50, 50), options.width || 160, [],\n      [{ name: 'value', dataType: 'string' }],\n      {\n        props: options.props ? { ...StringSource.DefaultProps, ...options.props } : StringSource.DefaultProps,\n        style: options.style || { rowHeight: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.setupUI();\n\n    this.input.on('change', () => this.process());\n    this.on('process', () => this.process());\n  }\n\n  process = () => this.setOutputs(0, this.props.value);\n  setupUI() {\n    this.input = this.createInput({ value: '', propName: 'value', input: true, output: true, height: 20, style: { type: InputType.Text, grow: .7 } })\n    this.ui.append(this.createHozLayout([\n      this.createLabel('Value', { style: { grow: .3 } }), this.input\n    ], { style: { spacing: 10 } }));\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector2 } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { Terminal, TerminalType } from \"../../core/terminal\";\nimport { Node } from \"../../core/node\";\nimport { RadioGroup } from \"../../ui/radio-group\";\nimport { Button } from \"../../ui/button\";\n\nexport class SyncData extends Node {\n  syncTypeInput: RadioGroup;\n  addButton: Button;\n\n  eventIds: number[] = [];\n\n  static DefaultProps = { syncType: 'partial', hold: {} };\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}, inputs?: number) {\n    super(flow, options.name || 'Sync Data', options.position || new Vector2(50, 50), options.width || 160,\n      [{ name: 'Data 1', dataType: 'any' }, { name: 'Data 2', dataType: 'any' }],\n      [{ name: 'synced', dataType: 'any' }],\n      {\n        props: options.props ? { ...SyncData.DefaultProps, ...options.props, hold: {} } : SyncData.DefaultProps,\n        style: options.style || { rowHeight: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    if (inputs) {\n      for (let i = 0; i < inputs - 2; i++) {\n        this.addTerminal(new Terminal(this, TerminalType.IN, 'any', 'Data ' + (this.inputs.length + 1)));\n      }\n    }\n\n    this.setupUI();\n\n    for (let terminal of this.inputs) {\n      this.eventIds.push(terminal.on('data', (inst, data) => this.process(inst, data)));\n    }\n\n    this.on('process', () => process);\n  }\n  setupUI() {\n    this.syncTypeInput = this.createRadioGroup(['partial', 'full'], this.props.syncType, { propName: 'syncType', height: 20 });\n    this.addButton = this.createButton('Add', { input: true, output: true, height: 20 });\n    this.ui.append([this.syncTypeInput, this.addButton]);\n    this.addButton.on('click', () => {\n      let newTerminal = new Terminal(this, TerminalType.IN, 'any', 'Data ' + (this.inputs.length + 1));\n      this.addTerminal(newTerminal);\n      this.eventIds.push(newTerminal.on('data', (inst, data) => this.process(inst, data)));\n    });\n  }\n  process(terminal: Terminal, data: any) {\n    this.props.hold[terminal.id] = data;\n\n    let hold = [];\n    for (let term of this.inputs) {\n      if (this.props.hold.hasOwnProperty(term.id)) {\n        hold.push(this.props.hold[term.id]);\n      }\n      else return;\n    }\n\n    if (this.props.syncType === 'full') this.props.hold = {};\n    this.outputs[0].emit(hold);\n\n    for (let term of this.inputs) if (term.connectors.length > 0 && typeof term.getData() === 'undefined') return;\n    this.setOutputs(0, this.getInputs());\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector2 } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { Terminal, TerminalType } from \"../../core/terminal\";\nimport { Node } from \"../../core/node\";\nimport { Button } from \"../../ui/button\";\n\nexport class SyncEvent extends Node {\n  addButton: Button;\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}, events?: number) {\n    super(flow, options.name || 'Sync Event', options.position || new Vector2(50, 50), options.width || 160,\n      [{ name: 'Event 1', dataType: 'event' }, { name: 'Event 2', dataType: 'event' }],\n      [{ name: 'synced', dataType: 'event' }],\n      {\n        props: options.props ? { ...options.props, hold: {} } : { hold: {} },\n        style: options.style || { rowHeight: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    if (events) {\n      for (let i = 0; i < events - 2; i++)\n        this.addTerminal(new Terminal(this, TerminalType.IN, 'event', 'Event ' + (this.inputs.length + 1)));\n    }\n    this.inputs.forEach(terminal => terminal.on('event', (inst, data) => this.process(inst, data)));\n\n    this.setupUI();\n\n    this.addButton.on('click', () => {\n      let newTerminal = new Terminal(this, TerminalType.IN, 'event', 'Event ' + (this.inputs.length + 1));\n      this.addTerminal(newTerminal);\n      newTerminal.on('event', (terminal, data) => this.process(terminal, data));\n    });\n  }\n\n  process(terminal: Terminal, data: any) {\n    this.props.hold[terminal.id] = data;\n\n    let hold = [];\n    for (let term of this.inputs) {\n      if (this.props.hold.hasOwnProperty(term.id)) {\n        hold.push(this.props.hold[term.id]);\n      }\n      else return;\n    }\n\n    this.props.hold = {};\n    this.outputs[0].emit(hold);\n  }\n  setupUI() {\n    this.addButton = this.createButton('Add', { input: true, output: true, height: 20 });\n    this.ui.append(this.addButton);\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector2 } from \"../../core/vector\";\nimport { InputType } from \"../../ui/input\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { Node } from \"../../core/node\";\n\nexport class Timer extends Node {\n  lastTrigger: number = Number.MIN_VALUE;\n\n  static DefaultProps = { delay: 1000 };\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'Timer', options.position || new Vector2(50, 50), options.width || 150, [],\n      [{ name: 'timer', dataType: 'event' }],\n      {\n        props: options.props ? { ...Timer.DefaultProps, ...options.props } : Timer.DefaultProps,\n        style: options.style || { rowHeight: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.setupUI();\n\n    flow.flowConnect.on('tickreset', () => this.lastTrigger = Number.MIN_VALUE);\n    flow.flowConnect.on('tick', () => {\n      let current = flow.flowConnect.time;\n      if (current - this.lastTrigger >= this.props.delay) {\n        this.outputs[0].emit(null);\n        this.lastTrigger = current;\n      }\n    });\n  }\n\n  setupUI() {\n    this.ui.append(this.createInput({ propName: 'delay', height: 20, style: { type: InputType.Number } }));\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector2 } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { Terminal, TerminalType } from \"../../core/terminal\";\nimport { Node } from \"../../core/node\";\nimport { Button } from \"../../ui/button\";\n\nexport class ToArray extends Node {\n  addButton: Button;\n\n  constructor(flow: Flow, inputs: number, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'To Array', options.position || new Vector2(50, 50), options.width || 100,\n      (inputs && inputs > 0\n        ? (new Array(inputs).fill(null).map((_, index) => ({ name: 'In ' + (index + 1), dataType: 'any' })))\n        : [{ name: 'In 1', dataType: 'any' }]\n      ),\n      [{ name: 'out', dataType: 'array' }],\n      {\n        props: options.props ? { ...options.props } : {},\n        style: options.style || { rowHeight: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.setupUI();\n\n    this.addButton.on('click', () => this.addTerminal(new Terminal(this, TerminalType.IN, 'any', 'In ' + this.inputs.length + 1)));\n    this.on('process', (_, inData) => this.setOutputs(0, [...inData]));\n  }\n\n  setupUI() {\n    this.addButton = this.createButton('Add', { style: { grow: .5 } });\n    this.ui.append(this.addButton);\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector2 } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { Log } from \"../../utils/logger\";\nimport { Node } from \"../../core/node\";\n\nexport class ToVector2 extends Node {\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'To Vector2', options.position || new Vector2(50, 50), options.width || 100,\n      [{ name: 'x', dataType: 'any' }, { name: 'y', dataType: 'any' }],\n      [{ name: 'vector2', dataType: 'any' }],\n      {\n        props: options.props ? { ...options.props } : {},\n        style: options.style || { rowHeight: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.on('process', (_, inputs) => {\n      if (typeof inputs[0] === 'number' && typeof inputs[1] === 'number') {\n        this.setOutputs(0, { x: inputs[0], y: inputs[1] });\n      } else if (Array.isArray(inputs[0]) && Array.isArray(inputs[1])) {\n        let result = [];\n        for (let i = 0; i < inputs[0].length; i++) {\n          result.push({ x: inputs[0][i], y: inputs[1][i] });\n        }\n        this.setOutputs(0, result);\n      } else {\n        Log.error('Type mismatch: Inputs to standard node \\'ToVector2\\' should be of same type');\n      }\n    });\n  }\n}\n","import * as timer from './common/timer';\nimport * as log from './common/log';\nimport * as buffer from './common/buffer';\nimport * as toArray from './common/to-array';\nimport * as arrayIndex from './common/array-index';\nimport * as arraySource from './common/array-source';\nimport * as random from './common/random';\nimport * as booleanSource from './common/boolean-source';\nimport * as jsonSource from './common/json-source';\nimport * as numberSource from './common/number-source';\nimport * as stringSource from './common/string-source';\nimport * as fileSource from './common/file-source';\nimport * as compare from './common/compare';\nimport * as property from './common/property';\nimport * as syncEvent from './common/sync-event';\nimport * as syncData from './common/sync-data';\nimport * as delay from './common/delay';\nimport * as toVector2 from './common/to-vector2';\nimport * as numberRange from './common/number-range';\nimport * as globalEvent from './common/global-event';\n\nimport * as abs from './math/abs';\nimport * as average from './math/average';\nimport * as normalize from './math/normalize';\nimport * as clamp from './math/clamp';\nimport * as floor from './math/floor';\nimport * as ceil from './math/ceil';\nimport * as func from './math/func';\n\nimport * as api from './net/api';\n\nimport * as functionPlotter from './visual/function-plotter';\nimport * as lineChartMini from './visual/line-chart-mini';\n\nimport * as source from './audio/source';\nimport * as destination from './audio/destination';\nimport * as automate from './audio/automate';\nimport * as channelSplitter from './audio/channel-splitter';\nimport * as debug from './audio/debug';\nimport * as channelMerger from './audio/channel-merger';\nimport * as adsr from './audio/adsr';\nimport * as gain from './audio/gain';\nimport * as metronome from './audio/metronome';\nimport * as moogEffect from './audio/moog';\nimport * as bitcrusherEffect from './audio/bitcrusher';\nimport * as biquadFilter from './audio/biquad-filter';\nimport * as delayEffect from './audio/delay';\nimport * as dynamicsCompressor from './audio/dynamics-compressor';\nimport * as chorusEffect from './audio/chorus';\nimport * as overdriveEffect from './audio/overdrive';\nimport * as audioBuffer from './audio/audio-buffer-source';\nimport * as convolver from './audio/convolver';\nimport * as tremoloEffect from './audio/tremolo';\nimport * as pingPong from './audio/ping-pong-delay';\nimport * as stereoPanner from './audio/stereo-panner';\nimport * as spatialPanner from './audio/3d-panner';\nimport * as noise from './audio/noise';\nimport * as oscillator from './audio/oscillator';\nimport * as microphone from './audio/microphone';\nimport * as distorter from './audio/distorter';\nimport * as equalizer from './audio/equalizer';\nimport * as frequencyAnalyser from './audio/frequency-analyser';\nimport * as waveformAnalyser from './audio/waveform-analyser';\nimport * as spectrogramAnalyser from './audio/spectrogram-analyser';\n\nimport * as dial from './ui/dial';\n\nexport namespace StandardNodes.Common {\n  export import Timer = timer.Timer;\n  export import Log = log.Log;\n  export import Buffer = buffer.Buffer;\n  export import ToArray = toArray.ToArray;\n  export import ArrayIndex = arrayIndex.ArrayIndex;\n  export import ArraySource = arraySource.ArraySource;\n  export import BooleanSource = booleanSource.BooleanSource;\n  export import JsonSource = jsonSource.JsonSource;\n  export import NumberSource = numberSource.NumberSource;\n  export import StringSource = stringSource.StringSource;\n  export import FileSource = fileSource.FileSource;\n  export import Random = random.Random;\n  export import Compare = compare.Compare;\n  export import Property = property.Property;\n  export import SyncEvent = syncEvent.SyncEvent;\n  export import SyncData = syncData.SyncData;\n  export import Delay = delay.Delay;\n  export import ToVector2 = toVector2.ToVector2;\n  export import NumberRange = numberRange.NumberRange;\n  export import GlobalEvent = globalEvent.GlobalEvent;\n}\nexport namespace StandardNodes.Math {\n  export import Abs = abs.Abs;\n  export import Average = average.Average;\n  export import Normalize = normalize.Normalize;\n  export import Clamp = clamp.Clamp;\n  export import Floor = floor.Floor;\n  export import Ceil = ceil.Ceil;\n  export import Function = func.Func;\n}\nexport namespace StandardNodes.Net {\n  export import API = api.API;\n}\nexport namespace StandardNodes.Visual {\n  export import LineChartMini = lineChartMini.LineChartMini;\n  export import FunctionPlotter = functionPlotter.FunctionPlotter;\n}\nexport namespace StandardNodes.Audio {\n  export import Source = source.Source;\n  export import Destination = destination.Destination;\n  export import Automate = automate.Automate;\n  export import ChannelSplitter = channelSplitter.ChannelSplitter;\n  export import Debug = debug.Debug;\n  export import ChannelMerger = channelMerger.ChannelMerger;\n  export import ADSR = adsr.ADSR;\n  export import Gain = gain.Gain;\n  export import Metronome = metronome.Metronome;\n  export import MoogEffect = moogEffect.MoogEffect;\n  export import BitcrusherEffect = bitcrusherEffect.BitcrusherEffect;\n  export import BiquadFilter = biquadFilter.BiquadFilter;\n  export import DelayEffect = delayEffect.DelayEffect;\n  export import DynamicsCompressor = dynamicsCompressor.DynamicsCompressor;\n  export import ChorusEffect = chorusEffect.ChorusEffect;\n  export import OverdriveEffect = overdriveEffect.OverdriveEffect;\n  export import AudioBufferSource = audioBuffer.AudioBufferSource;\n  export import Convolver = convolver.Convolver;\n  export import TremoloEffect = tremoloEffect.TremoloEffect;\n  export import PingPongDelay = pingPong.PingPongEffect;\n  export import StereoPanner = stereoPanner.StereoPanner;\n  export import SpatialPanner = spatialPanner.SpatialPanner;\n  export import Noise = noise.Noise;\n  export import Oscillator = oscillator.Oscillator;\n  export import Microphone = microphone.Microphone;\n  export import Distorter = distorter.Distorter;\n  export import Equalizer = equalizer.Equalizer;\n  export import FrequencyAnalyser = frequencyAnalyser.FrequencyAnalyser;\n  export import WaveformAnalyser = waveformAnalyser.WaveformAnalyser;\n  export import SpectrogramAnalyser = spectrogramAnalyser.SpectrogramAnalyser;\n}\nexport namespace StandardNodes.UI {\n  export import Dial = dial.Dial;\n}\nexport namespace StandardNodes.Image {\n\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector2 } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { Node } from \"../../core/node\";\n\nexport class Abs extends Node {\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'Abs', options.position || new Vector2(50, 50), options.width || 120,\n      [{ name: 'x', dataType: 'any' }],\n      [{ name: '|x|', dataType: 'any' }],\n      {\n        props: options.props ? { ...options.props } : {},\n        style: options.style || { rowHeight: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.on('process', (_, inputs) => {\n      if (typeof inputs[0] === 'number') {\n        this.setOutputs(0, Math.abs(inputs[0]));\n      } else if (Array.isArray(inputs[0])) {\n        this.setOutputs(0, inputs[0].map(item => Math.abs(item)));\n      }\n    });\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector2 } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { Node } from \"../../core/node\";\n\nexport class Average extends Node {\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'Average', options.position || new Vector2(50, 50), options.width || 120,\n      [{ name: 'n', dataType: 'any' }],\n      [{ name: 'μ', dataType: 'any' }],\n      {\n        props: options.props ? { ...options.props } : {},\n        style: options.style || { rowHeight: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.on('process', (_, inputs) => {\n      if (Array.isArray(inputs[0])) {\n        this.setOutputs(0, inputs[0].reduce((acc, curr) => acc + curr, 0) / inputs[0].length);\n      }\n    });\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector2 } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { Node } from \"../../core/node\";\n\nexport class Ceil extends Node {\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'Ceil', options.position || new Vector2(50, 50), options.width || 120,\n      [{ name: 'x', dataType: 'any' }],\n      [{ name: '|x|', dataType: 'any' }],\n      {\n        props: options.props ? { ...options.props } : {},\n        style: options.style || { rowHeight: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.on('process', (_, inputs) => {\n      if (typeof inputs[0] === 'number') {\n        this.setOutputs(0, Math.ceil(inputs[0]));\n      } else if (Array.isArray(inputs[0])) {\n        this.setOutputs(0, inputs[0].map(item => Math.ceil(item)));\n      }\n    });\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector2 } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { clamp } from \"../../utils/utils\";\nimport { InputType, Input } from \"../../ui/input\";\nimport { Node } from \"../../core/node\";\n\nexport class Clamp extends Node {\n  minInput: Input;\n  maxInput: Input;\n\n  static DefaultProps = { min: 0, max: 100 };\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'Clamp', options.position || new Vector2(50, 50), options.width || 150,\n      [{ name: 'x', dataType: 'any' }],\n      [{ name: '[x]', dataType: 'any' }],\n      {\n        props: options.props ? { ...Clamp.DefaultProps, ...options.props } : Clamp.DefaultProps,\n        style: options.style || { rowHeight: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.setupUI();\n\n    this.minInput.on('change', () => this.process(this.getInputs()[0]));\n    this.maxInput.on('change', () => this.process(this.getInputs()[0]));\n    this.on('process', (_, inputs) => this.process(inputs[0]));\n  }\n\n  setupUI() {\n    this.minInput = this.createInput({ propName: 'min', input: true, output: true, height: 20, style: { type: InputType.Number, grow: .7 } });\n    this.maxInput = this.createInput({ propName: 'max', input: true, output: true, height: 20, style: { type: InputType.Number, grow: .7 } });\n    this.ui.append([\n      this.createHozLayout([\n        this.createLabel('Min', { style: { grow: .3 } }),\n        this.minInput\n      ], { style: { spacing: 10 } }),\n      this.createHozLayout([\n        this.createLabel('Max', { style: { grow: .3 } }),\n        this.maxInput\n      ], { style: { spacing: 10 } })\n    ]);\n  }\n  process(input: number | []) {\n    if (typeof input === 'number') {\n      this.setOutputs(0, clamp(input, this.props.min, this.props.max));\n    } else if (Array.isArray(input)) {\n      this.setOutputs(0, input.map(item => clamp(item, this.props.min, this.props.max)));\n    }\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector2 } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { Node } from \"../../core/node\";\n\nexport class Floor extends Node {\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'Floor', options.position || new Vector2(50, 50), options.width || 120,\n      [{ name: 'x', dataType: 'any' }],\n      [{ name: '|x|', dataType: 'any' }],\n      {\n        props: options.props ? { ...options.props } : {},\n        style: options.style || { rowHeight: 10 },\n        terminalStyle: options.terminalStyle || {},\n      }\n    );\n\n    this.on('process', (_, inputs) => {\n      if (typeof inputs[0] === 'number') {\n        this.setOutputs(0, Math.floor(inputs[0]));\n      } else if (Array.isArray(inputs[0])) {\n        this.setOutputs(0, inputs[0].map(item => Math.floor(item)));\n      }\n    });\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector2 } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { InputType, Input } from \"../../ui/input\";\nimport { Terminal, TerminalType } from \"../../core/terminal\";\nimport { Evaluator } from \"../../utils/evaluator\";\nimport { Log } from \"../../utils/logger\";\nimport { Parser } from \"../../utils/parser\";\nimport { Token, TokenType } from \"../../utils/lexer\";\nimport { Node } from \"../../core/node\";\nimport { Button } from \"../../ui/button\";\n\nexport class Func extends Node {\n  addVarButton: Button\n\n  static DefaultProps = { evaluator: new Evaluator({}), newVar: 'y' };\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}, expression?: string) {\n    super(flow, options.name || 'Function', options.position || new Vector2(50, 50), options.width || 200, [],\n      [{ name: '𝒇', dataType: 'any' }],\n      {\n        props: options.props\n          ? { ...Func.DefaultProps, ...options.props, expression: (expression || 'a*sin(a^2)+cos(a*tan(a))') }\n          : { ...Func.DefaultProps, expression: (expression || 'a*sin(a^2)+cos(a*tan(a))') },\n        style: options.style || { rowHeight: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    let vars = new Set<string>();\n    let parser = new Parser();\n    let tokens: Token[];\n    try {\n      tokens = parser.parse(expression);\n    } catch (error) {\n      Log.error('Error while parsing expression: ', expression, error);\n      return;\n    }\n    try {\n      tokens.forEach(token => {\n        if (token.type === TokenType.Variable) {\n          if ((token.value as string).length > 1) throw new Error('Only single character variables are allowed: ' + token.value);\n          else vars.add(token.value as string);\n        }\n      });\n    } catch (error) { Log.error(error); return; }\n\n    vars.forEach(variable => this.addTerminal(new Terminal(this, TerminalType.IN, 'any', variable)));\n    this.props.expression = expression;\n\n    this.setupUI();\n\n    this.watch('expression', () => this.process());\n\n    this.addVarButton.on('click', () => {\n      if (!this.props.newVar || this.props.newVar.trim() === '') return;\n      if (this.inputs.map(input => input.name).includes(this.props.newVar.trim().toLowerCase())) {\n        Log.error('Variable', this.props.newVar.trim(), 'already exists');\n        return;\n      }\n      this.addTerminal(new Terminal(this, TerminalType.IN, 'any', this.props.newVar.trim()));\n    });\n    this.on('process', () => this.process());\n  }\n\n  process() {\n    let bulkEvalIterations = -1;\n    this.props.evaluator.variables = {};\n    for (let inTerminal of this.inputs) {\n      let data = inTerminal.getData();\n\n      // Some checks to determine if the intention is to pass variables with array values to this function\n      // Which should mean its a bulk evaluation (t=[2,5,6,8...], f(t)=cos(t)  ==>  f(t)=[cos(2),cos(5),cos(6),cos(8)...])\n      if (Array.isArray(data)) {\n        let expr = this.props.expression;\n        let regex = new RegExp('([a-z]+)\\\\(' + inTerminal.name + '\\\\)', 'g');\n        expr = expr.replace(/\\s+/g, '');\n        let matches = [...expr.matchAll(regex)];\n        let result = matches\n          .map(match => !Evaluator.multiargFunctions.includes(match[1]))\n          .reduce((acc, curr) => acc = acc && curr, true);\n\n        if (result) bulkEvalIterations = Math.max(bulkEvalIterations, data.length);\n      }\n\n      this.props.evaluator.variables[inTerminal.name] = (typeof data !== 'undefined' && data !== null) ? data : 0;\n    }\n    try {\n      let result: number[] | number;\n      if (bulkEvalIterations !== -1) {\n        let resultArr = [];\n        for (let i = 0; i < bulkEvalIterations; i += 1) {\n          resultArr.push(this.props.evaluator.evaluate(this.props.expression, i));\n        }\n        result = resultArr;\n      } else {\n        result = this.props.evaluator.evaluate(this.props.expression);\n      }\n      this.setOutputs(0, result);\n    } catch (error) {\n      Log.error('Error while evaluating the expression: ', this.props.expression, error);\n    }\n  }\n  lowerCase(input: Input) {\n    if (/[A-Z]/g.test(input.inputEl.value)) input.inputEl.value = input.inputEl.value.toLowerCase();\n  }\n  setupUI() {\n    let exprInput = this.createInput({\n      propName: 'expression', input: true, output: true, height: 20, style: { type: InputType.Text, grow: .9 }\n    });\n    exprInput.on('input', this.lowerCase);\n    this.addVarButton = this.createButton('Add', { height: 20, style: { grow: .4 } });\n    this.ui.append([\n      this.createHozLayout([\n        this.createLabel('𝒇', { style: { grow: .1 } }),\n        exprInput\n      ], { style: { spacing: 10 } }),\n      this.createHozLayout([\n        this.createInput({ propName: 'newVar', height: 20, style: { type: InputType.Text, maxLength: 1, grow: .6 } }),\n        this.addVarButton\n      ], { style: { spacing: 10 } })\n    ]);\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector2 } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { InputType } from \"../../ui/input\";\nimport { normalize } from \"../../utils/utils\";\nimport { Node } from \"../../core/node\";\n\nexport class Normalize extends Node {\n  min = Number.MAX_SAFE_INTEGER;\n  max = Number.MIN_SAFE_INTEGER;\n\n  static DefaultProps = { min: 0, max: 100, relative: false };\n\n  constructor(flow: Flow, public type: 'number' | 'array', options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'Normalize', options.position || new Vector2(50, 50), options.width || 150,\n      [{ name: 'data', dataType: type }],\n      [{ name: 'normalized', dataType: type }],\n      {\n        props: options.props ? { ...Normalize.DefaultProps, ...options.props } : Normalize.DefaultProps,\n        style: options.style || { rowHeight: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    if (type === 'array') {\n      let relativeToggle = this.createToggle({ propName: 'relative', height: 10, style: { grow: .5 } });\n      this.ui.append(this.createHozLayout([\n        this.createLabel('Relative ?'),\n        relativeToggle\n      ], { style: { spacing: 20 } }));\n      relativeToggle.on('change', () => this.process());\n    }\n    if (type === 'number' || !this.props.relative) {\n      let minInput = this.createInput({ propName: 'min', height: 20, style: { type: InputType.Number, grow: .3 } });\n      let maxInput = this.createInput({ propName: 'max', height: 20, style: { type: InputType.Number, grow: .3 } });\n      this.ui.append(this.createHozLayout([\n        this.createLabel('Min', { style: { grow: .2 } }),\n        minInput,\n        this.createLabel('Max', { style: { grow: .2 } }),\n        maxInput\n      ], { style: { spacing: 5 } }));\n\n      minInput.on('change', () => this.process());\n      maxInput.on('change', () => this.process());\n    }\n    if (this.props.constant) {\n      let constantInput = this.createInput({ propName: 'constant', height: 20, style: { type: InputType.Number, grow: .5 } });\n      this.ui.append(this.createHozLayout([\n        this.createLabel('Constant'),\n        constantInput\n      ], { style: { spacing: 20 } }));\n\n      constantInput.on('change', () => this.process());\n    }\n\n    this.on('process', () => this.process())\n  }\n\n\n  process() {\n    let data = this.getInput(0);\n    if (!data) return;\n\n    let normalized;\n    if (this.type === 'number') {\n      normalized = Number(normalize(data, this.props.min, this.props.max).toFixed(2));\n    } else {\n      if (this.props.relative) {\n        let currMin = Math.min(...data);\n        let currMax = Math.max(...data);\n        if (currMin < this.min) this.min = currMin - (this.props.constant || 0);\n        if (currMax > this.max) this.max = currMax + (this.props.constant || 0);\n        normalized = data.map((item: number) => Number(normalize(item, this.min, this.max).toFixed(2)));\n      } else {\n        normalized = data.map((item: number) => Number(normalize(item, this.props.min, this.props.max).toFixed(2)));\n      }\n    }\n    this.setOutputs('normalized', normalized);\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector2 } from \"../../core/vector\";\nimport { NodeCreatorOptions, TerminalOutputs } from \"../../common/interfaces\";\nimport { Align } from \"../../common/enums\";\nimport { Log } from \"../../utils/logger\";\nimport { isEmpty } from \"../../utils/utils\";\nimport { Node } from \"../../core/node\";\n\nexport class API extends Node {\n\n  static DefaultProps = { src: '' };\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'API', options.position || new Vector2(50, 50), options.width || 150,\n      [{ name: 'trigger', dataType: 'event' }],\n      [{ name: 'text', dataType: 'string' }, { name: 'json', dataType: 'any' }, { name: 'array-buffer', dataType: 'array-buffer' }],\n      {\n        props: options.props ? { ...API.DefaultProps, ...options.props } : API.DefaultProps,\n        style: options.style || { rowHeight: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.setupUI();\n\n    this.inputs[0].on('event', async () => {\n      if (!this.props.src || this.props.src === '') Log.error(\"Prop 'src' of API Node is invalid, cannot make an API call\");\n      else {\n        let response, outputs: TerminalOutputs = {};\n        if (this.outputs.map(terminal => terminal.connectors.length).reduce((acc, curr) => acc + curr, 0) > 0) {\n          response = await fetch(this.props.src);\n\n          if (this.outputs[0].connectors.length > 0) outputs[this.outputs[0].name] = await response.text();\n          else if (this.outputs[1].connectors.length > 0) outputs[this.outputs[1].name] = await response.json();\n          else if (this.outputs[2].connectors.length > 0) {\n            // If this is an audio connection then check the arrayBufferCache first\n            if (this.outputs[2].connectors.map(connector => connector.end.dataType).includes('audio')) {\n              let cached = flow.flowConnect.arrayBufferCache.get(this.props.src);\n              if (!cached) {\n                cached = await response.arrayBuffer();\n                flow.flowConnect.arrayBufferCache.set(this.props.src, cached);\n              }\n              outputs[this.outputs[2].name] = cached;\n            } else {\n              outputs[this.outputs[2].name] = await response.arrayBuffer();\n            }\n          }\n\n          if (!isEmpty(outputs)) this.setOutputs(outputs);\n        }\n      }\n    });\n  }\n\n  setupUI() {\n    this.ui.append(this.createLabel('', { propName: 'src', input: true, output: true, style: { align: Align.Center } }));\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector2 } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { DialStyle } from \"../../ui/dial\";\nimport { Align } from \"../../common/enums\";\nimport { Node } from \"../../core/node\";\n\nexport class Dial extends Node {\n\n  static DefaultProps = { value: 0, min: 0, max: 1 };\n\n  constructor(flow: Flow, options: NodeCreatorOptions = new Object(), dialStyle: DialStyle = new Object()) {\n    super(flow, options.name || 'Dial', options.position || new Vector2(50, 50), options.width || 90, [], [],\n      {\n        props: options.props ? { ...Dial.DefaultProps, ...options.props } : Dial.DefaultProps,\n        style: options.style || { rowHeight: 10, padding: 5, spacing: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    Object.assign(this.ui.style, {\n      backgroundColor: 'transparent',\n      borderColor: 'transparent',\n      borderWidth: 0,\n      shadowBlur: 0,\n      shadowColor: 'transparent'\n    });\n\n    this.setupUI(dialStyle);\n\n    this.outputsUI[0].on('connect', (_inst, connector) => {\n      if (connector.end.ref instanceof AudioParam) this.props.value = connector.end.ref.value;\n    });\n  }\n\n  setupUI(dialStyle: DialStyle) {\n    let dial = this.createDial(this.props.min, this.props.max, this.width, {\n      value: this.props.value, propName: 'value', input: true, output: true, style: dialStyle\n    });\n    this.ui.append([\n      dial,\n      this.createStack({\n        childs: [\n          this.createHozLayout([\n            this.createLabel('', { propName: 'min', style: { precision: 1, fontSize: '11px', align: Align.Left, grow: .5 } }),\n            this.createLabel('', { propName: 'max', style: { precision: 1, fontSize: '11px', align: Align.Right, grow: .5 } })\n          ]),\n          this.createHozLayout([\n            this.createLabel('', { propName: 'value', style: { precision: 1, fontSize: '20px', align: Align.Center, grow: 1 } })\n          ])\n        ],\n        style: { spacing: 5 }\n      })\n    ]);\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector2 } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { Node } from \"../../core/node\";\nimport { Display } from \"../../ui/display\";\nimport { Toggle } from \"../../ui/toggle\";\nimport { get } from \"../../utils/utils\";\n\nexport class FunctionPlotter extends Node {\n  display: Display;\n  polarToggle: Toggle;\n\n  static DefaultProps: any = { points: [], polar: false, config: { gX: 3, gY: 3, xMin: -1.5, xMax: 1.5, yMin: -1.5, yMax: 1.5 } }\n\n  constructor(flow: Flow, height: number, public plotStyle: PlotStyle = new Object(), options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'Parametric Plotter', options.position || new Vector2(50, 50), options.width || 300,\n      [{ name: 'data', dataType: 'any' }], [],\n      {\n        props: options.props ? { ...FunctionPlotter.DefaultProps, ...options.props } : FunctionPlotter.DefaultProps,\n        style: options.style || { rowHeight: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.setupUI(height);\n\n    this.polarToggle.on('change', () => this.process(this.getInputs()));\n\n    let dragStart: Vector2 = null;\n    this.display.on('up', () => dragStart = null);\n    this.display.on('exit', () => dragStart = null);\n    this.display.on('down', (_, screenPos) => {\n      dragStart = screenPos.subtract(this.display.position.transform(flow.flowConnect.transform));\n      dragStart.x = this.xPixToCoord(this.props.config, this.display.offCanvasConfigs[0].canvas.width, dragStart.x);\n      dragStart.y = this.yPixToCoord(this.props.config, this.display.offCanvasConfigs[0].canvas.height, dragStart.y);\n    });\n    this.display.on('drag', (_, screenPos) => {\n      if (dragStart) {\n        let curr = screenPos.subtract(this.display.position.transform(flow.flowConnect.transform));\n        curr.x = this.xPixToCoord(this.props.config, this.display.offCanvasConfigs[0].canvas.width, curr.x);\n        curr.y = this.yPixToCoord(this.props.config, this.display.offCanvasConfigs[0].canvas.height, curr.y);\n\n        let delta = dragStart.subtract(curr);\n        Object.assign(this.props.config, {\n          xMin: this.props.config.xMin + delta.x,\n          xMax: this.props.config.xMax + delta.x,\n          yMin: this.props.config.yMin + delta.y,\n          yMax: this.props.config.yMax + delta.y,\n        });\n\n        this.gridRenderer(\n          this.display.offCanvasConfigs[0].context,\n          this.display.offCanvasConfigs[0].canvas.width,\n          this.display.offCanvasConfigs[0].canvas.height\n        );\n        this.functionRenderer(\n          this.display.offCanvasConfigs[1].context,\n          this.display.offCanvasConfigs[1].canvas.width,\n          this.display.offCanvasConfigs[1].canvas.height\n        );\n      }\n    });\n    this.display.on('wheel', (_, direction, screenPos) => {\n      let cursor = screenPos.subtract(this.display.position.transform(flow.flowConnect.transform));\n      cursor.x = this.xPixToCoord(this.props.config, this.display.offCanvasConfigs[0].canvas.width, cursor.x);\n      cursor.y = this.yPixToCoord(this.props.config, this.display.offCanvasConfigs[0].canvas.height, cursor.y);\n\n      Object.assign(this.props.config, {\n        xMin: this.props.config.xMin - cursor.x,\n        xMax: this.props.config.xMax - cursor.x,\n        yMin: this.props.config.yMin - cursor.y,\n        yMax: this.props.config.yMax - cursor.y\n      });\n      if (!direction) {\n        Object.assign(this.props.config, {\n          xMin: this.props.config.xMin + this.props.config.xMin * 0.1,\n          xMax: this.props.config.xMax + this.props.config.xMax * 0.1,\n          yMin: this.props.config.yMin + this.props.config.yMin * 0.1,\n          yMax: this.props.config.yMax + this.props.config.yMax * 0.1\n        });\n      } else {\n        Object.assign(this.props.config, {\n          xMin: this.props.config.xMin - this.props.config.xMin * 0.1,\n          xMax: this.props.config.xMax - this.props.config.xMax * 0.1,\n          yMin: this.props.config.yMin - this.props.config.yMin * 0.1,\n          yMax: this.props.config.yMax - this.props.config.yMax * 0.1\n        });\n      }\n      Object.assign(this.props.config, {\n        xMin: this.props.config.xMin + cursor.x,\n        xMax: this.props.config.xMax + cursor.x,\n        yMin: this.props.config.yMin + cursor.y,\n        yMax: this.props.config.yMax + cursor.y\n      });\n\n      this.gridRenderer(\n        this.display.offCanvasConfigs[0].context,\n        this.display.offCanvasConfigs[0].canvas.width,\n        this.display.offCanvasConfigs[0].canvas.height\n      );\n      this.functionRenderer(\n        this.display.offCanvasConfigs[1].context,\n        this.display.offCanvasConfigs[1].canvas.width,\n        this.display.offCanvasConfigs[1].canvas.height\n      );\n    });\n    flow.flowConnect.on('scale', () => this.functionRenderer(\n      this.display.offCanvasConfigs[1].context,\n      this.display.offCanvasConfigs[1].canvas.width,\n      this.display.offCanvasConfigs[1].canvas.height\n    ));\n\n\n    this.inputsUI[0].on('event', () => this.props.points = []);\n    this.on('process', (_, inputs) => this.process(inputs));\n  }\n\n\n  gridRenderer(context: CanvasRenderingContext2D | OffscreenCanvasRenderingContext2D, width: number, height: number) {\n    this.drawGrid(context, width, height);\n    return false;\n  }\n  process(inputs: any) {\n    if (Array.isArray(this.inputs[0])) {\n      if (this.props.polar) {\n        this.props.points = [];\n        for (let i = 0; i < this.inputs[0].length; i += 1) {\n          this.props.points.push({ x: this.inputs[0][i].x * Math.cos(inputs[0][i].y), y: inputs[0][i].x * Math.sin(inputs[0][i].y) });\n        }\n      } else {\n        this.props.points = inputs[0];\n      }\n    } else {\n      this.props.points.push(this.props.polar\n        ? { x: inputs[0].x * Math.cos(inputs[0].y), y: inputs[0].x * Math.sin(inputs[0].y) }\n        : inputs[0]\n      );\n    }\n    this.functionRenderer(\n      this.display.offCanvasConfigs[1].context,\n      this.display.offCanvasConfigs[1].canvas.width,\n      this.display.offCanvasConfigs[1].canvas.height\n    );\n  }\n  xCoordToPix(config: any, width: number, xCoord: number) {\n    const xDiff = config.xMax - config.xMin;\n    const xPixPerUnit = width / xDiff;\n    return Math.round((xCoord - config.xMin) * xPixPerUnit);\n  }\n  yCoordToPix(config: any, height: number, yCoord: number) {\n    const yDiff = config.yMax - config.yMin;\n    const yPixPerUnit = height / yDiff;\n    return Math.round(height - (yCoord - config.yMin) * yPixPerUnit);\n  }\n  xPixToCoord(config: any, width: number, xPix: number) {\n    const xDiff = config.xMax - config.xMin;\n    const xPixPerUnit = width / xDiff;\n    return xPix / xPixPerUnit + config.xMin;\n  }\n  yPixToCoord(config: any, height: number, yPix: number) {\n    const yDiff = config.yMax - config.yMin;\n    const yPixPerUnit = height / yDiff;\n    return -(yPix - height) / yPixPerUnit + config.yMin;\n  }\n  drawLine(context: CanvasRenderingContext2D | OffscreenCanvasRenderingContext2D, x1: number, y1: number, x2: number, y2: number) {\n    context.beginPath();\n    context.moveTo(x1, y1);\n    context.lineTo(x2, y2);\n    context.stroke();\n  }\n  getGridPointDist(min: number, max: number, factor: number) {\n    const diff = max - min;\n    let result = Math.pow(10.0, Math.ceil(Math.log(diff) / Math.log(10.0)) - 1);\n    switch (Math.floor(diff / result)) {\n      case 9: result /= 2; break;\n      case 8: result /= 3; break;\n      case 7: result /= 4; break;\n      case 6: result /= 5; break;\n      case 5: result /= 6; break;\n      case 4: result /= 7; break;\n      case 3: result /= 8; break;\n      case 2: result /= 9; break;\n      case 1: result /= 10; break;\n    }\n    result *= factor;\n    return result;\n  }\n  drawGrid(context: CanvasRenderingContext2D | OffscreenCanvasRenderingContext2D, width: number, height: number) {\n    context.clearRect(0, 0, width, height);\n    const xDiff = this.props.config.xMax - this.props.config.xMin;\n    const xPixPerUnit = width / xDiff;\n    const yDiff = this.props.config.yMax - this.props.config.yMin;\n    const yPixPerUnit = height / yDiff;\n    const xF = this.getGridPointDist(this.props.config.xMin, this.props.config.xMax, this.props.config.gX);\n    const yF = this.getGridPointDist(this.props.config.yMin, this.props.config.yMax, this.props.config.gY);\n    this.plotStyle.axisColor = get(this.plotStyle.axisColor, '#000000');\n    this.plotStyle.gridColor = get(this.plotStyle.gridColor, '#b0b0b0');\n\n    let startValue = Math.ceil(this.props.config.xMin / xF) * xF;\n    let number = Math.round(Math.floor(xDiff / xF)) + 1;\n    let axisPosition;\n    if (this.props.config.yMin < 0 && this.props.config.yMax > 0) {\n      axisPosition = height + this.props.config.yMin * yPixPerUnit + 12;\n    } else {\n      axisPosition = height - 12;\n    }\n    context.strokeStyle = this.plotStyle.gridColor;\n    for (let i = 0; i < number; i++) {\n      if (Math.abs(startValue) < xF * 0.5) {\n        context.strokeStyle = this.plotStyle.axisColor;\n      }\n      const position = Math.round((startValue - this.props.config.xMin) * xPixPerUnit);\n      this.drawLine(context, position, 0, position, height);\n      context.fillStyle = this.plotStyle.axisColor;\n      const text = Math.round(startValue * 100) / 100;\n      context.fillText(text + '', position + 4, axisPosition);\n      context.strokeStyle = this.plotStyle.gridColor;\n      startValue += xF;\n    }\n\n    startValue = Math.ceil(this.props.config.yMin / yF) * yF;\n    number = Math.round(Math.floor(yDiff / yF)) + 1;\n    if (this.props.config.xMin < 0 && this.props.config.xMax > 0) {\n      axisPosition = -this.props.config.xMin * xPixPerUnit + 5;\n    } else {\n      axisPosition = 5;\n    }\n    context.strokeStyle = this.plotStyle.gridColor;\n    for (let i = 0; i < number; i++) {\n      if (Math.abs(startValue) < yF * 0.5) {\n        context.strokeStyle = this.plotStyle.axisColor;\n      }\n      const position = height - Math.round((startValue - this.props.config.yMin) * yPixPerUnit);\n      this.drawLine(context, 0, position, width, position);\n      let axisVal = Math.round(startValue * 100) / 100;\n      if (axisVal !== 0) {\n        context.fillStyle = this.plotStyle.axisColor;\n        const text = axisVal;\n        context.fillText(text + '', axisPosition, position - 4);\n      }\n      context.strokeStyle = this.plotStyle.gridColor;\n      startValue += yF;\n    }\n  }\n  functionRenderer(context: CanvasRenderingContext2D | OffscreenCanvasRenderingContext2D, width: number, height: number) {\n    if (this.props.points.length <= 0) return;\n    context.clearRect(0, 0, width, height);\n    context.strokeStyle = get(this.plotStyle.plotColor, '#000');\n    context.lineWidth = 2;\n    context.beginPath();\n    let startX = this.xCoordToPix(this.props.config, width, this.props.points[0].x);\n    let startY = this.yCoordToPix(this.props.config, height, this.props.points[0].y);\n    context.moveTo(startX, startY);\n    for (let i = 1; i < this.props.points.length; i += 1) {\n      const x = this.xCoordToPix(this.props.config, width, this.props.points[i].x);\n      const y = this.yCoordToPix(this.props.config, height, this.props.points[i].y);\n      context.lineTo(x, y);\n    }\n    context.stroke();\n  }\n  setupUI(height: number) {\n    this.display = this.createDisplay(height, [\n      { auto: true, renderer: (context, width, height) => this.gridRenderer(context, width, height) },\n      { auto: false }\n    ]);\n    this.polarToggle = this.createToggle({ propName: 'polar', height: 10, style: { grow: .1 } });\n    this.ui.append([\n      this.display,\n      this.createHozLayout([this.createLabel('Polar ?', { style: { grow: .2 } }), this.polarToggle], { style: { spacing: 5 } })\n    ]);\n  }\n}\n\nexport interface PlotStyle {\n  axisColor?: string, gridColor?: string, plotColor?: string\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector2 } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { Color } from \"../../core/color\";\nimport { InputType } from \"../../ui/input\";\nimport { DisplayStyle } from \"../../ui/display\";\nimport { Node } from \"../../core/node\";\n\nexport class LineChartMini extends Node {\n\n  static DefaultProps = { size: 10 };\n\n  constructor(flow: Flow, height: number, colors: string[], displayStyle: DisplayStyle, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'Line Chart Mini', options.position || new Vector2(50, 50), options.width || 150,\n      [{ name: 'data', dataType: 'array' }], [],\n      {\n        props: options.props ? { ...LineChartMini.DefaultProps, ...options.props } : LineChartMini.DefaultProps,\n        style: options.style || { rowHeight: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.setupUI(height, colors, displayStyle);\n  }\n\n  setupUI(height: number, colors: string[], displayStyle: DisplayStyle) {\n    let display = this.createDisplay(height, [{\n      auto: true,\n      renderer: (context, wdth, hght) => {\n        let data = this.getInputs();\n        if (!data || !data[0]) return true;\n        data[0].forEach((input: number[], index: number) => {\n          if (!input) return;\n          let spacing = Number((wdth / (this.props.size - 1)).toFixed(2));\n          context.strokeStyle = colors[index] || Color.Random().rgbaCSSString;\n          context.lineWidth = 2;\n          context.beginPath();\n          context.moveTo(0, (1 - input[0]) * hght);\n          for (let i = 1; i < input.length; i += 1) context.lineTo(i * spacing, (1 - input[i]) * hght);\n          context.stroke();\n        });\n        return true;\n      }\n    }], { style: displayStyle ? displayStyle : {} });\n    this.ui.append(display);\n    let sizeInput = this.createInput({ propName: 'size', input: true, output: true, height: 20, style: { type: InputType.Number, grow: .5 } });\n    this.ui.append(this.createHozLayout([\n      this.createLabel('Size'),\n      sizeInput\n    ], { style: { spacing: 20 } }));\n  }\n}\n","/*Copyright (c) 2012 DinahMoe AB & Oskar Eriksson\n\n  Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation\n  files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy,\n  modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software\n  is furnished to do so, subject to the following conditions:\n\n  The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n\n  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n  DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE\n  OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n*/\n\nvar userContext,\n  userInstance,\n  pipe = function (param, val) {\n    param.value = val;\n  },\n  Super = Object.create(null, {\n    activate: {\n      writable: true,\n      value: function (doActivate) {\n        if (doActivate) {\n          this.input.disconnect();\n          this.input.connect(this.activateNode);\n          if (this.activateCallback) {\n            this.activateCallback(doActivate);\n          }\n        } else {\n          this.input.disconnect();\n          this.input.connect(this.output);\n        }\n      }\n    },\n    bypass: {\n      get: function () {\n        return this._bypass;\n      },\n      set: function (value) {\n        if (this._lastBypassValue === value) {\n          return;\n        }\n        this._bypass = value;\n        this.activate(!value);\n        this._lastBypassValue = value;\n      }\n    },\n    connect: {\n      value: function (target) {\n        this.output.connect(target);\n      }\n    },\n    disconnect: {\n      value: function (target) {\n        this.output.disconnect(target);\n      }\n    },\n    connectInOrder: {\n      value: function (nodeArray) {\n        var i = nodeArray.length - 1;\n        while (i--) {\n          if (!nodeArray[i].connect) {\n            return console.error(\"AudioNode.connectInOrder: TypeError: Not an AudioNode.\", nodeArray[i]);\n          }\n          if (nodeArray[i + 1].input) {\n            nodeArray[i].connect(nodeArray[i + 1].input);\n          } else {\n            nodeArray[i].connect(nodeArray[i + 1]);\n          }\n        }\n      }\n    },\n    getDefaults: {\n      value: function () {\n        var result = {};\n        for (var key in this.defaults) {\n          result[key] = this.defaults[key].value;\n        }\n        return result;\n      }\n    },\n    automate: {\n      value: function (property, value, duration, startTime) {\n        var start = startTime ? ~~(startTime / 1000) : userContext.currentTime,\n          dur = duration ? ~~(duration / 1000) : 0,\n          _is = this.defaults[property],\n          param = this[property],\n          method;\n\n        if (param) {\n          if (_is.automatable) {\n            if (!duration) {\n              method = \"setValueAtTime\";\n            } else {\n              method = \"linearRampToValueAtTime\";\n              param.cancelScheduledValues(start);\n              param.setValueAtTime(param.value, start);\n            }\n            param[method](value, dur + start);\n          } else {\n            param = value;\n          }\n        } else {\n          console.error(\"Invalid Property for \" + this.name);\n        }\n      }\n    }\n  }),\n  FLOAT = \"float\",\n  BOOLEAN = \"boolean\",\n  STRING = \"string\",\n  INT = \"int\";\n\nif (typeof module !== \"undefined\" && module.exports) {\n  module.exports = Tuna;\n} else if (typeof define === \"function\") {\n  window.define(\"Tuna\", definition);\n} else {\n  window.Tuna = Tuna;\n}\n\nfunction definition() {\n  return Tuna;\n}\n\nfunction Tuna(context) {\n  if (!(this instanceof Tuna)) {\n    return new Tuna(context);\n  }\n\n  var _window = typeof window === \"undefined\" ? {} : window;\n\n  if (!_window.AudioContext) {\n    _window.AudioContext = _window.webkitAudioContext;\n  }\n  if (!context) {\n    console.log(\"tuna.js: Missing audio context! Creating a new context for you.\");\n    context = _window.AudioContext && (new _window.AudioContext());\n  }\n  if (!context) {\n    throw new Error(\"Tuna cannot initialize because this environment does not support web audio.\");\n  }\n  connectify(context);\n  userContext = context;\n  userInstance = this;\n}\n\nfunction connectify(context) {\n  if (context.__connectified__ === true) return;\n\n  var gain = context.createGain(),\n    proto = Object.getPrototypeOf(Object.getPrototypeOf(gain)),\n    oconnect = proto.connect;\n\n  proto.connect = shimConnect;\n  context.__connectified__ = true; // Prevent overriding connect more than once\n\n  function shimConnect() {\n    var node = arguments[0];\n    arguments[0] = Super.isPrototypeOf ? (Super.isPrototypeOf(node) ? node.input : node) : (node.input || node);\n    oconnect.apply(this, arguments);\n    return node;\n  }\n}\n\nfunction dbToWAVolume(db) {\n  return Math.max(0, Math.round(100 * Math.pow(2, db / 6)) / 100);\n}\n\nfunction fmod(x, y) {\n  // http://kevin.vanzonneveld.net\n  // *     example 1: fmod(5.7, 1.3);\n  // *     returns 1: 0.5\n  var tmp, tmp2, p = 0,\n    pY = 0,\n    l = 0.0,\n    l2 = 0.0;\n\n  tmp = x.toExponential().match(/^.\\.?(.*)e(.+)$/);\n  p = parseInt(tmp[2], 10) - (tmp[1] + \"\").length;\n  tmp = y.toExponential().match(/^.\\.?(.*)e(.+)$/);\n  pY = parseInt(tmp[2], 10) - (tmp[1] + \"\").length;\n\n  if (pY > p) {\n    p = pY;\n  }\n\n  tmp2 = (x % y);\n\n  if (p < -100 || p > 20) {\n    // toFixed will give an out of bound error so we fix it like this:\n    l = Math.round(Math.log(tmp2) / Math.log(10));\n    l2 = Math.pow(10, l);\n\n    return (tmp2 / l2).toFixed(l - p) * l2;\n  } else {\n    return parseFloat(tmp2.toFixed(-p));\n  }\n}\n\nfunction sign(x) {\n  if (x === 0) {\n    return 1;\n  } else {\n    return Math.abs(x) / x;\n  }\n}\n\nfunction tanh(n) {\n  return (Math.exp(n) - Math.exp(-n)) / (Math.exp(n) + Math.exp(-n));\n}\n\nfunction initValue(userVal, defaultVal) {\n  return userVal === undefined ? defaultVal : userVal;\n}\n\nTuna.prototype.Bitcrusher = function (properties) {\n  if (!properties) {\n    properties = this.getDefaults();\n  }\n  this.bufferSize = properties.bufferSize || this.defaults.bufferSize.value;\n\n  this.input = userContext.createGain();\n  this.activateNode = userContext.createGain();\n  this.processor = userContext.createScriptProcessor(this.bufferSize, 1, 1);\n  this.output = userContext.createGain();\n\n  this.activateNode.connect(this.processor);\n  this.processor.connect(this.output);\n\n  var phaser = 0,\n    last = 0,\n    input, output, step, i, length;\n  this.processor.onaudioprocess = function (e) {\n    input = e.inputBuffer.getChannelData(0),\n      output = e.outputBuffer.getChannelData(0),\n      step = Math.pow(1 / 2, this.bits);\n    length = input.length;\n    for (i = 0; i < length; i++) {\n      phaser += this.normfreq;\n      if (phaser >= 1.0) {\n        phaser -= 1.0;\n        last = step * Math.floor(input[i] / step + 0.5);\n      }\n      output[i] = last;\n    }\n  };\n\n  this.bits = properties.bits || this.defaults.bits.value;\n  this.normfreq = initValue(properties.normfreq, this.defaults.normfreq.value);\n  this.bypass = properties.bypass || this.defaults.bypass.value;\n};\nTuna.prototype.Bitcrusher.prototype = Object.create(Super, {\n  name: {\n    value: \"Bitcrusher\"\n  },\n  defaults: {\n    writable: true,\n    value: {\n      bits: {\n        value: 4,\n        min: 1,\n        max: 16,\n        automatable: false,\n        type: INT\n      },\n      bufferSize: {\n        value: 4096,\n        min: 256,\n        max: 16384,\n        automatable: false,\n        type: INT\n      },\n      bypass: {\n        value: false,\n        automatable: false,\n        type: BOOLEAN\n      },\n      normfreq: {\n        value: 0.1,\n        min: 0.0001,\n        max: 1.0,\n        automatable: false,\n        type: FLOAT\n      }\n    }\n  },\n  bits: {\n    enumerable: true,\n    get: function () {\n      return this.processor.bits;\n    },\n    set: function (value) {\n      this.processor.bits = value;\n    }\n  },\n  normfreq: {\n    enumerable: true,\n    get: function () {\n      return this.processor.normfreq;\n    },\n    set: function (value) {\n      this.processor.normfreq = value;\n    }\n  }\n});\n\nTuna.prototype.Cabinet = function (properties) {\n  if (!properties) {\n    properties = this.getDefaults();\n  }\n  this.input = userContext.createGain();\n  this.activateNode = userContext.createGain();\n  this.convolver = this.newConvolver(properties.impulsePath || \"../impulses/impulse_guitar.wav\");\n  this.makeupNode = userContext.createGain();\n  this.output = userContext.createGain();\n\n  this.activateNode.connect(this.convolver.input);\n  this.convolver.output.connect(this.makeupNode);\n  this.makeupNode.connect(this.output);\n  //don't use makeupGain setter at init to avoid smoothing\n  this.makeupNode.gain.value = initValue(properties.makeupGain, this.defaults.makeupGain.value);\n  this.bypass = properties.bypass || this.defaults.bypass.value;\n};\nTuna.prototype.Cabinet.prototype = Object.create(Super, {\n  name: {\n    value: \"Cabinet\"\n  },\n  defaults: {\n    writable: true,\n    value: {\n      makeupGain: {\n        value: 1,\n        min: 0,\n        max: 20,\n        automatable: true,\n        type: FLOAT\n      },\n      bypass: {\n        value: false,\n        automatable: false,\n        type: BOOLEAN\n      }\n    }\n  },\n  makeupGain: {\n    enumerable: true,\n    get: function () {\n      return this.makeupNode.gain;\n    },\n    set: function (value) {\n      this.makeupNode.gain.setTargetAtTime(value, userContext.currentTime, 0.01);\n    }\n  },\n  newConvolver: {\n    value: function (impulsePath) {\n      return new userInstance.Convolver({\n        impulse: impulsePath,\n        dryLevel: 0,\n        wetLevel: 1\n      });\n    }\n  }\n});\n\nTuna.prototype.Chorus = function (properties) {\n  if (!properties) {\n    properties = this.getDefaults();\n  }\n  this.input = userContext.createGain();\n  this.attenuator = this.activateNode = userContext.createGain();\n  this.splitter = userContext.createChannelSplitter(2);\n  this.delayL = userContext.createDelay();\n  this.delayR = userContext.createDelay();\n  this.feedbackGainNodeLR = userContext.createGain();\n  this.feedbackGainNodeRL = userContext.createGain();\n  this.merger = userContext.createChannelMerger(2);\n  this.output = userContext.createGain();\n  this.delayL.delayTime = 0;\n  this.delayR.delayTime = 0;\n\n  this.lfoL = new userInstance.LFO({\n    target: this.delayL.delayTime,\n    callback: pipe\n  });\n  this.lfoR = new userInstance.LFO({\n    target: this.delayR.delayTime,\n    callback: pipe\n  });\n\n  this.input.connect(this.attenuator);\n  this.attenuator.connect(this.output);\n  this.attenuator.connect(this.splitter);\n  this.splitter.connect(this.delayL, 0);\n  this.splitter.connect(this.delayR, 1);\n  this.delayL.connect(this.feedbackGainNodeLR);\n  this.delayR.connect(this.feedbackGainNodeRL);\n  this.feedbackGainNodeLR.connect(this.delayR);\n  this.feedbackGainNodeRL.connect(this.delayL);\n  this.delayL.connect(this.merger, 0, 0);\n  this.delayR.connect(this.merger, 0, 1);\n  this.merger.connect(this.output);\n\n  this.feedback = initValue(properties.feedback, this.defaults.feedback.value);\n  this.rate = initValue(properties.rate, this.defaults.rate.value);\n  this.delay = initValue(properties.delay, this.defaults.delay.value);\n  this.depth = initValue(properties.depth, this.defaults.depth.value);\n  this.lfoR.phase = Math.PI / 2;\n  this.attenuator.gain.value = 0.6934; // 1 / (10 ^ (((20 * log10(3)) / 3) / 20))\n  this.lfoL.activate(true);\n  this.lfoR.activate(true);\n  this.bypass = properties.bypass || this.defaults.bypass.value;\n};\nTuna.prototype.Chorus.prototype = Object.create(Super, {\n  name: {\n    value: \"Chorus\"\n  },\n  defaults: {\n    writable: true,\n    value: {\n      feedback: {\n        value: 0.4,\n        min: 0,\n        max: 0.95,\n        automatable: false,\n        type: FLOAT\n      },\n      delay: {\n        value: 0.0045,\n        min: 0,\n        max: 1,\n        automatable: false,\n        type: FLOAT\n      },\n      depth: {\n        value: 0.7,\n        min: 0,\n        max: 1,\n        automatable: false,\n        type: FLOAT\n      },\n      rate: {\n        value: 1.5,\n        min: 0,\n        max: 8,\n        automatable: false,\n        type: FLOAT\n      },\n      bypass: {\n        value: false,\n        automatable: false,\n        type: BOOLEAN\n      }\n    }\n  },\n  delay: {\n    enumerable: true,\n    get: function () {\n      return this._delay;\n    },\n    set: function (value) {\n      this._delay = 0.0002 * (Math.pow(10, value) * 2);\n      this.lfoL.offset = this._delay;\n      this.lfoR.offset = this._delay;\n      this._depth = this._depth;\n    }\n  },\n  depth: {\n    enumerable: true,\n    get: function () {\n      return this._depth;\n    },\n    set: function (value) {\n      this._depth = value;\n      this.lfoL.oscillation = this._depth * this._delay;\n      this.lfoR.oscillation = this._depth * this._delay;\n    }\n  },\n  feedback: {\n    enumerable: true,\n    get: function () {\n      return this._feedback;\n    },\n    set: function (value) {\n      this._feedback = value;\n      this.feedbackGainNodeLR.gain.setTargetAtTime(this._feedback, userContext.currentTime, 0.01);\n      this.feedbackGainNodeRL.gain.setTargetAtTime(this._feedback, userContext.currentTime, 0.01);\n    }\n  },\n  rate: {\n    enumerable: true,\n    get: function () {\n      return this._rate;\n    },\n    set: function (value) {\n      this._rate = value;\n      this.lfoL.frequency = this._rate;\n      this.lfoR.frequency = this._rate;\n    }\n  }\n});\n\nTuna.prototype.Compressor = function (properties) {\n  if (!properties) {\n    properties = this.getDefaults();\n  }\n  this.input = userContext.createGain();\n  this.compNode = this.activateNode = userContext.createDynamicsCompressor();\n  this.makeupNode = userContext.createGain();\n  this.output = userContext.createGain();\n\n  this.compNode.connect(this.makeupNode);\n  this.makeupNode.connect(this.output);\n\n  this.automakeup = initValue(properties.automakeup, this.defaults.automakeup.value);\n\n  //don't use makeupGain setter at initialization to avoid smoothing\n  if (this.automakeup) {\n    this.makeupNode.gain.value = dbToWAVolume(this.computeMakeup());\n  } else {\n    this.makeupNode.gain.value = dbToWAVolume(initValue(properties.makeupGain, this.defaults.makeupGain.value));\n  }\n  this.threshold = initValue(properties.threshold, this.defaults.threshold.value);\n  this.release = initValue(properties.release, this.defaults.release.value);\n  this.attack = initValue(properties.attack, this.defaults.attack.value);\n  this.ratio = properties.ratio || this.defaults.ratio.value;\n  this.knee = initValue(properties.knee, this.defaults.knee.value);\n  this.bypass = properties.bypass || this.defaults.bypass.value;\n};\nTuna.prototype.Compressor.prototype = Object.create(Super, {\n  name: {\n    value: \"Compressor\"\n  },\n  defaults: {\n    writable: true,\n    value: {\n      threshold: {\n        value: -20,\n        min: -60,\n        max: 0,\n        automatable: true,\n        type: FLOAT\n      },\n      release: {\n        value: 250,\n        min: 10,\n        max: 2000,\n        automatable: true,\n        type: FLOAT\n      },\n      makeupGain: {\n        value: 1,\n        min: 1,\n        max: 100,\n        automatable: true,\n        type: FLOAT\n      },\n      attack: {\n        value: 1,\n        min: 0,\n        max: 1000,\n        automatable: true,\n        type: FLOAT\n      },\n      ratio: {\n        value: 4,\n        min: 1,\n        max: 50,\n        automatable: true,\n        type: FLOAT\n      },\n      knee: {\n        value: 5,\n        min: 0,\n        max: 40,\n        automatable: true,\n        type: FLOAT\n      },\n      automakeup: {\n        value: false,\n        automatable: false,\n        type: BOOLEAN\n      },\n      bypass: {\n        value: false,\n        automatable: false,\n        type: BOOLEAN\n      }\n    }\n  },\n  computeMakeup: {\n    value: function () {\n      var magicCoefficient = 4, // raise me if the output is too hot\n        c = this.compNode;\n      return -(c.threshold.value - c.threshold.value / c.ratio.value) / magicCoefficient;\n    }\n  },\n  automakeup: {\n    enumerable: true,\n    get: function () {\n      return this._automakeup;\n    },\n    set: function (value) {\n      this._automakeup = value;\n      if (this._automakeup) this.makeupGain = this.computeMakeup();\n    }\n  },\n  threshold: {\n    enumerable: true,\n    get: function () {\n      return this.compNode.threshold;\n    },\n    set: function (value) {\n      this.compNode.threshold.value = value;\n      if (this._automakeup) this.makeupGain = this.computeMakeup();\n    }\n  },\n  ratio: {\n    enumerable: true,\n    get: function () {\n      return this.compNode.ratio;\n    },\n    set: function (value) {\n      this.compNode.ratio.value = value;\n      if (this._automakeup) this.makeupGain = this.computeMakeup();\n    }\n  },\n  knee: {\n    enumerable: true,\n    get: function () {\n      return this.compNode.knee;\n    },\n    set: function (value) {\n      this.compNode.knee.value = value;\n      if (this._automakeup) this.makeupGain = this.computeMakeup();\n    }\n  },\n  attack: {\n    enumerable: true,\n    get: function () {\n      return this.compNode.attack;\n    },\n    set: function (value) {\n      this.compNode.attack.value = value / 1000;\n    }\n  },\n  release: {\n    enumerable: true,\n    get: function () {\n      return this.compNode.release;\n    },\n    set: function (value) {\n      this.compNode.release.value = value / 1000;\n    }\n  },\n  makeupGain: {\n    enumerable: true,\n    get: function () {\n      return this.makeupNode.gain;\n    },\n    set: function (value) {\n      this.makeupNode.gain.setTargetAtTime(dbToWAVolume(value), userContext.currentTime, 0.01);\n    }\n  }\n});\n\nTuna.prototype.Convolver = function (properties) {\n  if (!properties) {\n    properties = this.getDefaults();\n  }\n  this.input = userContext.createGain();\n  this.activateNode = userContext.createGain();\n  this.convolver = userContext.createConvolver();\n  this.dry = userContext.createGain();\n  this.filterLow = userContext.createBiquadFilter();\n  this.filterHigh = userContext.createBiquadFilter();\n  this.wet = userContext.createGain();\n  this.output = userContext.createGain();\n\n  this.activateNode.connect(this.filterLow);\n  this.activateNode.connect(this.dry);\n  this.filterLow.connect(this.filterHigh);\n  this.filterHigh.connect(this.convolver);\n  this.convolver.connect(this.wet);\n  this.wet.connect(this.output);\n  this.dry.connect(this.output);\n\n  //don't use setters at init to avoid smoothing\n  this.dry.gain.value = initValue(properties.dryLevel, this.defaults.dryLevel.value);\n  this.wet.gain.value = initValue(properties.wetLevel, this.defaults.wetLevel.value);\n  this.filterHigh.frequency.value = properties.highCut || this.defaults.highCut.value;\n  this.filterLow.frequency.value = properties.lowCut || this.defaults.lowCut.value;\n  this.output.gain.value = initValue(properties.level, this.defaults.level.value);\n  this.filterHigh.type = \"lowpass\";\n  this.filterLow.type = \"highpass\";\n  this.buffer = properties.impulse || \"../impulses/ir_rev_short.wav\";\n  this.bypass = properties.bypass || this.defaults.bypass.value;\n};\nTuna.prototype.Convolver.prototype = Object.create(Super, {\n  name: {\n    value: \"Convolver\"\n  },\n  defaults: {\n    writable: true,\n    value: {\n      highCut: {\n        value: 22050,\n        min: 20,\n        max: 22050,\n        automatable: true,\n        type: FLOAT\n      },\n      lowCut: {\n        value: 20,\n        min: 20,\n        max: 22050,\n        automatable: true,\n        type: FLOAT\n      },\n      dryLevel: {\n        value: 1,\n        min: 0,\n        max: 1,\n        automatable: true,\n        type: FLOAT\n      },\n      wetLevel: {\n        value: 1,\n        min: 0,\n        max: 1,\n        automatable: true,\n        type: FLOAT\n      },\n      level: {\n        value: 1,\n        min: 0,\n        max: 1,\n        automatable: true,\n        type: FLOAT\n      },\n      bypass: {\n        value: false,\n        automatable: false,\n        type: BOOLEAN\n      }\n    }\n  },\n  lowCut: {\n    get: function () {\n      return this.filterLow.frequency;\n    },\n    set: function (value) {\n      this.filterLow.frequency.setTargetAtTime(value, userContext.currentTime, 0.01);\n    }\n  },\n  highCut: {\n    get: function () {\n      return this.filterHigh.frequency;\n    },\n    set: function (value) {\n      this.filterHigh.frequency.setTargetAtTime(value, userContext.currentTime, 0.01);\n    }\n  },\n  level: {\n    get: function () {\n      return this.output.gain;\n    },\n    set: function (value) {\n      this.output.gain.setTargetAtTime(value, userContext.currentTime, 0.01);\n    }\n  },\n  dryLevel: {\n    get: function () {\n      return this.dry.gain;\n    },\n    set: function (value) {\n      this.dry.gain.setTargetAtTime(value, userContext.currentTime, 0.01);\n    }\n  },\n  wetLevel: {\n    get: function () {\n      return this.wet.gain;\n    },\n    set: function (value) {\n      this.wet.gain.setTargetAtTime(value, userContext.currentTime, 0.01);\n    }\n  },\n  buffer: {\n    enumerable: false,\n    get: function () {\n      return this.convolver.buffer;\n    },\n    set: function (impulse) {\n      var convolver = this.convolver,\n        xhr = new XMLHttpRequest();\n      if (!impulse) {\n        console.log(\"Tuna.Convolver.setBuffer: Missing impulse path!\");\n        return;\n      }\n      xhr.open(\"GET\", impulse, true);\n      xhr.responseType = \"arraybuffer\";\n      xhr.onreadystatechange = function () {\n        if (xhr.readyState === 4) {\n          if (xhr.status < 300 && xhr.status > 199 || xhr.status === 302) {\n            userContext.decodeAudioData(xhr.response, function (buffer) {\n              convolver.buffer = buffer;\n            }, function (e) {\n              if (e) console.log(\"Tuna.Convolver.setBuffer: Error decoding data\" + e);\n            });\n          }\n        }\n      };\n      xhr.send(null);\n    }\n  }\n});\n\nTuna.prototype.Delay = function (properties) {\n  if (!properties) {\n    properties = this.getDefaults();\n  }\n  this.input = userContext.createGain();\n  this.activateNode = userContext.createGain();\n  this.dry = userContext.createGain();\n  this.wet = userContext.createGain();\n  this.filter = userContext.createBiquadFilter();\n  this.delay = userContext.createDelay(10);\n  this.feedbackNode = userContext.createGain();\n  this.output = userContext.createGain();\n\n  this.activateNode.connect(this.delay);\n  this.activateNode.connect(this.dry);\n  this.delay.connect(this.filter);\n  this.filter.connect(this.feedbackNode);\n  this.feedbackNode.connect(this.delay);\n  this.feedbackNode.connect(this.wet);\n  this.wet.connect(this.output);\n  this.dry.connect(this.output);\n\n  this.delayTime = properties.delayTime || this.defaults.delayTime.value;\n  //don't use setters at init to avoid smoothing\n  this.feedbackNode.gain.value = initValue(properties.feedback, this.defaults.feedback.value);\n  this.wet.gain.value = initValue(properties.wetLevel, this.defaults.wetLevel.value);\n  this.dry.gain.value = initValue(properties.dryLevel, this.defaults.dryLevel.value);\n  this.filter.frequency.value = properties.cutoff || this.defaults.cutoff.value;\n  this.filter.type = \"lowpass\";\n  this.bypass = properties.bypass || this.defaults.bypass.value;\n};\nTuna.prototype.Delay.prototype = Object.create(Super, {\n  name: {\n    value: \"Delay\"\n  },\n  defaults: {\n    writable: true,\n    value: {\n      delayTime: {\n        value: 100,\n        min: 20,\n        max: 1000,\n        automatable: false,\n        type: FLOAT\n      },\n      feedback: {\n        value: 0.45,\n        min: 0,\n        max: 0.9,\n        automatable: true,\n        type: FLOAT\n      },\n      cutoff: {\n        value: 20000,\n        min: 20,\n        max: 20000,\n        automatable: true,\n        type: FLOAT\n      },\n      wetLevel: {\n        value: 0.5,\n        min: 0,\n        max: 1,\n        automatable: true,\n        type: FLOAT\n      },\n      dryLevel: {\n        value: 1,\n        min: 0,\n        max: 1,\n        automatable: true,\n        type: FLOAT\n      },\n      bypass: {\n        value: false,\n        automatable: false,\n        type: BOOLEAN\n      }\n    }\n  },\n  delayTime: {\n    enumerable: true,\n    get: function () {\n      return this.delay.delayTime;\n    },\n    set: function (value) {\n      this.delay.delayTime.value = value / 1000;\n    }\n  },\n  wetLevel: {\n    enumerable: true,\n    get: function () {\n      return this.wet.gain;\n    },\n    set: function (value) {\n      this.wet.gain.setTargetAtTime(value, userContext.currentTime, 0.01);\n    }\n  },\n  dryLevel: {\n    enumerable: true,\n    get: function () {\n      return this.dry.gain;\n    },\n    set: function (value) {\n      this.dry.gain.setTargetAtTime(value, userContext.currentTime, 0.01);\n    }\n  },\n  feedback: {\n    enumerable: true,\n    get: function () {\n      return this.feedbackNode.gain;\n    },\n    set: function (value) {\n      this.feedbackNode.gain.setTargetAtTime(value, userContext.currentTime, 0.01);\n    }\n  },\n  cutoff: {\n    enumerable: true,\n    get: function () {\n      return this.filter.frequency;\n    },\n    set: function (value) {\n      this.filter.frequency.setTargetAtTime(value, userContext.currentTime, 0.01);\n    }\n  }\n});\n\nTuna.prototype.Filter = function (properties) {\n  if (!properties) {\n    properties = this.getDefaults();\n  }\n  this.input = userContext.createGain();\n  this.activateNode = userContext.createGain();\n  this.filter = userContext.createBiquadFilter();\n  this.output = userContext.createGain();\n\n  this.activateNode.connect(this.filter);\n  this.filter.connect(this.output);\n\n  //don't use setters for freq and gain at init to avoid smoothing\n  this.filter.frequency.value = properties.frequency || this.defaults.frequency.value;\n  this.Q = properties.resonance || this.defaults.Q.value;\n  this.filterType = initValue(properties.filterType, this.defaults.filterType.value);\n  this.filter.gain.value = initValue(properties.gain, this.defaults.gain.value);\n  this.bypass = properties.bypass || this.defaults.bypass.value;\n};\nTuna.prototype.Filter.prototype = Object.create(Super, {\n  name: {\n    value: \"Filter\"\n  },\n  defaults: {\n    writable: true,\n    value: {\n      frequency: {\n        value: 800,\n        min: 20,\n        max: 22050,\n        automatable: true,\n        type: FLOAT\n      },\n      Q: {\n        value: 1,\n        min: 0.001,\n        max: 100,\n        automatable: true,\n        type: FLOAT\n      },\n      gain: {\n        value: 0,\n        min: -40,\n        max: 40,\n        automatable: true,\n        type: FLOAT\n      },\n      bypass: {\n        value: false,\n        automatable: false,\n        type: BOOLEAN\n      },\n      filterType: {\n        value: \"lowpass\",\n        automatable: false,\n        type: STRING\n      }\n    }\n  },\n  filterType: {\n    enumerable: true,\n    get: function () {\n      return this.filter.type;\n    },\n    set: function (value) {\n      this.filter.type = value;\n    }\n  },\n  Q: {\n    enumerable: true,\n    get: function () {\n      return this.filter.Q;\n    },\n    set: function (value) {\n      this.filter.Q.value = value;\n    }\n  },\n  gain: {\n    enumerable: true,\n    get: function () {\n      return this.filter.gain;\n    },\n    set: function (value) {\n      this.filter.gain.setTargetAtTime(value, userContext.currentTime, 0.01);\n    }\n  },\n  frequency: {\n    enumerable: true,\n    get: function () {\n      return this.filter.frequency;\n    },\n    set: function (value) {\n      this.filter.frequency.setTargetAtTime(value, userContext.currentTime, 0.01);\n    }\n  }\n});\n\nTuna.prototype.Gain = function (properties) {\n  if (!properties) {\n    properties = this.getDefaults();\n  }\n\n  this.input = userContext.createGain();\n  this.activateNode = userContext.createGain();\n  this.gainNode = userContext.createGain();\n  this.output = userContext.createGain();\n\n  this.activateNode.connect(this.gainNode);\n  this.gainNode.connect(this.output);\n\n  //don't use setter at init to avoid smoothing\n  this.gainNode.gain.value = initValue(properties.gain, this.defaults.gain.value);\n  this.bypass = properties.bypass || this.defaults.bypass.value;\n};\nTuna.prototype.Gain.prototype = Object.create(Super, {\n  name: {\n    value: \"Gain\"\n  },\n  defaults: {\n    writable: true,\n    value: {\n      bypass: {\n        value: false,\n        automatable: false,\n        type: BOOLEAN\n      },\n      gain: {\n        value: 1.0,\n        automatable: true,\n        type: FLOAT\n      }\n    }\n  },\n  gain: {\n    enumerable: true,\n    get: function () {\n      return this.gainNode.gain;\n    },\n    set: function (value) {\n      this.gainNode.gain.setTargetAtTime(value, userContext.currentTime, 0.01);\n    }\n  }\n});\n\nTuna.prototype.MoogFilter = function (properties) {\n  if (!properties) {\n    properties = this.getDefaults();\n  }\n  this.bufferSize = properties.bufferSize || this.defaults.bufferSize.value;\n\n  this.input = userContext.createGain();\n  this.activateNode = userContext.createGain();\n  this.processor = userContext.createScriptProcessor(this.bufferSize, 1, 1);\n  this.output = userContext.createGain();\n\n  this.activateNode.connect(this.processor);\n  this.processor.connect(this.output);\n\n  var in1, in2, in3, in4, out1, out2, out3, out4;\n  in1 = in2 = in3 = in4 = out1 = out2 = out3 = out4 = 0.0;\n  var input, output, f, fb, i, length, inputFactor;\n  this.processor.onaudioprocess = function (e) {\n    input = e.inputBuffer.getChannelData(0);\n    output = e.outputBuffer.getChannelData(0);\n    f = this.cutoff * 1.16;\n    inputFactor = 0.35013 * (f * f) * (f * f);\n    fb = this.resonance * (1.0 - 0.15 * f * f);\n    length = input.length;\n    for (i = 0; i < length; i++) {\n      input[i] -= out4 * fb;\n      input[i] *= inputFactor;\n      out1 = input[i] + 0.3 * in1 + (1 - f) * out1; // Pole 1\n      in1 = input[i];\n      out2 = out1 + 0.3 * in2 + (1 - f) * out2; // Pole 2\n      in2 = out1;\n      out3 = out2 + 0.3 * in3 + (1 - f) * out3; // Pole 3\n      in3 = out2;\n      out4 = out3 + 0.3 * in4 + (1 - f) * out4; // Pole 4\n      in4 = out3;\n      output[i] = out4;\n    }\n  };\n\n  this.cutoff = initValue(properties.cutoff, this.defaults.cutoff.value);\n  this.resonance = initValue(properties.resonance, this.defaults.resonance.value);\n  this.bypass = properties.bypass || this.defaults.bypass.value;\n};\nTuna.prototype.MoogFilter.prototype = Object.create(Super, {\n  name: {\n    value: \"MoogFilter\"\n  },\n  defaults: {\n    writable: true,\n    value: {\n      bufferSize: {\n        value: 4096,\n        min: 256,\n        max: 16384,\n        automatable: false,\n        type: INT\n      },\n      bypass: {\n        value: false,\n        automatable: false,\n        type: BOOLEAN\n      },\n      cutoff: {\n        value: 0.065,\n        min: 0.0001,\n        max: 1.0,\n        automatable: false,\n        type: FLOAT\n      },\n      resonance: {\n        value: 3.5,\n        min: 0.0,\n        max: 4.0,\n        automatable: false,\n        type: FLOAT\n      }\n    }\n  },\n  cutoff: {\n    enumerable: true,\n    get: function () {\n      return this.processor.cutoff;\n    },\n    set: function (value) {\n      this.processor.cutoff = value;\n    }\n  },\n  resonance: {\n    enumerable: true,\n    get: function () {\n      return this.processor.resonance;\n    },\n    set: function (value) {\n      this.processor.resonance = value;\n    }\n  }\n});\n\nTuna.prototype.Overdrive = function (properties) {\n  if (!properties) {\n    properties = this.getDefaults();\n  }\n  this.input = userContext.createGain();\n  this.activateNode = userContext.createGain();\n  this.inputDrive = userContext.createGain();\n  this.waveshaper = userContext.createWaveShaper();\n  this.outputDrive = userContext.createGain();\n  this.output = userContext.createGain();\n\n  this.activateNode.connect(this.inputDrive);\n  this.inputDrive.connect(this.waveshaper);\n  this.waveshaper.connect(this.outputDrive);\n  this.outputDrive.connect(this.output);\n\n  this.ws_table = new Float32Array(this.k_nSamples);\n  this.drive = initValue(properties.drive, this.defaults.drive.value);\n  this.outputGain = initValue(properties.outputGain, this.defaults.outputGain.value);\n  this.curveAmount = initValue(properties.curveAmount, this.defaults.curveAmount.value);\n  this.algorithmIndex = initValue(properties.algorithmIndex, this.defaults.algorithmIndex.value);\n  this.bypass = properties.bypass || this.defaults.bypass.value;\n};\nTuna.prototype.Overdrive.prototype = Object.create(Super, {\n  name: {\n    value: \"Overdrive\"\n  },\n  defaults: {\n    writable: true,\n    value: {\n      drive: {\n        value: 0.197,\n        min: 0,\n        max: 1,\n        automatable: true,\n        type: FLOAT,\n        scaled: true\n      },\n      outputGain: {\n        value: -9.154,\n        min: -46,\n        max: 0,\n        automatable: true,\n        type: FLOAT,\n        scaled: true\n      },\n      curveAmount: {\n        value: 0.979,\n        min: 0,\n        max: 1,\n        automatable: false,\n        type: FLOAT\n      },\n      algorithmIndex: {\n        value: 0,\n        min: 0,\n        max: 5,\n        automatable: false,\n        type: INT\n      },\n      bypass: {\n        value: false,\n        automatable: false,\n        type: BOOLEAN\n      }\n    }\n  },\n  k_nSamples: {\n    value: 8192\n  },\n  drive: {\n    get: function () {\n      return this.inputDrive.gain;\n    },\n    set: function (value) {\n      this.inputDrive.gain.value = value;\n    }\n  },\n  curveAmount: {\n    get: function () {\n      return this._curveAmount;\n    },\n    set: function (value) {\n      this._curveAmount = value;\n      if (this._algorithmIndex === undefined) {\n        this._algorithmIndex = 0;\n      }\n      this.waveshaperAlgorithms[this._algorithmIndex](this._curveAmount, this.k_nSamples, this.ws_table);\n      this.waveshaper.curve = this.ws_table;\n    }\n  },\n  outputGain: {\n    get: function () {\n      return this.outputDrive.gain;\n    },\n    set: function (value) {\n      this._outputGain = dbToWAVolume(value);\n      this.outputDrive.gain.setValueAtTime(this._outputGain, userContext.currentTime, 0.01);\n    }\n  },\n  algorithmIndex: {\n    get: function () {\n      return this._algorithmIndex;\n    },\n    set: function (value) {\n      this._algorithmIndex = value;\n      this.curveAmount = this._curveAmount;\n    }\n  },\n  waveshaperAlgorithms: {\n    value: [\n      function (amount, n_samples, ws_table) {\n        amount = Math.min(amount, 0.9999);\n        var k = 2 * amount / (1 - amount),\n          i, x;\n        for (i = 0; i < n_samples; i++) {\n          x = i * 2 / n_samples - 1;\n          ws_table[i] = (1 + k) * x / (1 + k * Math.abs(x));\n        }\n      },\n      function (amount, n_samples, ws_table) {\n        var i, x, y;\n        for (i = 0; i < n_samples; i++) {\n          x = i * 2 / n_samples - 1;\n          y = ((0.5 * Math.pow((x + 1.4), 2)) - 1) * (y >= 0 ? 5.8 : 1.2);\n          ws_table[i] = tanh(y);\n        }\n      },\n      function (amount, n_samples, ws_table) {\n        var i, x, y, a = 1 - amount;\n        for (i = 0; i < n_samples; i++) {\n          x = i * 2 / n_samples - 1;\n          y = x < 0 ? -Math.pow(Math.abs(x), a + 0.04) : Math.pow(x, a);\n          ws_table[i] = tanh(y * 2);\n        }\n      },\n      function (amount, n_samples, ws_table) {\n        var i, x, y, abx, a = 1 - amount > 0.99 ? 0.99 : 1 - amount;\n        for (i = 0; i < n_samples; i++) {\n          x = i * 2 / n_samples - 1;\n          abx = Math.abs(x);\n          if (abx < a) {\n            y = abx;\n          } else if (abx > a) {\n            y = a + (abx - a) / (1 + Math.pow((abx - a) / (1 - a), 2));\n          } else if (abx > 1) {\n            y = abx;\n          }\n          ws_table[i] = sign(x) * y * (1 / ((a + 1) / 2));\n        }\n      },\n      function (amount, n_samples, ws_table) { // fixed curve, amount doesn't do anything, the distortion is just from the drive\n        var i, x;\n        for (i = 0; i < n_samples; i++) {\n          x = i * 2 / n_samples - 1;\n          if (x < -0.08905) {\n            ws_table[i] = (-3 / 4) * (1 - (Math.pow((1 - (Math.abs(x) - 0.032857)), 12)) + (1 / 3) * (Math.abs(x) - 0.032847)) + 0.01;\n          } else if (x >= -0.08905 && x < 0.320018) {\n            ws_table[i] = (-6.153 * (x * x)) + 3.9375 * x;\n          } else {\n            ws_table[i] = 0.630035;\n          }\n        }\n      },\n      function (amount, n_samples, ws_table) {\n        var a = 2 + Math.round(amount * 14),\n          // we go from 2 to 16 bits, keep in mind for the UI\n          bits = Math.round(Math.pow(2, a - 1)),\n          // real number of quantization steps divided by 2\n          i, x;\n        for (i = 0; i < n_samples; i++) {\n          x = i * 2 / n_samples - 1;\n          ws_table[i] = Math.round(x * bits) / bits;\n        }\n      }\n    ]\n  }\n});\n\nTuna.prototype.Panner = function (properties) {\n  if (!properties) {\n    properties = this.getDefaults();\n  }\n\n  this.input = userContext.createGain();\n  this.activateNode = userContext.createGain();\n  this.panner = userContext.createStereoPanner();\n  this.output = userContext.createGain();\n\n  this.activateNode.connect(this.panner);\n  this.panner.connect(this.output);\n\n  this.pan = initValue(properties.pan, this.defaults.pan.value);\n  this.bypass = properties.bypass || this.defaults.bypass.value;\n};\nTuna.prototype.Panner.prototype = Object.create(Super, {\n  name: {\n    value: \"Panner\"\n  },\n  defaults: {\n    writable: true,\n    value: {\n      bypass: {\n        value: false,\n        automatable: false,\n        type: BOOLEAN\n      },\n      pan: {\n        value: 0.0,\n        min: -1.0,\n        max: 1.0,\n        automatable: true,\n        type: FLOAT\n      }\n    }\n  },\n  pan: {\n    enumerable: true,\n    get: function () {\n      return this.panner.pan;\n    },\n    set: function (value) {\n      this.panner.pan.value = value;\n    }\n  }\n});\n\nTuna.prototype.Phaser = function (properties) {\n  if (!properties) {\n    properties = this.getDefaults();\n  }\n  this.input = userContext.createGain();\n  this.splitter = this.activateNode = userContext.createChannelSplitter(2);\n  this.filtersL = [];\n  this.filtersR = [];\n  this.feedbackGainNodeL = userContext.createGain();\n  this.feedbackGainNodeR = userContext.createGain();\n  this.merger = userContext.createChannelMerger(2);\n  this.filteredSignal = userContext.createGain();\n  this.output = userContext.createGain();\n  this.lfoL = new userInstance.LFO({\n    target: this.filtersL,\n    callback: this.callback\n  });\n  this.lfoR = new userInstance.LFO({\n    target: this.filtersR,\n    callback: this.callback\n  });\n\n  var i = this.stage;\n  while (i--) {\n    this.filtersL[i] = userContext.createBiquadFilter();\n    this.filtersR[i] = userContext.createBiquadFilter();\n    this.filtersL[i].type = \"allpass\";\n    this.filtersR[i].type = \"allpass\";\n  }\n  this.input.connect(this.splitter);\n  this.input.connect(this.output);\n  this.splitter.connect(this.filtersL[0], 0, 0);\n  this.splitter.connect(this.filtersR[0], 1, 0);\n  this.connectInOrder(this.filtersL);\n  this.connectInOrder(this.filtersR);\n  this.filtersL[this.stage - 1].connect(this.feedbackGainNodeL);\n  this.filtersL[this.stage - 1].connect(this.merger, 0, 0);\n  this.filtersR[this.stage - 1].connect(this.feedbackGainNodeR);\n  this.filtersR[this.stage - 1].connect(this.merger, 0, 1);\n  this.feedbackGainNodeL.connect(this.filtersL[0]);\n  this.feedbackGainNodeR.connect(this.filtersR[0]);\n  this.merger.connect(this.output);\n\n  this.rate = initValue(properties.rate, this.defaults.rate.value);\n  this.baseModulationFrequency = properties.baseModulationFrequency || this.defaults.baseModulationFrequency.value;\n  this.depth = initValue(properties.depth, this.defaults.depth.value);\n  this.feedback = initValue(properties.feedback, this.defaults.feedback.value);\n  this.stereoPhase = initValue(properties.stereoPhase, this.defaults.stereoPhase.value);\n\n  this.lfoL.activate(true);\n  this.lfoR.activate(true);\n  this.bypass = properties.bypass || this.defaults.bypass.value;\n};\nTuna.prototype.Phaser.prototype = Object.create(Super, {\n  name: {\n    value: \"Phaser\"\n  },\n  stage: {\n    value: 4\n  },\n  defaults: {\n    writable: true,\n    value: {\n      rate: {\n        value: 0.1,\n        min: 0,\n        max: 8,\n        automatable: false,\n        type: FLOAT\n      },\n      depth: {\n        value: 0.6,\n        min: 0,\n        max: 1,\n        automatable: false,\n        type: FLOAT\n      },\n      feedback: {\n        value: 0.7,\n        min: 0,\n        max: 1,\n        automatable: false,\n        type: FLOAT\n      },\n      stereoPhase: {\n        value: 40,\n        min: 0,\n        max: 180,\n        automatable: false,\n        type: FLOAT\n      },\n      baseModulationFrequency: {\n        value: 700,\n        min: 500,\n        max: 1500,\n        automatable: false,\n        type: FLOAT\n      },\n      bypass: {\n        value: false,\n        automatable: false,\n        type: BOOLEAN\n      }\n    }\n  },\n  callback: {\n    value: function (filters, value) {\n      for (var stage = 0; stage < 4; stage++) {\n        filters[stage].frequency.value = value;\n      }\n    }\n  },\n  depth: {\n    get: function () {\n      return this._depth;\n    },\n    set: function (value) {\n      this._depth = value;\n      this.lfoL.oscillation = this._baseModulationFrequency * this._depth;\n      this.lfoR.oscillation = this._baseModulationFrequency * this._depth;\n    }\n  },\n  rate: {\n    get: function () {\n      return this._rate;\n    },\n    set: function (value) {\n      this._rate = value;\n      this.lfoL.frequency = this._rate;\n      this.lfoR.frequency = this._rate;\n    }\n  },\n  baseModulationFrequency: {\n    enumerable: true,\n    get: function () {\n      return this._baseModulationFrequency;\n    },\n    set: function (value) {\n      this._baseModulationFrequency = value;\n      this.lfoL.offset = this._baseModulationFrequency;\n      this.lfoR.offset = this._baseModulationFrequency;\n      this.depth = this._depth;\n    }\n  },\n  feedback: {\n    get: function () {\n      return this._feedback;\n    },\n    set: function (value) {\n      this._feedback = value;\n      this.feedbackGainNodeL.gain.setTargetAtTime(this._feedback, userContext.currentTime, 0.01);\n      this.feedbackGainNodeR.gain.setTargetAtTime(this._feedback, userContext.currentTime, 0.01);\n    }\n  },\n  stereoPhase: {\n    get: function () {\n      return this._stereoPhase;\n    },\n    set: function (value) {\n      this._stereoPhase = value;\n      var newPhase = this.lfoL._phase + this._stereoPhase * Math.PI / 180;\n      newPhase = fmod(newPhase, 2 * Math.PI);\n      this.lfoR._phase = newPhase;\n    }\n  }\n});\n\nTuna.prototype.PingPongDelay = function (properties) {\n  if (!properties) {\n    properties = this.getDefaults();\n  }\n  this.input = userContext.createGain();\n  this.wet = userContext.createGain();\n  this.stereoToMonoMix = userContext.createGain();\n  this.feedbackLevel = userContext.createGain();\n  this.output = userContext.createGain();\n  this.delayLeft = userContext.createDelay(10);\n  this.delayRight = userContext.createDelay(10);\n\n  this.activateNode = userContext.createGain();\n  this.splitter = userContext.createChannelSplitter(2);\n  this.merger = userContext.createChannelMerger(2);\n\n  this.activateNode.connect(this.splitter);\n  this.splitter.connect(this.stereoToMonoMix, 0, 0);\n  this.splitter.connect(this.stereoToMonoMix, 1, 0);\n  this.stereoToMonoMix.gain.value = .5;\n  this.stereoToMonoMix.connect(this.wet);\n  this.wet.connect(this.delayLeft);\n  this.feedbackLevel.connect(this.wet);\n  this.delayLeft.connect(this.delayRight);\n  this.delayRight.connect(this.feedbackLevel);\n  this.delayLeft.connect(this.merger, 0, 0);\n  this.delayRight.connect(this.merger, 0, 1);\n  this.merger.connect(this.output);\n  this.activateNode.connect(this.output);\n\n  this.delayTimeLeft = properties.delayTimeLeft !== undefined ? properties.delayTimeLeft : this.defaults.delayTimeLeft.value;\n  this.delayTimeRight = properties.delayTimeRight !== undefined ? properties.delayTimeRight : this.defaults.delayTimeRight.value;\n  this.feedbackLevel.gain.value = properties.feedback !== undefined ? properties.feedback : this.defaults.feedback.value;\n  this.wet.gain.value = properties.wetLevel !== undefined ? properties.wetLevel : this.defaults.wetLevel.value;\n  this.bypass = properties.bypass || this.defaults.bypass.value;\n};\nTuna.prototype.PingPongDelay.prototype = Object.create(Super, {\n  name: {\n    value: \"PingPongDelay\"\n  },\n  delayTimeLeft: {\n    enumerable: true,\n    get: function () {\n      return this._delayTimeLeft;\n    },\n    set: function (value) {\n      this._delayTimeLeft = value;\n      this.delayLeft.delayTime.value = value / 1000;\n    }\n  },\n  delayTimeRight: {\n    enumerable: true,\n    get: function () {\n      return this._delayTimeRight;\n    },\n    set: function (value) {\n      this._delayTimeRight = value;\n      this.delayRight.delayTime.value = value / 1000;\n    }\n  },\n  wetLevel: {\n    enumerable: true,\n    get: function () {\n      return this.wet.gain;\n    },\n    set: function (value) {\n      this.wet.gain.setTargetAtTime(value, userContext.currentTime, 0.01);\n    }\n  },\n  feedback: {\n    enumerable: true,\n    get: function () {\n      return this.feedbackLevel.gain;\n    },\n    set: function (value) {\n      this.feedbackLevel.gain.setTargetAtTime(value, userContext.currentTime, 0.01);\n    }\n  },\n  defaults: {\n    writable: true,\n    value: {\n      delayTimeLeft: {\n        value: 200,\n        min: 1,\n        max: 10000,\n        automatable: false,\n        type: INT\n      },\n      delayTimeRight: {\n        value: 400,\n        min: 1,\n        max: 10000,\n        automatable: false,\n        type: INT\n      },\n      feedback: {\n        value: 0.3,\n        min: 0,\n        max: 1,\n        automatable: true,\n        type: FLOAT\n      },\n      wetLevel: {\n        value: 0.5,\n        min: 0,\n        max: 1,\n        automatable: true,\n        type: FLOAT\n      },\n      bypass: {\n        value: false,\n        automatable: false,\n        type: BOOLEAN\n      }\n    }\n  }\n});\n\nTuna.prototype.Tremolo = function (properties) {\n  if (!properties) {\n    properties = this.getDefaults();\n  }\n  this.input = userContext.createGain();\n  this.splitter = this.activateNode = userContext.createChannelSplitter(2);\n  this.amplitudeL = userContext.createGain();\n  this.amplitudeR = userContext.createGain();\n  this.merger = userContext.createChannelMerger(2);\n  this.output = userContext.createGain();\n  this.lfoL = new userInstance.LFO({\n    target: this.amplitudeL.gain,\n    callback: pipe\n  });\n  this.lfoR = new userInstance.LFO({\n    target: this.amplitudeR.gain,\n    callback: pipe\n  });\n\n  this.input.connect(this.splitter);\n  this.splitter.connect(this.amplitudeL, 0);\n  this.splitter.connect(this.amplitudeR, 1);\n  this.amplitudeL.connect(this.merger, 0, 0);\n  this.amplitudeR.connect(this.merger, 0, 1);\n  this.merger.connect(this.output);\n\n  this.rate = properties.rate || this.defaults.rate.value;\n  this.intensity = initValue(properties.intensity, this.defaults.intensity.value);\n  this.stereoPhase = initValue(properties.stereoPhase, this.defaults.stereoPhase.value);\n\n  this.lfoL.offset = 1 - (this.intensity / 2);\n  this.lfoR.offset = 1 - (this.intensity / 2);\n  this.lfoL.phase = this.stereoPhase * Math.PI / 180;\n\n  this.lfoL.activate(true);\n  this.lfoR.activate(true);\n  this.bypass = properties.bypass || this.defaults.bypass.value;\n};\nTuna.prototype.Tremolo.prototype = Object.create(Super, {\n  name: {\n    value: \"Tremolo\"\n  },\n  defaults: {\n    writable: true,\n    value: {\n      intensity: {\n        value: 0.3,\n        min: 0,\n        max: 1,\n        automatable: false,\n        type: FLOAT\n      },\n      stereoPhase: {\n        value: 0,\n        min: 0,\n        max: 180,\n        automatable: false,\n        type: FLOAT\n      },\n      rate: {\n        value: 5,\n        min: 0.1,\n        max: 11,\n        automatable: false,\n        type: FLOAT\n      },\n      bypass: {\n        value: false,\n        automatable: false,\n        type: BOOLEAN\n      }\n    }\n  },\n  intensity: {\n    enumerable: true,\n    get: function () {\n      return this._intensity;\n    },\n    set: function (value) {\n      this._intensity = value;\n      this.lfoL.offset = 1 - this._intensity / 2;\n      this.lfoR.offset = 1 - this._intensity / 2;\n      this.lfoL.oscillation = this._intensity;\n      this.lfoR.oscillation = this._intensity;\n    }\n  },\n  rate: {\n    enumerable: true,\n    get: function () {\n      return this._rate;\n    },\n    set: function (value) {\n      this._rate = value;\n      this.lfoL.frequency = this._rate;\n      this.lfoR.frequency = this._rate;\n    }\n  },\n  stereoPhase: {\n    enumerable: true,\n    get: function () {\n      return this._stereoPhase;\n    },\n    set: function (value) {\n      this._stereoPhase = value;\n      var newPhase = this.lfoL._phase + this._stereoPhase * Math.PI / 180;\n      newPhase = fmod(newPhase, 2 * Math.PI);\n      this.lfoR.phase = newPhase;\n    }\n  }\n});\n\nTuna.prototype.WahWah = function (properties) {\n  if (!properties) {\n    properties = this.getDefaults();\n  }\n  this.input = userContext.createGain();\n  this.activateNode = userContext.createGain();\n  this.envelopeFollower = new userInstance.EnvelopeFollower({\n    target: this,\n    callback: function (context, value) {\n      context.sweep = value;\n    }\n  });\n  this.filterBp = userContext.createBiquadFilter();\n  this.filterPeaking = userContext.createBiquadFilter();\n  this.output = userContext.createGain();\n\n  //Connect AudioNodes\n  this.activateNode.connect(this.filterBp);\n  this.filterBp.connect(this.filterPeaking);\n  this.filterPeaking.connect(this.output);\n\n  //Set Properties\n  this.init();\n  this.automode = initValue(properties.automode, this.defaults.automode.value);\n  this.resonance = properties.resonance || this.defaults.resonance.value;\n  this.sensitivity = initValue(properties.sensitivity, this.defaults.sensitivity.value);\n  this.baseFrequency = initValue(properties.baseFrequency, this.defaults.baseFrequency.value);\n  this.excursionOctaves = properties.excursionOctaves || this.defaults.excursionOctaves.value;\n  this.sweep = initValue(properties.sweep, this.defaults.sweep.value);\n\n  this.activateNode.gain.value = 2;\n  this.envelopeFollower.activate(true);\n  this.bypass = properties.bypass || this.defaults.bypass.value;\n};\nTuna.prototype.WahWah.prototype = Object.create(Super, {\n  name: {\n    value: \"WahWah\"\n  },\n  defaults: {\n    writable: true,\n    value: {\n      automode: {\n        value: true,\n        automatable: false,\n        type: BOOLEAN\n      },\n      baseFrequency: {\n        value: 0.153,\n        min: 0,\n        max: 1,\n        automatable: false,\n        type: FLOAT\n      },\n      excursionOctaves: {\n        value: 3.3,\n        min: 1,\n        max: 6,\n        automatable: false,\n        type: FLOAT\n      },\n      sweep: {\n        value: 0.35,\n        min: 0,\n        max: 1,\n        automatable: false,\n        type: FLOAT\n      },\n      resonance: {\n        value: 19,\n        min: 1,\n        max: 100,\n        automatable: false,\n        type: FLOAT\n      },\n      sensitivity: {\n        value: -0.5,\n        min: -1,\n        max: 1,\n        automatable: false,\n        type: FLOAT\n      },\n      bypass: {\n        value: false,\n        automatable: false,\n        type: BOOLEAN\n      }\n    }\n  },\n  automode: {\n    get: function () {\n      return this._automode;\n    },\n    set: function (value) {\n      this._automode = value;\n      if (value) {\n        this.activateNode.connect(this.envelopeFollower.input);\n        this.envelopeFollower.activate(true);\n      } else {\n        this.envelopeFollower.activate(false);\n        this.activateNode.disconnect();\n        this.activateNode.connect(this.filterBp);\n      }\n    }\n  },\n  filterFreqTimeout: {\n    writable: true,\n    value: 0\n  },\n  setFilterFreq: {\n    value: function () {\n      try {\n        this.filterBp.frequency.value = Math.min(22050, this._baseFrequency + this._excursionFrequency * this._sweep);\n        this.filterPeaking.frequency.value = Math.min(22050, this._baseFrequency + this._excursionFrequency * this._sweep);\n      } catch (e) {\n        clearTimeout(this.filterFreqTimeout);\n        //put on the next cycle to let all init properties be set\n        this.filterFreqTimeout = setTimeout(function () {\n          this.setFilterFreq();\n        }.bind(this), 0);\n      }\n    }\n  },\n  sweep: {\n    enumerable: true,\n    get: function () {\n      return this._sweep;\n    },\n    set: function (value) {\n      this._sweep = Math.pow(value > 1 ? 1 : value < 0 ? 0 : value, this._sensitivity);\n      this.setFilterFreq();\n    }\n  },\n  baseFrequency: {\n    enumerable: true,\n    get: function () {\n      return this._baseFrequency;\n    },\n    set: function (value) {\n      this._baseFrequency = 50 * Math.pow(10, value * 2);\n      this._excursionFrequency = Math.min(userContext.sampleRate / 2, this.baseFrequency * Math.pow(2, this._excursionOctaves));\n      this.setFilterFreq();\n    }\n  },\n  excursionOctaves: {\n    enumerable: true,\n    get: function () {\n      return this._excursionOctaves;\n    },\n    set: function (value) {\n      this._excursionOctaves = value;\n      this._excursionFrequency = Math.min(userContext.sampleRate / 2, this.baseFrequency * Math.pow(2, this._excursionOctaves));\n      this.setFilterFreq();\n    }\n  },\n  sensitivity: {\n    enumerable: true,\n    get: function () {\n      return this._sensitivity;\n    },\n    set: function (value) {\n      this._sensitivity = Math.pow(10, value);\n    }\n  },\n  resonance: {\n    enumerable: true,\n    get: function () {\n      return this._resonance;\n    },\n    set: function (value) {\n      this._resonance = value;\n      this.filterPeaking.Q.value = this._resonance;\n    }\n  },\n  init: {\n    value: function () {\n      this.output.gain.value = 1;\n      this.filterPeaking.type = \"peaking\";\n      this.filterBp.type = \"bandpass\";\n      this.filterPeaking.frequency.value = 100;\n      this.filterPeaking.gain.value = 20;\n      this.filterPeaking.Q.value = 5;\n      this.filterBp.frequency.value = 100;\n      this.filterBp.Q.value = 1;\n    }\n  }\n});\n\nTuna.prototype.EnvelopeFollower = function (properties) {\n  if (!properties) {\n    properties = this.getDefaults();\n  }\n  this.input = userContext.createGain();\n  this.jsNode = this.output = userContext.createScriptProcessor(this.buffersize, 1, 1);\n\n  this.input.connect(this.output);\n\n  this.attackTime = initValue(properties.attackTime, this.defaults.attackTime.value);\n  this.releaseTime = initValue(properties.releaseTime, this.defaults.releaseTime.value);\n  this._envelope = 0;\n  this.target = properties.target || {};\n  this.callback = properties.callback || function () { };\n\n  this.bypass = properties.bypass || this.defaults.bypass.value;\n};\nTuna.prototype.EnvelopeFollower.prototype = Object.create(Super, {\n  name: {\n    value: \"EnvelopeFollower\"\n  },\n  defaults: {\n    value: {\n      attackTime: {\n        value: 0.003,\n        min: 0,\n        max: 0.5,\n        automatable: false,\n        type: FLOAT\n      },\n      releaseTime: {\n        value: 0.5,\n        min: 0,\n        max: 0.5,\n        automatable: false,\n        type: FLOAT\n      },\n      bypass: {\n        value: false,\n        automatable: false,\n        type: BOOLEAN\n      }\n    }\n  },\n  buffersize: {\n    value: 256\n  },\n  envelope: {\n    value: 0\n  },\n  sampleRate: {\n    value: 44100\n  },\n  attackTime: {\n    enumerable: true,\n    get: function () {\n      return this._attackTime;\n    },\n    set: function (value) {\n      this._attackTime = value;\n      this._attackC = Math.exp(-1 / this._attackTime * this.sampleRate / this.buffersize);\n    }\n  },\n  releaseTime: {\n    enumerable: true,\n    get: function () {\n      return this._releaseTime;\n    },\n    set: function (value) {\n      this._releaseTime = value;\n      this._releaseC = Math.exp(-1 / this._releaseTime * this.sampleRate / this.buffersize);\n    }\n  },\n  callback: {\n    get: function () {\n      return this._callback;\n    },\n    set: function (value) {\n      if (typeof value === \"function\") {\n        this._callback = value;\n      } else {\n        console.error(\"tuna.js: \" + this.name + \": Callback must be a function!\");\n      }\n    }\n  },\n  target: {\n    get: function () {\n      return this._target;\n    },\n    set: function (value) {\n      this._target = value;\n    }\n  },\n  activate: {\n    value: function (doActivate) {\n      this.activated = doActivate;\n      if (doActivate) {\n        this.jsNode.connect(userContext.destination);\n        this.jsNode.onaudioprocess = this.returnCompute(this);\n      } else {\n        this.jsNode.disconnect();\n        this.jsNode.onaudioprocess = null;\n      }\n      if (this.activateCallback) {\n        this.activateCallback(doActivate);\n      }\n    }\n  },\n  returnCompute: {\n    value: function (instance) {\n      return function (event) {\n        instance.compute(event);\n      };\n    }\n  },\n  compute: {\n    value: function (event) {\n      var count = event.inputBuffer.getChannelData(0).length,\n        channels = event.inputBuffer.numberOfChannels,\n        current, chan, rms, i;\n      chan = rms = i = 0;\n\n      for (chan = 0; chan < channels; ++chan) {\n        for (i = 0; i < count; ++i) {\n          current = event.inputBuffer.getChannelData(chan)[i];\n          rms += (current * current);\n        }\n      }\n      rms = Math.sqrt(rms / channels);\n\n      if (this._envelope < rms) {\n        this._envelope *= this._attackC;\n        this._envelope += (1 - this._attackC) * rms;\n      } else {\n        this._envelope *= this._releaseC;\n        this._envelope += (1 - this._releaseC) * rms;\n      }\n      this._callback(this._target, this._envelope);\n    }\n  }\n});\n\nTuna.prototype.LFO = function (properties) {\n  if (!properties) {\n    properties = this.getDefaults();\n  }\n\n  //Instantiate AudioNode\n  this.input = userContext.createGain();\n  this.output = new AudioWorkletNode(userContext, 'lfo', {\n    processorOptions: { sampleRate: userContext.sampleRate }, channelCount: 1, channelCountMode: 'explicit', outputChannelCount: [1]\n  });\n\n  this.output.connect(properties.target);\n  this.activateNode = userContext.destination;\n\n  //Set Properties\n  this.frequency = initValue(properties.frequency, this.defaults.frequency.value);\n  this.offset = initValue(properties.offset, this.defaults.offset.value);\n  this.oscillation = initValue(properties.oscillation, this.defaults.oscillation.value);\n  this.phase = initValue(properties.phase, this.defaults.phase.value);\n  // this.target = properties.target || {};\n  this.bypass = properties.bypass || this.defaults.bypass.value;\n\n  this.output.port.postMessage({\n    type: 'set-all',\n    value: { oscillation: this.oscillation, offset: this.offset, frequency: this.frequency, phase: this.phase }\n  });\n};\nTuna.prototype.LFO.prototype = Object.create(Super, {\n  name: {\n    value: \"LFO\"\n  },\n  bufferSize: {\n    value: 128\n  },\n  sampleRate: {\n    value: 44100\n  },\n  defaults: {\n    value: {\n      frequency: {\n        value: 1,\n        min: 0,\n        max: 20,\n        automatable: false,\n        type: FLOAT\n      },\n      offset: {\n        value: 0.85,\n        min: 0,\n        max: 22049,\n        automatable: false,\n        type: FLOAT\n      },\n      oscillation: {\n        value: 0.3,\n        min: -22050,\n        max: 22050,\n        automatable: false,\n        type: FLOAT\n      },\n      phase: {\n        value: 0,\n        min: 0,\n        max: 2 * Math.PI,\n        automatable: false,\n        type: FLOAT\n      },\n      bypass: {\n        value: false,\n        automatable: false,\n        type: BOOLEAN\n      }\n    }\n  },\n  frequency: {\n    get: function () {\n      return this._frequency;\n    },\n    set: function (value) {\n      this._frequency = value;\n      this._phaseInc = 2 * Math.PI * this._frequency * this.bufferSize / this.sampleRate;\n      this.output.port.postMessage({\n        type: 'set-frequency',\n        value: this.frequency\n      });\n    }\n  },\n  offset: {\n    get: function () {\n      return this._offset;\n    },\n    set: function (value) {\n      this._offset = value;\n      this.output.port.postMessage({\n        type: 'set-offset',\n        value: this.offset\n      });\n    }\n  },\n  oscillation: {\n    get: function () {\n      return this._oscillation;\n    },\n    set: function (value) {\n      this._oscillation = value;\n      this.output.port.postMessage({\n        type: 'set-oscillation',\n        value: this.oscillation\n      });\n    }\n  },\n  phase: {\n    get: function () {\n      return this._phase;\n    },\n    set: function (value) {\n      this._phase = value;\n      this.output.port.postMessage({\n        type: 'set-phase',\n        value: this.phase\n      });\n    }\n  },\n  activate: {\n    value: function (doActivate) {\n      if (doActivate) {\n        // this.output.connect(userContext.destination);\n        if (this.activateCallback) {\n          this.activateCallback(doActivate);\n        }\n      } else {\n        // this.output.disconnect();\n      }\n    }\n  }\n});\n\nTuna.toString = Tuna.prototype.toString = function () {\n  return \"Please visit https://github.com/Theodeus/tuna/wiki for instructions on how to use Tuna.js\";\n};\n"],"names":["root","factory","exports","module","define","amd","a","i","self","SpatialPanner","Node","constructor","flow","options","super","name","position","Vector2","width","dataType","props","DefaultProps","style","rowHeight","spacing","terminalStyle","orientationX","orientationY","orientationZ","this","posX","flowConnect","audioContext","listener","positionX","value","posY","positionY","posZ","inGain","createGain","outGain","panner","PannerNode","panningModel","distanceModel","positionZ","inputs","ref","outputs","setBypass","setupUI","watch","_oldVal","newVal","x","denormalize","y","z","clamp","parseInt","bind","handleAudioConnections","bypass","disconnect","connect","panSlider2D","createSlider2D","propName","height","padding","zSlider","createSlider","grow","zInput","createInput","type","InputType","Number","precision","bypassToggle","createToggle","ui","append","createHozLayout","createLabel","on","_inst","connector","end","_connector","_start","ADSR","proxyParamNode","AudioWorkletNode","numberOfOutputs","parameterData","param","proxyParam","parameters","get","setMinMax","s","minInput","maxInput","aInput","adsrChanged","dInput","sInput","rInput","trigger","currTime","currentTime","d","r","cancelScheduledValues","setValueAtTime","min","linearRampToValueAtTime","max","totalDur","envelopeInput","Zero","stopAutomation","port","postMessage","atck","dcay","rlse","duration","createEnvelope","pointColor","disabled","step","AudioParam","offset","Math","minValue","AudioBufferSource","fileInput","processFile","async","file","cached","arrayBufferCache","arrayBuffer","set","processArrayBuffer","audioBufferCache","decodeAudioData","buffer","setOutputs","createSource","Automate","envelope","finiteLoop","startAutomation","durationInput","loopToggle","auto","values","currVal","automateDuration","length","loop","schedule","timerId","window","setInterval","scheduleEndTime","clearInterval","time","iterations","forEach","input","output","autoToggle","BiquadFilter","biquadFilter","createBiquadFilter","gain","Q","frequency","detune","filterType","_","data","typeSelect","createSelect","BitcrusherEffect","bitcrusher","numberOfInputs","processorOptions","bufferSize","bitsSlider","paramsChanged","normFreqSlider","bitsInput","normFreqInput","bits","isInteger","floor","normFreq","ChannelMerger","merger","createChannelMerger","addChannelButton","newTerm","Terminal","TerminalType","IN","addTerminal","index","createButton","ChannelSplitter","oldNoOfChannels","channelCountMode","newNoOfChannels","checkChannels","splitter","createChannelSplitter","terminalsToRemove","newTerminal","OUT","cntr","_cntr","push","term","removeTerminal","Tuna","ChorusEffect","__tuna__","chorus","Chorus","Object","assign","delay","depth","feedback","rate","delaySlider","delayInput","depthSlider","depthInput","feedbackSlider","feedbackInput","rateSlider","rateInput","Convolver","convolver","createConvolver","Debug","debugNode","onmessage","e","state","FlowState","Stopped","DelayEffect","dryGain","wetGain","filter","createDelay","feedbackNode","delayTime","cutoff","wet","dry","delayChanged","feedbackChanged","setTargetAtTime","cutoffChanged","cutoffSlider","wetChanged","wetSlider","dryChanged","drySlider","cutoffInput","wetInput","dryInput","Destination","masterVolumeGainNode","destination","Distorter","oversampleOptions","distorter","createWaveShaper","oversample","curve","makeDistortionCurve","includes","amount","k","n_samples","Float32Array","deg","PI","abs","amountInput","oversampleSelect","DynamicsCompressor","compressor","createDynamicsCompressor","threshold","ratio","knee","attack","release","Equalizer","vSliders","filters","frequencies","freqDisplay","freq","isInRange","stacks","_freq","vSlider","createVSlider","stack","createStack","childs","align","Align","Center","eq1","eq2","eq3","eq4","eq5","eq6","eq7","eq8","eq9","eq10","FrequencyAnalyser","fftSizes","analyser","createAnalyser","fftSize","getFFTSize","round","actualFFTSize","fftSizeLabel","text","display","screenPos","currFreq","subtract","transform","offCanvasConfigs","canvas","frequencyBinCount","sampleRate","freqLabel","fftSizeSlider","Right","createDisplay","renderer","args","customRenderer","context","percent","hue","frequencyData","Uint8Array","orgHeight","barWidth","getByteFrequencyData","fillStyle","fillRect","Gain","Metronome","volumeGainNode","proxyParamSourceNode","playbackRate","fillBuffer","bpmInput","source","loopEnd","bpm","freqInput","stopSource","playSource","ctx","createBuffer","channel","getChannelData","phase","amp","durationFrames","f","sin","Constant","TAU","FlowConnectState","audioSource","AudioBufferSourceNode","start","stop","Microphone","stream","microphone","getMicrophone","then","error","Log","catch","navigator","mediaDevices","getUserMedia","audio","video","createMediaStreamSource","MoogEffect","moog","resonance","resonanceSlider","resonanceInput","Noise","noise","channelCount","outputChannelCount","noiseSelect","Oscillator","types","freqProxy","detuneProxy","inputsUI","freqHozLayout","oscillator","detuneHozLayout","startOscillator","stopOscillator","createOscillator","isConnected","freqSlider","detuneSlider","detuneInput","typeGroup","createRadioGroup","OverdriveEffect","overdrive","Overdrive","drive","outputGain","curveAmount","algorithmIndex","algorithm","driveSlider","driveInput","outGainSlider","outGainInput","curveAmountSlider","curveAmountInput","algorithmSelect","PingPongEffect","pingPong","PingPongDelay","delayTimeLeft","delayLeft","delayTimeRight","delayRight","wetLevel","delayLeftSlider","delayLeftInput","delayRightSlider","delayRightInput","Source","ArrayBuffer","propagateChannelChange","executionGraph","propagate","currNode","call","prevChannelCount","numberOfChannels","SpectrogramAnalyser","colorScales","colorScaleToInterp","Function","colorScale","currInterpolator","Color","scale","shouldRender","canvasType","CanvasType","HTMLCanvasElement","colorScaleSelect","barHeight","normalize","globalCompositeOperation","drawImage","StereoPanner","StereoPannerNode","pan","panSlider","panInput","TremoloEffect","tremolo","Tremolo","intensity","stereoPhase","intensitySlider","intensityInput","stereoPhaseSlider","stereoPhaseInput","WaveformAnalyser","waveformData","getByteTimeDomainData","strokeStyle","beginPath","moveTo","lineTo","stroke","ArrayIndex","ArraySource","process","numberToggle","arrayInput","stepInput","numberToggled","rangeToggled","rangeLayout","visible","number","range","rangeStack","inputEl","validity","patternMismatch","split","map","item","trim","rangeToggle","rangeInputLayout","pattern","BooleanSource","toggle","Buffer","sizeInput","getInputs","size","shift","splice","Compare","select","res","fontSize","Delay","eventQueue","List","b","timeoutId","head","performance","now","bufferedEvent","removeFirst","emit","eventNode","ListNode","setTimeout","triggerEvent","remaining","clearTimeout","FileSource","GlobalEvent","GlobalEventType","Emitter","Receiver","prevEvent","getNewUUID","globalEvents","eventId","__","prevVal","off","eventInput","Text","JsonSource","JSON","parse","backgroundColor","terminal","log","addEventButton","addNewTerminal","addDataButton","NumberRange","startValue","NumberSource","fractionalToggle","fractional","Property","Random","random","getRandom","StringSource","SyncData","hold","eventIds","inst","syncTypeInput","syncType","addButton","id","hasOwnProperty","connectors","getData","SyncEvent","events","Timer","lastTrigger","MIN_VALUE","current","ToArray","Array","fill","inData","ToVector2","isArray","result","StandardNodes","Common","timer","toArray","arrayIndex","arraySource","booleanSource","jsonSource","numberSource","stringSource","fileSource","compare","property","syncEvent","syncData","toVector2","numberRange","globalEvent","Abs","Average","average","Normalize","Clamp","Floor","Ceil","ceil","func","Func","Net","API","api","Visual","LineChartMini","lineChartMini","FunctionPlotter","functionPlotter","Audio","automate","channelSplitter","debug","channelMerger","adsr","metronome","moogEffect","bitcrusherEffect","delayEffect","dynamicsCompressor","chorusEffect","overdriveEffect","audioBuffer","tremoloEffect","stereoPanner","spatialPanner","equalizer","frequencyAnalyser","waveformAnalyser","spectrogramAnalyser","UI","Dial","dial","reduce","acc","curr","expression","tokens","vars","Set","parser","Parser","token","TokenType","Variable","Error","add","variable","addVarButton","newVar","toLowerCase","bulkEvalIterations","evaluator","variables","inTerminal","expr","regex","RegExp","replace","matchAll","match","Evaluator","multiargFunctions","resultArr","evaluate","lowerCase","test","exprInput","maxLength","MAX_SAFE_INTEGER","MIN_SAFE_INTEGER","relativeToggle","relative","constant","constantInput","normalized","getInput","toFixed","currMin","currMax","src","response","fetch","json","isEmpty","dialStyle","borderColor","borderWidth","shadowBlur","shadowColor","outputsUI","createDial","Left","plotStyle","polarToggle","dragStart","xPixToCoord","config","yPixToCoord","delta","xMin","xMax","yMin","yMax","gridRenderer","functionRenderer","direction","cursor","points","drawGrid","polar","cos","xCoordToPix","xCoord","xPixPerUnit","yCoordToPix","yCoord","yPixPerUnit","xPix","yPix","drawLine","x1","y1","x2","y2","getGridPointDist","factor","diff","pow","clearRect","xDiff","yDiff","xF","gX","yF","gY","axisColor","gridColor","axisPosition","fillText","axisVal","plotColor","lineWidth","startX","startY","colors","displayStyle","wdth","hght","rgbaCSSString","userContext","userInstance","pipe","val","Super","create","activate","writable","doActivate","activateNode","activateCallback","_bypass","_lastBypassValue","target","connectInOrder","nodeArray","console","getDefaults","key","defaults","startTime","method","dur","_is","automatable","FLOAT","BOOLEAN","INT","_window","AudioContext","webkitAudioContext","__connectified__","proto","getPrototypeOf","oconnect","shimConnect","node","arguments","isPrototypeOf","apply","connectify","dbToWAVolume","db","fmod","tmp","tmp2","pY","p","l","l2","toExponential","parseFloat","sign","tanh","n","exp","initValue","userVal","defaultVal","undefined","prototype","Bitcrusher","properties","processor","createScriptProcessor","phaser","last","onaudioprocess","inputBuffer","outputBuffer","normfreq","enumerable","Cabinet","newConvolver","impulsePath","makeupNode","makeupGain","impulse","dryLevel","attenuator","delayL","delayR","feedbackGainNodeLR","feedbackGainNodeRL","lfoL","LFO","callback","lfoR","_delay","_depth","oscillation","_feedback","_rate","Compressor","compNode","automakeup","computeMakeup","c","_automakeup","filterLow","filterHigh","highCut","lowCut","level","xhr","XMLHttpRequest","open","responseType","onreadystatechange","readyState","status","send","Filter","gainNode","MoogFilter","in1","in2","in3","in4","out1","out2","out3","out4","fb","inputFactor","inputDrive","waveshaper","outputDrive","ws_table","k_nSamples","scaled","_curveAmount","_algorithmIndex","waveshaperAlgorithms","_outputGain","abx","Panner","createStereoPanner","Phaser","filtersL","filtersR","feedbackGainNodeL","feedbackGainNodeR","filteredSignal","stage","baseModulationFrequency","_baseModulationFrequency","_stereoPhase","newPhase","_phase","stereoToMonoMix","feedbackLevel","_delayTimeLeft","_delayTimeRight","amplitudeL","amplitudeR","_intensity","WahWah","envelopeFollower","EnvelopeFollower","sweep","filterBp","filterPeaking","init","automode","sensitivity","baseFrequency","excursionOctaves","_automode","filterFreqTimeout","setFilterFreq","_baseFrequency","_excursionFrequency","_sweep","_sensitivity","_excursionOctaves","_resonance","jsNode","buffersize","attackTime","releaseTime","_envelope","_attackTime","_attackC","_releaseTime","_releaseC","_callback","_target","activated","returnCompute","instance","event","compute","chan","rms","count","channels","sqrt","_frequency","_phaseInc","_offset","_oscillation","toString"],"sourceRoot":""}