import c from"./GraphControls.dd444b39.js";import{_ as h,o as f,c as u,a as m,b as d}from"./app.6c1464b6.js";const p={class:"home-example-container"},g={class:"home-example",ref:"home-example"},w={name:"HomeExample",components:[c],mounted(){this.lastTheme=document.querySelector("html").className,this.themeChanged(),fetch("images/hero-dark.png").then(t=>t.blob()).then(t=>this.loadedDarkHeroImage=URL.createObjectURL(t)),fetch("images/hero.png").then(t=>t.blob()).then(t=>this.loadedLightHeroImage=URL.createObjectURL(t)),setTimeout(()=>{this.flowConnect=new FlowConnect(this.$refs["home-example"]),window.flowConnect=this.flowConnect,this.flowConnect.disableScale=!0,this.flowConnect.on("dimension-change",(e,o,r)=>this.arrange(o,r));let t=this.flowConnect.createFlow({name:"Math Plot",rules:{}});this.tovector=t.createNode("common/to-vector",Vector.create(585,105),{name:"Node"}),this.func1=t.createNode("math/func",Vector.create(295,54),{name:"Node",expression:"cos(t)"}),this.func2=t.createNode("math/func",Vector.create(295,184.3),{name:"Node",expression:"sin(t) + 0.2cos(2.8t)"}),this.parametricPlotter=t.createNode("visual/function-plotter",Vector.create(775,77.2),{width:250,name:"Node",plotStyle:{axisColor:"grey"}}),this.parametricPlotter.plotStyle.plotColor="#fa9868",this.parametricPlotter.ui.query("core/display")[0].style.borderColor="#fff",this.arraySource=t.createNode("common/array-source",Vector.create(12.4,120.4),{name:"Node",state:{number:!0,range:!0,min:-5*Math.PI,max:5*Math.PI,step:.1}}),this.arraySource.outputs[0].connect(this.func1.inputs[0]),this.arraySource.outputs[0].connect(this.func2.inputs[0]),this.func1.outputs[0].connect(this.tovector.inputs[0]),this.func2.outputs[0].connect(this.tovector.inputs[1]),this.tovector.outputs[0].connect(this.parametricPlotter.inputs[0]),this.flowConnect.render(t),t.nodes.forEach(e=>{this.orgPositions[e.id]=e.position.clone(),e.style.color="#fff",e.ui.query("core/label").forEach(o=>o.style.color="#fff"),e.ui.query("core/input").forEach(o=>o.style.border="#fff"),e.ui.query("core/toggle").forEach(o=>{o.style.color="#fff",o.style.backgroundColor="#777"})}),t.connectors.forEach(e=>{e.style.width=2,e.style.border=!1,e.style.color="#000"}),this.flowConnect.registerRenderer("background",()=>(e,o,r)=>{e.fillStyle="#292929",e.shadowColor="#000",e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowBlur=15,e.fillRect(o.position.x,o.position.y,o.width,o.height)}),this.arrange(this.flowConnect.canvasDimensions.width,this.flowConnect.canvasDimensions.height),this.themeChangeObserver=new MutationObserver(e=>{e.forEach(o=>{o.type==="attributes"&&o.attributeName==="class"&&this.themeChanged()})}),this.themeChangeObserver.observe(document.querySelector("html"),{attributes:!0})},0)},beforeUnmount(){this.themeChangeObserver.disconnect()},data(){return{orgPositions:{},lastTheme:"",loadedDarkHeroImage:null,loadedLightHeroImage:null}},methods:{arrange(t,e){let o=[[this.arraySource],[this.func1,this.func2],[this.tovector],[this.parametricPlotter]],r=o.reduce((s,n)=>s+this.maxWidth(n),0),l=(t-40-r)/3,a=20;t>419?o.forEach(s=>{s.forEach(n=>{n.position=n.position.assign(a,this.orgPositions[n.id].y)}),a+=this.maxWidth(s)+l}):Object.values(this.flowConnect.currFlow.nodes).forEach(s=>{s.position=this.orgPositions[s.id].clone()});let i=Vector.create(this.flowConnect.canvasDimensions.width,this.flowConnect.canvasDimensions.height);this.flowConnect.translateBy(i.subtract(i.transform(this.flowConnect.transform)))},maxWidth(t){let e=-1/0;return t.forEach(o=>{o.width>e&&(e=o.width)}),e},themeChanged(){this.lastTheme=document.querySelector("html").className,document.querySelector(".home .hero img").src=this.lastTheme.includes("dark")?this.loadedDarkHeroImage||"images/hero-dark.png":this.loadedLightHeroImage||"images/hero.png";let t,e,o;this.lastTheme==="dark"?(t="#fff",e="#ccc",o="#fff"):(t="#000",e="#000",o="#000"),this.flowConnect&&(this.flowConnect.currFlow.nodes.forEach(r=>{r.style.titleColor=t,r.style.outlineColor=e}),this.flowConnect.currFlow.connectors.forEach(r=>{r.style.color=o}))},handleControl(t){t==="play"&&(this.flowConnect.state===FlowConnectState.Running?this.flowConnect.currFlow.stop():this.flowConnect.currFlow.start())}}},C=Object.assign(w,{setup(t){return(e,o)=>(f(),u("div",p,[m(c,{class:"home-example-graph-controls",onControl:e.handleControl,"show-text":!1},null,8,["onControl"]),d("canvas",g,null,512)]))}});var b=h(C,[["__scopeId","data-v-61948422"],["__file","HomeExample.vue"]]);export{b as default};
