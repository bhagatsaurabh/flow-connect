!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var i,o=e();for(i in o)("object"==typeof exports?exports:t)[i]=o[i]}}(self,function(){return(()=>{"use strict";var o={278:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Color=void 0;var o=i(974),i=(n.Random=function(){return new n(new Uint8ClampedArray([Math.floor(o.getRandom(0,255)),Math.floor(o.getRandom(0,255)),Math.floor(o.getRandom(0,255)),255]))},n.rgbaToHex=function(t){return"#"+n._componentToHex(t[0])+n._componentToHex(t[1])+n._componentToHex(t[2])+n._componentToHex(t[3])},n.hexToRGBA=function(t){return new Uint8ClampedArray([parseInt(t.slice(1,3),16),parseInt(t.slice(3,5),16),parseInt(t.slice(5,7),16),parseInt(t.slice(7,9),16)])},n._componentToHex=function(t){t=t.toString(16);return 1==t.length?"0"+t:t},n.rgbaToString=function(t){return t[0]+":"+t[1]+":"+t[2]+":"+t[3]},n.rgbaToCSSString=function(t){return"rgba("+t[0]+", "+t[1]+", "+t[2]+", "+o.normalize(t[3],0,255).toFixed(3)+")"},n.prototype.serialize=function(){return{rgba:[this.rgbaValue[0],this.rgbaValue[1],this.rgbaValue[2],this.rgbaValue[3]]}},n.deSerialize=function(t){return new n(t.rgba)},n);function n(t){this.rgbaValue=t,this.hexValue=n.rgbaToHex(this.rgbaValue),this.rgbaString=n.rgbaToString(this.rgbaValue),this.rgbaCSSString=n.rgbaToCSSString(this.rgbaValue)}e.Color=i},907:function(t,e,i){var h=this&&this.__assign||function(){return(h=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.Connector=void 0;var c=i(281),u=i(522),l=i(974),i=(Object.defineProperty(n.prototype,"data",{get:function(){return this._data},set:function(t){this._data=t,this.end&&this.end.call("data",t),this.flow.state===u.FlowState.Running&&this.flow.executionGraph.state!==u.GraphState.FullRun&&this.flow.executionGraph.setDirtyNode(this.endNode)},enumerable:!1,configurable:!0}),n.prototype.completeConnection=function(t){this.start?(this.end=t,this.endNode=this.end.node):(this.start=t,this.startNode=this.start.node),this.start.connectors.includes(this)||this.start.connectors.push(this),(this.end.connectors[0]=this).floatingTip=null,this.startNode.currHitTerminal&&this.startNode.currHitTerminal.onExit(null,null),this.startNode.currHitTerminal=null,this.endNode.currHitTerminal&&this.endNode.currHitTerminal.onExit(null,null),this.endNode.currHitTerminal=null,this.flow.executionGraph.connect(this.startNode,this.endNode),this.start.call("connect",this.start,this),this.end.call("connect",this.end,this)},n.prototype.removeConnection=function(){this.start&&(this.start.connectors.includes(this)&&this.start.connectors.splice(this.start.connectors.indexOf(this),1),this.startNode.currHitTerminal&&(this.startNode.currHitTerminal.onExit(null,null),this.startNode.currHitTerminal=null)),this.end&&(this.end.connectors.includes(this)&&this.end.connectors.splice(this.end.connectors.indexOf(this),1),this.endNode.currHitTerminal&&(this.endNode.currHitTerminal.onExit(null,null),this.endNode.currHitTerminal=null))},n.prototype.canConnect=function(t){var e=this.start||this.end;return!!t&&(e!==t&&(e.node!==t.node&&(e.type!==t.type&&(!!this.flow.rules[e.dataType].includes(t.dataType)&&!!this.flow.executionGraph.canConnect(e.node,t.node)))))},n.prototype.render=function(){this.flow.flowConnect.context.save(),this._render(),this.flow.flowConnect.context.restore(),this.flow.flowConnect.offContext.save(),this._offRender(),this.flow.flowConnect.offContext.restore()},n.prototype._render=function(){var t,e,i=this.start?this.startNode.renderState.nodeState===u.NodeState.MAXIMIZED?(t=(n=[this.start.position.x,this.start.position.y])[0],n[1]):(t=(s=[this.startNode.position.x+this.startNode.width+this.startNode.style.terminalStripMargin+this.start.style.radius,this.startNode.position.y+this.startNode.style.titleHeight/2])[0],s[1]):(t=(r=[this.floatingTip.x,this.floatingTip.y])[0],r[1]),o=this.end?this.endNode.renderState.nodeState===u.NodeState.MAXIMIZED?(e=(h=[this.end.position.x,this.end.position.y])[0],h[1]):(e=(l=[this.endNode.position.x-this.endNode.style.terminalStripMargin-this.end.style.radius,this.endNode.position.y+this.endNode.style.titleHeight/2])[0],l[1]):(e=(a=[this.floatingTip.x,this.floatingTip.y])[0],a[1]),n=c.Vector2.Distance(t,i,e,o),s=[t+(n*=.2),i],r=s[0],h=s[1],l=[e-n,o],a=l[0],s=l[1],n=[(r+a)/2,(h+s)/2],l=n[0],n=n[1];this.flow.flowConnect.context.beginPath(),this.flow.flowConnect.context.moveTo(t,i),this.flow.flowConnect.context.quadraticCurveTo(r,h,l,n),this.flow.flowConnect.context.moveTo(l,n),this.flow.flowConnect.context.quadraticCurveTo(a,s,e,o),this.flow.flowConnect.context.strokeStyle="grey",this.flow.flowConnect.context.lineWidth=this.style.width+2,this.flow.flowConnect.context.stroke(),this.flow.flowConnect.context.beginPath(),this.flow.flowConnect.context.moveTo(t,i),this.flow.flowConnect.context.quadraticCurveTo(r,h,l,n),this.flow.flowConnect.context.moveTo(l,n),this.flow.flowConnect.context.quadraticCurveTo(a,s,e,o),this.flow.flowConnect.context.strokeStyle=this.style.color,this.flow.flowConnect.context.lineWidth=this.style.width,this.flow.flowConnect.context.stroke()},n.prototype._offRender=function(){},n.prototype.serialize=function(){return{id:this.id,startId:this.start.id,endId:this.end.id,startNodeId:this.startNode.id,endNodeId:this.endNode.id,style:this.style}},n.deSerialize=function(t,e,i,o){return new n(t,e,i,null,o.style,o.id,!0)},n);function n(t,e,i,o,n,s,r){void 0===n&&(n={}),void 0===s&&(s=l.getNewGUID()),void 0===r&&(r=!1),this.flow=t,this.floatingTip=o,this.style=n,this.id=s,this.style=h(h({},u.Constant.DefaultConnectorStyle()),n),this.start=e,this.end=i,this.start&&(this.startNode=this.start.node),this.end&&(this.endNode=this.end.node),e&&i&&(this.floatingTip=null,this.start.connectors.push(this),this.end.connectors.push(this),r||this.flow.executionGraph.connect(this.startNode,this.endNode),this.start.call("connect",this.start,this),this.end.call("connect",this.end,this))}e.Connector=i},894:function(t,e,i){var o,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0}),e.Flow=void 0;var r,c=i(55),s=i(417),h=i(166),l=i(907),a=i(156),u=i(587),p=i(915),d=i(974),f=i(522),y=i(571),n=(r=s.Hooks,n(g,r),g.prototype.registerListeners=function(){var t=this,e=this.flowConnect.on("transform",function(){return t.call("transform",t)});this.listeners.transform=e},g.prototype.deregisterListeners=function(){this.flowConnect.off("transform",this.listeners.transform),delete this.listeners.transform},g.prototype.existsInFlow=function(t){for(var e=0,i=Object.values(this.nodes);e<i.length;e++){var o=i[e];if(o.subFlow===t)return!0;if(o.subFlow)return o.subFlow.existsInFlow(t)}return!1},g.prototype.addInput=function(t,e,i){e=new p.TunnelNode(this,"Input",i,100,[],[{name:t,dataType:e}],{},{},{});return this.inputs.push(e),this.nodes[e.id]=e,this.sortedNodes.add(e),this.executionGraph.add(e),this.call("add-input",this,e),e},g.prototype.addOutput=function(t,e,i){e=new p.TunnelNode(this,"Output",i,100,[{name:t,dataType:e}],[],{},{},{});return this.outputs.push(e),this.nodes[e.id]=e,this.sortedNodes.add(e),this.executionGraph.add(e),this.call("add-output",this,e),e},g.prototype.addSubFlow=function(t,e){t=new u.SubFlowNode(this,t.name,e,150,{},{},{},t.inputs.map(function(t){return{name:t.outputs[0].name,dataType:t.outputs[0].dataType}}),t.outputs.map(function(t){return{name:t.inputs[0].name,dataType:t.inputs[0].dataType}}),t);return this.nodes[t.id]=t,this.sortedNodes.add(t),this.executionGraph.add(t),t},g.prototype.createNode=function(t,e,i,o,n,s,r,h){void 0===s&&(s={}),void 0===r&&(r={});var l=[],a=[];void 0!==o&&(l=o),void 0!==n&&(a=n);h=new c.Node(this,t,e,i,l,a,s,r,h);return this.nodes[h.id]=h,this.sortedNodes.add(h),this.executionGraph.add(h),h},g.prototype.removeNode=function(t){},g.prototype.removeConnector=function(t){this.connectors[t]===this.flowConnect.floatingConnector&&(this.flowConnect.floatingConnector=null),delete this.connectors[t]},g.prototype.removeAllFocus=function(){Object.values(this.nodes).forEach(function(t){return t.focused=!1})},g.prototype.render=function(){this.groups.forEach(function(t){return t.render()}),Object.values(this.connectors).forEach(function(t){return t.render()}),this.sortedNodes.forEach(function(t){return t.render()})},g.prototype.start=function(){this.state!==f.FlowState.Running&&(this.state=f.FlowState.Running,this.call("start",this),this.executionGraph.start())},g.prototype.stop=function(){this.state=f.FlowState.Stopped,this.call("stop",this),Object.values(this.nodes).forEach(function(t){t instanceof u.SubFlowNode&&t.subFlow.stop()})},g.prototype.serialize=function(){return{id:this.id,name:this.name,rules:this.rules,terminalTypeColors:this.terminalTypeColors,nodes:Object.values(this.nodes).map(function(t){return t.serialize()}),groups:this.groups.map(function(t){return t.serialize()}),connectors:Object.values(this.connectors).map(function(t){return t.serialize()}),inputs:this.inputs.map(function(t){return t.serialize()}),outputs:this.outputs.map(function(t){return t.serialize()}),executionGraph:this.executionGraph.serialize()}},g.deSerialize=function(t,e){var o=new g(t,e.name,e.rules,e.terminalTypeColors,e.id);return e.nodes.forEach(function(t){t=(t.subFlow?u.SubFlowNode:c.Node).deSerialize(o,t);o.nodes[t.id]=t,o.sortedNodes.add(t)}),e.groups.forEach(function(t){var e=h.Group.deSerialize(o,t);o.groups.push(e),e.nodes.forEach(function(t){return t.group=e})}),e.inputs.forEach(function(t){t=p.TunnelNode.deSerialize(o,t);o.inputs.push(t),o.nodes[t.id]=t,o.sortedNodes.add(t)}),e.outputs.forEach(function(t){t=p.TunnelNode.deSerialize(o,t);o.outputs.push(t),o.nodes[t.id]=t,o.sortedNodes.add(t)}),e.connectors.forEach(function(e){var t=o.nodes[e.startNodeId],i=t.outputs.concat(t.outputsUI).find(function(t){return t.id===e.startId}),t=o.nodes[e.endNodeId],t=t.inputs.concat(t.inputsUI).find(function(t){return t.id===e.endId}),t=l.Connector.deSerialize(o,i,t,e);o.connectors[e.id]=t}),o.executionGraph=y.Graph.deSerialize(o,e.executionGraph),o},g);function g(t,e,i,o,n){void 0===n&&(n=d.getNewGUID());var s=r.call(this)||this;return s.flowConnect=t,s.name=e,s.rules=i,s.terminalTypeColors=o,s.id=n,s.listeners={},s.state=f.FlowState.Stopped,s.nodes={},s.groups=[],s.connectors={},s.hitColorToNode={},s.hitColorToGroup={},s.sortedNodes=new a.BinarySearchTree(function(t,e){return t.zIndex-e.zIndex},function(t){return t.id}),s.inputs=[],s.outputs=[],s.executionGraph=new y.Graph,s.registerListeners(),s}e.Flow=n},571:function(t,e,i){var o=this&&this.__awaiter||function(t,r,h,l){return new(h=h||Promise)(function(i,e){function o(t){try{s(l.next(t))}catch(t){e(t)}}function n(t){try{s(l.throw(t))}catch(t){e(t)}}function s(t){var e;t.done?i(t.value):((e=t.value)instanceof h?e:new h(function(t){t(e)})).then(o,n)}s((l=l.apply(t,r||[])).next())})},n=this&&this.__generator||function(i,o){var n,s,r,h={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(n)throw new TypeError("Generator is already executing.");for(;h;)try{if(n=1,s&&(r=2&e[0]?s.return:e[0]?s.throw||((r=s.return)&&r.call(s),0):s.next)&&!(r=r.call(s,e[1])).done)return r;switch(s=0,(e=r?[2&e[0],r.value]:e)[0]){case 0:case 1:r=e;break;case 4:return h.label++,{value:e[1],done:!1};case 5:h.label++,s=e[1],e=[0];continue;case 7:e=h.ops.pop(),h.trys.pop();continue;default:if(!(r=0<(r=h.trys).length&&r[r.length-1])&&(6===e[0]||2===e[0])){h=0;continue}if(3===e[0]&&(!r||e[1]>r[0]&&e[1]<r[3])){h.label=e[1];break}if(6===e[0]&&h.label<r[1]){h.label=r[1],r=e;break}if(r&&h.label<r[2]){h.label=r[2],h.ops.push(e);break}r[2]&&h.ops.pop(),h.trys.pop();continue}e=o.call(i,h)}catch(t){e=[6,t],s=0}finally{n=r=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}},s=this&&this.__spreadArrays||function(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;for(var o=Array(t),n=0,e=0;e<i;e++)for(var s=arguments[e],r=0,h=s.length;r<h;r++,n++)o[n]=s[r];return o};Object.defineProperty(e,"__esModule",{value:!0}),e.Graph=e.GraphNode=void 0;var r=i(522),h=i(974),l=i(55),a=(c.prototype.serialize=function(){return{id:this.id,nodeId:this.flowNode.id,order:this.order,childs:this.childs.map(function(t){return t.id})}},c.deSerialize=function(t,e){return new c(t,e.order,e.id)},c);function c(t,e,i){this.flowNode=t,this.childs=[],this.order=e||0,this.id=i||h.getNewGUID()}e.GraphNode=a;u.prototype.add=function(t){this.nodes[0]||this.nodes.push([]);var e=new a(t);this.nodes[0].push(e),this.nodeToGraphNode[t.id]=e},u.prototype.connect=function(t,e){var i=this,t=this.nodeToGraphNode[t.id],e=this.nodeToGraphNode[e.id];if(!t.childs.includes(e)&&(t.childs.push(e),e.order<=t.order)){this.updateOrder(e,t.order+1);var o=[];o.push(e);for(;0!==o.length;)!function(){var e=o.shift();e.childs.forEach(function(t){t.order<=e.order&&(i.updateOrder(t,e.order+1),o.includes(t)||o.push(t))})}()}},u.prototype.updateOrder=function(t,e){this.nodes[t.order].splice(this.nodes[t.order].indexOf(t),1),this.nodes[e]||(this.nodes[e]=[]),t.order=e,this.nodes[e].push(t)},u.prototype.canConnect=function(t,e){return!this.nodeToGraphNode[e.id].childs.includes(this.nodeToGraphNode[t.id])},u.prototype.start=function(){this.state===r.GraphState.Stopped&&(this.state=r.GraphState.FullRun,this.nodes.forEach(function(t){t.forEach(function(t){return t.flowNode.run()})}),this.state=r.GraphState.Idle)},u.prototype.stop=function(){this.state=r.GraphState.Stopped},u.prototype.partialRun=function(){return o(this,void 0,void 0,function(){var i=this;return n(this,function(t){switch(t.label){case 0:return[4,new Promise(function(t,e){try{i.processDirtyNodes(),t(!0)}catch(t){console.log(t),e(!1)}})];case 1:return t.sent()&&0<Object.keys(this.dirtyNodes).length?[4,this.partialRun()]:[3,3];case 2:t.sent(),t.label=3;case 3:return[2]}})})},u.prototype.setDirtyNode=function(t){var e=this,t=t instanceof l.Node?this.nodeToGraphNode[t.id]:t;this.dirtyNodes[t.id]||(this.dirtyNodes[t.id]=t,this.state===r.GraphState.Idle&&(this.state=r.GraphState.Running,this.partialRun().then(function(){return e.state=r.GraphState.Idle})))},u.prototype.clearDirtyNode=function(t){t=t instanceof l.Node?this.nodeToGraphNode[t.id]:t;this.dirtyNodes[t.id]&&delete this.dirtyNodes[t.id]},u.prototype.processDirtyNodes=function(){var e=this,t=Object.values(this.dirtyNodes).sort(function(t,e){return t.order-e.order});console.log(s(t)),t.forEach(function(t){t.flowNode.run(),e.clearDirtyNode(t)})},u.prototype.serialize=function(){var e=this,i={};return Object.keys(this.nodeToGraphNode).forEach(function(t){return i[t]=e.nodeToGraphNode[t].id}),{nodes:this.nodes.map(function(t){return t.map(function(t){return t.serialize()})}),nodeToGraphNode:i}},u.deSerialize=function(i,e){var o=new u,n={},s={};return e.nodes.forEach(function(t,e){o.nodes[e]=t.map(function(t){var e=a.deSerialize(i.nodes[t.nodeId],t);return s[e.id]=e,n[e.id]=t,e})}),Object.keys(s).forEach(function(t){s[t].childs=n[t].childs.map(function(t){return s[t]})}),Object.keys(e.nodeToGraphNode).forEach(function(t){o.nodeToGraphNode[t]=s[e.nodeToGraphNode[t]]}),o},i=u;function u(){this.state=r.GraphState.Stopped,this.nodes=[],this.nodeToGraphNode={},this.dirtyNodes={}}e.Graph=i},166:function(t,e,i){var o,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),a=this&&this.__assign||function(){return(a=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.Group=void 0;var c,s=i(281),u=i(522),p=i(974),r=i(278),i=i(417),n=(c=i.Hooks,n(h,c),Object.defineProperty(h.prototype,"name",{get:function(){return this._name},set:function(t){t&&""!==t.trim()?this._name=t:this._name="No Name",this.computeTextMetrics()},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"position",{get:function(){return this._position},set:function(t){this._position=t,this.updateRenderState(),this.recomputeNodePositions()},enumerable:!1,configurable:!0}),h.prototype.setHitColor=function(t){if(!t)for(t=r.Color.Random();this.flow.hitColorToGroup[t.rgbaString];)t=r.Color.Random();this.hitColor=t,this.flow.hitColorToGroup[this.hitColor.rgbaString]=this},h.prototype.computeTextMetrics=function(){this.flow.flowConnect.context.font=this.style.fontSize+" "+this.style.font;var t=this.flow.flowConnect.context.measureText(this.name);this.textWidth=t.width,t=this.flow.flowConnect.context.measureText("M"),this.flow.flowConnect.context.font=null,this.textHeight=t.actualBoundingBoxAscent+t.actualBoundingBoxDescent,void 0===this.textHeight&&((t=document.createElement("span")).textContent="M",t.style.font=this.style.fontSize+" "+this.style.font,document.body.appendChild(t),this.textHeight=t.offsetHeight,document.body.removeChild(t))},h.prototype.updateRenderState=function(){var t=this.position.transform(this.flow.flowConnect.transform);this.renderState=p.intersects(0,0,this.flow.flowConnect.canvasDimensions.width,this.flow.flowConnect.canvasDimensions.height,t.x,t.y,t.x+this.width*this.flow.flowConnect.scale,t.y+this.height*this.flow.flowConnect.scale)},h.prototype.setContainedNodes=function(){var i=this,o=this.position.transform(this.flow.flowConnect.transform);this.nodes=Object.keys(this.flow.nodes).map(function(t){return i.flow.nodes[t]}).filter(function(t){return!t.group&&t.renderState.viewport===u.ViewPort.INSIDE}).filter(function(t){var e=t.position.transform(i.flow.flowConnect.transform);return p.intersects(o.x,o.y,o.x+i.width*i.flow.flowConnect.scale,o.y+i.height*i.flow.flowConnect.scale,e.x,e.y,e.x+t.width*i.flow.flowConnect.scale,e.y+t.ui.height*i.flow.flowConnect.scale)===u.ViewPort.INSIDE}),this.nodes.forEach(function(t,e){(t.group=i).nodeDeltas[e]=t.position.subtract(i.position)})},h.prototype.recomputeNodePositions=function(){var i=this;this.nodes.forEach(function(t,e){t.position=i.position.add(i.nodeDeltas[e])})},h.prototype.render=function(){this.renderState!==u.ViewPort.OUTSIDE&&(this.flow.flowConnect.context.save(),this._render(),this.flow.flowConnect.context.restore(),this.flow.flowConnect.offGroupContext.save(),this._offRender(),this.flow.flowConnect.offGroupContext.restore())},h.prototype._render=function(){this.flow.flowConnect.context.strokeStyle=this.style.borderColor,this.flow.flowConnect.context.lineWidth=2,this.flow.flowConnect.context.fillStyle=this.style.color,this.flow.flowConnect.context.strokeRect(this.position.x,this.position.y,this.width,this.height),this.flow.flowConnect.context.fillRect(this.position.x,this.position.y,this.width,this.height),this.flow.flowConnect.context.fillStyle=this.style.titleColor,this.flow.flowConnect.context.textBaseline="bottom",this.flow.flowConnect.context.font=this.style.fontSize+" "+this.style.font,this.flow.flowConnect.context.fillText(this.name,this.position.x,this.position.y-10)},h.prototype._offRender=function(){this.flow.flowConnect.offGroupContext.fillStyle=this.hitColor.rgbaCSSString,this.flow.flowConnect.offGroupContext.fillRect(this.position.x,this.position.y,this.width,this.height),this.flow.flowConnect.offGroupContext.fillRect(this.position.x,this.position.y-this.textHeight-10,this.textWidth,this.textHeight+10)},h.prototype.onClick=function(t,e){var i=this;this.call("click",this,t,e);e=this.position.transform(this.flow.flowConnect.transform);t.y<e.y&&this.flow.flowConnect.showGenericInput(e.subtract(0,(10+this.textHeight)*this.flow.flowConnect.scale),this.name,{width:Math.max(this.textWidth,50)*this.flow.flowConnect.scale+"px",height:this.textHeight*this.flow.flowConnect.scale+"px",fontSize:parseInt(this.style.fontSize.replace("px",""))*this.flow.flowConnect.scale+"px",fontFamily:this.style.font},{type:"text"},function(t){i.name=t})},h.prototype.serialize=function(){return{id:this.id,hitColor:this.hitColor.serialize(),position:this.position.serialize(),name:this.name,width:this.width,height:this.height,style:this.style,nodes:this.nodes.map(function(t){return t.id}),nodeDeltas:this.nodeDeltas.map(function(t){return t.serialize()})}},h.deSerialize=function(e,t){var i=new h(e,s.Vector2.deSerialize(t.position),t.width,t.height,t.name,t.style,t.id,r.Color.deSerialize(t.hitColor));return t.nodes.forEach(function(t){i.nodes.push(e.nodes[t])}),t.nodeDeltas.forEach(function(t){i.nodeDeltas.push(s.Vector2.deSerialize(t))}),i},h);function h(t,e,i,o,n,s,r,h){void 0===i&&(i=0),void 0===o&&(o=0),void 0===s&&(s={}),void 0===r&&(r=p.getNewGUID());var l=c.call(this)||this;return l.flow=t,l.width=i,l.height=o,l.style=s,l.id=r,l.hitColor=h,l.nodes=[],l.nodeDeltas=[],l.renderState=u.ViewPort.INSIDE,l.style=a(a({},u.Constant.DefaultGroupStyle()),s),l.id=p.getNewGUID(),l._position=e,l.style.color&&l.style.borderColor||(e=u.Constant.DefaultGroupColors.Random(),l.style.borderColor=e[0],l.style.color=e[1]),l.name=n,l.setHitColor(h),l.computeTextMetrics(),l.flow.on("transform",function(){return l.updateRenderState()}),l}e.Group=n},417:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Hooks=void 0;var i=(o.prototype.on=function(t,e){this.registeredEvents[t]||(this.registeredEvents[t]={});var i=this.lastId;return this.registeredEvents[t][i]=e,this.lastId+=1,i},o.prototype.call=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];this.registeredEvents[t]&&(e?Object.values(this.registeredEvents[t]).forEach(function(t){return t.apply(void 0,e)}):Object.values(this.registeredEvents[t]).forEach(function(t){return t()}))},o.prototype.off=function(t,e){delete this.registeredEvents[t][e]},o);function o(){this.registeredEvents={},this.lastId=0}e.Hooks=i},676:function(t,e,i){var o=this&&this.__createBinding||(Object.create?function(t,e,i,o){void 0===o&&(o=i),Object.defineProperty(t,o,{enumerable:!0,get:function(){return e[i]}})}:function(t,e,i,o){t[o=void 0===o?i:o]=e[i]}),n=this&&this.__exportStar||function(t,e){for(var i in t)"default"===i||Object.prototype.hasOwnProperty.call(e,i)||o(e,t,i)};Object.defineProperty(e,"__esModule",{value:!0}),n(i(278),e),n(i(907),e),n(i(894),e),n(i(55),e),n(i(900),e),n(i(166),e),n(i(232),e),n(i(417),e),n(i(587),e),n(i(915),e)},232:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0})},55:function(t,e,i){var o,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),d=this&&this.__assign||function(){return(d=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.Node=e.NodeButton=void 0;var s=i(281),f=i(522),y=i(637),g=i(974),x=i(278),w=i(900),i=i(417),r=(h.prototype.setHitColor=function(){for(var t=x.Color.Random();this.node.hitColorToNodeButton[t.rgbaString];)t=x.Color.Random();this.hitColor=t,this.node.hitColorToNodeButton[this.hitColor.rgbaString]=this},h.prototype.render=function(){this.node.context.save(),this._render(this,this.node.position.add(this.deltaX,this.node.style.titleHeight/2-this.node.style.nodeButtonSize/2)),this.node.context.restore(),this.node.offUIContext.save(),this._offUIRender(),this.node.offUIContext.restore()},h.prototype._offUIRender=function(){this.node.offUIContext.fillStyle=this.hitColor.rgbaCSSString,this.node.offUIContext.fillRect(this.node.position.x+this.deltaX,this.node.position.y+this.node.style.titleHeight/2-this.node.style.nodeButtonSize/2,this.node.style.nodeButtonSize,this.node.style.nodeButtonSize)},h);function h(t,e,i,o){this.node=t,this.callback=e,this._render=i,this.align=o,this.deltaX=0,this.setHitColor()}e.NodeButton=r;var m,n=(m=i.Hooks,n(l,m),Object.defineProperty(l.prototype,"position",{get:function(){return this._position},set:function(t){this._position=t,this.reflow(),this.ui.update(),this.updateRenderState()},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"zIndex",{get:function(){return this._zIndex},set:function(t){this._zIndex=t,this.flow.sortedNodes.remove(this)&&this.flow.sortedNodes.add(this)},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t,this.ui.width=t,this.ui.update()},enumerable:!1,configurable:!0}),l.prototype.setupProps=function(e){var n=this;this.props=new Proxy({},{set:function(t,e,i){void 0===t[e]&&(n.propObservers[e]=[]);var o=t[e];return t[e]=i,n.propObservers[e].forEach(function(t){return t(o,i)}),n.registeredEvents.propchange&&n.call("propchange",n,e,o,i),!0}}),Object.keys(e).forEach(function(t){n.props[t]=e[t]})},l.prototype.addPropObserver=function(t,e){void 0!==this.props[t]&&this.propObservers[t].push(e)},l.prototype.removePropObserver=function(t,e){this.propObservers[t]&&this.propObservers[t].splice(this.propObservers[t].indexOf(e),1)},l.prototype.setHitColor=function(t){if(!t)for(t=x.Color.Random();this.flow.hitColorToNode[t.rgbaString];)t=x.Color.Random();this.hitColor=t,this.flow.hitColorToNode[this.hitColor.rgbaString]=this},l.prototype.addTerminal=function(t){((t=!(t instanceof w.Terminal)?w.Terminal.deSerialize(this,t):t).type===f.TerminalType.IN?this.inputs:this.outputs).push(t),this.reflow(),this.ui.reflow()},l.prototype.addNodeButton=function(t,e,i){var o=new r(this,t,e,i),e=this.nodeButtons.filter(function(t){return t.align===o.align}).length,e=i===f.Align.Left?e*(this.style.nodeButtonSize+this.style.nodeButtonSpacing):this.width-e*(this.style.nodeButtonSize+this.style.nodeButtonSpacing)-this.style.nodeButtonSize;return o.deltaX=e,this.nodeButtons.push(o),o},l.prototype.dispose=function(){this.flow.removeNode(this.id)},l.prototype.reflow=function(){var t=this.position.y+this.style.terminalRowHeight/2+this.style.padding/2+this.style.titleHeight;this.inputs.length>this.outputs.length?(this.recalculateInputTerminals(t),t=this.position.y+this.inputs.length*this.style.terminalRowHeight/2-this.outputs.length*this.style.terminalRowHeight/2+this.style.terminalRowHeight/2+this.style.padding/2+this.style.titleHeight,this.recalculateOutputTerminals(t)):(this.recalculateOutputTerminals(t),t=this.position.y+this.outputs.length*this.style.terminalRowHeight/2-this.inputs.length*this.style.terminalRowHeight/2+this.style.terminalRowHeight/2+this.style.padding/2+this.style.titleHeight,this.recalculateInputTerminals(t))},l.prototype.toggleNodeState=function(){this.renderState.nodeState=this.renderState.nodeState===f.NodeState.MAXIMIZED?f.NodeState.MINIMIZED:f.NodeState.MAXIMIZED},l.prototype.updateRenderState=function(){var t=this.position.transform(this.flow.flowConnect.transform);this.renderState.viewport=g.intersects(0,0,this.flow.flowConnect.canvasDimensions.width,this.flow.flowConnect.canvasDimensions.height,t.x,t.y,t.x+this.width*this.flow.flowConnect.scale,t.y+(this.renderState.nodeState===f.NodeState.MAXIMIZED?this.ui.height:this.style.titleHeight)*this.flow.flowConnect.scale),.6<this.flow.flowConnect.scale?this.renderState.lod=f.LOD.LOD2:this.flow.flowConnect.scale<=.6&&.3<this.flow.flowConnect.scale?this.renderState.lod=f.LOD.LOD1:this.renderState.lod=f.LOD.LOD0,this.renderState.viewport===f.ViewPort.INTERSECT&&this.ui.updateRenderState()},l.prototype.recalculateInputTerminals=function(e){var i=this;this.inputs.forEach(function(t){t.position.x=i.position.x-i.style.terminalStripMargin-t.style.radius,t.position.y=e,e+=i.style.terminalRowHeight})},l.prototype.recalculateOutputTerminals=function(e){var i=this;this.outputs.forEach(function(t){t.position.x=i.position.x+i.ui.width+i.style.terminalStripMargin+t.style.radius,t.position.y=e,e+=i.style.terminalRowHeight})},l.prototype.getHitTerminal=function(t,e,i){var o=null;i=i.transform(this.flow.flowConnect.transform);var n=this.position.transform(this.flow.flowConnect.transform);return(0<this.inputs.length+this.inputsUI.length&&i.x<n.x||0<this.outputs.length+this.outputsUI.length&&i.x>n.x+this.ui.width*this.flow.flowConnect.scale)&&(o=this.hitColorToTerminal[t]),this.currHitTerminal&&this.currHitTerminal!==o&&(this.currHitTerminal.onExit(e,i),o&&o.onEnter(e,i)),o},l.prototype.getHitUINode=function(t){t=this.hitColorToUI[t];return t instanceof y.Container?null:t},l.prototype.getHitNodeButton=function(t){return this.hitColorToNodeButton[t]},l.prototype.getInput=function(e){if("string"==typeof e){var t=this.inputs.find(function(t){return t.name===e});if(t)return t.getData()}else if(this.inputs[e])return this.inputs[e].getData();return null},l.prototype.setOutput=function(e,t){if("string"==typeof e){var i=this.outputs.find(function(t){return t.name===e});if(i)return i.setData(t)}else this.outputs[e]&&this.outputs[e].setData(t)},l.prototype.run=function(){this.flow.state!==f.FlowState.Stopped&&this.call("process",this,this.inputs.map(function(t){return 0<t.connectors.length?t.connectors[0].data:null}))},l.prototype.render=function(){this.renderState.viewport!==f.ViewPort.OUTSIDE&&(this.renderState.nodeState===f.NodeState.MAXIMIZED&&this.ui.render(),this.context.save(),this._render(),this.context.restore(),this.nodeButtons.forEach(function(t){return t.render()}),this.offContext.save(),this._offRender(),this.offContext.restore())},l.prototype._render=function(){var t,e,i=this;this.renderState.nodeState===f.NodeState.MAXIMIZED?0<this.renderState.lod&&(this.inputs.forEach(function(t){return t.render()}),this.outputs.forEach(function(t){return t.render()})):(this.context.fillStyle="green",0<this.inputs.length+this.inputsUI.length&&(e=(0<this.inputs.length?this.inputs:this.inputsUI)[0].style.radius,this.context.fillRect(this.position.x-this.style.terminalStripMargin-2*e,this.position.y+this.style.titleHeight/2-e,2*e,2*e)),0<this.outputs.length+this.outputsUI.length&&(e=(0<this.outputs.length?this.outputs:this.outputsUI)[0].style.radius,this.context.fillRect(this.position.x+this.width+this.style.terminalStripMargin,this.position.y+this.style.titleHeight/2-e,2*e,2*e))),this.context.fillStyle=this.style.titleColor,this.context.font=this.style.titleFontSize+" "+this.style.titleFont,this.context.textBaseline="middle",this.context.fillText(this.name,this.position.x+this.ui.width/2-this.context.measureText(this.name).width/2,this.position.y+this.style.titleHeight/2),this.renderState.nodeState===f.NodeState.MAXIMIZED&&(this.context.fillStyle=this.style.color,this.context.font=this.style.fontSize+" "+this.style.font,this.context.textBaseline="middle",this.inputs.forEach(function(t){i.context.fillText(t.name,t.position.x+t.style.radius+i.style.terminalStripMargin+i.style.padding,t.position.y)}),this.outputs.forEach(function(t){i.context.fillText(t.name,t.position.x-t.style.radius-i.style.terminalStripMargin-i.style.padding-i.context.measureText(t.name).width,t.position.y)})),this.focused&&(this.context.strokeStyle="#000",this.context.lineWidth=2,t=0===this.inputs.length?0===this.inputsUI.length?0:2*this.inputsUI[0].style.radius:2*this.inputs[0].style.radius,t+=2*this.style.terminalStripMargin,e=0===this.outputs.length?0===this.outputsUI.length?0:2*this.outputsUI[0].style.radius:2*this.outputs[0].style.radius,e+=2*this.style.terminalStripMargin,this.context.strokeRoundRect(this.position.x-t,this.position.y,this.width+t+e,this.renderState.nodeState===f.NodeState.MAXIMIZED?this.ui.height+this.style.padding:this.style.titleHeight,4))},l.prototype._offRender=function(){this.offContext.fillStyle=this.hitColor.rgbaCSSString;var t,e=this.position.x,i=this.position.y,o=0,n=0;this.inputs.length+this.inputsUI.length!==0&&(t=(0<this.inputs.length?this.inputs:this.inputsUI)[0].style.radius,e-=this.style.terminalStripMargin+2*t,o=2*t+this.style.terminalStripMargin),this.outputs.length+this.outputsUI.length!==0&&(n=2*(t=(0<this.outputs.length?this.outputs:this.outputsUI)[0].style.radius)+this.style.terminalStripMargin),this.offContext.fillRect(e,i,this.ui.width+o+n,this.renderState.nodeState===f.NodeState.MAXIMIZED?this.ui.height:this.style.titleHeight)},l.prototype.onDown=function(t,e){this.call("down",this,t,e);var i=x.Color.rgbaToString(this.flow.flowConnect.offUIContext.getImageData(t.x,t.y,1,1).data);this.currHitUINode=this.getHitUINode(i),this.currHitUINode&&this.currHitUINode.onDown(t,e);i=this.getHitTerminal(i,t,e);i&&(this.currHitTerminal=i,this.currHitTerminal.onDown(t,e))},l.prototype.onOver=function(t,e){this.call("over",this,t,e);var i=x.Color.rgbaToString(this.flow.flowConnect.offUIContext.getImageData(t.x,t.y,1,1).data),o=this.getHitTerminal(i,t,e);o!==this.prevHitTerminal?(this.prevHitTerminal&&this.prevHitTerminal.onExit(t,e),o&&o.onEnter(t,e)):o&&!this.currHitTerminal&&o.onOver(t,e),this.prevHitTerminal=o;i=this.getHitUINode(i);i!==this.prevHitUINode?(this.prevHitUINode&&this.prevHitUINode.onExit(t,e),i&&i.onEnter(t,e)):i&&!this.currHitUINode&&i.onOver(t,e),this.prevHitUINode=i},l.prototype.onEnter=function(t,e){this.call("enter",this,t,e)},l.prototype.onExit=function(t,e){this.call("exit",this,t,e);var i=x.Color.rgbaToString(this.flow.flowConnect.offUIContext.getImageData(t.x,t.y,1,1).data),i=this.getHitTerminal(i,t,e);i&&i.onExit(t,e),this.prevHitTerminal&&this.prevHitTerminal.onExit(t,e),this.prevHitTerminal=null,this.currHitTerminal&&this.currHitTerminal.onExit(t,e)},l.prototype.onUp=function(t,e){this.call("up",this,t,e);var i=x.Color.rgbaToString(this.flow.flowConnect.offUIContext.getImageData(t.x,t.y,1,1).data);this.currHitUINode=null;var o=this.getHitUINode(i);o&&o.onUp(t.clone(),e.clone());i=this.getHitTerminal(i,t,e);i&&i.onUp(t,e)},l.prototype.onClick=function(t,e){this.call("click",this,t,e);var i,o=x.Color.rgbaToString(this.flow.flowConnect.offUIContext.getImageData(t.x,t.y,1,1).data);e.y<this.position.y+this.style.titleHeight*this.flow.flowConnect.scale?(i=this.getHitNodeButton(o))&&i.callback():(this.currHitTerminal&&this.currHitTerminal.onClick(t,e),(o=this.getHitUINode(o))&&o.onClick(t.clone(),e.clone()))},l.prototype.onDrag=function(t,e){this.call("drag",this,t,e),this.currHitUINode&&this.currHitUINode.draggable&&this.currHitUINode.onDrag(t,e)},l.prototype.onContextMenu=function(){this.call("rightclick",this)},l.prototype.createLabel=function(t,e,i,o,n){return new y.Label(this,t,e,i,o,n)},l.prototype.createImage=function(t,e,i){return new y.Image(this,t,e,i)},l.prototype.createSlider=function(t,e,i,o,n,s,r,h,l){return new y.Slider(this,t,e,i,o,n,s,r,h,l)},l.prototype.createHozLayout=function(t,e){return new y.HorizontalLayout(this,t,e)},l.prototype.createButton=function(t,e,i,o,n){return new y.Button(this,t,e,i,o,n)},l.prototype.createToggle=function(t,e,i,o,n){return new y.Toggle(this,t,e,i,o,n)},l.prototype.createSelect=function(t,e,i,o,n,s){return new y.Select(this,t,e,i,o,n,s)},l.prototype.createSource=function(t,e,i,o,n,s){return new y.Source(this,t,e,i,o,n,s)},l.prototype.createDisplay=function(t,e,i){return new y.Display(this,t,e,i)},l.prototype.createInput=function(t,e,i,o,n,s){return new y.Input(this,t,e,i,o,n,s)},l.prototype.serialize=function(){return{id:this.id,name:this.name,position:this.position.serialize(),width:this.width,props:this.props,inputs:this.inputs.map(function(t){return t.serialize()}),outputs:this.outputs.map(function(t){return t.serialize()}),style:this.style,terminalStyle:this.terminalStyle,hitColor:this.hitColor.serialize(),zIndex:this.zIndex,focused:this.focused,renderState:this.renderState,ui:this.ui.serialize()}},l.deSerialize=function(t,e){return new l(t,e.name,s.Vector2.deSerialize(e.position),e.width,e.inputs,e.outputs,e.style,e.terminalStyle,e.props,e.id,x.Color.deSerialize(e.hitColor),e.ui)},l);function l(t,e,i,o,n,s,r,h,l,a,c,u){void 0===r&&(r={}),void 0===h&&(h={}),void 0===l&&(l={}),void 0===a&&(a=g.getNewGUID());var p=m.call(this)||this;return p.flow=t,p.name=e,p.style=r,p.terminalStyle=h,p.id=a,p.hitColor=c,p.focused=!1,p.inputs=[],p.outputs=[],p.inputsUI=[],p.outputsUI=[],p.nodeButtons=[],p.propObservers={},p.renderState={viewport:f.ViewPort.INSIDE,nodeState:f.NodeState.MAXIMIZED,lod:f.LOD.LOD2},p.group=null,p._width=o,p.style=d(d({},f.Constant.DefaultNodeStyle()),r),p._position=i,p.setupProps(l),p.hitColorToUI={},p.hitColorToTerminal={},p.hitColorToNodeButton={},p.zIndex=0,p.context=t.flowConnect.context,p.offContext=t.flowConnect.offContext,p.offUIContext=t.flowConnect.offUIContext,p.setHitColor(c),(c=p.inputs).push.apply(c,n.map(function(t){return new w.Terminal(p,f.TerminalType.IN,t.dataType,t.name,t.style||d({},h),null,t.id||null,t.hitColor?x.Color.deSerialize(t.hitColor):null)})),(n=p.outputs).push.apply(n,s.map(function(t){return new w.Terminal(p,f.TerminalType.OUT,t.dataType,t.name,t.style||d({},h),null,t.id||null,t.hitColor?x.Color.deSerialize(t.hitColor):null)})),p.ui=u?u instanceof y.Container?u:y.Container.deSerialize(p,u):new y.Container(p,o),p.addNodeButton(function(){return p.toggleNodeState()},function(t,e){p.context.fillStyle=p.style.maximizeButtonColor,p.context.fillRect(e.x,e.y,p.style.nodeButtonSize,p.style.nodeButtonSize)},f.Align.Left),p.reflow(),p.ui.update(),p.flow.on("transform",function(){return p.updateRenderState()}),p}e.Node=n},587:function(t,e,i){var o,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0}),e.SubFlowNode=void 0;var d,f=i(522),s=i(281),r=i(278),h=i(894),l=i(55),y=i(900),n=(d=l.Node,n(a,d),a.prototype.run=function(){this.flow.state!==f.FlowState.Stopped&&(this.call("process",this),this.subFlow.start())},a.prototype.serialize=function(){return{id:this.id,name:this.name,position:this.position.serialize(),width:this.width,props:this.props,inputs:this.inputs.map(function(t){return t.serialize()}),outputs:this.outputs.map(function(t){return t.serialize()}),style:this.style,terminalStyle:this.terminalStyle,hitColor:this.hitColor.serialize(),zIndex:this.zIndex,focused:this.focused,renderState:this.renderState,ui:this.ui.serialize(),subFlow:this.subFlow.serialize()}},a.deSerialize=function(t,e){var i=h.Flow.deSerialize(t.flowConnect,e.subFlow);return new a(t,e.name,s.Vector2.deSerialize(e.position),e.width,e.style,e.terminalStyle,e.props,e.inputs,e.outputs,i,e.id,r.Color.deSerialize(e.hitColor))},a);function a(t,e,i,o,n,s,r,h,l,a,c,u){void 0===n&&(n={}),void 0===s&&(s={}),void 0===r&&(r={});var p=d.call(this,t,e,i,o,h||[],l||[],n,s,r,c,u)||this;return p.subFlow=a,p.subFlow.on("add-input",function(t,e){var i=new y.Terminal(p,f.TerminalType.IN,e.outputs[0].dataType,e.outputs[0].name);e.proxyTerminal=i,p.addTerminal(i)}),p.subFlow.on("add-output",function(t,e){var i=new y.Terminal(p,f.TerminalType.OUT,e.inputs[0].dataType,e.inputs[0].name);e.proxyTerminal=i,p.addTerminal(i)}),p.subFlow.inputs.forEach(function(t,e){return t.proxyTerminal=p.inputs[e]}),p.subFlow.outputs.forEach(function(t,e){return t.proxyTerminal=p.outputs[e]}),p.addNodeButton(function(){p.flow.flowConnect.render(p.subFlow)},function(t,e){p.context.strokeStyle=p.style.expandButtonColor,p.context.beginPath(),p.context.moveTo(e.x,e.y+p.style.nodeButtonSize/2),p.context.lineTo(e.x,e.y+p.style.nodeButtonSize),p.context.lineTo(e.x+p.style.nodeButtonSize,e.y),p.context.lineTo(e.x+p.style.nodeButtonSize,e.y+p.style.nodeButtonSize/2),p.context.moveTo(e.x+p.style.nodeButtonSize,e.y),p.context.lineTo(e.x+p.style.nodeButtonSize/2,e.y),p.context.moveTo(e.x,e.y+p.style.nodeButtonSize),p.context.lineTo(e.x+p.style.nodeButtonSize/2,e.y+p.style.nodeButtonSize),p.context.closePath(),p.context.stroke()},f.Align.Right),p}e.SubFlowNode=n},900:function(t,e,i){var o,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),a=this&&this.__assign||function(){return(a=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.Terminal=void 0;var c,u=i(281),p=i(522),d=i(974),s=i(278),r=i(907),i=i(417),n=(c=i.Hooks,n(h,c),h.prototype.setHitColor=function(t){if(!t)for(t=s.Color.Random();this.node.hitColorToTerminal[t.rgbaString]||this.node.hitColorToUI[t.rgbaString];)t=s.Color.Random();this.hitColor=t,this.node.hitColorToTerminal[this.hitColor.rgbaString]=this},h.prototype.render=function(){this.node.context.save(),this.focus&&(this.node.context.beginPath(),this.node.context.arc(this.position.x,this.position.y,3*this.style.radius,0,2*Math.PI),this.node.context.fillStyle=this.style.focusColor,this.node.context.fill()),"event"===this.dataType?(this.node.context.beginPath(),this.node.context.moveTo(this.position.x,this.position.y-1.3*this.style.radius),this.node.context.lineTo(this.position.x+1.3*this.style.radius,this.position.y),this.node.context.lineTo(this.position.x,this.position.y+1.3*this.style.radius),this.node.context.lineTo(this.position.x-1.3*this.style.radius,this.position.y),this.node.context.lineTo(this.position.x,this.position.y-1.3*this.style.radius),this.node.context.closePath()):(this.node.context.beginPath(),this.node.context.arc(this.position.x,this.position.y,this.style.radius,0,2*Math.PI)),this.node.context.fillStyle=this.focus?"#00ff00":this.node.flow.terminalTypeColors[this.dataType]||"#888",this.node.context.strokeStyle=this.style.borderColor,this.node.context.shadowBlur=this.style.shadowBlur,this.node.context.shadowColor=this.style.shadowColor,this.node.context.fill(),this.node.context.stroke(),this.node.context.restore(),this.offUIRender()},h.prototype.offUIRender=function(){this.node.offUIContext.save(),this.node.offUIContext.beginPath(),this.node.offUIContext.arc(this.position.x,this.position.y,this.style.radius+this.node.style.terminalStripMargin,0,2*Math.PI),this.node.offUIContext.fillStyle=this.hitColor.rgbaCSSString,this.node.offUIContext.fill(),this.node.offUIContext.restore()},h.prototype.onEnter=function(t,e){this.call("enter",this,t,e),this.focus=!0,this.node.flow.flowConnect.cursor="pointer"},h.prototype.onExit=function(t,e){this.call("exit",this,t,e),this.focus=!1,this.node.flow.flowConnect.cursor="unset"},h.prototype.onDown=function(t,e){var i;this.call("down",this,t,e),0<this.connectors.length?this.type===p.TerminalType.IN?(this.connectors[0].endNode.currHitTerminal=null,this.connectors[0].end=null,this.connectors[0].floatingTip=e,this.node.flow.flowConnect.floatingConnector=this.connectors[0],this.connectors[0].start.call("disconnect",this.connectors[0].start,this.connectors[0]),this.call("disconnect",this,this.connectors[0]),this.connectors.pop()):this.node.flow.flowConnect.floatingConnector||(i=new r.Connector(this.node.flow,this,null,e,{}),this.node.flow.connectors[i.id]=i,this.node.flow.flowConnect.floatingConnector=i):this.node.flow.flowConnect.floatingConnector||(i=new r.Connector(this.node.flow,this.type===p.TerminalType.IN?null:this,this.type===p.TerminalType.IN?this:null,e,{}),this.node.flow.connectors[i.id]=i,this.node.flow.flowConnect.floatingConnector=i)},h.prototype.onUp=function(t,e){this.call("up",this,t,e)},h.prototype.onDrag=function(t,e){this.call("drag",this,t,e)},h.prototype.onClick=function(t,e){this.call("click",this,t,e)},h.prototype.onOver=function(t,e){this.call("over",this,t,e)},h.prototype.onContextMenu=function(){this.call("rightclick",this)},h.prototype.onEvent=function(t){this.type===p.TerminalType.IN&&this.eventCallback&&this.eventCallback(t)},h.prototype.emit=function(e){this.type===p.TerminalType.OUT&&0!==this.connectors.length&&this.connectors.forEach(function(t){t.end&&t.end.onEvent(e)})},h.prototype.serialize=function(){return{id:this.id,type:this.type,dataType:this.dataType,name:this.name,style:this.style,hitColor:this.hitColor.serialize()}},h.deSerialize=function(t,e){return new h(t,e.type,e.dataType,e.name,e.style,null,e.id,s.Color.deSerialize(e.hitColor))},h);function h(t,e,i,o,n,s,r,h){void 0===n&&(n={});var l=c.call(this)||this;return l.node=t,l.type=e,l.dataType=i,l.name=o,l.style=n,l.eventCallback=s,l.id=r,l.hitColor=h,l.style=a(a({},p.Constant.DefaultTerminalStyle()),n),l.id=r||d.getNewGUID(),l.setHitColor(h),l.connectors=[],l.position=u.Vector2.Zero(),l.focus=!1,l.type===p.TerminalType.IN?l.getData=function(){return 0<l.connectors.length?l.connectors[0].data:null}:l.setData=function(e){l.connectors.forEach(function(t){return t.data=e})},l}e.Terminal=n},915:function(t,e,i){var o,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0}),e.TunnelNode=void 0;var p,s=i(281),r=i(278),i=i(55),n=(p=i.Node,n(h,p),Object.defineProperty(h.prototype,"proxyTerminal",{get:function(){return this._proxyTerminal},set:function(t){var e=this;this._proxyTerminal=t,this._proxyTerminal.on("data",function(t){e.outputs[0].setData(t)})},enumerable:!1,configurable:!0}),h.prototype.serialize=function(){return{id:this.id,name:this.name,position:this.position.serialize(),width:this.width,props:this.props,inputs:this.inputs.map(function(t){return t.serialize()}),outputs:this.outputs.map(function(t){return t.serialize()}),style:this.style,terminalStyle:this.terminalStyle,hitColor:this.hitColor.serialize(),zIndex:this.zIndex,focused:this.focused,renderState:this.renderState,ui:this.ui.serialize(),proxyTerminalId:this.proxyTerminal.id}},h.deSerialize=function(t,e){return new h(t,e.name,s.Vector2.deSerialize(e.position),e.width,e.inputs,e.outputs,e.style,e.terminalStyle,e.props,e.id,r.Color.deSerialize(e.hitColor))},h);function h(t,e,i,o,n,s,r,h,l,a,c){var u=p.call(this,t,e,i,o,n,s,r,h,l,a,c)||this;return 0<u.inputs.length?u.inputs[0].on("data",function(t){u.proxyTerminal.setData(t)}):u.outputs[0].on("connect",function(t,e){0<u.proxyTerminal.connectors.length&&(e.data=u.proxyTerminal.connectors[0].data)}),u}e.TunnelNode=n},184:function(t,e,i){var o,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=this&&this.__createBinding||(Object.create?function(t,e,i,o){void 0===o&&(o=i),Object.defineProperty(t,o,{enumerable:!0,get:function(){return e[i]}})}:function(t,e,i,o){t[o=void 0===o?i:o]=e[i]}),r=this&&this.__exportStar||function(t,e){for(var i in t)"default"===i||Object.prototype.hasOwnProperty.call(e,i)||s(e,t,i)};Object.defineProperty(e,"__esModule",{value:!0}),e.FlowConnect=void 0;var h,c=i(676),u=i(281),p=i(522),d=i(974),n=(h=c.Hooks,n(l,h),Object.defineProperty(l.prototype,"cursor",{get:function(){return this.canvasElement.style.cursor},set:function(t){this.canvasElement.style.cursor=t},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"scale",{get:function(){return this.transform.a},enumerable:!1,configurable:!0}),l.prototype.registerChangeListeners=function(){var t=this,e=!1;document.addEventListener("scroll",function(){e||(window.requestAnimationFrame(function(){t.calculateCanvasDimension(),e=!1}),e=!0)}),new ResizeObserver(function(){t.calculateCanvasDimension()}).observe(this.canvasElement)},l.prototype.prepareCanvas=function(t,e,i){t?t instanceof HTMLDivElement?(this.canvasElement=document.createElement("canvas"),e&&i?(this.canvasElement.width=e,this.canvasElement.height=i):(this.canvasElement.width=t.clientWidth,this.canvasElement.height=t.clientHeight),t.appendChild(this.canvasElement)):(this.canvasElement=t,e&&i&&(this.canvasElement.width=e,this.canvasElement.height=i)):(this.canvasElement=document.createElement("canvas"),this.canvasElement.width=document.body.clientWidth,this.canvasElement.height=document.body.clientHeight,document.body.appendChild(this.canvasElement)),this.context=this.canvasElement.getContext("2d")},l.prototype.setupHitCanvas=function(){"undefined"!=typeof OffscreenCanvas&&"undefined"!=typeof OffscreenCanvasRenderingContext2D?(this.offCanvasElement=new OffscreenCanvas(this.canvasDimensions.width,this.canvasDimensions.height),this.offUICanvasElement=new OffscreenCanvas(this.canvasDimensions.width,this.canvasDimensions.height),this.offGroupCanvasElement=new OffscreenCanvas(this.canvasDimensions.width,this.canvasDimensions.height)):(this.offCanvasElement=document.createElement("canvas"),this.offUICanvasElement=document.createElement("canvas"),this.offGroupCanvasElement=document.createElement("canvas")),this.offContext=this.offCanvasElement.getContext("2d"),this.offUIContext=this.offUICanvasElement.getContext("2d"),this.offGroupContext=this.offGroupCanvasElement.getContext("2d")},l.prototype.attachStyles=function(){this.canvasElement.style.touchAction="none";var t=document.createElement("style");t.innerHTML="input.flow-connect-input { position: fixed; visibility: hidden; pointer-events: none; z-index: 100; border: none; border-radius: 0; box-sizing: border-box;} input.flow-connect-input:focus { outline: none; }",document.getElementsByTagName("head")[0].appendChild(t)},l.prototype.calculateCanvasDimension=function(){var t=this.canvasElement.getBoundingClientRect();this.canvasDimensions={top:Math.round(t.top-window.scrollY),left:Math.round(t.left-window.scrollX),width:Math.round(t.width),height:Math.round(t.height)},this.offCanvasElement.width=this.canvasDimensions.width,this.offCanvasElement.height=this.canvasDimensions.height,this.offUICanvasElement.width=this.canvasDimensions.width,this.offUICanvasElement.height=this.canvasDimensions.height,this.offGroupCanvasElement.width=this.canvasDimensions.width,this.offGroupCanvasElement.height=this.canvasDimensions.height},l.prototype.polyfill=function(){CanvasRenderingContext2D.prototype.roundRect=function(t,e,i,o,n){this.beginPath(),this.moveTo(t+n,e),this.lineTo(t+i-n,e),this.quadraticCurveTo(t+i,e,t+i,e+n),this.lineTo(t+i,e+o-n),this.quadraticCurveTo(t+i,e+o,t+i-n,e+o),this.lineTo(t+n,e+o),this.quadraticCurveTo(t,e+o,t,e+o-n),this.lineTo(t,e+n),this.quadraticCurveTo(t,e,t+n,e),this.closePath()},CanvasRenderingContext2D.prototype.strokeRoundRect=function(t,e,i,o,n){void 0===n&&(n=5),this.roundRect(t,e,i,o,n),this.stroke()},CanvasRenderingContext2D.prototype.fillRoundRect=function(t,e,i,o,n){void 0===n&&(n=5),this.roundRect(t,e,i,o,n),this.fill()}},l.prototype.createFlow=function(e){return void 0===e&&(e={name:"New Flow",rules:{},terminalTypeColors:{}}),Object.keys(p.Constant.DefaultRules).forEach(function(t){return e.rules[t]=p.Constant.DefaultRules[t]}),new c.Flow(this,e.name,e.rules,e.terminalTypeColors)},l.prototype.registerEvents=function(){var r,h=this,l=u.Vector2.Zero(),a=-1;window.onkeydown=function(t){h.keymap[t.key]||(h.keymap[t.key]=!0)},window.onkeyup=function(t){h.keymap[t.key]=!1},this.canvasElement.onpointerdown=function(t){h.currFlow&&(h.addPointer(t.pointerId,h.getRelativePosition(t)),1===h.pointers.length?(l=h.pointers[0].screenPosition,h.currHitNode=h.getHitNode(h.pointers[0].screenPosition),h.currHitNode?(h.currHitNode.zIndex=1/0,h.keymap.Control?h.currHitNode.focused=!h.currHitNode.focused:(h.currFlow.removeAllFocus(),h.currHitNode.focused=!0),h.currHitNode.onDown(h.pointers[0].screenPosition.clone(),h.pointers[0].realPosition.clone()),r=h.currHitNode.position.subtract(h.pointers[0].realPosition)):h.keymap.Control?(h.keymap.Control||h.touchControls.CreateGroup)&&(h.groupStartPoint=h.pointers[0].realPosition.clone(),h.currGroup=new c.Group(h.currFlow,h.groupStartPoint.clone(),0,0,"New Group")):(h.currFlow.removeAllFocus(),h.currHitGroup=h.getHitGroup(h.pointers[0].screenPosition),h.currHitGroup&&(r=h.currHitGroup.position.subtract(h.pointers[0].realPosition)))):(h.currHitNode=null,h.currHitGroup=null,h.currFlow.removeAllFocus(),h.floatingConnector&&h.fallbackConnection()))},this.canvasElement.onpointerup=function(t){var e,i,o;h.currFlow&&(h.removePointer(h.pointers,t),h.pointers.length<2&&(a=-1),i=(e=h.getRelativePosition(t)).transform(h.inverseTransform),h.currHitNode&&h.handleGrouping(e),h.currHitNode=null,h.currHitGroup=null,(o=h.getHitNode(e))&&o.onUp(e.clone(),i.clone()),h.currGroup&&(t=h.currGroup,h.currGroup=null,10<t.width&&10<t.height&&(h.currFlow.groups.push(t),t.setContainedNodes())),h.floatingConnector&&h.handleConnection(o,e,i))},this.canvasElement.onpointerout=function(t){var e,i;h.currFlow&&(h.removePointer(h.pointers,t),0===h.pointers.length&&(h.currHitNode&&(i=h.getRelativePosition(t),h.handleGrouping(i)),h.currHitNode=null,h.currHitGroup=null),h.currGroup&&(e=h.currGroup,h.currGroup=null,10<e.width&&10<e.height&&(h.currFlow.groups.push(e),e.setContainedNodes())),h.floatingConnector&&h.fallbackConnection(),h.prevHitNode&&(t=(i=h.getRelativePosition(t)).transform(h.inverseTransform),h.prevHitNode.onExit(i,t),h.prevHitNode=null))},this.canvasElement.onpointermove=function(t){var e,i,o,n,s;h.currFlow&&(i=(e=h.getRelativePosition(t)).transform(h.inverseTransform),h.updatePointer(t.pointerId,e,i),2===h.pointers.length&&(n=u.Vector2.Distance(h.pointers[0].screenPosition,h.pointers[1].screenPosition),0<a&&n!==a&&h.handleZoom(a<n,u.Vector2.Midpoint(h.pointers[0].screenPosition,h.pointers[1].screenPosition),h.pinchScaleDelta),a=n),h.currGroup&&(i.x<h.groupStartPoint.x&&(h.currGroup._position.x=i.x),h.currGroup.width=Math.abs(h.groupStartPoint.x-i.x),i.y<h.groupStartPoint.y&&(h.currGroup._position.y=i.y),h.currGroup.height=Math.abs(h.groupStartPoint.y-i.y)),h.currHitNode?(h.currHitNode.onDrag(e.clone(),i.clone()),h.currHitNode.currHitUINode&&h.currHitNode.currHitUINode.draggable||h.currHitNode.currHitTerminal||h.floatingConnector||(h.currHitNode.position=i.add(r),(s=h.getHitGroup(e))&&s===h.currHitNode.group&&(o=s.position.transform(h.transform),n=h.currHitNode.position.transform(h.transform),d.intersects(o.x,o.y,o.x+s.width*h.scale,o.y+s.height*h.scale,n.x,n.y,n.x+h.currHitNode.width*h.scale,n.y+h.currHitNode.ui.height*h.scale)===p.ViewPort.INSIDE&&(n=s.nodes.findIndex(function(t){return t.id===h.currHitNode.id}),s.nodeDeltas[n]=h.currHitNode.position.subtract(s.position))))):h.currHitGroup?h.currHitGroup.position=i.add(r):1!==h.pointers.length||h.keymap.Control||h.touchControls.CreateGroup||(s=e.subtract(l).multiplyInPlace(1/h.scale),l=e,h.updateTransform(null,null,s)),h.floatingConnector&&(h.floatingConnector.floatingTip=i),"mouse"!==t.pointerType||h.currHitNode||((t=h.getHitNode(e))!==h.prevHitNode?(h.prevHitNode&&h.prevHitNode.onExit(e,i),t&&t.onEnter(e,i)):t&&!h.currHitNode&&t.onOver(e,i),h.prevHitNode=t))},this.canvasElement.onclick=function(t){var e,i;h.currFlow&&(i=(e=h.getRelativePosition(t)).transform(h.inverseTransform),(t=h.getHitNode(e))&&t.onClick(e.clone(),i.clone()),t||(t=h.getHitGroup(e))&&t.onClick(e.clone(),i.clone()))},this.canvasElement.oncontextmenu=function(t){h.currFlow&&(t.preventDefault(),t=h.getRelativePosition(t),(t=h.getHitNode(t))&&t.onContextMenu(),h.keymap.Control||h.currFlow.removeAllFocus(),t&&(t.focused=!0))},this.canvasElement.onwheel=function(t){h.currFlow&&h.handleZoom(t.deltaY<0,h.getRelativePosition(t),h.wheelScaleDelta)}},l.prototype.setGenericInput=function(){var t=this;this.genericInput.className="flow-connect-input",this.genericInput.style.visibility="hidden",this.genericInput.style.pointerEvents="none",this.genericInput.style.padding="0",this.genericInput.onblur=function(){t.genericInput.style.visibility="hidden",t.genericInput.style.pointerEvents="none",t.genericInput.onchange=null},document.body.appendChild(this.genericInput)},l.prototype.showGenericInput=function(t,e,i,o,n){var s=this;document.activeElement!==this.genericInput&&(Object.keys(i).forEach(function(t){return s.genericInput.style[t]=i[t]}),Object.keys(o).forEach(function(t){return s.genericInput[t]=o[t]}),this.genericInput.style.left=t.x+this.canvasDimensions.left+"px",this.genericInput.style.top=t.y+this.canvasDimensions.top-3+"px",this.genericInput.style.visibility="visible",this.genericInput.style.pointerEvents="all",this.genericInput.value=e,this.genericInput.onchange=function(){return n(s.genericInput.value)},this.genericInput.focus())},l.prototype.updatePointer=function(e,t,i){var o=this.pointers.find(function(t){return t.id===e});o&&(o.screenPosition=t,o.realPosition=i)},l.prototype.handleZoom=function(t,e,i){this.transform.a>=this.maxScale&&t||this.transform.a<=this.minScale&&!t||this.updateTransform(t?i:1/i,e,null)},l.prototype.handleGrouping=function(t){var e,i,o=this,n=this.getHitGroup(t);n&&(t=n.position.transform(this.transform),e=this.currHitNode.position.transform(this.transform),e=d.intersects(t.x,t.y,t.x+n.width*this.scale,t.y+n.height*this.scale,e.x,e.y,e.x+this.currHitNode.width*this.scale,e.y+this.currHitNode.ui.height*this.scale)),this.currHitNode.group&&(this.currHitNode.group!==n?(i=this.currHitNode.group.nodes.findIndex(function(t){return t.id===o.currHitNode.id}),this.currHitNode.group.nodes.splice(i,1),this.currHitNode.group.nodeDeltas.splice(i,1),this.currHitNode.group=null):e!==p.ViewPort.INSIDE&&(i=this.currHitNode.group.nodes.findIndex(function(t){return t.id===o.currHitNode.id}),this.currHitNode.group.nodes.splice(i,1),this.currHitNode.group.nodeDeltas.splice(i,1),this.currHitNode.group=null)),n&&e===p.ViewPort.INSIDE&&((this.currHitNode.group=n).nodes.push(this.currHitNode),n.nodeDeltas.push(this.currHitNode.position.subtract(n.position)))},l.prototype.handleConnection=function(t,e,i){if(t){e=t.getHitTerminal(c.Color.rgbaToString(this.offUIContext.getImageData(e.x,e.y,1,1).data),e.clone(),i.clone());if(e&&(t.currHitTerminal=e),e){i=t.currHitTerminal;if(this.floatingConnector.canConnect(i)){if(i.type===p.TerminalType.OUT)this.floatingConnector.completeConnection(i),t.currHitTerminal=null;else if(0<i.connectors.length){if(i.connectors[0].start===this.floatingConnector.start)return this.fallbackConnection(),void(t.currHitTerminal=null);e=i.connectors[0].start.connectors.indexOf(i.connectors[0]),e=i.connectors[0].start.connectors.splice(e,1)[0];delete this.currFlow.connectors[e.id],e.start.call("disconnect",e.start,e),e.end.call("disconnect",e.end,e),this.floatingConnector.completeConnection(i),t.currHitTerminal=null}else this.floatingConnector.completeConnection(i),t.currHitTerminal=null;this.floatingConnector=null}else this.fallbackConnection(),t.currHitTerminal=null}else this.fallbackConnection()}else this.fallbackConnection()},l.prototype.getRelativePosition=function(t){return new u.Vector2(t.clientX-this.canvasDimensions.left,t.clientY-this.canvasDimensions.top)},l.prototype.updateTransform=function(t,e,i){t&&(e=e.transform(this.inverseTransform),this.transform.translateSelf(e.x,e.y).scaleSelf(t,t).translateSelf(-e.x,-e.y)),i&&this.transform.translateSelf(i.x,i.y),this.inverseTransform=this.transform.inverse(),this.context.setTransform(this.transform),this.offContext.setTransform(this.transform),this.offUIContext.setTransform(this.transform),this.offGroupContext.setTransform(this.transform),this.call("transform",this)},l.prototype.fallbackConnection=function(){this.floatingConnector.removeConnection(),this.currFlow.removeConnector(this.floatingConnector.id)},l.prototype.addPointer=function(t,e){this.pointers.push({id:t,screenPosition:e,realPosition:e.transform(this.inverseTransform)})},l.prototype.removePointer=function(t,e){t.splice(t.findIndex(function(t){return t.id===e.pointerId}),1)},l.prototype.getHitNode=function(t){t=c.Color.rgbaToString(this.offContext.getImageData(t.x,t.y,1,1).data);return this.currFlow.hitColorToNode[t]},l.prototype.getHitGroup=function(t){t=c.Color.rgbaToString(this.offGroupContext.getImageData(t.x,t.y,1,1).data);return this.currFlow.hitColorToGroup[t]},l.prototype.clear=function(){this.context.save(),this.context.setTransform(this.identity),this.context.clearRect(0,0,this.canvasDimensions.width,this.canvasDimensions.height),this.context.restore(),this.offContext.save(),this.offContext.setTransform(this.identity),this.offContext.clearRect(0,0,this.canvasDimensions.width,this.canvasDimensions.height),this.offContext.restore(),this.offUIContext.save(),this.offUIContext.setTransform(this.identity),this.offUIContext.clearRect(0,0,this.canvasDimensions.width,this.canvasDimensions.height),this.offUIContext.restore(),this.offGroupContext.save(),this.offGroupContext.setTransform(this.identity),this.offGroupContext.clearRect(0,0,this.canvasDimensions.width,this.canvasDimensions.height),this.offGroupContext.restore()},l.prototype.top=function(){this.render(this.rootFlow)},l.prototype.render=function(t){t!==this.currFlow&&(this.currFlow&&(window.cancelAnimationFrame(this.frameId),this.currFlow.deregisterListeners()),this.rootFlow&&this.rootFlow.existsInFlow(t)||(this.rootFlow=t),this.currFlow=t,this._render())},l.prototype._render=function(){this.clear(),this.currGroup&&this.currGroup.render(),this.currFlow.render(),this.call("update",this),this.frameId=window.requestAnimationFrame(this._render.bind(this))},l.prototype.fromJson=function(t){var e,i=null;try{e=JSON.parse(t),i=c.Flow.deSerialize(this,e)}catch(t){console.log(t)}return i},l.prototype.toJson=function(t){var e=t.serialize();try{return JSON.stringify(e,null)}catch(t){console.log(t)}},l);function l(t,e,i){var o=h.call(this)||this;return o.canvasDimensions={top:0,left:0,width:0,height:0},o.pointers=[],o.keymap={},o.touchControls={CreateGroup:!1},o.minScale=.1,o.maxScale=5,o.wheelScaleDelta=1.05,o.pinchScaleDelta=1.02,o.genericInput=document.createElement("input"),o.transform=new DOMMatrix,o.inverseTransform=new DOMMatrix,o.identity=new DOMMatrix,o.prepareCanvas(t,e,i),o.setupHitCanvas(),o.calculateCanvasDimension(),o.registerChangeListeners(),o.attachStyles(),o.polyfill(),o.registerEvents(),o.setGenericInput(),o}e.FlowConnect=n,r(i(676),e),r(i(81),e),r(i(637),e),r(i(928),e)},522:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.GraphState=e.FlowState=e.UIType=e.Align=e.InputType=e.TerminalType=e.LOD=e.NodeState=e.ViewPort=e.Constant=void 0;var o,n=i(281),i=(s.TAU=Math.PI/180,s.DefaultRules={string:["string"],number:["number"],boolean:["boolean"],file:["file"],event:["event"]},s.DefaultGroupColors={colors:[["rgba(239, 134, 119, 1)","rgba(239, 134, 119, .5)"],["rgba(160, 231, 125, 1)","rgba(160, 231, 125, .5)"],["rgba(130, 182, 217, 1)","rgba(130, 182, 217, .5)"]],RED:function(){return s.DefaultGroupColors.colors[0]},GREEN:function(){return s.DefaultGroupColors.colors[1]},BLUE:function(){return s.DefaultGroupColors.colors[2]},Random:function(){return s.DefaultGroupColors.colors[Math.floor(Math.random()*(s.DefaultGroupColors.colors.length-1))]}},s.DefaultNodeStyle=function(){return{font:"arial",fontSize:".75rem",titleFont:"arial",titleFontSize:".85rem",color:"#000",titleColor:"#000",maximizeButtonColor:"darkgrey",nodeButtonSize:10,nodeButtonSpacing:5,expandButtonColor:"#000",padding:10,spacing:10,rowHeight:20,titleHeight:29,terminalRowHeight:24,terminalStripMargin:8}},s.DefaultConnectorStyle=function(){return{width:5,color:"#7fff00aa"}},s.DefaultGroupStyle=function(){return{titleColor:"#000",fontSize:"16px",font:"arial"}},s.DefaultTerminalStyle=function(){return{radius:4,borderColor:"#222",shadowBlur:0,shadowColor:"#ccc",focusColor:"#bbbbbb80"}},s.DefaultButtonStyle=function(){return{backgroundColor:"#666",padding:5,color:"#fff",font:"arial",fontSize:"11px"}},s.DefaultContainerStyle=function(){return{backgroundColor:"#dddddd",shadowColor:"#666",shadowBlur:3,shadowOffset:new n.Vector2(3,3),borderWidth:1,borderColor:"#444"}},s.DefaultDisplayStyle=function(){return{borderColor:"#000"}},s.DefaultHorizontalLayoutStyle=function(){return{}},s.DefaultImageStyle=function(){return{align:"left"}},s.DefaultInputStyle=function(){return{backgroundColor:"#eee",color:"#000",fontSize:"11px",font:"arial",border:"1px solid black",align:"left",type:o.Text}},s.DefaultLabelStyle=function(){return{color:"#000",fontSize:"11px",font:"arial",align:"left"}},s.DefaultSelectStyle=function(){return{arrowColor:"#000"}},s.DefaultSliderStyle=function(t){return{color:"#444",thumbColor:"#000",railHeight:3,thumbRadius:t/2}},s.DefaultSourceStyle=function(){return{borderColor:"#000"}},s.DefaultToggleStyle=function(){return{backgroundColor:"#999",color:"#000"}},s);function s(){}e.Constant=i,(i=e.ViewPort||(e.ViewPort={}))[i.INSIDE=0]="INSIDE",i[i.OUTSIDE=1]="OUTSIDE",i[i.INTERSECT=2]="INTERSECT",(i=e.NodeState||(e.NodeState={}))[i.MAXIMIZED=0]="MAXIMIZED",i[i.MINIMIZED=1]="MINIMIZED",(i=e.LOD||(e.LOD={}))[i.LOD0=0]="LOD0",i[i.LOD1=1]="LOD1",i[i.LOD2=2]="LOD2",(i=e.TerminalType||(e.TerminalType={}))[i.IN=1]="IN",i[i.OUT=2]="OUT",(i=o=e.InputType||(e.InputType={})).Text="text",i.Number="number",(i=e.Align||(e.Align={}))[i.Left=0]="Left",i[i.Right=1]="Right",(i=e.UIType||(e.UIType={}))[i.Button=0]="Button",i[i.Container=1]="Container",i[i.Display=2]="Display",i[i.HorizontalLayout=3]="HorizontalLayout",i[i.Image=4]="Image",i[i.Input=5]="Input",i[i.Label=6]="Label",i[i.Select=7]="Select",i[i.Slider=8]="Slider",i[i.Source=9]="Source",i[i.Toggle=10]="Toggle",(i=e.FlowState||(e.FlowState={}))[i.Running=0]="Running",i[i.Stopped=1]="Stopped",(e=e.GraphState||(e.GraphState={}))[e.Running=0]="Running",e[e.FullRun=1]="FullRun",e[e.Idle=2]="Idle",e[e.Stopped=3]="Stopped"},81:function(t,e,i){var o=this&&this.__createBinding||(Object.create?function(t,e,i,o){void 0===o&&(o=i),Object.defineProperty(t,o,{enumerable:!0,get:function(){return e[i]}})}:function(t,e,i,o){t[o=void 0===o?i:o]=e[i]}),n=this&&this.__exportStar||function(t,e){for(var i in t)"default"===i||Object.prototype.hasOwnProperty.call(e,i)||o(e,t,i)};Object.defineProperty(e,"__esModule",{value:!0}),n(i(522),e),n(i(281),e)},281:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Vector2=void 0;var o=i(522),i=(n.prototype.toString=function(){return"["+this.x.toFixed(3)+", "+this.y.toFixed(3)+"]"},n.prototype.add=function(t,e){return t instanceof n?new n(this.x+t.x,this.y+t.y):new n(this.x+t,void 0===e?this.y+t:this.y+e)},n.prototype.addInPlace=function(t,e){return t instanceof n?(this.x+=t.x,this.y+=t.y):void 0===e?(this.x+=t,this.y+=t):(this.x+=t,this.y+=e),this},n.prototype.multiply=function(t,e){return t instanceof n?new n(this.x*t.x,this.y*t.y):new n(this.x*t,void 0===e?this.y*t:this.y*e)},n.prototype.multiplyInPlace=function(t,e){return t instanceof n?(this.x*=t.x,this.y*=t.y):void 0===e?(this.x*=t,this.y*=t):(this.x*=t,this.y*=e),this},n.prototype.subtract=function(t,e){return t instanceof n?new n(this.x-t.x,this.y-t.y):new n(this.x-t,void 0===e?this.y-t:this.y-e)},n.prototype.subtractInPlace=function(t,e){t instanceof n?(this.x-=t.x,this.y-=t.y):void 0===e?(this.x-=t,this.y-=t):(this.x-=t,this.y-=e)},n.prototype.rotate=function(t,e){e*=o.Constant.TAU;var i=Math.cos(e),e=Math.sin(e);return new n(i*(this.x-t.x)-e*(this.y-t.y)+t.x,e*(this.x-t.x)+i*(this.y-t.y)+t.y)},n.prototype.rotateInPlace=function(t,e){e*=o.Constant.TAU;var i=Math.cos(e),e=Math.sin(e);return this.tmpX=i*(this.x-t.x)-e*(this.y-t.y)+t.x,this.tmpY=e*(this.x-t.x)+i*(this.y-t.y)+t.y,this.x=this.tmpX,this.y=this.tmpY,this},n.prototype.transform=function(t){return new n(t.transformPoint(this))},n.prototype.transformInPlace=function(t){var t=t.transformPoint(this),t=[t.x,t.y];this.x=t[0],this.y=t[1]},n.prototype.max=function(){return Math.max(this.x,this.y)},n.prototype.clone=function(){return new n(this.x,this.y)},n.prototype.clamp=function(t,e,i,o){return this.x<t&&(this.x=t),this.x>e&&(this.x=e),this.y<i&&(this.y=i),this.y>o&&(this.y=o),this},n.Midpoint=function(t,e){return new n((t.x+e.x)/2,(t.y+e.y)/2)},n.Distance=function(t,e,i,o){return t instanceof n&&e instanceof n?Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)):"number"==typeof t&&"number"==typeof e?Math.sqrt(Math.pow(i-t,2)+Math.pow(o-e,2)):void 0},n.Zero=function(){return new n(0,0)},n.One=function(){return new n(1,1)},n.Bounds=function(t){var e=new n(Number.MAX_VALUE,Number.MAX_VALUE),i=new n(Number.MIN_VALUE,Number.MIN_VALUE);return t.forEach(function(t){t.x<e.x&&(e.x=t.x),t.y<e.y&&(e.y=t.y),t.x>i.x&&(i.x=t.x),t.y>i.y&&(i.y=t.y)}),[e,i]},n.Average=function(t){var e=0,i=0;return t.forEach(function(t){e+=t.x,i+=t.y}),new n(e/t.length,i/t.length)},n.Random=function(t,e,i,o){return new n(Math.random()*(e-t)+t,Math.random()*(o-i)+i)},n.Lerp=function(t,e,i){return new n(t.x+(e.x-t.x)*i,t.y+(e.y-t.y)*i)},n.prototype.serialize=function(){return{x:this.x,y:this.y}},n.deSerialize=function(t){return new n(t.x,t.y)},n);function n(t,e){var i;t instanceof DOMPoint?(i=[t.x,t.y],this.x=i[0],this.y=i[1]):(e=[t,e],this.x=e[0],this.y=e[1])}e.Vector2=i},124:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.fileIcon=void 0,e.fileIcon="data:image/svg+xml;charset=UTF-8,%3c?xml version='1.0' encoding='iso-8859-1'?%3e%3c!-- --%3e%3csvg version='1.1' id='Capa_1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' viewBox='0 0 477.867 477.867' style='enable-background:new 0 0 477.867 477.867;' xml:space='preserve'%3e%3cg%3e%3cg%3e%3cpath d='M324.267,119.467c-9.426,0-17.067-7.641-17.067-17.067V0H102.4C74.123,0,51.2,22.923,51.2,51.2v375.467 c0,28.277,22.923,51.2,51.2,51.2h273.067c28.277,0,51.2-22.923,51.2-51.2v-307.2H324.267z'/%3e%3c/g%3e%3c/g%3e%3cg%3e%3cg%3e%3cpolygon points='341.333,10.001 341.333,85.333 416.666,85.333 '/%3e%3c/g%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3c/svg%3e"},283:function(t,e,i){var o,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),a=this&&this.__assign||function(){return(a=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.Button=void 0;var c,u=i(900),p=i(281),d=i(522),f=i(120),s=i(681),y=i(278),n=(c=s.UINode,n(r,c),r.prototype.paint=function(){this.context.fillStyle=this.style.backgroundColor,this.context.fillRect(this.position.x,this.position.y,this.width,this.height)},r.prototype.paintLOD1=function(){this.context.strokeStyle="#000",this.paint(),this.context.strokeRect(this.position.x,this.position.y,this.width,this.height)},r.prototype.offPaint=function(){this.offUIContext.fillStyle=this.hitColor.hexValue,this.offUIContext.fillRect(this.position.x,this.position.y,this.width,this.height)},r.prototype.reflow=function(){this.label.position=this.position,this.label.height=this.height,this.label.width=this.width,this.input&&(this.input.position.x=this.node.position.x-this.node.style.terminalStripMargin-this.input.style.radius,this.input.position.y=this.position.y+this.height/2),this.output&&(this.output.position.x=this.node.position.x+this.node.width+this.node.style.terminalStripMargin+this.output.style.radius,this.output.position.y=this.position.y+this.height/2)},r.prototype.onPropChange=function(){},r.prototype.onOver=function(t,e){this.disabled||this.call("over",this,t,e)},r.prototype.onDown=function(t,e){this.disabled||this.call("down",this,t,e)},r.prototype.onUp=function(t,e){this.disabled||this.call("up",this,t,e)},r.prototype.onClick=function(t,e){this.disabled||this.call("click",this,t,e)},r.prototype.onDrag=function(t,e){this.disabled||this.call("drag",this,t,e)},r.prototype.onEnter=function(t,e){this.disabled||this.call("enter",this,t,e)},r.prototype.onExit=function(t,e){this.disabled||this.call("exit",this,t,e)},r.prototype.onContextMenu=function(){this.disabled||this.call("rightclick",this)},r.prototype.serialize=function(){return{id:this.id,type:this.type,hitColor:this.hitColor.serialize(),height:this.height,text:this.text,style:this.style,propName:this.propName,input:this.input?this.input.serialize():null,output:this.output?this.output.serialize():null,childs:[]}},r.deSerialize=function(t,e){return new r(t,e.text,e.input,e.output,e.height,e.style,e.id,y.Color.deSerialize(e.hitColor))},r);function r(t,e,i,o,n,s,r,h){void 0===s&&(s={});var l=c.call(this,t,p.Vector2.Zero(),d.UIType.Button,!1,a(a({},d.Constant.DefaultButtonStyle()),s),null,i?"boolean"==typeof i?new u.Terminal(t,d.TerminalType.IN,"event","",{},function(){return l.call("click",l)}):new u.Terminal(t,i.type,i.dataType,i.name,i.style,function(){return l.call("click",l)},i.id,y.Color.deSerialize(i.hitColor)):null,o?"boolean"==typeof o?new u.Terminal(t,d.TerminalType.OUT,"event","",{}):u.Terminal.deSerialize(t,o):null,r,h)||this;return l.text=e,l.height=n||l.node.style.rowHeight+2*l.style.padding,l.label=new f.Label(l.node,e,null,!1,!1,{fontSize:l.style.fontSize,font:l.style.font,align:"center",color:l.style.color},l.height),l.label.on("click",function(t,e){return l.call("click",l,e)}),l.children.push(l.label),l}e.Button=n},818:function(t,e,i){var o,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=this&&this.__assign||function(){return(s=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.Container=void 0;var r,h=i(278),l=i(522),a=i(281),c=i(283),u=i(119),p=i(104),d=i(799),f=i(560),y=i(120),g=i(136),x=i(526),w=i(2),m=i(369),i=i(681),n=(r=i.UINode,n(v,r),v.prototype.paint=function(){this.context.shadowColor=this.style.shadowColor,this.context.shadowBlur=3,this.context.shadowOffsetX=this.style.shadowOffset.x,this.context.shadowOffsetY=this.style.shadowOffset.y,this.context.fillStyle=this.style.backgroundColor,this.context.strokeStyle=this.style.borderColor,this.context.lineWidth=this.style.borderWidth,this.context.roundRect(this.position.x,this.position.y+this.node.style.titleHeight,this.width,this.height-this.node.style.titleHeight,5),this.context.stroke(),this.context.fill()},v.prototype.paintLOD1=function(){this.context.fillStyle=this.style.backgroundColor,this.context.strokeStyle=this.style.borderColor,this.context.lineWidth=this.style.borderWidth,this.context.roundRect(this.position.x,this.position.y+this.node.style.titleHeight,this.width,this.height-this.node.style.titleHeight,5),this.context.stroke(),this.context.fill()},v.prototype.offPaint=function(){this.offUIContext.fillStyle=this.hitColor.hexValue,this.offUIContext.fillRect(this.position.x,this.position.y,this.width,this.height)},v.prototype.reflow=function(){var e=this;this.position=this.node.position;var t=Math.max(this.node.inputs.length,this.node.outputs.length)*this.node.style.terminalRowHeight+this.node.style.titleHeight,i=this.position.x+this.node.style.padding,o=this.position.y+t;this.children.forEach(function(t){o+=e.node.style.spacing,t.width=e.width-2*e.node.style.padding,t.position=new a.Vector2(i,o),o+=t.height}),this.height=o+this.node.style.padding-this.position.y},v.prototype.onPropChange=function(){},v.prototype.onOver=function(t,e){this.call("over",this,t,e)},v.prototype.onDown=function(t,e){this.call("down",this,t,e)},v.prototype.onUp=function(t,e){this.call("up",this,t,e)},v.prototype.onClick=function(t,e){this.call("click",this,t,e)},v.prototype.onDrag=function(t,e){this.call("drag",this,t,e)},v.prototype.onEnter=function(t,e){this.call("enter",this,t,e)},v.prototype.onExit=function(t,e){this.call("exit",this,t,e)},v.prototype.onContextMenu=function(){},v.prototype.serialize=function(){return{id:this.id,type:this.type,hitColor:this.hitColor.serialize(),propName:this.propName,input:this.input?this.input.serialize():null,output:this.output?this.output.serialize():null,width:this.width,style:{backgroundColor:this.style.backgroundColor,shadowColor:this.style.shadowColor,shadowBlur:this.style.shadowBlur,shadowOffset:this.style.shadowOffset.serialize(),borderWidth:this.style.borderWidth,borderColor:this.style.borderColor},childs:this.children.map(function(t){return t.serialize()})}},v.deSerialize=function(e,t){var i,o=new v(e,t.width,t.style,t.id,h.Color.deSerialize(t.hitColor));return(i=o.children).push.apply(i,t.childs.map(function(t){switch(t.type){case l.UIType.Button:return c.Button.deSerialize(e,t);case l.UIType.Container:return v.deSerialize(e,t);case l.UIType.Display:return u.Display.deSerialize(e,t);case l.UIType.HorizontalLayout:return p.HorizontalLayout.deSerialize(e,t);case l.UIType.Image:return d.Image.deSerialize(e,t);case l.UIType.Input:return f.Input.deSerialize(e,t);case l.UIType.Label:return y.Label.deSerialize(e,t);case l.UIType.Select:return g.Select.deSerialize(e,t);case l.UIType.Slider:return x.Slider.deSerialize(e,t);case l.UIType.Source:return w.Source.deSerialize(e,t);case l.UIType.Toggle:return m.Toggle.deSerialize(e,t);default:return}})),o},v);function v(t,e,i,o,n){void 0===i&&(i={});n=r.call(this,t,t.position,l.UIType.Container,!1,s(s({},l.Constant.DefaultContainerStyle()),i),null,null,null,o,n)||this;return n.width=void 0!==e?e:0,n.height=2*n.node.style.padding,n.contentWidth=n.width-2*n.node.style.padding,n}e.Container=n},119:function(t,e,i){var o,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.Display=void 0;var h,s=i(278),l=i(522),a=i(281),i=i(681),n=(h=i.UINode,n(c,h),c.prototype.paint=function(){this.context.strokeStyle=this.style.borderColor,this.context.lineWidth=1,this.context.strokeRect(this.position.x,this.position.y,this.width,this.height),this.context.strokeStyle=null,this.context.translate(this.position.x,this.position.y),this.customRender(this.context,this.width,this.height),this.context.resetTransform()},c.prototype.paintLOD1=function(){this.context.strokeStyle=this.style.borderColor,this.context.strokeRect(this.position.x,this.position.y,this.width,this.height),this.context.fillStyle="lightgrey",this.context.fillRect(this.position.x,this.position.y,this.width,this.height)},c.prototype.offPaint=function(){this.offUIContext.fillStyle=this.hitColor.hexValue,this.offUIContext.fillRect(this.position.x,this.position.y,this.width,this.height)},c.prototype.reflow=function(){},c.prototype.onPropChange=function(){},c.prototype.onOver=function(t,e){this.call("over",this,t,e)},c.prototype.onDown=function(t,e){this.call("down",this,t,e)},c.prototype.onUp=function(t,e){this.call("up",this,t,e)},c.prototype.onClick=function(t,e){this.call("click",this,t,e)},c.prototype.onDrag=function(t,e){this.call("drag",this,t,e)},c.prototype.onEnter=function(t,e){this.call("enter",this,t,e)},c.prototype.onExit=function(t,e){this.call("exit",this,t,e)},c.prototype.onContextMenu=function(){this.call("rightclick",this)},c.prototype.serialize=function(){return{id:this.id,type:this.type,hitColor:this.hitColor.serialize(),style:this.style,propName:this.propName,input:this.input?this.input.serialize():null,output:this.output?this.output.serialize():null,height:this.height,childs:[]}},c.deSerialize=function(t,e){return new c(t,e.height,null,e.style,e.id,s.Color.deSerialize(e.hitColor))},c);function c(t,e,i,o,n,s){void 0===o&&(o={});s=h.call(this,t,a.Vector2.Zero(),l.UIType.Display,!1,r(r({},l.Constant.DefaultDisplayStyle()),o),null,null,null,n,s)||this;return s.customRender=i,s.height=e,s}e.Display=n},104:function(t,e,i){var o,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=this&&this.__assign||function(){return(s=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.HorizontalLayout=void 0;var r,h=i(278),l=i(522),a=i(281),c=i(283),u=i(818),p=i(119),d=i(799),f=i(560),y=i(120),g=i(136),x=i(526),w=i(2),m=i(369),i=i(681),n=(r=i.UINode,n(v,r),v.prototype.paint=function(){},v.prototype.paintLOD1=function(){},v.prototype.offPaint=function(){this.offUIContext.fillStyle=this.hitColor.hexValue,this.offUIContext.fillRect(this.position.x,this.position.y,this.width,this.height)},v.prototype.reflow=function(){var i=this,o=this.width,n=this.position.x,e=0;this.children.forEach(function(t){e=Math.max(e,t.height)}),this.height=e,this.children.forEach(function(t){var e=t.style.grow?t.style.grow*i.width:1/i.children.length*i.width;o<e&&(e=o),t.width=e,t.height<i.height&&(t.height=i.height),t.position=new a.Vector2(n,i.position.y),o-=e,n+=e})},v.prototype.onPropChange=function(){},v.prototype.onOver=function(t,e){this.call("over",this,t,e)},v.prototype.onDown=function(t,e){this.call("down",this,t,e)},v.prototype.onUp=function(t,e){this.call("up",this,t,e)},v.prototype.onClick=function(t,e){this.call("click",this,t,e)},v.prototype.onDrag=function(t,e){this.call("drag",this,t,e)},v.prototype.onEnter=function(t,e){this.call("enter",this,t,e)},v.prototype.onExit=function(t,e){this.call("exit",this,t,e)},v.prototype.onContextMenu=function(){},v.prototype.serialize=function(){return{id:this.id,type:this.type,hitColor:this.hitColor.serialize(),propName:this.propName,input:this.input?this.input.serialize():null,output:this.output?this.output.serialize():null,style:this.style,childs:this.children.map(function(t){return t.serialize()})}},v.deSerialize=function(e,t){var i,o=new v(e,[],t.style,t.id,h.Color.deSerialize(t.hitColor));return(i=o.children).push.apply(i,t.childs.map(function(t){switch(t.type){case l.UIType.Button:return c.Button.deSerialize(e,t);case l.UIType.Container:return u.Container.deSerialize(e,t);case l.UIType.Display:return p.Display.deSerialize(e,t);case l.UIType.HorizontalLayout:return v.deSerialize(e,t);case l.UIType.Image:return d.Image.deSerialize(e,t);case l.UIType.Input:return f.Input.deSerialize(e,t);case l.UIType.Label:return y.Label.deSerialize(e,t);case l.UIType.Select:return g.Select.deSerialize(e,t);case l.UIType.Slider:return x.Slider.deSerialize(e,t);case l.UIType.Source:return w.Source.deSerialize(e,t);case l.UIType.Toggle:return m.Toggle.deSerialize(e,t);default:return}})),o},v);function v(t,e,i,o,n){void 0===i&&(i={});o=r.call(this,t,a.Vector2.Zero(),l.UIType.HorizontalLayout,!1,s(s({},l.Constant.DefaultHorizontalLayoutStyle()),i),null,null,null,o,n)||this;return e&&(n=o.children).push.apply(n,e),o}e.HorizontalLayout=n},799:function(t,e,i){var o,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),h=this&&this.__assign||function(){return(h=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.Image=void 0;var l,s=i(278),a=i(522),c=i(281),u=i(645),i=i(681),n=(l=i.UINode,n(r,l),r.prototype.paint=function(){var t;this.imageCanvas&&(t=this.position.x,this.source.width<this.node.ui.contentWidth&&("center"===this.style.align?t+=this.node.ui.contentWidth/2-this.source.width/2:"right"===this.style.align&&(t+=+(this.node.ui.contentWidth-this.source.width))),this.context.drawImage(this.imageCanvas,0,0,this.source.width,this.source.height,t,this.position.y,this.width,this.height))},r.prototype.paintLOD1=function(){var t;this.imageCanvas&&(t=this.position.x,this.source.width<this.node.ui.contentWidth&&("center"===this.style.align?t+=this.node.ui.contentWidth/2-this.source.width/2:"right"===this.style.align&&(t+=+(this.node.ui.contentWidth-this.source.width))),this.context.fillStyle="lightgrey",this.context.strokeStyle="#000",this.context.fillRect(t,this.position.y,this.width,this.height),this.context.strokeRect(t,this.position.y,this.width,this.height))},r.prototype.offPaint=function(){this.offUIContext.fillStyle=this.hitColor.hexValue;var t=this.position.x;this.source.width<this.node.ui.contentWidth&&("center"===this.style.align?t+=this.node.ui.contentWidth/2-this.source.width/2:"right"===this.style.align&&(t+=+(this.node.ui.contentWidth-this.source.width))),this.offUIContext.fillRect(t,this.position.y,this.width,this.height)},r.prototype.reflow=function(){this.source.width&&this.source.height&&(this.source.width>this.width?this.height=this.width/this.ratio:(this.width=this.source.width,this.height=this.source.height))},r.prototype.onPropChange=function(){},r.prototype.onOver=function(t,e){this.call("over",this,t,e)},r.prototype.onDown=function(t,e){this.call("down",this,t,e)},r.prototype.onUp=function(t,e){this.call("up",this,t,e)},r.prototype.onClick=function(t,e){this.call("click",this,t,e)},r.prototype.onDrag=function(t,e){this.call("drag",this,t,e)},r.prototype.onEnter=function(t,e){this.call("enter",this,t,e)},r.prototype.onExit=function(t,e){this.call("exit",this,t,e)},r.prototype.onContextMenu=function(){},r.prototype.serialize=function(){return{id:this.id,type:this.type,hitColor:this.hitColor.serialize(),style:this.style,propName:this.propName,input:this.input?this.input.serialize():null,output:this.output?this.output.serialize():null,source:this.sourceString,childs:[]}},r.deSerialize=function(t,e){return new r(t,e.source,e.propName,e.style,e.id,s.Color.deSerialize(e.hitColor))},r);function r(t,e,i,o,n,s){void 0===o&&(o={});var r=l.call(this,t,c.Vector2.Zero(),a.UIType.Image,!1,h(h({},a.Constant.DefaultImageStyle()),o),i,null,null,n,s)||this;return r.sourceString=e,r.source=document.createElement("img"),r.source.onload=function(){"undefined"!=typeof OffscreenCanvas?r.imageCanvas=new OffscreenCanvas(r.source.width,r.source.height):(r.imageCanvas=document.createElement("canvas"),r.imageCanvas.width=r.source.width,r.imageCanvas.height=r.source.height),r.imageCanvas.getContext("2d").drawImage(r.source,0,0),r.ratio=r.source.width/r.source.height,r.reflow(),r.node.ui.update()},r.source.onerror=function(t){return u.Logger.error(t)},r.source.src=e,r}e.Image=n},637:function(t,e,i){var o=this&&this.__createBinding||(Object.create?function(t,e,i,o){void 0===o&&(o=i),Object.defineProperty(t,o,{enumerable:!0,get:function(){return e[i]}})}:function(t,e,i,o){t[o=void 0===o?i:o]=e[i]}),n=this&&this.__exportStar||function(t,e){for(var i in t)"default"===i||Object.prototype.hasOwnProperty.call(e,i)||o(e,t,i)};Object.defineProperty(e,"__esModule",{value:!0}),n(i(681),e),n(i(818),e),n(i(120),e),n(i(799),e),n(i(526),e),n(i(104),e),n(i(283),e),n(i(369),e),n(i(136),e),n(i(2),e),n(i(119),e),n(i(560),e)},560:function(t,e,i){var o,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),c=this&&this.__assign||function(){return(c=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.Input=void 0;var u,p=i(281),s=i(681),d=i(120),f=i(900),y=i(522),r=i(278),n=(u=s.UINode,n(h,u),Object.defineProperty(h.prototype,"value",{get:function(){return this.propName?this.node.props[this.propName]:this._value},set:function(t){t=this.style.type===y.InputType.Number&&"string"==typeof t?parseInt(t):t;this.propName?this.node.props[this.propName]=t:(this._value=t,this.label.text=this._value.toString(),this.inputEl.value=this._value.toString())},enumerable:!1,configurable:!0}),h.prototype.paint=function(){this.context.strokeStyle=this.style.border,this.context.strokeRect(this.position.x,this.position.y,this.width,this.height)},h.prototype.paintLOD1=function(){this.context.strokeStyle=this.style.border,this.context.fillStyle=this.style.backgroundColor,this.context.strokeRect(this.position.x,this.position.y,this.width,this.height),this.context.fillRect(this.position.x,this.position.y,this.width,this.height)},h.prototype.offPaint=function(){this.offUIContext.fillStyle=this.hitColor.hexValue,this.offUIContext.fillRect(this.position.x,this.position.y,this.width,this.height)},h.prototype.reflow=function(){this.label.position=this.position,this.label.height=this.height,this.label.width=this.width,this.input&&(this.input.position.x=this.node.position.x-this.node.style.terminalStripMargin-this.input.style.radius,this.input.position.y=this.position.y+this.height/2),this.output&&(this.output.position.x=this.node.position.x+this.node.width+this.node.style.terminalStripMargin+this.output.style.radius,this.output.position.y=this.position.y+this.height/2)},h.prototype.onPropChange=function(t,e){e=this.style.type===y.InputType.Number&&"string"==typeof e?parseInt(e):e;this._value=e,this.label.text=this._value.toString(),this.inputEl.value=this._value.toString(),this.output&&this.output.setData(this.value)},h.prototype.onOver=function(t,e){this.disabled||this.call("over",this,t,e)},h.prototype.onDown=function(t,e){this.disabled||this.call("down",this,t,e)},h.prototype.onUp=function(t,e){this.disabled||this.call("up",this,t,e)},h.prototype.onClick=function(t,e){this.disabled||this.call("click",this,t,e)},h.prototype.onDrag=function(t,e){this.disabled||this.call("drag",this,t,e)},h.prototype.onEnter=function(t,e){this.disabled||this.call("enter",this,t,e)},h.prototype.onExit=function(t,e){this.disabled||this.call("exit",this,t,e)},h.prototype.onContextMenu=function(){this.disabled},h.prototype.serialize=function(){return{id:this.id,hitColor:this.hitColor.serialize(),type:this.type,style:this.style,propName:this.propName,input:this.input?this.input.serialize():null,output:this.output?this.output.serialize():null,value:this.value,height:this.height,childs:[]}},h.deSerialize=function(t,e){return new h(t,e.value,e.propName,e.input,e.output,e.height,e.style,e.id,r.Color.deSerialize(e.hitColor))},h);function h(t,e,i,o,n,s,r,h,l){void 0===r&&(r={});var a=u.call(this,t,p.Vector2.Zero(),y.UIType.Input,!1,c(c({},y.Constant.DefaultInputStyle()),r),i,o?"boolean"==typeof o?new f.Terminal(t,y.TerminalType.IN,r.type===y.InputType.Text?"string":"number","",{}):f.Terminal.deSerialize(t,o):null,n?"boolean"==typeof n?new f.Terminal(t,y.TerminalType.OUT,r.type===y.InputType.Text?"string":"number","",{}):f.Terminal.deSerialize(t,n):null,h,l)||this;return a.height=s||a.node.style.rowHeight,a.style.type===y.InputType.Number&&"string"==typeof e&&(e=parseInt(e)),a._value=e,a.label=new d.Label(a.node,a.value.toString(),null,!1,!1,{fontSize:a.style.fontSize,font:a.style.font,align:a.style.align,color:a.style.color},a.height),a.label.on("click",function(){var t;document.activeElement!==a.inputEl&&(a.inputEl.style.visibility="visible",a.inputEl.style.pointerEvents="all",t=a.position.transform(a.node.flow.flowConnect.transform),a.inputEl.style.top=t.y+a.node.flow.flowConnect.canvasDimensions.top+1+"px",a.inputEl.style.left=t.x+a.node.flow.flowConnect.canvasDimensions.left+1+"px",a.inputEl.style.width=(a.width-1)*a.node.flow.flowConnect.scale+"px",a.inputEl.style.height=(a.height-1)*a.node.flow.flowConnect.scale+"px",a.inputEl.style.fontFamily=a.style.font,a.inputEl.style.fontSize=parseInt(a.style.fontSize.replace("px",""))*a.node.flow.flowConnect.scale+"px",a.inputEl.style.color=a.style.color,a.inputEl.style.backgroundColor=a.style.backgroundColor,a.inputEl.style.textAlign=a.style.align,a.inputEl.focus())}),a.children.push(a.label),a.inputEl=document.createElement("input"),a.inputEl.className="flow-connect-input",a.inputEl.spellcheck=!1,a.inputEl.type=a.style.type,a.inputEl.value=a.value.toString(),a.inputEl.onblur=function(){a.inputEl.style.visibility="hidden",a.inputEl.style.pointerEvents="none"},a.inputEl.onchange=function(t){a.value=t.target.value,a.label.text=a.value.toString()},document.body.appendChild(a.inputEl),a.input&&(a.input.on("connect",function(t,e){e.data&&(a.value=e.data)}),a.input.on("data",function(t){t&&(a.value=t)})),a.output&&a.output.on("connect",function(t,e){return e.data=a.value}),a}e.Input=n},120:function(t,e,i){var o,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),c=this&&this.__assign||function(){return(c=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.Label=void 0;var u,p=i(900),d=i(281),f=i(522),s=i(681),r=i(278),n=(u=s.UINode,n(h,u),Object.defineProperty(h.prototype,"text",{get:function(){return this.propName?this.node.props[this.propName]:this._text},set:function(t){this.propName?this.node.props[this.propName]=t:(this._text=t,this.displayText=this._text,this.reflow())},enumerable:!1,configurable:!0}),h.prototype.paint=function(){this.context.fillStyle=this.style.color,this.context.font=this.style.fontSize+" "+this.style.font,this.context.textBaseline="top";var t=this.position.y+this.height/2-this.textHeight/2,e=this.position.x;"left"===this.style.align?e+=5:"center"===this.style.align?e+=this.width/2-this.textWidth/2:"right"===this.style.align&&(e+=this.width-this.textWidth-5),this.context.fillText(this.displayText,e,t)},h.prototype.paintLOD1=function(){this.context.strokeStyle="#000",this.context.fillStyle=this.style.color,this.context.strokeRect(this.position.x,this.position.y,this.width,this.height),this.context.fillRect(this.position.x,this.position.y,this.width,this.height)},h.prototype.offPaint=function(){this.offUIContext.fillStyle=this.hitColor.hexValue,this.offUIContext.fillRect(this.position.x,this.position.y,this.width,this.height)},h.prototype.reflow=function(){this.context.font=this.style.fontSize+" "+this.style.font;var t=this.context.measureText(this.displayText);this.context.font=null,this.textWidth=t.width,this.textHeight=t.actualBoundingBoxAscent+t.actualBoundingBoxDescent,void 0===this.textHeight&&((t=document.createElement("span")).style.font=this.style.fontSize+" "+this.style.font,t.textContent="M",document.body.appendChild(t),this.textHeight=t.offsetHeight,document.body.removeChild(t)),this.input&&(this.input.position.x=this.node.position.x-this.node.style.terminalStripMargin-this.input.style.radius,this.input.position.y=this.position.y+this.height/2),this.output&&(this.output.position.x=this.node.position.x+this.node.width+this.node.style.terminalStripMargin+this.output.style.radius,this.output.position.y=this.position.y+this.height/2)},h.prototype.onPropChange=function(t,e){this._text=e,this.displayText=this._text,this.reflow(),this.output&&this.output.setData(this.text)},h.prototype.onOver=function(t,e){this.disabled||this.call("over",this,t,e)},h.prototype.onDown=function(t,e){this.disabled||this.call("down",this,t,e)},h.prototype.onUp=function(t,e){this.disabled||this.call("up",this,t,e)},h.prototype.onClick=function(t,e){this.disabled||this.call("click",this,t,e)},h.prototype.onDrag=function(t,e){this.disabled||this.call("drag",this,t,e)},h.prototype.onEnter=function(t,e){this.disabled||this.call("enter",this,t,e)},h.prototype.onExit=function(t,e){this.disabled||this.call("exit",this,t,e)},h.prototype.onContextMenu=function(){this.disabled},h.prototype.serialize=function(){return{id:this.id,type:this.type,hitColor:this.hitColor.serialize(),style:this.style,propName:this.propName,input:this.input?this.input.serialize():null,output:this.output?this.output.serialize():null,height:this.height,text:this.text,childs:[]}},h.deSerialize=function(t,e){return new h(t,e.text,e.propName,e.input,e.output,e.style,e.height,e.id,r.Color.deSerialize(e.hitColor))},h);function h(t,e,i,o,n,s,r,h,l){void 0===e&&(e=""),void 0===s&&(s={});var a=u.call(this,t,d.Vector2.Zero(),f.UIType.Label,!1,c(c({},f.Constant.DefaultLabelStyle()),s),i,o?"boolean"==typeof o?new p.Terminal(t,f.TerminalType.IN,"string","",{}):p.Terminal.deSerialize(t,o):null,n?"boolean"==typeof n?new p.Terminal(t,f.TerminalType.OUT,"string","",{}):p.Terminal.deSerialize(t,n):null,h,l)||this;return a._text=a.propName?a.node.props[a.propName]:e,a.displayText=a._text,a.reflow(),a.height=r||a.textHeight,a.input&&(a.input.on("connect",function(t,e){e.data&&(a.text=e.data)}),a.input.on("data",function(t){t&&(a.text=t)})),a.output&&a.output.on("connect",function(t,e){return e.data=a.text}),a}e.Label=n},136:function(t,e,i){var o,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),c=this&&this.__assign||function(){return(c=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.Select=void 0;var u,p=i(900),d=i(281),f=i(120),s=i(681),y=i(522),r=i(278),n=(u=s.UINode,n(h,u),Object.defineProperty(h.prototype,"selected",{get:function(){if(this.propName){var t=this.node.props[this.propName];return t=0===this.options.length?"None":this.options.includes(t)?t:this.options[0]}return this._selected},set:function(t){t=0===this.options.length?"None":this.options.includes(t)?t:this.options[0];this.propName?this.node.props[this.propName]=t:(this._selected=t,this.label.text=this.selected)},enumerable:!1,configurable:!0}),h.prototype.paint=function(){this.context.fillStyle=this.style.arrowColor,this.context.beginPath(),this.context.moveTo(this.position.x,this.position.y+this.height/2),this.context.lineTo(this.position.x+.15*this.width,this.position.y+.15*this.height),this.context.lineTo(this.position.x+.15*this.width,this.position.y+.85*this.height),this.context.lineTo(this.position.x,this.position.y+this.height/2),this.context.closePath(),this.context.fill(),this.context.fillStyle=this.style.arrowColor,this.context.beginPath(),this.context.moveTo(this.position.x+this.width,this.position.y+this.height/2),this.context.lineTo(this.position.x+.85*this.width,this.position.y+.15*this.height),this.context.lineTo(this.position.x+.85*this.width,this.position.y+.85*this.height),this.context.lineTo(this.position.x+this.width,this.position.y+this.height/2),this.context.closePath(),this.context.fill()},h.prototype.paintLOD1=function(){this.context.fillStyle=this.style.arrowColor,this.context.strokeStyle="#000",this.context.fillRect(this.position.x,this.position.y,this.width,this.height),this.context.strokeRect(this.position.x,this.position.y,this.width,this.height)},h.prototype.offPaint=function(){this.offUIContext.fillStyle=this.hitColor.hexValue,this.offUIContext.fillRect(this.position.x,this.position.y,this.width,this.height)},h.prototype.reflow=function(){this.label.width=.7*this.width,this.label.position.x=this.position.x+.15*this.width,this.label.position.y=this.position.y+this.height/2-this.label.height/2,this.input&&(this.input.position.x=this.node.position.x-this.node.style.terminalStripMargin-this.input.style.radius,this.input.position.y=this.position.y+this.height/2),this.output&&(this.output.position.x=this.node.position.x+this.node.width+this.node.style.terminalStripMargin+this.output.style.radius,this.output.position.y=this.position.y+this.height/2)},h.prototype.onPropChange=function(t,e){e=0===this.options.length?"None":this.options.includes(e)?e:this.options[0];this._selected=e,this.label.text=this.selected,this.output&&this.output.setData(this.selected)},h.prototype.onOver=function(t,e){this.disabled||this.call("over",this,t,e)},h.prototype.onDown=function(t,e){this.disabled||this.call("down",this,t,e)},h.prototype.onUp=function(t,e){this.disabled||this.call("up",this,t,e)},h.prototype.onClick=function(t,e){if(!this.disabled&&(this.call("click",this,t,e),0!==this.options.length)){var i;if(e.x<this.position.x+.15*this.width)i=-1;else{if(!(e.x>this.position.x+.85*this.width))return;i=1}this.selected=this.options[((this.options.indexOf(this.selected)+i)%this.options.length+this.options.length)%this.options.length],this.label.text=this.selected,this.call("change",this,this.selected)}},h.prototype.onDrag=function(t,e){this.disabled||this.call("drag",this,t,e)},h.prototype.onEnter=function(t,e){this.disabled||this.call("enter",this,t,e)},h.prototype.onExit=function(t,e){this.disabled||this.call("exit",this,t,e)},h.prototype.onContextMenu=function(){this.disabled},h.prototype.serialize=function(){return{id:this.id,type:this.type,hitColor:this.hitColor.serialize(),style:this.style,propName:this.propName,input:this.input?this.input.serialize():null,output:this.output?this.output.serialize():null,options:this.options,height:this.height,childs:[]}},h.deSerialize=function(t,e){return new h(t,e.options,e.propName,e.input,e.output,e.height,e.style,e.id,r.Color.deSerialize(e.hitColor))},h);function h(t,e,i,o,n,s,r,h,l){void 0===e&&(e=[]),void 0===r&&(r={});var a=u.call(this,t,d.Vector2.Zero(),y.UIType.Select,!1,c(c({},y.Constant.DefaultSelectStyle()),r),i,o?"boolean"==typeof o?new p.Terminal(t,y.TerminalType.IN,"string","",{}):p.Terminal.deSerialize(t,o):null,n?"boolean"==typeof n?new p.Terminal(t,y.TerminalType.OUT,"string","",{}):p.Terminal.deSerialize(t,n):null,h,l)||this;return a.options=e,a.height=s||a.node.style.rowHeight,a._selected=0===a.options.length?"None":a.options[0],a.label=new f.Label(a.node,a.selected,null,!1,!1,c({align:"center"},a.style),a.height),a.children.push(a.label),a.input&&(a.input.on("connect",function(t,e){e.data&&(a.selected=e.data)}),a.input.on("data",function(t){t&&(a.selected=t)})),a.output&&a.output.on("connect",function(t,e){return e.data=a.selected}),a}e.Select=n},526:function(t,e,i){var o,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),d=this&&this.__assign||function(){return(d=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.Slider=void 0;var f,y=i(900),g=i(281),s=i(974),r=i(681),x=i(522),h=i(278),n=(f=r.UINode,n(l,f),Object.defineProperty(l.prototype,"value",{get:function(){return this.propName?this.node.props[this.propName]:this._value},set:function(t){t=s.clamp(t,this.min,this.max),this.propName?this.node.props[this.propName]=t:(this._value=t,this.call("change",this,this.value),this.reflow())},enumerable:!1,configurable:!0}),l.prototype.paint=function(){this.context.lineWidth=this.style.railHeight,this.context.strokeStyle=this.style.color,this.context.lineCap="butt";var t=Math.max(this.position.x,this.position.x+this.thumbFill-3);t!==this.position.x&&(this.context.beginPath(),this.context.moveTo(this.position.x,this.position.y+this.height/2),this.context.lineTo(t,this.position.y+this.height/2),this.context.stroke()),(t=Math.min(this.position.x+2*this.style.thumbRadius+this.thumbFill+3,this.position.x+this.width))!==this.position.x+this.width&&(this.context.beginPath(),this.context.moveTo(t,this.position.y+this.height/2),this.context.lineTo(this.position.x+this.width,this.position.y+this.height/2),this.context.stroke()),this.context.fillStyle=this.style.thumbColor,this.context.beginPath(),this.context.arc(this.position.x+this.style.thumbRadius+this.thumbFill,this.position.y+this.height/2,this.style.thumbRadius,0,2*Math.PI),this.context.fill()},l.prototype.paintLOD1=function(){this.context.strokeStyle="#000",this.context.fillStyle=this.style.color,this.context.strokeRect(this.position.x,this.position.y,this.width,this.height),this.context.fillRect(this.position.x,this.position.y,this.width,this.height)},l.prototype.offPaint=function(){this.offUIContext.fillStyle=this.hitColor.hexValue,this.offUIContext.fillRect(this.position.x,this.position.y,this.width,this.height)},l.prototype.reflow=function(){this.thumbFill=s.denormalize(s.normalize(this.value,this.min,this.max),0,this.width-2*this.style.thumbRadius),this.input&&(this.input.position.x=this.node.position.x-this.node.style.terminalStripMargin-this.input.style.radius,this.input.position.y=this.position.y+this.height/2),this.output&&(this.output.position.x=this.node.position.x+this.node.width+this.node.style.terminalStripMargin+this.output.style.radius,this.output.position.y=this.position.y+this.height/2)},l.prototype.onPropChange=function(t,e){this._value=e,this.reflow(),this.call("change",this,this.value),this.output&&this.output.setData(this.value)},l.prototype.onOver=function(t,e){this.disabled||this.call("over",this,t,e)},l.prototype.onDown=function(t,e){this.disabled||this.call("down",this,t,e)},l.prototype.onUp=function(t,e){this.disabled||this.call("up",this,t,e)},l.prototype.onClick=function(t,e){this.disabled||this.call("click",this,t,e)},l.prototype.onDrag=function(t,e){this.disabled||(this.call("drag",this,t,e),t=this.position.y+this.height/2-this.style.railHeight/2,this.thumbFill=e.clamp(this.position.x+this.style.thumbRadius,this.position.x+this.width-this.style.thumbRadius,t,t).subtract(this.position.x+this.style.thumbRadius,0).x,this.value=parseFloat(s.denormalize(s.normalize(this.thumbFill,0,this.width-2*this.style.thumbRadius),this.min,this.max).toFixed(this.precision)))},l.prototype.onEnter=function(t,e){this.disabled||this.call("enter",this,t,e)},l.prototype.onExit=function(t,e){this.disabled||this.call("exit",this,t,e)},l.prototype.onContextMenu=function(){this.disabled},l.prototype.serialize=function(){return{id:this.id,type:this.type,hitColor:this.hitColor.serialize(),style:this.style,propName:this.propName,input:this.input?this.input.serialize():null,output:this.output?this.output.serialize():null,min:this.min,max:this.max,value:this.value,precision:this.precision,height:this.height,childs:[]}},l.deSerialize=function(t,e){return new l(t,e.min,e.max,e.value,e.precision,e.propName,e.input,e.output,e.height,e.style,e.id,h.Color.deSerialize(e.hitColor))},l);function l(t,e,i,o,n,s,r,h,l,a,c,u){void 0===n&&(n=0),void 0===a&&(a={});var p=f.call(this,t,g.Vector2.Zero(),x.UIType.Slider,!0,d(d({},x.Constant.DefaultSliderStyle(l)),a),s,r?"boolean"==typeof r?new y.Terminal(t,x.TerminalType.IN,"number","",{}):y.Terminal.deSerialize(t,r):null,h?"boolean"==typeof h?new y.Terminal(t,x.TerminalType.OUT,"number","",{}):y.Terminal.deSerialize(t,h):null,c,u)||this;return p.min=e,p.max=i,p.precision=n,p.height=l||p.node.style.rowHeight,p.value=parseFloat(o.toFixed(p.precision)),p.input&&(p.input.on("connect",function(t,e){e.data&&(p.value=e.data)}),p.input.on("data",function(t){t&&(p.value=t)})),p.output&&p.output.on("connect",function(t,e){return e.data=p.value}),p}e.Slider=n},2:function(t,e,i){var o,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),c=this&&this.__assign||function(){return(c=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.Source=void 0;var u,p=i(900),d=i(281),f=i(124),y=i(799),g=i(120),s=i(681),x=i(522),r=i(278),n=(u=s.UINode,n(h,u),Object.defineProperty(h.prototype,"file",{get:function(){return this.propName?this.node.props[this.propName]:this._file},set:function(t){this.propName?this.node.props[this.propName]=t:(this._file=t,this.label.text=this._file.name.substring(0,this._file.name.toString().lastIndexOf(".")),this.call("change",this,this._file))},enumerable:!1,configurable:!0}),h.prototype.paint=function(){this.context.strokeStyle=this.style.borderColor,this.context.strokeRect(this.position.x,this.position.y,this.width,this.height)},h.prototype.paintLOD1=function(){this.context.strokeStyle=this.style.borderColor,this.context.fillStyle=this.style.color,this.context.strokeRect(this.position.x,this.position.y,this.width,this.height),this.context.fillRect(this.position.x,this.position.y,this.width,this.height)},h.prototype.offPaint=function(){this.offUIContext.fillStyle=this.hitColor.hexValue,this.offUIContext.fillRect(this.position.x,this.position.y,this.width,this.height)},h.prototype.reflow=function(){this.label.width=this.width,this.label.height=this.height,this.label.position=this.position,this.fileIcon.width=.1*this.width,this.fileIcon.position.x=this.position.x+5,this.fileIcon.position.y=this.position.y+this.height/2-this.fileIcon.height/2,this.input&&(this.input.position.x=this.node.position.x-this.node.style.terminalStripMargin-this.input.style.radius,this.input.position.y=this.position.y+this.height/2),this.output&&(this.output.position.x=this.node.position.x+this.node.width+this.node.style.terminalStripMargin+this.output.style.radius,this.output.position.y=this.position.y+this.height/2)},h.prototype.onPropChange=function(t,e){this._file=e,this.label.text=this._file.name.substring(0,this._file.name.toString().lastIndexOf(".")),this.call("change",this,this._file),this.output&&this.output.setData(this._file)},h.prototype.onOver=function(t,e){this.disabled||this.call("over",this,t,e)},h.prototype.onDown=function(t,e){this.disabled||this.call("down",this,t,e)},h.prototype.onUp=function(t,e){this.disabled||this.call("up",this,t,e)},h.prototype.onClick=function(t,e){this.disabled||this.call("click",this,t,e)},h.prototype.onDrag=function(t,e){this.disabled||this.call("drag",this,t,e)},h.prototype.onEnter=function(t,e){this.disabled||this.call("enter",this,t,e)},h.prototype.onExit=function(t,e){this.disabled||this.call("exit",this,t,e)},h.prototype.onContextMenu=function(){this.disabled},h.prototype.serialize=function(){return{id:this.id,type:this.type,hitColor:this.hitColor.serialize(),style:this.style,propName:this.propName,input:this.input?this.input.serialize():null,output:this.output?this.output.serialize():null,accept:this.accept,height:this.height,childs:[]}},h.deSerialize=function(t,e){return new h(t,e.accept,e.propName,e.input,e.output,e.height,e.style,e.id,r.Color.deSerialize(e.hitColor))},h);function h(t,e,i,o,n,s,r,h,l){void 0===r&&(r={});var a=u.call(this,t,d.Vector2.Zero(),x.UIType.Source,!1,c(c({},x.Constant.DefaultSourceStyle()),r),i,o?"boolean"==typeof o?new p.Terminal(t,x.TerminalType.IN,"file","",{}):p.Terminal.deSerialize(t,o):null,n?"boolean"==typeof n?new p.Terminal(t,x.TerminalType.OUT,"file","",{}):p.Terminal.deSerialize(t,n):null,h,l)||this;return a.accept=e,a.height=s||a.node.style.rowHeight,a.htmlInput=document.createElement("input"),a.htmlInput.type="file",e&&(a.htmlInput.accept=e),a.htmlInput.onchange=function(){0<a.htmlInput.files.length&&(a.file=a.htmlInput.files[0])},a.label=new g.Label(a.node,"Select",null,!1,!1,c({align:"center"},a.style),a.height),a.label.on("click",function(){return a.htmlInput.click()}),a.fileIcon=new y.Image(a.node,f.fileIcon),a.children.push(a.label,a.fileIcon),a.input&&(a.input.on("connect",function(t,e){e.data&&(a.file=e.data)}),a.input.on("data",function(t){t&&(a.file=t)})),a.output&&a.output.on("connect",function(t,e){return e.data=a.file}),a}e.Source=n},369:function(t,e,i){var o,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),a=this&&this.__assign||function(){return(a=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.Toggle=void 0;var c,u=i(900),p=i(281),s=i(681),d=i(522),r=i(278),n=(c=s.UINode,n(h,c),Object.defineProperty(h.prototype,"checked",{get:function(){return this.propName?this.node.props[this.propName]:this._checked},set:function(t){this.propName?this.node.props[this.propName]=t:(this._checked=t,this.call("change",this,this.checked))},enumerable:!1,configurable:!0}),h.prototype.paint=function(){this.context.strokeStyle=this.style.backgroundColor,this.context.lineWidth=.75*this.height,this.context.lineCap="round",this.context.beginPath(),this.context.moveTo(this.position.x+this.context.lineWidth/2,this.position.y+this.height/2),this.context.lineTo(this.position.x+this.width-this.context.lineWidth/2,this.position.y+this.height/2),this.context.stroke(),this.context.fillStyle=this.style.color,this.context.beginPath(),this.context.arc(this.checked?this.position.x+this.width-this.height/2:this.position.x+this.height/2,this.position.y+this.height/2,this.height/2,0,2*Math.PI),this.context.fill()},h.prototype.paintLOD1=function(){this.context.strokeStyle=this.style.color,this.context.fillStyle=this.style.backgroundColor,this.context.strokeRect(this.position.x,this.position.y,this.width,this.height),this.context.fillRect(this.position.x,this.position.y,this.width,this.height)},h.prototype.offPaint=function(){this.offUIContext.fillStyle=this.hitColor.hexValue,this.offUIContext.fillRect(this.position.x,this.position.y,this.width,this.height)},h.prototype.reflow=function(){this.input&&(this.input.position.x=this.node.position.x-this.node.style.terminalStripMargin-this.input.style.radius,this.input.position.y=this.position.y+this.height/2),this.output&&(this.output.position.x=this.node.position.x+this.node.width+this.node.style.terminalStripMargin+this.output.style.radius,this.output.position.y=this.position.y+this.height/2)},h.prototype.onPropChange=function(t,e){this._checked=e,this.call("change",this,this.checked),this.output&&this.output.setData(this.checked)},h.prototype.onOver=function(t,e){this.disabled||this.call("over",this,t,e)},h.prototype.onDown=function(t,e){this.disabled||this.call("down",this,t,e)},h.prototype.onUp=function(t,e){this.disabled||this.call("up",this,t,e)},h.prototype.onClick=function(t,e){this.disabled||(this.call("click",this,t,e),this.checked=!this.checked)},h.prototype.onDrag=function(t,e){this.disabled||this.call("drag",this,t,e)},h.prototype.onEnter=function(t,e){this.disabled||this.call("enter",this,t,e)},h.prototype.onExit=function(t,e){this.disabled||this.call("exit",this,t,e)},h.prototype.onContextMenu=function(){this.disabled},h.prototype.serialize=function(){return{id:this.id,type:this.type,hitColor:this.hitColor.serialize(),style:this.style,propName:this.propName,input:this.input?this.input.serialize():null,output:this.output?this.output.serialize():null,checked:this.checked,height:this.height,childs:[]}},h.deSerialize=function(t,e){return new h(t,e.propName,e.input,e.output,e.height,e.style,e.id,r.Color.deSerialize(e.hitColor))},h);function h(t,e,i,o,n,s,r,h){void 0===s&&(s={});var l=c.call(this,t,p.Vector2.Zero(),d.UIType.Toggle,!1,a(a({},d.Constant.DefaultToggleStyle()),s),e,i?"boolean"==typeof i?new u.Terminal(t,d.TerminalType.IN,"boolean","",{}):u.Terminal.deSerialize(t,i):null,o?"boolean"==typeof o?new u.Terminal(t,d.TerminalType.OUT,"boolean","",{}):u.Terminal.deSerialize(t,o):null,r,h)||this;return l._checked=!1,l._checked=!!l.propName&&l.node.props[l.propName],l.height=n||l.node.style.rowHeight,l.input&&(l.input.on("connect",function(t,e){e.data&&(l.checked=e.data)}),l.input.on("data",function(t){void 0!==t&&(l.checked=t)})),l.output&&l.output.on("connect",function(t,e){return e.data=l.checked}),l}e.Toggle=n},681:function(t,e,i){var o,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0}),e.UINode=void 0;var u,s=i(278),r=i(417),h=i(522),p=i(974),n=(u=r.Hooks,n(l,u),Object.defineProperty(l.prototype,"disabled",{get:function(){return this._disabled},set:function(e){this._disabled=e,this.children.forEach(function(t){return t.disabled=e})},enumerable:!1,configurable:!0}),l.prototype.append=function(t){var e;Array.isArray(t)?(e=this.children).push.apply(e,t):this.children.push(t),this.update()},l.prototype.update=function(){this.reflow(),this.children.forEach(function(t){return t.update()})},l.prototype.updateRenderState=function(){var t;this.node.renderState.nodeState!==h.NodeState.MINIMIZED&&(t=this.position.transform(this.node.flow.flowConnect.transform),this.renderState=p.intersects(0,0,this.node.flow.flowConnect.canvasDimensions.width,this.node.flow.flowConnect.canvasDimensions.height,t.x,t.y,t.x+this.width*this.node.flow.flowConnect.scale,t.y+this.height*this.node.flow.flowConnect.scale),this.children.forEach(function(t){return t.updateRenderState()}))},l.prototype.setHitColor=function(t){if(!t)for(t=s.Color.Random();this.node.hitColorToUI[t.rgbaString]||this.node.hitColorToTerminal[t.rgbaString];)t=s.Color.Random();this.hitColor=t,this.node.hitColorToUI[this.hitColor.rgbaString]=this},l.prototype.render=function(){this.renderState!==h.ViewPort.OUTSIDE&&(this.node.renderState.lod===h.LOD.LOD1?(this.context.save(),this.paintLOD1(),this.context.restore()):this.node.renderState.lod===h.LOD.LOD2?(this.context.save(),this.paint(),this.context.restore(),this.offUIContext.save(),this.offPaint(),this.offUIContext.restore()):this.type===h.UIType.Container&&(this.context.save(),this.paintLOD1(),this.context.restore()),0<this.node.renderState.lod&&(this.input&&this.input.render(),this.output&&this.output.render()),this.children.forEach(function(t){return t.render()}))},l);function l(t,e,i,o,n,s,r,h,l,a){void 0===r&&(r=null),void 0===h&&(h=null),void 0===l&&(l=p.getNewGUID());var c=u.call(this)||this;return c.node=t,c.type=i,c.style=n,c.propName=s,c.input=r,c.output=h,c.id=l,c.hitColor=a,c.width=0,c.height=0,c.id=p.getNewGUID(),c.context=c.node.context,c.offUIContext=c.node.offUIContext,c.setHitColor(a),c.position=e,c.children=[],c.draggable=o,c.disabled=!1,c.propName&&c.node.addPropObserver(c.propName,c.onPropChange.bind(c)),r&&(c.node.inputsUI.push(c.input),c.input.on("connect",function(){return c.disabled=!0}),c.input.on("disconnect",function(){return c.disabled=!1})),h&&c.node.outputsUI.push(c.output),c}e.UINode=n},156:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BinaryTreeNode=e.BinarySearchTree=void 0;var i=(o.prototype.add=function(t){var e=new n(t);this.dataRefToTreeNode[this.dataToTreeNodeMapper(t)]=e,null===this.root?this.root=e:this._insert(this.root,e)},o.prototype._insert=function(t,e){this.comparator(e.data,t.data)<0?null===t.left?(t.left=e).parent=t:this._insert(t.left,e):null===t.right?(t.right=e).parent=t:this._insert(t.right,e)},o.prototype.remove=function(t){var e=this.dataRefToTreeNode[this.dataToTreeNodeMapper(t)];return!!e&&(delete this.dataRefToTreeNode[this.dataToTreeNodeMapper(t)],e.parent?e.parent.left===e?null===e.left&&null===e.right?!(e.parent.left=null):null===e.left?(e.right.parent=e.parent,e.parent.left=e.right,!0):null===e.right?(e.left.parent=e.parent,e.parent.left=e.left,!0):void this._deleteMinNode(e):null===e.left&&null===e.right?!(e.parent.right=null):null===e.left?(e.right.parent=e.parent,e.parent.right=e.right,!0):null===e.right?(e.left.parent=e.parent,e.parent.right=e.left,!0):void this._deleteMinNode(e):null===e.left&&null===e.right?!(this.root=null):null===e.left?(e.right.parent=e.parent,this.root=e.right,!0):null===e.right?(e.left.parent=e.parent,this.root=e.left,!0):void this._deleteMinNode(e))},o.prototype._deleteMinNode=function(t){var e=this.findMinNode(t.right);t.data=e.data,e.parent.left===e?e.parent.left=null:e.parent.right=null},o.prototype.findMinNode=function(t){return null===t.left?t:this.findMinNode(t.left)},o.prototype.forEach=function(t){this.action=t,this._inorder(this.root)},o.prototype._inorder=function(t){null!==t&&(this._inorder(t.left),this.action(t.data),this._inorder(t.right))},o.prototype._reverseInorder=function(t){null!==t&&(this._inorder(t.right),this.action(t.data),this._inorder(t.left))},o);function o(t,e){this.comparator=t,this.dataToTreeNodeMapper=e,this.root=null,this.dataRefToTreeNode={}}e.BinarySearchTree=i;var n=function(t){this.data=t,this.left=null,this.right=null,this.parent=null};e.BinaryTreeNode=n},928:function(t,e,i){var o=this&&this.__createBinding||(Object.create?function(t,e,i,o){void 0===o&&(o=i),Object.defineProperty(t,o,{enumerable:!0,get:function(){return e[i]}})}:function(t,e,i,o){t[o=void 0===o?i:o]=e[i]}),n=this&&this.__exportStar||function(t,e){for(var i in t)"default"===i||Object.prototype.hasOwnProperty.call(e,i)||o(e,t,i)};Object.defineProperty(e,"__esModule",{value:!0}),n(i(156),e),n(i(974),e),n(i(645),e)},645:(t,e)=>{var i;Object.defineProperty(e,"__esModule",{value:!0}),e.Logger=e.LogLevel=void 0,(o=i=e.LogLevel||(e.LogLevel={})).TRACE="Trace",o.INFO="Info",o.WARN="Warn",o.ERROR="Error",o.DISABLED="Disabled";var o=(n.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.LOG_LEVEL===i.TRACE&&console.log.apply(this,t)},n.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.LOG_LEVEL===i.INFO&&console.info.apply(this,t)},n.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.LOG_LEVEL===i.WARN&&console.warn.apply(this,t)},n.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.LOG_LEVEL===i.ERROR&&console.error.apply(this,t)},n.LOG_LEVEL=i.DISABLED,n);function n(){}e.Logger=o},974:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.clamp=e.intersects=e.getRandom=e.denormalize=e.normalize=e.getNewGUID=void 0;var l=i(522);e.getNewGUID=function(){function t(){return(65536*(1+Math.random())|0).toString(16).substring(1)}return t()+"-"+t()+"-"+t()+"-"+t()};e.normalize=function(t,e,i){return(t-e)/(i-e)};e.denormalize=function(t,e,i){return(i-e)*t+e};e.getRandom=function(t,e){return Math.random()*e+t};e.intersects=function(t,e,i,o,n,s,r,h){return!(i<n||r<t||o<s||h<e)?n<t||s<e||i<r||o<h?l.ViewPort.INTERSECT:l.ViewPort.INSIDE:l.ViewPort.OUTSIDE};e.clamp=function(t,e,i){return t<=e?e:i<t?i:t}}},n={};return function t(e){if(n[e])return n[e].exports;var i=n[e]={exports:{}};return o[e].call(i.exports,i,i.exports,t),i.exports}(184)})()});
//# sourceMappingURL=flow-connect.min.js.map