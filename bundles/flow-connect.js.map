{"version":3,"file":"flow-connect.js","mappings":"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","sources":["webpack://flow-connect/webpack/universalModuleDefinition","webpack://flow-connect/webpack/runtime/chunk loaded","webpack://flow-connect/./src/common/enums.ts","webpack://flow-connect/./src/common/index.ts","webpack://flow-connect/./src/core/color.ts","webpack://flow-connect/./src/core/connector.ts","webpack://flow-connect/./src/core/flow.ts","webpack://flow-connect/./src/core/graph.ts","webpack://flow-connect/./src/core/group.ts","webpack://flow-connect/./src/core/hooks.ts","webpack://flow-connect/./src/core/index.ts","webpack://flow-connect/./src/core/node.ts","webpack://flow-connect/./src/core/subflow-node.ts","webpack://flow-connect/./src/core/terminal.ts","webpack://flow-connect/./src/core/tunnel-node.ts","webpack://flow-connect/./src/core/vector.ts","webpack://flow-connect/./src/flow-connect.ts","webpack://flow-connect/./src/resource/audio-worklets.ts","webpack://flow-connect/./src/resource/constants.ts","webpack://flow-connect/./src/resource/icons.ts","webpack://flow-connect/./src/ui/2d-slider.ts","webpack://flow-connect/./src/ui/button.ts","webpack://flow-connect/./src/ui/container.ts","webpack://flow-connect/./src/ui/dial.ts","webpack://flow-connect/./src/ui/display.ts","webpack://flow-connect/./src/ui/envelope.ts","webpack://flow-connect/./src/ui/horizontal-layout.ts","webpack://flow-connect/./src/ui/image.ts","webpack://flow-connect/./src/ui/index.ts","webpack://flow-connect/./src/ui/input.ts","webpack://flow-connect/./src/ui/label.ts","webpack://flow-connect/./src/ui/radio-group.ts","webpack://flow-connect/./src/ui/select.ts","webpack://flow-connect/./src/ui/slider.ts","webpack://flow-connect/./src/ui/source.ts","webpack://flow-connect/./src/ui/stack.ts","webpack://flow-connect/./src/ui/toggle.ts","webpack://flow-connect/./src/ui/ui-node.ts","webpack://flow-connect/./src/ui/v-slider.ts","webpack://flow-connect/./src/utils/avl-tree.ts","webpack://flow-connect/./src/utils/bidirectional-map.ts","webpack://flow-connect/./src/utils/evaluator.ts","webpack://flow-connect/./src/utils/index.ts","webpack://flow-connect/./src/utils/lexer.ts","webpack://flow-connect/./src/utils/linked-list.ts","webpack://flow-connect/./src/utils/logger.ts","webpack://flow-connect/./src/utils/parser.ts","webpack://flow-connect/./src/utils/utils.ts","webpack://flow-connect/webpack/bootstrap","webpack://flow-connect/webpack/runtime/hasOwnProperty shorthand","webpack://flow-connect/webpack/runtime/jsonp chunk loading","webpack://flow-connect/webpack/startup"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(self, () => {\nreturn ","var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","/** To distinguish whether two rectangles are inside/intersecting/disconnected */\nexport enum ViewPort {\n  INSIDE = 'INSIDE',\n  OUTSIDE = 'OUTSIDE',\n  INTERSECT = 'INTERSECT'\n}\n\n/** Levels of Detail, affects rendering while zooming in/out */\nexport enum LOD {\n  LOD0,\n  LOD1,\n  LOD2\n}\n\nexport enum Align {\n  Left,\n  Center,\n  Right\n}\n\nexport enum GlobalEventType {\n  Emitter,\n  Receiver\n}\n","export * from './enums';\nexport * from './interfaces';\n","import { clamp, getRandom, lerp, normalize } from \"../utils/utils\";\nimport { Serializable } from \"../common/interfaces\";\nimport { Log } from \"../utils/logger\";\n\nexport class Color implements Serializable {\n  hexValue: string;\n  rgbaValue: Uint8ClampedArray | number[];\n  rgbaString: string;\n  rgbaCSSString: string;\n\n  constructor(rgba: Uint8ClampedArray | number[]) {\n    this.rgbaValue = rgba;\n    this.hexValue = Color.rgbaToHex(this.rgbaValue);\n    this.rgbaString = Color.rgbaToString(this.rgbaValue);\n    this.rgbaCSSString = Color.rgbaToCSSString(this.rgbaValue);\n  }\n  isEqual(color: Color) {\n    return color.rgbaValue[0] === this.rgbaValue[0]\n      && color.rgbaValue[1] === this.rgbaValue[1]\n      && color.rgbaValue[2] === this.rgbaValue[2]\n      && color.rgbaValue[3] === this.rgbaValue[3];\n  }\n\n  static Random(): Color {\n    return new Color(new Uint8ClampedArray(\n      [Math.floor(getRandom(0, 255)), Math.floor(getRandom(0, 255)), Math.floor(getRandom(0, 255)), 255]\n    ));\n  }\n  static hexToRGBA(hex: string): Uint8ClampedArray {\n    return new Uint8ClampedArray([parseInt(hex.slice(1, 3), 16), parseInt(hex.slice(3, 5), 16), parseInt(hex.slice(5, 7), 16), parseInt(hex.slice(7, 9), 16)]);\n  }\n  private static _componentToHex(c: number) {\n    let hex = c.toString(16);\n    return hex.length === 1 ? '0' + hex : hex;\n  }\n  static rgbaToHex(rgba: number[] | Uint8ClampedArray): string {\n    return \"#\" + Color._componentToHex(rgba[0]) + Color._componentToHex(rgba[1]) + Color._componentToHex(rgba[2]) + Color._componentToHex(rgba[3]);\n  }\n  static rgbaToString(rgba: Uint8ClampedArray | number[]): string {\n    return `${rgba[0]}:${rgba[1]}:${rgba[2]}:${rgba[3]}`;\n  }\n  static rgbaToCSSString(rgba: Uint8ClampedArray | number[]): string {\n    return `rgba(${rgba[0]}, ${rgba[1]}, ${rgba[2]}, ${normalize(rgba[3], 0, 255).toFixed(3)})`;\n  }\n\n  /** A linear interpolator for given array of colors */\n  static scale(colors: Color[] | Uint8ClampedArray | string[] | number[][]): (t: number) => string {\n    if (!Array.isArray(colors)) {\n      Log.error('An array is expected to create a color scale');\n      return;\n    }\n    if (colors.length <= 1) {\n      Log.error('At least two colors are required to create a color scale');\n      return;\n    }\n\n    let colorObjs: Color[] = [];\n    if (colors[0] instanceof Uint8ClampedArray || (Array.isArray(colors[0]) && typeof colors[0][0] === 'number')) {\n      colors.forEach(color => colorObjs.push(new Color(color as any)));\n    } else if (typeof colors[0] === 'string') {\n      colors.forEach(color => colorObjs.push(new Color(Color.hexToRGBA(color as any))));\n    } else {\n      colorObjs = colors as any;\n    }\n\n    return (t) => {\n      t = clamp(t, 0, 1);\n\n      let index = (colorObjs.length - 1) * t;\n      let start = Math.floor(index);\n      let end = Math.ceil(index);\n\n      t = index - start;\n\n      let startColor = colorObjs[start], endColor = colorObjs[end];\n\n      let result = startColor.rgbaValue.map((component, i) => {\n        component = lerp(component, endColor.rgbaValue[i], t);\n        if (i < 3) component = Math.round(component);\n        return component;\n      });\n\n      return 'rgba(' + result + ')';\n    }\n  }\n\n  serialize(): SerializedColor {\n    return {\n      rgba: [this.rgbaValue[0], this.rgbaValue[1], this.rgbaValue[2], this.rgbaValue[3]]\n    }\n  }\n  static deSerialize(data: SerializedColor) {\n    return new Color(data.rgba);\n  }\n}\n\nexport interface SerializedColor {\n  rgba: number[]\n}\n","import { Vector, SerializedVector } from \"./vector\";\nimport { get, getNewUUID } from \"../utils/utils\";\nimport { Flow, FlowState } from \"./flow\";\nimport { Terminal, TerminalType } from './terminal';\nimport { Renderable, RenderResolver, Serializable } from \"../common/interfaces\";\nimport { Node, NodeState } from \"./node\";\nimport { Hooks } from './hooks';\n\nexport class Connector extends Hooks implements Serializable, Renderable {\n  renderResolver: RenderResolver<Connector, ConnectorRenderParams> = () => null;\n\n  start: Terminal;\n  end: Terminal;\n  startNode: Node;\n  endNode: Node;\n  style: ConnectorStyle;\n  id: string;\n\n  _data: any;\n  floatingTip: Vector;\n\n  get data(): any { return this._data; }\n  set data(data: any) {\n    this._data = data;\n    this.end && this.end.call('data', this.end, data);\n    if (this.flow.state !== FlowState.Stopped) {\n      this.flow.executionGraph.setDirty(this.endNode);\n    }\n  }\n\n  constructor(\n    public flow: Flow,\n    start: Terminal,\n    end: Terminal,\n    options: ConnectorOptions = DefaultConnectorOptions()\n  ) {\n    super();\n\n    this.style = options.style ? { ...DefaultConnectorStyle(), ...options.style } : DefaultConnectorStyle();\n    this.id = get(options.id, getNewUUID());\n    this.floatingTip = options.floatingTip;\n\n    this.start = start;\n    this.end = end;\n    if (this.start) this.startNode = this.start.node;\n    if (this.end) this.endNode = this.end.node;\n    if (start && end) {\n      this.floatingTip = null;\n\n      this.start.connectors.push(this);\n      if (this.end.connectors.length > 0) {\n        this.end.connectors[0].removeConnection();\n        this.end.connectors[0] = this;\n      } else this.end.connectors.push(this);\n\n      if (!options.isDeserialization) this.flow.executionGraph.connect(this.startNode, this.endNode);\n      this.start.onConnect(this);\n      this.end.onConnect(this);\n    }\n  }\n\n  completeConnection(destination: Terminal) {\n    if (!this.start) {\n      this.start = destination;\n      this.startNode = this.start.node;\n    } else {\n      this.end = destination;\n      this.endNode = this.end.node;\n    }\n\n    if (!this.start.connectors.includes(this)) this.start.connectors.push(this);\n    this.end.connectors[0] = this;\n    this.floatingTip = null;\n\n    this.startNode.currHitTerminal && this.startNode.currHitTerminal.onExit(null, null);\n    this.startNode.currHitTerminal = null;\n    this.endNode.currHitTerminal && this.endNode.currHitTerminal.onExit(null, null);\n    this.endNode.currHitTerminal = null;\n\n    this.flow.executionGraph.connect(this.startNode, this.endNode);\n    this.start.onConnect(this);\n    this.end.onConnect(this);\n  }\n  removeConnection() {\n    if (this.start) {\n      this.start.connectors.includes(this) && this.start.connectors.splice(this.start.connectors.indexOf(this), 1);\n      if (this.startNode.currHitTerminal) {\n        this.startNode.currHitTerminal.onExit(null, null);\n        this.startNode.currHitTerminal = null;\n      }\n    }\n    if (this.end) {\n      this.end.connectors.includes(this) && this.end.connectors.splice(this.end.connectors.indexOf(this), 1);\n      if (this.endNode.currHitTerminal) {\n        this.endNode.currHitTerminal.onExit(null, null);\n        this.endNode.currHitTerminal = null;\n      }\n    }\n    this.flow.removeConnector(this.id);\n  }\n  setData(data: any) {\n    this._data = data;\n    this.end && this.end.call('data', this.end, data);\n  }\n  canConnect(other: Terminal): boolean {\n    let firstTerminal = !this.start ? this.end : this.start;\n    let source, destination;\n    if (firstTerminal.type === TerminalType.IN) {\n      source = other;\n      destination = firstTerminal;\n    } else {\n      source = firstTerminal;\n      destination = other;\n    }\n\n    if (!destination) return false;\n    if (source === destination) return false;\n    if (source.node === destination.node) return false;\n    if (source.type === destination.type) return false;\n    if (!this.flow.rules[source.dataType].includes(destination.dataType)) return false;      // Directional !!\n    if (!this.flow.executionGraph.canConnect(source.node, destination.node)) return false;\n    return true;\n  }\n\n  render() {\n    let context = this.flow.flowConnect.context;\n    context.save();\n    let flowRenderResolver = this.flow.renderResolver.connector;\n    let flowConnectRenderResolver = this.flow.flowConnect.renderResolver.connector;\n    ((this.renderResolver && this.renderResolver(this))\n      || (flowRenderResolver && flowRenderResolver(this))\n      || (flowConnectRenderResolver && flowConnectRenderResolver(this))\n      || this._render\n    )(context, this.getRenderParams(), this);\n    context.restore();\n\n    let offContext = this.flow.flowConnect.offContext;\n    offContext.save();\n    this._offRender();\n    offContext.restore();\n\n    this.call('render', this);\n  }\n  private _render(context: CanvasRenderingContext2D, params: ConnectorRenderParams, connector: Connector) {\n    let ax = params.start.x, ay = params.start.y, dx = params.end.x, dy = params.end.y;\n\n    let offset = Vector.Distance(ax, ay, dx, dy);\n    offset *= .2;\n\n    let [bx, by] = [ax + offset, ay];\n    let [cx, cy] = [dx - offset, dy];\n    let [midx, midy] = [(bx + cx) / 2, (by + cy) / 2];\n\n    if (connector.style.border) {\n      context.strokeStyle = connector.style.borderColor;\n      context.lineWidth = connector.style.width + 2;\n      context.beginPath();\n      context.moveTo(ax, ay);\n      context.quadraticCurveTo(bx, by, midx, midy);\n      context.moveTo(midx, midy);\n      context.quadraticCurveTo(cx, cy, dx, dy);\n      context.stroke();\n    }\n\n    context.strokeStyle = connector.style.color;\n    context.lineWidth = connector.style.width;\n    context.beginPath();\n    context.moveTo(ax, ay);\n    context.quadraticCurveTo(bx, by, midx, midy);\n    context.moveTo(midx, midy);\n    context.quadraticCurveTo(cx, cy, dx, dy);\n    context.stroke();\n  }\n  private _offRender() { /**/ }\n  private getRenderParams(): ConnectorRenderParams {\n    let start: SerializedVector, end: SerializedVector;\n    if (this.start) {\n      if (this.startNode.renderState.nodeState === NodeState.MAXIMIZED)\n        start = this.start.position.serialize();\n      else {\n        start = this.startNode.position.serialize();\n        start.x += this.startNode.width + this.startNode.style.terminalStripMargin + this.start.style.radius;\n        start.y += this.startNode.style.titleHeight / 2;\n      }\n    } else\n      start = this.floatingTip.serialize();\n    if (this.end) {\n      if (this.endNode.renderState.nodeState === NodeState.MAXIMIZED)\n        end = this.end.position.serialize();\n      else {\n        end = this.endNode.position.serialize();\n        end.x -= (this.endNode.style.terminalStripMargin + this.end.style.radius);\n        end.y += this.endNode.style.titleHeight / 2;\n      }\n    } else\n      end = this.floatingTip.serialize();\n\n    return { start, end };\n  }\n\n  serialize(): SerializedConnector {\n    return {\n      id: this.id,\n      startId: this.start.id,\n      endId: this.end.id,\n      startNodeId: this.startNode.id,\n      endNodeId: this.endNode.id,\n      style: this.style\n    }\n  }\n  static deSerialize(flow: Flow, start: Terminal, end: Terminal, data: SerializedConnector): Connector {\n    return new Connector(flow, start, end, {\n      style: data.style,\n      id: data.id,\n      isDeserialization: true\n    });\n  }\n}\n\nexport interface SerializedConnector {\n  startNodeId: string,\n  endNodeId: string,\n  startId: string,\n  endId: string,\n  id: string,\n  style: ConnectorStyle\n}\n\nexport interface ConnectorStyle {\n  width?: number,\n  color?: string,\n  border?: boolean,\n  borderColor?: string\n}\nlet DefaultConnectorStyle = (): ConnectorStyle => {\n  return {\n    width: 5,\n    color: '#7fff00aa',\n    border: true,\n    borderColor: 'grey'\n  };\n};\n\nexport interface ConnectorOptions {\n  floatingTip?: Vector,\n  style?: ConnectorStyle,\n  id?: string,\n  isDeserialization?: boolean\n}\nlet DefaultConnectorOptions = (): ConnectorOptions => {\n  return {\n    style: {},\n    id: getNewUUID()\n  };\n}\n\nexport interface ConnectorRenderParams {\n  start: SerializedVector,\n  end: SerializedVector\n}\n","import { FlowConnect } from \"../flow-connect\";\nimport { Vector } from \"./vector\";\nimport { Node, NodeButton, NodeButtonRenderParams, NodeRenderParams, NodeStyle, SerializedNode } from \"./node\";\nimport { Hooks } from './hooks';\nimport { Group, GroupRenderParams, SerializedGroup } from './group';\nimport { Connector, ConnectorRenderParams, SerializedConnector } from './connector';\nimport { AVLTree } from \"../utils/avl-tree\";\nimport { Serializable, Rules, RenderResolver } from '../common/interfaces';\nimport { SubFlowNode } from \"./subflow-node\";\nimport { TunnelNode, SerializedTunnelNode } from \"./tunnel-node\";\nimport { getNewUUID } from \"../utils/utils\";\nimport { Graph, SerializedGraph } from \"./graph\";\nimport { Terminal, TerminalRenderParams, TerminalStyle } from \"./terminal\";\nimport { Log } from '../utils/logger';\nimport { Container, ContainerRenderParams } from '../ui/container';\n\n/** A Flow is a set of Nodes, Connectors and Groups, it can also contain SubFlowNodes thereby creating a tree of Flows.\n *  ![](media://example.png)\n */\nexport class Flow extends Hooks implements Serializable {\n  sortedNodes: AVLTree<Node>;\n  nodes: Map<string, Node>;\n  groups: Group[];\n  connectors: Map<string, Connector>;\n  inputs: TunnelNode[];\n  outputs: TunnelNode[];\n  get state(): FlowState { return this.executionGraph.state; }\n  globalEvents: Hooks = new Hooks();\n  parentFlow: Flow = null;\n\n  nodeHitColors: Map<string, Node>;\n  groupHitColors: Map<string, Group>;\n  listeners: Record<string, number> = {};\n\n  executionGraph: Graph;\n\n  readonly renderResolver: {\n    connector?: RenderResolver<Connector, ConnectorRenderParams>,\n    node?: RenderResolver<Node, NodeRenderParams>,\n    nodeButton?: RenderResolver<NodeButton, NodeButtonRenderParams>,\n    uiContainer?: RenderResolver<Container, ContainerRenderParams>\n    group?: RenderResolver<Group, GroupRenderParams>,\n    terminal?: RenderResolver<Terminal, TerminalRenderParams>,\n  } = {};\n\n  constructor(\n    public flowConnect: FlowConnect,\n    public name: string,\n    public rules: Rules,\n    public terminalColors: Record<string, string>,\n    public id: string = getNewUUID()\n  ) {\n\n    super();\n    this.nodes = new Map();\n    this.groups = [];\n    this.connectors = new Map();\n    this.nodeHitColors = new Map();\n    this.groupHitColors = new Map();\n    this.sortedNodes = new AVLTree((a: Node, b: Node) => (a.zIndex - b.zIndex), (node: Node) => node.id);\n    this.inputs = [];\n    this.outputs = [];\n    this.executionGraph = new Graph();\n\n    this.registerListeners();\n\n    this.flowConnect.on('tick', () => {\n      if (this.state === FlowState.Running) this.call('tick', this);\n    });\n  }\n\n  private registerListeners() {\n    let id = this.flowConnect.on('transform', () => this.call('transform', this));\n    this.listeners['transform'] = id;\n  }\n  deregisterListeners() {\n    this.flowConnect.off('transform', this.listeners['transform']);\n    delete this.listeners['transform'];\n  }\n\n  existsInFlow(flow: Flow): boolean {\n    for (let node of [...this.nodes.values()]) {\n      if ((node as SubFlowNode).subFlow === flow) return true;\n      else if ((node as SubFlowNode).subFlow) {\n        return (node as SubFlowNode).subFlow.existsInFlow(flow);\n      }\n    }\n    return false;\n  }\n\n  addInput(name: string, dataType: string, position: Vector): TunnelNode {\n    let flowInput = new TunnelNode(this, 'Input', position, 100, [], [{ name: name, dataType: dataType }]);\n    flowInput.on('process', () => {\n      flowInput.outputs[0].setData(flowInput.proxyTerminal.getData());\n    });\n\n    this.inputs.push(flowInput);\n    this.nodes.set(flowInput.id, flowInput);\n    this.sortedNodes.add(flowInput);\n    this.executionGraph.add(flowInput);\n\n    this.call('add-input', this, flowInput);\n    return flowInput;\n  }\n  addOutput(name: string, dataType: string, position: Vector): TunnelNode {\n    let flowOutput = new TunnelNode(this, 'Output', position, 100, [{ name: name, dataType: dataType }], []);\n\n    this.outputs.push(flowOutput);\n    this.nodes.set(flowOutput.id, flowOutput);\n    this.sortedNodes.add(flowOutput);\n    this.executionGraph.add(flowOutput);\n\n    this.call('add-output', this, flowOutput);\n    return flowOutput;\n  }\n  addSubFlow(flow: Flow, position: Vector = Vector.Zero()): SubFlowNode {\n    if (flow.parentFlow) {\n      Log.error('Provided flow is already a sub-flow, a sub-flow cannot have multiple parent flows');\n      return null;\n    }\n    let subFlowNode = new SubFlowNode(this, flow, position, 150,\n      flow.inputs.map(inputNode => { return { name: inputNode.outputs[0].name, dataType: inputNode.outputs[0].dataType } }),\n      flow.outputs.map(outputNode => { return { name: outputNode.inputs[0].name, dataType: outputNode.inputs[0].dataType } }),\n      { name: flow.name }\n    );\n    this.nodes.set(subFlowNode.id, subFlowNode);\n    this.sortedNodes.add(subFlowNode);\n    this.executionGraph.add(subFlowNode);\n    flow.parentFlow = this;\n\n    return subFlowNode;\n  }\n  createNode(name: string, position: Vector, width: number, options?: NodeOptions): Node {\n    options = options ? { ...DefaultNodeOptions(), ...options } : DefaultNodeOptions();\n\n    let inTerminals: any[] = [], outTerminals: any[] = [];\n    if (typeof options.inputs !== 'undefined') inTerminals = options.inputs;\n    if (typeof options.outputs !== 'undefined') outTerminals = options.outputs;\n\n    return new Node(this, name, position, width, inTerminals, outTerminals, {\n      style: options.style,\n      terminalStyle: options.terminalStyle,\n      state: options.state\n    });\n  }\n  removeNode(nodeOrID: Node | string) {\n    /** TODO */\n  }\n  removeConnector(id: string) {\n    if (this.connectors.get(id) === this.flowConnect.floatingConnector) this.flowConnect.floatingConnector = null;\n    this.connectors.delete(id);\n  }\n  removeAllFocus() {\n    this.nodes.forEach(node => node.focused = false);\n  }\n  render() {\n    this.groups.forEach(group => group.render());\n    this.connectors.forEach(connector => connector.render());\n    this.sortedNodes.forEach(node => node.render());\n\n    this.call('render', this);\n  }\n  start() {\n    if (this.state !== FlowState.Stopped) return;\n    this.executionGraph.start();\n    this.call('start', this);\n  }\n  stop() {\n    // Bottom-up, all child sub-flows gets stopped first before parent\n    // What if FlowState is Running ?\n    if (this.state === FlowState.Stopped) return;\n\n    // Bottom-up, sub-flows are stopped from highest order to lowest (order = depth of node in the tree)\n    for (let order = this.executionGraph.nodes.length - 1; order >= 0; order -= 1) {\n      this.executionGraph.nodes[order]\n        .filter(graphNode => graphNode.flowNode instanceof SubFlowNode)\n        .map(graphNode => graphNode.flowNode)\n        .forEach((subFlowNode: SubFlowNode) => subFlowNode.subFlow.stop());\n    }\n    this.executionGraph.stop();\n    this.call('stop', this);\n  }\n\n  serialize(): SerializedFlow {\n    return {\n      id: this.id,\n      name: this.name,\n      rules: this.rules,\n      terminalColors: this.terminalColors,\n      nodes: [...this.nodes.values()].map(node => node.serialize()),\n      groups: this.groups.map(group => group.serialize()),\n      connectors: [...this.connectors.values()].map(connector => connector.serialize()),\n      inputs: this.inputs.map(input => input.serialize()),\n      outputs: this.outputs.map(output => output.serialize()),\n      executionGraph: this.executionGraph.serialize()\n    }\n  }\n  static deSerialize(flowConnect: FlowConnect, data: SerializedFlow): Flow {\n    let flow = new Flow(flowConnect, data.name, data.rules, data.terminalColors, data.id);\n\n    data.nodes.forEach(serializedNode => {\n      let node;\n      if (serializedNode.subFlow) node = SubFlowNode.deSerialize(flow, serializedNode);\n      else node = Node.deSerialize(flow, serializedNode);\n      flow.nodes.set(node.id, node);\n      flow.sortedNodes.add(node);\n    });\n    data.groups.forEach(serializedGroup => {\n      let group = Group.deSerialize(flow, serializedGroup);\n      flow.groups.push(group);\n      group.nodes.forEach(node => node.group = group);\n    });\n    data.inputs.forEach(serializedInput => {\n      let input = TunnelNode.deSerialize(flow, serializedInput);\n      flow.inputs.push(input);\n      flow.nodes.set(input.id, input);\n      flow.sortedNodes.add(input);\n    });\n    data.outputs.forEach(serializedOutput => {\n      let output = TunnelNode.deSerialize(flow, serializedOutput);\n      flow.outputs.push(output);\n      flow.nodes.set(output.id, output);\n      flow.sortedNodes.add(output);\n    });\n    data.connectors.forEach(serializedConnector => {\n      let startNode = flow.nodes.get(serializedConnector.startNodeId);\n      let startTerminal = startNode.outputs.concat(startNode.outputsUI).find(terminal => terminal.id === serializedConnector.startId);\n      let endNode = flow.nodes.get(serializedConnector.endNodeId);\n      let endTerminal = endNode.inputs.concat(endNode.inputsUI).find(terminal => terminal.id === serializedConnector.endId);\n      let connector = Connector.deSerialize(flow, startTerminal, endTerminal, serializedConnector);\n      flow.connectors.set(serializedConnector.id, connector);\n    });\n\n    flow.executionGraph = Graph.deSerialize(flow, data.executionGraph);\n\n    return flow;\n  }\n}\n\nexport enum FlowState {\n  Running = 'Running',\n  Idle = 'Idle',\n  Stopped = 'Stopped'\n}\n\nexport interface FlowOptions {\n  name: string,\n  rules: Rules,\n  terminalColors: Record<string, string>\n}\n\nexport interface SerializedFlow {\n  id: string,\n  name: string,\n  rules: Rules,\n  terminalColors: Record<string, string>,\n  nodes: SerializedNode[],\n  groups: SerializedGroup[],\n  connectors: SerializedConnector[],\n  inputs: SerializedTunnelNode[],\n  outputs: SerializedTunnelNode[],\n  executionGraph: SerializedGraph\n}\n\nexport interface NodeOptions {\n  inputs?: any[],\n  outputs?: any[],\n  style: NodeStyle,\n  terminalStyle: TerminalStyle,\n  state?: Record<string, any>\n}\nlet DefaultNodeOptions = (): NodeOptions => {\n  return {\n    style: {},\n    terminalStyle: {}\n  }\n}\n","import { Log } from \"../utils/logger\";\nimport { getNewUUID } from \"../utils/utils\";\nimport { Flow, FlowState } from \"./flow\";\nimport { Serializable } from \"../common/interfaces\";\nimport { Node } from \"./node\";\nimport { List } from \"../utils/linked-list\";\n\n// A directed acyclic graph\nexport class Graph implements Serializable {\n  state: FlowState = FlowState.Stopped;\n  nodes: GraphNode[][];\n  graphNodes: Map<string, GraphNode>;\n  dirtyNodes: Map<string, GraphNode>;\n\n  constructor() {\n    this.nodes = [];\n    this.graphNodes = new Map();\n    this.dirtyNodes = new Map();\n  }\n\n  add(data: Node) {\n    if (!this.nodes[0]) this.nodes.push([]);\n    let graphNode = new GraphNode(data);\n    this.nodes[0].push(graphNode);\n    this.graphNodes.set(data.id, graphNode);\n  }\n  connect(sourceNode: Node, destinationNode: Node) {\n    let startGraphNode = this.graphNodes.get(sourceNode.id);\n    let endGraphNode = this.graphNodes.get(destinationNode.id);\n\n    if (!startGraphNode.childs.includes(endGraphNode)) {\n      startGraphNode.childs.push(endGraphNode);\n\n      if (endGraphNode.order <= startGraphNode.order) {\n        this.updateOrder(endGraphNode, startGraphNode.order + 1);\n      }\n    }\n  }\n  disconnect(sourceNode: Node, destinationNode: Node) {\n    let sourceGraphNode = this.graphNodes.get(sourceNode.id);\n    let destinationGraphNode = this.graphNodes.get(destinationNode.id);\n\n    let connectedEndNodes = new Set<Node>();\n    sourceNode.outputs\n      .forEach(terminal => terminal.connectors\n        .forEach(connector => connector.endNode && connectedEndNodes.add(connector.endNode))\n      );\n\n    if (connectedEndNodes.has(destinationNode)) return;\n    sourceGraphNode.childs.splice(sourceGraphNode.childs.indexOf(destinationGraphNode), 1);\n\n    let maxOrderOfConnectedStartNodes = destinationNode.inputs\n      .filter(terminal => terminal.connectors.length > 0)\n      .map(terminal => this.graphNodes.get(terminal.connectors[0].startNode.id).order)\n      .reduce((acc, curr) => Math.max(acc, curr), 0);\n\n    this.updateOrder(destinationGraphNode, maxOrderOfConnectedStartNodes);\n  }\n  updateOrder(root: GraphNode, order: number) {\n    this._updateOrder(root, order);\n    let queue: GraphNode[] = [];\n    queue.push(root);\n    while (queue.length !== 0) {\n      let currNode = queue.shift();\n      currNode.childs.forEach(child => {\n        if (child.order <= currNode.order) {\n          this._updateOrder(child, currNode.order + 1);\n        }\n        if (!queue.includes(child)) queue.push(child);\n      });\n    }\n  }\n  private _updateOrder(graphNode: GraphNode, order: number) {\n    this.nodes[graphNode.order].splice(this.nodes[graphNode.order].indexOf(graphNode), 1);\n    if (!this.nodes[order]) this.nodes[order] = [];\n    graphNode.order = order;\n    this.nodes[order].push(graphNode);\n  }\n  canConnect(sourceNode: Node, destinationNode: Node) {\n    if (this.graphNodes.get(destinationNode.id).childs.includes(this.graphNodes.get(sourceNode.id))) return false;\n    return true;\n  }\n\n  async start() {\n    if (this.state === FlowState.Stopped) {       // Full Run\n      this.state = FlowState.Running;\n      if (this.nodes[0]) {\n        try {\n          await this.runAll(this.nodes[0]);\n\n          while (this.dirtyNodes.size !== 0) {\n            await this.runAll(this.lowestDirty([...this.dirtyNodes.values()]));\n          }\n        } catch (error) {\n          Log.error('Error while executing graph', error);\n          this.state = FlowState.Stopped;\n          return;\n        }\n      }\n    } else if (this.state === FlowState.Idle) {   // Partial Run\n      this.state = FlowState.Running;\n      try {\n        while (this.dirtyNodes.size !== 0) {\n          await this.runAll(this.lowestDirty([...this.dirtyNodes.values()]));\n        }\n      } catch (error) {\n        Log.error('Error while executing graph', error);\n        this.state = FlowState.Stopped;\n        return;\n      }\n    }\n\n    this.state = FlowState.Idle;\n  }\n  stop() {\n    this.state = FlowState.Stopped;\n  }\n  // Runs selective nodes within the >same order< in async\n  async runAll(graphNodes: GraphNode[]) {\n    await Promise.all(\n      graphNodes.map(\n        graphNode => new Promise<void>(resolve => {\n          graphNode.flowNode.run();\n          this.clearDirty(graphNode);\n          resolve();\n        })\n      )\n    );\n  }\n  setDirty(node: Node | GraphNode) {\n    let graphNode = node instanceof Node ? this.graphNodes.get(node.id) : node;\n    if (!graphNode) return;\n\n    this.dirtyNodes.set(graphNode.id, graphNode);\n  }\n  clearDirty(node: Node | GraphNode) {\n    let graphNode = node instanceof Node ? this.graphNodes.get(node.id) : node;\n    this.dirtyNodes.delete(graphNode.id);\n  }\n  // Returns all dirty nodes with lowest order\n  lowestDirty(graphNodes: GraphNode[]) {\n    let lowestOrder = Math.min(...graphNodes.map(graphNode => graphNode.order));\n    return graphNodes.filter(graphNode => graphNode.order === lowestOrder);\n  }\n  // Generic graph traversing function that can be used to do some stuff with nodes starting with provided root\n  propagate(root: Node | GraphNode, callback: (node: Node) => void) {\n    let start = root instanceof Node ? this.graphNodes.get(root.id) : root;\n    let queue = new List<GraphNode>();\n    queue.append(start);\n    while (queue.length !== 0) {\n      let currGNode = queue.removeFirst();\n      callback(currGNode.flowNode);\n      currGNode.childs.forEach(child => queue.append(child));\n    }\n  }\n  debugNode(node: GraphNode, indent: string) {\n    console.log(`${indent}[${node.flowNode.name}, ${node.order}]`);\n    node.childs.forEach(child => this.debugNode(child, indent + '  '));\n  }\n  debugGraph() {\n    this.nodes[0].forEach(graphNode => {\n      this.debugNode(graphNode, '');\n    });\n  }\n\n  serialize(): SerializedGraph {\n    let nodeToGraphNodeIds: Record<string, string> = {};\n    this.graphNodes.forEach((_graphNode, id) => nodeToGraphNodeIds[id] = this.graphNodes.get(id).id);\n\n    return {\n      nodes: this.nodes.map(groupedNodes => groupedNodes.map(graphNode => graphNode.serialize())),\n      nodeToGraphNode: nodeToGraphNodeIds\n    };\n  }\n  static deSerialize(flow: Flow, data: SerializedGraph): Graph {\n    let graph = new Graph();\n\n    let serializedGraphNodes: Record<string, SerializedGraphNode> = {};\n    let deSerializedGraphNodes: Record<string, GraphNode> = {};\n\n    data.nodes.forEach((serializedGroupedNodes, index) => {\n      graph.nodes[index] = serializedGroupedNodes.map(serializedGraphNode => {\n        let graphNode = GraphNode.deSerialize(flow.nodes.get(serializedGraphNode.nodeId), serializedGraphNode);\n        deSerializedGraphNodes[graphNode.id] = graphNode;\n        serializedGraphNodes[graphNode.id] = serializedGraphNode;\n        return graphNode;\n      });\n    });\n\n    Object.keys(deSerializedGraphNodes).forEach(key => {\n      deSerializedGraphNodes[key].childs = serializedGraphNodes[key].childs.map(childId => deSerializedGraphNodes[childId]);\n    });\n    Object.keys(data.nodeToGraphNode).forEach(nodeId => {\n      graph.graphNodes.set(nodeId, deSerializedGraphNodes[data.nodeToGraphNode[nodeId]]);\n    })\n\n    return graph;\n  }\n}\nexport interface SerializedGraph {\n  nodes: SerializedGraphNode[][],\n  nodeToGraphNode: Record<string, string>\n}\n\nexport class GraphNode implements Serializable {\n  id: string;\n  childs: GraphNode[] = [];\n  order: number;\n\n  constructor(public flowNode: Node, order?: number, id?: string) {\n    this.order = order ? order : 0;\n    this.id = id ? id : getNewUUID();\n  }\n\n  serialize(): SerializedGraphNode {\n    return {\n      id: this.id,\n      nodeId: this.flowNode.id,\n      order: this.order,\n      childs: this.childs.map(child => child.id)\n    };\n  }\n  static deSerialize(node: Node, data: SerializedGraphNode): GraphNode {\n    return new GraphNode(node, data.order, data.id);\n  }\n}\nexport interface SerializedGraphNode {\n  id: string,\n  nodeId: string,\n  order: number,\n  childs: string[]\n}\n","import { SerializedVector, Vector } from \"./vector\";\nimport { get, getNewUUID, intersects } from \"../utils/utils\";\nimport { Color, SerializedColor } from \"./color\";\nimport { Flow } from './flow';\nimport { Hooks } from './hooks';\nimport { Node } from './node';\nimport { Renderable, RenderResolver, Serializable } from \"../common/interfaces\";\nimport { ViewPort } from \"../common/enums\";\n\nexport class Group extends Hooks implements Serializable, Renderable {\n  renderResolver: RenderResolver<Group, GroupRenderParams> = () => null;\n\n  nodes: Node[] = [];\n  get name(): string { return this._name; }\n  set name(name: string) {\n    if (!name || name.trim() === '') this._name = 'No Name';\n    else this._name = name;\n    this.computeTextMetrics();\n  }\n  get position(): Vector { return this._position; }\n  set position(position: Vector) {\n    this._position = position;\n    this.updateRenderState();\n    this.recomputeNodePositions();\n  }\n\n  nodeDeltas: Vector[] = [];\n\n  hitColor: Color;\n  private textWidth: number;\n  private textHeight: number;\n  private _name: string;\n  private renderState: ViewPort = ViewPort.INSIDE;\n  private _position: Vector;\n\n  width: number;\n  height: number\n  style: GroupStyle;\n  id: string;\n\n  constructor(\n    public flow: Flow,\n    position: Vector,\n    options: GroupOptions = DefaultGroupOptions()\n  ) {\n\n    super();\n\n    this.width = get(options.width, 0);\n    this.height = get(options.height, 0);\n    this.style = get(options.style, {});\n    this.id = get(options.id, getNewUUID());\n\n    this.hitColor = options.hitColor;\n    this.style = { ...DefaultGroupStyle(), ...options.style };\n    this.id = getNewUUID();\n    this._position = position;\n    if (!this.style.color || !this.style.borderColor) {\n      let colors = DefaultGroupColors.Random();\n      this.style.borderColor = colors[0];\n      this.style.color = colors[1];\n    }\n    this.name = options.name;\n    this.setHitColor(options.hitColor);\n    this.computeTextMetrics();\n\n    this.flow.on('transform', () => this.updateRenderState());\n  }\n\n  private setHitColor(hitColor: Color) {\n    if (!hitColor) {\n      hitColor = Color.Random();\n      while (this.flow.groupHitColors.get(hitColor.rgbaString)) hitColor = Color.Random();\n    }\n    this.hitColor = hitColor;\n    this.flow.groupHitColors.set(this.hitColor.rgbaString, this);\n  }\n  private computeTextMetrics() {\n    let context = this.flow.flowConnect.context;\n    context.font = this.style.fontSize + ' ' + this.style.font;\n    let metrics = context.measureText(this.name);\n    this.textWidth = metrics.width;\n    metrics = context.measureText('M');\n    context.font = null;\n    this.textHeight = metrics.actualBoundingBoxAscent + metrics.actualBoundingBoxDescent;\n\n    if (typeof this.textHeight === 'undefined') {\n      let d = document.createElement(\"span\");\n      d.textContent = \"M\";\n      d.style.font = this.style.fontSize + ' ' + this.style.font;\n      document.body.appendChild(d);\n      this.textHeight = d.offsetHeight;\n      document.body.removeChild(d);\n    }\n  }\n  private updateRenderState() {\n    let realPos = this.position.transform(this.flow.flowConnect.transform);\n    this.renderState = intersects(\n      0, 0,\n      this.flow.flowConnect.canvasDimensions.width, this.flow.flowConnect.canvasDimensions.height,\n      realPos.x, realPos.y,\n      realPos.x + this.width * this.flow.flowConnect.scale,\n      realPos.y + this.height * this.flow.flowConnect.scale\n    );\n  }\n  setContainedNodes() {\n    let groupRealPos = this.position.transform(this.flow.flowConnect.transform);\n\n    this.nodes = [...this.flow.nodes.values()]\n      .filter(node => !node.group && node.renderState.viewport === ViewPort.INSIDE)\n      .filter(node => {\n        let nodeRealPos = node.position.transform(this.flow.flowConnect.transform);\n\n        return intersects(groupRealPos.x, groupRealPos.y,\n          groupRealPos.x + this.width * this.flow.flowConnect.scale,\n          groupRealPos.y + this.height * this.flow.flowConnect.scale,\n          nodeRealPos.x, nodeRealPos.y,\n          nodeRealPos.x + node.width * this.flow.flowConnect.scale,\n          nodeRealPos.y + node.ui.height * this.flow.flowConnect.scale\n        ) === ViewPort.INSIDE;\n      });\n\n    this.nodes.forEach((node, index) => {\n      node.group = this;\n      this.nodeDeltas[index] = node.position.subtract(this.position);\n    });\n  }\n  private recomputeNodePositions() {\n    this.nodes.forEach((node, index) => {\n      node.position = this.position.add(this.nodeDeltas[index]);\n    });\n  }\n\n  render() {\n    if (this.renderState === ViewPort.OUTSIDE) return;\n\n    let context = this.flow.flowConnect.context;\n    context.save();\n    let flowRenderResolver = this.flow.renderResolver.group;\n    let flowConnectRenderResolver = this.flow.flowConnect.renderResolver.group;\n    ((this.renderResolver && this.renderResolver(this))\n      || (flowRenderResolver && flowRenderResolver(this))\n      || (flowConnectRenderResolver && flowConnectRenderResolver(this))\n      || this._render\n    )(context, this.getRenderParams(), this);\n    context.restore();\n\n    this.flow.flowConnect.offGroupContext.save();\n    this._offRender();\n    this.flow.flowConnect.offGroupContext.restore();\n\n    this.call('render', this);\n  }\n  private _render(context: CanvasRenderingContext2D, params: GroupRenderParams, group: Group) {\n    context.strokeStyle = group.style.borderColor;\n    context.lineWidth = 2;\n    context.fillStyle = group.style.color;\n    context.strokeRect(params.position.x, params.position.y, params.width, params.height);\n    context.fillRect(params.position.x, params.position.y, params.width, params.height);\n    context.fillStyle = group.style.titleColor;\n    context.textBaseline = 'bottom';\n    context.font = group.style.fontSize + ' ' + group.style.font;\n    context.fillText(group.name, params.position.x, params.position.y - 10);\n  }\n  private _offRender() {\n    this.flow.flowConnect.offGroupContext.fillStyle = this.hitColor.rgbaCSSString;\n    this.flow.flowConnect.offGroupContext.fillRect(this.position.x, this.position.y, this.width, this.height);\n    this.flow.flowConnect.offGroupContext.fillRect(this.position.x, this.position.y - this.textHeight - 10, this.textWidth, this.textHeight + 10);\n  }\n  private getRenderParams(): GroupRenderParams {\n    return {\n      position: this.position.serialize(),\n      width: this.width,\n      height: this.height\n    };\n  }\n\n  onClick(screenPosition: Vector, realPosition: Vector) {\n    this.call('click', this, screenPosition, realPosition);\n\n    let thisRealPosition = this.position.transform(this.flow.flowConnect.transform);\n    if (screenPosition.y < thisRealPosition.y) {\n      this.flow.flowConnect.showGenericInput(thisRealPosition.subtract(0, (10 + this.textHeight) * this.flow.flowConnect.scale), this.name, {\n        width: Math.max(this.textWidth, 50) * this.flow.flowConnect.scale + 'px',\n        height: this.textHeight * this.flow.flowConnect.scale + 'px',\n        fontSize: parseInt(this.style.fontSize.replace('px', '')) * this.flow.flowConnect.scale + 'px',\n        fontFamily: this.style.font\n      }, {\n        type: 'text'\n      }, (value) => {\n        this.name = value;\n      });\n    }\n  }\n\n  serialize(): SerializedGroup {\n    return {\n      id: this.id,\n      hitColor: this.hitColor.serialize(),\n      position: this.position.serialize(),\n      name: this.name,\n      width: this.width,\n      height: this.height,\n      style: this.style,\n      nodes: this.nodes.map(node => node.id),\n      nodeDeltas: this.nodeDeltas.map(nodeDelata => nodeDelata.serialize())\n    };\n  }\n  static deSerialize(flow: Flow, data: SerializedGroup): Group {\n    let group = new Group(flow, Vector.deSerialize(data.position), {\n      width: data.width,\n      height: data.height,\n      name: data.name,\n      style: data.style,\n      id: data.id,\n      hitColor: Color.deSerialize(data.hitColor)\n    });\n\n    data.nodes.forEach(nodeId => {\n      group.nodes.push(flow.nodes.get(nodeId));\n    });\n    data.nodeDeltas.forEach(serializedVector => {\n      group.nodeDeltas.push(Vector.deSerialize(serializedVector));\n    });\n\n    return group;\n  }\n}\n\nexport interface SerializedGroup {\n  position: SerializedVector,\n  width: number,\n  height: number,\n  name: string,\n  style: GroupStyle,\n  id: string,\n  hitColor: SerializedColor,\n  nodes: string[],\n  nodeDeltas: SerializedVector[]\n}\n\nlet DefaultGroupColors = {\n  colors: [\n    ['rgba(239, 134, 119, 1)', 'rgba(239, 134, 119, .5)'],\n    ['rgba(160, 231, 125, 1)', 'rgba(160, 231, 125, .5)'],\n    ['rgba(130, 182, 217, 1)', 'rgba(130, 182, 217, .5)']\n  ],\n  RED: () => DefaultGroupColors.colors[0],\n  GREEN: () => DefaultGroupColors.colors[1],\n  BLUE: () => DefaultGroupColors.colors[2],\n  Random: () => DefaultGroupColors.colors[Math.floor(Math.random() * DefaultGroupColors.colors.length)]\n};\n\nexport interface GroupStyle {\n  color?: string;\n  borderColor?: string;\n  titleColor?: string;\n  fontSize?: string;\n  font?: string;\n}\nlet DefaultGroupStyle = () => {\n  return {\n    titleColor: '#000',\n    fontSize: '16px',\n    font: 'arial'\n  };\n}\n\nexport interface GroupOptions {\n  width?: number,\n  height?: number,\n  name?: string,\n  style?: GroupStyle,\n  id?: string,\n  hitColor?: Color\n}\n\nlet DefaultGroupOptions = (): GroupOptions => {\n  return {\n    width: 0,\n    height: 0,\n    style: {},\n    id: getNewUUID()\n  }\n}\n\nexport interface GroupRenderParams {\n  position: SerializedVector,\n  width: number,\n  height: number\n}\n","/** \n * Hooks is a general purpose class used by FlowConnect, Flow, Node, UINode, Terminal, Group... classes\n * for making their normal processes available as events to listen to when they happen.\n * For e.g you can listen to any Terminal's 'connect'/'disconnect' event to do some custom stuff\n */\nexport class Hooks {\n  registeredEvents: Record<string, Record<number, (...args: any) => void>>;\n  lastId: number;\n\n  constructor() {\n    this.registeredEvents = {};\n    this.lastId = 0;\n  }\n\n  /** \n   * Register a callback to an event\n   * \n   * @param eventKey name of the event to listen to\n   * @param callback reference to a callback that will be triggered when this event happens\n   * @returns a numbered ID that can be used later to de-register this hook\n   */\n  on(eventKey: string, callback: (...args: any) => void): number {\n    if (!this.registeredEvents[eventKey]) this.registeredEvents[eventKey] = {};\n\n    let id = this.lastId;\n    this.registeredEvents[eventKey][id] = callback;\n    this.lastId += 1;\n    return id;\n  }\n  call(eventKey: string, ...args: any) {\n    if (this.registeredEvents[eventKey]) {\n      if (!args) args = [];\n      Object.values(this.registeredEvents[eventKey]).forEach(callback => callback(...args));\n    }\n  }\n  /** \n   * De-register a callback to an event\n   * \n   * @param eventKey name of the event to de-register\n   * @param id a numbered id that was generated at the time of event registration\n   */\n  off(eventKey: string, id: number) {\n    if (this.registeredEvents[eventKey]) delete this.registeredEvents[eventKey][id];\n  }\n  offAll() {\n    this.registeredEvents = {};\n  }\n}\n","export * from './color';\nexport * from './connector';\nexport * from './flow';\nexport * from './graph';\nexport * from './group';\nexport * from './hooks';\nexport * from './node';\nexport * from './subflow-node';\nexport * from './terminal';\nexport * from './tunnel-node';\nexport * from './vector';\n","import { SerializedVector, Vector } from \"./vector\";\nimport { ViewPort, LOD, Align } from '../common/enums';\nimport {\n  VSlider, VSliderStyle, Slider2D, Slider2DStyle, RadioGroup, RadioGroupStyle, Envelope, EnvelopeStyle,\n  Dial, DialStyle, Container, ContainerRenderParams, SerializedContainer, Label, LabelStyle,\n  Button, ButtonStyle, Image, ImageStyle, HorizontalLayout, HorizontalLayoutStyle, Toggle, ToggleStyle,\n  Select, SelectStyle, Source, SourceStyle, Display, DisplayStyle, CustomRendererConfig, Input, InputStyle,\n  Stack, StackStyle, Slider, SliderStyle, UINode\n} from \"../ui/index\";\nimport { get, getNewUUID, intersects } from \"../utils/utils\";\nimport { Color, SerializedColor } from \"./color\";\nimport { Flow, FlowState, SerializedFlow } from './flow';\nimport { Group } from './group';\nimport { Terminal, TerminalType, TerminalStyle, SerializedTerminal, TerminalRenderParams } from './terminal';\nimport { Hooks } from './hooks';\nimport { Events, Renderable, RenderFunction, RenderResolver, RenderState, Serializable } from \"../common/interfaces\";\nimport { Connector } from \"./connector\";\nimport { Log } from \"../utils/logger\";\n\nexport class Node extends Hooks implements Events, Serializable, Renderable {\n  //#region Properties\n  renderResolver: {\n    node?: RenderResolver<Node, NodeRenderParams>,\n    nodeButton?: RenderResolver<NodeButton, NodeButtonRenderParams>,\n    terminal?: RenderResolver<Terminal, TerminalRenderParams>,\n    uiContainer?: RenderResolver<Container, ContainerRenderParams>,\n  } = {};\n  hitColor: Color;\n  private _width: number;\n\n  uiNodes: Map<string, UINode>;\n  terminals: Map<string, Terminal>;\n  nodeButtons: Map<string, NodeButton>;\n  private _zIndex: number;\n  private _position: Vector;\n  private stateObserver = new Hooks();\n\n  renderState: RenderState = { viewport: ViewPort.INSIDE, nodeState: NodeState.MAXIMIZED, lod: LOD.LOD2 };\n\n  currHitTerminal: Terminal;\n  prevHitTerminal: Terminal;\n  currHitUINode: UINode;\n  prevHitUINode: UINode;\n\n  focused: boolean = false;\n  inputs: Terminal[] = [];\n  outputs: Terminal[] = [];\n  inputsUI: Terminal[] = [];\n  outputsUI: Terminal[] = [];\n  ui: Container;\n  state: Record<string, any>;\n  group: Group = null;\n  //#endregion\n\n  //#region Accessors\n  get height(): number { return this.ui.height }\n  get context(): CanvasRenderingContext2D { return this.flow.flowConnect.context }\n  get offContext(): OffscreenCanvasRenderingContext2D | CanvasRenderingContext2D { return this.flow.flowConnect.offContext }\n  get offUIContext(): OffscreenCanvasRenderingContext2D | CanvasRenderingContext2D { return this.flow.flowConnect.offUIContext }\n  get position(): Vector { return this._position }\n  set position(position: Vector) {\n    this._position = position;\n    this.reflow();\n    this.ui.update();\n    this.updateRenderState();\n  }\n  get zIndex(): number { return this._zIndex }\n  set zIndex(zIndex: number) {\n    if (this.flow.sortedNodes.remove(this)) {\n      this._zIndex = zIndex;\n      this.flow.sortedNodes.add(this);\n    } else {\n      this._zIndex = zIndex;\n    }\n  }\n  get width(): number { return this._width }\n  set width(width: number) {\n    this._width = width;\n    this.ui.width = width;\n    this.ui.update();\n  }\n  //#endregion\n\n  style: NodeStyle;\n  terminalStyle: TerminalStyle;\n  id: string;\n\n  constructor(\n    public flow: Flow,\n    public name: string,\n    position: Vector,\n    width: number,\n    inputs: SerializedTerminal[], outputs: SerializedTerminal[],\n    options: NodeConstructorOptions = DefaultNodeConstructorOptions()\n  ) {\n\n    super();\n\n    this.style = get(options.style, {});\n    this.terminalStyle = get(options.terminalStyle, {});\n    this.id = get(options.id, getNewUUID());\n    options.state = get(options.state, {});\n\n    this.hitColor = options.hitColor;\n    this._width = width;\n    this.style = { ...DefaultNodeStyle(), ...options.style }\n    this._position = position;\n    this.setupState(options.state);\n    this.uiNodes = new Map();\n    this.terminals = new Map();\n    this.nodeButtons = new Map();\n    this._zIndex = 0;\n    this.setHitColor(options.hitColor);\n\n    this.setupTerminals(options, inputs, outputs);\n\n    if (options.ui) {\n      this.ui = options.ui instanceof Container ? options.ui : Container.deSerialize(this, options.ui)\n    } else {\n      this.ui = new Container(this, width);\n    }\n\n    this.addNodeButton(() => this.toggleNodeState(), this._renderNodeButton, Align.Left);\n\n    this.reflow();\n    this.ui.update();\n\n    this.flow.on('transform', () => this.updateRenderState());\n\n    this.flow.nodes.set(this.id, this);\n    this.flow.sortedNodes.add(this);\n    this.flow.executionGraph.add(this);\n  }\n\n  //#region Methods\n  setupTerminals(options: NodeConstructorOptions, inputs: SerializedTerminal[], outputs: SerializedTerminal[]) {\n    this.inputs.push(...inputs.map(input =>\n      new Terminal(this, TerminalType.IN, input.dataType, input.name, {\n        style: input.style ? input.style : { ...options.terminalStyle },\n        id: input.id ? input.id : null,\n        hitColor: input.hitColor ? Color.deSerialize(input.hitColor) : null\n      })\n    ));\n    this.outputs.push(...outputs.map(output =>\n      new Terminal(this, TerminalType.OUT, output.dataType, output.name, {\n        style: output.style ? output.style : { ...options.terminalStyle },\n        id: output.id ? output.id : null,\n        hitColor: output.hitColor ? Color.deSerialize(output.hitColor) : null\n      })\n    ));\n  }\n  private setupState(state: any) {\n    this.state = new Proxy<any>({}, {\n      set: (target, prop, value) => {\n        let oldValue = target[prop];\n        target[prop] = value;\n        this.stateObserver.call(prop as string, oldValue, value);\n        return true;\n      }\n    });\n\n    Object.keys(state).forEach(key => this.state[key] = state[key]);\n  }\n  watch(propName: string, callback: (oldVal: any, newVal: any) => void): number {\n    if (typeof this.state[propName] !== 'undefined') {\n      return this.stateObserver.on(propName, callback);\n    } else {\n      Log.error(`Cannot watch prop '${propName}', prop not found`);\n    }\n  }\n  unwatch(propName: string, id: number) {\n    if (typeof this.state[propName] !== 'undefined') {\n      this.stateObserver.off(propName, id);\n    } else {\n      Log.error(`Cannot unwatch prop '${propName}', prop not found`);\n    }\n  }\n  private setHitColor(hitColor: Color) {\n    if (!hitColor) {\n      hitColor = Color.Random();\n      while (this.flow.nodeHitColors.get(hitColor.rgbaString)) hitColor = Color.Random();\n    }\n    this.hitColor = hitColor;\n    this.flow.nodeHitColors.set(this.hitColor.rgbaString, this);\n  }\n  addNodeButton(callback: () => void, render: RenderFunction<NodeButton, NodeButtonRenderParams>, align: Align): NodeButton {\n    let newNodeButton = new NodeButton(this, callback, render, align);\n\n    let noOfButtons = [...this.nodeButtons.values()].filter(nodeButton => nodeButton.align === newNodeButton.align).length - 1;\n    let deltaX;\n    if (align === Align.Left) deltaX = noOfButtons * (this.style.nodeButtonSize + this.style.nodeButtonSpacing);\n    else deltaX = this.width - noOfButtons * (this.style.nodeButtonSize + this.style.nodeButtonSpacing) - this.style.nodeButtonSize;\n    newNodeButton.deltaX = deltaX;\n\n    return newNodeButton;\n  }\n  private reflow(): void {\n    let y = this.position.y + this.style.terminalRowHeight / 2 + this.style.padding / 2 + this.style.titleHeight;\n    if (this.inputs.length > this.outputs.length) {\n      this.recalculateInputTerminals(y);\n      y = this.position.y + (this.inputs.length * this.style.terminalRowHeight) / 2 - (this.outputs.length * this.style.terminalRowHeight) / 2 + this.style.terminalRowHeight / 2 + this.style.padding / 2 + this.style.titleHeight;\n      this.recalculateOutputTerminals(y);\n    } else {\n      this.recalculateOutputTerminals(y);\n      y = this.position.y + (this.outputs.length * this.style.terminalRowHeight) / 2 - (this.inputs.length * this.style.terminalRowHeight) / 2 + this.style.terminalRowHeight / 2 + this.style.padding / 2 + this.style.titleHeight;\n      this.recalculateInputTerminals(y);\n    }\n  }\n  private updateRenderState() {\n    let realPos = this.position.transform(this.flow.flowConnect.transform);\n    this.renderState.viewport = intersects(\n      0, 0,\n      this.flow.flowConnect.canvasDimensions.width, this.flow.flowConnect.canvasDimensions.height,\n      realPos.x, realPos.y,\n      realPos.x + this.width * this.flow.flowConnect.scale,\n      realPos.y + (this.renderState.nodeState === NodeState.MAXIMIZED ? this.ui.height : this.style.titleHeight) * this.flow.flowConnect.scale\n    );\n\n    if (this.flow.flowConnect.scale > 0.6) this.renderState.lod = LOD.LOD2;\n    else if (this.flow.flowConnect.scale <= 0.6 && this.flow.flowConnect.scale > .3) this.renderState.lod = LOD.LOD1;\n    else this.renderState.lod = LOD.LOD0;\n\n    if (this.renderState.viewport === ViewPort.INTERSECT) {\n      this.ui.updateRenderState();\n    }\n  }\n  private recalculateInputTerminals(y: number) {\n    this.inputs.forEach(terminal => {\n      terminal.position.x = this.position.x - this.style.terminalStripMargin - terminal.style.radius;\n      terminal.position.y = y;\n      y += this.style.terminalRowHeight;\n    });\n  }\n  private recalculateOutputTerminals(y: number) {\n    this.outputs.forEach(terminal => {\n      terminal.position.x = this.position.x + this.ui.width + this.style.terminalStripMargin + terminal.style.radius;\n      terminal.position.y = y;\n      y += this.style.terminalRowHeight;\n    });\n  }\n  getHitTerminal(hitColor: string, screenPosition: Vector, realPosition: Vector) {\n    let hitTerminal = null;\n\n    realPosition = realPosition.transform(this.flow.flowConnect.transform);\n    let thisRealPosition = this.position.transform(this.flow.flowConnect.transform);\n    if (\n      (this.inputs.length + this.inputsUI.length > 0 && realPosition.x < thisRealPosition.x) ||\n      (this.outputs.length + this.outputsUI.length > 0 && realPosition.x > thisRealPosition.x + this.ui.width * this.flow.flowConnect.scale)\n    ) {\n      hitTerminal = this.terminals.get(hitColor);\n    }\n\n    if (this.currHitTerminal && this.currHitTerminal !== hitTerminal) {\n      this.currHitTerminal.onExit(screenPosition, realPosition);\n      hitTerminal && hitTerminal.onEnter(screenPosition, realPosition);\n    }\n\n    return hitTerminal;\n  }\n  getHitUINode(hitColor: string): UINode {\n    let uiNode = this.uiNodes.get(hitColor);\n    if (uiNode instanceof Container) return null;\n    return uiNode;\n  }\n  private getHitNodeButton(hitColor: string): NodeButton {\n    return this.nodeButtons.get(hitColor);\n  }\n  run() {\n    if (this.flow.state === FlowState.Stopped) return;\n\n    this.call('process', this, this.inputs.map(terminal => terminal.connectors.length > 0 ? terminal.connectors[0].data : null));\n  }\n\n  render(): void {\n    if (this.renderState.viewport === ViewPort.OUTSIDE) return;\n    if (this.renderState.nodeState === NodeState.MAXIMIZED) this.ui.render();\n\n    let context = this.context;\n    context.save();\n    this.renderTerminals(context);\n    this.renderName(context);\n    this.renderFocused(context);\n    let flowRenderResolver = this.flow.renderResolver.node;\n    let flowConnectRenderResolver = this.flow.flowConnect.renderResolver.node;\n    ((this.renderResolver.node && this.renderResolver.node(this))\n      || (flowRenderResolver && flowRenderResolver(this))\n      || (flowConnectRenderResolver && flowConnectRenderResolver(this))\n      || this._render\n    )(context, this.getRenderParams(), this);\n    context.restore();\n\n    this.nodeButtons.forEach(nodeButton => nodeButton.render());\n\n    this.offContext.save();\n    this._offRender();\n    this.offContext.restore();\n\n    this.call('render', this);\n  }\n  private renderTerminals(context: CanvasRenderingContext2D) {\n    if (this.renderState.nodeState === NodeState.MAXIMIZED) {\n      if (this.renderState.lod > 0) {\n        this.inputs.forEach(terminal => terminal.render());\n        this.outputs.forEach(terminal => terminal.render());\n      }\n\n      context.fillStyle = this.style.color;\n      context.font = this.style.fontSize + ' ' + this.style.font;\n      context.textBaseline = 'middle';\n      this.inputs.forEach(terminal => {\n        context.fillText(terminal.name, terminal.position.x + terminal.style.radius + this.style.terminalStripMargin + this.style.padding, terminal.position.y);\n      });\n      this.outputs.forEach(terminal => {\n        context.fillText(terminal.name, terminal.position.x - terminal.style.radius - this.style.terminalStripMargin - this.style.padding - context.measureText(terminal.name).width, terminal.position.y);\n      });\n    } else {\n      context.fillStyle = this.style.minimizedTerminalColor;\n      if ((this.inputs.length + this.inputsUI.length) > 0) {\n        let radius = this.inputs.length > 0 ? this.inputs[0].style.radius : this.inputsUI[0].style.radius;\n        context.fillRect(this.position.x - this.style.terminalStripMargin - radius * 2, this.position.y + this.style.titleHeight / 2 - radius, radius * 2, radius * 2);\n      }\n      if ((this.outputs.length + this.outputsUI.length) > 0) {\n        let radius = this.outputs.length > 0 ? this.outputs[0].style.radius : this.outputsUI[0].style.radius;\n        context.fillRect(this.position.x + this.width + this.style.terminalStripMargin, this.position.y + this.style.titleHeight / 2 - radius, radius * 2, radius * 2);\n      }\n    }\n  }\n  private renderName(context: CanvasRenderingContext2D) {\n    context.fillStyle = this.style.titleColor;\n    context.font = this.style.titleFontSize + ' ' + this.style.titleFont;\n    context.textBaseline = 'middle';\n    context.fillText(this.name, this.position.x + this.ui.width / 2 - context.measureText(this.name).width / 2, this.position.y + this.style.titleHeight / 2);\n  }\n  private renderFocused(context: CanvasRenderingContext2D) {\n    if (this.focused) {\n      context.strokeStyle = this.style.outlineColor;\n      context.lineWidth = 2;\n\n      let inputTerminalsWidth;\n      if (this.inputs.length === 0) {\n        inputTerminalsWidth = this.inputsUI.length === 0 ? 0 : this.inputsUI[0].style.radius * 2;\n      } else {\n        inputTerminalsWidth = this.inputs[0].style.radius * 2;\n      }\n      inputTerminalsWidth += this.style.terminalStripMargin * 2;\n\n      let outputTerminalsWidth;\n      if (this.outputs.length === 0) {\n        outputTerminalsWidth = this.outputsUI.length === 0 ? 0 : this.outputsUI[0].style.radius * 2;\n      } else {\n        outputTerminalsWidth = this.outputs[0].style.radius * 2;\n      }\n      outputTerminalsWidth += this.style.terminalStripMargin * 2;\n\n      context.strokeRoundRect(\n        this.position.x - inputTerminalsWidth,\n        this.position.y,\n        this.width + inputTerminalsWidth + outputTerminalsWidth,\n        this.renderState.nodeState === NodeState.MAXIMIZED ? (this.ui.height + this.style.padding) : this.style.titleHeight,\n        4\n      );\n    }\n  }\n  private _render() { /**/ }\n  private _offRender() {\n    this.offContext.fillStyle = this.hitColor.rgbaCSSString;\n    let x = this.position.x;\n    let y = this.position.y;\n    let inputTerminalsStripWidth = 0, outputTerminalsStripWidth = 0;\n    if ((this.inputs.length + this.inputsUI.length) !== 0) {\n      let radius = this.inputs.length > 0 ? this.inputs[0].style.radius : this.inputsUI[0].style.radius;\n      x -= this.style.terminalStripMargin + radius * 2;\n      inputTerminalsStripWidth = radius * 2 + this.style.terminalStripMargin;\n    }\n    if ((this.outputs.length + this.outputsUI.length) !== 0) {\n      let radius = this.outputs.length > 0 ? this.outputs[0].style.radius : this.outputsUI[0].style.radius;\n      outputTerminalsStripWidth = radius * 2 + this.style.terminalStripMargin;\n    }\n    this.offContext.fillRect(x, y,\n      this.ui.width + inputTerminalsStripWidth + outputTerminalsStripWidth,\n      this.renderState.nodeState === NodeState.MAXIMIZED ? this.ui.height : this.style.titleHeight\n    );\n  }\n  private _renderNodeButton(context: CanvasRenderingContext2D, params: NodeButtonRenderParams, nodeButton: NodeButton) {\n    let style = nodeButton.node.style;\n    context.fillStyle = style.maximizeButtonColor;\n    context.fillRect(params.position.x, params.position.y, style.nodeButtonSize, style.nodeButtonSize);\n  }\n  private getRenderParams(): NodeRenderParams {\n    return {\n      position: this.position.serialize(),\n      width: this.width,\n      height: this.ui.height,\n      focus: this.focused\n    }\n  }\n  addTerminal(terminal: Terminal | SerializedTerminal) {\n    if (!(terminal instanceof Terminal)) {\n      terminal = Terminal.deSerialize(this, terminal);\n    }\n    if (terminal.type === TerminalType.IN) this.inputs.push(terminal);\n    else this.outputs.push(terminal);\n    this.ui.update();\n    this.reflow();\n  }\n  removeTerminal(terminal: Terminal) {\n    let type = terminal.type;\n    let index = type === TerminalType.IN ? this.inputs.indexOf(terminal) : this.outputs.indexOf(terminal);\n    if (index < 0) {\n      Log.error('Cannot remove terminal, terminal not found');\n      return;\n    }\n    terminal.disconnect();\n    if (type === TerminalType.IN) this.inputs.splice(index, 1);\n    else this.outputs.splice(index, 1);\n    terminal.offAll();\n\n    this.ui.update();\n    this.reflow();\n  }\n  getInput(terminal: string | number): any {\n    if (typeof terminal === 'string') {\n      let inputTerminal = this.inputs.find(currTerm => (currTerm.name === terminal));\n      if (inputTerminal) return inputTerminal.getData();\n    } else {\n      if (this.inputs[terminal]) return this.inputs[terminal].getData();\n    }\n    return null;\n  }\n  getInputs(): any[] {\n    return this.inputs.map(terminal => terminal.getData());\n  }\n  setOutputs(outputs: string | number | Record<string, any>, data?: any) {\n    if (typeof outputs === 'string') {\n      let outputTerminal = this.outputs.find(term => (term.name === outputs));\n      if (outputTerminal) outputTerminal.setData(data);\n    } else if (typeof outputs === 'number') {\n      if (this.outputs[outputs]) this.outputs[outputs].setData(data);\n    } else {\n      let outputData = new Map<Terminal, any>();\n      Object.entries(outputs).forEach(entry => {\n        let terminal = this.outputs.find(term => term.name === entry[0]);\n        if (terminal) outputData.set(terminal, entry[1]);\n        else throw Log.error(\"Terminal '\" + entry[0] + \"' not found\");\n      });\n      let groupedConnectors = new Map<Node, Connector[]>();\n      let outputDataIterator = outputData.keys();\n\n      let curr: Terminal = outputDataIterator.next().value;\n      while (curr) {\n        curr.connectors.forEach(connector => {\n          if (groupedConnectors.has(connector.endNode)) groupedConnectors.get(connector.endNode).push(connector);\n          else groupedConnectors.set(connector.endNode, [connector]);\n        });\n        curr = outputDataIterator.next().value;\n      }\n      let gCntrsIterator = groupedConnectors.values();\n\n      let connectors: Connector[] = gCntrsIterator.next().value;\n      while (connectors) {\n        for (let i = 1; i < connectors.length; i++) connectors[i].setData(outputData.get(connectors[i].start));\n        connectors[0].data = outputData.get(connectors[0].start);\n        connectors = gCntrsIterator.next().value;\n      }\n    }\n\n    // If FlowState is Idle, start a partial run of all the dirty nodes this method has created\n    if (this.flow.state === FlowState.Idle) {\n      this.flow.executionGraph.start();\n    }\n  }\n  toggleNodeState() {\n    this.renderState.nodeState = this.renderState.nodeState === NodeState.MAXIMIZED ? NodeState.MINIMIZED : NodeState.MAXIMIZED;\n  }\n  dispose(): void {\n    this.flow.removeNode(this.id);\n  }\n  //#endregion\n\n  //#region Events\n  onDown(screenPosition: Vector, realPosition: Vector): void {\n    this.call('down', this, screenPosition, realPosition);\n\n    let hitColor = Color.rgbaToString(this.flow.flowConnect.offUIContext.getImageData(screenPosition.x, screenPosition.y, 1, 1).data);\n\n    this.currHitUINode = this.getHitUINode(hitColor);\n    this.currHitUINode && this.currHitUINode.onDown(screenPosition, realPosition);\n\n    let hitTerminal = this.getHitTerminal(hitColor, screenPosition, realPosition);\n    if (hitTerminal) {\n      this.currHitTerminal = hitTerminal;\n      this.currHitTerminal.onDown(screenPosition, realPosition);\n    }\n  }\n  onOver(screenPosition: Vector, realPosition: Vector): void {\n    this.call('over', this, screenPosition, realPosition);\n\n    let hitColor = Color.rgbaToString(this.flow.flowConnect.offUIContext.getImageData(screenPosition.x, screenPosition.y, 1, 1).data);\n\n    let hitTerminal = this.getHitTerminal(hitColor, screenPosition, realPosition);\n\n    if (hitTerminal !== this.prevHitTerminal) {\n      this.prevHitTerminal && this.prevHitTerminal.onExit(screenPosition, realPosition);\n      hitTerminal && hitTerminal.onEnter(screenPosition, realPosition);\n    } else {\n      hitTerminal && (!this.currHitTerminal) && hitTerminal.onOver(screenPosition, realPosition);\n    }\n    this.prevHitTerminal = hitTerminal;\n\n    let hitUINode = this.getHitUINode(hitColor);\n    if (hitUINode !== this.prevHitUINode) {\n      this.prevHitUINode && this.prevHitUINode.onExit(screenPosition, realPosition);\n      hitUINode && hitUINode.onEnter(screenPosition, realPosition);\n    } else {\n      hitUINode && (!this.currHitUINode) && hitUINode.onOver(screenPosition, realPosition);\n    }\n    this.prevHitUINode = hitUINode;\n  }\n  onEnter(screenPosition: Vector, realPosition: Vector): void {\n    this.call('enter', this, screenPosition, realPosition);\n  }\n  onExit(screenPosition: Vector, realPosition: Vector): void {\n    this.call('exit', this, screenPosition, realPosition);\n\n    let hitColor = Color.rgbaToString(this.flow.flowConnect.offUIContext.getImageData(screenPosition.x, screenPosition.y, 1, 1).data);\n\n    let hitTerminal = this.getHitTerminal(hitColor, screenPosition, realPosition);\n    hitTerminal && hitTerminal.onExit(screenPosition, realPosition);\n    this.prevHitTerminal && this.prevHitTerminal.onExit(screenPosition, realPosition);\n    this.prevHitTerminal = null;\n    this.currHitTerminal && this.currHitTerminal.onExit(screenPosition, realPosition);\n  }\n  onUp(screenPosition: Vector, realPosition: Vector): void {\n    this.call('up', this, screenPosition, realPosition);\n\n    let hitColor = Color.rgbaToString(this.flow.flowConnect.offUIContext.getImageData(screenPosition.x, screenPosition.y, 1, 1).data);\n\n    this.currHitUINode = null;\n    let hitUINode = this.getHitUINode(hitColor);\n    hitUINode && hitUINode.onUp(screenPosition.clone(), realPosition.clone());\n\n    let hitTerminal = this.getHitTerminal(hitColor, screenPosition, realPosition);\n    hitTerminal && hitTerminal.onUp(screenPosition, realPosition);\n  }\n  onClick(screenPosition: Vector, realPosition: Vector): void {\n    this.call('click', this, screenPosition, realPosition);\n\n    let hitColor = Color.rgbaToString(this.flow.flowConnect.offUIContext.getImageData(screenPosition.x, screenPosition.y, 1, 1).data);\n    if (realPosition.y < this.position.y + this.style.titleHeight * this.flow.flowConnect.scale) {\n      let hitNodeButton = this.getHitNodeButton(hitColor);\n      hitNodeButton && hitNodeButton.callback();\n    } else {\n      this.currHitTerminal && this.currHitTerminal.onClick(screenPosition, realPosition);\n\n      let hitUINode = this.getHitUINode(hitColor);\n      hitUINode && hitUINode.onClick(screenPosition.clone(), realPosition.clone());\n    }\n  }\n  onDrag(screenPosition: Vector, realPosition: Vector): void {\n    this.call('drag', this, screenPosition, realPosition);\n\n    let hitColor = Color.rgbaToString(this.flow.flowConnect.offUIContext.getImageData(screenPosition.x, screenPosition.y, 1, 1).data);\n    let hitUINodeWhileDragging = this.getHitUINode(hitColor);\n\n    if (this.currHitUINode && this.currHitUINode.draggable) {\n      if (hitUINodeWhileDragging === this.currHitUINode) {\n        this.currHitUINode.onDrag(screenPosition, realPosition);\n      } else {\n        this.currHitUINode.onExit(screenPosition, realPosition);\n        this.currHitUINode = null;\n        this.flow.flowConnect.currHitNode = null;\n        this.flow.flowConnect.pointers = [];\n      }\n    }\n  }\n  onContextMenu(): void {\n    this.call('rightclick', this);\n  }\n  onWheel(direction: boolean, screenPosition: Vector, realPosition: Vector): void {\n    this.call('wheel', this, direction, screenPosition, realPosition);\n\n    let hitColor = Color.rgbaToString(this.flow.flowConnect.offUIContext.getImageData(screenPosition.x, screenPosition.y, 1, 1).data);\n    let hitUINode = this.getHitUINode(hitColor);\n\n    hitUINode && hitUINode.zoomable && hitUINode.onWheel(direction, screenPosition, realPosition);\n  }\n  //#endregion\n\n  //#region UICreators\n  createLabel(text: string | number, options?: LabelCreatorOptions): Label {\n    return new Label(this, text, options);\n  }\n  createImage(source: string, options?: ImageCreatorOptions): Image {\n    return new Image(this, source, options);\n  }\n  createSlider(min: number, max: number, options?: SliderCreatorOptions) {\n    return new Slider(this, min, max, options);\n  }\n  createSlider2D(options?: Slider2DCreatorOptions) {\n    return new Slider2D(this, options);\n  }\n  createVSlider(min: number, max: number, options?: VSliderCreatorOptions) {\n    return new VSlider(this, min, max, options);\n  }\n  createDial(min: number, max: number, size: number, options?: DialCreatorOptions) {\n    return new Dial(this, min, max, size, options);\n  }\n  createHozLayout(childs: UINode[] = [], options?: HorizontalLayoutCreatorOptions) {\n    return new HorizontalLayout(this, childs, options);\n  }\n  createStack(options?: StackCreatorOptions) {\n    return new Stack(this, options);\n  }\n  createButton(text: string, options?: ButtonCreatorOptions) {\n    return new Button(this, text, options);\n  }\n  createToggle(options?: ToggleCreatorOptions) {\n    return new Toggle(this, options);\n  }\n  createRadioGroup(values?: string[], selected?: string, options?: RadioGroupCreatorOptions) {\n    return new RadioGroup(this, values, selected, options);\n  }\n  createSelect(values: string[], options?: SelectCreatorOptions) {\n    return new Select(this, values, options);\n  }\n  createSource(options?: SourceCreatorOptions) {\n    return new Source(this, options);\n  }\n  createDisplay(height: number, renderers: CustomRendererConfig[], options?: DisplayCreatorOptions) {\n    return new Display(this, height, renderers, options);\n  }\n  createInput(options?: InputCreatorOptions) {\n    return new Input(this, options);\n  }\n  createEnvelope(height: number, values?: Vector[], options?: EnvelopeCreatorOptions): Envelope {\n    return new Envelope(this, height, values, options);\n  }\n  //#endregion\n\n  serialize(): SerializedNode {\n    return {\n      id: this.id,\n      name: this.name,\n      position: this.position.serialize(),\n      width: this.width,\n      state: this.state,\n      inputs: this.inputs.map(terminal => terminal.serialize()),\n      outputs: this.outputs.map(terminal => terminal.serialize()),\n      style: this.style,\n      terminalStyle: this.terminalStyle,\n      hitColor: this.hitColor.serialize(),\n      zIndex: this.zIndex,\n      focused: this.focused,\n      renderState: this.renderState,\n      ui: this.ui.serialize()\n    };\n  }\n  static deSerialize(flow: Flow, data: SerializedNode): Node {\n    return new Node(flow, data.name, Vector.deSerialize(data.position), data.width, data.inputs, data.outputs, {\n      style: data.style,\n      terminalStyle: data.terminalStyle,\n      state: data.state,\n      id: data.id,\n      hitColor: Color.deSerialize(data.hitColor),\n      ui: data.ui\n    });\n  }\n}\n\nexport interface NodeRenderParams {\n  position: SerializedVector,\n  width: number,\n  height: number,\n  focus: boolean\n}\nexport enum NodeState {\n  MAXIMIZED = 'Maximized',\n  MINIMIZED = 'Minimized'\n}\n\nexport interface NodeStyle {\n  font?: string,\n  fontSize?: string,\n  titleFont?: string,\n  titleFontSize?: string,\n  padding?: number,\n  spacing?: number,\n  rowHeight?: number,\n  color?: string,\n  titleColor?: string,\n  titleHeight?: number,\n  terminalRowHeight?: number,\n  terminalStripMargin?: number,\n  maximizeButtonColor?: string,\n  expandButtonColor?: string;\n  minimizedTerminalColor?: string,\n  nodeButtonSize?: number,\n  nodeButtonSpacing?: number,\n  outlineColor?: string\n}\nlet DefaultNodeStyle = () => {\n  return {\n    font: 'arial',\n    fontSize: '.75rem',\n    titleFont: 'arial',\n    titleFontSize: '.85rem',\n    color: '#000',\n    titleColor: '#000',\n    maximizeButtonColor: 'darkgrey',\n    nodeButtonSize: 10,\n    nodeButtonSpacing: 5,\n    expandButtonColor: '#000',\n    minimizedTerminalColor: 'green',\n    outlineColor: '#000',\n    padding: 10,\n    spacing: 10,\n    rowHeight: 20,\n    titleHeight: 29,\n    terminalRowHeight: 24,\n    terminalStripMargin: 8\n  };\n};\n\nexport interface SerializedNode {\n  hitColor: SerializedColor,\n  zIndex: number,\n  focused: boolean,\n  id: string,\n  position: SerializedVector,\n  state: Record<string, any>,\n  renderState: RenderState,\n  inputs: SerializedTerminal[],\n  outputs: SerializedTerminal[],\n  name: string,\n  style: NodeStyle,\n  terminalStyle: TerminalStyle,\n  ui: SerializedContainer,\n  width: number,\n  subFlow?: SerializedFlow\n}\n\nexport interface NodeConstructorOptions {\n  style?: NodeStyle,\n  terminalStyle?: TerminalStyle,\n  state?: Object,\n  id?: string,\n  hitColor?: Color,\n  ui?: Container | SerializedContainer\n}\nlet DefaultNodeConstructorOptions = (): NodeConstructorOptions => {\n  return {\n    style: {},\n    terminalStyle: {},\n    state: {},\n    id: getNewUUID(),\n  }\n}\n\ninterface ToggleCreatorOptions {\n  propName?: string,\n  input?: boolean,\n  output?: boolean,\n  height?: number,\n  style?: ToggleStyle\n}\ninterface StackCreatorOptions {\n  childs?: UINode[],\n  style?: StackStyle\n}\ninterface SourceCreatorOptions {\n  accept?: string,\n  propName?: string,\n  input?: boolean,\n  output?: boolean,\n  height?: number,\n  style?: SourceStyle\n}\ninterface SliderCreatorOptions {\n  value?: number,\n  propName?: string,\n  input?: boolean,\n  output?: boolean,\n  height?: number,\n  style?: SliderStyle\n}\ninterface VSliderCreatorOptions {\n  value?: number,\n  propName?: string,\n  input?: boolean,\n  output?: boolean,\n  height?: number,\n  width?: number,\n  style?: VSliderStyle\n}\ninterface Slider2DCreatorOptions {\n  value?: Vector,\n  propName?: string,\n  input?: boolean,\n  output?: boolean,\n  height?: number,\n  style?: Slider2DStyle\n}\ninterface SelectCreatorOptions {\n  height?: number,\n  propName?: string,\n  input?: boolean,\n  output?: boolean,\n  style?: SelectStyle\n}\ninterface RadioGroupCreatorOptions {\n  propName?: string,\n  input?: boolean,\n  output?: boolean,\n  height?: number,\n  style?: RadioGroupStyle\n}\ninterface LabelCreatorOptions {\n  propName?: string,\n  input?: boolean,\n  output?: boolean,\n  style?: LabelStyle,\n  height?: number\n}\ninterface InputCreatorOptions {\n  value?: string | number,\n  propName?: string,\n  input?: boolean,\n  output?: boolean,\n  height?: number,\n  style?: InputStyle\n}\ninterface ImageCreatorOptions {\n  propName?: string,\n  style?: ImageStyle\n}\ninterface HorizontalLayoutCreatorOptions {\n  style?: HorizontalLayoutStyle,\n  input?: boolean,\n  output?: boolean\n}\ninterface ButtonCreatorOptions {\n  input?: boolean,\n  output?: boolean,\n  height?: number,\n  style?: ButtonStyle\n}\ninterface DialCreatorOptions {\n  value?: number\n  propName?: string,\n  input?: boolean,\n  output?: boolean,\n  style?: DialStyle,\n}\ninterface DisplayCreatorOptions {\n  style?: DisplayStyle\n}\ninterface EnvelopeCreatorOptions {\n  input?: boolean,\n  output?: boolean,\n  style?: EnvelopeStyle\n}\n\nexport class NodeButton extends Hooks implements Renderable {\n  renderResolver: RenderResolver<NodeButton, NodeButtonRenderParams> = () => null;\n  defaultRenderFn: RenderFunction<NodeButton, NodeButtonRenderParams>;\n  style: Record<string, any> = {};\n\n  hitColor: Color;\n  deltaX: number = 0;\n\n  constructor(\n    public node: Node,\n    public callback: () => void,\n    render: RenderFunction<NodeButton, NodeButtonRenderParams>,\n    public align: Align,\n    style?: Record<string, any>\n  ) {\n    super();\n\n    this.style = get(style, {});\n    this.setHitColor();\n    this.defaultRenderFn = render;\n  }\n\n  private setHitColor() {\n    let color = Color.Random();\n    while (this.node.nodeButtons.get(color.rgbaString)) color = Color.Random();\n    this.hitColor = color;\n    this.node.nodeButtons.set(this.hitColor.rgbaString, this);\n  }\n  render() {\n    this.node.context.save();\n    let nodeRenderResolver = this.node.renderResolver.nodeButton;\n    let flowRenderResolver = this.node.flow.renderResolver.nodeButton;\n    let flowConnectRenderResolver = this.node.flow.flowConnect.renderResolver.nodeButton;\n    ((this.renderResolver && this.renderResolver(this))\n      || (nodeRenderResolver && nodeRenderResolver(this))\n      || (flowRenderResolver && flowRenderResolver(this))\n      || (flowConnectRenderResolver && flowConnectRenderResolver(this))\n      || this.defaultRenderFn\n    )(this.node.context, this.getRenderParams(), this);\n    this.node.context.restore();\n\n    this.node.offUIContext.save();\n    this._offUIRender();\n    this.node.offUIContext.restore();\n\n    this.call('render', this);\n  }\n  private getRenderParams(): NodeButtonRenderParams {\n    let position = this.node.position.serialize();\n    position.x += this.deltaX;\n    position.y += (this.node.style.titleHeight / 2 - this.node.style.nodeButtonSize / 2);\n    return { position }\n  }\n  private _offUIRender() {\n    this.node.offUIContext.fillStyle = this.hitColor.rgbaCSSString;\n    this.node.offUIContext.fillRect(\n      this.node.position.x + this.deltaX,\n      this.node.position.y + this.node.style.titleHeight / 2 - this.node.style.nodeButtonSize / 2,\n      this.node.style.nodeButtonSize,\n      this.node.style.nodeButtonSize\n    );\n  }\n}\nexport interface NodeButtonRenderParams {\n  position: SerializedVector\n}\n","import { Vector } from './vector';\nimport { Color } from './color';\nimport { Flow, FlowState } from './flow';\nimport { Node, NodeButton, NodeStyle, SerializedNode, NodeButtonRenderParams } from './node';\nimport { Terminal, TerminalType, TerminalStyle } from './terminal';\nimport { TunnelNode } from './tunnel-node';\nimport { Align } from '../common/enums';\n\nexport class SubFlowNode extends Node {\n  subFlow: Flow;\n\n  constructor(\n    flow: Flow,\n    subFlow: Flow,\n    position: Vector,\n    width: number,\n    inputs: any[],\n    outputs: any[],\n    options: SubFlowOptions = DefaultSubFlowOptions()\n  ) {\n\n    super(flow, options.name || 'New SubFlow', position, width, inputs ? inputs : [], outputs ? outputs : [], {\n      style: options.style,\n      terminalStyle: options.terminalStyle,\n      state: options.state,\n      id: options.id,\n      hitColor: options.hitColor\n    });\n\n    this.subFlow = subFlow;\n\n    this.subFlow.on('add-input', (_, tunnel: TunnelNode) => {\n      let proxyTerminal = new Terminal(this, TerminalType.IN, tunnel.outputs[0].dataType, tunnel.outputs[0].name);\n      tunnel.proxyTerminal = proxyTerminal;\n      this.addTerminal(proxyTerminal);\n    });\n    this.subFlow.on('add-output', (_, tunnel: TunnelNode) => {\n      let proxyTerminal = new Terminal(this, TerminalType.OUT, tunnel.inputs[0].dataType, tunnel.inputs[0].name);\n      tunnel.proxyTerminal = proxyTerminal;\n      this.addTerminal(proxyTerminal);\n    });\n\n    this.subFlow.inputs.forEach((inputNode, index) => inputNode.proxyTerminal = this.inputs[index]);\n    this.subFlow.outputs.forEach((outputNode, index) => outputNode.proxyTerminal = this.outputs[index]);\n\n    this.addNodeButton(\n      () => this.flow.flowConnect.render(this.subFlow),\n      (context: CanvasRenderingContext2D, params: NodeButtonRenderParams, nodeButton: NodeButton) => {\n        let style = nodeButton.node.style;\n\n        context.strokeStyle = style.expandButtonColor;\n        context.beginPath();\n        context.moveTo(params.position.x, params.position.y + style.nodeButtonSize / 2);\n        context.lineTo(params.position.x, params.position.y + style.nodeButtonSize);\n        context.lineTo(params.position.x + style.nodeButtonSize, params.position.y);\n        context.lineTo(params.position.x + style.nodeButtonSize, params.position.y + style.nodeButtonSize / 2);\n        context.moveTo(params.position.x + style.nodeButtonSize, params.position.y);\n        context.lineTo(params.position.x + style.nodeButtonSize / 2, params.position.y);\n        context.moveTo(params.position.x, params.position.y + style.nodeButtonSize);\n        context.lineTo(params.position.x + style.nodeButtonSize / 2, params.position.y + style.nodeButtonSize);\n        context.closePath();\n\n        context.stroke();\n      }, Align.Right\n    );\n  }\n\n  run() {\n    if (this.flow.state === FlowState.Stopped) return;\n    this.subFlow.start();\n  }\n  serialize(): SerializedNode {\n    return {\n      id: this.id,\n      name: this.name,\n      position: this.position.serialize(),\n      width: this.width,\n      state: this.state,\n      inputs: this.inputs.map(terminal => terminal.serialize()),\n      outputs: this.outputs.map(terminal => terminal.serialize()),\n      style: this.style,\n      terminalStyle: this.terminalStyle,\n      hitColor: this.hitColor.serialize(),\n      zIndex: this.zIndex,\n      focused: this.focused,\n      renderState: this.renderState,\n      ui: this.ui.serialize(),\n      subFlow: this.subFlow.serialize()\n    };\n  }\n  static deSerialize(flow: Flow, data: SerializedNode): SubFlowNode {\n    let subFlow = Flow.deSerialize(flow.flowConnect, data.subFlow);\n    return new SubFlowNode(flow, subFlow, Vector.deSerialize(data.position), data.width, data.inputs, data.outputs, {\n      name: data.name,\n      style: data.style,\n      terminalStyle: data.terminalStyle,\n      state: data.state,\n      id: data.id,\n      hitColor: Color.deSerialize(data.hitColor)\n    });\n  }\n}\n\nexport interface SubFlowOptions {\n  name?: string,\n  style?: NodeStyle,\n  terminalStyle?: TerminalStyle,\n  state?: Object,\n  id?: string,\n  hitColor?: Color\n}\nlet DefaultSubFlowOptions = (): SubFlowOptions => {\n  return {\n    style: {},\n    terminalStyle: {},\n    state: {}\n  }\n}\n","import { Vector, SerializedVector } from \"./vector\";\nimport { getNewUUID, canConnect, get, exists } from \"../utils/utils\";\nimport { Color, SerializedColor } from \"./color\";\nimport { Connector, ConnectorStyle } from './connector';\nimport { Hooks } from './hooks';\nimport { Node } from './node';\nimport { Events, Renderable, RenderResolver, Serializable } from \"../common/interfaces\";\nimport { Log } from \"../utils/logger\";\nimport { Constant } from \"../resource/constants\";\n\nexport class Terminal extends Hooks implements Events, Serializable, Renderable {\n  /**\n   * Terminals can hold any user-defined reference, using this variable to store a reference to something (and thereby binding it to this terminal) is helpful in special applications\n   * for e.g audio connections - terminal can hold a reference to WebAudio Node which can be used to connect said AudioNodes when two terminals are connected,\n   * almost all StandardNodes.Audio nodes uses this variable.\n   * This can be ignored for other applications where such pattern is not useful or doesn't make sense.\n  **/\n  ref: any;\n  connectors: Connector[];\n  focus: boolean;\n  position: Vector;\n  hitColor: Color;\n  style: TerminalStyle;\n  id: string;\n  private _propName: string;\n  private watcherId: number;\n\n  get propName(): string { return this._propName; }\n  set propName(propName: string) {\n    if (!propName || propName === '') {\n      Log.error('Failed to set prop name \\'' + propName + '\\', prop name is invalid');\n      return;\n    }\n\n    let oldPropName = this._propName;\n    let newPropName = propName;\n    if (exists(this.watcherId)) { this.node.unwatch(oldPropName, this.watcherId); }\n    this._propName = newPropName;\n    this.watcherId = this.node.watch(newPropName, (_oldVal: any, newVal: any) => {\n      if (this.type === TerminalType.OUT) this.setData(newVal);\n    });\n  }\n\n  renderResolver: RenderResolver<Terminal, TerminalRenderParams> = () => null;\n\n  constructor(\n    public node: Node,\n    public type: TerminalType,\n    public dataType: string,\n    public name: string,\n    public options = DefaultTerminalOptions()\n  ) {\n\n    super();\n    this.hitColor = options.hitColor;\n    if (options.propName) this.propName = options.propName;\n    this.style = options.style ? { ...DefaultTerminalStyle(), ...options.style } : DefaultTerminalStyle();\n    this.id = get(options.id, getNewUUID());\n    this.setHitColor(this.hitColor);\n    this.connectors = [];\n    this.position = Vector.Zero();\n    this.focus = false;\n\n    if (this.type === TerminalType.IN) {\n      this.on('data', (_inst, data) => {\n        if (this.propName) this.node.state[this.propName] = data;\n      });\n    }\n  }\n\n  getData(): any {\n    if (this.type === TerminalType.OUT) { Log.error(\"Cannot call 'getData' on output terminal\"); return; }\n    if (this.connectors.length > 0) return this.connectors[0].data;\n    return null;\n  }\n  setData(data: any) {\n    if (this.type === TerminalType.IN) { Log.error(\"Cannot call 'setData' on input terminal\"); return; }\n    this.connectors.forEach(connector => connector.data = data);\n  }\n  private setHitColor(hitColor: Color) {\n    if (!hitColor) {\n      hitColor = Color.Random();\n      while (this.node.terminals.get(hitColor.rgbaString) || this.node.uiNodes.get(hitColor.rgbaString)) hitColor = Color.Random();\n    }\n    this.hitColor = hitColor;\n    this.node.terminals.set(this.hitColor.rgbaString, this);\n  }\n  render() {\n    let context = this.node.context;\n    context.save();\n    let nodeRenderResolver = this.node.renderResolver.terminal;\n    let flowRenderResolver = this.node.flow.renderResolver.terminal;\n    let flowConnectRenderResolver = this.node.flow.flowConnect.renderResolver.terminal;\n    ((this.renderResolver && this.renderResolver(this))\n      || (nodeRenderResolver && nodeRenderResolver(this))\n      || (flowRenderResolver && flowRenderResolver(this))\n      || (flowConnectRenderResolver && flowConnectRenderResolver(this))\n      || this._render\n    )(context, this.getRenderParams(), this);\n    context.restore();\n\n    this.offUIRender();\n\n    this.call('render', this);\n  }\n  _render(context: CanvasRenderingContext2D, params: TerminalRenderParams, terminal: Terminal) {\n    if (params.focus) {\n      context.beginPath();\n      context.arc(params.position.x, params.position.y, terminal.style.radius * 3, 0, Constant.TAU);\n      context.fillStyle = terminal.style.outerFocusColor;\n      context.fill();\n    }\n\n    if (terminal.dataType === 'event') {\n      context.beginPath();\n      context.moveTo(params.position.x, params.position.y - terminal.style.radius * 1.3);\n      context.lineTo(params.position.x + terminal.style.radius * 1.3, params.position.y);\n      context.lineTo(params.position.x, params.position.y + terminal.style.radius * 1.3);\n      context.lineTo(params.position.x - terminal.style.radius * 1.3, params.position.y);\n      context.lineTo(params.position.x, params.position.y - terminal.style.radius * 1.3);\n      context.closePath();\n    } else {\n      context.beginPath();\n      context.arc(params.position.x, params.position.y, terminal.style.radius, 0, Constant.TAU);\n    }\n    context.fillStyle = params.focus ? terminal.style.focusColor : (terminal.node.flow.terminalColors[terminal.dataType] || terminal.style.color);\n    context.strokeStyle = terminal.style.borderColor;\n    context.shadowBlur = terminal.style.shadowBlur;\n    context.shadowColor = terminal.style.shadowColor;\n    context.fill();\n    context.stroke();\n  }\n  getRenderParams(): TerminalRenderParams {\n    return {\n      focus: this.focus,\n      position: this.position.serialize()\n    };\n  }\n  connect(otherTerminal: Terminal, style?: ConnectorStyle): boolean {\n    // Check if already connected\n    if (this.type !== otherTerminal.type) {\n      let start = this.type === TerminalType.OUT ? this : otherTerminal;\n      let end = this.type === TerminalType.IN ? this : otherTerminal;\n      if (end.connectors.length > 0 && start.connectors.includes(end.connectors[0])) return false;\n    }\n\n    // Check if these terminals can be connected\n    if (canConnect(this, otherTerminal, this.node.flow.rules, this.node.flow.executionGraph)) {\n      let newConnector = new Connector(\n        this.node.flow,\n        this.type === TerminalType.OUT ? this : otherTerminal,\n        this.type === TerminalType.IN ? this : otherTerminal,\n        { style }\n      );\n      this.node.flow.connectors.set(newConnector.id, newConnector);\n\n      return true;\n    } else return false;\n  }\n  /**\n   * Disconnects terminal to terminal connections.\n   * If no parameters are passed and the terminal on which this method is called is an output terminal then,\n   * all the connections going out from this terminal will be diconnected.\n   * \n   * @param connector optional connector Id or reference, used only when the terminal on which this method is called is an Output terminal\n   * @returns \n   */\n  disconnect(connector?: string | Connector): boolean {\n    if (this.type === TerminalType.IN) {\n      this._disconnect(this.connectors[0]);\n      return true;\n    } else {\n      if (typeof connector === 'string') {\n        let cntr = this.connectors.find((currCntr => currCntr.id === connector));\n        if (!cntr) {\n          Log.error('Connector not found while disconnecting', connector);\n          return false;\n        }\n        this._disconnect(cntr);\n      } else if (connector instanceof Connector) {\n        if (!this.connectors.find(cntr => cntr.id === connector.id)) {\n          Log.error('Connector cannot be disconnected from the terminal because its not associated with it', connector);\n          return false;\n        }\n        this._disconnect(connector);\n      } else {\n        this.connectors.forEach(cntr => this._disconnect(cntr));\n      }\n      return true;\n    }\n  }\n  private _disconnect(connector: Connector): void {\n    let [startTerm, endTerm] = [connector.start, connector.end];\n    this.node.flow.connectors.delete(connector.id);\n    connector.start.connectors.splice(connector.start.connectors.findIndex(cntr => cntr.id === connector.id), 1);\n    connector.end.connectors.pop();\n    this.node.flow.executionGraph.disconnect(startTerm.node, endTerm.node);\n    connector.start.onDisconnect(connector, startTerm, endTerm);\n    connector.end.onDisconnect(connector, startTerm, endTerm);\n  }\n  private offUIRender() {\n    let context = this.node.offUIContext;\n    context.save();\n\n    context.beginPath();\n    context.arc(this.position.x, this.position.y, this.style.radius + this.node.style.terminalStripMargin, 0, Constant.TAU);\n    context.fillStyle = this.hitColor.rgbaCSSString;\n    context.fill();\n\n    context.restore();\n  }\n  isConnected(): boolean {\n    return this.connectors.length > 0;\n  }\n\n  onEnter(screenPosition: Vector, realPosition: Vector): void {\n    this.call('enter', this, screenPosition, realPosition);\n\n    this.focus = true;\n    this.node.flow.flowConnect.cursor = 'pointer';\n  }\n  onExit(screenPosition: Vector, realPosition: Vector): void {\n    this.call('exit', this, screenPosition, realPosition);\n\n    this.focus = false;\n    this.node.flow.flowConnect.cursor = 'unset';\n  }\n  onDown(screenPosition: Vector, realPosition: Vector): void {\n    this.call('down', this, screenPosition, realPosition);\n\n    if (this.connectors.length > 0) {\n      if (this.type === TerminalType.IN) {\n        let [startTerm, endTerm] = [this.connectors[0].start, this.connectors[0].end];\n        this.connectors[0].endNode.currHitTerminal = null;\n        this.connectors[0].end = null;\n        this.connectors[0].endNode = null;\n        this.connectors[0].floatingTip = realPosition;\n        this.node.flow.flowConnect.floatingConnector = this.connectors[0];\n        let removedConnector = this.connectors.pop();\n        this.node.flow.executionGraph.disconnect(startTerm.node, endTerm.node);\n        removedConnector.start.onDisconnect(removedConnector, startTerm, endTerm);\n        this.onDisconnect(removedConnector, startTerm, endTerm);\n      } else {\n        if (this.node.flow.flowConnect.floatingConnector) return;\n        let connector = new Connector(this.node.flow, this, null, { floatingTip: realPosition });\n        this.node.flow.connectors.set(connector.id, connector);\n        this.node.flow.flowConnect.floatingConnector = connector;\n      }\n    } else {\n      if (this.node.flow.flowConnect.floatingConnector) return;\n      let connector = new Connector(\n        this.node.flow,\n        this.type === TerminalType.IN ? null : this,\n        this.type === TerminalType.IN ? this : null,\n        { floatingTip: realPosition }\n      );\n      this.node.flow.connectors.set(connector.id, connector);\n      this.node.flow.flowConnect.floatingConnector = connector;\n    }\n  }\n  onUp(screenPosition: Vector, realPosition: Vector): void {\n    this.call('up', this, screenPosition, realPosition);\n  }\n  onDrag(screenPosition: Vector, realPosition: Vector): void {\n    this.call('drag', this, screenPosition, realPosition);\n  }\n  onClick(screenPosition: Vector, realPosition: Vector): void {\n    this.call('click', this, screenPosition, realPosition);\n  }\n  onOver(screenPosition: Vector, realPosition: Vector): void {\n    this.call('over', this, screenPosition, realPosition);\n  }\n  onContextMenu(): void {\n    this.call('rightclick', this);\n  }\n  onConnect(connector: Connector) {\n    this.call('connect', this, connector);\n  }\n  onDisconnect(connector: Connector, startTerminal?: Terminal, endTerminal?: Terminal) {\n    this.call('disconnect', this, connector, startTerminal, endTerminal);\n  }\n\n  onEvent(data: any): void {\n    if (this.type === TerminalType.IN) {\n      this.call('event', this, data);\n    }\n  }\n  emit(data: any) {\n    if (this.type === TerminalType.OUT && this.connectors.length !== 0) {\n      this.connectors.forEach(connector => {\n        connector.end && connector.end.onEvent(data);\n      });\n      this.call('emit', this, data);\n    }\n  }\n\n  serialize(): SerializedTerminal {\n    return {\n      name: this.name,\n      type: this.type,\n      dataType: this.dataType,\n      propName: this.propName,\n      id: this.id,\n      style: this.style,\n      hitColor: this.hitColor.serialize()\n    };\n  }\n  static deSerialize(node: Node, data: SerializedTerminal): Terminal {\n    return new Terminal(node, data.type, data.dataType, data.name, {\n      propName: data.propName,\n      style: data.style,\n      id: data.id,\n      hitColor: Color.deSerialize(data.hitColor)\n    });\n  }\n}\n\nexport enum TerminalType {\n  IN = 1,\n  OUT = 2\n}\n\nexport interface SerializedTerminal {\n  name: string;\n  dataType: string;\n  type?: TerminalType;\n  propName?: string,\n  id?: string;\n  hitColor?: SerializedColor;\n  style?: TerminalStyle\n}\n\nexport interface TerminalStyle {\n  radius?: number,\n  color?: string,\n  borderColor?: string,\n  shadowColor?: string,\n  shadowBlur?: number,\n  focusColor?: string,\n  outerFocusColor?: string\n}\nlet DefaultTerminalStyle = () => {\n  return {\n    radius: 4,\n    color: '#888',\n    borderColor: '#222',\n    shadowBlur: 0,\n    shadowColor: '#ccc',\n    focusColor: '#00ff00',\n    outerFocusColor: '#bbbbbb80'\n  };\n}\n\nexport interface TerminalRenderParams {\n  focus: boolean,\n  position: SerializedVector\n}\n\nexport interface TerminalOptions {\n  propName?: string,\n  style?: TerminalStyle,\n  id?: string,\n  hitColor?: Color\n}\nconst DefaultTerminalOptions = (): TerminalOptions => {\n  return {\n    style: {}\n  };\n}\n","import { Vector } from \"./vector\";\nimport { Color } from \"./color\";\nimport { Flow } from \"./flow\";\nimport { Node, NodeStyle, SerializedNode } from \"./node\";\nimport { Terminal, TerminalStyle } from \"./terminal\";\n\nexport class TunnelNode extends Node {\n  private _proxyTerminal: Terminal;\n  \n  get proxyTerminal(): Terminal { return this._proxyTerminal; }\n  set proxyTerminal(terminal: Terminal) {\n    this._proxyTerminal = terminal;\n    this._proxyTerminal.on('data', (_, data) => this.outputs[0].setData(data));\n  }\n\n  constructor(\n    flow: Flow,\n    name: string,\n    position: Vector,\n    width: number,\n    inputs: any[],\n    outputs: any[],\n    options: TunnelNodeOptions = DefaultTunnelNodeOptions()\n  ) {\n\n    super(flow, name, position, width, inputs, outputs, {\n      style: options.style,\n      terminalStyle: options.terminalStyle,\n      state: options.state,\n      id: options.id,\n      hitColor: options.hitColor\n    });\n\n    if (this.inputs.length > 0) {\n      this.inputs[0].on('data', (_, data) => this.proxyTerminal.setData(data));\n    } else {\n      this.outputs[0].on('connect', (_, connector) => {\n        if (this.proxyTerminal.connectors.length > 0) {\n          connector.data = this.proxyTerminal.connectors[0].data;\n        }\n      });\n    }\n  }\n\n  serialize(): SerializedTunnelNode {\n    return {\n      id: this.id,\n      name: this.name,\n      position: this.position.serialize(),\n      width: this.width,\n      state: this.state,\n      inputs: this.inputs.map(terminal => terminal.serialize()),\n      outputs: this.outputs.map(terminal => terminal.serialize()),\n      style: this.style,\n      terminalStyle: this.terminalStyle,\n      hitColor: this.hitColor.serialize(),\n      zIndex: this.zIndex,\n      focused: this.focused,\n      renderState: this.renderState,\n      ui: this.ui.serialize(),\n      proxyTerminalId: this.proxyTerminal.id\n    }\n  }\n  static deSerialize(flow: Flow, data: SerializedTunnelNode): TunnelNode {\n    return new TunnelNode(flow, data.name, Vector.deSerialize(data.position), data.width, data.inputs, data.outputs, {\n      style: data.style,\n      terminalStyle: data.terminalStyle,\n      state: data.state,\n      id: data.id,\n      hitColor: Color.deSerialize(data.hitColor)\n    });\n  }\n}\n\nexport interface SerializedTunnelNode extends SerializedNode {\n  proxyTerminalId: string\n}\n\nexport interface TunnelNodeOptions {\n  style?: NodeStyle,\n  terminalStyle?: TerminalStyle,\n  state?: Object,\n  id?: string,\n  hitColor?: Color,\n}\nlet DefaultTunnelNodeOptions = (): TunnelNodeOptions => {\n  return {\n    style: {},\n    terminalStyle: {},\n    state: {}\n  }\n}\n","import { Serializable } from '../common/interfaces';\nimport { normalize, clamp } from '../utils/utils';\n\nexport class Vector implements Serializable {\n  x: number;\n  y: number;\n\n  constructor(xOrDOMPoint: number | DOMPoint, y?: number) {\n    if (xOrDOMPoint instanceof DOMPoint)\n      [this.x, this.y] = [xOrDOMPoint.x, xOrDOMPoint.y];\n    else\n      [this.x, this.y] = [xOrDOMPoint || 0, y || 0];\n  }\n\n  addInPlace(vector: Vector): Vector;\n  addInPlace(scalar: number): Vector;\n  addInPlace(x: number, y: number): Vector;\n  addInPlace(arg1: number | Vector, arg2?: number): Vector {\n    if (arg1 instanceof Vector) {\n      this.x += arg1.x;\n      this.y += arg1.y;\n    } else if (typeof arg2 === 'undefined') {\n      this.x += arg1;\n      this.y += arg1;\n    } else {\n      this.x += arg1;\n      this.y += arg2;\n    }\n    return this;\n  }\n  multiplyInPlace(vector: Vector): Vector;\n  multiplyInPlace(scalar: number): Vector;\n  multiplyInPlace(x: number, y: number): Vector;\n  multiplyInPlace(arg1: number | Vector, arg2?: number): Vector {\n    if (arg1 instanceof Vector) {\n      this.x *= arg1.x;\n      this.y *= arg1.y;\n    } else if (typeof arg2 === 'undefined') {\n      this.x *= arg1;\n      this.y *= arg1;\n    } else {\n      this.x *= arg1;\n      this.y *= arg2;\n    }\n    return this;\n  }\n  subtractInPlace(vector: Vector): Vector;\n  subtractInPlace(scalar: number): Vector;\n  subtractInPlace(x: number, y: number): Vector;\n  subtractInPlace(arg1: number | Vector, arg2?: number): Vector {\n    if (arg1 instanceof Vector) {\n      this.x -= arg1.x;\n      this.y -= arg1.y;\n    } else if (typeof arg2 === 'undefined') {\n      this.x -= arg1;\n      this.y -= arg1;\n    } else {\n      this.x -= arg1;\n      this.y -= arg2;\n    }\n    return this;\n  }\n  normalizeInPlace(min: number, max: number): Vector;\n  normalizeInPlace(minX: number, maxX: number, minY: number, maxY: number): Vector;\n  normalizeInPlace(min: number, max: number, minY?: number, maxY?: number): Vector {\n    if (typeof minY !== 'undefined' && typeof maxY !== 'undefined') {\n      this.x = normalize(this.x, min, max);\n      this.y = normalize(this.y, minY, maxY);\n    } else {\n      this.x = normalize(this.x, min, max);\n      this.y = normalize(this.y, min, max);\n    }\n\n    return this;\n  }\n  clampInPlace(min: number, max: number): Vector;\n  clampInPlace(minX: number, maxX: number, minY: number, maxY: number): Vector;\n  clampInPlace(min: number, max: number, minY?: number, maxY?: number): Vector {\n    if (typeof minY !== 'undefined' && typeof maxY !== 'undefined') {\n      this.x = clamp(this.x, min, max);\n      this.y = clamp(this.y, minY, maxY);\n    } else {\n      this.x = clamp(this.x, min, max);\n      this.y = clamp(this.y, min, max);\n    }\n\n    return this;\n  }\n  transformInPlace(transform: DOMMatrix): Vector {\n    let transformedPoint = transform.transformPoint(this);\n    [this.x, this.y] = [transformedPoint.x, transformedPoint.y];\n    return this;\n  }\n  absInPlace(): Vector {\n    this.x = Math.abs(this.x);\n    this.y = Math.abs(this.y);\n    return this;\n  }\n\n  add(vector: Vector): Vector;\n  add(scalar: number): Vector;\n  add(x: number, y: number): Vector;\n  add(arg1: number | Vector, arg2?: number): Vector {\n    return (new Vector(this.x, this.y) as any).addInPlace(arg1, arg2);\n  }\n  multiply(vector: Vector): Vector;\n  multiply(scalar: number): Vector;\n  multiply(x: number, y: number): Vector;\n  multiply(arg1: number | Vector, arg2?: number): Vector {\n    return (new Vector(this.x, this.y) as any).multiplyInPlace(arg1, arg2);\n  }\n  subtract(vector: Vector): Vector;\n  subtract(scalar: number): Vector;\n  subtract(x: number, y: number): Vector;\n  subtract(arg1: number | Vector, arg2?: number): Vector {\n    return (new Vector(this.x, this.y) as any).subtractInPlace(arg1, arg2);\n  }\n  normalize(min: number, max: number): Vector;\n  normalize(minX: number, maxX: number, minY: number, maxY: number): Vector;\n  normalize(min: number, max: number, minY?: number, maxY?: number): Vector {\n    return new Vector(this.x, this.y).normalizeInPlace(min, max, minY, maxY);\n  }\n  clamp(min: number, max: number): Vector;\n  clamp(minX: number, maxX: number, minY: number, maxY: number): Vector;\n  clamp(min: number, max: number, minY?: number, maxY?: number): Vector {\n    return new Vector(this.x, this.y).clampInPlace(min, max, minY, maxY);\n  }\n  isInside(start: Vector, end: Vector): boolean;\n  isInside(x1: number, y1: number, x2: number, y2: number): boolean;\n  isInside(arg1: number | Vector, arg2: number | Vector, arg3?: number, arg4?: number): boolean {\n    if (arg1 instanceof Vector && arg2 instanceof Vector) {\n      if (this.x < arg1.x || this.x > arg2.x) return false;\n      if (this.y < arg1.y || this.y > arg2.y) return false;\n    } else {\n      if (this.x < arg1 || this.x > arg3) return false;\n      if (this.y < arg2 || this.y > arg4) return false;\n    }\n\n    return true;\n  }\n  assign(vector: Vector): Vector;\n  assign(scalar: number): Vector;\n  assign(x: number, y: number): Vector;\n  assign(arg1: number | Vector, arg2?: number): Vector {\n    if (arg1 instanceof Vector) {\n      this.x = arg1.x;\n      this.y = arg1.y;\n    } else if (typeof arg2 === 'undefined') {\n      this.x = arg1;\n      this.y = arg1;\n    } else {\n      this.x = arg1;\n      this.y = arg2;\n    }\n    return this;\n  }\n  transform(transform: DOMMatrix): Vector {\n    return new Vector(this.x, this.y).transformInPlace(transform);\n  }\n  abs(): Vector {\n    return new Vector(this.x, this.y).absInPlace();\n  }\n  toString() {\n    return '[' + this.x.toFixed(3) + ', ' + this.y.toFixed(3) + ']';\n  }\n  clone(): Vector {\n    return new Vector(this.x, this.y);\n  }\n  max(): number {\n    return Math.max(this.x, this.y);\n  }\n  isEqual(vector: Vector, threshold?: number): boolean {\n    if (typeof threshold !== 'undefined') {\n      return Vector.Distance(this, vector) <= threshold;\n    }\n\n    return this.x === vector.x && this.y === vector.y;\n  }\n\n  static Distance(vector1OrX1: Vector | number, vector2OrY1: Vector | number, x2?: number, y2?: number): number {\n    if (vector1OrX1 instanceof Vector && vector2OrY1 instanceof Vector) {\n      return Math.sqrt(Math.pow(vector2OrY1.x - vector1OrX1.x, 2) + Math.pow(vector2OrY1.y - vector1OrX1.y, 2));\n    } else if (typeof vector1OrX1 === 'number' && typeof vector2OrY1 === 'number') {\n      return Math.sqrt(Math.pow(x2 - vector1OrX1, 2) + Math.pow(y2 - vector2OrY1, 2));\n    }\n  }\n  static Midpoint(vector1: Vector, vector2: Vector): Vector {\n    return new Vector((vector1.x + vector2.x) / 2, (vector1.y + vector2.y) / 2);\n  }\n  static Zero(): Vector {\n    return new Vector(0, 0);\n  }\n  static Random(minX: number, maxX: number, minY: number, maxY: number): Vector {\n    return new Vector(\n      Math.random() * (maxX - minX) + minX,\n      Math.random() * (maxY - minY) + minY\n    );\n  }\n\n  serialize(): SerializedVector {\n    return { x: this.x, y: this.y };\n  }\n  static deSerialize(data: SerializedVector): Vector {\n    return new Vector(data.x, data.y);\n  }\n}\n\nexport interface SerializedVector {\n  x: number, y: number\n}\n","import { Connector, Flow, Group, Node, Color, Hooks, ConnectorRenderParams, NodeRenderParams, GroupRenderParams, NodeButton, NodeButtonRenderParams } from \"./core/index\";\nimport { Vector } from \"./core/vector\";\nimport { Dimension, Pointer, RenderResolver, Rules } from \"./common/interfaces\";\nimport { intersects, noop } from \"./utils/utils\";\nimport { Log } from './utils/logger';\nimport { Terminal, TerminalRenderParams, TerminalType } from './core/terminal';\nimport { FlowState, FlowOptions, SerializedFlow } from './core/flow';\nimport { ViewPort } from './common/enums';\nimport { generateAudioWorklets, WorkletUtils } from \"./resource/audio-worklets\";\nimport { Container, ContainerRenderParams } from \"./ui/container\";\n\ndeclare global {\n  interface CanvasRenderingContext2D {\n    roundRect: (x: number, y: number, width: number, height: number, radius: number) => void,\n    strokeRoundRect: (x: number, y: number, width: number, height: number, radius: number) => void,\n    fillRoundRect: (x: number, y: number, width: number, height: number, radius: number) => void\n  }\n}\n/**\n * FlowConnect is like a placeholder that contains references to all Flows created by this instance and can render one flow at a time on-screen\n * \n * One FlowConnect instance is bound to exactly one HTMLCanvasElement, this instance maintains/tracks the dimensions of HTMLCanvasElement,\n * it registers user-interaction events (mouse, keyboard, touch) and creates additional OffScreenCanvas's to track/act-upon these events\n */\nexport class FlowConnect extends Hooks {\n  static async create(mount?: HTMLCanvasElement | HTMLDivElement): Promise<FlowConnect> {\n    let flowConnect = new FlowConnect(mount);\n    await flowConnect.setupAudioContext();\n    return flowConnect;\n  }\n\n  /** Reference to the canvas element on which the flows will be rendered by FlowConnect instance */\n  canvas: HTMLCanvasElement;\n  private _context: CanvasRenderingContext2D;\n  get context(): CanvasRenderingContext2D { return this._context }\n\n  /** Reference to the AudioContext (one FlowConnect instance will only have one audio context) */\n  private _audioContext: AudioContext;\n  get audioContext(): AudioContext { return this._audioContext }\n\n  /** @hidden Only used for audio stuff */\n  audioBufferCache: Map<ArrayBuffer, AudioBuffer> = new Map();\n  /** @hidden Only used for audio stuff */\n  arrayBufferCache: Map<string, ArrayBuffer> = new Map();\n\n  /** For rendering color hit-maps for Nodes */\n  offCanvas: OffscreenCanvas | HTMLCanvasElement;\n  private _offContext: OffscreenCanvasRenderingContext2D | CanvasRenderingContext2D;\n  get offContext(): OffscreenCanvasRenderingContext2D | CanvasRenderingContext2D { return this._offContext }\n\n  /** For rendering color hit-maps for UI elements and Terminals of Nodes */\n  offUICanvas: OffscreenCanvas | HTMLCanvasElement;\n  private _offUIContext: OffscreenCanvasRenderingContext2D | CanvasRenderingContext2D;\n  get offUIContext(): OffscreenCanvasRenderingContext2D | CanvasRenderingContext2D { return this._offUIContext }\n\n  /** For rendering color hit-maps for Groups */\n  offGroupCanvas: OffscreenCanvas | HTMLCanvasElement;\n  private _offGroupContext: OffscreenCanvasRenderingContext2D | CanvasRenderingContext2D;\n  get offGroupContext(): OffscreenCanvasRenderingContext2D | CanvasRenderingContext2D { return this._offGroupContext }\n\n  /** Canvas's absolute position and dimension from viewport origin (top-left) (for e.g. if the canvas element is inside a scrollable parent) */\n  canvasDimensions: Dimension = { top: 0, left: 0, width: 0, height: 0 };\n\n  get cursor(): string { return this.canvas.style.cursor; }\n  set cursor(cursor: string) { this.canvas.style.cursor = cursor; }\n\n  state: FlowConnectState = FlowConnectState.Stopped;\n\n  /** Id recieved from *requestAnimationFrame* */\n  private frameId: number;\n\n  /** Root flow of the flow-tree (Flow that contains SubFlowNodes that again contains SubFlowNodes and so on...) */\n  private rootFlow: Flow;\n  /** Flow which is currently rendered on the canvas */\n  private currFlow: Flow;\n\n  /** All the flows created by this FlowConnect instance  */\n  flows: Flow[] = [];\n\n  /** Reference of the current/previous Nodes/Groups under user-interaction (mouse, touch) */\n  currHitNode: Node;\n  private prevHitNode: Node;\n  private currHitGroup: Group;\n\n  /** Reference to the new Group being drawn */\n  private currGroup: Group;\n  private groupStartPoint: Vector;\n\n  /** @hidden Reference to the new Connector being drawn */\n  floatingConnector: Connector;\n\n  /** For controlling user-interaction */\n  pointers: Pointer[] = [];\n  private keymap: Record<string, boolean> = {};\n  private touchControls: Record<string, boolean> = { 'CreateGroup': false };\n\n  /** @hidden HTML input overlayed on canvas when focused */\n  private genericInput: HTMLInputElement = document.createElement('input');\n  /** @hidden ResizeObservers to trigger re-render when dimensions change */\n  private parentResizeObserver: ResizeObserver;\n  private bodyResizeObserver: ResizeObserver;\n\n  minScale: number = 0.1;\n  maxScale: number = 5;\n  wheelScaleDelta: number = 1.05;\n  pinchScaleDelta: number = 1.02;\n  get scale(): number { return this._transform.a }\n  disableScale: boolean = false;\n  private _transform: DOMMatrix = new DOMMatrix();\n\n  /** Current transformation matrix */\n  get transform(): DOMMatrix { return this._transform }\n  private inverseTransform: DOMMatrix = new DOMMatrix();\n  private identity: DOMMatrix = new DOMMatrix();\n\n  /** Time (in ms) when one or more flows created by this FlowConnect instance was started */\n  startTime: number = -1;\n  private timerId: number;\n  /** No. of milliseconds passed since the start of one or more flows */\n  get time(): number { return (this.startTime < 0) ? this.startTime : (performance.now() - this.startTime) }\n\n  readonly renderResolver: {\n    connector?: RenderResolver<Connector, ConnectorRenderParams>,\n    node?: RenderResolver<Node, NodeRenderParams>,\n    nodeButton?: RenderResolver<NodeButton, NodeButtonRenderParams>,\n    uiContainer?: RenderResolver<Container, ContainerRenderParams>\n    group?: RenderResolver<Group, GroupRenderParams>,\n    terminal?: RenderResolver<Terminal, TerminalRenderParams>,\n  } = {};\n\n  /**\n   * @param mount HTML element (div or canvas) on which FlowConnect will render Flows, if no mount is provided, a new canvas element will be created and attached to document.body\n   */\n  constructor(mount?: HTMLCanvasElement | HTMLDivElement) {\n    super();\n    this.prepareCanvas(mount);\n    this.setupHitCanvas();\n    this.calcCanvasDimension(true);\n    this.registerChangeListeners();\n    this.attachStyles();\n    this.canvasUtils();\n    this.registerEvents();\n    this.setGenericInput();\n  }\n\n  /** Re-calculates cavnvas position/dimension when scrolling/resizing happens */\n  private registerChangeListeners() {\n    let throttle = false;\n    document.addEventListener('scroll', () => {\n      if (!throttle) {\n        window.requestAnimationFrame(() => {\n          this.calcCanvasDimension(false);\n          throttle = false;\n        });\n        throttle = true;\n      }\n    });\n    this.registerObservers(this.canvas.parentElement);\n  }\n  private registerObservers(parent: HTMLElement) {\n    this.parentResizeObserver && this.parentResizeObserver.disconnect();\n    this.bodyResizeObserver && this.bodyResizeObserver.disconnect();\n\n    this.parentResizeObserver = new ResizeObserver(() => {\n      this.calcCanvasDimension(true);\n      this.updateTransform(null, null, null);\n    });\n    this.parentResizeObserver.observe(parent);\n    if (parent !== document.body) {\n      this.bodyResizeObserver = new ResizeObserver(() => {\n        this.calcCanvasDimension(true);\n        this.updateTransform(null, null, null);\n      });\n      this.bodyResizeObserver.observe(document.body);\n    }\n  }\n  private prepareCanvas(mount?: HTMLCanvasElement | HTMLDivElement) {\n    if (!mount) {\n      this.canvas = document.createElement('canvas');\n      this.canvas.width = document.body.clientWidth;\n      this.canvas.height = document.body.clientHeight;\n      document.body.appendChild(this.canvas);\n    } else if (mount instanceof HTMLDivElement) {\n      this.canvas = document.createElement('canvas');\n      this.canvas.width = mount.clientWidth;\n      this.canvas.height = mount.clientHeight;\n      mount.appendChild(this.canvas);\n    } else if (mount instanceof HTMLCanvasElement) {\n      this.canvas = mount;\n    } else {\n      Log.error('mount provided is not of type HTMLDivElement or HTMLCanvasElement')\n    }\n\n    Object.assign(this.canvas.style, {\n      position: 'absolute',\n      width: '100%',\n      height: '100%'\n    })\n    this._context = this.canvas.getContext('2d');\n  }\n  /** Creates additional canvas's for rendering color hit-maps */\n  private setupHitCanvas() {\n    if (typeof OffscreenCanvas !== 'undefined' && typeof OffscreenCanvasRenderingContext2D !== 'undefined') {\n      this.offCanvas = new OffscreenCanvas(this.canvasDimensions.width, this.canvasDimensions.height);\n      this.offUICanvas = new OffscreenCanvas(this.canvasDimensions.width, this.canvasDimensions.height);\n      this.offGroupCanvas = new OffscreenCanvas(this.canvasDimensions.width, this.canvasDimensions.height);\n    } else {\n      this.offCanvas = document.createElement('canvas');\n      this.offUICanvas = document.createElement('canvas');\n      this.offGroupCanvas = document.createElement('canvas');\n    }\n    this._offContext = this.offCanvas.getContext('2d');\n    this._offUIContext = this.offUICanvas.getContext('2d');\n    this._offGroupContext = this.offGroupCanvas.getContext('2d');\n  }\n  private attachStyles() {\n    this.canvas.style.touchAction = 'none';\n\n    let inputStyle = document.createElement('style');\n    inputStyle.innerHTML = 'input.flow-connect-input { position: fixed; visibility: hidden; pointer-events: none; z-index: 100; border: none; border-radius: 0; box-sizing: border-box;} input.flow-connect-input:focus { outline: none; }';\n    document.getElementsByTagName('head')[0].appendChild(inputStyle);\n  }\n  private calcCanvasDimension(adjust: boolean) {\n    if (adjust && this.canvas.parentElement) {\n      let parentBoundingRect = this.canvas.parentElement.getBoundingClientRect();\n      this.canvas.width = parentBoundingRect.width;\n      this.canvas.height = parentBoundingRect.height;\n      this.call('dimension-change', this, this.canvas.width, this.canvas.height);\n    }\n\n    let boundingRect = this.canvas.getBoundingClientRect();\n    this.canvasDimensions = {\n      top: Math.round(boundingRect.top),\n      left: Math.round(boundingRect.left),\n      width: Math.round(boundingRect.width),\n      height: Math.round(boundingRect.height)\n    }\n\n    this.offCanvas.width = this.canvasDimensions.width;\n    this.offCanvas.height = this.canvasDimensions.height;\n    this.offUICanvas.width = this.canvasDimensions.width;\n    this.offUICanvas.height = this.canvasDimensions.height;\n    this.offGroupCanvas.width = this.canvasDimensions.width;\n    this.offGroupCanvas.height = this.canvasDimensions.height;\n  }\n  private canvasUtils() {\n    FlowConnect.prototype.canvasUtils = noop;\n    CanvasRenderingContext2D.prototype.roundRect = function (x: number, y: number, width: number, height: number, radius: number) {\n      this.beginPath();\n      this.moveTo(x + radius, y);\n      this.lineTo(x + width - radius, y);\n      this.quadraticCurveTo(x + width, y, x + width, y + radius);\n      this.lineTo(x + width, y + height - radius);\n      this.quadraticCurveTo(x + width, y + height, x + width - radius, y + height);\n      this.lineTo(x + radius, y + height);\n      this.quadraticCurveTo(x, y + height, x, y + height - radius);\n      this.lineTo(x, y + radius);\n      this.quadraticCurveTo(x, y, x + radius, y);\n      this.closePath();\n    }\n    CanvasRenderingContext2D.prototype.strokeRoundRect = function (x: number, y: number, width: number, height: number, radius: number) {\n      if (typeof radius === 'undefined') radius = 5;\n      this.roundRect(x, y, width, height, radius);\n      this.stroke();\n    }\n    CanvasRenderingContext2D.prototype.fillRoundRect = function (x: number, y: number, width: number, height: number, radius: number) {\n      if (typeof radius === 'undefined') radius = 5;\n      this.roundRect(x, y, width, height, radius);\n      this.fill();\n    }\n  }\n  private registerEvents(): void {\n    let dragDelta: Vector;\n    let prevPanPosition: Vector = Vector.Zero();\n    let prevPinchDistance: number = -1;\n\n    window.onkeydown = (ev: KeyboardEvent) => {\n      !this.keymap[ev.key] && (this.keymap[ev.key] = true);\n    }\n    window.onkeyup = (ev: KeyboardEvent) => {\n      this.keymap[ev.key] = false;\n    }\n\n    this.canvas.onpointerdown = (ev: PointerEvent) => {\n      if (!this.currFlow) return;\n\n      this.addPointer(ev.pointerId, this.getRelativePosition(ev));\n      if (this.pointers.length === 1) {\n        prevPanPosition = this.pointers[0].screenPosition;\n        this.currHitNode = this.getHitNode(this.pointers[0].screenPosition);\n        if (this.currHitNode) {\n          this.currHitNode.zIndex = Number.MAX_SAFE_INTEGER;\n          if (this.keymap['Control']) {\n            this.currHitNode.focused = !this.currHitNode.focused;\n          } else {\n            this.currFlow.removeAllFocus();\n            this.currHitNode.focused = true;\n          }\n          this.currHitNode.onDown(this.pointers[0].screenPosition.clone(), this.pointers[0].realPosition.clone());\n          dragDelta = this.currHitNode.position.subtract(this.pointers[0].realPosition);\n        } else {\n          if (!this.keymap['Control']) {\n            this.currFlow.removeAllFocus();\n\n            this.currHitGroup = this.getHitGroup(this.pointers[0].screenPosition);\n            this.currHitGroup && (dragDelta = this.currHitGroup.position.subtract(this.pointers[0].realPosition));\n          }\n          else if (this.keymap['Control'] || this.touchControls['CreateGroup']) {\n            this.groupStartPoint = this.pointers[0].realPosition.clone();\n            this.currGroup = new Group(this.currFlow, this.groupStartPoint.clone(), { name: 'New Group' });\n          }\n        }\n      } else {\n        this.currHitNode = null;\n        this.currHitGroup = null;\n        this.currFlow.removeAllFocus();\n        if (this.floatingConnector) {\n          this.floatingConnector.removeConnection();\n        }\n      }\n    }\n    this.canvas.onpointerup = (ev) => {\n      if (!this.currFlow) return;\n\n      this.removePointer(this.pointers, ev);\n\n      if (this.pointers.length < 2) prevPinchDistance = -1;\n\n      let screenPosition = this.getRelativePosition(ev);\n      let realPosition = screenPosition.transform(this.inverseTransform);\n\n      if (this.currHitNode) this.handleGrouping(screenPosition);\n\n      this.currHitNode = null;\n      this.currHitGroup = null;\n\n      let hitNode = this.getHitNode(screenPosition);\n      hitNode && hitNode.onUp(screenPosition.clone(), realPosition.clone());\n\n      if (this.currGroup) {\n        let newGroup = this.currGroup;\n        this.currGroup = null;\n        if (newGroup.width > 10 && newGroup.height > 10) {\n          this.currFlow.groups.push(newGroup);\n          newGroup.setContainedNodes();\n        }\n      }\n      if (this.floatingConnector) this.handleConnection(hitNode, screenPosition, realPosition);\n    }\n    this.canvas.onpointerout = (ev) => {\n      if (!this.currFlow) return;\n\n      this.removePointer(this.pointers, ev);\n      if (this.pointers.length === 0) {\n        if (this.currHitNode) {\n          let screenPosition = this.getRelativePosition(ev);\n          this.handleGrouping(screenPosition);\n        }\n        this.currHitNode = null;\n        this.currHitGroup = null;\n      }\n\n      if (this.currGroup) {\n        let newGroup = this.currGroup;\n        this.currGroup = null;\n        if (newGroup.width > 10 && newGroup.height > 10) {\n          this.currFlow.groups.push(newGroup);\n          newGroup.setContainedNodes();\n        }\n      }\n\n      if (this.floatingConnector) this.floatingConnector.removeConnection();\n\n      if (this.prevHitNode) {\n        let screenPosition = this.getRelativePosition(ev);\n        let realPosition = screenPosition.transform(this.inverseTransform);\n        this.prevHitNode.onExit(screenPosition, realPosition);\n        this.prevHitNode = null;\n      }\n    }\n    this.canvas.onpointermove = (ev) => {\n      if (!this.currFlow) return;\n\n      let screenPosition = this.getRelativePosition(ev);\n      let realPosition = screenPosition.transform(this.inverseTransform);\n\n      this.updatePointer(ev.pointerId, screenPosition, realPosition);\n\n      if (this.pointers.length === 2) {\n        let currPinchDistance = Vector.Distance(this.pointers[0].screenPosition, this.pointers[1].screenPosition);\n        if (prevPinchDistance > 0) {\n          if (currPinchDistance !== prevPinchDistance) {\n            this.handleZoom(currPinchDistance > prevPinchDistance, Vector.Midpoint(this.pointers[0].screenPosition, this.pointers[1].screenPosition), this.pinchScaleDelta);\n          }\n        }\n        prevPinchDistance = currPinchDistance;\n      }\n\n      if (this.currGroup) {\n        if (realPosition.x < this.groupStartPoint.x) this.currGroup.position.x = realPosition.x;\n        this.currGroup.width = Math.abs(this.groupStartPoint.x - realPosition.x);\n\n        if (realPosition.y < this.groupStartPoint.y) this.currGroup.position.y = realPosition.y;\n        this.currGroup.height = Math.abs(this.groupStartPoint.y - realPosition.y);\n      }\n\n      if (this.currHitNode) {\n        // If dragging UINode outside its bounds, Node can pre-empt currHitNode\n        this.currHitNode.onDrag(screenPosition.clone(), realPosition.clone());\n        if (this.currHitNode) {\n          if ((!this.currHitNode.currHitUINode || !this.currHitNode.currHitUINode.draggable) && !this.currHitNode.currHitTerminal && !this.floatingConnector) {\n            this.currHitNode.position = realPosition.add(dragDelta);\n\n            let hitGroup = this.getHitGroup(screenPosition);\n            if (hitGroup && hitGroup === this.currHitNode.group) {\n              let groupRealPos = hitGroup.position.transform(this._transform);\n              let nodeRealPos = this.currHitNode.position.transform(this._transform);\n\n              let intersection = intersects(groupRealPos.x, groupRealPos.y,\n                groupRealPos.x + hitGroup.width * this.scale,\n                groupRealPos.y + hitGroup.height * this.scale,\n                nodeRealPos.x, nodeRealPos.y,\n                nodeRealPos.x + this.currHitNode.width * this.scale,\n                nodeRealPos.y + this.currHitNode.ui.height * this.scale\n              );\n\n              if (intersection === ViewPort.INSIDE) {\n                let nodeIndex = hitGroup.nodes.findIndex(node => node.id === this.currHitNode.id);\n                hitGroup.nodeDeltas[nodeIndex] = this.currHitNode.position.subtract(hitGroup.position);\n              }\n            }\n          }\n        }\n      } else {\n        if (this.currHitGroup) {\n          this.currHitGroup.position = realPosition.add(dragDelta);\n        } else if (this.pointers.length === 1 && !this.keymap['Control'] && !this.touchControls['CreateGroup']) {\n          let delta = screenPosition.subtract(prevPanPosition).multiplyInPlace(1 / this.scale);\n          prevPanPosition = screenPosition;\n          this.updateTransform(null, null, delta);\n        }\n      }\n      if (this.floatingConnector) this.floatingConnector.floatingTip = realPosition;\n\n      if (ev.pointerType === 'mouse' && !this.currHitNode) {\n        let hitNode = this.getHitNode(screenPosition);\n        if (hitNode !== this.prevHitNode) {\n          this.prevHitNode && this.prevHitNode.onExit(screenPosition, realPosition);\n          hitNode && hitNode.onEnter(screenPosition, realPosition);\n        } else {\n          hitNode && (!this.currHitNode) && hitNode.onOver(screenPosition, realPosition);\n        }\n        this.prevHitNode = hitNode;\n      }\n    }\n    this.canvas.onclick = (ev) => {\n      if (!this.currFlow) return;\n\n      let screenPosition = this.getRelativePosition(ev);\n      let realPosition = screenPosition.transform(this.inverseTransform);\n      let hitNode = this.getHitNode(screenPosition);\n      hitNode && hitNode.onClick(screenPosition.clone(), realPosition.clone());\n\n      if (!hitNode) {\n        let hitGroup = this.getHitGroup(screenPosition);\n        hitGroup && hitGroup.onClick(screenPosition.clone(), realPosition.clone());\n      }\n    };\n    this.canvas.oncontextmenu = (ev) => {\n      if (!this.currFlow) return;\n\n      ev.preventDefault();\n\n      let screenPosition = this.getRelativePosition(ev);\n      let hitNode = this.getHitNode(screenPosition);\n      hitNode && hitNode.onContextMenu();\n      if (!this.keymap['Control']) this.currFlow.removeAllFocus();\n      hitNode && (hitNode.focused = true);\n    }\n    this.canvas.onwheel = (ev: WheelEvent) => {\n      if (!this.currFlow) return;\n\n      let screenPosition = this.getRelativePosition(ev);\n      let hitNode = this.getHitNode(screenPosition);\n      if (hitNode) {\n        let hitColor = Color.rgbaToString(this.offUIContext.getImageData(screenPosition.x, screenPosition.y, 1, 1).data);\n        let hitUINode = hitNode.getHitUINode(hitColor);\n\n        // Need to add touch compability for pinch on UINodes\n        if (hitUINode && hitUINode.zoomable) {\n          hitNode.onWheel(ev.deltaY < 0, screenPosition, screenPosition.transform(this.inverseTransform));\n          return;\n        }\n      }\n\n      if (!this.disableScale) {\n        ev.preventDefault();\n        this.handleZoom(ev.deltaY < 0, screenPosition, this.wheelScaleDelta);\n      }\n    }\n  }\n  private setGenericInput() {\n    this.genericInput.className = 'flow-connect-input';\n    this.genericInput.style.visibility = 'hidden';\n    this.genericInput.style.pointerEvents = 'none';\n    this.genericInput.style.padding = '0';\n\n    this.genericInput.onblur = () => {\n      this.genericInput.style.visibility = 'hidden';\n      this.genericInput.style.pointerEvents = 'none';\n\n      this.genericInput.onchange = null;\n    }\n\n    document.body.appendChild(this.genericInput);\n  }\n  async setupAudioContext() {\n    if ((window as any).__FLOWCONNECT_AUDIO_CTX__) {\n      this._audioContext = (window as any).__FLOWCONNECT_AUDIO_CTX__;\n    } else {\n      this._audioContext = new AudioContext();\n      (window as any).__FLOWCONNECT_AUDIO_CTX__ = this._audioContext;\n    }\n\n    // This one-time setup is not at all related to FlowConnect, couldn't find any place to do this\n    // Might be a better idea to do this somewhere in StandardNodes.Audio package\n\n    let audioWorklets = generateAudioWorklets(WorkletUtils.CircularBuffer);\n    await this.audioContext.audioWorklet.addModule(WorkletUtils.CircularBuffer);\n    return Promise.all(Object.keys(audioWorklets).map(key => this.audioContext.audioWorklet.addModule(audioWorklets[key])));\n  }\n\n  showGenericInput(position: Vector | DOMPoint, value: string, styles: Record<string, any>, attributes: Record<string, any>, callback: (value: string) => void) {\n    if (document.activeElement === this.genericInput) return;\n\n    Object.assign(this.genericInput.style, styles);\n    Object.assign(this.genericInput, attributes);\n\n    Object.assign(this.genericInput.style, {\n      left: (position.x + this.canvasDimensions.left) + 'px',\n      top: (position.y + this.canvasDimensions.top - 3) + 'px',\n      visibility: 'visible',\n      pointerEvents: 'all'\n    });\n    this.genericInput.value = value;\n    this.genericInput.onchange = () => callback(this.genericInput.value);\n    this.genericInput.focus();\n  }\n  changeParent(newParent: HTMLElement) {\n    this.registerObservers(newParent);\n  }\n  private updatePointer(id: number, screenPosition: Vector, realPosition: Vector) {\n    let pointer = this.pointers.find(pntr => pntr.id === id);\n    if (pointer) {\n      pointer.screenPosition = screenPosition;\n      pointer.realPosition = realPosition;\n    }\n  }\n  private handleZoom(zoomIn: boolean, origin: Vector, scaleDelta: number) {\n    if ((this._transform.a >= this.maxScale && zoomIn) || (this._transform.a <= this.minScale && !zoomIn)) return;\n    this.updateTransform(zoomIn ? scaleDelta : (1 / scaleDelta), origin, null);\n    this.call('scale', this.scale);\n  }\n  private handleGrouping(screenPosition: Vector) {\n    let hitGroup = this.getHitGroup(screenPosition);\n\n    let intersection;\n    if (hitGroup) {\n      let groupRealPos = hitGroup.position.transform(this._transform);\n      let nodeRealPos = this.currHitNode.position.transform(this._transform);\n\n      intersection = intersects(groupRealPos.x, groupRealPos.y,\n        groupRealPos.x + hitGroup.width * this.scale,\n        groupRealPos.y + hitGroup.height * this.scale,\n        nodeRealPos.x, nodeRealPos.y,\n        nodeRealPos.x + this.currHitNode.width * this.scale,\n        nodeRealPos.y + this.currHitNode.ui.height * this.scale\n      );\n    }\n\n    if (this.currHitNode.group) {\n      if (this.currHitNode.group !== hitGroup) {\n        let nodeIndex = this.currHitNode.group.nodes.findIndex(node => node.id === this.currHitNode.id);\n        this.currHitNode.group.nodes.splice(nodeIndex, 1);\n        this.currHitNode.group.nodeDeltas.splice(nodeIndex, 1);\n        this.currHitNode.group = null;\n      } else {\n        if (intersection !== ViewPort.INSIDE) {\n          let nodeIndex = this.currHitNode.group.nodes.findIndex(node => node.id === this.currHitNode.id);\n          this.currHitNode.group.nodes.splice(nodeIndex, 1);\n          this.currHitNode.group.nodeDeltas.splice(nodeIndex, 1);\n          this.currHitNode.group = null;\n        }\n      }\n    }\n\n    if (hitGroup) {\n      if (intersection === ViewPort.INSIDE) {\n        this.currHitNode.group = hitGroup;\n        hitGroup.nodes.push(this.currHitNode);\n        hitGroup.nodeDeltas.push(this.currHitNode.position.subtract(hitGroup.position));\n      }\n    }\n  }\n  private handleConnection(hitNode: Node, screenPosition: Vector, realPosition: Vector) {\n    if (!hitNode) {\n      this.floatingConnector.removeConnection();\n      return;\n    }\n    let hitTerminal = hitNode.getHitTerminal(\n      Color.rgbaToString(this._offUIContext.getImageData(screenPosition.x, screenPosition.y, 1, 1).data),\n      screenPosition.clone(),\n      realPosition.clone()\n    );\n    if (hitTerminal) hitNode.currHitTerminal = hitTerminal;\n    if (!hitTerminal) {\n      this.floatingConnector.removeConnection();\n      return;\n    }\n\n    let destination = hitNode.currHitTerminal;\n    if (!this.floatingConnector.canConnect(destination)) {\n      this.floatingConnector.removeConnection();\n      hitNode.currHitTerminal = null;\n    } else {\n      if (destination.type === TerminalType.OUT) {\n        this.floatingConnector.completeConnection(destination);\n        hitNode.currHitTerminal = null;\n      } else {\n        if (destination.connectors.length > 0) {\n          if (destination.connectors[0].start === this.floatingConnector.start) {\n            this.floatingConnector.removeConnection();\n            hitNode.currHitTerminal = null;\n            return;\n          }\n          let index = destination.connectors[0].start.connectors.indexOf(destination.connectors[0]);\n          let [oldConnector] = destination.connectors[0].start.connectors.splice(index, 1);\n          let [startTerm, endTerm] = [oldConnector.start, oldConnector.end];\n          this.currFlow.connectors.delete(oldConnector.id);\n          this.currFlow.executionGraph.disconnect(startTerm.node, endTerm.node);\n          oldConnector.start.onDisconnect(oldConnector, startTerm, endTerm);\n          oldConnector.end.onDisconnect(oldConnector, startTerm, endTerm);\n\n          this.floatingConnector.completeConnection(destination);\n          hitNode.currHitTerminal = null;\n        } else {\n          this.floatingConnector.completeConnection(destination);\n          hitNode.currHitTerminal = null;\n        }\n      }\n      this.floatingConnector = null;\n    }\n  }\n  private getRelativePosition(ev: PointerEvent | WheelEvent | MouseEvent) {\n    return new Vector(ev.clientX - this.canvasDimensions.left, ev.clientY - this.canvasDimensions.top);\n  }\n  private updateTransform(scale?: number, scaleOrigin?: Vector, translate?: Vector) {\n    if (scale) {\n      let realSpaceOrigin = scaleOrigin.transform(this.inverseTransform);\n      this._transform\n        .translateSelf(realSpaceOrigin.x, realSpaceOrigin.y)\n        .scaleSelf(scale, scale)\n        .translateSelf(-realSpaceOrigin.x, -realSpaceOrigin.y);\n    }\n    if (translate) {\n      this._transform.translateSelf(translate.x, translate.y);\n    }\n\n    this.inverseTransform = this._transform.inverse();\n\n    this._context.setTransform(this._transform);\n    this._offContext.setTransform(this._transform);\n    this._offUIContext.setTransform(this._transform);\n    this._offGroupContext.setTransform(this._transform);\n\n    this.call('transform', this);\n  }\n  translateBy(delta: Vector) {\n    this.updateTransform(null, null, delta);\n  }\n  scaleBy(scale: number, scaleOrigin: Vector) {\n    this.updateTransform(scale, scaleOrigin);\n  }\n  private addPointer(pointerId: number, position: Vector) {\n    this.pointers.push({\n      id: pointerId,\n      screenPosition: position,\n      realPosition: position.transform(this.inverseTransform)\n    });\n  }\n  private removePointer(pointers: Pointer[], ev: PointerEvent) {\n    pointers.splice(pointers.findIndex(pointer => pointer.id === ev.pointerId), 1);\n  }\n  private getHitNode(position: Vector): Node {\n    let rgbaString = Color.rgbaToString(this._offContext.getImageData(position.x, position.y, 1, 1).data);\n    return this.currFlow.nodeHitColors.get(rgbaString);\n  }\n  private getHitGroup(position: Vector): Group {\n    let rgbaString = Color.rgbaToString(this._offGroupContext.getImageData(position.x, position.y, 1, 1).data);\n    return this.currFlow.groupHitColors.get(rgbaString);\n  }\n  private clear() {\n    this._context.save();\n    this._context.setTransform(this.identity);\n    this._context.clearRect(0, 0, this.canvasDimensions.width, this.canvasDimensions.height);\n    this._context.restore();\n\n    this._offContext.save();\n    this._offContext.setTransform(this.identity);\n    this._offContext.clearRect(0, 0, this.canvasDimensions.width, this.canvasDimensions.height);\n    this._offContext.restore();\n\n    this._offUIContext.save();\n    this._offUIContext.setTransform(this.identity);\n    this._offUIContext.clearRect(0, 0, this.canvasDimensions.width, this.canvasDimensions.height);\n    this._offUIContext.restore();\n\n    this._offGroupContext.save();\n    this._offGroupContext.setTransform(this.identity);\n    this._offGroupContext.clearRect(0, 0, this.canvasDimensions.width, this.canvasDimensions.height);\n    this._offGroupContext.restore();\n  }\n\n  startGlobalTime() {\n    if (this.startTime < 0) {\n      this.startTime = performance.now();\n      this._startGlobalTime();\n      this.state = FlowConnectState.Running;\n      this.call('start', this);\n    }\n  }\n  private _startGlobalTime() {\n    this.call('tick', this);\n    this.timerId = window.requestAnimationFrame(this._startGlobalTime.bind(this));\n  }\n\n  stopGlobalTime() {\n    if (this.isRootFlowStopped()) {\n      cancelAnimationFrame(this.timerId);\n      this.startTime = -1;\n      this.state = FlowConnectState.Stopped;\n      this.call('tickreset', this);\n      this.call('stop', this);\n    }\n  }\n  private isRootFlowStopped(): boolean {\n    let root = this.currFlow;\n    while (true) {\n      if (root.parentFlow) root = root.parentFlow;\n      else return root.state === FlowState.Stopped;\n    }\n  }\n  private _render() {\n    this.clear();\n\n    this.currGroup && this.currGroup.render();\n    this.currFlow.render();\n    this.call('render', this);\n\n    this.frameId = window.requestAnimationFrame(this._render.bind(this));\n  }\n\n  createFlow(options: FlowOptions = { name: 'New Flow', rules: {}, terminalColors: {} }): Flow {\n    if (!options.rules) options.rules = {};\n    if (!options.terminalColors) options.terminalColors = {};\n\n    options.rules = { ...options.rules, ...DefaultRules() };\n    let flow = new Flow(this, options.name, options.rules, options.terminalColors);\n    this.flows.push(flow);\n\n    flow.on('start', () => this.startGlobalTime());\n    flow.on('stop', () => this.stopGlobalTime());\n\n    return flow;\n  }\n  render(flow: Flow) {\n    if (flow === this.currFlow) return;\n    if (this.currFlow) {\n      window.cancelAnimationFrame(this.frameId);\n      this.currFlow.deregisterListeners();\n    }\n    if (!this.rootFlow || !this.rootFlow.existsInFlow(flow)) {\n      this.rootFlow = flow;\n    }\n    this.currFlow = flow;\n    this._render();\n  }\n  /** Render the root flow of the flow-tree */\n  top() {\n    this.render(this.rootFlow);\n  }\n  /** Creates a flow from json\n   * @param json Json string with schema SerializedFlow\n   */\n  fromJson(json: string): Flow {\n    let data: SerializedFlow;\n    let flow: Flow = null;\n\n    try {\n      data = JSON.parse(json);\n      flow = Flow.deSerialize(this, data);\n    } catch (error) {\n      Log.error(error);\n    }\n    return flow;\n  }\n  toJson(flow: Flow): string {\n    let serializedFlow: SerializedFlow = flow.serialize();\n    try {\n      return JSON.stringify(serializedFlow, null);\n    } catch (error) {\n      Log.error(error);\n    }\n  }\n}\n\nexport enum FlowConnectState {\n  Stopped = 'Stopped',\n  Running = 'Running'\n}\n\n/** Default rules every Flow will have, for e.g. a string output can only be connected to string inputs.\n   *  ```javascript\n   *  {\n   *    'string': ['string'],\n   *    'number': ['number'],\n   *    'boolean': ['boolean'],\n   *    'file': ['file'],\n   *    'event': ['event'], ...\n   *  }\n   *  ```\n   */\nlet DefaultRules: () => Rules = () => ({\n  'string': ['string', 'any'],\n  'number': ['number', 'audioparam', 'any'],\n  'boolean': ['boolean', 'any'],\n  'array': ['array', 'any'],\n  'file': ['file', 'any'],\n  'event': ['event', 'any'],\n  'vector': ['vector', 'any'],\n  'array-buffer': ['array-buffer', 'any'],\n  'audio': ['audio', 'audioparam'],\n  'audioparam': ['audioparam'],\n  'audio-buffer': ['audio-buffer', 'any'],\n  'any': ['any']\n});\n\nexport * from './common/index';\nexport * from './core/index';\nexport { Constant } from './resource/constants';\nexport * from './ui/index';\nexport * from './utils/index';\n","export const WorkletUtils = {\n  CircularBuffer: URL.createObjectURL(new Blob([\n    `export default class CircularBuffer {\n      constructor(bufferLength, noOfChannels) {\n        this.noOfChannels = noOfChannels;\n        this.bufferLength = bufferLength;\n\n        this.read = this.write = this.frames = 0;\n        this.channels = [];\n        for (let i = 0; i < this.noOfChannels; ++i) this.channels[i] = new Float32Array(bufferLength);\n      }\n      pushBlock(buffer) {\n        let sourceLength = buffer[0].length;\n        for (let i = 0; i < sourceLength; ++i) {\n          let write = (this.write + i) % this.bufferLength;\n          for (let c = 0; c < this.noOfChannels; ++c) {\n            this.channels[c][write] = buffer[c][i];\n          }\n        }\n        this.write += sourceLength;\n        if (this.write >= this.bufferLength) this.write = 0;\n        this.frames += sourceLength;\n        if (this.frames > this.bufferLength) this.frames = this.bufferLength;\n      }\n      popBlock(buffer) {\n        if (this.frames === 0) return;\n        let destinationLength = buffer[0].length;\n        for (let i = 0; i < destinationLength; ++i) {\n          let read = (this.read + i) % this.bufferLength;\n          for (let c = 0; c < this.noOfChannels; ++c) {\n            buffer[c][i] = this.channels[c][read];\n          }\n        }\n        this.read += destinationLength;\n        if (this.read >= this.bufferLength) this.read = 0;\n        this.frames -= destinationLength;\n        if (this.frames < 0) this.frames = 0;\n      }\n    }`\n  ], { type: 'application/javascript' })),\n}\nexport const generateAudioWorklets = (utilsFileName: string) => {\n  let audioWorklets: Record<string, string> = {\n    // Creates a AudioWorkletProcessor to setup custom AudioParams for AudioBufferSourceNode's automation (because of their fire-forget-destroy behaviour)\n    Worklet_ProxyParamForSource: URL.createObjectURL(new Blob([\n      `registerProcessor('proxy-param-for-source', class ProxyParamForSource extends AudioWorkletProcessor {\n          static get parameterDescriptors() {\n            return [{\n              name: 'detune',\n              defaultValue: 0,\n              minValue: -2400,\n              maxValue: 2400,\n              automationRate: 'k-rate'\n            }, {\n              name: 'playbackRate',\n              defaultValue: 1,\n              minValue: 0.25,\n              maxValue: 3,\n              automationRate: 'k-rate'\n            }]\n          }\n          process(inputs, outputs, parameters) {\n            outputs[0].forEach(channel => {\n              for (let i = 0; i < channel.length; i++) {\n                // wierd bug, the detune is off by 1200 cents, have to offset this anomaly\n                channel[i] = (parameters['detune'].length > 1 ? parameters['detune'][i] : parameters['detune'][0]) - 1200;\n              }\n            });\n            outputs[1].forEach(channel => {\n              for (let i = 0; i < channel.length; i++) {\n                channel[i] = (parameters['playbackRate'].length > 1 ? parameters['playbackRate'][i] : parameters['playbackRate'][0]);\n              }\n            });\n            return true;\n          }\n        })`\n    ], { type: 'application/javascript' })),\n\n    // Same as above, but not specifically for AudioBufferSourceNodes, this is more general purpose\n    Worklet_ProxyParam: URL.createObjectURL(new Blob([\n      `registerProcessor('proxy-param', class ProxyParam extends AudioWorkletProcessor {\n          static get parameterDescriptors() {\n            return [{\n              name: 'param',\n              defaultValue: 0,\n              minValue: -340282346638528859811704183484516925439,\n              maxValue: 340282346638528859811704183484516925439,\n              automationRate: 'k-rate'\n            }]\n          }\n\n          min = -340282346638528859811704183484516925439;\n          max =  340282346638528859811704183484516925439;\n          offset = 0;\n          constructor(...args) {\n            super(...args);\n            this.port.onmessage = (e) => {\n              switch(e.data.type) {\n                case 'set-range': {\n                  this.min = e.data.value.min;\n                  this.max = e.data.value.max;\n                  break;\n                }\n                case 'set-offset': {\n                  this.offset = -e.data.value\n                  break;\n                }\n                default: break;\n              }\n            }\n          }\n          clamp(value) { return Math.min(Math.max(value, this.min), this.max); }\n          process(inputs, outputs, parameters) {\n            outputs[0].forEach(channel => {\n              for (let i = 0; i < channel.length; i++) {\n                channel[i] = this.clamp((parameters['param'].length > 1 ? parameters['param'][i] : parameters['param'][0]) + this.offset);\n              }\n            });\n            return true;\n          }\n        })`\n    ], { type: 'application/javascript' })),\n\n    // This one is used to only peak at the audio data flowing through this node, mainly for debugging purposes\n    Worklet_Debug: URL.createObjectURL(new Blob([\n      `registerProcessor('debug', class Debug extends AudioWorkletProcessor {\n          throttle = 1000;\n          lastPeak = -Infinity;\n          constructor(...args) {\n            super(...args);\n            this.port.onmessage = (e) => {\n              this.throttle = e.data;\n            }\n          }\n          process(inputs, outputs, parameters) {\n            if (Date.now() - this.lastPeak > this.throttle) {\n              let data = {\n                inputs: inputs.map(input => input.length),\n                outputs: outputs.map(output => output.length)\n              };\n              this.port.postMessage(data);\n              this.lastPeak = Date.now();\n            }\n            let input = inputs[0];\n            let output = outputs[0]\n            for (let i = 0 ; i < input.length ; i+=1) {\n              for(let c = 0 ; c < input[i].length ; c+=1) {\n                output[i][c] = input[i][c];\n              }\n            }\n            return true;\n          }\n        })`\n    ], { type: 'application/javascript' })),\n\n    Worklet_MoogEffect: URL.createObjectURL(new Blob([\n      `import CircularBuffer from '${utilsFileName}'\n      registerProcessor('moog-effect', class MoogEffect extends AudioWorkletProcessor {\n      cutoff = 0.065;\n      resonance = 3.5;\n      f = 0; inputFactor = 0; fb = 0;\n\n      constructor(options) {\n        super();\n        this.bufferSize = options.processorOptions.bufferSize;\n\n        this.setParams();\n        this.port.onmessage = (e) => {\n          this.cutoff = e.data.cutoff;\n          this.resonance = e.data.resonance;\n          this.setParams();\n        }\n      }\n      setParams() {\n        this.f = this.cutoff * 1.16;\n        this.inputFactor = 0.35013 * (this.f * this.f) * (this.f * this.f);\n        this.fb = this.resonance * (1.0 - 0.15 * this.f * this.f);\n      }\n      channelsChanged(newNoOfChannels) {\n        this.channelCount = newNoOfChannels;\n        this.inputBuffer = new CircularBuffer(this.bufferSize, this.channelCount);\n        this.outputBuffer = new CircularBuffer(this.bufferSize, this.channelCount);\n        this.in1 = new Array(this.channelCount).fill(0);\n        this.in2 = new Array(this.channelCount).fill(0);\n        this.in3 = new Array(this.channelCount).fill(0);\n        this.in4 = new Array(this.channelCount).fill(0);\n        this.out1 = new Array(this.channelCount).fill(0);\n        this.out2 = new Array(this.channelCount).fill(0);\n        this.out3 = new Array(this.channelCount).fill(0);\n        this.out4 = new Array(this.channelCount).fill(0);\n      }\n\n      _process(input, output) {\n        for (let c = 0; c < input.length; ++c) {\n          for (let i = 0; i < input[c].length; ++i) {\n            input[c][i] -= this.out4[c] * this.fb;\n            input[c][i] *= this.inputFactor;\n            this.out1[c] = input[c][i] + 0.3 * this.in1[c] + (1 - this.f) * this.out1[c];\n            this.in1[c] = input[c][i];\n            this.out2[c] = this.out1[c] + 0.3 * this.in2[c] + (1 - this.f) * this.out2[c];\n            this.in2[c] = this.out1[c];\n            this.out3[c] = this.out2[c] + 0.3 * this.in3[c] + (1 - this.f) * this.out3[c];\n            this.in3[c] = this.out2[c];\n            this.out4[c] = this.out3[c] + 0.3 * this.in4[c] + (1 - this.f) * this.out4[c];\n            this.in4[c] = this.out3[c];\n            output[c][i] = this.out4[c];\n          }\n        }\n      }\n      process(inputs, outputs, parameters) {\n        let input = inputs[0], output = outputs[0];\n        if (input.length === 0) return true;\n\n        if (!this.prevChannelCount || this.prevChannelCount !== inputs[0].length) {\n          this.channelsChanged(inputs[0].length);\n          this.prevChannelCount = inputs[0].length;\n        }\n\n        this.inputBuffer.pushBlock(input);\n        if (this.inputBuffer.frames >= this.bufferSize) {\n          let tmpInBuffer = [], tmpOutBuffer = [];\n          for (let i = 0; i < this.channelCount; ++i) {\n            tmpInBuffer[i] = new Float32Array(this.bufferSize);\n            tmpOutBuffer[i] = new Float32Array(this.bufferSize);\n          }\n\n          this.inputBuffer.popBlock(tmpInBuffer);\n          this._process(tmpInBuffer, tmpOutBuffer);\n          this.outputBuffer.pushBlock(tmpOutBuffer);\n        }\n        this.outputBuffer.popBlock(output);\n        return true;\n      }\n    })`\n    ], { type: 'application/javascript' })),\n\n    Worklet_BitcrusherEffect: URL.createObjectURL(new Blob([\n      `import CircularBuffer from '${utilsFileName}'\n      registerProcessor('bitcrusher-effect', class BitcrusherEffect extends AudioWorkletProcessor {\n      bits = 4;\n      normFreq = 0.1;\n      step = 0;\n\n      constructor(options) {\n        super();\n        this.bufferSize = options.processorOptions.bufferSize;\n\n        this.setParams();\n        this.port.onmessage = (e) => {\n          this.bits = e.data.bits;\n          this.normFreq = e.data.normFreq;\n          this.setParams();\n        }\n      }\n      setParams() {\n        this.step = Math.pow(1 / 2, this.bits);\n      }\n      channelsChanged(newNoOfChannels) {\n        this.channelCount = newNoOfChannels;\n        this.inputBuffer = new CircularBuffer(this.bufferSize, this.channelCount);\n        this.outputBuffer = new CircularBuffer(this.bufferSize, this.channelCount);\n        this.phaser = new Array(this.channelCount).fill(0);\n        this.last = new Array(this.channelCount).fill(0);\n      }\n\n      _process(input, output) {\n        for (let c = 0; c < input.length; ++c) {\n          for (let i = 0; i < input[c].length; ++i) {\n            this.phaser[c] += this.normFreq;\n            if (this.phaser[c] >= 1.0) {\n              this.phaser[c] -= 1.0;\n              this.last[c] = this.step * Math.floor(input[c][i] / this.step + 0.5);\n            }\n            output[c][i] = this.last[c];\n          }\n        }\n      }\n      process(inputs, outputs, parameters) {\n        let input = inputs[0], output = outputs[0];\n        if (input.length === 0) return true;\n        if (!this.prevChannelCount || this.prevChannelCount !== inputs[0].length) {\n          this.channelsChanged(inputs[0].length);\n          this.prevChannelCount = inputs[0].length;\n        }\n        this.inputBuffer.pushBlock(input);\n        if (this.inputBuffer.frames >= this.bufferSize) {\n          let tmpInBuffer = [], tmpOutBuffer = [];\n          for (let i = 0; i < this.channelCount; ++i) {\n            tmpInBuffer[i] = new Float32Array(this.bufferSize);\n            tmpOutBuffer[i] = new Float32Array(this.bufferSize);\n          }\n          this.inputBuffer.popBlock(tmpInBuffer);\n          this._process(tmpInBuffer, tmpOutBuffer);\n          this.outputBuffer.pushBlock(tmpOutBuffer);\n        }\n        this.outputBuffer.popBlock(output);\n        return true;\n      }\n    })`\n    ], { type: 'application/javascript' })),\n\n    Worklet_LFO: URL.createObjectURL(new Blob([\n      `registerProcessor('lfo', class LFO extends AudioWorkletProcessor {\n      oscillation = 0.3;\n      offset = 0.85;\n      phaseInc = 0;\n      phase = 0;\n\n      constructor(options) {\n        super();\n        this.sampleRate = options.processorOptions.sampleRate;\n\n        this.port.onmessage = (e) => {\n          switch(e.data.type) {\n            case 'set-oscillation': { this.oscillation = e.data.value; break; }\n            case 'set-offset': { this.offset = e.data.value; break; }\n            case 'set-phase': { this.phase = e.data.value; break; }\n            case 'set-frequency': { this.phaseInc = 2 * Math.PI * e.data.value * 128 / this.sampleRate; break; }\n            case 'set-all': {\n              this.oscillation = e.data.value.oscillation;\n              this.offset = e.data.value.offset;\n              this.phase = e.data.value.phase;\n              this.phaseInc = 2 * Math.PI * e.data.value.frequency * 128 / this.sampleRate;\n              break;\n            }\n            default: return;\n          }\n        }\n      }\n      process(inputs, outputs, parameters) {\n        let output = outputs[0][0];\n\n        for (let i = 0; i < output.length; ++i) {\n          this.phase += this.phaseInc;\n          if (this.phase > 2 * Math.PI) this.phase = 0;\n          output[i] = this.offset + this.oscillation * Math.sin(this.phase);\n        }\n\n        return true;\n      }\n    })`\n    ], { type: 'application/javascript' })),\n\n    Worklet_Noise: URL.createObjectURL(new Blob([\n      `registerProcessor('noise', class Noise extends AudioWorkletProcessor {\n      type = 'white';\n      types = ['white', 'pink', 'brownian'];\n\n      constructor(options) {\n        super();\n        this.port.onmessage = (e) => {\n          if (!this.types.includes(e.data)) this.type = 'white';\n          else this.type = e.data;\n        }\n\n        this.generate = {\n          'white': (output) => {\n            for (let i = 0; i < output.length; ++i) output[i] = Math.random() * 2 - 1;\n          },\n          'pink': (output) => {\n            let b0, b1, b2, b3, b4, b5, b6;\n            b0 = b1 = b2 = b3 = b4 = b5 = b6 = 0.0;\n\n            for (let i = 0; i < output.length; ++i) {\n              let white = Math.random() * 2 - 1;\n              b0 = 0.99886 * b0 + white * 0.0555179;\n              b1 = 0.99332 * b1 + white * 0.0750759;\n              b2 = 0.96900 * b2 + white * 0.1538520;\n              b3 = 0.86650 * b3 + white * 0.3104856;\n              b4 = 0.55000 * b4 + white * 0.5329522;\n              b5 = -0.7616 * b5 - white * 0.0168980;\n              output[i] = b0 + b1 + b2 + b3 + b4 + b5 + b6 + white * 0.5362;\n              output[i] *= 0.11;\n              b6 = white * 0.115926;\n            }\n          },\n          'brownian': (output) => {\n            let lastOut = 0.0;\n            for (let i = 0; i < output.length; i++) {\n              let white = Math.random() * 2 - 1;\n              output[i] = (lastOut + (0.02 * white)) / 1.02;\n              lastOut = output[i];\n              output[i] *= 3.5;\n            }\n          }\n        }\n      }\n      process(inputs, outputs, parameters) {\n        this.generate[this.type](outputs[0][0]);\n        return true;\n      }\n    })`\n    ], { type: 'application/javascript' })),\n\n    // Just a normal proxy, outputs the inputs as it is, used for seamless connections of SourceNodes\n    Worklet_Proxy: URL.createObjectURL(new Blob([\n      `registerProcessor('proxy', class Proxy extends AudioWorkletProcessor {\n\n      constructor() { super(); }\n      process(inputs, outputs, parameters) {\n        inputs.forEach((input, index) => input.forEach((channel, cIndex) => {\n          outputs[index][cIndex].set(channel);\n        }));\n        return true;\n      }\n    })`\n    ], { type: 'application/javascript' })),\n  }\n\n  return audioWorklets;\n}\n","export class Constant {\n  static TAU = 2 * Math.PI;\n  static SIN_60 = 0.866;\n  static PHI = 1.6180339887498948;\n}\n","export const fileIcon = \"data:image/svg+xml;charset=UTF-8,%3c?xml version='1.0' encoding='iso-8859-1'?%3e%3c!-- --%3e%3csvg version='1.1' id='Capa_1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' viewBox='0 0 477.867 477.867' style='enable-background:new 0 0 477.867 477.867;' xml:space='preserve'%3e%3cg%3e%3cg%3e%3cpath d='M324.267,119.467c-9.426,0-17.067-7.641-17.067-17.067V0H102.4C74.123,0,51.2,22.923,51.2,51.2v375.467 c0,28.277,22.923,51.2,51.2,51.2h273.067c28.277,0,51.2-22.923,51.2-51.2v-307.2H324.267z'/%3e%3c/g%3e%3c/g%3e%3cg%3e%3cg%3e%3cpolygon points='341.333,10.001 341.333,85.333 416.666,85.333 '/%3e%3c/g%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3c/svg%3e\";\nexport const imageIcon = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAQAAAAAYLlVAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QAAKqNIzIAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAAHdElNRQfjDAMLKTYM6GTwAAACaElEQVRo3u2ZP2gUQRSHv90zGKMY/IPxBBGSEGKUixGsFFSQnAZEbUQrEXuvCIiIiKWCbbQXLBRsgpVgockhIhYJGg0oJEWwuNOYYJI7E29scufuZndvNjs30+yb5vbd2/l9Ozvv7cyuRdU6ybATPVZknK9Ox2FGEZrbCH1V+dMsapcXCBbJgkWaL2zVNPRem6M7xV1OGpKHZrCYpMsYAExalNhYO8yzpEF0E0drv8u4pkW7lqtud2raWiRDLAEwDrBBOrKFixxnFwXe8JQFdQhyWZBlxhH3nYEYiq4skAMYYMVTx1c4pw+glaLPo+Qn21UAyEzCq+zw8W7jWozbUDMZgFMR/coBdgf407oAZiP6lQPkA/yjKgBksmAfJZ8sKNOxTsXIWTDNLR/vHb6FnJOihzZVIwBwk2VXGbqNFdLn+dW6+ZYD9UZAfkGynyE+UuQTj3y7/W/9Dth5TqgCkLW9FFx9lrigE6CJ/JrpuswVfQBDvluQCtf1AFwO3AVVuNF4gIP8Dt2K3WsswBYm6u4GH2I3CsDiWV15geAJTY0BGJSSFwiG6YkCkJYqqMf4Iw0gGJMDaOEBPxAIZsiFrp7bXAvWqC0AYA/vXf+8C7w9KV7GkA8AyDC9JnCOS74A92PJ+wKcYT4g+DGbPfJnqagGyPE3JHyCjEO+k9mY8h6AroBa7mxL5Fblm/kQW94DMCZ50nMOcYRXCuSFhVh38VFixrfnCUACkAAkAAlAApAA2JSN6pdtpowCTNm8MAowbJHmM62G5H/RDZA19Ol2gf4qSR8j2uVf0ws43vZ10Kvt832B8eprzn/ptwK4iL9QVQAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxOS0xMi0wM1QxMTo0MTo1NCswMDowME8knnIAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTktMTItMDNUMTE6NDE6NTQrMDA6MDA+eSbOAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAABJRU5ErkJggg==\";\n","import { Terminal, TerminalType, SerializedTerminal } from \"../core/terminal\";\nimport { Node } from \"../core/node\";\nimport { SerializedVector, Vector } from \"../core/vector\";\nimport { get } from \"../utils/utils\";\nimport { SerializedUINode, UINode, UINodeStyle, UIType } from \"./ui-node\";\nimport { Serializable } from \"../common/interfaces\";\nimport { Color } from \"../core/color\";\nimport { FlowState } from \"../core/flow\";\nimport { Constant } from \"../resource/constants\";\n\nexport class Slider2D extends UINode implements Serializable {\n  private _value: Vector;\n  private thumbHitColor: string;\n  offThumbCanvas: OffscreenCanvas | HTMLCanvasElement;\n  private offThumbContext: OffscreenCanvasRenderingContext2D | CanvasRenderingContext2D;\n  private pointDiameter: number = 20;\n\n  get value(): Vector {\n    if (this.propName) return this.getProp();\n    return this._value;\n  }\n  set value(value: Vector) {\n    value = value.clamp(0, 1);\n\n    let oldVal = this.value;\n    let newVal = value;\n\n    if (this.propName) this.setProp(newVal);\n    else {\n      this._value = newVal;\n    }\n    this.renderOffThumb();\n\n    if (this.node.flow.state !== FlowState.Stopped) this.call('change', this, oldVal, newVal);\n  }\n\n  constructor(\n    node: Node,\n    options: Slider2DOptions = DefaultSlider2DOptions(node)\n  ) {\n    super(node, Vector.Zero(), UIType.Slider2D, {\n      draggable: true,\n      style: options.style ? { ...DefaultSlider2DStyle(), ...options.style } : DefaultSlider2DStyle(),\n      propName: options.propName,\n      input: options.input && (typeof options.input === 'boolean'\n        ? new Terminal(node, TerminalType.IN, 'vector', '', {})\n        : Terminal.deSerialize(node, options.input)),\n      output: options.output && (typeof options.output === 'boolean'\n        ? new Terminal(node, TerminalType.OUT, 'vector', '', {})\n        : Terminal.deSerialize(node, options.output)),\n      id: options.id,\n      hitColor: options.hitColor\n    });\n\n    this.height = get(options.height, this.node.style.rowHeight * 4);\n    this._value = this.propName ? this.getProp() : get(options.value, new Vector(.5, .5));\n    this._value.clampInPlace(0, 1);\n\n    if (this.input) {\n      this.input.on('connect', (_, connector) => {\n        if (connector.data) this.value = connector.data;\n      });\n      this.input.on('data', (_, data) => {\n        if (data) this.value = data;\n      });\n    }\n    if (this.output) this.output.on('connect', (_, connector) => connector.data = this.value);\n\n    this.node.on('process', () => {\n      if (this.output) this.output.setData(this.value);\n    });\n\n    this.thumbHitColor = Color.Random().hexValue;\n    if (typeof OffscreenCanvas !== 'undefined') {\n      this.offThumbCanvas = new OffscreenCanvas(this.width, this.height);\n    } else {\n      this.offThumbCanvas = document.createElement('canvas');\n      this.offThumbCanvas.width = this.width;\n      this.offThumbCanvas.height = this.height;\n    }\n    this.offThumbContext = this.offThumbCanvas.getContext('2d');\n    this.renderOffThumb();\n  }\n\n  renderOffThumb() {\n    let [width, height] = [this.width - this.pointDiameter, this.height - this.pointDiameter];\n    this.offThumbContext.clearRect(0, 0, width, height);\n\n    let coord = new Vector(this.value.x, 1 - this.value.y).multiply(width, height).add(this.pointDiameter / 2);\n    this.offThumbContext.fillStyle = this.thumbHitColor;\n    this.offThumbContext.beginPath();\n    this.offThumbContext.arc(coord.x, coord.y, this.pointDiameter / 2, 0, Constant.TAU);\n    this.offThumbContext.fill();\n  }\n\n  paint(): void {\n    let context = this.node.context;\n\n    context.fillStyle = this.style.backgroundColor;\n    context.strokeStyle = this.style.borderColor;\n    context.lineWidth = this.style.borderWidth;\n    context.fillRect(this.position.x, this.position.y, this.width, this.height);\n    context.strokeRect(this.position.x, this.position.y, this.width, this.height);\n\n    let [width, height] = [this.width - this.pointDiameter, this.height - this.pointDiameter];\n    let point = new Vector(this.value.x, 1 - this.value.y)\n      .multiplyInPlace(width, height)\n      .addInPlace(this.position)\n      .addInPlace(this.pointDiameter / 2);\n\n    context.fillStyle = this.style.thumbColor;\n    context.beginPath();\n    context.arc(point.x, point.y, this.pointDiameter / 2, 0, Constant.TAU);\n    context.fill();\n  }\n  paintLOD1() {\n    let context = this.context;\n    context.strokeStyle = '#000';\n    context.fillStyle = this.style.backgroundColor;\n    context.strokeRect(this.position.x, this.position.y, this.width, this.height);\n    context.fillRect(this.position.x, this.position.y, this.width, this.height);\n  }\n  offPaint(): void {\n    this.offUIContext.fillStyle = this.hitColor.hexValue;\n    this.offUIContext.fillRect(this.position.x, this.position.y, this.width, this.height);\n  }\n\n  reflow(): void {\n    let [newWidth, newHeight] = [this.width, this.height];\n\n    if (\n      Math.floor(this.offThumbCanvas.width) !== Math.floor(newWidth)\n      || Math.floor(this.offThumbCanvas.height) !== Math.floor(newHeight)\n    ) {\n\n      this.offThumbCanvas.width = newWidth;\n      this.offThumbCanvas.height = newHeight;\n      this.renderOffThumb();\n    }\n\n    if (this.input) {\n      this.input.position.assign(\n        this.node.position.x - this.node.style.terminalStripMargin - this.input.style.radius,\n        this.position.y + this.height / 2\n      );\n    }\n    if (this.output) {\n      this.output.position.assign(\n        this.node.position.x + this.node.width + this.node.style.terminalStripMargin + this.output.style.radius,\n        this.position.y + this.height / 2\n      );\n    }\n  }\n  getHitPoint(realPosition: Vector): boolean {\n    let coord = realPosition.subtract(this.position);\n    let hitColor = Color.rgbaToHex(this.offThumbContext.getImageData(coord.x, coord.y, 1, 1).data);\n    return this.thumbHitColor === hitColor;\n  }\n  movePoint(realPosition: Vector) {\n    let [width, height] = [this.width - this.pointDiameter, this.height - this.pointDiameter];\n\n    this._value = realPosition\n      .clamp(\n        this.position.x + this.pointDiameter / 2, this.position.x + this.width - this.pointDiameter / 2,\n        this.position.y + this.pointDiameter / 2, this.position.y + this.height - this.pointDiameter / 2\n      )\n      .subtractInPlace(this.position.add(this.pointDiameter / 2))\n      .clampInPlace(0, width, 0, height)\n      .normalizeInPlace(0, width, 0, height);\n\n    this.value = new Vector(this._value.x, 1 - this._value.y);\n  }\n\n  onPropChange(_oldVal: any, newVal: any) {\n    this._value = newVal;\n    this.renderOffThumb();\n\n    this.output && this.output.setData(this.value);\n  }\n  onOver(screenPosition: Vector, realPosition: Vector): void {\n    if (this.disabled) return;\n\n    this.call('over', this, screenPosition, realPosition);\n  }\n\n  private isHit: boolean;\n  onDown(screenPosition: Vector, realPosition: Vector): void {\n    if (this.disabled) return;\n\n    this.call('down', this, screenPosition, realPosition);\n  }\n  onUp(screenPosition: Vector, realPosition: Vector): void {\n    if (this.disabled) return;\n\n    if (this.node.flow.state !== FlowState.Stopped) this.call('change', this, null, this._value);\n    this.isHit = false;\n\n    this.call('up', this, screenPosition, realPosition);\n  }\n  onClick(screenPosition: Vector, realPosition: Vector): void {\n    if (this.disabled) return;\n\n    this.call('click', this, screenPosition, realPosition);\n  }\n  onDrag(screenPosition: Vector, realPosition: Vector): void {\n    if (this.disabled) return;\n\n    this.movePoint(realPosition);\n\n    this.call('drag', this, screenPosition, realPosition);\n  }\n  onEnter(screenPosition: Vector, realPosition: Vector) {\n    if (this.disabled) return;\n\n    this.call('enter', this, screenPosition, realPosition);\n  }\n  onExit(screenPosition: Vector, realPosition: Vector) {\n    if (this.disabled) return;\n\n    if (this.isHit) {\n      this.movePoint(realPosition);\n      if (this.node.flow.state !== FlowState.Stopped) this.call('change', this, null, this._value);\n    }\n    this.isHit = false;\n\n    this.call('exit', this, screenPosition, realPosition);\n  }\n  onWheel(direction: boolean, screenPosition: Vector, realPosition: Vector) {\n    if (this.disabled) return;\n\n    this.call('wheel', this, direction, screenPosition, realPosition);\n  }\n  onContextMenu(): void {\n    if (this.disabled) return;\n  }\n\n  serialize(): SerializedSlider2D {\n    return {\n      value: this.value.serialize(),\n      propName: this.propName,\n      input: this.input ? this.input.serialize() : null,\n      output: this.output ? this.output.serialize() : null,\n      height: this.height,\n      style: this.style,\n      id: this.id,\n      hitColor: this.hitColor.serialize(),\n      type: this.type,\n      childs: []\n    }\n  }\n  static deSerialize(node: Node, data: SerializedSlider2D) {\n    return new Slider2D(node, {\n      value: Vector.deSerialize(data.value),\n      propName: data.propName,\n      input: data.input,\n      output: data.output,\n      height: data.height,\n      style: data.style,\n      id: data.id,\n      hitColor: Color.deSerialize(data.hitColor)\n    });\n  }\n}\n\nexport interface Slider2DStyle extends UINodeStyle {\n  backgroundColor?: string,\n  thumbColor?: string\n  borderColor?: string,\n  borderWidth?: number\n}\nlet DefaultSlider2DStyle = () => {\n  return {\n    backgroundColor: '#666',\n    thumbColor: '#fff',\n    borderColor: '#000',\n    borderWidth: 1\n  }\n}\n\nexport interface SerializedSlider2D extends SerializedUINode {\n  value: SerializedVector,\n  height: number\n}\n\ninterface Slider2DOptions {\n  value?: Vector,\n  propName?: string,\n  input?: boolean | SerializedTerminal,\n  output?: boolean | SerializedTerminal,\n  height?: number,\n  style?: Slider2DStyle,\n  id?: string,\n  hitColor?: Color\n}\nlet DefaultSlider2DOptions = (node: Node): Slider2DOptions => {\n  return {\n    height: node.style.rowHeight * 4\n  }\n};\n","import { Node } from \"../core/node\";\nimport { Terminal, TerminalType, SerializedTerminal } from '../core/terminal';\nimport { Vector } from \"../core/vector\";\nimport { Label } from \"./label\";\nimport { SerializedUINode, UINode, UIType, UINodeStyle } from './ui-node';\nimport { Serializable } from \"../common/interfaces\";\nimport { Color } from \"../core/color\";\nimport { Align } from \"../common/enums\";\nimport { get } from \"../utils/utils\";\n\nexport class Button extends UINode implements Serializable {\n  label: Label;\n\n  constructor(\n    node: Node,\n    public text: string,\n    options: ButtonOptions = DefaultButtonOptions(node)\n  ) {\n    super(node, Vector.Zero(), UIType.Button, {\n      style: options.style ? { ...DefaultButtonStyle(), ...options.style } : DefaultButtonStyle(),\n      input: options.input && (typeof options.input === 'boolean'\n        ? new Terminal(node, TerminalType.IN, 'event', '', {})\n        : new Terminal(node, options.input.type, options.input.dataType, options.input.name, {\n          style: options.input.style, id: options.input.id, hitColor: Color.deSerialize(options.input.hitColor)\n        })),\n      output: options.output && (typeof options.output === 'boolean'\n        ? new Terminal(node, TerminalType.OUT, 'event', '', {})\n        : Terminal.deSerialize(node, options.output)),\n      id: options.id,\n      hitColor: options.hitColor\n    });\n\n    if (this.input) this.input.on('event', () => this.call('click', this));\n    this.height = get(options.height, this.node.style.rowHeight + 2 * this.style.padding);\n\n    this.label = new Label(this.node, text, {\n      style: {\n        fontSize: this.style.fontSize,\n        font: this.style.font,\n        align: Align.Center,\n        color: this.style.color\n      },\n      height: this.height\n    });\n    this.label.on('click', (_node: Node, position: Vector) => this.call('click', this, position));\n    /* this.label.on('enter', () => this.node.flow.flowConnect.cursor = 'pointer');\n    this.label.on('exit', () => this.node.flow.flowConnect.cursor = 'unset'); */\n    this.children.push(this.label);\n  }\n\n  paint(): void {\n    Object.assign(this.context, {\n      fillStyle: this.style.backgroundColor,\n      shadowColor: this.style.shadowColor,\n      shadowBlur: this.style.shadowBlur,\n      shadowOffsetX: this.style.shadowOffset.x,\n      shadowOffsetY: this.style.shadowOffset.y\n    })\n    this.context.strokeRect(this.position.x, this.position.y, this.width, this.height);\n    this.context.fillRect(this.position.x, this.position.y, this.width, this.height);\n  }\n  paintLOD1() {\n    this.context.strokeStyle = '#000';\n    this.paint();\n    this.context.strokeRect(this.position.x, this.position.y, this.width, this.height);\n  }\n  offPaint(): void {\n    this.offUIContext.fillStyle = this.hitColor.hexValue;\n    this.offUIContext.fillRect(this.position.x, this.position.y, this.width, this.height);\n  }\n\n  reflow(): void {\n    this.label.position = this.position;\n    this.label.height = this.height;\n    this.label.width = this.width;\n\n    if (this.input) {\n      this.input.position.assign(\n        this.node.position.x - this.node.style.terminalStripMargin - this.input.style.radius,\n        this.position.y + this.height / 2\n      );\n    }\n    if (this.output) {\n      this.output.position.assign(\n        this.node.position.x + this.node.width + this.node.style.terminalStripMargin + this.output.style.radius,\n        this.position.y + this.height / 2\n      );\n    }\n  }\n\n  onPropChange() { /**/ }\n  onOver(screenPosition: Vector, realPosition: Vector): void {\n    if (this.disabled) return;\n\n    this.call('over', this, screenPosition, realPosition);\n  }\n  onDown(screenPosition: Vector, realPosition: Vector): void {\n    if (this.disabled) return;\n\n    this.call('down', this, screenPosition, realPosition);\n  }\n  onUp(screenPosition: Vector, realPosition: Vector): void {\n    if (this.disabled) return;\n\n    this.call('up', this, screenPosition, realPosition);\n  }\n  onClick(screenPosition: Vector, realPosition: Vector): void {\n    if (this.disabled) return;\n\n    this.call('click', this, screenPosition, realPosition);\n  }\n  onDrag(screenPosition: Vector, realPosition: Vector): void {\n    if (this.disabled) return;\n\n    this.call('drag', this, screenPosition, realPosition);\n  }\n  onEnter(screenPosition: Vector, realPosition: Vector) {\n    if (this.disabled) return;\n\n    this.call('enter', this, screenPosition, realPosition);\n  }\n  onExit(screenPosition: Vector, realPosition: Vector) {\n    if (this.disabled) return;\n\n    this.call('exit', this, screenPosition, realPosition);\n  }\n  onWheel(direction: boolean, screenPosition: Vector, realPosition: Vector) {\n    if (this.disabled) return;\n\n    this.call('wheel', this, direction, screenPosition, realPosition);\n  }\n  onContextMenu(): void {\n    if (this.disabled) return;\n\n    this.call('rightclick', this);\n  }\n\n  serialize(): SerializedButton {\n    return {\n      text: this.text,\n      propName: this.propName,\n      input: this.input ? this.input.serialize() : null,\n      output: this.output ? this.output.serialize() : null,\n      height: this.height,\n      id: this.id,\n      style: this.style,\n      hitColor: this.hitColor.serialize(),\n      type: this.type,\n      childs: []\n    }\n  }\n  static deSerialize(node: Node, data: SerializedButton): Button {\n    return new Button(node, data.text, {\n      input: data.input,\n      output: data.output,\n      height: data.height,\n      style: data.style,\n      id: data.id,\n      hitColor: Color.deSerialize(data.hitColor)\n    });\n  }\n}\n\nexport interface ButtonStyle extends UINodeStyle {\n  backgroundColor?: string,\n  color?: string,\n  fontSize?: string,\n  font?: string,\n  padding?: number,\n  shadowColor?: string,\n  shadowBlur?: number,\n  shadowOffset?: Vector\n}\nlet DefaultButtonStyle = () => {\n  return {\n    backgroundColor: '#666',\n    padding: 5,\n    color: '#fff',\n    font: 'arial',\n    fontSize: '11px',\n    shadowColor: '#555',\n    shadowBlur: 3,\n    shadowOffset: new Vector(3, 3)\n  };\n};\n\nexport interface SerializedButton extends SerializedUINode {\n  text: string,\n  height: number\n}\n\ninterface ButtonOptions {\n  input?: boolean | SerializedTerminal,\n  output?: boolean | SerializedTerminal,\n  height?: number,\n  style?: ButtonStyle,\n  id?: string,\n  hitColor?: Color\n}\nlet DefaultButtonOptions = (node: Node): ButtonOptions => {\n  return {\n    height: node.style.rowHeight * 1.5\n  };\n};\n","import { Color } from \"../core/color\";\nimport { RenderResolver, Serializable } from \"../common/interfaces\";\nimport { Node } from \"../core/node\";\nimport { Vector } from \"../core/vector\";\nimport { Button, Display, HorizontalLayout, Stack, Image, Input, Label, Select, Slider, Source, Toggle } from \"./index\";\nimport { SerializedUINode, UINode, UINodeStyle, UIType, UINodeRenderParams } from \"./ui-node\";\nimport { Align } from \"../common/enums\";\n\nexport class Container extends UINode implements Serializable {\n  renderResolver: RenderResolver<Container, ContainerRenderParams> = () => null;\n  contentWidth: number;\n\n  constructor(\n    node: Node,\n    width: number,\n    options: ContainerOptions = DefaultContainerOptions()\n  ) {\n    super(node, node.position, UIType.Container, {\n      style: options.style ? { ...DefaultContainerStyle(), ...options.style } : DefaultContainerStyle(),\n      id: options.id,\n      hitColor: options.hitColor\n    });\n\n    this.width = width;\n    this.height = this.node.style.padding * 2;\n    this.contentWidth = this.width - 2 * this.node.style.padding;\n  }\n\n  paint(): void {\n    let context = this.context;\n    let nodeRenderResolver = this.node.renderResolver.uiContainer;\n    let flowRenderResolver = this.node.flow.renderResolver.uiContainer;\n    let flowConnectRenderResolver = this.node.flow.flowConnect.renderResolver.uiContainer;\n    ((this.renderResolver && this.renderResolver(this))\n      || (nodeRenderResolver && nodeRenderResolver(this))\n      || (flowRenderResolver && flowRenderResolver(this))\n      || (flowConnectRenderResolver && flowConnectRenderResolver(this))\n      || this._paint\n    )(context, this.getRenderParams(), this);\n  }\n  private _paint(context: CanvasRenderingContext2D, params: ContainerRenderParams, container: Container) {\n    context.shadowColor = container.style.shadowColor;\n    context.shadowBlur = container.style.shadowBlur;\n    context.shadowOffsetX = container.style.shadowOffset.x;\n    context.shadowOffsetY = container.style.shadowOffset.y;\n    context.fillStyle = container.style.backgroundColor;\n    context.strokeStyle = container.style.borderColor;\n    context.lineWidth = container.style.borderWidth;\n    context.roundRect(params.position.x, params.position.y, params.width, params.height, 5);\n    context.stroke();\n    context.fill();\n  }\n  paintLOD1() {\n    let context = this.context;\n    context.fillStyle = this.style.backgroundColor;\n    context.strokeStyle = this.style.borderColor;\n    context.lineWidth = this.style.borderWidth;\n    context.roundRect(\n      this.position.x, this.position.y + this.node.style.titleHeight,\n      this.width, this.height - this.node.style.titleHeight, 5\n    );\n    context.stroke();\n    context.fill();\n  }\n  offPaint(): void {\n    this.offUIContext.fillStyle = this.hitColor.hexValue;\n    this.offUIContext.fillRect(this.position.x, this.position.y, this.width, this.height);\n  }\n  getRenderParams(): ContainerRenderParams {\n    let position = this.position.serialize();\n    position.y += this.node.style.titleHeight\n    return {\n      position: position,\n      width: this.width,\n      height: this.height - this.node.style.titleHeight\n    }\n  }\n\n  reflow(): void {\n    this.position = this.node.position;\n    let terminalsDisplayHeight = Math.max(this.node.inputs.length, this.node.outputs.length) * this.node.style.terminalRowHeight + this.node.style.titleHeight;\n    let x = this.position.x + this.node.style.padding;\n    let y = this.position.y + terminalsDisplayHeight;\n    this.children.filter(child => child.visible).forEach(child => {\n      y += this.node.style.spacing;\n      let availableWidth = this.width - this.node.style.padding * 2;\n      child.width = (child.width > availableWidth ? availableWidth : child.width) || availableWidth;\n      if (child.width < availableWidth) {\n        let childX;\n        if (child.style.align === Align.Center) {\n          childX = this.position.x + this.width / 2 - child.width / 2;\n        } else if (child.style.align === Align.Right) {\n          childX = this.position.x + this.width - this.node.style.padding - child.width;\n        } else {\n          childX = x;\n        }\n        child.position = new Vector(childX, y);\n      } else {\n        child.position = new Vector(x, y);\n      }\n      y += child.height;\n    });\n    this.height = y + this.node.style.padding - this.position.y;\n  }\n\n  onPropChange() { /**/ }\n  onOver(screenPosition: Vector, realPosition: Vector): void {\n    if (this.disabled) return;\n\n    this.call('over', this, screenPosition, realPosition);\n  }\n  onDown(screenPosition: Vector, realPosition: Vector): void {\n    if (this.disabled) return;\n\n    this.call('down', this, screenPosition, realPosition);\n  }\n  onUp(screenPosition: Vector, realPosition: Vector): void {\n    if (this.disabled) return;\n\n    this.call('up', this, screenPosition, realPosition);\n  }\n  onClick(screenPosition: Vector, realPosition: Vector): void {\n    if (this.disabled) return;\n\n    this.call('click', this, screenPosition, realPosition);\n  }\n  onDrag(screenPosition: Vector, realPosition: Vector): void {\n    if (this.disabled) return;\n\n    this.call('drag', this, screenPosition, realPosition);\n  }\n  onEnter(screenPosition: Vector, realPosition: Vector) {\n    if (this.disabled) return;\n\n    this.call('enter', this, screenPosition, realPosition);\n  }\n  onExit(screenPosition: Vector, realPosition: Vector) {\n    if (this.disabled) return;\n\n    this.call('exit', this, screenPosition, realPosition);\n  }\n  onWheel(direction: boolean, screenPosition: Vector, realPosition: Vector) {\n    if (this.disabled) return;\n\n    this.call('wheel', this, direction, screenPosition, realPosition);\n  }\n  onContextMenu(): void { /**/ }\n\n  serialize(): SerializedContainer {\n    return {\n      width: this.width,\n      propName: this.propName,\n      input: this.input ? this.input.serialize() : null,\n      output: this.output ? this.output.serialize() : null,\n      id: this.id,\n      style: {\n        backgroundColor: this.style.backgroundColor,\n        shadowColor: this.style.shadowColor,\n        shadowBlur: this.style.shadowBlur,\n        shadowOffset: this.style.shadowOffset.serialize(),\n        borderWidth: this.style.borderWidth,\n        borderColor: this.style.borderColor\n      },\n      hitColor: this.hitColor.serialize(),\n      type: this.type,\n      childs: this.children.map(child => (child as any).serialize())\n    }\n  }\n  static deSerialize(node: Node, data: SerializedContainer): Container {\n    let uiContainer = new Container(node, data.width, {\n      style: data.style,\n      id: data.id,\n      hitColor: Color.deSerialize(data.hitColor)\n    });\n\n    uiContainer.children.push(...data.childs.map(serializedChild => {\n      switch (serializedChild.type) {\n        case UIType.Button: return Button.deSerialize(node, serializedChild);\n        case UIType.Container: return Container.deSerialize(node, serializedChild);\n        case UIType.Display: return Display.deSerialize(node, serializedChild);\n        case UIType.HorizontalLayout: return HorizontalLayout.deSerialize(node, serializedChild);\n        case UIType.Stack: return Stack.deSerialize(node, serializedChild);\n        case UIType.Image: return Image.deSerialize(node, serializedChild);\n        case UIType.Input: return Input.deSerialize(node, serializedChild);\n        case UIType.Label: return Label.deSerialize(node, serializedChild);\n        case UIType.Select: return Select.deSerialize(node, serializedChild);\n        case UIType.Slider: return Slider.deSerialize(node, serializedChild);\n        case UIType.Source: return Source.deSerialize(node, serializedChild);\n        case UIType.Toggle: return Toggle.deSerialize(node, serializedChild);\n        default: return;\n      }\n    }));\n    return uiContainer;\n  }\n}\n\nexport interface ContainerStyle extends UINodeStyle {\n  backgroundColor?: string,\n  shadowColor?: string,\n  shadowBlur?: number,\n  shadowOffset?: Vector,\n  borderColor?: string,\n  borderWidth?: number\n}\nlet DefaultContainerStyle = () => {\n  return {\n    backgroundColor: '#ddd',\n    shadowColor: '#666',\n    shadowBlur: 3,\n    shadowOffset: new Vector(3, 3),\n    borderWidth: 1,\n    borderColor: '#444'\n  };\n};\n\nexport interface SerializedContainer extends SerializedUINode {\n  width: number\n}\n\ninterface ContainerOptions {\n  style?: ContainerStyle,\n  id?: string,\n  hitColor?: Color\n}\nlet DefaultContainerOptions = () => {\n  return {};\n};\n\nexport interface ContainerRenderParams extends UINodeRenderParams { }\n","import { Terminal, TerminalType, SerializedTerminal } from \"../core/terminal\";\nimport { Node } from \"../core/node\";\nimport { Vector } from \"../core/vector\";\nimport { clamp, denormalize, get, normalize } from \"../utils/utils\";\nimport { SerializedUINode, UINode, UINodeStyle, UIType } from \"./ui-node\";\nimport { Serializable } from \"../common/interfaces\";\nimport { Color } from \"../core/color\";\nimport { FlowState } from \"../core/flow\";\nimport { Constant } from \"../resource/constants\";\n\nexport class Dial extends UINode implements Serializable {\n  private _value: number;\n  private thumbStart: Vector = Vector.Zero();\n  private thumbEnd: Vector = Vector.Zero();\n  private lastAngle: number;\n  private deltaValue: number;\n  private temp: number;\n\n  get value(): number {\n    if (this.propName) return this.getProp();\n    return this._value;\n  }\n  set value(value: number) {\n    let oldVal = this.value;\n    let newVal = clamp(value, this.min, this.max);\n\n    if (this.propName) this.setProp(newVal);\n    else this._value = newVal;\n    this.temp = normalize(newVal, this.min, this.max);\n\n    if (this.node.flow.state !== FlowState.Stopped) this.call('change', this, oldVal, newVal);\n  }\n\n  constructor(\n    node: Node,\n    public min: number, public max: number,\n    height: number,\n    options: DialOptions = DefaultDialOptions(min)\n  ) {\n    super(node, Vector.Zero(), UIType.Dial, {\n      draggable: true,\n      style: options.style ? { ...DefaultDialStyle(height), ...options.style } : DefaultDialStyle(height),\n      propName: options.propName,\n      input: options.input && (typeof options.input === 'boolean'\n        ? new Terminal(node, TerminalType.IN, 'number', '', {})\n        : Terminal.deSerialize(node, options.input)),\n      output: options.output && (typeof options.output === 'boolean'\n        ? new Terminal(node, TerminalType.OUT, 'number', '', {})\n        : Terminal.deSerialize(node, options.output)),\n      id: options.id,\n      hitColor: options.hitColor\n    });\n\n    this.height = height;\n    this._value = get(options.value, min);\n    this.temp = normalize(this._value, this.min, this.max);\n\n    if (this.input) {\n      this.input.on('connect', (_, connector) => {\n        if (connector.data) this.value = connector.data;\n      });\n      this.input.on('data', (_, data) => {\n        if (data) this.value = data;\n      });\n    }\n    if (this.output) this.output.on('connect', (_, connector) => connector.data = this.value);\n\n    this.node.on('process', () => {\n      if (this.output) this.output.setData(this.value);\n    });\n  }\n\n  paint(): void {\n    let context = this.context;\n    let size = Math.min(this.width, this.height);\n\n    context.fillStyle = this.style.color;\n    context.strokeStyle = this.style.borderColor;\n    context.lineWidth = this.style.borderWidth;\n    context.shadowColor = this.style.shadowColor;\n    context.shadowBlur = this.style.shadowBlur;\n    context.shadowOffsetX = 3;\n    context.shadowOffsetY = 3;\n    context.beginPath();\n    context.arc(this.position.x + this.width / 2, this.position.y + this.height / 2, size / 2, 0, Constant.TAU);\n    context.stroke();\n    context.fill();\n\n    context.lineCap = 'round';\n    context.lineWidth = 10;\n    context.strokeStyle = this.style.thumbColor;\n    context.shadowColor = this.style.thumbShadowColor;\n    context.shadowBlur = this.style.thumbShadowBlur;\n    context.beginPath();\n    context.moveTo(this.thumbStart.x, this.thumbStart.y);\n    context.lineTo(this.thumbEnd.x, this.thumbEnd.y);\n    context.stroke();\n  }\n  paintLOD1() {\n    let context = this.context;\n    context.strokeStyle = '#000';\n    context.fillStyle = this.style.color;\n    context.strokeRect(this.position.x, this.position.y, this.width, this.height);\n    context.fillRect(this.position.x, this.position.y, this.width, this.height);\n  }\n  offPaint(): void {\n    let context = this.offUIContext;\n    let size = Math.min(this.width, this.height);\n\n    context.fillStyle = this.hitColor.hexValue;\n    context.beginPath();\n    context.arc(this.position.x + this.width / 2, this.position.y + this.height / 2, size / 2, 0, Constant.TAU);\n    context.fill();\n  }\n\n  reflow(): void {\n    let center = this.position.add(this.width / 2, this.height / 2);\n    let angle = normalize(this.value, this.min, this.max) * Constant.TAU + (Math.PI / 2);\n    let size = Math.min(this.width, this.height);\n    this.thumbStart.assign(center.x + Math.cos(angle) * (size / 5), center.y + Math.sin(angle) * (size / 5));\n    this.thumbEnd.assign(center.x + Math.cos(angle) * (size / 2 - 10), center.y + Math.sin(angle) * (size / 2 - 10));\n\n    if (this.input) {\n      this.input.position.assign(\n        this.node.position.x - this.node.style.terminalStripMargin - this.input.style.radius,\n        this.position.y + this.height / 2\n      );\n    }\n    if (this.output) {\n      this.output.position.assign(\n        this.node.position.x + this.node.width + this.node.style.terminalStripMargin + this.output.style.radius,\n        this.position.y + this.height / 2\n      );\n    }\n  }\n  private pointToValue(position: Vector): number {\n    let diff = position.subtract(this.position.add(this.width / 2, this.height / 2));\n    let angle = Math.atan2(diff.y, diff.x);\n    if (angle < 0) angle += Constant.TAU;\n    return (((angle / Constant.TAU) - 0.25) + 1) % 1;\n  }\n\n  onPropChange(_oldVal: any, newVal: any) {\n    this._value = newVal;\n    this.temp = normalize(newVal, this.min, this.max);\n    this.reflow();\n\n    this.output && this.output.setData(this._value);\n  }\n  onOver(screenPosition: Vector, realPosition: Vector): void {\n    if (this.disabled) return;\n\n    this.call('over', this, screenPosition, realPosition);\n  }\n  onDown(screenPosition: Vector, realPosition: Vector): void {\n    if (this.disabled) return;\n\n    this.lastAngle = undefined;\n    this.deltaValue = this.pointToValue(realPosition);\n    this.temp = normalize(this.value, this.min, this.max);\n    this.onDrag(screenPosition, realPosition);\n\n    this.call('down', this, screenPosition, realPosition);\n  }\n  onUp(screenPosition: Vector, realPosition: Vector): void {\n    if (this.disabled) return;\n\n    this.call('up', this, screenPosition, realPosition);\n  }\n  onClick(screenPosition: Vector, realPosition: Vector): void {\n    if (this.disabled) return;\n\n    this.call('click', this, screenPosition, realPosition);\n  }\n  onDrag(screenPosition: Vector, realPosition: Vector): void {\n    if (this.disabled) return;\n\n    let currValue = this.pointToValue(realPosition);\n    let diffValue = currValue - this.deltaValue;\n    diffValue = (Math.abs(diffValue) > 0.5) ? 0 : diffValue;\n    this.deltaValue = currValue;\n    this.temp = this.temp + diffValue;\n    this.temp = clamp(this.temp, 0, 1);\n\n    let angle = this.temp * Constant.TAU;\n    if (angle < 0) angle += Constant.TAU;\n    if (typeof this.lastAngle !== 'undefined' && Math.abs(this.lastAngle - angle) > 2) {\n      angle = this.lastAngle > 3 ? Constant.TAU : 0;\n    }\n    this.lastAngle = angle;\n    let normalizedValue = angle / Constant.TAU;\n    this.value = denormalize(clamp(normalizedValue, 0, 1), this.min, this.max);\n    this.temp = normalizedValue;\n    this.reflow();\n\n    this.call('drag', this, screenPosition, realPosition);\n  }\n  onEnter(screenPosition: Vector, realPosition: Vector) {\n    if (this.disabled) return;\n\n    this.call('enter', this, screenPosition, realPosition);\n  }\n  onExit(screenPosition: Vector, realPosition: Vector) {\n    if (this.disabled) return;\n\n    this.lastAngle = undefined;\n\n    this.call('exit', this, screenPosition, realPosition);\n  }\n  onWheel(direction: boolean, screenPosition: Vector, realPosition: Vector) {\n    if (this.disabled) return;\n\n    this.call('wheel', this, direction, screenPosition, realPosition);\n  }\n  onContextMenu(): void {\n    if (this.disabled) return;\n  }\n\n  serialize(): SerializedDial {\n    return {\n      min: this.min,\n      max: this.max,\n      value: this.value,\n      propName: this.propName,\n      input: this.input ? this.input.serialize() : null,\n      output: this.output ? this.output.serialize() : null,\n      size: this.height,\n      id: this.id,\n      hitColor: this.hitColor.serialize(),\n      style: this.style,\n      type: this.type,\n      childs: []\n    }\n  }\n  static deSerialize(node: Node, data: SerializedDial) {\n    return new Dial(node, data.min, data.max, data.size, {\n      value: data.value,\n      propName: data.propName,\n      input: data.input,\n      output: data.output,\n      style: data.style,\n      id: data.id,\n      hitColor: Color.deSerialize(data.hitColor)\n    });\n  }\n}\n\nexport interface DialStyle extends UINodeStyle {\n  color?: string,\n  borderColor?: string,\n  borderWidth?: number,\n  shadowColor?: string,\n  shadowBlur?: number,\n  thumbColor?: string,\n  thumbBorderColor?: string,\n  thumbBorderWidth?: number,\n  thumbShadowColor?: string,\n  thumbShadowBlur?: number\n}\nlet DefaultDialStyle = (size: number) => {\n  return {\n    color: '#e3e3e3',\n    borderColor: '#000',\n    borderWidth: 1,\n    shadowColor: 'grey',\n    shadowBlur: 5,\n    thumbColor: '#c9c9c9',\n    thumbShadowColor: '#858585',\n    thumbShadowBlur: 5,\n    size,\n    visible: true\n  }\n}\n\nexport interface SerializedDial extends SerializedUINode {\n  min: number,\n  max: number,\n  value: number,\n  size: number\n}\n\ninterface DialOptions {\n  value?: number,\n  propName?: string,\n  input?: boolean | SerializedTerminal,\n  output?: boolean | SerializedTerminal,\n  style?: DialStyle,\n  id?: string,\n  hitColor?: Color\n}\nlet DefaultDialOptions = (min: number) => {\n  return {\n    value: min\n  };\n};\n","import { Color } from \"../core/color\";\nimport { Serializable } from \"../common/interfaces\";\nimport { Node } from \"../core/node\";\nimport { Terminal, TerminalType, SerializedTerminal } from \"../core/terminal\";\nimport { Vector } from \"../core/vector\";\nimport { SerializedUINode, UINode, UINodeStyle, UIType } from \"./ui-node\";\n\nexport class Display extends UINode implements Serializable {\n  displayConfigs: CustomOffCanvasConfig[] = [];\n\n  constructor(\n    node: Node,\n    height: number,\n    customRenderers: CustomRendererConfig[],\n    options: DisplayOptions = DefaultDisplayOptions()\n  ) {\n    super(node, Vector.Zero(), UIType.Display, {\n      draggable: true,\n      zoomable: true,\n      style: options.style ? { ...DefaultDisplayStyle(), ...options.style } : DefaultDisplayStyle(),\n      input: options.clear && typeof options.clear !== 'boolean'\n        ? Terminal.deSerialize(node, options.clear)\n        : new Terminal(node, TerminalType.IN, 'event', '', {}),\n      id: options.id, hitColor: options.hitColor\n    });\n\n    this.height = height;\n\n    if (typeof OffscreenCanvas !== 'undefined') {\n      customRenderers.forEach(rendererConfig => {\n        let offCanvas, offContext, newOffCanvasConfig;\n        if (rendererConfig.canvasType === CanvasType.HTMLCanvasElement) {\n          offCanvas = document.createElement('canvas');\n          offCanvas.width = this.node.width - 2 * this.node.style.padding;\n          offCanvas.height = this.height;\n        } else {\n          offCanvas = new OffscreenCanvas(this.node.width - 2 * this.node.style.padding, this.height);\n        }\n        offContext = offCanvas.getContext('2d');\n        newOffCanvasConfig = { canvas: offCanvas, context: offContext, rendererConfig, shouldRender: true }\n        this.displayConfigs.push(newOffCanvasConfig);\n      });\n    } else {\n      customRenderers.forEach(rendererConfig => {\n        let offCanvas = document.createElement('canvas');\n        offCanvas.width = this.node.width - 2 * this.node.style.padding;\n        offCanvas.height = this.height;\n        let offContext = offCanvas.getContext('2d');\n        let newOffCanvasConfig = { canvas: offCanvas, context: offContext, rendererConfig, shouldRender: true }\n        this.displayConfigs.push(newOffCanvasConfig);\n      });\n    }\n\n    this.input.on('event', () => {\n      this.displayConfigs.filter(config => !config.rendererConfig.auto).forEach(config => {\n        config.context.clearRect(0, 0, config.canvas.width, config.canvas.height);\n      });\n    });\n\n    this.node.flow.flowConnect.on('scale', () => this.reflow());\n  }\n\n  private customRender(canvasConfigs: CustomOffCanvasConfig[]) {\n    return Promise.all(canvasConfigs.map(config => {\n      return new Promise<boolean>(resolve => {\n        if (config.shouldRender) {\n          if (config.rendererConfig.clear)\n            config.context.clearRect(0, 0, config.canvas.width, config.canvas.height);\n          if (this.style.backgroundColor) {\n            config.context.fillStyle = this.style.backgroundColor;\n            config.context.fillRect(0, 0, config.canvas.width, config.canvas.height);\n          }\n          resolve(\n            config.rendererConfig.renderer(config.context, config.canvas.width, config.canvas.height)\n          );\n        } else resolve(false);\n      });\n    }));\n  }\n\n  paint(): void {\n    let context = this.context;\n    context.strokeStyle = this.style.borderColor;\n    context.lineWidth = 1;\n    context.strokeRect(this.position.x, this.position.y, this.width, this.height);\n\n    let autoOffCanvasConfigs = this.displayConfigs.filter(config => config.rendererConfig.auto);\n    this.customRender(autoOffCanvasConfigs).then((results: boolean[]) => {\n      results.forEach((result, index) => autoOffCanvasConfigs[index].shouldRender = result);\n    });\n\n    this.displayConfigs.forEach(offCanvas => {\n      context.drawImage(\n        offCanvas.canvas, 0, 0,\n        offCanvas.canvas.width, offCanvas.canvas.height,\n        this.position.x, this.position.y,\n        this.node.width - 2 * this.node.style.padding, this.height\n      );\n    });\n  }\n  paintLOD1() {\n    let context = this.context;\n    context.strokeStyle = this.style.borderColor;\n    context.strokeRect(this.position.x, this.position.y, this.width, this.height);\n    context.fillStyle = 'lightgrey';\n    context.fillRect(this.position.x, this.position.y, this.width, this.height);\n  }\n  offPaint(): void {\n    this.offUIContext.fillStyle = this.hitColor.hexValue;\n    this.offUIContext.fillRect(this.position.x, this.position.y, this.width, this.height);\n  }\n\n  reflow(): void {\n    let newWidth = (this.node.width - 2 * this.node.style.padding) * this.node.flow.flowConnect.scale;\n    let newHeight = this.height * this.node.flow.flowConnect.scale;\n\n    this.displayConfigs.forEach(offCanvas => {\n      // Optimization: Do not trigger re-render if width/height is same\n      if (Math.floor(offCanvas.canvas.width) !== Math.floor(newWidth) || Math.floor(offCanvas.canvas.height) !== Math.floor(newHeight)) {\n        offCanvas.canvas.width = newWidth;\n        offCanvas.canvas.height = newHeight;\n\n        if (!offCanvas.shouldRender) {\n          offCanvas.rendererConfig.renderer(offCanvas.context, offCanvas.canvas.width, offCanvas.canvas.height);\n          offCanvas.shouldRender = false;\n        }\n      }\n    });\n\n    this.input.position.assign(\n      this.node.position.x - this.node.style.terminalStripMargin - this.input.style.radius,\n      this.position.y + this.height / 2\n    );\n  }\n\n  onPropChange() { /**/ }\n  onOver(screenPosition: Vector, realPosition: Vector): void {\n    if (this.disabled) return;\n\n    this.call('over', this, screenPosition, realPosition);\n  }\n  onDown(screenPosition: Vector, realPosition: Vector): void {\n    if (this.disabled) return;\n\n    this.call('down', this, screenPosition, realPosition);\n  }\n  onUp(screenPosition: Vector, realPosition: Vector): void {\n    if (this.disabled) return;\n\n    this.call('up', this, screenPosition, realPosition);\n  }\n  onClick(screenPosition: Vector, realPosition: Vector): void {\n    if (this.disabled) return;\n\n    this.call('click', this, screenPosition, realPosition);\n  }\n  onDrag(screenPosition: Vector, realPosition: Vector): void {\n    if (this.disabled) return;\n\n    this.call('drag', this, screenPosition, realPosition);\n  }\n  onEnter(screenPosition: Vector, realPosition: Vector) {\n    if (this.disabled) return;\n\n    this.call('enter', this, screenPosition, realPosition);\n  }\n  onExit(screenPosition: Vector, realPosition: Vector) {\n    if (this.disabled) return;\n\n    this.call('exit', this, screenPosition, realPosition);\n  }\n  onWheel(direction: boolean, screenPosition: Vector, realPosition: Vector) {\n    if (this.disabled) return;\n\n    this.call('wheel', this, direction, screenPosition, realPosition);\n  }\n  onContextMenu(): void {\n    if (this.disabled) return;\n\n    this.call('rightclick', this);\n  }\n\n  serialize(): SerializedDisplay {\n    return {\n      height: this.height,\n      propName: this.propName,\n      input: this.input ? this.input.serialize() : null,\n      output: this.output ? this.output.serialize() : null,\n      id: this.id,\n      hitColor: this.hitColor.serialize(),\n      style: this.style,\n      type: this.type,\n      childs: []\n    };\n  }\n  static deSerialize(node: Node, data: SerializedDisplay): Display {\n    return new Display(node, data.height, null, {\n      style: data.style,\n      id: data.id,\n      hitColor: Color.deSerialize(data.hitColor),\n      clear: data.input\n    });\n  }\n}\n\nexport enum CanvasType {\n  OffscreenCanvas = 'OffscreenCanvas',\n  HTMLCanvasElement = 'HTMLCanvasElement'\n}\n\nexport interface CustomOffCanvasConfig {\n  canvas: OffscreenCanvas | HTMLCanvasElement;\n  context: OffscreenCanvasRenderingContext2D | CanvasRenderingContext2D;\n  rendererConfig: CustomRendererConfig,\n  shouldRender: boolean\n}\n\nexport interface CustomRendererConfig {\n  auto?: boolean,\n  clear?: boolean,\n  canvasType?: CanvasType,\n  renderer?: (context: CanvasRenderingContext2D | OffscreenCanvasRenderingContext2D, width: number, height: number) => boolean,\n}\n\nexport interface DisplayStyle extends UINodeStyle {\n  borderColor?: string,\n  backgroundColor?: string\n}\nlet DefaultDisplayStyle = () => {\n  return {\n    borderColor: '#000',\n    visible: true\n  };\n};\n\nexport interface SerializedDisplay extends SerializedUINode {\n  height: number\n}\n\ninterface DisplayOptions {\n  style?: DisplayStyle,\n  id?: string,\n  hitColor?: Color,\n  clear?: boolean | SerializedTerminal\n}\nlet DefaultDisplayOptions = () => {\n  return {}\n};\n","import { SerializedVector, Vector } from \"../core/vector\";\nimport { SerializedUINode, UINode, UINodeStyle, UIType } from \"./ui-node\";\nimport { Node } from '../core/node';\nimport { Terminal, TerminalType, SerializedTerminal } from \"../core/terminal\";\nimport { Serializable } from \"../common/interfaces\";\nimport { Color } from \"../core/color\";\nimport { FlowState } from \"../core/flow\";\nimport { Constant } from \"../resource/constants\";\nimport { List, ListNode } from \"../utils/linked-list\";\nimport { BiMap } from \"../utils/bidirectional-map\";\n\nexport class Envelope extends UINode implements Serializable {\n  private _value: List<Vector>;\n  private pointHitColorPoint: BiMap<string, ListNode<Vector>> = new BiMap();\n  offPointsCanvas: OffscreenCanvas | HTMLCanvasElement;\n  private offPointsContext: OffscreenCanvasRenderingContext2D | CanvasRenderingContext2D;\n  private pointDiameter: number = 10;\n\n  get value(): Vector[] {\n    return this._value.toArray().map(vec => vec.clone());\n  }\n  set value(value: Vector[]) {\n    let oldVal = this.value;\n    value.forEach(vector => vector.clampInPlace(0, 1, 0, 1));\n    value.sort((a, b) => a.x - b.x);\n    this._value = new List((a, b) => a.x - b.x, value);\n    this.pointHitColorPoint.clear();\n    this._value.forEach(node => this.pointHitColorPoint.set(Color.Random().hexValue, node));\n    this.renderOffPoints();\n\n    if (this.node.flow.state !== FlowState.Stopped) this.call('change', this, oldVal, this._value.toArray());\n  }\n\n  constructor(\n    node: Node,\n    height: number,\n    values: Vector[] = [],\n    options: EnvelopeOptions = DefaultEnvelopeOptions()\n  ) {\n    super(node, Vector.Zero(), UIType.Envelope, {\n      draggable: true,\n      style: options.style ? { ...DefaultEnvelopeStyle(), ...options.style } : DefaultEnvelopeStyle(),\n      input: options.input && (typeof options.input === 'boolean'\n        ? new Terminal(node, TerminalType.IN, 'array', '', {})\n        : Terminal.deSerialize(node, options.input)),\n      output: options.output && (typeof options.output === 'boolean'\n        ? new Terminal(node, TerminalType.OUT, 'array', '', {})\n        : Terminal.deSerialize(node, options.output)),\n      id: options.id,\n      hitColor: options.hitColor\n    });\n\n    this.height = height;\n    values.forEach(vector => vector.clampInPlace(0, 1, 0, 1));\n    values.sort((a, b) => a.x - b.x);\n    this._value = new List((a, b) => a.x - b.x, values);\n    this.pointHitColorPoint.clear();\n    this._value.forEach(pointNode => this.pointHitColorPoint.set(Color.Random().hexValue, pointNode));\n\n    if (this.input) {\n      this.input.on('connect', (_, connector) => {\n        if (connector.data) this.value = connector.data;\n      });\n      this.input.on('data', (_, data) => {\n        if (data) this.value = data;\n      });\n    }\n    if (this.output) this.output.on('connect', (_, connector) => connector.data = this.value);\n\n    if (typeof OffscreenCanvas !== 'undefined') {\n      this.offPointsCanvas = new OffscreenCanvas(this.width, this.height);\n    } else {\n      this.offPointsCanvas = document.createElement('canvas');\n      this.offPointsCanvas.width = this.width;\n      this.offPointsCanvas.height = this.height;\n    }\n    this.offPointsContext = this.offPointsCanvas.getContext('2d');\n    this.renderOffPoints();\n  }\n\n  renderOffPoints() {\n    let [width, height] = [this.width - this.pointDiameter, this.height - this.pointDiameter];\n    this.offPointsContext.clearRect(0, 0, width, height);\n\n    this._value.forEach(node => {\n      let coord = new Vector(node.data.x, 1 - node.data.y).multiply(width, height).add(this.pointDiameter / 2);\n      this.offPointsContext.fillStyle = this.pointHitColorPoint.get(node) as string;\n      this.offPointsContext.beginPath();\n      this.offPointsContext.arc(coord.x, coord.y, this.pointDiameter / 2, 0, Constant.TAU);\n      this.offPointsContext.fill();\n    });\n  }\n\n  paint(): void {\n    let context = this.node.context;\n\n    context.fillStyle = this.style.backgroundColor;\n    context.strokeStyle = this.style.borderColor;\n    context.lineWidth = this.style.borderWidth;\n    context.fillRect(this.position.x, this.position.y, this.width, this.height);\n    context.strokeRect(this.position.x, this.position.y, this.width, this.height);\n\n    let [width, height] = [this.width - this.pointDiameter, this.height - this.pointDiameter];\n    let points: Vector[] = this._value.map(node =>\n      new Vector(node.data.x, 1 - node.data.y)\n        .multiplyInPlace(width, height)\n        .addInPlace(this.position)\n        .addInPlace(this.pointDiameter / 2)\n    );\n\n    if (points.length > 0) {\n      context.strokeStyle = this.style.lineColor;\n      context.lineWidth = 2;\n      context.beginPath();\n      context.moveTo(this.position.x, points[0].y);\n      points.forEach(point => context.lineTo(point.x, point.y));\n      context.lineTo(this.position.x + this.width, points[points.length - 1].y);\n      context.stroke();\n    }\n\n    context.fillStyle = this.style.pointColor;\n    points.forEach(point => {\n      context.beginPath();\n      context.arc(point.x, point.y, this.pointDiameter / 2, 0, Constant.TAU);\n      context.fill();\n    });\n  }\n  paintLOD1() {\n    this.context.fillStyle = this.style.backgroundColor;\n    this.context.fillRect(this.position.x, this.position.y, this.width, this.height);\n  }\n  offPaint(): void {\n    this.offUIContext.fillStyle = this.hitColor.hexValue;\n    this.offUIContext.fillRect(this.position.x, this.position.y, this.width, this.height);\n  }\n\n  reflow(): void {\n    let [newWidth, newHeight] = [this.width, this.height];\n\n    if (\n      Math.floor(this.offPointsCanvas.width) !== Math.floor(newWidth)\n      || Math.floor(this.offPointsCanvas.height) !== Math.floor(newHeight)\n    ) {\n\n      this.offPointsCanvas.width = newWidth;\n      this.offPointsCanvas.height = newHeight;\n      this.renderOffPoints();\n    }\n\n    if (this.input) {\n      this.input.position.assign(\n        this.node.position.x - this.node.style.terminalStripMargin - this.input.style.radius,\n        this.position.y + this.height / 2\n      );\n    }\n    if (this.output) {\n      this.output.position.assign(\n        this.node.position.x + this.node.width + this.node.style.terminalStripMargin + this.output.style.radius,\n        this.position.y + this.height / 2\n      );\n    }\n  }\n\n  getHitPoint(realPosition: Vector): ListNode<Vector> {\n    let coord = realPosition.subtract(this.position);\n    let hitColor = Color.rgbaToHex(this.offPointsContext.getImageData(coord.x, coord.y, 1, 1).data);\n    let hitPointNode = this.pointHitColorPoint.get(hitColor);\n    return hitPointNode as ListNode<Vector>;\n  }\n  movePoint(realPosition: Vector) {\n    let [width, height] = [this.width - this.pointDiameter, this.height - this.pointDiameter];\n\n    this.currHitPoint.data = realPosition\n      .clamp(\n        this.position.x + this.pointDiameter / 2, this.position.x + this.width - this.pointDiameter / 2,\n        this.position.y + this.pointDiameter / 2, this.position.y + this.height - this.pointDiameter / 2\n      )\n      .subtractInPlace(this.position.add(this.pointDiameter / 2))\n      .clampInPlace(0, width, 0, height)\n      .normalizeInPlace(0, width, 0, height)\n      .clampInPlace(\n        this.currHitPoint.prev?.data.x || 0, this.currHitPoint.next?.data.x || 1,\n        -Infinity, Infinity\n      );\n    this.currHitPoint.data = new Vector(this.currHitPoint.data.x, 1 - this.currHitPoint.data.y);\n\n    this.renderOffPoints();\n  }\n  newPoint(realPosition: Vector, width: number, height: number) {\n    let oldVal = this._value.toArray();\n\n    let newPoint = realPosition\n      .subtract(this.position.add(this.pointDiameter / 2))\n      .normalizeInPlace(0, width, 0, height);\n    newPoint = new Vector(newPoint.x, 1 - newPoint.y);\n\n    let newPointNode;\n    let anchor = this._value.searchTail(node => node.data.x <= newPoint.x);\n\n    if (anchor === null) newPointNode = this._value.prepend(newPoint);\n    else newPointNode = this._value.addAfter(newPoint, anchor);\n\n    this.pointHitColorPoint.set(Color.Random().hexValue, newPointNode);\n    this.renderOffPoints();\n    if (this.node.flow.state !== FlowState.Stopped) this.call('change', this, oldVal, this._value.toArray());\n  }\n  deletePoint() {\n    let oldVal = this._value.toArray();\n    this._value.delete(this.currHitPoint);\n    this.pointHitColorPoint.delete(this.currHitPoint);\n    this.renderOffPoints();\n\n    if (this.node.flow.state !== FlowState.Stopped) this.call('change', this, oldVal, this._value.toArray());\n  }\n\n  onPropChange() { /**/ }\n  onOver(screenPosition: Vector, realPosition: Vector): void {\n    if (this.disabled) return;\n\n    this.call('over', this, screenPosition, realPosition);\n  }\n\n  private currHitPoint: ListNode<Vector>;\n  private lastDownPosition: Vector;\n  onDown(screenPosition: Vector, realPosition: Vector): void {\n    if (this.disabled) return;\n\n    this.currHitPoint = this.getHitPoint(realPosition);\n    this.lastDownPosition = realPosition;\n\n    this.call('down', this, screenPosition, realPosition);\n  }\n  onUp(screenPosition: Vector, realPosition: Vector): void {\n    if (this.disabled) return;\n\n    let [width, height] = [this.width - this.pointDiameter, this.height - this.pointDiameter];\n    if (!this.currHitPoint && this.lastDownPosition) {\n      if (Vector.Distance(this.lastDownPosition, realPosition) <= 2) {\n        this.newPoint(realPosition, width, height);\n      }\n    } else if (\n      this.currHitPoint && this.currHitPoint === this.getHitPoint(realPosition)\n      && this.lastDownPosition && this.lastDownPosition.isEqual(realPosition, 0.5)\n    ) {\n      this.deletePoint();\n    } else if (this.currHitPoint) {\n      // Point has finished moving\n      if (this.node.flow.state !== FlowState.Stopped) this.call('change', this, null, this._value.toArray());\n    }\n\n    this.currHitPoint = null;\n    this.lastDownPosition = null;\n\n    this.call('up', this, screenPosition, realPosition);\n  }\n  onClick(screenPosition: Vector, realPosition: Vector): void {\n    if (this.disabled) return;\n\n    this.call('click', this, screenPosition, realPosition);\n  }\n  onDrag(screenPosition: Vector, realPosition: Vector): void {\n    if (this.disabled) return;\n\n    if (this.currHitPoint) this.movePoint(realPosition);\n\n    this.call('drag', this, screenPosition, realPosition);\n  }\n  onEnter(screenPosition: Vector, realPosition: Vector) {\n    if (this.disabled) return;\n\n    this.call('enter', this, screenPosition, realPosition);\n  }\n  onExit(screenPosition: Vector, realPosition: Vector) {\n    if (this.disabled) return;\n\n    if (this.currHitPoint) {\n      this.movePoint(realPosition);\n      if (this.node.flow.state !== FlowState.Stopped) this.call('change', this, null, this._value.toArray());\n    }\n    this.currHitPoint = null;\n    this.lastDownPosition = null;\n\n    this.call('exit', this, screenPosition, realPosition);\n  }\n  onWheel(direction: boolean, screenPosition: Vector, realPosition: Vector) {\n    if (this.disabled) return;\n\n    this.call('wheel', this, direction, screenPosition, realPosition);\n  }\n  onContextMenu(): void {\n    if (this.disabled) return;\n  }\n\n  serialize(): SerializedEnvelope {\n    return {\n      values: this.value.map(vector => vector.serialize()),\n      propName: this.propName,\n      input: this.input ? this.input.serialize() : null,\n      output: this.output ? this.output.serialize() : null,\n      id: this.id,\n      hitColor: this.hitColor.serialize(),\n      style: this.style,\n      height: this.height,\n      type: this.type,\n      childs: []\n    }\n  }\n  static deSerialize(node: Node, data: SerializedEnvelope): Envelope {\n    return new Envelope(node, data.height, data.values.map(serialVec => Vector.deSerialize(serialVec)), {\n      input: data.input,\n      output: data.output,\n      style: data.style,\n      id: data.id,\n      hitColor: Color.deSerialize(data.hitColor)\n    });\n  }\n}\n\nexport interface EnvelopeStyle extends UINodeStyle {\n  backgroundColor?: string,\n  pointColor?: string,\n  lineColor?: string,\n  borderColor?: string,\n  borderWidth?: number\n}\nlet DefaultEnvelopeStyle = () => {\n  return {\n    backgroundColor: '#4a4a4a',\n    pointColor: '#9cffee',\n    lineColor: '#9cd6ff',\n    borderColor: '#000',\n    borderWidth: 1,\n    visible: true\n  };\n};\n\nexport interface SerializedEnvelope extends SerializedUINode {\n  values: SerializedVector[],\n  height: number\n}\n\ninterface EnvelopeOptions {\n  input?: boolean | SerializedTerminal,\n  output?: boolean | SerializedTerminal,\n  style?: EnvelopeStyle,\n  id?: string,\n  hitColor?: Color\n}\nlet DefaultEnvelopeOptions = () => {\n  return {};\n};\n","import { Color } from \"../core/color\";\nimport { Serializable } from \"../common/interfaces\";\nimport { Node } from \"../core/node\";\nimport { Vector } from \"../core/vector\";\nimport { Button, Container, Display, Image, Input, Label, Select, Slider, Source, Stack, Toggle, } from \"./index\";\nimport { SerializedUINode, UINode, UINodeStyle, UIType } from \"./ui-node\";\nimport { clamp } from \"../utils/utils\";\nimport { SerializedTerminal, Terminal, TerminalType } from \"../core/terminal\";\n\nexport class HorizontalLayout extends UINode implements Serializable {\n\n  constructor(\n    node: Node,\n    childs: UINode[] = [],\n    options: HorizontalLayoutOptions = DefaultHorizontalLayoutOptions()\n  ) {\n    super(node, Vector.Zero(), UIType.HorizontalLayout, {\n      style: options.style ? { ...DefaultHorizontalLayoutStyle(), ...options.style } : DefaultHorizontalLayoutStyle(),\n      input: options.input && (typeof options.input === 'boolean'\n        ? new Terminal(node, TerminalType.IN, 'any', '', {})\n        : Terminal.deSerialize(node, options.input)),\n      output: options.output && (typeof options.output === 'boolean'\n        ? new Terminal(node, TerminalType.OUT, 'any', '', {})\n        : Terminal.deSerialize(node, options.output)),\n      id: options.id,\n      hitColor: options.hitColor\n    });\n\n    if (childs && childs.length > 0) this.children.push(...childs);\n  }\n\n  paint(): void { /**/ }\n  paintLOD1() { /**/ }\n  offPaint(): void {\n    this.offUIContext.fillStyle = this.hitColor.hexValue;\n    this.offUIContext.fillRect(this.position.x, this.position.y, this.width, this.height);\n  }\n\n  reflow(): void {\n    let children = this.children.filter(child => child.visible);\n\n    let availableWidth = this.width - (children.length > 0 ? (children.length - 1) : 0) * this.style.spacing;\n    let originalWidth = availableWidth;\n\n    let maxHeight = 0;\n    children.forEach(child => maxHeight = Math.max(maxHeight, child.height));\n    this.height = maxHeight;\n\n    let fixedWidthChilds = this.children.filter(child => !!child.width);\n    fixedWidthChilds.forEach(child => child.width = clamp(child.width, 0, availableWidth));\n    let fixedWidth = fixedWidthChilds.reduce((acc, curr) => acc + curr.width, 0);\n\n    let remainingWidth = originalWidth;\n    fixedWidth = clamp(fixedWidth, 0, remainingWidth);\n    remainingWidth -= fixedWidth;\n    let flexWidth = remainingWidth;\n\n    let x = this.position.x;\n    children.forEach(child => {\n      let childWidth;\n      if (!!child.width) childWidth = child.width;\n      else if (typeof child.style.grow === 'number') {\n        childWidth = child.style.grow * flexWidth;\n      } else {\n        childWidth = 0;\n      }\n\n      childWidth = clamp(childWidth, 0, availableWidth);\n      child.width = childWidth;\n\n      let y;\n      if (child.height < this.height) {\n        y = this.position.y + this.height / 2 - child.height / 2;\n      } else {\n        child.height = this.height\n        y = this.position.y;\n      }\n      child.position.assign(x, y);\n\n      availableWidth -= childWidth;\n      x += childWidth + this.style.spacing;\n    });\n\n    if (this.input) {\n      this.input.position.assign(\n        this.node.position.x - this.node.style.terminalStripMargin - this.input.style.radius,\n        this.position.y + this.height / 2\n      );\n    }\n    if (this.output) {\n      this.output.position.assign(\n        this.node.position.x + this.node.width + this.node.style.terminalStripMargin + this.output.style.radius,\n        this.position.y + this.height / 2\n      );\n    }\n\n    // To fix a bug, when creating HozLayout with childs argument, UI container's height won't update\n    this.node.ui.reflow();\n  }\n\n  onPropChange() { /**/ }\n  onOver(screenPosition: Vector, realPosition: Vector): void {\n    if (this.disabled) return;\n\n    this.call('over', this, screenPosition, realPosition);\n  }\n  onDown(screenPosition: Vector, realPosition: Vector): void {\n    if (this.disabled) return;\n\n    this.call('down', this, screenPosition, realPosition);\n  }\n  onUp(screenPosition: Vector, realPosition: Vector): void {\n    if (this.disabled) return;\n\n    this.call('up', this, screenPosition, realPosition);\n  }\n  onClick(screenPosition: Vector, realPosition: Vector): void {\n    if (this.disabled) return;\n\n    this.call('click', this, screenPosition, realPosition);\n  }\n  onDrag(screenPosition: Vector, realPosition: Vector): void {\n    if (this.disabled) return;\n\n    this.call('drag', this, screenPosition, realPosition);\n  }\n  onEnter(screenPosition: Vector, realPosition: Vector) {\n    if (this.disabled) return;\n\n    this.call('enter', this, screenPosition, realPosition);\n  }\n  onExit(screenPosition: Vector, realPosition: Vector) {\n    if (this.disabled) return;\n\n    this.call('exit', this, screenPosition, realPosition);\n  }\n  onWheel(direction: boolean, screenPosition: Vector, realPosition: Vector) {\n    if (this.disabled) return;\n\n    this.call('wheel', this, direction, screenPosition, realPosition);\n  }\n  onContextMenu(): void { /**/ }\n\n  serialize(): SerializedHorizontalLayout {\n    return {\n      propName: this.propName,\n      input: this.input ? this.input.serialize() : null,\n      output: this.output ? this.output.serialize() : null,\n      id: this.id,\n      style: this.style,\n      hitColor: this.hitColor.serialize(),\n      type: this.type,\n      childs: this.children.map(child => (child as any).serialize())\n    }\n  }\n  static deSerialize(node: Node, data: SerializedHorizontalLayout): HorizontalLayout {\n    let hozLayout = new HorizontalLayout(node, [], {\n      style: data.style,\n      input: data.input,\n      output: data.output,\n      id: data.id,\n      hitColor: Color.deSerialize(data.hitColor)\n    });\n\n    hozLayout.children.push(...data.childs.map(serializedChild => {\n      switch (serializedChild.type) {\n        case UIType.Button: return Button.deSerialize(node, serializedChild);\n        case UIType.Container: return Container.deSerialize(node, serializedChild);\n        case UIType.Display: return Display.deSerialize(node, serializedChild);\n        case UIType.HorizontalLayout: return HorizontalLayout.deSerialize(node, serializedChild);\n        case UIType.Stack: return Stack.deSerialize(node, serializedChild);\n        case UIType.Image: return Image.deSerialize(node, serializedChild);\n        case UIType.Input: return Input.deSerialize(node, serializedChild);\n        case UIType.Label: return Label.deSerialize(node, serializedChild);\n        case UIType.Select: return Select.deSerialize(node, serializedChild);\n        case UIType.Slider: return Slider.deSerialize(node, serializedChild);\n        case UIType.Source: return Source.deSerialize(node, serializedChild);\n        case UIType.Toggle: return Toggle.deSerialize(node, serializedChild);\n        default: return;\n      }\n    }));\n    return hozLayout;\n  }\n}\n\nexport interface HorizontalLayoutStyle extends UINodeStyle {\n  spacing?: number\n}\nlet DefaultHorizontalLayoutStyle = () => {\n  return {\n    spacing: 0,\n    visible: true\n  };\n};\n\nexport interface SerializedHorizontalLayout extends SerializedUINode { }\n\ninterface HorizontalLayoutOptions {\n  style?: HorizontalLayoutStyle,\n  input?: boolean | SerializedTerminal,\n  output?: boolean | SerializedTerminal,\n  id?: string,\n  hitColor?: Color\n}\nlet DefaultHorizontalLayoutOptions = (): HorizontalLayoutOptions => {\n  return {};\n};\n","import { Color } from \"../core/color\";\nimport { Serializable } from \"../common/interfaces\";\nimport { Node } from \"../core/node\";\nimport { Vector } from \"../core/vector\";\nimport { imageIcon } from \"../resource/icons\";\nimport { Log } from \"../utils/logger\";\nimport { SerializedUINode, UINode, UINodeStyle, UIType } from \"./ui-node\";\nimport { Align } from \"../common/enums\";\nimport { SerializedTerminal, Terminal, TerminalType } from \"../core/terminal\";\nimport { FlowState } from '../core/flow';\nimport { get } from \"../utils/utils\";\n\nexport class Image extends UINode implements Serializable {\n  private imageCanvas: OffscreenCanvas | HTMLCanvasElement;\n  private imageContext: OffscreenCanvasRenderingContext2D | CanvasRenderingContext2D;\n  private source: HTMLImageElement;\n  private ratio: number;\n  private _src: string;\n\n  get src(): string {\n    if (this.propName) return this.getProp();\n    return this._src;\n  }\n  set src(src: string) {\n    let oldVal = this._src;\n    let newVal = src;\n\n    if (this.propName) this.setProp(newVal);\n    else this._src = newVal;\n    this.setupImage();\n\n    if (this.node.flow.state !== FlowState.Stopped) this.call('change', this, oldVal, newVal);\n  }\n\n  constructor(\n    node: Node,\n    sourceString: string,\n    options: ImageOptions = DefaultImageOptions()\n  ) {\n    super(node, Vector.Zero(), UIType.Image, {\n      style: options.style ? { ...DefaultImageStyle(), ...options.style } : DefaultImageStyle(),\n      propName: options.propName,\n      input: options.input && (typeof options.input === 'boolean'\n        ? new Terminal(node, TerminalType.IN, 'string', '', {})\n        : Terminal.deSerialize(node, options.input)),\n      output: options.output && (typeof options.output === 'boolean'\n        ? new Terminal(node, TerminalType.OUT, 'string', '', {})\n        : Terminal.deSerialize(node, options.output)),\n      id: options.id,\n      hitColor: options.hitColor\n    });\n\n    this._src = get(sourceString, imageIcon);\n    this.setupImage();\n  }\n\n  setupImage() {\n    if (!this.source) {\n      this.source = document.createElement('img');\n      this.source.onerror = (error) => Log.error(error);\n      this.source.onload = () => {\n        this.imageCanvas.width = this.source.width;\n        this.imageCanvas.height = this.source.height;\n\n        this.imageContext.drawImage(this.source, 0, 0);\n        this.ratio = this.source.width / this.source.height;\n        this.reflow();\n        this.node.ui.update();\n      };\n    }\n    if (!this.imageCanvas) {\n      if (typeof OffscreenCanvas !== 'undefined') this.imageCanvas = new OffscreenCanvas(0, 0);\n      else {\n        this.imageCanvas = document.createElement('canvas');\n        this.imageCanvas.width = 0;\n        this.imageCanvas.height = 0;\n      }\n      this.imageContext = this.imageCanvas.getContext('2d');\n    }\n\n    this.source.src = this._src;\n  }\n\n  paint(): void {\n    if (this.imageCanvas && this.imageCanvas.width > 0 && this.imageCanvas.height > 0) {\n      let x = this.position.x;\n      if (this.source.width < this.node.ui.contentWidth) {\n        if (this.style.align === Align.Center) x += this.node.ui.contentWidth / 2 - this.source.width / 2;\n        else if (this.style.align === Align.Right) x += + (this.node.ui.contentWidth - this.source.width);\n      }\n      this.context.drawImage(\n        this.imageCanvas, 0, 0, this.source.width, this.source.height,\n        x, this.position.y, this.source.width < this.width ? this.source.width : this.width, this.height\n      );\n    }\n  }\n  paintLOD1() {\n    if (this.imageCanvas) {\n      let x = this.position.x;\n      if (this.source.width < this.node.ui.contentWidth) {\n        if (this.style.align === Align.Center) x += this.node.ui.contentWidth / 2 - this.source.width / 2;\n        else if (this.style.align === Align.Right) x += + (this.node.ui.contentWidth - this.source.width);\n      }\n      let context = this.context;\n      context.fillStyle = 'lightgrey';\n      context.strokeStyle = '#000';\n      context.fillRect(x, this.position.y, this.source.width < this.width ? this.source.width : this.width, this.height);\n      context.strokeRect(x, this.position.y, this.source.width < this.width ? this.source.width : this.width, this.height)\n    }\n  }\n  offPaint(): void {\n    this.offUIContext.fillStyle = this.hitColor.hexValue;\n\n    let x = this.position.x;\n    if (this.source.width < this.node.ui.contentWidth) {\n      if (this.style.align === Align.Center) x += this.node.ui.contentWidth / 2 - this.source.width / 2;\n      else if (this.style.align === Align.Right) x += + (this.node.ui.contentWidth - this.source.width);\n    }\n    this.offUIContext.fillRect(x, this.position.y, this.source.width < this.width ? this.source.width : this.width, this.height);\n  }\n\n  reflow(): void {\n    if (!this.source.width || !this.source.height) return;\n\n    if (this.source.width > this.width) {\n      this.height = this.width / this.ratio;\n    } else {\n      this.width = this.source.width;\n      this.height = this.source.height;\n    }\n\n    if (this.input) {\n      this.input.position.assign(\n        this.node.position.x - this.node.style.terminalStripMargin - this.input.style.radius,\n        this.position.y + this.height / 2\n      );\n    }\n    if (this.output) {\n      this.output.position.assign(\n        this.node.position.x + this.node.width + this.node.style.terminalStripMargin + this.output.style.radius,\n        this.position.y + this.height / 2\n      );\n    }\n  }\n\n  onPropChange(_oldVal: any, newVal: any) {\n    this._src = newVal;\n    this.setupImage();\n\n    this.output && this.output.setData(newVal);\n  }\n  onOver(screenPosition: Vector, realPosition: Vector): void {\n    if (this.disabled) return;\n\n    this.call('over', this, screenPosition, realPosition);\n  }\n  onDown(screenPosition: Vector, realPosition: Vector): void {\n    if (this.disabled) return;\n\n    this.call('down', this, screenPosition, realPosition);\n  }\n  onUp(screenPosition: Vector, realPosition: Vector): void {\n    if (this.disabled) return;\n\n    this.call('up', this, screenPosition, realPosition);\n  }\n  onClick(screenPosition: Vector, realPosition: Vector): void {\n    if (this.disabled) return;\n\n    this.call('click', this, screenPosition, realPosition);\n  }\n  onDrag(screenPosition: Vector, realPosition: Vector): void {\n    if (this.disabled) return;\n\n    this.call('drag', this, screenPosition, realPosition);\n  }\n  onEnter(screenPosition: Vector, realPosition: Vector) {\n    if (this.disabled) return;\n\n    this.call('enter', this, screenPosition, realPosition);\n  }\n  onExit(screenPosition: Vector, realPosition: Vector) {\n    if (this.disabled) return;\n\n    this.call('exit', this, screenPosition, realPosition);\n  }\n  onWheel(direction: boolean, screenPosition: Vector, realPosition: Vector) {\n    if (this.disabled) return;\n\n    this.call('wheel', this, direction, screenPosition, realPosition);\n  }\n  onContextMenu(): void { /**/ }\n\n  serialize(): SerializedImage {\n    return {\n      source: this._src,\n      propName: this.propName,\n      input: this.input ? this.input.serialize() : null,\n      output: this.output ? this.output.serialize() : null,\n      style: this.style,\n      id: this.id,\n      hitColor: this.hitColor.serialize(),\n      type: this.type,\n      childs: []\n    }\n  }\n  static deSerialize(node: Node, data: SerializedImage): Image {\n    return new Image(node, data.source, {\n      propName: data.propName,\n      input: data.input,\n      output: data.output,\n      style: data.style,\n      id: data.id,\n      hitColor: Color.deSerialize(data.hitColor)\n    });\n  }\n}\n\nexport interface ImageStyle extends UINodeStyle {\n  align?: Align\n}\nlet DefaultImageStyle = () => {\n  return {\n    align: Align.Left,\n    visible: true\n  };\n};\n\nexport interface SerializedImage extends SerializedUINode {\n  source: string\n}\n\ninterface ImageOptions {\n  propName?: string,\n  input?: boolean | SerializedTerminal,\n  output?: boolean | SerializedTerminal,\n  style?: ImageStyle,\n  id?: string,\n  hitColor?: Color\n}\nlet DefaultImageOptions = (): ImageOptions => {\n  return {};\n};\n","export * from './2d-slider';\nexport * from './button';\nexport * from './container';\nexport * from './dial';\nexport * from './display';\nexport * from './envelope';\nexport * from './horizontal-layout';\nexport * from './image';\nexport * from './input';\nexport * from './label';\nexport * from './radio-group';\nexport * from './select';\nexport * from './slider';\nexport * from './source';\nexport * from './stack';\nexport * from './toggle';\nexport * from './ui-node';\nexport * from './v-slider';\n","import { Vector } from \"../core/vector\";\nimport { SerializedUINode, UINode, UINodeStyle, UIType } from \"./ui-node\";\nimport { Node } from '../core/node';\nimport { Label } from './label';\nimport { Terminal, TerminalType, SerializedTerminal } from \"../core/terminal\";\nimport { Serializable } from \"../common/interfaces\";\nimport { Color } from \"../core/color\";\nimport { FlowState } from \"../core/flow\";\nimport { Align } from \"../common/enums\";\nimport { exists, get } from \"../utils/utils\";\n\nexport class Input extends UINode implements Serializable {\n  label: Label;\n  inputEl: HTMLInputElement;\n  private _value: string | number;\n\n  get value(): string | number {\n    if (this.propName) return this.getProp();\n    return this._value;\n  }\n  set value(value: string | number) {\n    let val: string | number;\n    if (this.style.type === InputType.Number && typeof value === 'string') val = parseFloat(value);\n    else val = value;\n\n    let oldVal = this.value;\n    let newVal = val;\n\n    if (this.propName) this.setProp(newVal);\n    else {\n      this._value = newVal;\n      this.setLabelText(this._value);\n      this.inputEl.value = this._value.toString();\n    }\n    if (this.node.flow.state !== FlowState.Stopped) this.call('change', this, newVal, oldVal);\n  }\n\n  constructor(\n    node: Node,\n    options: InputOptions = DefaultInputOptions(node)\n  ) {\n    super(\n      node, Vector.Zero(), UIType.Input, {\n      style: options.style ? { ...DefaultInputStyle(), ...options.style } : DefaultInputStyle(),\n      propName: options.propName,\n      input: options.input && (typeof options.input === 'boolean'\n        ? new Terminal(node, TerminalType.IN, options.style.type, '', {})\n        : Terminal.deSerialize(node, options.input)),\n      output: options.output && (typeof options.output === 'boolean'\n        ? new Terminal(node, TerminalType.OUT, options.style.type, '', {})\n        : Terminal.deSerialize(node, options.output)),\n      id: options.id,\n      hitColor: options.hitColor\n    });\n\n    this.height = get(options.height, this.node.style.rowHeight);\n\n    if (this.style.type === InputType.Number && typeof options.value === 'string') options.value = parseFloat(options.value);\n    this._value = options.value;\n\n    this.setupLabel();\n    this.setupInputElement();\n\n    if (this.input) {\n      this.input.on('connect', (_, connector) => {\n        if (connector.data) this.value = connector.data;\n      });\n      this.input.on('data', (_, data) => {\n        if (data) this.value = data;\n      });\n    }\n    if (this.output) this.output.on('connect', (_, connector) => connector.data = this.value);\n\n    this.node.on('process', () => {\n      if (this.output) this.output.setData(this.value);\n    });\n  }\n\n  setupLabel() {\n    this.label = new Label(this.node, this.value.toString(), {\n      style: {\n        fontSize: this.style.fontSize,\n        font: this.style.font,\n        align: this.style.align,\n        color: this.style.color,\n        padding: 5,\n        precision: this.style.precision || null\n      }, height: this.height\n    });\n    this.label.on('click', () => {\n      if (document.activeElement !== this.inputEl) {\n        let realPosition = this.position.transform(this.node.flow.flowConnect.transform);\n        Object.assign(this.inputEl.style, {\n          'visibility': 'visible',\n          'pointer-events': 'all',\n          'top': (realPosition.y + this.node.flow.flowConnect.canvasDimensions.top + 1) + 'px',\n          'left': (realPosition.x + this.node.flow.flowConnect.canvasDimensions.left + 1) + 'px',\n          'width': (this.width - 1) * this.node.flow.flowConnect.scale + 'px',\n          'height': (this.height - 1) * this.node.flow.flowConnect.scale + 'px',\n          'font-family': this.style.font,\n          'font-size': parseInt(this.style.fontSize.replace('px', '')) * this.node.flow.flowConnect.scale + 'px',\n          'color': this.style.color,\n          'background-color': this.inputEl.validity.patternMismatch ? 'red' : this.style.backgroundColor,\n          'text-align': this.style.align\n        });\n        if (this.style.type === InputType.Number) this.inputEl.step = this.style.step;\n        this.inputEl.focus();\n      }\n    });\n    this.children.push(this.label);\n  }\n  setupInputElement() {\n    this.inputEl = document.createElement('input');\n    this.inputEl.className = 'flow-connect-input';\n    this.inputEl.spellcheck = false;\n    let inputType = this.style.type === 'string' ? 'text' : this.style.type\n    this.inputEl.type = this.style.pattern ? 'text' : inputType;\n    this.inputEl.value = this.value.toString();\n    if (this.style.pattern) this.inputEl.pattern = this.style.pattern;\n    if (this.style.type === InputType.Number && this.style.step) this.inputEl.step = this.style.step;\n    if (this.style.maxLength) this.inputEl.maxLength = this.style.maxLength;\n\n    this.inputEl.addEventListener('blur', () => {\n      this.inputEl.style.visibility = 'hidden';\n      this.inputEl.style.pointerEvents = 'none';\n      this.value = this.inputEl.value;\n\n      this.setLabelText(this.style.type === InputType.Number ? parseFloat(this.value) : this.value.toString());\n\n      this.call('blur', this);\n    });\n    this.inputEl.oninput = () => {\n      if (this.style.pattern) {\n        this.inputEl.style.backgroundColor = this.inputEl.validity.patternMismatch ? 'orange' : this.style.backgroundColor;\n        this.label.style.color = this.inputEl.validity.patternMismatch ? 'orange' : this.style.color;\n      }\n      this.call('input', this);\n    }\n    document.body.appendChild(this.inputEl);\n  }\n  setLabelText(value: any) {\n    this.label.text = typeof value === 'number' && exists(this.style.precision) ? value.toFixed(this.style.precision) : value;\n  }\n\n  paint(): void {\n    this.context.strokeStyle = this.style.border;\n    this.context.strokeRect(this.position.x, this.position.y, this.width, this.height);\n  }\n  paintLOD1() {\n    let context = this.context;\n    context.strokeStyle = this.style.border;\n    context.fillStyle = this.style.backgroundColor;\n    context.strokeRect(this.position.x, this.position.y, this.width, this.height);\n    context.fillRect(this.position.x, this.position.y, this.width, this.height);\n  }\n  offPaint(): void {\n    this.offUIContext.fillStyle = this.hitColor.hexValue;\n    this.offUIContext.fillRect(this.position.x, this.position.y, this.width, this.height);\n  }\n\n  reflow(): void {\n    this.label.position = this.position;\n    this.label.height = this.height;\n    this.label.width = this.width;\n\n    if (this.input) {\n      this.input.position.assign(\n        this.node.position.x - this.node.style.terminalStripMargin - this.input.style.radius,\n        this.position.y + this.height / 2\n      );\n    }\n    if (this.output) {\n      this.output.position.assign(\n        this.node.position.x + this.node.width + this.node.style.terminalStripMargin + this.output.style.radius,\n        this.position.y + this.height / 2\n      );\n    }\n  }\n\n  onPropChange(_oldVal: any, newVal: any) {\n    if (this.style.type === InputType.Number && typeof newVal === 'string') newVal = parseFloat(newVal);\n\n    this._value = newVal;\n    this.setLabelText(this._value);\n    this.inputEl.value = this._value.toString();\n\n    this.output && this.output.setData(this._value);\n  }\n  onOver(screenPosition: Vector, realPosition: Vector): void {\n    if (this.disabled) return;\n\n    this.call('over', this, screenPosition, realPosition);\n  }\n  onDown(screenPosition: Vector, realPosition: Vector): void {\n    if (this.disabled) return;\n\n    this.call('down', this, screenPosition, realPosition);\n  }\n  onUp(screenPosition: Vector, realPosition: Vector): void {\n    if (this.disabled) return;\n\n    this.call('up', this, screenPosition, realPosition);\n  }\n  onClick(screenPosition: Vector, realPosition: Vector): void {\n    if (this.disabled) return;\n\n    this.call('click', this, screenPosition, realPosition);\n  }\n  onDrag(screenPosition: Vector, realPosition: Vector): void {\n    if (this.disabled) return;\n\n    this.call('drag', this, screenPosition, realPosition);\n  }\n  onEnter(screenPosition: Vector, realPosition: Vector) {\n    if (this.disabled) return;\n\n    this.call('enter', this, screenPosition, realPosition);\n  }\n  onExit(screenPosition: Vector, realPosition: Vector) {\n    if (this.disabled) return;\n\n    this.call('exit', this, screenPosition, realPosition);\n  }\n  onWheel(direction: boolean, screenPosition: Vector, realPosition: Vector) {\n    if (this.disabled) return;\n\n    this.call('wheel', this, direction, screenPosition, realPosition);\n  }\n  onContextMenu(): void {\n    if (this.disabled) return;\n  }\n\n  serialize(): SerializedInput {\n    return {\n      value: this.value,\n      propName: this.propName,\n      input: this.input ? this.input.serialize() : null,\n      output: this.output ? this.output.serialize() : null,\n      height: this.height,\n      style: this.style,\n      id: this.id,\n      hitColor: this.hitColor.serialize(),\n      type: this.type,\n      childs: []\n    }\n  }\n  static deSerialize(node: Node, data: SerializedInput): Input {\n    return new Input(node, {\n      value: data.value,\n      propName: data.propName,\n      input: data.input,\n      output: data.output,\n      height: data.height,\n      style: data.style,\n      id: data.id,\n      hitColor: Color.deSerialize(data.hitColor)\n    });\n  }\n}\n\nexport enum InputType {\n  Text = 'string',\n  Number = 'number'\n}\n\nexport interface InputStyle extends UINodeStyle {\n  backgroundColor?: string,\n  color?: string,\n  fontSize?: string,\n  font?: string,\n  border?: string,\n  type?: InputType,\n  align?: Align,\n  precision?: number,\n  pattern?: string,\n  step?: string,\n  maxLength?: number,\n}\nlet DefaultInputStyle = (): InputStyle => {\n  return {\n    backgroundColor: '#eee',\n    color: '#000',\n    fontSize: '11px',\n    font: 'arial',\n    border: '1px solid black',\n    align: Align.Left,\n    type: InputType.Text\n  };\n};\n\nexport interface SerializedInput extends SerializedUINode {\n  value: string | number,\n  height: number\n}\n\ninterface InputOptions {\n  value?: string | number,\n  propName?: string,\n  input?: boolean | SerializedTerminal,\n  output?: boolean | SerializedTerminal,\n  height?: number,\n  style?: InputStyle,\n  id?: string,\n  hitColor?: Color\n}\nlet DefaultInputOptions = (node: Node): InputOptions => {\n  return {\n    height: node.style.rowHeight * 1.5\n  };\n}\n","import { Terminal, TerminalType, SerializedTerminal } from \"../core/terminal\";\nimport { Node } from \"../core/node\";\nimport { Vector } from \"../core/vector\";\nimport { SerializedUINode, UINode, UINodeStyle, UIType } from \"./ui-node\";\nimport { Serializable } from \"../common/interfaces\";\nimport { Color } from \"../core/color\";\nimport { binarySearch, exists, get } from \"../utils/utils\";\nimport { FlowState } from \"../core/flow\";\nimport { Align } from \"../common/enums\";\n\nexport class Label extends UINode implements Serializable {\n  private displayText: string;\n  private _text: string | number;\n  private textWidth: number;    // This may be smaller due to surrounding width constraints (this is som...)\n  private orgTextWidth: number; // While this is the actual width                           (this is some text)\n  private textHeight: number;\n\n  get text(): string {\n    let value;\n    if (this.propName) value = this.getProp();\n    else value = this._text;\n\n    if (typeof value === 'number') value = this.format(value);\n    return value;\n  }\n  set text(text: string | number) {\n    let oldVal = this._text;\n    let newVal = text;\n\n    if (this.propName) {\n      this.setProp(newVal);\n    } else {\n      this._text = newVal;\n      this.reflow();\n    }\n\n    if (this.node.flow.state !== FlowState.Stopped) this.call('change', this, oldVal, newVal);\n  }\n\n  constructor(\n    node: Node,\n    text: string | number,\n    options: LabelOptions = DefaultLabelOptions(node)\n  ) {\n    super(node, Vector.Zero(), UIType.Label, {\n      style: options.style ? { ...DefaultLabelStyle(), ...options.style } : DefaultLabelStyle(),\n      propName: options.propName,\n      input: options.input && (typeof options.input === 'boolean'\n        ? new Terminal(node, TerminalType.IN, 'any', '', {})\n        : Terminal.deSerialize(node, options.input)),\n      output: options.output && (typeof options.output === 'boolean'\n        ? new Terminal(node, TerminalType.OUT, 'string', '', {})\n        : Terminal.deSerialize(node, options.output)),\n      id: options.id,\n      hitColor: options.hitColor\n    });\n\n    this._text = this.propName ? this.getProp() : text;\n    this.reflow();\n\n    this.height = get(options.height, this.textHeight + 5);\n    if (!this.style.grow) this.width = this.orgTextWidth;\n\n    if (this.input) {\n      this.input.on('connect', (_, connector) => {\n        if (exists(connector.data)) this.text = connector.data;\n      });\n      this.input.on('data', (_, data) => {\n        if (exists(data)) this.text = data;\n      });\n    }\n    if (this.output) this.output.on('connect', (_, connector) => connector.data = this.text);\n\n    this.node.on('process', () => {\n      if (this.output) this.output.setData(this.text);\n    });\n  }\n\n  paint(): void {\n    let context = this.context;\n\n    context.fillStyle = this.style.backgroundColor;\n    context.fillRect(this.position.x, this.position.y, this.width, this.height);\n\n    context.fillStyle = this.style.color;\n    context.font = this.style.fontSize + ' ' + this.style.font;\n    context.textBaseline = 'middle';\n    let y = this.position.y + this.height / 2;\n    let x = this.position.x;\n    if (this.style.align === Align.Center) {\n      x += this.width / 2 - this.textWidth / 2;\n    } else if (this.style.align === Align.Right) {\n      x += this.width - this.textWidth - this.style.padding;\n    } else {\n      x += this.style.padding\n    }\n\n    context.fillText(this.displayText, x, y);\n  }\n  paintLOD1() {\n    let context = this.context;\n    context.strokeStyle = '#000';\n    context.fillStyle = this.style.color;\n    context.strokeRect(this.position.x, this.position.y, this.width, this.height);\n    context.fillRect(this.position.x, this.position.y, this.width, this.height);\n  }\n  offPaint(): void {\n    this.offUIContext.fillStyle = this.hitColor.hexValue;\n    this.offUIContext.fillRect(this.position.x, this.position.y, this.width, this.height);\n  }\n\n  reflow(): void {\n    let context = this.context;\n    context.font = this.style.fontSize + ' ' + this.style.font;\n    this.orgTextWidth = context.measureText(this.text).width;\n    this.displayText = this.getBestFitString();\n    let metrics = context.measureText(this.displayText);\n    context.font = null;\n    this.textWidth = metrics.width;\n\n    this.textHeight = metrics.actualBoundingBoxAscent + metrics.actualBoundingBoxDescent + 5;\n\n    if (this.input) {\n      this.input.position.assign(\n        this.node.position.x - this.node.style.terminalStripMargin - this.input.style.radius,\n        this.position.y + this.height / 2\n      );\n    }\n    if (this.output) {\n      this.output.position.assign(\n        this.node.position.x + this.node.width + this.node.style.terminalStripMargin + this.output.style.radius,\n        this.position.y + this.height / 2\n      );\n    }\n  }\n  getBestFitString(): string {\n    let text = this.text;\n    if (typeof (text as any) !== 'string') text = text.toString();\n\n    let width = this.context.measureText(text).width;\n    const ellipsis = '';\n    const ellipsisWidth = this.context.measureText(ellipsis).width;\n    if (width <= this.width || width <= ellipsisWidth) return text;\n\n    const index = binarySearch({\n      max: text.length,\n      getValue: (idx: number) => this.context.measureText(text.substring(0, idx)).width,\n      match: this.width - ellipsisWidth,\n    });\n\n    return text.substring(0, index) + ellipsis;\n  }\n  format(value: number): string {\n    return exists(this.style.precision) ? value.toFixed(this.style.precision) : value.toString();\n  }\n\n  onPropChange(_oldVal: any, newVal: any) {\n    this._text = newVal;\n    this.reflow();\n\n    this.output && this.output.setData(this._text);\n  }\n  onOver(screenPosition: Vector, realPosition: Vector): void {\n    if (this.disabled) return;\n\n    this.call('over', this, screenPosition, realPosition);\n  }\n  onDown(screenPosition: Vector, realPosition: Vector): void {\n    if (this.disabled) return;\n\n    this.call('down', this, screenPosition, realPosition);\n  }\n  onUp(screenPosition: Vector, realPosition: Vector): void {\n    if (this.disabled) return;\n\n    this.call('up', this, screenPosition, realPosition);\n  }\n  onClick(screenPosition: Vector, realPosition: Vector): void {\n    if (this.disabled) return;\n\n    this.call('click', this, screenPosition, realPosition);\n  }\n  onDrag(screenPosition: Vector, realPosition: Vector): void {\n    if (this.disabled) return;\n\n    this.call('drag', this, screenPosition, realPosition);\n  }\n  onEnter(screenPosition: Vector, realPosition: Vector) {\n    if (this.disabled) return;\n\n    this.call('enter', this, screenPosition, realPosition);\n  }\n  onExit(screenPosition: Vector, realPosition: Vector) {\n    if (this.disabled) return;\n\n    this.call('exit', this, screenPosition, realPosition);\n  }\n  onWheel(direction: boolean, screenPosition: Vector, realPosition: Vector) {\n    if (this.disabled) return;\n\n    this.call('wheel', this, direction, screenPosition, realPosition);\n  }\n  onContextMenu(): void {\n    if (this.disabled) return;\n  }\n\n  serialize(): SerializedLabel {\n    return {\n      text: this.text,\n      propName: this.propName,\n      input: this.input ? this.input.serialize() : null,\n      output: this.output ? this.output.serialize() : null,\n      height: this.height,\n      style: this.style,\n      id: this.id,\n      hitColor: this.hitColor.serialize(),\n      type: this.type,\n      childs: []\n    }\n  }\n  static deSerialize(node: Node, data: SerializedLabel): Label {\n    return new Label(node, data.text, {\n      propName: data.propName,\n      input: data.input,\n      output: data.output,\n      height: data.height,\n      style: data.style,\n      id: data.id,\n      hitColor: Color.deSerialize(data.hitColor)\n    });\n  }\n}\n\nexport interface LabelStyle extends UINodeStyle {\n  color?: string,\n  backgroundColor?: string,\n  fontSize?: string,\n  font?: string,\n  align?: Align,\n  precision?: number,\n  padding?: number\n}\nlet DefaultLabelStyle = () => {\n  return {\n    color: '#000',\n    backgroundColor: 'transparent',\n    fontSize: '11px',\n    font: 'arial',\n    align: Align.Left,\n    padding: 0,\n    visible: true\n  };\n};\n\nexport interface SerializedLabel extends SerializedUINode {\n  text: string,\n  height: number\n}\n\ninterface LabelOptions {\n  propName?: string,\n  input?: boolean | SerializedTerminal,\n  output?: boolean | SerializedTerminal,\n  height?: number,\n  style?: LabelStyle,\n  id?: string,\n  hitColor?: Color\n}\nlet DefaultLabelOptions = (node: Node): LabelOptions => {\n  return {\n    height: node.style.rowHeight * 1.5\n  }\n};\n","import { Terminal, TerminalType, SerializedTerminal } from \"../core/terminal\";\nimport { Node } from \"../core/node\";\nimport { Vector } from \"../core/vector\";\nimport { SerializedUINode, UINode, UINodeStyle, UIType } from \"./ui-node\";\nimport { Serializable } from \"../common/interfaces\";\nimport { Color } from \"../core/color\";\nimport { FlowState } from \"../core/flow\";\nimport { Label } from \"./label\";\nimport { Align } from \"../common/enums\";\nimport { get } from \"../utils/utils\";\n\nexport class RadioGroup extends UINode implements Serializable {\n  private _values: string[];\n  private _selected: string;\n\n  get selected(): string {\n    if (this.propName) return this.getProp();\n    return this._selected;\n  }\n  set selected(selected: string) {\n    if (!this._values.includes(selected)) selected = this._values[0];\n\n    let oldVal = this.selected;\n    let newVal = selected;\n\n    if (this.propName) this.setProp(newVal);\n    else this._selected = newVal;\n\n    if (this.node.flow.state !== FlowState.Stopped) this.call('change', this, oldVal, newVal);\n  }\n\n  constructor(\n    node: Node,\n    values: string[] = ['default'],\n    selected: string = 'default',\n    options: RadioGroupOptions = DefaultRadioGroupOptions(node)\n  ) {\n    super(node, Vector.Zero(), UIType.RadioGroup, {\n      style: options.style ? { ...DefaultRadioGroupStyle(), ...options.style } : DefaultRadioGroupStyle(),\n      propName: options.propName,\n      input: options.input && (typeof options.input === 'boolean'\n        ? new Terminal(node, TerminalType.IN, 'boolean', '', {})\n        : Terminal.deSerialize(node, options.input)),\n      output: options.output && (typeof options.output === 'boolean'\n        ? new Terminal(node, TerminalType.OUT, 'boolean', '', {})\n        : Terminal.deSerialize(node, options.output)),\n      id: options.id,\n      hitColor: options.hitColor\n    });\n\n    if (values.length === 0) values = ['default'];\n    this._values = values;\n    let selectedValue = this.propName ? this.getProp() : selected;\n    this._selected = this._values.includes(selectedValue) ? selectedValue : this._values[0];\n    this.height = get(options.height, this.node.style.rowHeight);\n\n    if (this.input) {\n      this.input.on('connect', (_, connector) => {\n        if (connector.data) this._selected = connector.data;\n      });\n      this.input.on('data', (_, data) => {\n        if (typeof data !== 'undefined') this._selected = data;\n      });\n    }\n    if (this.output) this.output.on('connect', (_, connector) => connector.data = this._selected);\n\n    this.setupLabels();\n\n    this.node.on('process', () => {\n      if (this.output) this.output.setData(this._selected);\n    });\n  }\n\n  setupLabels() {\n    this.children.push(...this._values.map(option => {\n      let label = new Label(this.node, option, {\n        style: { align: Align.Center, backgroundColor: this.style.backgroundColor, color: this.style.color }\n      });\n\n      label.on('click', (selectedLabel: Label) => {\n        if (selectedLabel.text === this.selected) return;\n        let lastSelectedLabel = this.children[this._values.indexOf(this.selected)];\n        Object.assign(lastSelectedLabel.style, {\n          backgroundColor: this.style.backgroundColor,\n          color: this.style.color\n        });\n        Object.assign(selectedLabel.style, {\n          backgroundColor: this.style.selectedBackgroundColor,\n          color: this.style.selectedColor\n        });\n        this.selected = selectedLabel.text;\n      });\n\n      return label;\n    }));\n    Object.assign(this.children[this._values.indexOf(this._selected)].style, {\n      backgroundColor: this.style.selectedBackgroundColor,\n      color: this.style.selectedColor\n    });\n  }\n\n  paint(): void {\n    let context = this.context;\n    context.strokeStyle = this.style.borderColor;\n    context.lineWidth = this.style.borderWidth\n    context.strokeRect(this.position.x, this.position.y, this.width, this.height);\n\n    let commonWidth = this.width / this.children.length;\n    let x = this.position.x + commonWidth;\n    for (let i = 0; i < this.children.length - 1; i += 1) {\n      context.beginPath();\n      context.moveTo(x, this.position.y);\n      context.lineTo(x, this.position.y + this.height);\n      context.stroke();\n      x += commonWidth;\n    }\n  }\n  paintLOD1() {\n    let context = this.context;\n    context.strokeStyle = this.style.borderColor;\n    context.fillStyle = this.style.backgroundColor;\n    context.strokeRect(this.position.x, this.position.y, this.width, this.height);\n    context.fillRect(this.position.x, this.position.y, this.width, this.height);\n  }\n  offPaint(): void {\n    this.offUIContext.fillStyle = this.hitColor.hexValue;\n    this.offUIContext.fillRect(this.position.x, this.position.y, this.width, this.height);\n  }\n\n  reflow(): void {\n    let x = this.position.x;\n    this.children.forEach(child => {\n      child.height = this.height;\n      child.width = this.width / this.children.length;\n      child.position.assign(x, this.position.y);\n      x += child.width;\n    });\n\n    if (this.input) {\n      this.input.position.assign(\n        this.node.position.x - this.node.style.terminalStripMargin - this.input.style.radius,\n        this.position.y + this.height / 2\n      );\n    }\n    if (this.output) {\n      this.output.position.assign(\n        this.node.position.x + this.node.width + this.node.style.terminalStripMargin + this.output.style.radius,\n        this.position.y + this.height / 2\n      );\n    }\n  }\n\n  onPropChange(_oldVal: any, newVal: any) {\n    if (!this._values.includes(newVal)) newVal = this._values[0];\n    this._selected = newVal;\n\n    this.output && this.output.setData(this._selected);\n  }\n  onOver(screenPosition: Vector, realPosition: Vector): void {\n    if (this.disabled) return;\n\n    this.call('over', this, screenPosition, realPosition);\n  }\n  onDown(screenPosition: Vector, realPosition: Vector): void {\n    if (this.disabled) return;\n\n    this.call('down', this, screenPosition, realPosition);\n  }\n  onUp(screenPosition: Vector, realPosition: Vector): void {\n    if (this.disabled) return;\n\n    this.call('up', this, screenPosition, realPosition);\n  }\n  onClick(screenPosition: Vector, realPosition: Vector): void {\n    if (this.disabled) return;\n\n    this.call('click', this, screenPosition, realPosition);\n  }\n  onDrag(screenPosition: Vector, realPosition: Vector): void {\n    if (this.disabled) return;\n\n    this.call('drag', this, screenPosition, realPosition);\n  }\n  onEnter(screenPosition: Vector, realPosition: Vector) {\n    if (this.disabled) return;\n\n    this.call('enter', this, screenPosition, realPosition);\n  }\n  onExit(screenPosition: Vector, realPosition: Vector) {\n    if (this.disabled) return;\n\n    this.call('exit', this, screenPosition, realPosition);\n  }\n  onWheel(direction: boolean, screenPosition: Vector, realPosition: Vector) {\n    if (this.disabled) return;\n\n    this.call('wheel', this, direction, screenPosition, realPosition);\n  }\n  onContextMenu(): void {\n    if (this.disabled) return;\n  }\n\n  serialize(): SerializedRadioGroup {\n    return {\n      values: this._values,\n      selected: this.selected,\n      propName: this.propName,\n      input: this.input ? this.input.serialize() : null,\n      output: this.output ? this.output.serialize() : null,\n      height: this.height,\n      style: this.style,\n      id: this.id,\n      hitColor: this.hitColor.serialize(),\n      type: this.type,\n      childs: []\n    }\n  }\n  static deSerialize(node: Node, data: SerializedRadioGroup): RadioGroup {\n    return new RadioGroup(node, data.values, data.selected, {\n      propName: data.propName,\n      input: data.input,\n      output: data.output,\n      height: data.height,\n      style: data.style,\n      id: data.id,\n      hitColor: Color.deSerialize(data.hitColor)\n    });\n  }\n}\n\nexport interface RadioGroupStyle extends UINodeStyle {\n  color?: string,\n  selectedColor?: string,\n  backgroundColor?: string,\n  selectedBackgroundColor?: string,\n  borderColor?: string,\n  borderWidth?: number,\n}\nlet DefaultRadioGroupStyle = () => {\n  return {\n    color: '#000',\n    selectedColor: '#fff',\n    backgroundColor: 'transparent',\n    selectedBackgroundColor: '#555',\n    borderColor: '#000',\n    borderWidth: 1,\n    visible: true\n  };\n};\n\nexport interface SerializedRadioGroup extends SerializedUINode {\n  values: string[],\n  selected: string,\n  height: number\n}\n\ninterface RadioGroupOptions {\n  propName?: string,\n  input?: boolean | SerializedTerminal,\n  output?: boolean | SerializedTerminal,\n  height?: number,\n  style?: RadioGroupStyle,\n  id?: string,\n  hitColor?: Color\n}\nlet DefaultRadioGroupOptions = (node: Node): RadioGroupOptions => {\n  return {\n    height: node.style.rowHeight * 1.5\n  }\n};\n","import { Terminal, TerminalType, SerializedTerminal } from \"../core/terminal\";\nimport { Node } from \"../core/node\";\nimport { Vector } from \"../core/vector\";\nimport { Label } from \"./label\";\nimport { SerializedUINode, UINode, UINodeStyle, UIType } from \"./ui-node\";\nimport { Constant } from \"../resource/constants\";\nimport { Serializable } from \"../common/interfaces\";\nimport { Color } from \"../core/color\";\nimport { FlowState } from \"../core/flow\";\nimport { Align } from \"../common/enums\";\nimport { get } from \"../utils/utils\";\n\nexport class Select extends UINode implements Serializable {\n  label: Label;\n  private _selected: string;\n\n  get selected(): string {\n    if (this.propName) {\n      let value = this.getProp();\n      let slctdVal = this.values.includes(value) ? value : this.values[0];\n      value = this.values.length === 0 ? 'None' : slctdVal;\n      return value;\n    }\n    return this._selected;\n  }\n  set selected(selected: string) {\n    let slctdVal = this.values.includes(selected) ? selected : this.values[0];\n\n    let oldVal = this.selected;\n    let newVal = this.values.length === 0 ? 'None' : slctdVal;\n\n    if (this.propName) this.setProp(newVal);\n    else {\n      this._selected = newVal;\n      this.label.text = newVal;\n    }\n    if (this.node.flow.state !== FlowState.Stopped) this.call('change', this, oldVal, newVal);\n  }\n\n  constructor(\n    node: Node,\n    public values: string[] = [],\n    options: SelectOptions = DefaultSelectOptions(node)\n  ) {\n    super(node, Vector.Zero(), UIType.Select, {\n      style: options.style ? { ...DefaultSelectStyle(), ...options.style } : DefaultSelectStyle(),\n      propName: options.propName,\n      input: options.input && (typeof options.input === 'boolean'\n        ? new Terminal(node, TerminalType.IN, 'any', '', {})\n        : Terminal.deSerialize(node, options.input)),\n      output: options.output && (typeof options.output === 'boolean'\n        ? new Terminal(node, TerminalType.OUT, 'string', '', {})\n        : Terminal.deSerialize(node, options.output)),\n      id: options.id,\n      hitColor: options.hitColor\n    });\n\n    this.height = get(options.height, this.node.style.rowHeight);\n    this._selected = this.values.length === 0 ? 'None' : this.values[0];\n\n    this.label = new Label(this.node, this.selected, { style: { align: Align.Center, ...this.style }, height: this.height });\n    this.children.push(this.label);\n\n    if (this.input) {\n      this.input.on('connect', (_, connector) => {\n        if (typeof connector.data === 'number') this.selected = this.values[connector.data];\n        else if (typeof connector.data === 'string') this.selected = connector.data;\n      });\n      this.input.on('data', (_, data) => {\n        if (typeof data === 'number') this.selected = this.values[data];\n        else if (typeof data === 'string') this.selected = data;\n      });\n    }\n    if (this.output) this.output.on('connect', (_, connector) => connector.data = this.selected);\n\n    this.node.on('process', () => {\n      if (this.output) this.output.setData(this.selected);\n    });\n  }\n\n  paint(): void {\n    let context = this.context;\n    context.fillStyle = this.style.arrowColor;\n    context.beginPath();\n    context.moveTo(this.position.x, this.position.y + this.height / 2);\n    context.lineTo(this.position.x + this.height * Constant.SIN_60, this.position.y);\n    context.lineTo(this.position.x + this.height * Constant.SIN_60, this.position.y + this.height);\n    context.lineTo(this.position.x, this.position.y + this.height / 2);\n    context.closePath();\n    context.fill();\n\n    context.fillStyle = this.style.arrowColor;\n    context.beginPath();\n    context.moveTo(this.position.x + this.width, this.position.y + this.height / 2);\n    context.lineTo(this.position.x + this.width - (this.height * Constant.SIN_60), this.position.y);\n    context.lineTo(this.position.x + this.width - (this.height * Constant.SIN_60), this.position.y + this.height);\n    context.lineTo(this.position.x + this.width, this.position.y + this.height / 2);\n    context.closePath();\n    context.fill();\n  }\n  paintLOD1() {\n    let context = this.context;\n    context.fillStyle = this.style.arrowColor;\n    context.strokeStyle = '#000';\n    context.fillRect(this.position.x, this.position.y, this.width, this.height);\n    context.strokeRect(this.position.x, this.position.y, this.width, this.height);\n  }\n  offPaint(): void {\n    this.offUIContext.fillStyle = this.hitColor.hexValue;\n    this.offUIContext.fillRect(this.position.x, this.position.y, this.width, this.height);\n  }\n\n  reflow(): void {\n    this.label.width = this.width * .7;\n    this.label.position.assign(\n      this.position.x + this.width * .15,\n      this.position.y + this.height / 2 - this.label.height / 2\n    );\n\n    if (this.input) {\n      this.input.position.assign(\n        this.node.position.x - this.node.style.terminalStripMargin - this.input.style.radius,\n        this.position.y + this.height / 2\n      );\n    }\n    if (this.output) {\n      this.output.position.assign(\n        this.node.position.x + this.node.width + this.node.style.terminalStripMargin + this.output.style.radius,\n        this.position.y + this.height / 2\n      );\n    }\n  }\n\n  onPropChange(_oldVal: any, newValue: any) {\n    let slctdVal = this.values.includes(newValue) ? newValue : this.values[0];\n    let value = this.values.length === 0 ? 'None' : slctdVal;\n    this._selected = value;\n    this.label.text = this._selected;\n\n    this.output && this.output.setData(this.selected);\n  }\n  onOver(screenPosition: Vector, realPosition: Vector): void {\n    if (this.disabled) return;\n\n    this.call('over', this, screenPosition, realPosition);\n  }\n  onDown(screenPosition: Vector, realPosition: Vector): void {\n    if (this.disabled) return;\n\n    this.call('down', this, screenPosition, realPosition);\n  }\n  onUp(screenPosition: Vector, realPosition: Vector): void {\n    if (this.disabled) return;\n\n    this.call('up', this, screenPosition, realPosition);\n  }\n  onClick(screenPosition: Vector, realPosition: Vector): void {\n    if (this.disabled) return;\n\n    if (this.values.length === 0) return;\n    let direction;\n    if (realPosition.x < this.position.x + this.width * .15) {\n      direction = -1;\n    } else if (realPosition.x > this.position.x + this.width * .85) {\n      direction = 1;\n    } else return;\n\n    let length = this.values.length;\n    this.selected = this.values[(((this.values.indexOf(this.selected) + direction) % length) + length) % length];\n    this.label.text = this.selected;\n\n    this.call('click', this, screenPosition, realPosition);\n  }\n  onDrag(screenPosition: Vector, realPosition: Vector): void {\n    if (this.disabled) return;\n\n    this.call('drag', this, screenPosition, realPosition);\n  }\n  onEnter(screenPosition: Vector, realPosition: Vector) {\n    if (this.disabled) return;\n\n    this.call('enter', this, screenPosition, realPosition);\n  }\n  onExit(screenPosition: Vector, realPosition: Vector) {\n    if (this.disabled) return;\n\n    this.call('exit', this, screenPosition, realPosition);\n  }\n  onWheel(direction: boolean, screenPosition: Vector, realPosition: Vector) {\n    if (this.disabled) return;\n\n    this.call('wheel', this, direction, screenPosition, realPosition);\n  }\n  onContextMenu(): void {\n    if (this.disabled) return;\n  }\n\n  serialize(): SerializedSelect {\n    return {\n      values: this.values,\n      propName: this.propName,\n      input: this.input ? this.input.serialize() : null,\n      output: this.output ? this.output.serialize() : null,\n      height: this.height,\n      style: this.style,\n      id: this.id,\n      hitColor: this.hitColor.serialize(),\n      type: this.type,\n      childs: []\n    }\n  }\n  static deSerialize(node: Node, data: SerializedSelect): Select {\n    return new Select(node, data.values, {\n      propName: data.propName,\n      input: data.input,\n      output: data.output,\n      height: data.height,\n      style: data.style,\n      id: data.id,\n      hitColor: Color.deSerialize(data.hitColor)\n    });\n  }\n}\n\nexport interface SelectStyle extends UINodeStyle {\n  font?: string,\n  fontSize?: string,\n  color?: string,\n  arrowColor?: string\n}\nlet DefaultSelectStyle = () => {\n  return {\n    arrowColor: '#000',\n    visible: true\n  };\n};\n\nexport interface SerializedSelect extends SerializedUINode {\n  values: string[],\n  height: number\n}\n\ninterface SelectOptions {\n  propName?: string,\n  input?: boolean | SerializedTerminal,\n  output?: boolean | SerializedTerminal,\n  height?: number,\n  style?: SelectStyle,\n  id?: string,\n  hitColor?: Color\n}\nlet DefaultSelectOptions = (node: Node): SelectOptions => {\n  return {\n    height: node.style.rowHeight * 1.5\n  }\n}\n","import { Terminal, TerminalType, SerializedTerminal } from \"../core/terminal\";\nimport { Node } from \"../core/node\";\nimport { Vector } from \"../core/vector\";\nimport { clamp, denormalize, exists, get, normalize } from \"../utils/utils\";\nimport { SerializedUINode, UINode, UINodeStyle, UIType } from \"./ui-node\";\nimport { Serializable } from \"../common/interfaces\";\nimport { Color } from \"../core/color\";\nimport { FlowState } from \"../core/flow\";\nimport { Constant } from \"../resource/constants\";\n\nexport class Slider extends UINode implements Serializable {\n  private thumbFill: number;\n  private _value: number;\n\n  get value(): number {\n    if (this.propName) return this.getProp();\n    return this._value;\n  }\n  set value(value: number) {\n    value = clamp(value, this.min, this.max);\n\n    let oldVal = this.value;\n    let newVal = value;\n    newVal = exists(this.style.precision) ? parseFloat(newVal.toFixed(this.style.precision)) : newVal;\n\n    if (this.propName) this.setProp(newVal);\n    else {\n      this._value = newVal;\n      this.reflow();\n    }\n\n    if (this.node.flow.state !== FlowState.Stopped) this.call('change', this, oldVal, newVal);\n  }\n\n  constructor(\n    node: Node, public min: number, public max: number,\n    options: SliderOptions = DefaultSliderOptions(node)\n  ) {\n    super(node, Vector.Zero(), UIType.Slider, {\n      draggable: true,\n      style: options.style ? { ...DefaultSliderStyle(node, options.height), ...options.style } : DefaultSliderStyle(node, options.height),\n      propName: options.propName,\n      input: options.input && (typeof options.input === 'boolean'\n        ? new Terminal(node, TerminalType.IN, 'number', '', {})\n        : Terminal.deSerialize(node, options.input)),\n      output: options.output && (typeof options.output === 'boolean'\n        ? new Terminal(node, TerminalType.OUT, 'number', '', {})\n        : Terminal.deSerialize(node, options.output)),\n      id: options.id,\n      hitColor: options.hitColor\n    });\n\n    this.height = get(options.height, this.node.style.rowHeight);\n    this._value = this.propName ? this.getProp() : get(options.value, min);\n    this._value = clamp(this._value, this.min, this.max);\n\n    if (this.input) {\n      this.input.on('connect', (_, connector) => {\n        if (connector.data) this.value = connector.data;\n      });\n      this.input.on('data', (_, data) => {\n        if (data) this.value = data;\n      });\n    }\n    if (this.output) this.output.on('connect', (_, connector) => connector.data = this.value);\n\n    this.node.on('process', () => {\n      if (this.output) this.output.setData(this.value);\n    });\n  }\n\n  paint(): void {\n    let context = this.context;\n    context.lineWidth = this.style.railHeight;\n    context.strokeStyle = this.style.color;\n    context.lineCap = 'butt';\n\n    let start = Math.max(this.position.x, this.position.x + this.thumbFill - 3);\n    if (start !== this.position.x) {\n      context.beginPath();\n      context.moveTo(this.position.x, this.position.y + this.height / 2);\n      context.lineTo(start, this.position.y + this.height / 2);\n      context.stroke();\n    }\n    start = Math.min(this.position.x + 2 * this.style.thumbRadius + this.thumbFill + 3, this.position.x + this.width);\n    if (start !== (this.position.x + this.width)) {\n      context.beginPath();\n      context.moveTo(start, this.position.y + this.height / 2);\n      context.lineTo(this.position.x + this.width, this.position.y + this.height / 2);\n      context.stroke();\n    }\n\n    context.fillStyle = this.style.thumbColor;\n    context.beginPath();\n    context.arc(\n      this.position.x + this.style.thumbRadius + this.thumbFill,\n      this.position.y + this.height / 2, this.style.thumbRadius, 0, Constant.TAU\n    );\n    context.fill();\n  }\n  paintLOD1() {\n    let context = this.context;\n    context.strokeStyle = '#000';\n    context.fillStyle = this.style.color;\n    context.strokeRect(this.position.x, this.position.y, this.width, this.height);\n    context.fillRect(this.position.x, this.position.y, this.width, this.height);\n  }\n  offPaint(): void {\n    this.offUIContext.fillStyle = this.hitColor.hexValue;\n    this.offUIContext.fillRect(this.position.x, this.position.y, this.width, this.height);\n  }\n\n  reflow(): void {\n    this.thumbFill = denormalize(normalize(this.value, this.min, this.max), 0, this.width - 2 * this.style.thumbRadius);\n\n    if (this.input) {\n      this.input.position.assign(\n        this.node.position.x - this.node.style.terminalStripMargin - this.input.style.radius,\n        this.position.y + this.height / 2\n      );\n    }\n    if (this.output) {\n      this.output.position.assign(\n        this.node.position.x + this.node.width + this.node.style.terminalStripMargin + this.output.style.radius,\n        this.position.y + this.height / 2\n      );\n    }\n  }\n\n  onPropChange(_oldVal: any, newVal: any) {\n    this._value = newVal;\n    this.reflow();\n\n    this.output && this.output.setData(this.value);\n  }\n  onOver(screenPosition: Vector, realPosition: Vector): void {\n    if (this.disabled) return;\n\n    this.call('over', this, screenPosition, realPosition);\n  }\n  onDown(screenPosition: Vector, realPosition: Vector): void {\n    if (this.disabled) return;\n\n    this.call('down', this, screenPosition, realPosition);\n  }\n  onUp(screenPosition: Vector, realPosition: Vector): void {\n    if (this.disabled) return;\n\n    this.call('up', this, screenPosition, realPosition);\n  }\n  onClick(screenPosition: Vector, realPosition: Vector): void {\n    if (this.disabled) return;\n\n    this.call('click', this, screenPosition, realPosition);\n  }\n  onDrag(screenPosition: Vector, realPosition: Vector): void {\n    if (this.disabled) return;\n\n    let y = this.position.y + this.height / 2 - this.style.railHeight / 2;\n    this.thumbFill = realPosition\n      .clamp(this.position.x + this.style.thumbRadius, this.position.x + this.width - this.style.thumbRadius, y, y)\n      .subtractInPlace(this.position.x + this.style.thumbRadius, 0)\n      .x;\n\n    this.value = denormalize(normalize(this.thumbFill, 0, this.width - 2 * this.style.thumbRadius), this.min, this.max);\n\n    this.call('drag', this, screenPosition, realPosition);\n  }\n  onEnter(screenPosition: Vector, realPosition: Vector) {\n    if (this.disabled) return;\n\n    this.call('enter', this, screenPosition, realPosition);\n  }\n  onExit(screenPosition: Vector, realPosition: Vector) {\n    if (this.disabled) return;\n\n    this.call('exit', this, screenPosition, realPosition);\n  }\n  onWheel(direction: boolean, screenPosition: Vector, realPosition: Vector) {\n    if (this.disabled) return;\n\n    this.call('wheel', this, direction, screenPosition, realPosition);\n  }\n  onContextMenu(): void {\n    if (this.disabled) return;\n  }\n\n  serialize(): SerializedSlider {\n    return {\n      min: this.min,\n      max: this.max,\n      value: this.value,\n      propName: this.propName,\n      input: this.input ? this.input.serialize() : null,\n      output: this.output ? this.output.serialize() : null,\n      height: this.height,\n      style: this.style,\n      id: this.id,\n      hitColor: this.hitColor.serialize(),\n      type: this.type,\n      childs: []\n    }\n  }\n  static deSerialize(node: Node, data: SerializedSlider) {\n    return new Slider(node, data.min, data.max, {\n      value: data.value,\n      propName: data.propName,\n      input: data.input,\n      output: data.output,\n      height: data.height,\n      style: data.style,\n      id: data.id,\n      hitColor: Color.deSerialize(data.hitColor)\n    });\n  }\n}\n\nexport interface SliderStyle extends UINodeStyle {\n  railHeight?: number,\n  thumbRadius?: number,\n  color?: string,\n  thumbColor?: string,\n  precision?: number\n}\nlet DefaultSliderStyle = (node: Node, height: number) => {\n  return {\n    color: '#444',\n    thumbColor: '#000',\n    railHeight: 3,\n    thumbRadius: typeof height !== 'undefined' ? height / 2 : (node.style.rowHeight * 1.5) / 2\n  }\n}\n\nexport interface SerializedSlider extends SerializedUINode {\n  min: number,\n  max: number,\n  value: number,\n  height: number\n}\n\ninterface SliderOptions {\n  value?: number,\n  propName?: string,\n  input?: boolean | SerializedTerminal,\n  output?: boolean | SerializedTerminal,\n  height?: number,\n  style?: SliderStyle,\n  id?: string,\n  hitColor?: Color\n}\nlet DefaultSliderOptions = (node: Node): SliderOptions => {\n  return {\n    height: node.style.rowHeight * 1.5\n  }\n};\n","import { Terminal, TerminalType, SerializedTerminal } from \"../core/terminal\";\nimport { Node } from \"../core/node\";\nimport { Vector } from \"../core/vector\";\nimport { fileIcon } from \"../resource/icons\";\nimport { Image } from \"./image\";\nimport { Label } from \"./label\";\nimport { SerializedUINode, UINode, UINodeStyle, UIType } from \"./ui-node\";\nimport { Serializable } from \"../common/interfaces\";\nimport { Color } from \"../core/color\";\nimport { FlowState } from \"../core/flow\";\nimport { Align } from \"../common/enums\";\nimport { get } from \"../utils/utils\";\n\nexport class Source extends UINode implements Serializable {\n  private htmlInput: HTMLInputElement;\n  private fileIcon: Image;\n  private _file: File;\n\n  label: Label;\n  accept: string;\n\n  get file(): File {\n    if (this.propName) return this.getProp();\n    return this._file;\n  }\n  set file(file: File) {\n    let oldVal = this.file;\n    let newVal = file;\n\n    if (this.propName) this.setProp(newVal);\n    else {\n      this._file = newVal;\n      this.label.text = newVal.name.substring(0, this._file.name.toString().lastIndexOf('.'));\n    }\n\n    if (this.node.flow.state !== FlowState.Stopped) this.call('change', this, oldVal, newVal);\n  }\n\n  constructor(\n    node: Node,\n    options: SourceOptions = DefaultSourceOptions(node)\n  ) {\n\n    super(node, Vector.Zero(), UIType.Source, {\n      style: options.style ? { ...DefaultSourceStyle(), ...options.style } : DefaultSourceStyle(),\n      propName: options.propName,\n      input: options.input && (typeof options.input === 'boolean'\n        ? new Terminal(node, TerminalType.IN, 'file', '', {})\n        : Terminal.deSerialize(node, options.input)),\n      output: options.output && (typeof options.output === 'boolean'\n        ? new Terminal(node, TerminalType.OUT, 'file', '', {})\n        : Terminal.deSerialize(node, options.output)),\n      id: options.id,\n      hitColor: options.hitColor\n    });\n\n    this.accept = options.accept;\n    this.height = get(options.height, this.node.style.rowHeight);\n\n    this.setupInputElement(options);\n\n    this.label = new Label(this.node, 'Select', { style: { align: Align.Center, ...this.style }, height: this.height });\n    this.fileIcon = new Image(this.node, fileIcon);\n    this.label.on('click', () => this.htmlInput.click());\n    this.children.push(this.label, this.fileIcon);\n\n    if (this.input) {\n      this.input.on('connect', (_, connector) => {\n        if (connector.data) this.file = connector.data;\n      });\n      this.input.on('data', (_, data) => {\n        if (data) this.file = data;\n      });\n    }\n    if (this.output) this.output.on('connect', (_, connector) => connector.data = this.file);\n\n    this.node.on('process', () => {\n      if (this.output) this.output.setData(this.file);\n    });\n  }\n\n  setupInputElement(options: SourceOptions) {\n    this.htmlInput = document.createElement('input');\n    this.htmlInput.type = 'file';\n    if (options.accept) this.htmlInput.accept = options.accept;\n    this.htmlInput.onchange = () => {\n      if (this.htmlInput.files.length > 0) {\n        let oldVal = this.file;\n        this.file = this.htmlInput.files[0];\n        if (this.node.flow.state === FlowState.Stopped) this.call('upload', this, oldVal, this.file);\n      }\n    };\n  }\n\n  paint(): void {\n    this.context.strokeStyle = this.style.borderColor;\n    this.context.strokeRect(this.position.x, this.position.y, this.width, this.height);\n  }\n  paintLOD1() {\n    let context = this.context;\n    context.strokeStyle = this.style.borderColor;\n    context.fillStyle = this.style.color;\n    context.strokeRect(this.position.x, this.position.y, this.width, this.height);\n    context.fillRect(this.position.x, this.position.y, this.width, this.height);\n  }\n  offPaint(): void {\n    this.offUIContext.fillStyle = this.hitColor.hexValue;\n    this.offUIContext.fillRect(this.position.x, this.position.y, this.width, this.height);\n  }\n\n  reflow(): void {\n    this.label.width = this.width;\n    this.label.height = this.height;\n    this.label.position = this.position;\n\n    this.fileIcon.width = this.width * .1;\n    this.fileIcon.position.assign(this.position.x + 5, this.position.y + this.height / 2 - this.fileIcon.height / 2);\n\n    if (this.input) {\n      this.input.position.assign(\n        this.node.position.x - this.node.style.terminalStripMargin - this.input.style.radius,\n        this.position.y + this.height / 2\n      );\n    }\n    if (this.output) {\n      this.output.position.assign(\n        this.node.position.x + this.node.width + this.node.style.terminalStripMargin + this.output.style.radius,\n        this.position.y + this.height / 2\n      );\n    }\n  }\n\n  onPropChange(_oldVal: any, newVal: any) {\n    this._file = newVal;\n    this.label.text = this._file.name.substring(0, this._file.name.toString().lastIndexOf('.'));\n\n    this.output && this.output.setData(this._file);\n  }\n  onOver(screenPosition: Vector, realPosition: Vector): void {\n    if (this.disabled) return;\n\n    this.call('over', this, screenPosition, realPosition);\n  }\n  onDown(screenPosition: Vector, realPosition: Vector): void {\n    if (this.disabled) return;\n\n    this.call('down', this, screenPosition, realPosition);\n  }\n  onUp(screenPosition: Vector, realPosition: Vector): void {\n    if (this.disabled) return;\n\n    this.call('up', this, screenPosition, realPosition);\n  }\n  onClick(screenPosition: Vector, realPosition: Vector): void {\n    if (this.disabled) return;\n\n    this.call('click', this, screenPosition, realPosition);\n  }\n  onDrag(screenPosition: Vector, realPosition: Vector): void {\n    if (this.disabled) return;\n\n    this.call('drag', this, screenPosition, realPosition);\n  }\n  onEnter(screenPosition: Vector, realPosition: Vector) {\n    if (this.disabled) return;\n\n    this.call('enter', this, screenPosition, realPosition);\n  }\n  onExit(screenPosition: Vector, realPosition: Vector) {\n    if (this.disabled) return;\n\n    this.call('exit', this, screenPosition, realPosition);\n  }\n  onWheel(direction: boolean, screenPosition: Vector, realPosition: Vector) {\n    if (this.disabled) return;\n\n    this.call('wheel', this, direction, screenPosition, realPosition);\n  }\n  onContextMenu(): void {\n    if (this.disabled) return;\n  }\n\n  serialize(): SerializedSource {\n    return {\n      accept: this.accept,\n      propName: this.propName,\n      input: this.input ? this.input.serialize() : null,\n      output: this.output ? this.output.serialize() : null,\n      height: this.height,\n      style: this.style,\n      id: this.id,\n      hitColor: this.hitColor.serialize(),\n      type: this.type,\n      childs: []\n    }\n  }\n  static deSerialize(node: Node, data: SerializedSource) {\n    return new Source(node, {\n      accept: data.accept,\n      propName: data.propName,\n      input: data.input,\n      output: data.output,\n      height: data.height,\n      style: data.style,\n      id: data.id,\n      hitColor: Color.deSerialize(data.hitColor)\n    });\n  }\n}\n\nexport interface SourceStyle extends UINodeStyle {\n  borderColor?: string,\n  font?: string,\n  fontSize?: string,\n  color?: string\n}\nlet DefaultSourceStyle = () => {\n  return {\n    borderColor: '#000',\n    visible: true\n  };\n};\n\nexport interface SerializedSource extends SerializedUINode {\n  accept: string,\n  height: number\n}\n\ninterface SourceOptions {\n  accept?: string,\n  propName?: string,\n  input?: boolean | SerializedTerminal,\n  output?: boolean | SerializedTerminal,\n  height?: number,\n  style?: SourceStyle,\n  id?: string,\n  hitColor?: Color\n}\nlet DefaultSourceOptions = (node: Node): SourceOptions => {\n  return {\n    height: node.style.rowHeight * 1.5\n  }\n};\n","import { Color } from \"../core/color\";\nimport { Serializable } from \"../common/interfaces\";\nimport { Node } from \"../core/node\";\nimport { Vector } from \"../core/vector\";\nimport { Button, Container, Display, Image, Input, Label, Select, Slider, Source, Toggle } from \"./index\";\nimport { SerializedUINode, UINode, UINodeStyle, UIType } from \"./ui-node\";\n\nexport class Stack extends UINode implements Serializable {\n\n  constructor(\n    node: Node,\n    options: StackOptions = DefaultStackOptions()\n  ) {\n    super(node, Vector.Zero(), UIType.Stack, {\n      style: options.style ? { ...DefaultStackStyle(), ...options.style } : DefaultStackStyle(),\n      id: options.id,\n      hitColor: options.hitColor\n    });\n\n    if (options.childs) this.children.push(...options.childs);\n  }\n\n  paint(): void { /**/ }\n  paintLOD1() { /**/ }\n  offPaint(): void {\n    this.offUIContext.fillStyle = this.hitColor.hexValue;\n    this.offUIContext.fillRect(this.position.x, this.position.y, this.width, this.height);\n  }\n\n  reflow(): void {\n    let children = this.children.filter(child => child.visible);\n    let actualTotalHeight = children.reduce((acc, curr) => (acc + curr.height), 0);\n    let effectiveSpacing = (children.length - 1) * this.style.spacing;\n    this.height = actualTotalHeight + effectiveSpacing;\n\n    let y = this.position.y;\n    children.forEach(child => {\n      child.position.assign(this.position.x, y);\n      child.width = this.width;\n      y += child.height + this.style.spacing;\n    });\n  }\n\n  onPropChange() { /**/ }\n  onOver(screenPosition: Vector, realPosition: Vector): void {\n    if (this.disabled) return;\n\n    this.call('over', this, screenPosition, realPosition);\n  }\n  onDown(screenPosition: Vector, realPosition: Vector): void {\n    if (this.disabled) return;\n\n    this.call('down', this, screenPosition, realPosition);\n  }\n  onUp(screenPosition: Vector, realPosition: Vector): void {\n    if (this.disabled) return;\n\n    this.call('up', this, screenPosition, realPosition);\n  }\n  onClick(screenPosition: Vector, realPosition: Vector): void {\n    if (this.disabled) return;\n\n    this.call('click', this, screenPosition, realPosition);\n  }\n  onDrag(screenPosition: Vector, realPosition: Vector): void {\n    if (this.disabled) return;\n\n    this.call('drag', this, screenPosition, realPosition);\n  }\n  onEnter(screenPosition: Vector, realPosition: Vector) {\n    if (this.disabled) return;\n\n    this.call('enter', this, screenPosition, realPosition);\n  }\n  onExit(screenPosition: Vector, realPosition: Vector) {\n    if (this.disabled) return;\n\n    this.call('exit', this, screenPosition, realPosition);\n  }\n  onWheel(direction: boolean, screenPosition: Vector, realPosition: Vector) {\n    if (this.disabled) return;\n\n    this.call('wheel', this, direction, screenPosition, realPosition);\n  }\n  onContextMenu(): void { /**/ }\n\n  serialize(): SerializedStackLayout {\n    return {\n      style: this.style,\n      id: this.id,\n      hitColor: this.hitColor.serialize(),\n      type: this.type,\n      propName: null,\n      input: null,\n      output: null,\n      childs: this.children.map(child => (child as any).serialize())\n    }\n  }\n  static deSerialize(node: Node, data: SerializedStackLayout): Stack {\n    let stack = new Stack(node, { style: data.style, id: data.id, hitColor: Color.deSerialize(data.hitColor), childs: [] });\n\n    stack.children.push(...data.childs.map(serializedChild => {\n      switch (serializedChild.type) {\n        case UIType.Button: return Button.deSerialize(node, serializedChild);\n        case UIType.Container: return Container.deSerialize(node, serializedChild);\n        case UIType.Display: return Display.deSerialize(node, serializedChild);\n        case UIType.HorizontalLayout: return Stack.deSerialize(node, serializedChild);\n        case UIType.Stack: return Stack.deSerialize(node, serializedChild);\n        case UIType.Image: return Image.deSerialize(node, serializedChild);\n        case UIType.Input: return Input.deSerialize(node, serializedChild);\n        case UIType.Label: return Label.deSerialize(node, serializedChild);\n        case UIType.Select: return Select.deSerialize(node, serializedChild);\n        case UIType.Slider: return Slider.deSerialize(node, serializedChild);\n        case UIType.Source: return Source.deSerialize(node, serializedChild);\n        case UIType.Toggle: return Toggle.deSerialize(node, serializedChild);\n        default: return;\n      }\n    }));\n    return stack;\n  }\n}\n\nexport interface StackStyle extends UINodeStyle {\n  spacing?: number\n}\nlet DefaultStackStyle = () => {\n  return {\n    spacing: 0,\n    visible: true\n  };\n};\n\nexport interface SerializedStackLayout extends SerializedUINode { }\n\ninterface StackOptions {\n  childs?: UINode[],\n  style?: StackStyle,\n  id?: string,\n  hitColor?: Color\n}\nlet DefaultStackOptions = () => {\n  return {}\n};\n","import { Terminal, TerminalType, SerializedTerminal } from \"../core/terminal\";\nimport { Node } from \"../core/node\";\nimport { Vector } from \"../core/vector\";\nimport { SerializedUINode, UINode, UINodeStyle, UIType } from \"./ui-node\";\nimport { Serializable } from \"../common/interfaces\";\nimport { Color } from \"../core/color\";\nimport { FlowState } from \"../core/flow\";\nimport { get } from \"../utils/utils\";\nimport { Constant } from \"../resource/constants\";\n\nexport class Toggle extends UINode implements Serializable {\n  private _checked: boolean = false;\n\n  get checked(): boolean {\n    if (this.propName) return this.getProp();\n    return this._checked;\n  }\n  set checked(checked: boolean) {\n    let oldVal = this.checked;\n    let newVal = checked;\n\n    if (this.propName)\n      this.setProp(newVal);\n    else\n      this._checked = newVal;\n\n    if (this.node.flow.state !== FlowState.Stopped) this.call('change', this, oldVal, newVal);\n  }\n\n  constructor(\n    node: Node,\n    options: ToggleOptions = DefaultToggleOptions(node)\n  ) {\n    super(node, Vector.Zero(), UIType.Toggle, {\n      style: options.style\n        ? { ...DefaultToggleStyle(), ...options.style }\n        : DefaultToggleStyle(),\n      propName: options.propName,\n      input: options.input && (typeof options.input === 'boolean'\n        ? new Terminal(node, TerminalType.IN, 'boolean', '', {})\n        : Terminal.deSerialize(node, options.input)),\n      output: options.output && (typeof options.output === 'boolean'\n        ? new Terminal(node, TerminalType.OUT, 'boolean', '', {})\n        : Terminal.deSerialize(node, options.output)),\n      id: options.id,\n      hitColor: options.hitColor\n    });\n\n    this._checked = this.propName ? this.getProp() : options.value\n    this.height = get(options.height, this.node.style.rowHeight);\n    if (!this.style.grow) this.width = this.height * 2.5;\n\n    if (this.input) {\n      this.input.on('connect', (_, connector) => {\n        if (connector.data) this.checked = connector.data;\n      });\n      this.input.on('data', (_, data) => {\n        if (typeof data !== 'undefined') this.checked = data;\n      });\n    }\n    if (this.output) this.output.on('connect', (_, connector) => connector.data = this.checked);\n\n    this.node.on('process', () => {\n      if (this.output) this.output.setData(this.checked);\n    });\n  }\n\n  paint(): void {\n    let context = this.context;\n    context.strokeStyle = this.style.backgroundColor;\n    context.lineWidth = this.height * .75;\n    context.lineCap = 'round';\n    context.beginPath();\n    context.moveTo(this.position.x + this.context.lineWidth / 2, this.position.y + this.height / 2);\n    context.lineTo(this.position.x + this.width - this.context.lineWidth / 2, this.position.y + this.height / 2);\n    context.stroke();\n\n    context.fillStyle = this.style.color;\n    context.beginPath();\n    context.arc(\n      this.checked ? this.position.x + this.width - this.height / 2 : this.position.x + this.height / 2,\n      this.position.y + this.height / 2, this.height / 2, 0, Constant.TAU\n    );\n    context.fill();\n  }\n  paintLOD1() {\n    let context = this.context;\n    context.strokeStyle = this.style.color;\n    context.fillStyle = this.style.backgroundColor;\n    context.strokeRect(this.position.x, this.position.y, this.width, this.height);\n    context.fillRect(this.position.x, this.position.y, this.width, this.height);\n  }\n  offPaint(): void {\n    this.offUIContext.fillStyle = this.hitColor.hexValue;\n    this.offUIContext.fillRect(this.position.x, this.position.y, this.width, this.height);\n  }\n\n  reflow(): void {\n    if (this.input) {\n      this.input.position.assign(\n        this.node.position.x - this.node.style.terminalStripMargin - this.input.style.radius,\n        this.position.y + this.height / 2\n      );\n    }\n    if (this.output) {\n      this.output.position.assign(\n        this.node.position.x + this.node.width + this.node.style.terminalStripMargin + this.output.style.radius,\n        this.position.y + this.height / 2\n      );\n    }\n  }\n\n  onPropChange(_oldVal: any, newVal: any) {\n    this._checked = newVal;\n\n    this.output && this.output.setData(this.checked);\n  }\n  onOver(screenPosition: Vector, realPosition: Vector): void {\n    if (this.disabled) return;\n\n    this.call('over', this, screenPosition, realPosition);\n  }\n  onDown(screenPosition: Vector, realPosition: Vector): void {\n    if (this.disabled) return;\n\n    this.call('down', this, screenPosition, realPosition);\n  }\n  onUp(screenPosition: Vector, realPosition: Vector): void {\n    if (this.disabled) return;\n\n    this.call('up', this, screenPosition, realPosition);\n  }\n  onClick(screenPosition: Vector, realPosition: Vector): void {\n    if (this.disabled) return;\n\n    this.checked = !this.checked;\n\n    this.call('click', this, screenPosition, realPosition);\n  }\n  onDrag(screenPosition: Vector, realPosition: Vector): void {\n    if (this.disabled) return;\n\n    this.call('drag', this, screenPosition, realPosition);\n  }\n  onEnter(screenPosition: Vector, realPosition: Vector) {\n    if (this.disabled) return;\n\n    this.call('enter', this, screenPosition, realPosition);\n  }\n  onExit(screenPosition: Vector, realPosition: Vector) {\n    if (this.disabled) return;\n\n    this.call('exit', this, screenPosition, realPosition);\n  }\n  onWheel(direction: boolean, screenPosition: Vector, realPosition: Vector) {\n    if (this.disabled) return;\n\n    this.call('wheel', this, direction, screenPosition, realPosition);\n  }\n  onContextMenu(): void {\n    if (this.disabled) return;\n  }\n\n  serialize(): SerializedToggle {\n    return {\n      checked: this.checked,\n      propName: this.propName,\n      input: this.input ? this.input.serialize() : null,\n      output: this.output ? this.output.serialize() : null,\n      height: this.height,\n      style: this.style,\n      id: this.id,\n      hitColor: this.hitColor.serialize(),\n      type: this.type,\n      childs: []\n    }\n  }\n  static deSerialize(node: Node, data: SerializedToggle): Toggle {\n    return new Toggle(node, {\n      propName: data.propName,\n      input: data.input,\n      output: data.output,\n      height: data.height,\n      style: data.style,\n      id: data.id,\n      hitColor: Color.deSerialize(data.hitColor)\n    });\n  }\n}\n\nexport interface ToggleOptions {\n  value?: boolean,\n  propName?: string,\n  input?: boolean | SerializedTerminal,\n  output?: boolean | SerializedTerminal,\n  height?: number,\n  style?: ToggleStyle,\n  id?: string,\n  hitColor?: Color\n}\nlet DefaultToggleOptions = (node: Node): ToggleOptions => {\n  return {\n    value: false,\n    height: node.style.rowHeight * 1.5,\n  }\n};\n\nexport interface ToggleStyle extends UINodeStyle {\n  backgroundColor?: string,\n  color?: string\n}\nlet DefaultToggleStyle = () => {\n  return {\n    backgroundColor: '#999',\n    color: '#000',\n    visible: true\n  };\n};\n\nexport interface SerializedToggle extends SerializedUINode {\n  checked: boolean,\n  height: number\n}\n","import { Color, SerializedColor } from \"../core/color\";\nimport { Hooks } from \"../core/hooks\";\nimport { Node, NodeState } from \"../core/node\";\nimport { SerializedTerminal, Terminal } from \"../core/terminal\";\nimport { SerializedVector, Vector } from \"../core/vector\";\nimport { LOD, ViewPort } from '../common/enums';\nimport { get, getNewUUID, intersects } from \"../utils/utils\";\nimport { Events, Renderable } from \"../common/interfaces\";\n\nexport abstract class UINode extends Hooks implements Events, Renderable {\n  private _disabled: boolean;\n  private _visible: boolean;\n\n  renderState: ViewPort;\n  hitColor: Color;\n  style: any;\n  propName: string;\n  input: Terminal;\n  output: Terminal;\n  id: string;\n  draggable: boolean;\n  zoomable: boolean;\n  width: number = 0;\n  height: number = 0;\n  children: UINode[];\n  get context(): CanvasRenderingContext2D { return this.node.context }\n  get offUIContext(): OffscreenCanvasRenderingContext2D | CanvasRenderingContext2D { return this.node.offUIContext }\n  position: Vector;\n\n  get disabled(): boolean { return this._disabled }\n  set disabled(disabled: boolean) {\n    this._disabled = disabled;\n    this.children.forEach(child => child.disabled = disabled);\n  }\n  get visible(): boolean { return this._visible }\n  set visible(value: boolean) { this._visible = value; this.node.ui.update(); }\n\n  constructor(public node: Node, position: Vector, public type: UIType, options: UINodeOptions = DefaultUINodeOptions()) {\n    super();\n\n    this.setHitColor(options.hitColor);\n    this.id = get(options.id, getNewUUID());\n    this.draggable = get(options.draggable, false);\n    this.zoomable = get(options.zoomable, false);\n    this._visible = get(options.visible, true);\n    this.style = get(options.style, {});\n    this.children = [];\n    this.position = position;\n    this.disabled = false;\n    this.propName = options.propName;\n    if (this.propName) {\n      this.node.watch(this.propName, (oldVal, newVal) => this.onPropChange(oldVal, newVal));\n    }\n    this.input = options.input;\n    this.output = options.output;\n\n    if (this.input) {\n      this.node.inputsUI.push(this.input);\n      this.input.on('connect', () => this.disabled = true);\n      this.input.on('disconnect', () => this.disabled = false);\n    }\n    if (this.output) this.node.outputsUI.push(this.output);\n  }\n\n  append(childs: UINode | UINode[]) {\n    if (Array.isArray(childs))\n      this.children.push(...childs);\n    else\n      this.children.push(childs);\n\n    this.update();\n\n    // To fix a bug, when appending childs to UINodes in-between the tree, UI container's height won't update\n    this.node.ui.update();\n  }\n  update(): void {\n    this.reflow();\n    this.call('update', this);\n    this.children.forEach(child => child.update());\n  }\n  updateRenderState() {\n    if (this.node.renderState.nodeState === NodeState.MINIMIZED) return;\n\n    let realPos = this.position.transform(this.node.flow.flowConnect.transform);\n    this.renderState = intersects(\n      0, 0,\n      this.node.flow.flowConnect.canvasDimensions.width, this.node.flow.flowConnect.canvasDimensions.height,\n      realPos.x, realPos.y,\n      realPos.x + this.width * this.node.flow.flowConnect.scale, realPos.y + this.height * this.node.flow.flowConnect.scale\n    );\n\n    this.children.forEach(child => child.updateRenderState());\n  }\n  private setHitColor(hitColor: Color) {\n    if (!hitColor) {\n      hitColor = Color.Random();\n      while (this.node.uiNodes.get(hitColor.rgbaString) || this.node.terminals.get(hitColor.rgbaString)) hitColor = Color.Random();\n    }\n    this.hitColor = hitColor;\n    this.node.uiNodes.set(this.hitColor.rgbaString, this);\n  }\n  render() {\n    if (!this.visible) return;\n    if (this.renderState === ViewPort.OUTSIDE) return;\n\n    let context = this.context;\n    if (this.node.renderState.lod === LOD.LOD1) {\n      context.save();\n      this.paintLOD1();\n      context.restore();\n    } else if (this.node.renderState.lod === LOD.LOD2) {\n      context.save();\n      this.paint();\n      context.restore();\n\n      this.offUIContext.save();\n      this.offPaint();\n      this.offUIContext.restore();\n    } else {\n      if (this.type === UIType.Container) {\n        context.save();\n        this.paintLOD1();\n        context.restore();\n      }\n    }\n\n    if (this.node.renderState.lod > 0) {\n      if (this.input) this.input.render();\n      if (this.output) this.output.render();\n    }\n\n    this.call('render', this);\n    this.children.forEach(child => child.render());\n  }\n\n  getProp() {\n    return this.node.state[this.propName];\n  }\n  setProp(propValue: any) {\n    this.node.state[this.propName] = propValue;\n  }\n\n  query(query: string): Array<UINode> {\n    let result = [];\n    query = query.trim();\n    let queue: UINode[] = [this];\n    while (queue.length !== 0) {\n      let curr = queue.shift();\n      if (curr.type === query) result.push(curr);\n      curr.children.forEach(child => queue.push(child));\n    }\n\n    return result;\n  }\n\n  abstract reflow(): void;\n  abstract paint(): void;\n  abstract paintLOD1(): void;\n  abstract offPaint(): void;\n\n  abstract onOver(screenPosition: Vector, realPosition: Vector): void;\n  abstract onDown(screenPosition: Vector, realPosition: Vector): void;\n  abstract onUp(screenPosition: Vector, realPosition: Vector): void;\n  abstract onClick(screenPosition: Vector, realPosition: Vector): void;\n  abstract onDrag(screenPosition: Vector, realPosition: Vector): void;\n  abstract onEnter(screenPosition: Vector, realPosition: Vector): void;\n  abstract onExit(screenPosition: Vector, realPosition: Vector): void;\n  abstract onWheel(direction: boolean, screenPosition: Vector, realPosition: Vector): void;\n  abstract onContextMenu(): void;\n  abstract onPropChange(oldValue: any, newValue: any): void;\n}\n\nexport interface UINodeStyle {\n  grow?: number\n}\n\nexport interface SerializedUINode {\n  id: string,\n  type: UIType,\n  hitColor: SerializedColor,\n  style: any,\n  propName: string,\n  input: SerializedTerminal,\n  output: SerializedTerminal,\n  childs: any[]\n}\n\nexport enum UIType {\n  Button = 'button',\n  Container = 'container',\n  Display = 'display',\n  HorizontalLayout = 'horizontal-layout',\n  Stack = 'stack',\n  Image = 'image',\n  Input = 'input',\n  Label = 'label',\n  Select = 'select',\n  Slider = 'slider',\n  Dial = 'dial',\n  Source = 'source',\n  Toggle = 'toggle',\n  Envelope = 'envelope',\n  RadioGroup = 'radiogroup',\n  Slider2D = 'slider2d',\n  VSlider = 'vslider'\n}\n\ninterface UINodeOptions {\n  draggable?: boolean,\n  zoomable?: boolean,\n  visible?: boolean,\n  style?: any,\n  propName?: string,\n  input?: Terminal,\n  output?: Terminal,\n  id?: string,\n  hitColor?: Color\n}\nlet DefaultUINodeOptions = (): UINodeOptions => {\n  return {\n    draggable: false,\n    zoomable: false,\n    visible: true,\n    style: {},\n    propName: null,\n    input: null,\n    output: null,\n    id: getNewUUID(),\n    hitColor: null\n  };\n};\n\nexport interface UINodeRenderParams {\n  position: SerializedVector,\n  width: number,\n  height: number\n}\n","import { Terminal, TerminalType, SerializedTerminal } from \"../core/terminal\";\nimport { Node } from \"../core/node\";\nimport { Vector } from \"../core/vector\";\nimport { clamp, denormalize, get, normalize } from \"../utils/utils\";\nimport { SerializedUINode, UINode, UINodeStyle, UIType } from \"./ui-node\";\nimport { Serializable } from \"../common/interfaces\";\nimport { Color } from \"../core/color\";\nimport { FlowState } from \"../core/flow\";\nimport { Constant } from \"../resource/constants\";\n\nexport class VSlider extends UINode implements Serializable {\n  private thumbFill: number;\n  private _value: number;\n\n  get value(): number {\n    if (this.propName) return this.getProp();\n    return this._value;\n  }\n  set value(value: number) {\n    value = clamp(value, this.min, this.max);\n\n    let oldVal = this.value;\n    let newVal = value;\n\n    if (this.propName) this.setProp(newVal);\n    else {\n      this._value = newVal;\n      this.reflow();\n    }\n\n    if (this.node.flow.state !== FlowState.Stopped) this.call('change', this, oldVal, newVal);\n  }\n\n  constructor(\n    node: Node, public min: number, public max: number,\n    options: VSliderOptions = DefaultVSliderOptions(node)\n  ) {\n    super(node, Vector.Zero(), UIType.VSlider, {\n      draggable: true,\n      style: options.style ? { ...DefaultVSliderStyle(node, options.width), ...options.style } : DefaultVSliderStyle(node, options.width),\n      propName: options.propName,\n      input: options.input && (typeof options.input === 'boolean'\n        ? new Terminal(node, TerminalType.IN, 'number', '', {})\n        : Terminal.deSerialize(node, options.input)),\n      output: options.output && (typeof options.output === 'boolean'\n        ? new Terminal(node, TerminalType.OUT, 'number', '', {})\n        : Terminal.deSerialize(node, options.output)),\n      id: options.id,\n      hitColor: options.hitColor\n    });\n\n    this.height = get(options.height, this.node.style.rowHeight * 5);\n    this.width = get(options.width, this.node.style.rowHeight);\n    this._value = this.propName ? this.getProp() : get(options.value, min);\n    this._value = clamp(this._value, this.min, this.max);\n\n    if (this.input) {\n      this.input.on('connect', (_, connector) => {\n        if (connector.data) this.value = connector.data;\n      });\n      this.input.on('data', (_, data) => {\n        if (data) this.value = data;\n      });\n    }\n    if (this.output) this.output.on('connect', (_, connector) => connector.data = this.value);\n\n    this.node.on('process', () => {\n      if (this.output) this.output.setData(this.value);\n    });\n  }\n\n  paint(): void {\n    let context = this.context;\n    context.lineWidth = this.style.railWidth;\n    context.strokeStyle = this.style.color;\n    context.lineCap = 'butt';\n\n    let start = Math.max(this.position.y, this.position.y + this.thumbFill - 3);\n    if (start !== this.position.y) {\n      context.beginPath();\n      context.moveTo(this.position.x + this.width / 2, this.position.y);\n      context.lineTo(this.position.x + this.width / 2, start);\n      context.stroke();\n    }\n    start = Math.min(this.position.y + 2 * this.style.thumbRadius + this.thumbFill + 3, this.position.y + this.height);\n    if (start !== (this.position.y + this.height)) {\n      context.beginPath();\n      context.moveTo(this.position.x + this.width / 2, start);\n      context.lineTo(this.position.x + this.width / 2, this.position.y + this.height);\n      context.stroke();\n    }\n\n    context.fillStyle = this.style.thumbColor;\n    context.beginPath();\n    context.arc(\n      this.position.x + this.width / 2,\n      this.position.y + this.style.thumbRadius + this.thumbFill, this.style.thumbRadius, 0, Constant.TAU\n    );\n    context.fill();\n  }\n  paintLOD1() {\n    let context = this.context;\n    context.strokeStyle = '#000';\n    context.fillStyle = this.style.color;\n    context.strokeRect(this.position.x, this.position.y, this.width, this.height);\n    context.fillRect(this.position.x, this.position.y, this.width, this.height);\n  }\n  offPaint(): void {\n    this.offUIContext.fillStyle = this.hitColor.hexValue;\n    this.offUIContext.fillRect(this.position.x, this.position.y, this.width, this.height);\n  }\n\n  reflow(): void {\n    this.thumbFill = denormalize(1 - normalize(this.value, this.min, this.max), 0, this.height - 2 * this.style.thumbRadius);\n\n    if (this.input) {\n      this.input.position.assign(\n        this.node.position.x - this.node.style.terminalStripMargin - this.input.style.radius,\n        this.position.y + this.height / 2\n      );\n    }\n    if (this.output) {\n      this.output.position.assign(\n        this.node.position.x + this.node.width + this.node.style.terminalStripMargin + this.output.style.radius,\n        this.position.y + this.height / 2\n      );\n    }\n  }\n\n  onPropChange(_oldVal: any, newVal: any) {\n    this._value = newVal;\n    this.reflow();\n\n    this.output && this.output.setData(this.value);\n  }\n  onOver(screenPosition: Vector, realPosition: Vector): void {\n    if (this.disabled) return;\n\n    this.call('over', this, screenPosition, realPosition);\n  }\n  onDown(screenPosition: Vector, realPosition: Vector): void {\n    if (this.disabled) return;\n\n    this.call('down', this, screenPosition, realPosition);\n  }\n  onUp(screenPosition: Vector, realPosition: Vector): void {\n    if (this.disabled) return;\n\n    this.call('up', this, screenPosition, realPosition);\n  }\n  onClick(screenPosition: Vector, realPosition: Vector): void {\n    if (this.disabled) return;\n\n    this.call('click', this, screenPosition, realPosition);\n  }\n  onDrag(screenPosition: Vector, realPosition: Vector): void {\n    if (this.disabled) return;\n\n    let x = this.position.x + this.width / 2 - this.style.railWidth / 2;\n    this.thumbFill = realPosition\n      .clamp(x, x, this.position.y + this.style.thumbRadius, this.position.y + this.height - this.style.thumbRadius)\n      .subtractInPlace(0, this.position.y + this.style.thumbRadius)\n      .y;\n\n    this.value = denormalize(1 - normalize(this.thumbFill, 0, this.height - 2 * this.style.thumbRadius), this.min, this.max);\n\n    this.call('drag', this, screenPosition, realPosition);\n  }\n  onEnter(screenPosition: Vector, realPosition: Vector) {\n    if (this.disabled) return;\n\n    this.call('enter', this, screenPosition, realPosition);\n  }\n  onExit(screenPosition: Vector, realPosition: Vector) {\n    if (this.disabled) return;\n\n    this.call('exit', this, screenPosition, realPosition);\n  }\n  onWheel(direction: boolean, screenPosition: Vector, realPosition: Vector) {\n    if (this.disabled) return;\n\n    this.call('wheel', this, direction, screenPosition, realPosition);\n  }\n  onContextMenu(): void {\n    if (this.disabled) return;\n  }\n\n  serialize(): SerializedVSlider {\n    return {\n      min: this.min,\n      max: this.max,\n      value: this.value,\n      propName: this.propName,\n      input: this.input ? this.input.serialize() : null,\n      output: this.output ? this.output.serialize() : null,\n      height: this.height,\n      width: this.width,\n      style: this.style,\n      id: this.id,\n      hitColor: this.hitColor.serialize(),\n      type: this.type,\n      childs: []\n    }\n  }\n  static deSerialize(node: Node, data: SerializedVSlider) {\n    return new VSlider(node, data.min, data.max, {\n      value: data.value,\n      propName: data.propName,\n      input: data.input,\n      output: data.output,\n      height: data.height,\n      width: data.width,\n      style: data.style,\n      id: data.id,\n      hitColor: Color.deSerialize(data.hitColor)\n    });\n  }\n}\n\nexport interface VSliderStyle extends UINodeStyle {\n  railWidth?: number,\n  thumbRadius?: number,\n  color?: string,\n  thumbColor?: string\n}\nlet DefaultVSliderStyle = (node: Node, width: number) => {\n  return {\n    color: '#444',\n    thumbColor: '#000',\n    railWidth: 4,\n    thumbRadius: typeof width !== 'undefined' ? width / 2 : (node.style.rowHeight * 1.5) / 2\n  }\n}\n\nexport interface SerializedVSlider extends SerializedUINode {\n  min: number,\n  max: number,\n  value: number,\n  height: number,\n  width: number\n}\n\ninterface VSliderOptions {\n  value?: number,\n  propName?: string,\n  input?: boolean | SerializedTerminal,\n  output?: boolean | SerializedTerminal,\n  height?: number,\n  width?: number,\n  style?: VSliderStyle,\n  id?: string,\n  hitColor?: Color\n}\nlet DefaultVSliderOptions = (node: Node): VSliderOptions => {\n  return {\n    height: node.style.rowHeight * 5,\n    width: node.style.rowHeight\n  }\n};\n","export class AVLTree<T> {\n  root: AVLTreeNode<T>;\n  dataRefToTreeNode: Record<string, AVLTreeNode<T>>;\n  size: number;\n\n  constructor(public comparator: (a: T, b: T) => number, public dataToTreeNodeMapper: (data: T) => string) {\n    this.root = null;\n    this.dataRefToTreeNode = {};\n    this.size = 0;\n  }\n\n  height(node: AVLTreeNode<T>) {\n    if (!node) return 0;\n    return node.height;\n  }\n  rightRotate(node: AVLTreeNode<T>) {\n    let newRoot = node.left;\n    node.left = newRoot.right;\n    newRoot.right = node;\n\n    node.height = Math.max(node.left ? node.left.height : 0, node.right ? node.right.height : 0) + 1;\n    newRoot.height = Math.max(newRoot.left ? newRoot.left.height : 0, newRoot.right ? newRoot.right.height : 0) + 1;\n\n    return newRoot;\n  }\n  leftRotate(node: AVLTreeNode<T>) {\n    let newRoot = node.right;\n    node.right = newRoot.left;\n    newRoot.left = node;\n\n    node.height = Math.max(node.left ? node.left.height : 0, node.right ? node.right.height : 0) + 1;\n    newRoot.height = Math.max(newRoot.left ? newRoot.left.height : 0, newRoot.right ? newRoot.right.height : 0) + 1;\n\n    return newRoot;\n  }\n  getBalance(node: AVLTreeNode<T>) {\n    if (!node) return 0;\n    return (node.left ? node.left.height : 0) - (node.right ? node.right.height : 0);\n  }\n\n  add(data: T): AVLTreeNode<T> {\n    let res: { node: AVLTreeNode<T> } = { node: null };\n    this.root = this._insert(this.root, data, res);\n    this.dataRefToTreeNode[this.dataToTreeNodeMapper(data)] = res.node;\n    this.size += 1;\n    return res.node;\n  }\n  private _insert(node: AVLTreeNode<T>, data: T, res: { node: AVLTreeNode<T> }): AVLTreeNode<T> {\n    if (!node) {\n      let newNode = new AVLTreeNode([data]);\n      res.node = newNode;\n      return newNode;\n    }\n\n    // Duplicate Keys\n    if (this.comparator(data, node.data[0]) === 0) {\n      node.data.push(data);\n      res.node = node;\n      return node;\n    }\n\n    if (this.comparator(data, node.data[0]) < 0) node.left = this._insert(node.left, data, res);\n    else node.right = this._insert(node.right, data, res);\n\n    node.height = 1 + Math.max(node.left ? node.left.height : 0, node.right ? node.right.height : 0);\n    let balance = this.getBalance(node);\n\n    if (balance > 1 && this.comparator(data, node.left.data[0]) < 0) return this.rightRotate(node);\n    if (balance > 1 && this.comparator(data, node.left.data[0]) > 0) {\n      node.left = this.leftRotate(node.left);\n      return this.rightRotate(node);\n    }\n    if (balance < -1 && this.comparator(data, node.right.data[0]) > 0) return this.leftRotate(node);\n    if (balance < -1 && this.comparator(data, node.right.data[0]) < 0) {\n      node.right = this.rightRotate(node.right);\n      return this.leftRotate(node);\n    }\n\n    return node;\n  }\n\n  remove(data: T): boolean {\n    let res: { deleted: boolean } = { deleted: false };\n    this.root = this._delete(this.root, data, res);\n    delete this.dataRefToTreeNode[this.dataToTreeNodeMapper(data)];\n    this.size -= 1;\n    return res.deleted;\n  }\n  private _delete(node: AVLTreeNode<T>, data: T, res: { deleted: boolean }): AVLTreeNode<T> {\n    if (!node) return node;\n\n    if (this.comparator(data, node.data[0]) < 0) node.left = this._delete(node.left, data, res);\n    else if (this.comparator(data, node.data[0]) > 0) node.right = this._delete(node.right, data, res);\n    else {\n      // Duplicate Keys\n      if (node.data.length > 1) {\n        let index = node.data.findIndex(currData => this.dataToTreeNodeMapper(currData) === this.dataToTreeNodeMapper(data));\n        if (index > -1) {\n          node.data.splice(index, 1);\n          res.deleted = true;\n        } else {\n          res.deleted = false;\n        }\n        return node;\n      } else {\n        if (!node.left || !node.right) {\n          let temp = null;\n          if (!node.left) temp = node.right;\n          else temp = node.left;\n\n          if (!temp) {\n            // temp = node;\n            node = null;\n          } else node = temp;\n          res.deleted = true;\n        } else {\n          let temp = this.minValue(node.right);\n          node.data = temp.data;\n          node.right = this._delete(node.right, temp.data[0], res);\n          res.deleted = true;\n        }\n      }\n    }\n    if (!node) return node;\n\n    node.height = Math.max(node.left ? node.left.height : 0, node.right ? node.right.height : 0) + 1;\n    let balance = this.getBalance(node);\n\n    if (balance > 1 && this.getBalance(node.left) >= 0) return this.rightRotate(node);\n    if (balance > 1 && this.getBalance(node.left) < 0) {\n      node.left = this.leftRotate(node.left);\n      return this.rightRotate(node);\n    }\n    if (balance < -1 && this.getBalance(node.right) <= 0) return this.leftRotate(node);\n    if (balance < -1 && this.getBalance(node.right) > 0) {\n      node.right = this.rightRotate(node.right);\n      return this.leftRotate(node);\n    }\n    return node;\n  }\n\n  minValue(node: AVLTreeNode<T>) {\n    let curr = node;\n    while (curr.left) curr = curr.left;\n    return curr;\n  }\n  forEach(action: (item: T) => void) {\n    this._inorder(this.root, action);\n  }\n\n  private _inorder(node: AVLTreeNode<T>, action: (item: T) => void) {\n    if (node !== null) {\n      this._inorder(node.left, action);\n      node.data.forEach(data => action(data));\n      this._inorder(node.right, action);\n    }\n  }\n  private _reverseInorder(node: AVLTreeNode<T>, action: (item: T) => void) {\n    if (node !== null) {\n      this._inorder(node.right, action);\n      node.data.forEach(data => action(data));\n      this._inorder(node.left, action);\n    }\n  }\n}\n\n\nexport class AVLTreeNode<T> {\n  height: number;\n  left: AVLTreeNode<T>;\n  right: AVLTreeNode<T>;\n\n  constructor(public data: T[]) {\n    this.height = 1;\n    this.left = null;\n    this.right = null;\n  }\n}\n","// This is strictly for one-to-one mapping, many-to-one mapping will not work\nexport class BiMap<K, V> {\n  map: Map<K | V, V | K>;\n  reverseMap: Map<V | K, K | V>;\n\n  constructor() {\n    this.map = new Map();\n    this.reverseMap = new Map();\n  }\n\n  get(keyOrVal: K | V): V | K {\n    return this.map.get(keyOrVal) || this.reverseMap.get(keyOrVal);\n  }\n  set(key: K | V, value: V | K) {\n    this.map.set(key, value);\n    this.reverseMap.set(value, key);\n  }\n  has(keyOrVal: K | V): boolean {\n    return this.map.has(keyOrVal) || this.reverseMap.has(keyOrVal);\n  }\n  delete(keyOrVal: K | V) {\n    let temp1 = this.map.get(keyOrVal);\n    let temp2 = this.reverseMap.get(keyOrVal);\n    if (typeof temp1 !== 'undefined') { this.map.delete(keyOrVal); }\n    if (typeof temp2 !== 'undefined') { this.reverseMap.delete(keyOrVal); }\n\n    // I have a gut feeling that this is required, for some edge case that I cannot grab from my subconscious mind\n    this.map.delete(temp1);\n    this.reverseMap.delete(temp1);\n    this.map.delete(temp2);\n    this.reverseMap.delete(temp2);\n  }\n  clear() {\n    this.map.clear();\n    this.reverseMap.clear();\n  }\n}\n","import { Token, TokenType } from \"./lexer\";\nimport { Constant } from \"../resource/constants\";\nimport { Parser } from \"./parser\";\n\nexport class Evaluator {\n  parser: Parser;\n  static constants = {\n    tau: Constant.TAU,\n    pi: Math.PI,\n    phi: Constant.PHI,\n    ln2: Math.LN2,\n    ln10: Math.LN10,\n    log2e: Math.LOG2E,\n    log10e: Math.LOG10E,\n  };\n  static functions = {\n    cos: Math.cos,\n    acos: Math.acos,\n    acosh: Math.acosh,\n    sin: Math.sin,\n    asin: Math.asin,\n    asinh: Math.asinh,\n    tan: Math.tan,\n    atan: Math.atan,\n    atanh: Math.atanh,\n    atan2: Math.atan2,\n    abs: Math.abs,\n    ceil: Math.ceil,\n    round: Math.round,\n    floor: Math.floor,\n    exp: Math.exp,\n    random: Math.random,\n    sqrt: Math.sqrt,\n    cbrt: Math.cbrt,\n    log10: Math.log10,\n    log2: Math.log2,\n    log: (value: number, base?: number) => { return base ? (Math.log(value) / Math.log(base)) : Math.log(value); },\n    dist: (x1: number, y1: number, x2: number, y2: number) => { return Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2)); },\n    gcd: (a: number, b: number) => { while (b !== 0) { const r = a % b; a = b; b = r; } return a < 0 ? -a : a; },\n    max: (...args: any[]) => { return Array.isArray(args[0]) ? Math.max(...args[0]) : Math.max(...args) },\n    min: (...args: any[]) => { return Array.isArray(args[0]) ? Math.min(...args[0]) : Math.min(...args) },\n    hypot: (...args: number[]) => {\n      let result = 0;\n      let largest = 0;\n      let input = Array.isArray(args[0]) ? args[0] : args;\n      input.forEach(x => {\n        const value = Math.abs(x);\n        if (largest < value) {\n          result = result * (largest / value) * (largest / value);\n          result += 1;\n          largest = value;\n        } else {\n          result = result + (value > 0 ? ((value / largest) * (value / largest)) : value);\n        }\n      });\n      return largest * Math.sqrt(result);\n    },\n    lcm: (a: number, b: number) => {\n      if (a === 0) return a;\n      if (b === 0) return b;\n      const prod = a * b;\n      while (b !== 0) { const t = b; b = a % t; a = t; }\n      return Math.abs(prod / a);\n    },\n    sum: (...args: any[]) => {\n      let input = Array.isArray(args[0]) ? args[0] : args;\n      return input.reduce((acc, curr) => acc + curr, 0);\n    },\n    mean: (...args: any[]) => {\n      let input = Array.isArray(args[0]) ? args[0] : args;\n      return Evaluator.functions.sum(input) / input.length\n    },\n    median: (...args: any[]) => {\n      let input = Array.isArray(args[0]) ? args[0] : args;\n      input.sort((a, b) => a - b);\n      return input.length % 2 === 0 ? (input[input.length / 2 - 1] + input[input.length / 2]) / 2 : input[Math.floor(input.length / 2)];\n    },\n    std: (...args: any[]) => {\n      let input = Array.isArray(args[0]) ? args[0] : args;\n      return Math.sqrt(Evaluator.functions.var(input));\n    },\n    var: (...args: any[]) => {\n      let input = Array.isArray(args[0]) ? args[0] : args;\n      let mean = Evaluator.functions.mean(input);\n      return input.reduce((acc, curr) => acc + Math.pow(curr - mean, 2), 0) / input.length;\n    },\n    fact: (n: number) => {\n      let res = 1;\n      for (let i = n; i > 1; i -= 1) res *= i;\n      return res;\n    }\n  };\n  static multiargFunctions = ['max', 'min', 'hypot', 'sum', 'mean', 'median', 'std', 'var'];\n\n  // Optimization: If the curr expr is present in history\n  // no need to invoke lexer and parser, get postfix tokens array from here\n  history: Record<string, Token[]> = {};\n  orderedExprs: string[] = [];\n  historyLimit: number = 3;\n\n  constructor(public variables: Record<string, any>) { this.parser = new Parser(); }\n\n  evaluate(expr: string, index?: number) {\n    let postFix;\n    if (this.history[expr]) postFix = this.history[expr];\n    else {\n      if (this.orderedExprs.length === this.historyLimit) {\n        let oldestExpr = this.orderedExprs.shift();\n        delete this.history[oldestExpr];\n      }\n      this.orderedExprs.push(expr);\n      this.history[expr] = this.parser.parse(expr);\n      postFix = this.history[expr];\n    }\n    let result: number[] = [];\n\n    for (let token of postFix) {\n      switch (token.type) {\n        case TokenType.Literal: {\n          result.push(token.value as number);\n          break;\n        }\n        case TokenType.Variable: {\n          // Character is uppercase = expression contained spread operator e.g ...a => A (this is done in lexical analysis)\n          if (token.value !== (token.value as string).toLowerCase()) {\n            if (!Array.isArray(this.variables[token.value])) {\n              throw new Error('Spread operator only allowed for array variables: ' + (token.value as string).toLowerCase());\n            } else result.push(this.variables[token.value]);\n          } else {\n            if (Array.isArray(this.variables[token.value]) && typeof index !== 'undefined') {\n              result.push(this.variables[token.value][index]);\n            } else {\n              result.push(this.variables[token.value]);\n            }\n          }\n          break;\n        }\n        case TokenType.Operator: {\n          let [left, right] = [result.pop(), result.pop()];\n          if (typeof left !== 'number' || typeof right !== 'number') throw new Error('Only numbers are allowed for operators');\n\n          switch (token.value) {\n            case '+': { result.push(left + right); break; }\n            case '*': { result.push(left * right); break; }\n            case '-': { result.push(right - left); break; }\n            case '/': { result.push(right / left); break; }\n            case '%': { result.push(right % left); break; }\n            case '^': { result.push(Math.pow(right, left)); break; }\n            case '&': { result.push(right & left); break; }\n            case '|': { result.push(right | left); break; }\n            default: throw new Error('Unknow operator: ' + token.value);\n          }\n          break;\n        }\n        case TokenType.Function: {\n          let args = [];\n          for (let i = 0; i < token.count; i += 1) args.push(result.pop());\n          result.push((Evaluator.functions as any)[token.value](...args));\n          break;\n        }\n        default: throw new Error('Unknown token type: ' + token.type);\n      }\n    }\n\n    return result[0];\n  }\n}\n","export * from './avl-tree';\nexport * from './evaluator';\nexport * from './lexer';\nexport * from './linked-list';\nexport * from './logger';\nexport * from './parser';\nexport * from './utils';\nexport * from './bidirectional-map';\n","import { Evaluator } from \"./evaluator\";\n\nexport class Lexer {\n  static operators = ['+', '-', '*', '/', '^', '%', '&', '|'];\n  private result: Token[] = [];\n  private numberBuffer: string[] = [];\n  private letterBuffer: string[] = [];\n\n  constructor() { /**/ }\n\n  tokenize(expr: string) {\n    this.result = [];\n    this.numberBuffer = [];\n    this.letterBuffer = [];\n\n    // Replace all variable spread operators with their equivalent capital letter\n    let index;\n    while ((index = expr.indexOf('...')) !== -1) {\n      expr = expr.substring(0, index) + expr.charAt(index + 3).toUpperCase() + expr.substring(index + 4);\n    }\n\n    expr = this.replaceConstants(expr);\n    let chars = expr.replace(/\\s+/g, \"\").split(\"\");\n\n    chars.forEach(char => {\n      if (this.isDigit(char)) {\n        this.numberBuffer.push(char);\n      } else if (this.isDecimalPoint(char)) {\n        this.numberBuffer.push(char);\n      } else if (this.isLetter(char)) {\n        if (this.numberBuffer.length) {\n          this.processNumberBuffer();\n          this.result.push(new Token(TokenType.Operator, '*'));\n        }\n\n        this.letterBuffer.push(char);\n      } else if (this.isOperator(char)) {\n        if (this.numberBuffer.length) this.processNumberBuffer();\n        else if (this.letterBuffer.length) this.processLetterBuffer();\n\n        this.result.push(new Token(TokenType.Operator, char));\n      } else if (this.isLeftParenthesis(char)) {\n        if (this.letterBuffer.length) {\n          this.result.push(new Token(TokenType.Function, this.letterBuffer.join('')));\n          this.letterBuffer = [];\n        } else if (this.numberBuffer.length) {\n          this.processNumberBuffer();\n          this.result.push(new Token(TokenType.Operator, '*'));\n        }\n\n        this.result.push(new Token(TokenType.LParenthesis, char));\n      } else if (this.isRightParenthesis(char)) {\n        if (this.letterBuffer.length) this.processLetterBuffer();\n        if (this.numberBuffer.length) this.processNumberBuffer();\n\n        this.result.push(new Token(TokenType.RParenthesis, char));\n      } else if (this.isComma(char)) {\n        if (this.numberBuffer.length) this.processNumberBuffer();\n        if (this.letterBuffer.length) this.processLetterBuffer();\n\n        this.result.push(new Token(TokenType.ArgSeperator, char));\n      } else throw Error('Unknown character: ' + char);\n    });\n    if (this.numberBuffer.length) this.processNumberBuffer();\n    if (this.letterBuffer.length) this.processLetterBuffer();\n\n    return this.result;\n  }\n  private replaceConstants(expr: string) {\n    return expr\n      .replace(/pi/g, Evaluator.constants.pi.toString())\n      .replace(/tau/g, Evaluator.constants.tau.toString())\n      .replace(/phi/g, Evaluator.constants.phi.toString())\n      .replace(/ln2/g, Evaluator.constants.ln2.toString())\n      .replace(/ln10/g, Evaluator.constants.ln10.toString())\n      .replace(/log2e/g, Evaluator.constants.log2e.toString())\n      .replace(/log10e/g, Evaluator.constants.log10e.toString());\n  }\n  private processNumberBuffer() {\n    let literal = parseFloat(this.numberBuffer.join(''));\n    this.numberBuffer = [];\n    if (!isNaN(literal)) { this.result.push(new Token(TokenType.Literal, literal)); }\n  }\n  private processLetterBuffer() {\n    for (var i = 0; i < this.letterBuffer.length; i++) {\n      this.result.push(new Token(TokenType.Variable, this.letterBuffer[i]));\n      if (i < this.letterBuffer.length - 1) this.result.push(new Token(TokenType.Operator, '*'));\n    }\n    this.letterBuffer = [];\n  }\n  private isComma(char: string) { return (char === \",\"); }\n  private isDigit(char: string) { return /\\d/.test(char); }\n  private isLetter(char: string) { return /[a-zA-Z]/.test(char); }\n  private isOperator(char: string) { return Lexer.operators.includes(char); }\n  private isLeftParenthesis(char: string) { return char === \"(\" }\n  private isRightParenthesis(char: string) { return char == \")\" }\n  private isDecimalPoint(char: string) { return char === '.' }\n}\n\nexport enum TokenType {\n  Literal = 'Literal',\n  Variable = 'Variable',\n  Operator = 'Operator',\n  LParenthesis = 'LParenthesis',\n  RParenthesis = 'RParenthesis',\n  Function = 'Function',\n  ArgSeperator = 'ArgSeperator'\n}\n\nexport class Token {\n  static associativity = {\n    '^': 'right',\n    '*': 'left',\n    '/': 'left',\n    '+': 'left',\n    '-': 'left',\n    '%': 'left',\n    '&': 'left',\n    '|': 'left'\n  };\n  static precedence = {\n    '|': 0,\n    '&': 1,\n    '+': 2,\n    '-': 2,\n    '*': 3,\n    '/': 3,\n    '%': 3,\n    '^': 4\n  };\n\n  count: number;\n  get precedence(): number { return (Token.precedence as any)[this.value]; }\n  get associativity(): string { return (Token.associativity as any)[this.value]; }\n\n  constructor(public type: TokenType, public value: string | number) { this.count = 0; }\n\n  toString(): string { return this.type + '(' + this.value + ')'; }\n}\n","import { Hooks } from \"../core/hooks\";\n\nexport class List<T> extends Hooks {\n  head: ListNode<T> = null;\n  tail: ListNode<T> = null;\n  length: number = 0;\n\n  constructor(public comparator?: (a: T, b: T) => number, source?: Array<T>) {\n    super();\n    if (source) source.forEach(value => this.append(value));\n  }\n\n  prepend(data: T) {\n    let newNode = new ListNode(data);\n    if (this.head === null) {\n      this.head = newNode;\n      this.tail = newNode;\n    } else {\n      this.head.prev = newNode;\n      newNode.next = this.head;\n      this.head = newNode;\n    }\n\n    this.length += 1;\n    this.call('prepend', this, newNode);\n    return newNode;\n  }\n  append(data: T | ListNode<T>) {\n    let newNode = data instanceof ListNode ? data : new ListNode(data);\n    if (this.tail === null) {\n      this.head = newNode;\n      this.tail = newNode;\n    } else {\n      this.tail.next = newNode;\n      newNode.prev = this.tail;\n      this.tail = newNode;\n    }\n\n    this.length += 1;\n    this.call('append', this, newNode);\n    return newNode;\n  }\n  removeFirst(hook: boolean = true): T {\n    let removed;\n    if (this.head === null) return null;\n    else if (this.length === 1) {\n      removed = this.head.data;\n      this.head = null;\n      this.tail = null;\n    } else {\n      removed = this.head.data;\n      this.head.next.prev = null;\n      this.head = this.head.next;\n    }\n\n    this.length -= 1;\n    if (hook) this.call('removefirst', this, removed);\n    return removed;\n  }\n  removeLast(): T {\n    let removed;\n    if (this.tail === null) return null;\n    else if (this.length === 1) {\n      removed = this.tail.data;\n      this.head = null;\n      this.tail = null;\n    } else {\n      removed = this.tail.data;\n      this.tail.prev.next = null;\n      this.tail = this.tail.prev;\n    }\n\n    this.length -= 1;\n    this.call('removelast', this, removed);\n    return removed;\n  }\n  addAfter(data: T, node: ListNode<T>): ListNode<T> {\n    let newNode = new ListNode<T>(data);\n    newNode.next = node.next;\n    newNode.prev = node;\n    node.next = newNode;\n    if (newNode.next) newNode.next.prev = newNode;\n    if (node === this.tail) this.tail = newNode;\n    this.length += 1;\n\n    return newNode;\n  }\n  addBefore(data: T, node: ListNode<T>): ListNode<T> {\n    let newNode = new ListNode<T>(data);\n    newNode.prev = node.prev;\n    newNode.next = node;\n    node.prev = newNode;\n    if (newNode.prev) newNode.prev.next = newNode;\n    if (node === this.head) this.head = newNode;\n    this.length += 1;\n\n    return newNode;\n  }\n  delete(node: ListNode<T>) {\n    if (this.length === 1) {\n      this.head = null;\n      this.tail = null;\n    }\n    else if (node === this.head)\n      this.removeFirst();\n    else if (node === this.tail)\n      this.removeLast();\n    else {\n      if (node.prev) node.prev.next = node.next;\n      if (node.next) node.next.prev = node.prev;\n      this.length -= 1;\n    }\n  }\n  searchHead(callback: (node: ListNode<T>) => boolean): ListNode<T> {\n    let curr = this.head;\n    while (curr !== null) {\n      if (callback(curr)) return curr;\n      curr = curr.next;\n    }\n    return null;\n  }\n  searchTail(callback: (node: ListNode<T>) => boolean): ListNode<T> {\n    let curr = this.tail;\n    while (curr !== null) {\n      if (callback(curr)) return curr;\n      curr = curr.prev;\n    }\n    return null;\n  }\n  get(index: number): T {\n    if (index >= this.length) return null;\n    else if (index === 0) return this.head ? this.head.data : null;\n    else if (index === (this.length - 1)) return this.tail ? this.tail.data : null;\n    else {\n      let count = 0;\n      let curr = this.head;\n      while (curr !== null) {\n        if (count === index) return curr.data;\n        count += 1;\n        curr = curr.next;\n      }\n      return null;\n    }\n  }\n\n  forEach(callback: (node: ListNode<T>) => void) {\n    let curr = this.head;\n    while (curr !== null) {\n      callback(curr);\n      curr = curr.next;\n    }\n  }\n  map(callback: (node: ListNode<T>) => any): any[] {\n    let mapped: any[] = [];\n    this.forEach(node => mapped.push(callback(node)));\n    return mapped;\n  }\n  toArray(): T[] {\n    let data: T[] = [];\n    this.forEach(node => data.push(node.data));\n    return data;\n  }\n  toString(): string {\n    return this.toArray().join(', ');\n  }\n}\n\nexport class ListNode<T> {\n  prev: ListNode<T>;\n  next: ListNode<T>;\n  data: T;\n\n  constructor(data?: T) {\n    this.prev = null;\n    this.next = null;\n    this.data = data ? data : null;\n  }\n}\n","export enum LogLevel {\n  TRACE = 1, DEBUG = 2, WARN = 3, INFO = 4, LOG = 5, ERROR = 6, DISABLED = 7\n}\n\nexport class Log {\n  static LOG_LEVEL: LogLevel = LogLevel.INFO;\n\n  static trace(...args: any): void {\n    if (this.LOG_LEVEL > LogLevel.TRACE) return;\n    console.trace.apply(this, args);\n  }\n  static debug(...args: any): void {\n    if (this.LOG_LEVEL > LogLevel.DEBUG) return;\n    console.debug.apply(this, args);\n  }\n  static warn(...args: any): void {\n    if (this.LOG_LEVEL > LogLevel.WARN) return;\n    console.warn.apply(this, args);\n  }\n  static info(...args: any): void {\n    if (this.LOG_LEVEL > LogLevel.INFO) return;\n    console.info.apply(this, args);\n  }\n  static log(...args: any): void {\n    if (this.LOG_LEVEL > LogLevel.LOG) return;\n    console.log.apply(this, args);\n  }\n  static error(...args: any): void {\n    if (this.LOG_LEVEL > LogLevel.ERROR) return;\n    console.error.apply(this, args);\n  }\n}\n","import { Lexer, Token, TokenType } from \"./lexer\";\n\nexport class Parser {\n  lexer: Lexer;\n\n  constructor() { this.lexer = new Lexer(); }\n\n  private peek(arr: any[]) { return arr.slice(-1)[0]; }\n\n  parse(expression: string) {\n    let tokens = this.lexer.tokenize(expression);\n    let stack: Token[] = [];\n    let output: Token[] = [];\n    let were: boolean[] = [];\n    let argCount: number[] = [];\n\n    tokens.forEach(token => {\n      if (token.type === TokenType.Literal || token.type === TokenType.Variable) {\n        output.push(token);\n        if (typeof this.peek(were) !== 'undefined') {\n          were.pop();\n          were.push(true);\n        }\n      } else if (token.type === TokenType.Function) {\n        stack.push(token);\n        argCount.push(0);\n        if (typeof this.peek(were) !== 'undefined') {\n          were.pop();\n          were.push(true);\n        }\n        were.push(false);\n      } else if (token.type === TokenType.ArgSeperator) {\n        while (this.peek(stack) && this.peek(stack).type !== TokenType.LParenthesis) {\n          output.push(stack.pop());\n        }\n        let w = were.pop();\n        if (w) { argCount.push(argCount.pop() + 1); }\n        were.push(false);\n      } else if (token.type == TokenType.Operator) {\n        while (this.peek(stack) && (this.peek(stack).type === TokenType.Operator)\n          && (\n            (token.associativity === \"left\" && token.precedence <= this.peek(stack).precedence)\n            || (token.associativity === \"right\" && token.precedence < this.peek(stack).precedence)\n          )\n        ) {\n          output.push(stack.pop());\n        }\n        stack.push(token);\n      } else if (token.type === TokenType.LParenthesis) {\n        stack.push(token);\n      } else if (token.type === TokenType.RParenthesis) {\n        while (this.peek(stack) && this.peek(stack).type !== TokenType.LParenthesis) {\n          output.push(stack.pop());\n        }\n        stack.pop();\n\n        if (this.peek(stack) && this.peek(stack).type === TokenType.Function) {\n          let funcToken = stack.pop();\n          let a = argCount.pop();\n          let w = were.pop();\n          if (w) { a += 1; }\n          funcToken.count = a;\n          output.push(funcToken);\n        }\n      }\n    });\n    while (this.peek(stack)) { output.push(stack.pop()); }\n\n    return output;\n  }\n}\n","import { Graph } from \"../core/graph\";\nimport { Rules } from \"../common/interfaces\";\nimport { Terminal } from \"../core/terminal\";\nimport { ViewPort } from \"../common/enums\";\n\nexport const getNewUUID = () => {\n  var S4 = () => (((1 + Math.random()) * 0x10000) | 0).toString(16).substring(1);\n  return (S4() + \"-\" + S4() + \"-\" + S4() + \"-\" + S4());\n}\nexport const normalize = (value: number, min: number, max: number) => {\n  if (min === max) return 1;\n  return (value - min) / (max - min);\n}\nexport const denormalize = (normalized: number, min: number, max: number) => {\n  return (max - min) * normalized + min;\n}\nexport const getRandom = (min: number, max: number) => {\n  return Math.random() * (max - min) + min;\n}\nexport const intersects = (start1X: number, start1Y: number, end1X: number, end1Y: number, start2X: number, start2Y: number, end2X: number, end2Y: number): ViewPort => {\n  let res = !(start2X > end1X || end2X < start1X || start2Y > end1Y || end2Y < start1Y);\n  if (res) {\n    if (!(start2X < start1X || start2Y < start1Y || end2X > end1X || end2Y > end1Y)) return ViewPort.INSIDE;\n    else return ViewPort.INTERSECT;\n  } else return ViewPort.OUTSIDE;\n}\nexport const clamp = (value: number, min: number, max: number): number => {\n  return Math.min(Math.max(value, min), max);\n}\nexport const lerp = (a: number, b: number, t: number): number => {\n  return (1 - t) * a + t * b;\n}\nexport const canConnect = (source: Terminal, destination: Terminal, rules: Rules, executionGraph: Graph) => {\n  if (!destination) return false;\n  if (source === destination) return false;\n  if (source.node === destination.node) return false;\n  if (source.type === destination.type) return false;\n  if (!rules[source.dataType].includes(destination.dataType)) return false;\n  if (!executionGraph.canConnect(source.node, destination.node)) return false;\n  return true;\n}\nexport const isEmpty = (obj: any): boolean => {\n  for (let _ in obj) return false;\n  return true;\n}\nexport const isInRange = (value: number, min: number, max: number): boolean => {\n  return Math.min(value, min) >= min && Math.max(value, max) <= max;\n}\nexport const exists = (value: any): boolean => {\n  return typeof value !== 'undefined' && value !== null;\n}\nexport const get = <T>(value: T, defaultVal: T): T => {\n  if (!exists(value)) return defaultVal;\n  return value;\n}\nexport const binarySearch = ({ max, getValue, match }: { max: number, getValue: Function, match: number }) => {\n  let min = 0;\n  while (min <= max) {\n    let mid = Math.floor((min + max) / 2);\n    const curr = getValue(mid);\n\n    if (curr === match) return mid;\n    if (curr < match) min = mid + 1;\n    else max = mid - 1;\n  }\n  return max;\n}\nexport const noop = () => { /**/ };\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t833: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkflow_connect\"] = self[\"webpackChunkflow_connect\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(6184);\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["root","factory","exports","module","define","amd","a","i","self","deferred","ViewPort","LOD","Align","GlobalEventType","Color","constructor","rgba","this","rgbaValue","hexValue","rgbaToHex","rgbaString","rgbaToString","rgbaCSSString","rgbaToCSSString","isEqual","color","static","Uint8ClampedArray","Math","floor","getRandom","hex","parseInt","slice","c","toString","length","_componentToHex","normalize","toFixed","colors","Array","isArray","Log","error","colorObjs","forEach","push","hexToRGBA","t","clamp","index","start","end","ceil","startColor","endColor","map","component","lerp","round","serialize","data","Connector","Hooks","flow","options","DefaultConnectorOptions","super","renderResolver","style","DefaultConnectorStyle","id","get","getNewUUID","floatingTip","startNode","node","endNode","connectors","removeConnection","isDeserialization","executionGraph","connect","onConnect","_data","call","state","FlowState","Stopped","setDirty","completeConnection","destination","includes","currHitTerminal","onExit","splice","indexOf","removeConnector","setData","canConnect","other","source","firstTerminal","type","TerminalType","IN","rules","dataType","render","context","flowConnect","save","flowRenderResolver","connector","flowConnectRenderResolver","_render","getRenderParams","restore","offContext","_offRender","params","ax","x","ay","y","dx","dy","offset","Vector","Distance","bx","by","cx","cy","midx","midy","border","strokeStyle","borderColor","lineWidth","width","beginPath","moveTo","quadraticCurveTo","stroke","renderState","nodeState","NodeState","MAXIMIZED","position","terminalStripMargin","radius","titleHeight","startId","endId","startNodeId","endNodeId","Flow","name","terminalColors","globalEvents","parentFlow","listeners","nodes","Map","groups","nodeHitColors","groupHitColors","sortedNodes","AVLTree","b","zIndex","inputs","outputs","Graph","registerListeners","on","Running","deregisterListeners","off","existsInFlow","values","subFlow","addInput","flowInput","TunnelNode","proxyTerminal","getData","set","add","addOutput","flowOutput","addSubFlow","Zero","subFlowNode","SubFlowNode","inputNode","outputNode","createNode","inTerminals","outTerminals","DefaultNodeOptions","Node","terminalStyle","removeNode","nodeOrID","floatingConnector","delete","removeAllFocus","focused","group","stop","order","filter","graphNode","flowNode","input","output","serializedNode","deSerialize","serializedGroup","Group","serializedInput","serializedOutput","serializedConnector","startTerminal","concat","outputsUI","find","terminal","endTerminal","inputsUI","graphNodes","dirtyNodes","GraphNode","sourceNode","destinationNode","startGraphNode","endGraphNode","childs","updateOrder","disconnect","sourceGraphNode","destinationGraphNode","connectedEndNodes","Set","has","maxOrderOfConnectedStartNodes","reduce","acc","curr","max","_updateOrder","queue","currNode","shift","child","async","runAll","size","lowestDirty","Idle","Promise","all","resolve","run","clearDirty","lowestOrder","min","propagate","callback","List","append","currGNode","removeFirst","debugNode","indent","console","log","debugGraph","nodeToGraphNodeIds","_graphNode","groupedNodes","nodeToGraphNode","graph","serializedGraphNodes","deSerializedGraphNodes","serializedGroupedNodes","serializedGraphNode","nodeId","Object","keys","key","childId","DefaultGroupOptions","nodeDeltas","INSIDE","height","hitColor","DefaultGroupStyle","_position","DefaultGroupColors","Random","setHitColor","computeTextMetrics","updateRenderState","_name","trim","recomputeNodePositions","font","fontSize","metrics","measureText","textWidth","textHeight","actualBoundingBoxAscent","actualBoundingBoxDescent","d","document","createElement","textContent","body","appendChild","offsetHeight","removeChild","realPos","transform","intersects","canvasDimensions","scale","setContainedNodes","groupRealPos","viewport","nodeRealPos","ui","subtract","OUTSIDE","offGroupContext","fillStyle","strokeRect","fillRect","titleColor","textBaseline","fillText","onClick","screenPosition","realPosition","thisRealPosition","showGenericInput","replace","fontFamily","value","nodeDelata","serializedVector","RED","GREEN","BLUE","random","registeredEvents","lastId","eventKey","args","offAll","DefaultNodeConstructorOptions","stateObserver","lod","LOD2","_width","DefaultNodeStyle","setupState","uiNodes","terminals","nodeButtons","_zIndex","setupTerminals","Container","addNodeButton","toggleNodeState","_renderNodeButton","Left","reflow","update","offUIContext","remove","Terminal","OUT","Proxy","target","prop","oldValue","watch","propName","unwatch","align","deltaX","newNodeButton","NodeButton","noOfButtons","nodeButton","nodeButtonSize","nodeButtonSpacing","terminalRowHeight","padding","recalculateInputTerminals","recalculateOutputTerminals","LOD1","LOD0","INTERSECT","getHitTerminal","hitTerminal","onEnter","getHitUINode","uiNode","getHitNodeButton","renderTerminals","renderName","renderFocused","minimizedTerminalColor","titleFontSize","titleFont","inputTerminalsWidth","outputTerminalsWidth","outlineColor","strokeRoundRect","inputTerminalsStripWidth","outputTerminalsStripWidth","maximizeButtonColor","focus","addTerminal","removeTerminal","getInput","inputTerminal","currTerm","getInputs","setOutputs","outputTerminal","term","outputData","entries","entry","groupedConnectors","outputDataIterator","next","gCntrsIterator","MINIMIZED","dispose","onDown","getImageData","currHitUINode","onOver","prevHitTerminal","hitUINode","prevHitUINode","onUp","clone","hitNodeButton","onDrag","hitUINodeWhileDragging","draggable","currHitNode","pointers","onContextMenu","onWheel","direction","zoomable","createLabel","text","Label","createImage","Image","createSlider","Slider","createSlider2D","Slider2D","createVSlider","VSlider","createDial","Dial","createHozLayout","HorizontalLayout","createStack","Stack","createButton","Button","createToggle","Toggle","createRadioGroup","selected","RadioGroup","createSelect","Select","createSource","Source","createDisplay","renderers","Display","createInput","Input","createEnvelope","Envelope","expandButtonColor","spacing","rowHeight","defaultRenderFn","nodeRenderResolver","_offUIRender","DefaultSubFlowOptions","_","tunnel","lineTo","closePath","Right","DefaultTerminalOptions","DefaultTerminalStyle","_inst","_propName","oldPropName","newPropName","exists","watcherId","_oldVal","newVal","offUIRender","arc","Constant","TAU","outerFocusColor","fill","focusColor","shadowBlur","shadowColor","otherTerminal","newConnector","_disconnect","cntr","currCntr","startTerm","endTerm","findIndex","pop","onDisconnect","isConnected","cursor","removedConnector","onEvent","emit","DefaultTunnelNodeOptions","_proxyTerminal","proxyTerminalId","xOrDOMPoint","DOMPoint","addInPlace","arg1","arg2","multiplyInPlace","subtractInPlace","normalizeInPlace","minY","maxY","clampInPlace","transformInPlace","transformedPoint","transformPoint","absInPlace","abs","multiply","isInside","arg3","arg4","assign","vector","threshold","vector1OrX1","vector2OrY1","x2","y2","sqrt","pow","vector1","vector2","minX","maxX","FlowConnect","mount","audioBufferCache","arrayBufferCache","top","left","FlowConnectState","flows","keymap","touchControls","genericInput","minScale","maxScale","wheelScaleDelta","pinchScaleDelta","disableScale","_transform","DOMMatrix","inverseTransform","identity","startTime","prepareCanvas","setupHitCanvas","calcCanvasDimension","registerChangeListeners","attachStyles","canvasUtils","registerEvents","setGenericInput","setupAudioContext","_context","audioContext","_audioContext","_offContext","_offUIContext","_offGroupContext","canvas","time","performance","now","throttle","addEventListener","window","requestAnimationFrame","registerObservers","parentElement","parent","parentResizeObserver","bodyResizeObserver","ResizeObserver","updateTransform","observe","HTMLDivElement","clientWidth","clientHeight","HTMLCanvasElement","getContext","OffscreenCanvas","OffscreenCanvasRenderingContext2D","offCanvas","offUICanvas","offGroupCanvas","touchAction","inputStyle","innerHTML","getElementsByTagName","adjust","parentBoundingRect","getBoundingClientRect","boundingRect","prototype","noop","CanvasRenderingContext2D","roundRect","fillRoundRect","dragDelta","prevPanPosition","prevPinchDistance","onkeydown","ev","onkeyup","onpointerdown","currFlow","addPointer","pointerId","getRelativePosition","getHitNode","Number","MAX_SAFE_INTEGER","groupStartPoint","currGroup","currHitGroup","getHitGroup","onpointerup","removePointer","handleGrouping","hitNode","newGroup","handleConnection","onpointerout","prevHitNode","onpointermove","updatePointer","currPinchDistance","handleZoom","Midpoint","hitGroup","nodeIndex","delta","pointerType","onclick","oncontextmenu","preventDefault","onwheel","deltaY","className","visibility","pointerEvents","onblur","onchange","__FLOWCONNECT_AUDIO_CTX__","AudioContext","audioWorklets","generateAudioWorklets","WorkletUtils","CircularBuffer","audioWorklet","addModule","styles","attributes","activeElement","changeParent","newParent","pointer","pntr","zoomIn","origin","scaleDelta","intersection","oldConnector","clientX","clientY","scaleOrigin","translate","realSpaceOrigin","translateSelf","scaleSelf","inverse","setTransform","translateBy","scaleBy","clear","clearRect","startGlobalTime","_startGlobalTime","timerId","bind","stopGlobalTime","isRootFlowStopped","cancelAnimationFrame","frameId","createFlow","DefaultRules","rootFlow","fromJson","json","JSON","parse","toJson","serializedFlow","stringify","URL","createObjectURL","Blob","utilsFileName","Worklet_ProxyParamForSource","Worklet_ProxyParam","Worklet_Debug","Worklet_MoogEffect","Worklet_BitcrusherEffect","Worklet_LFO","Worklet_Noise","Worklet_Proxy","PI","SIN_60","PHI","fileIcon","imageIcon","UINode","DefaultSlider2DOptions","UIType","DefaultSlider2DStyle","pointDiameter","_value","getProp","thumbHitColor","offThumbCanvas","offThumbContext","renderOffThumb","oldVal","setProp","coord","paint","backgroundColor","borderWidth","point","thumbColor","paintLOD1","offPaint","newWidth","newHeight","getHitPoint","movePoint","onPropChange","disabled","isHit","DefaultButtonOptions","DefaultButtonStyle","label","Center","_node","children","shadowOffsetX","shadowOffset","shadowOffsetY","DefaultContainerOptions","DefaultContainerStyle","contentWidth","uiContainer","_paint","container","terminalsDisplayHeight","visible","availableWidth","childX","serializedChild","DefaultDialOptions","DefaultDialStyle","thumbStart","thumbEnd","temp","lineCap","thumbShadowColor","thumbShadowBlur","center","angle","cos","sin","pointToValue","diff","atan2","lastAngle","undefined","deltaValue","currValue","diffValue","normalizedValue","denormalize","customRenderers","DefaultDisplayOptions","DefaultDisplayStyle","displayConfigs","rendererConfig","newOffCanvasConfig","canvasType","CanvasType","shouldRender","config","auto","customRender","canvasConfigs","renderer","autoOffCanvasConfigs","then","results","result","drawImage","DefaultEnvelopeOptions","DefaultEnvelopeStyle","pointHitColorPoint","BiMap","sort","pointNode","offPointsCanvas","offPointsContext","renderOffPoints","toArray","vec","points","lineColor","pointColor","currHitPoint","prev","Infinity","newPoint","newPointNode","anchor","searchTail","prepend","addAfter","deletePoint","lastDownPosition","serialVec","DefaultHorizontalLayoutOptions","DefaultHorizontalLayoutStyle","originalWidth","maxHeight","fixedWidthChilds","fixedWidth","remainingWidth","flexWidth","childWidth","grow","hozLayout","sourceString","DefaultImageOptions","DefaultImageStyle","_src","setupImage","src","onerror","onload","imageCanvas","imageContext","ratio","DefaultInputOptions","DefaultInputStyle","InputType","parseFloat","setupLabel","setupInputElement","val","setLabelText","inputEl","precision","validity","patternMismatch","step","spellcheck","inputType","pattern","maxLength","oninput","Text","DefaultLabelOptions","DefaultLabelStyle","_text","orgTextWidth","format","displayText","getBestFitString","ellipsisWidth","binarySearch","getValue","idx","substring","match","DefaultRadioGroupOptions","DefaultRadioGroupStyle","_values","selectedValue","_selected","setupLabels","option","selectedLabel","lastSelectedLabel","selectedBackgroundColor","selectedColor","commonWidth","DefaultSelectOptions","DefaultSelectStyle","slctdVal","arrowColor","newValue","DefaultSliderOptions","DefaultSliderStyle","railHeight","thumbFill","thumbRadius","DefaultSourceOptions","DefaultSourceStyle","accept","htmlInput","click","file","_file","lastIndexOf","files","DefaultStackOptions","DefaultStackStyle","actualTotalHeight","effectiveSpacing","stack","DefaultToggleOptions","DefaultToggleStyle","_checked","checked","DefaultUINodeOptions","_visible","_disabled","propValue","query","DefaultVSliderOptions","DefaultVSliderStyle","railWidth","comparator","dataToTreeNodeMapper","dataRefToTreeNode","rightRotate","newRoot","right","leftRotate","getBalance","res","_insert","newNode","AVLTreeNode","balance","deleted","_delete","currData","minValue","action","_inorder","_reverseInorder","reverseMap","keyOrVal","temp1","temp2","Evaluator","variables","history","orderedExprs","historyLimit","parser","Parser","evaluate","expr","postFix","oldestExpr","token","TokenType","Literal","Variable","toLowerCase","Error","Operator","Function","count","functions","constants","tau","pi","phi","ln2","LN2","ln10","LN10","log2e","LOG2E","log10e","LOG10E","acos","acosh","asin","asinh","tan","atan","atanh","exp","cbrt","log10","log2","base","dist","x1","y1","gcd","r","hypot","largest","lcm","prod","sum","mean","median","std","var","fact","n","multiargFunctions","Lexer","numberBuffer","letterBuffer","tokenize","charAt","toUpperCase","replaceConstants","split","char","isDigit","isDecimalPoint","isLetter","processNumberBuffer","Token","isOperator","processLetterBuffer","isLeftParenthesis","join","LParenthesis","isRightParenthesis","RParenthesis","isComma","ArgSeperator","literal","isNaN","test","operators","precedence","associativity","head","tail","ListNode","hook","removed","removeLast","addBefore","searchHead","mapped","LogLevel","LOG_LEVEL","TRACE","trace","apply","DEBUG","debug","WARN","warn","INFO","info","LOG","ERROR","lexer","peek","arr","expression","tokens","were","argCount","funcToken","S4","normalized","start1X","start1Y","end1X","end1Y","start2X","start2Y","end2X","end2Y","isEmpty","obj","isInRange","defaultVal","mid","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","m","O","chunkIds","fn","priority","notFulfilled","fulfilled","j","every","o","hasOwnProperty","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","__webpack_exports__"],"sourceRoot":""}