{"version":3,"file":"standard-nodes.js","mappings":"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","sources":["webpack://flow-connect/webpack/universalModuleDefinition","webpack://flow-connect/./src/standard-nodes/audio/3d-panner.ts","webpack://flow-connect/./src/standard-nodes/audio/adsr.ts","webpack://flow-connect/./src/standard-nodes/audio/audio-buffer-source.ts","webpack://flow-connect/./src/standard-nodes/audio/automate.ts","webpack://flow-connect/./src/standard-nodes/audio/biquad-filter.ts","webpack://flow-connect/./src/standard-nodes/audio/bitcrusher.ts","webpack://flow-connect/./src/standard-nodes/audio/channel-merger.ts","webpack://flow-connect/./src/standard-nodes/audio/channel-splitter.ts","webpack://flow-connect/./src/standard-nodes/audio/chorus.ts","webpack://flow-connect/./src/standard-nodes/audio/convolver.ts","webpack://flow-connect/./src/standard-nodes/audio/debug.ts","webpack://flow-connect/./src/standard-nodes/audio/delay.ts","webpack://flow-connect/./src/standard-nodes/audio/destination.ts","webpack://flow-connect/./src/standard-nodes/audio/distorter.ts","webpack://flow-connect/./src/standard-nodes/audio/dynamics-compressor.ts","webpack://flow-connect/./src/standard-nodes/audio/equalizer.ts","webpack://flow-connect/./src/standard-nodes/audio/frequency-analyser.ts","webpack://flow-connect/./src/standard-nodes/audio/gain.ts","webpack://flow-connect/./src/standard-nodes/audio/metronome.ts","webpack://flow-connect/./src/standard-nodes/audio/microphone.ts","webpack://flow-connect/./src/standard-nodes/audio/moog.ts","webpack://flow-connect/./src/standard-nodes/audio/noise.ts","webpack://flow-connect/./src/standard-nodes/audio/oscillator.ts","webpack://flow-connect/./src/standard-nodes/audio/overdrive.ts","webpack://flow-connect/./src/standard-nodes/audio/ping-pong-delay.ts","webpack://flow-connect/./src/standard-nodes/audio/source.ts","webpack://flow-connect/./src/standard-nodes/audio/spectrogram-analyser.ts","webpack://flow-connect/./src/standard-nodes/audio/stereo-panner.ts","webpack://flow-connect/./src/standard-nodes/audio/tremolo.ts","webpack://flow-connect/./src/standard-nodes/audio/waveform-analyser.ts","webpack://flow-connect/./src/standard-nodes/common/array-index.ts","webpack://flow-connect/./src/standard-nodes/common/array-source.ts","webpack://flow-connect/./src/standard-nodes/common/boolean-source.ts","webpack://flow-connect/./src/standard-nodes/common/buffer.ts","webpack://flow-connect/./src/standard-nodes/common/compare.ts","webpack://flow-connect/./src/standard-nodes/common/delay.ts","webpack://flow-connect/./src/standard-nodes/common/file-source.ts","webpack://flow-connect/./src/standard-nodes/common/global-event.ts","webpack://flow-connect/./src/standard-nodes/common/json-source.ts","webpack://flow-connect/./src/standard-nodes/common/log.ts","webpack://flow-connect/./src/standard-nodes/common/number-range.ts","webpack://flow-connect/./src/standard-nodes/common/number-source.ts","webpack://flow-connect/./src/standard-nodes/common/property.ts","webpack://flow-connect/./src/standard-nodes/common/random.ts","webpack://flow-connect/./src/standard-nodes/common/string-source.ts","webpack://flow-connect/./src/standard-nodes/common/sync-data.ts","webpack://flow-connect/./src/standard-nodes/common/sync-event.ts","webpack://flow-connect/./src/standard-nodes/common/timer.ts","webpack://flow-connect/./src/standard-nodes/common/to-array.ts","webpack://flow-connect/./src/standard-nodes/common/to-vector2.ts","webpack://flow-connect/./src/standard-nodes/index.ts","webpack://flow-connect/./src/standard-nodes/math/abs.ts","webpack://flow-connect/./src/standard-nodes/math/average.ts","webpack://flow-connect/./src/standard-nodes/math/ceil.ts","webpack://flow-connect/./src/standard-nodes/math/clamp.ts","webpack://flow-connect/./src/standard-nodes/math/floor.ts","webpack://flow-connect/./src/standard-nodes/math/func.ts","webpack://flow-connect/./src/standard-nodes/math/normalize.ts","webpack://flow-connect/./src/standard-nodes/net/api.ts","webpack://flow-connect/./src/standard-nodes/ui/dial.ts","webpack://flow-connect/./src/standard-nodes/visual/function-plotter.ts","webpack://flow-connect/./src/standard-nodes/visual/line-chart-mini.ts","webpack://flow-connect/./src/lib/tuna.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(self, function() {\nreturn ","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { clamp, denormalize } from \"../../utils/utils\";\nimport { Node } from '../../core/node';\nimport { Toggle, Slider2D, Slider, Input, InputType } from \"../../ui/index\";\n\nexport class SpatialPanner extends Node {\n  panSlider2D: Slider2D;\n  zSlider: Slider;\n  zInput: Input;\n  bypassToggle: Toggle;\n\n  panner: PannerNode;\n  inGain: GainNode;\n  outGain: GainNode;\n\n  posX: number;\n  posY: number;\n  posZ: number;\n  orientationX: number = 0.0;\n  orientationY: number = 0.0;\n  orientationZ: number = -1.0;\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(\n      flow, options.name || '3D Spatial Panner',\n      options.position || new Vector(50, 50),\n      options.width || 200,\n      [{ name: 'in', dataType: 'audio' }],\n      [{ name: 'out', dataType: 'audio' }],\n      {\n        state: options.state ?\n          { value: new Vector(.5, .5), z: -1, bypass: false, ...options.state }\n          : { value: new Vector(.5, .5), z: -1, bypass: false },\n        style: options.style || { rowHeight: 10, spacing: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    )\n\n    this.posX = this.flow.flowConnect.audioContext.listener.positionX.value;\n    this.posY = this.flow.flowConnect.audioContext.listener.positionY.value;\n    this.posZ = -1;\n\n    this.inGain = flow.flowConnect.audioContext.createGain();\n    this.outGain = flow.flowConnect.audioContext.createGain();\n    this.panner = new PannerNode(flow.flowConnect.audioContext, {\n      panningModel: 'HRTF',\n      distanceModel: 'linear',\n      positionX: this.posX,\n      positionY: this.posY,\n      positionZ: this.posZ,\n      orientationX: this.orientationX,\n      orientationY: this.orientationY,\n      orientationZ: this.orientationZ\n    });\n\n    this.inputs[0].ref = this.inGain;\n    this.outputs[0].ref = this.outGain;\n\n    this.setBypass();\n\n    this.setupUI();\n\n    this.watch('value', (_oldVal, newVal) => {\n      let x = denormalize(newVal.x, -1, 1);\n      let y = denormalize(newVal.y, -1, 1);\n      this.panner.positionX.value = x;\n      this.panner.positionY.value = y;\n    });\n    this.watch('z', (_oldVal, newVal) => {\n      if (newVal < -10000 || newVal > 10000) this.state.z = clamp(parseInt(newVal), -10000, 10000);\n      this.panner.positionZ.value = this.state.z;\n    });\n    this.watch('bypass', this.setBypass.bind(this));\n\n    this.handleAudioConnections();\n  }\n\n  setBypass() {\n    if (!this.state.bypass) {\n      this.inGain.disconnect();\n      this.inGain.connect(this.panner);\n      this.panner.connect(this.outGain);\n    } else {\n      this.panner.disconnect();\n      this.inGain.disconnect();\n      this.inGain.connect(this.outGain);\n    }\n  }\n\n  setupUI() {\n    this.panSlider2D = this.createSlider2D({ propName: 'value', height: this.width - this.style.padding * 2 });\n    this.zSlider = this.createSlider(-10000, 10000, { height: 10, propName: 'z', style: { grow: .6 } });\n    this.zInput = this.createInput({ propName: 'z', height: 20, style: { type: InputType.Number, grow: .3, precision: 0 } });\n    this.bypassToggle = this.createToggle({ propName: 'bypass', style: { grow: .15 } });\n    this.ui.append([\n      this.panSlider2D,\n      this.createHozLayout([this.createLabel('Z', { style: { grow: .1 } }), this.zSlider, this.zInput], { style: { spacing: 5 } }),\n      this.createHozLayout([this.createLabel('Bypass ?', { style: { grow: .3 } }), this.bypassToggle], { style: { spacing: 5 } })\n    ]);\n  }\n  handleAudioConnections() {\n    this.outputs[0].on('connect', (_inst, connector) => this.outputs[0].ref.connect(connector.end.ref));\n    this.outputs[0].on('disconnect', (_inst, _connector, _start, end) => this.outputs[0].ref.disconnect(end.ref));\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { clamp, denormalize } from \"../../utils/utils\";\nimport { Node } from \"../../core/node\";\nimport { InputType, Input, Envelope } from \"../../ui/index\";\n\nexport class ADSR extends Node {\n  envelopeInput: Envelope;\n  minInput: Input;\n  maxInput: Input;\n  aInput: Input;\n  dInput: Input;\n  sInput: Input;\n  rInput: Input;\n\n  proxyParamNode: AudioWorkletNode;\n  proxyParam: AudioParam;\n\n  static DefaultState = { min: 0, max: 1, a: 0.4, d: 0.2, s: 0.6, r: 0.4, trigger: false };\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'ADSR', options.position || new Vector(50, 50), options.width || 280,\n      [{ name: 'trigger', dataType: 'event' }],\n      [{ name: 'out', dataType: 'audio' }],\n      {\n        state: options.state ? { ...ADSR.DefaultState, ...options.state } : ADSR.DefaultState,\n        style: options.style || { rowHeight: 10, spacing: 15 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.proxyParamNode = new AudioWorkletNode(\n      flow.flowConnect.audioContext,\n      'proxy-param',\n      { numberOfOutputs: 1, parameterData: { param: 0 } }\n    );\n    this.proxyParam = (this.proxyParamNode.parameters as Map<string, AudioParam>).get('param');\n    this.outputs[0].ref = this.proxyParamNode;\n    this.setMinMax();\n    this.state.s = clamp(this.state.s, 0, 1);\n\n    this.setupUI();\n\n    this.minInput.on('blur', this.setMinMax);\n    this.maxInput.on('blur', this.setMinMax);\n    this.aInput.on('blur', () => this.adsrChanged());\n    this.dInput.on('blur', () => this.adsrChanged());\n    this.sInput.on('blur', () => this.adsrChanged());\n    this.rInput.on('blur', () => this.adsrChanged());\n\n    this.inputs[0].on('event', () => {\n      this.state.trigger = !this.state.trigger;\n      let currTime = flow.flowConnect.audioContext.currentTime;\n      let { a, d, s, r } = this.state;\n      if (this.state.trigger) {\n        // Attack\n        this.proxyParam.cancelScheduledValues(0);\n        this.proxyParam.setValueAtTime(this.state.min, currTime);\n        this.proxyParam.linearRampToValueAtTime(1 * this.state.max, currTime + a);\n        this.proxyParam.linearRampToValueAtTime(denormalize(s, this.state.min, this.state.max), currTime + a + d);\n      } else {\n        // Release\n        this.proxyParam.cancelScheduledValues(0);\n        this.proxyParam.setValueAtTime(this.proxyParam.value, currTime);\n        this.proxyParam.linearRampToValueAtTime(this.state.min, currTime + r);\n      }\n    });\n\n    this.handleAudioConnections();\n  }\n  adsrChanged() {\n    this.state.s = clamp(this.state.s, 0, 1);\n    let { a, d, r } = this.state;\n    let totalDur = a + d + r;\n    this.envelopeInput.value = [\n      Vector.Zero(), new Vector(a / totalDur, 1), new Vector((a + d) / totalDur, this.state.s), new Vector(1, 0)\n    ];\n  }\n  stopAutomation() {\n    this.proxyParam.cancelScheduledValues(this.flow.flowConnect.audioContext.currentTime);\n  }\n  setMinMax() {\n    this.state.proxyParamNode.port.postMessage({\n      type: 'set-range',\n      value: { min: this.state.min, max: this.state.max }\n    });\n  }\n  setupUI() {\n    let { a: atck, d: dcay, r: rlse } = this.state;\n    let duration = atck + dcay + rlse;\n\n    this.envelopeInput = this.createEnvelope(145, [\n      Vector.Zero(), new Vector(atck / duration, 1), new Vector((atck + dcay) / duration, this.state.s), new Vector(1, 0)\n    ], { style: { pointColor: '#fcba03' } });\n    this.envelopeInput.disabled = true;\n\n    this.minInput = this.createInput({\n      propName: 'min', height: 20, style: { type: InputType.Number, grow: .5, step: 'any' }\n    });\n    this.maxInput = this.createInput({\n      propName: 'max', height: 20, style: { type: InputType.Number, grow: .5, step: 'any' }\n    });\n    this.aInput = this.createInput({ propName: 'a', height: 20, style: { type: InputType.Number, step: 'any', grow: .5, precision: 3 } });\n    this.dInput = this.createInput({ propName: 'd', height: 20, style: { type: InputType.Number, step: 'any', grow: .5, precision: 3 } });\n    this.sInput = this.createInput({ propName: 's', height: 20, style: { type: InputType.Number, step: 'any', grow: .5, precision: 3 } });\n    this.rInput = this.createInput({ propName: 'r', height: 20, style: { type: InputType.Number, step: 'any', grow: .5, precision: 3 } });\n\n    this.ui.append([\n      this.envelopeInput,\n      this.createHozLayout([\n        this.createLabel('Min'), this.minInput,\n        this.createLabel('Max'), this.maxInput\n      ], { style: { spacing: 5 } }),\n      this.createHozLayout([\n        this.createLabel('A'), this.aInput, this.createLabel('D'), this.dInput\n      ], { style: { spacing: 5 } }),\n      this.createHozLayout([\n        this.createLabel('S'), this.sInput, this.createLabel('R'), this.rInput\n      ], { style: { spacing: 5 } })\n    ]);\n  }\n  handleAudioConnections() {\n    // Handle actual webaudio node stuff\n    this.outputs[0].on('connect', (_inst, connector) => {\n      if (connector.end.ref instanceof AudioParam) {\n        // Need to do this else the value provided by the worklet node as param value is getting offset instead of overwrite\n        let offset = Math.max(0, connector.end.ref.minValue);\n        connector.end.ref.value = offset;\n        if (offset !== 0) {\n          this.proxyParamNode.port.postMessage({ type: 'set-offset', value: offset });\n        }\n      }\n      this.outputs[0].ref.connect(connector.end.ref);\n    });\n    this.outputs[0].on('disconnect', (_inst, _connector, _start, end) => {\n      this.stopAutomation();\n      this.outputs[0].ref.disconnect(end.ref);\n    });\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { Node } from \"../../core/node\";\nimport { Source } from \"../../ui/index\";\n\nexport class AudioBufferSource extends Node {\n  fileInput: Source\n\n  static DefaultState: any = { file: null, buffer: null };\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'AudioBuffer Source', options.position || new Vector(50, 50), options.width || 170,\n      [],\n      [{ name: 'buffer', dataType: 'audio-buffer' }],\n      {\n        state: options.state ? { ...AudioBufferSource.DefaultState, ...options.state } : AudioBufferSource.DefaultState,\n        style: options.style || { rowHeight: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.setupUI();\n\n    this.fileInput.on('change', () => this.processFile());\n    this.on('process', () => this.processFile());\n  }\n\n  async processFile() {\n    let file = this.state.file;\n    if (!file) return;\n\n    let cached = this.flow.flowConnect.arrayBufferCache.get(file.name + file.type);\n    if (!cached) {\n      cached = await file.arrayBuffer();\n      this.flow.flowConnect.arrayBufferCache.set(file.name + file.type, cached);\n    }\n    this.processArrayBuffer(cached);\n  }\n  async processArrayBuffer(arrayBuffer: ArrayBuffer) {\n    let cached = this.flow.flowConnect.audioBufferCache.get(arrayBuffer);\n    if (!cached) {\n      cached = await this.flow.flowConnect.audioContext.decodeAudioData(arrayBuffer);\n      this.flow.flowConnect.audioBufferCache.set(arrayBuffer, cached);\n    }\n    this.state.buffer = cached;\n    this.setOutputs(0, this.state.buffer);\n  }\n  setupUI() {\n    this.fileInput = this.createSource({ height: 20, propName: 'file', style: { grow: 1 } });\n    this.ui.append(this.createHozLayout([\n      this.createLabel('File'), this.fileInput\n    ], { style: { spacing: 20 } }));\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { denormalize } from \"../../utils/utils\";\nimport { Node } from \"../../core/node\";\nimport { InputType, Input, Envelope, Toggle } from \"../../ui/index\";\n\nexport class Automate extends Node {\n  envelopeInput: Envelope;\n  minInput: Input;\n  maxInput: Input;\n  durationInput: Input;\n  autoToggle: Toggle;\n  loopToggle: Toggle;\n\n  proxyParamNode: AudioWorkletNode;\n  proxyParam: AudioParam;\n\n  static DefaultState = { min: 0, max: 1, value: 0.5, duration: 1, auto: true, loop: false };\n\n  timerId: number;\n  scheduleEndTime: number;\n  finiteLoop = 2;            // how much iterations to schedule in the future\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}, envelope: Array<Vector> = [new Vector(.2, .5), new Vector(.5, .8), new Vector(.9, .2)]) {\n    super(flow, options.name || 'Automate', options.position || new Vector(50, 50), options.width || 280,\n      [{ name: 'trigger', dataType: 'event' }],\n      [{ name: 'out', dataType: 'audio' }],\n      {\n        state: options.state ? { ...Automate.DefaultState, ...options.state } : Automate.DefaultState,\n        style: options.style || { rowHeight: 10, spacing: 15 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.proxyParamNode = new AudioWorkletNode(\n      flow.flowConnect.audioContext,\n      'proxy-param',\n      { numberOfOutputs: 1, parameterData: { param: this.state.value } }\n    );\n    this.proxyParam = (this.proxyParamNode.parameters as Map<string, AudioParam>).get('param');\n    this.setMinMax();\n    this.outputs[0].ref = this.proxyParamNode;\n\n    this.setupUI(envelope);\n\n    this.minInput.on('blur', () => {\n      this.setMinMax();\n      this.startAutomation();\n    });\n    this.maxInput.on('blur', () => {\n      this.setMinMax();\n      this.startAutomation();\n    });\n\n    this.envelopeInput.on('change', () => this.startAutomation());\n    this.durationInput.on('change', () => this.startAutomation());\n    this.loopToggle.on('change', () => this.startAutomation());\n    this.inputs[0].on('event', () => this.startAutomation());\n\n    flow.flowConnect.on('start', () => this.state.auto && this.startAutomation());\n    flow.flowConnect.on('stop', () => this.stopAutomation());\n\n    this.handleAudioConnections();\n  }\n\n  startAutomation() {\n    // Stop any previously scheduled automations\n    this.stopAutomation();\n\n    // Convert normalized to actual values (x=time, y=param value)\n    let values = this.envelopeInput.value;\n    for (let currVal of values) {\n      currVal.x = currVal.x * this.state.duration;\n      currVal.y = denormalize(currVal.y, this.state.min, this.state.max);\n    }\n\n    let automateDuration = values[values.length - 1].x;\n    if (this.state.loop) {\n      // Schedule far in the future hoping that even if main thread blocks it recovers by the time scheduled automations are finished\n      this.schedule(values, this.flow.flowConnect.audioContext.currentTime, this.finiteLoop);\n      this.timerId = window.setInterval(() => {\n        // If web audio clock reaches final iteration of scheduled automations, then reschedule another finiteLoop iterations\n        if (this.flow.flowConnect.audioContext.currentTime > this.scheduleEndTime - automateDuration) {\n          this.schedule(values, this.scheduleEndTime, this.finiteLoop);\n        }\n      }, 50);\n    } else {\n      this.schedule(values, this.flow.flowConnect.audioContext.currentTime, 1);\n    }\n  }\n  stopAutomation() {\n    this.proxyParam.cancelScheduledValues(this.flow.flowConnect.audioContext.currentTime);\n    clearInterval(this.timerId);\n  }\n  schedule(values: Vector[], time: number, iterations: number) {\n    for (let i = 0; i < iterations; i += 1) {\n      values.forEach(value => {\n        this.proxyParam.linearRampToValueAtTime(value.y, time + value.x)\n      });\n    }\n    this.scheduleEndTime = time + values[values.length - 1].x;\n  }\n  setMinMax() {\n    this.proxyParamNode.port.postMessage({ type: 'set-range', value: { min: this.state.min, max: this.state.max } });\n  }\n  setupUI(envelope: Vector[]) {\n    this.envelopeInput = this.createEnvelope(145, envelope, { input: true, output: true });\n    this.minInput = this.createInput({\n      propName: 'min', height: 20, style: { type: InputType.Number, grow: .5, step: 'any' }\n    });\n    this.maxInput = this.createInput({\n      propName: 'max', height: 20, style: { type: InputType.Number, grow: .5, step: 'any' }\n    });\n    this.durationInput = this.createInput({\n      propName: 'duration', height: 20, style: { type: InputType.Number, step: 'any', grow: .5 }\n    });\n    this.autoToggle = this.createToggle({ propName: 'auto' });\n    this.loopToggle = this.createToggle({ propName: 'loop' });\n\n    this.ui.append([\n      this.envelopeInput,\n      this.createHozLayout([\n        this.createLabel('Min'), this.minInput,\n        this.createLabel('Max'), this.maxInput\n      ], { style: { spacing: 5 } }),\n      this.createHozLayout([\n        this.createLabel('Duration (seconds)', { style: { grow: .5 } }),\n        this.durationInput\n      ], { style: { spacing: 5 } }),\n      this.createHozLayout([\n        this.createHozLayout([this.createLabel('Auto Start ?', { height: 20 }), this.autoToggle], { style: { spacing: 5, grow: .5 } }),\n        this.createHozLayout([this.createLabel('Loop ?', { height: 20 }), this.loopToggle], { style: { spacing: 5, grow: .5 } })\n      ]),\n    ]);\n  }\n  handleAudioConnections() {\n    // Handle actual webaudio node stuff\n    this.outputs[0].on('connect', (_inst, connector) => {\n      if (connector.end.ref instanceof AudioParam) {\n        // Need to do this else the value provided by the worklet node as param value is getting offset instead of overwrite\n        let offset = Math.max(0, connector.end.ref.minValue);\n        connector.end.ref.value = offset;\n        if (offset !== 0) {\n          this.proxyParamNode.port.postMessage({ type: 'set-offset', value: offset });\n        }\n      }\n      this.outputs[0].ref.connect(connector.end.ref);\n      this.startAutomation();\n    });\n    this.outputs[0].on('disconnect', (_inst, _connector, _start, end) => {\n      this.stopAutomation();\n      this.outputs[0].ref.disconnect(end.ref);\n    });\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { Node } from \"../../core/node\";\nimport { Select, Toggle } from \"../../ui/index\";\n\nexport class BiquadFilter extends Node {\n  typeSelect: Select;\n  bypassToggle: Toggle\n\n  inGain: GainNode;\n  outGain: GainNode;\n  biquadFilter: BiquadFilterNode;\n\n  static DefaultState = { filterType: 'lowpass', bypass: false };\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'Biquad Filter', options.position || new Vector(50, 50), options.width || 230,\n      [\n        { name: 'in', dataType: 'audio' }, { name: 'gain', dataType: 'audioparam' },\n        { name: 'Q', dataType: 'audioparam' }, { name: 'frequency', dataType: 'audioparam' },\n        { name: 'detune', dataType: 'audioparam' }\n      ],\n      [{ name: 'out', dataType: 'audio' }],\n      {\n        state: options.state ? { ...BiquadFilter.DefaultState, ...options.state } : BiquadFilter.DefaultState,\n        style: options.style || { rowHeight: 10, spacing: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.inGain = flow.flowConnect.audioContext.createGain();\n    this.outGain = flow.flowConnect.audioContext.createGain();\n    this.inputs[0].ref = this.inGain;\n    this.outputs[0].ref = this.outGain;\n\n    this.biquadFilter = flow.flowConnect.audioContext.createBiquadFilter();\n    this.biquadFilter.gain.value = 0;\n    this.biquadFilter.Q.value = 1;\n    this.biquadFilter.frequency.value = 800;\n    this.biquadFilter.detune.value = 0;\n    this.biquadFilter.type = this.state.filterType;\n\n    this.inputs[1].ref = this.biquadFilter.gain;\n    this.inputs[2].ref = this.biquadFilter.Q;\n    this.inputs[3].ref = this.biquadFilter.frequency;\n    this.inputs[4].ref = this.biquadFilter.detune;\n    this.inputs[1].on('data', (_, data) => typeof data === 'number' && (this.inputs[1].ref.value = data));\n    this.inputs[2].on('data', (_, data) => typeof data === 'number' && (this.inputs[2].ref.value = data));\n    this.inputs[3].on('data', (_, data) => typeof data === 'number' && (this.inputs[3].ref.value = data));\n    this.inputs[4].on('data', (_, data) => typeof data === 'number' && (this.inputs[4].ref.value = data));\n\n    this.setBypass();\n    this.setupUI();\n\n    this.typeSelect.on('change', () => {\n      this.biquadFilter.type = this.state.filterType\n    });\n    this.watch('bypass', () => this.setBypass());\n\n    this.handleAudioConnections();\n  }\n\n  setBypass() {\n    if (!this.state.bypass) {\n      this.inGain.disconnect();\n      this.inGain.connect(this.biquadFilter);\n      this.biquadFilter.connect(this.outGain);\n    } else {\n      this.biquadFilter.disconnect();\n      this.inGain.disconnect();\n      this.inGain.connect(this.outGain);\n    }\n  }\n  setupUI() {\n    this.typeSelect = this.createSelect(\n      ['lowpass', 'highpass', 'bandpass', 'lowshelf', 'highshelf', 'peaking', 'notch', 'allpass'],\n      { propName: 'filterType', height: 15, style: { grow: .7 } }\n    );\n    this.bypassToggle = this.createToggle({ propName: 'bypass', style: { grow: .1 } });\n    this.ui.append([\n      this.createHozLayout([this.createLabel('Type', { style: { grow: .3 } }), this.typeSelect], { style: { spacing: 5 } }),\n      this.createHozLayout([this.createLabel('Bypass ?', { style: { grow: .3 } }), this.bypassToggle], { style: { spacing: 5 } })\n    ]);\n  }\n  handleAudioConnections() {\n    // Handle actual webaudio node stuff\n    this.outputs[0].on('connect', (_, connector) => this.outputs[0].ref.connect(connector.end.ref));\n    this.outputs[0].on('disconnect', (_inst, _connector, _start, end) => this.outputs[0].ref.disconnect(end.ref));\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { clamp } from \"../../utils/utils\";\nimport { Node } from \"../../core/node\";\nimport { InputType, Input, Slider, Toggle } from \"../../ui/index\";\n\nexport class BitcrusherEffect extends Node {\n  bitsSlider: Slider;\n  bitsInput: Input;\n  normFreqSlider: Slider;\n  normFreqInput: Input;\n  bypassToggle: Toggle;\n\n  inGain: GainNode;\n  outGain: GainNode;\n  bitcrusher: AudioWorkletNode;\n\n  static DefaultState = { bits: 4, normFreq: 0.1, bypass: false };\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'Bitcrusher Effect', options.position || new Vector(50, 50), options.width || 230,\n      [{ name: 'in', dataType: 'audio' }],\n      [{ name: 'out', dataType: 'audio' }],\n      {\n        state: options.state ? { ...BitcrusherEffect.DefaultState, ...options.state } : BitcrusherEffect.DefaultState,\n        style: options.style || { rowHeight: 10, spacing: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.inGain = flow.flowConnect.audioContext.createGain();\n    this.outGain = flow.flowConnect.audioContext.createGain();\n    this.inputs[0].ref = this.inGain;\n    this.outputs[0].ref = this.outGain;\n\n    this.bitcrusher = new AudioWorkletNode(flow.flowConnect.audioContext, 'bitcrusher-effect', {\n      numberOfInputs: 1, numberOfOutputs: 1, processorOptions: { bufferSize: 4096 }\n    });\n\n    this.setBypass();\n    this.setupUI();\n\n    this.bitsSlider.on('change', () => this.paramsChanged());\n    this.normFreqSlider.on('change', () => this.paramsChanged());\n    this.bitsInput.on('change', () => this.paramsChanged());\n    this.normFreqInput.on('change', () => this.paramsChanged());\n    this.watch('bypass', () => this.setBypass());\n    this.watch('bits', () => {\n      if (this.state.bits < 1 || this.state.bits > 16 || !Number.isInteger(this.state.bits)) {\n        this.state.bits = clamp(Math.floor(this.state.bits), 1, 16);\n      }\n    });\n    this.watch('normFreq', () => {\n      if (this.state.normFreq < 0 || this.state.normFreq > 1) this.state.normFreq = clamp(this.state.normFreq, 0, 1);\n    });\n\n    flow.flowConnect.on('start', () => this.paramsChanged());\n\n    this.handleAudioConnections();\n  }\n\n  setBypass() {\n    if (!this.state.bypass) {\n      this.inGain.disconnect();\n      this.inGain.connect(this.bitcrusher);\n      this.bitcrusher.connect(this.outGain);\n    } else {\n      this.bitcrusher.disconnect();\n      this.inGain.disconnect();\n      this.inGain.connect(this.outGain);\n    }\n  }\n  paramsChanged() {\n    this.bitcrusher.port.postMessage({ bits: this.state.bits, normFreq: this.state.normFreq });\n  }\n  setupUI() {\n    this.bitsSlider = this.createSlider(1, 16, { height: 10, propName: 'bits', style: { grow: .5 } });\n    this.normFreqSlider = this.createSlider(0, 1, { height: 10, propName: 'normFreq', style: { grow: .5 } });\n    this.bitsInput = this.createInput({ propName: 'bits', height: 20, style: { type: InputType.Number, grow: .2 } });\n    this.normFreqInput = this.createInput({ propName: 'normFreq', height: 20, style: { type: InputType.Number, grow: .4, precision: 2 } });\n    this.bypassToggle = this.createToggle({ propName: 'bypass', style: { grow: .1 } });\n    this.ui.append([\n      this.createHozLayout([this.createLabel('Bits', { style: { grow: .3 } }), this.bitsSlider, this.bitsInput], { style: { spacing: 5 } }),\n      this.createHozLayout([this.createLabel('Norm Freq.', { style: { grow: .3 } }), this.normFreqSlider, this.normFreqInput], { style: { spacing: 5 } }),\n      this.createHozLayout([this.createLabel('Bypass ?', { style: { grow: .3 } }), this.bypassToggle], { style: { spacing: 5 } })\n    ]);\n  }\n  handleAudioConnections() {\n    // Handle actual webaudio node stuff\n    this.outputs[0].on('connect', (_, connector) => this.outputs[0].ref.connect(connector.end.ref));\n    this.outputs[0].on('disconnect', (_inst, _connector, _start, end) => this.outputs[0].ref.disconnect(end.ref));\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { Terminal, TerminalType } from \"../../core/terminal\";\nimport { Node } from \"../../core/node\";\nimport { Button } from \"../../ui/index\";\n\nexport class ChannelMerger extends Node {\n  addChannelButton: Button\n\n  merger: ChannelMergerNode;\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'Channel Merger', options.position || new Vector(50, 50), options.width || 160,\n      [{ name: 'Channel 1', dataType: 'audio' }, { name: 'Channel 2', dataType: 'audio' }],\n      [{ name: 'out', dataType: 'audio' }],\n      {\n        state: options.state || {},\n        style: options.style || { rowHeight: 10, spacing: 15 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.inputs[0].ref = flow.flowConnect.audioContext.createGain();\n    this.inputs[1].ref = flow.flowConnect.audioContext.createGain();\n    this.outputs[0].ref = flow.flowConnect.audioContext.createGain();\n    this.merger = flow.flowConnect.audioContext.createChannelMerger(2);\n\n    this.inputs[0].ref.connect(this.merger, 0, 0);\n    this.inputs[1].ref.connect(this.merger, 0, 1);\n    this.merger.connect(this.outputs[0].ref);\n\n    this.setupUI();\n\n    this.addChannelButton.on('click', () => {\n      this.merger.disconnect();\n      this.inputs.forEach(input => input.ref.disconnect());\n      this.merger = flow.flowConnect.audioContext.createChannelMerger(this.inputs.length + 1);\n\n      let newTerm = new Terminal(this, TerminalType.IN, 'audio', 'Channel ' + (this.inputs.length + 1));\n      newTerm.ref = flow.flowConnect.audioContext.createGain();\n      this.addTerminal(newTerm);\n\n      this.inputs.forEach((input, index) => input.ref.connect(this.merger, 0, index));\n      this.merger.connect(this.outputs[0].ref);\n    });\n\n    this.handleAudioConnections();\n  }\n\n  setupUI() {\n    this.addChannelButton = this.createButton('Add In Channel', { height: 20 });\n    this.ui.append(this.addChannelButton);\n  }\n  handleAudioConnections() {\n    // Handle actual webaudio node stuff\n    this.outputs[0].on('connect', (_, connector) => this.outputs[0].ref.connect(connector.end.ref));\n    this.outputs[0].on('disconnect', (_inst, _connector, _start, end) => this.outputs[0].ref.disconnect(end.ref));\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { Terminal, TerminalType } from \"../../core/terminal\";\nimport { Node } from \"../../core/node\";\n\nexport class ChannelSplitter extends Node {\n  splitter: ChannelSplitterNode;\n\n  oldNoOfChannels = 1;\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'Channel Splitter', options.position || new Vector(50, 50), options.width || 160,\n      [{ name: 'in', dataType: 'audio' }],\n      [{ name: 'Channel 1', dataType: 'audio' }],\n      {\n        state: options.state || {},\n        style: options.style || { rowHeight: 10, spacing: 15 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.inputs[0].ref = flow.flowConnect.audioContext.createGain();\n    this.outputs[0].ref = flow.flowConnect.audioContext.createGain();\n    this.outputs[0].ref.channelCountMode = 'explicit';\n\n    this.on('channel-count-change', (newNoOfChannels) => this.checkChannels(newNoOfChannels));\n\n    this.handleAudioConnections();\n  }\n\n  checkChannels(newNoOfChannels: number) {\n    if (this.oldNoOfChannels === newNoOfChannels) return;\n\n    this.splitter && this.splitter.disconnect();\n    this.inputs[0].ref.disconnect();\n\n    let splitter = this.flow.flowConnect.audioContext.createChannelSplitter(newNoOfChannels);\n    this.inputs[0].ref.connect(splitter);\n\n    let terminalsToRemove = [];\n    for (let i = 0; i < Math.max(newNoOfChannels, this.oldNoOfChannels); i += 1) {\n      if (i < newNoOfChannels) {\n        if (i < this.oldNoOfChannels) {\n          splitter.connect(this.outputs[i].ref, i);\n        } else {\n          let newTerminal = new Terminal(this, TerminalType.OUT, 'audio', 'Channel ' + (i + 1));\n          newTerminal.ref = this.flow.flowConnect.audioContext.createGain();\n          newTerminal.ref.channelCountMode = 'explicit';\n          this.addTerminal(newTerminal);\n          this.outputs[i].on('connect', (_inst, cntr) => this.outputs[i].ref.connect(cntr.end.ref));\n          this.outputs[i].on('disconnect', (_inst, _cntr, _start, end) => this.outputs[i].ref.disconnect(end.ref));\n          splitter.connect(this.outputs[i].ref, i);\n        }\n      } else {\n        terminalsToRemove.push(this.outputs[i]);\n      }\n    }\n    terminalsToRemove.forEach(term => {\n      term.ref.disconnect();\n      this.removeTerminal(term);\n    });\n\n    this.oldNoOfChannels = newNoOfChannels;\n    this.splitter = splitter;\n  }\n  handleAudioConnections() {\n    // Handle actual webaudio node stuff\n    this.outputs[0].on('connect', (_inst, cntr) => this.outputs[0].ref.connect(cntr.end.ref));\n    this.outputs[0].on('disconnect', (_inst, _cntr, _start, end) => this.outputs[0].ref.disconnect(end.ref));\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { clamp } from \"../../utils/utils\";\nimport { Node } from '../../core/node';\nimport { InputType, Input, Slider, Toggle } from \"../../ui/index\";\nlet Tuna = require('../../lib/tuna.js');\n\nexport class ChorusEffect extends Node {\n  delaySlider: Slider;\n  delayInput: Input;\n  feedbackSlider: Slider;\n  feedbackInput: Input;\n  rateSlider: Slider;\n  rateInput: Input;\n  bypassToggle: Toggle;\n  depthSlider: Slider;\n  depthInput: Input;\n  chorus: any;\n\n  static DefaultState = { feedback: 0.4, delay: 0.0045, depth: 0.7, rate: 0.01, bypass: false };\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(\n      flow, options.name || 'Chorus Effect',\n      options.position || new Vector(50, 50),\n      options.width || 230,\n      [{ name: 'in', dataType: 'audio' }],\n      [{ name: 'out', dataType: 'audio' }],\n      {\n        style: options.style || { rowHeight: 10, spacing: 10 },\n        terminalStyle: options.terminalStyle || {},\n        state: options.state ? { ...ChorusEffect.DefaultState, ...options.state } : ChorusEffect.DefaultState\n      }\n    )\n\n    if (!(window as any).__tuna__) (window as any).__tuna__ = new Tuna(flow.flowConnect.audioContext);\n\n    this.chorus = new (window as any).__tuna__.Chorus();\n    this.inputs[0].ref = this.outputs[0].ref = this.chorus;\n    this.setupUI();\n    Object.assign(this.chorus, {\n      delay: this.state.delay,\n      depth: this.state.depth,\n      feedback: this.state.feedback,\n      rate: this.state.rate\n    });\n\n    this.watch('delay', (_oldVal, newVal) => {\n      if (newVal < 0 || newVal > 1) this.state.delay = clamp(newVal, 0, 1);\n      this.chorus.delay = this.state.delay;\n    });\n    this.watch('depth', (_oldVal, newVal) => {\n      if (newVal < 0 || newVal > 1) this.state.depth = clamp(newVal, 0, 1);\n      this.chorus.depth = this.state.depth;\n    });\n    this.watch('feedback', (_oldVal, newVal) => {\n      if (newVal < 0 || newVal > 0.95) this.state.feedback = clamp(newVal, 0, 0.95);\n      this.chorus.feedback = this.state.feedback;\n    });\n    this.watch('rate', (_oldVal, newVal) => {\n      if (newVal < 0 || newVal > 0.1) this.state.rate = clamp(newVal, 0, 0.1);\n      this.chorus.rate = this.state.rate;\n    });\n    this.watch('bypass', (_oldVal, newVal) => this.chorus.bypass = newVal);\n\n    this.handleAudioConnections();\n  }\n\n  setupUI() {\n    this.delaySlider = this.createSlider(0, 1, { height: 10, propName: 'delay', style: { grow: .5 } });\n    this.delayInput = this.createInput({ propName: 'delay', height: 20, style: { type: InputType.Number, grow: .2, precision: 4 } });\n    this.depthSlider = this.createSlider(0, 1, { height: 10, propName: 'depth', style: { grow: .5 } });\n    this.depthInput = this.createInput({ propName: 'depth', height: 20, style: { type: InputType.Number, grow: .2, precision: 2 } });\n    this.feedbackSlider = this.createSlider(0, 0.95, { height: 10, propName: 'feedback', style: { grow: .5 } });\n    this.feedbackInput = this.createInput({ propName: 'feedback', height: 20, style: { type: InputType.Number, grow: .2, precision: 2 } });\n    this.rateSlider = this.createSlider(0, 0.1, { height: 10, propName: 'rate', style: { grow: .5 } });\n    this.rateInput = this.createInput({ propName: 'rate', height: 20, style: { type: InputType.Number, grow: .2, precision: 2 } });\n    this.bypassToggle = this.createToggle({ propName: 'bypass', style: { grow: .1 } });\n    this.ui.append([\n      this.createHozLayout([this.createLabel('Delay', { style: { grow: .3 } }), this.delaySlider, this.delayInput], { style: { spacing: 5 } }),\n      this.createHozLayout([this.createLabel('Depth', { style: { grow: .3 } }), this.depthSlider, this.depthInput], { style: { spacing: 5 } }),\n      this.createHozLayout([this.createLabel('Feedback', { style: { grow: .3 } }), this.feedbackSlider, this.feedbackInput], { style: { spacing: 5 } }),\n      this.createHozLayout([this.createLabel('Rate', { style: { grow: .3 } }), this.rateSlider, this.rateInput], { style: { spacing: 5 } }),\n      this.createHozLayout([this.createLabel('Bypass ?', { style: { grow: .3 } }), this.bypassToggle], { style: { spacing: 5 } })\n    ]);\n  }\n  handleAudioConnections() {\n    this.outputs[0].on('connect', (_inst, connector) => this.outputs[0].ref.connect(connector.end.ref));\n    this.outputs[0].on('disconnect', (_inst, _connector, _start, end) => this.outputs[0].ref.disconnect(end.ref));\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { Node } from \"../../core/node\";\nimport { Toggle } from \"../../ui/index\";\n\nexport class Convolver extends Node {\n  bypassToggle: Toggle\n\n  inGain: GainNode;\n  outGain: GainNode;\n  convolver: ConvolverNode;\n\n  static DefaultState = { bypass: false };\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'Convolver', options.position || new Vector(50, 50), options.width || 160,\n      [{ name: 'in', dataType: 'audio' }, { name: 'impulse', dataType: 'audio-buffer' }],\n      [{ name: 'out', dataType: 'audio' }],\n      {\n        state: options.state ? { ...Convolver.DefaultState, ...options.state } : Convolver.DefaultState,\n        style: options.style || { rowHeight: 10, spacing: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.inGain = flow.flowConnect.audioContext.createGain();\n    this.outGain = flow.flowConnect.audioContext.createGain();\n    this.convolver = flow.flowConnect.audioContext.createConvolver();\n\n    this.inputs[0].ref = this.inGain;\n    this.outputs[0].ref = this.outGain;\n\n    this.setBypass();\n\n    this.setupUI();\n\n    this.watch('bypass', () => this.setBypass());\n    this.inputs[1].on('data', (_inst, data) => {\n      this.convolver.buffer = data;\n    });\n\n    this.handleAudioConnections();\n  }\n  setBypass() {\n    if (!this.state.bypass) {\n      this.inGain.disconnect();\n      this.inGain.connect(this.convolver);\n      this.convolver.connect(this.outGain);\n    } else {\n      this.inGain.disconnect();\n      this.convolver.disconnect();\n      this.inGain.connect(this.outGain);\n    }\n  }\n  setupUI() {\n    this.bypassToggle = this.createToggle({ propName: 'bypass', style: { grow: .25 } });\n    this.ui.append([\n      this.createHozLayout([this.createLabel('Bypass ?'), this.bypassToggle], { style: { spacing: 5 } })\n    ]);\n  }\n  handleAudioConnections() {\n    // Handle actual webaudio node stuff\n    this.outputs[0].on('connect', (_, connector) => this.outputs[0].ref.connect(connector.end.ref));\n    this.outputs[0].on('disconnect', (_inst, _connector, _start, end) => this.outputs[0].ref.disconnect(end.ref));\n  }\n}\n","import { Flow, FlowState } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { Node } from \"../../core/node\";\n\nexport class Debug extends Node {\n  inGain: GainNode;\n  outGain: GainNode;\n  debugNode: AudioWorkletNode;\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'Debug', options.position || new Vector(50, 50), options.width || 120,\n      [{ name: 'in', dataType: 'audio' }],\n      [{ name: 'out', dataType: 'audio' }, { name: 'debug', dataType: 'any' }],\n      {\n        state: options.state || {},\n        style: options.style || { rowHeight: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.inGain = flow.flowConnect.audioContext.createGain();\n    this.outGain = flow.flowConnect.audioContext.createGain();\n    this.inputs[0].ref = this.inGain;\n    this.outputs[0].ref = this.outGain;\n\n    this.debugNode = new AudioWorkletNode(flow.flowConnect.audioContext, 'debug', { numberOfInputs: 1, numberOfOutputs: 1 });\n    this.debugNode.port.onmessage = (e: any) => {\n      if (flow.state !== FlowState.Stopped) this.setOutputs(1, e.data);\n    }\n    this.inputs[0].ref.connect(this.debugNode);\n    this.debugNode.connect(this.outputs[0].ref);\n\n    this.handleAudioConnections();\n  }\n\n  handleAudioConnections() {\n    // Handle actual webaudio node stuff\n    this.outputs[0].on('connect', (_, connector) => this.outputs[0].ref.connect(connector.end.ref));\n    this.outputs[0].on('disconnect', (_inst, _connector, _start, end) => this.outputs[0].ref.disconnect(end.ref));\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { clamp } from \"../../utils/utils\";\nimport { Node } from \"../../core/node\";\nimport { InputType, Slider } from \"../../ui/index\";\n\nexport class DelayEffect extends Node {\n  delaySlider: Slider;\n  feedbackSlider: Slider;\n  cutoffSlider: Slider;\n  drySlider: Slider;\n  wetSlider: Slider;\n\n  inGain: GainNode;\n  outGain: GainNode;\n  dryGain: GainNode;\n  wetGain: GainNode;\n  filter: BiquadFilterNode;\n  delay: DelayNode;\n  feedbackNode: GainNode;\n\n  static DefaultState = { feedback: 0.45, cutoff: 20000, wet: 0.5, dry: 1, delayTime: 100, bypass: false };\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'Delay', options.position || new Vector(50, 50), options.width || 230,\n      [{ name: 'in', dataType: 'audio' }],\n      [{ name: 'out', dataType: 'audio' }],\n      {\n        state: options.state ? { ...DelayEffect.DefaultState, ...options.state } : DelayEffect.DefaultState,\n        style: options.style || { rowHeight: 10, spacing: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.inGain = flow.flowConnect.audioContext.createGain();\n    this.outGain = flow.flowConnect.audioContext.createGain();\n    this.dryGain = flow.flowConnect.audioContext.createGain();\n    this.wetGain = flow.flowConnect.audioContext.createGain();\n    this.filter = flow.flowConnect.audioContext.createBiquadFilter();\n    this.delay = flow.flowConnect.audioContext.createDelay(10);\n    this.feedbackNode = flow.flowConnect.audioContext.createGain();\n    this.state.filterType = 'lowpass';\n\n    this.delay.delayTime.value = this.state.delayTime / 1000;\n    this.feedbackNode.gain.value = this.state.feedback;\n    this.filter.frequency.value = this.state.cutoff;\n    this.wetGain.gain.value = this.state.wet;\n    this.dryGain.gain.value = this.state.dry;\n\n    this.inputs[0].ref = this.inGain;\n    this.outputs[0].ref = this.outGain;\n\n    this.delay.connect(this.filter);\n    this.filter.connect(this.feedbackNode);\n    this.feedbackNode.connect(this.delay);\n    this.feedbackNode.connect(this.wetGain);\n\n    this.setBypass();\n\n    this.setupUI();\n\n    let delayChanged = () => this.delay.delayTime.value = this.state.delayTime / 1000;\n    this.delaySlider.on('change', delayChanged);\n    this.watch('delayTime', () => {\n      if (this.state.delayTime < 10 || this.state.delayTime > 10000) {\n        this.state.delayTime = clamp(this.state.delayTime, 10, 10000);\n        delayChanged();\n      }\n    });\n    let feedbackChanged = () => this.feedbackNode.gain.setTargetAtTime(this.state.feedback, flow.flowConnect.audioContext.currentTime, 0.01);\n    this.feedbackSlider.on('change', feedbackChanged);\n    this.watch('feedback', () => {\n      if (this.state.feedback < 0 || this.state.feedback > 0.9) {\n        this.state.feedback = clamp(this.state.feedback, 0, 0.9);\n        feedbackChanged();\n      }\n    });\n    let cutoffChanged = () => this.filter.frequency.setTargetAtTime(this.state.cutoff, flow.flowConnect.audioContext.currentTime, 0.01);\n    this.cutoffSlider.on('change', cutoffChanged);\n    this.watch('cutoff', () => {\n      if (this.state.cutoff < 20 || this.state.cutoff > 20000) {\n        this.state.cutoff = clamp(this.state.cutoff, 20, 20000);\n        cutoffChanged();\n      }\n    });\n    let wetChanged = () => this.wetGain.gain.setTargetAtTime(this.state.wet, flow.flowConnect.audioContext.currentTime, 0.01);\n    this.wetSlider.on('change', wetChanged);\n    this.watch('wet', () => {\n      if (this.state.wet < 0 || this.state.wet > 1) {\n        this.state.wet = clamp(this.state.wet, 0, 1);\n        wetChanged();\n      }\n    });\n    let dryChanged = () => this.dryGain.gain.setTargetAtTime(this.state.dry, flow.flowConnect.audioContext.currentTime, 0.01);\n    this.drySlider.on('change', dryChanged);\n    this.watch('dry', () => {\n      if (this.state.dry < 0 || this.state.dry > 1) {\n        this.state.dry = clamp(this.state.dry, 0, 1);\n        dryChanged();\n      }\n    });\n    this.watch('bypass', () => this.setBypass());\n\n    this.handleAudioConnections();\n  }\n\n  setBypass() {\n    if (!this.state.bypass) {\n      this.inGain.connect(this.delay);\n      this.inGain.connect(this.dryGain);\n      this.wetGain.connect(this.outGain);\n      this.dryGain.connect(this.outGain);\n    } else {\n      this.inGain.disconnect();\n      this.wetGain.disconnect();\n      this.dryGain.disconnect();\n      this.inGain.connect(this.outGain);\n    }\n  }\n  setupUI() {\n    let bypassToggle = this.createToggle({ propName: 'bypass', style: { grow: .1 } });\n    this.delaySlider = this.createSlider(0, 10000, { height: 10, propName: 'delayTime', style: { grow: .5 } });\n    let delayInput = this.createInput({ propName: 'delayTime', height: 20, style: { type: InputType.Number, grow: .3, precision: 0 } });\n    this.feedbackSlider = this.createSlider(0, 0.9, { height: 10, propName: 'feedback', style: { grow: .5 } });\n    let feedbackInput = this.createInput({ propName: 'feedback', height: 20, style: { type: InputType.Number, grow: .3, precision: 2 } });\n    this.cutoffSlider = this.createSlider(20, 20000, { height: 10, propName: 'cutoff', style: { grow: .5 } });\n    let cutoffInput = this.createInput({ propName: 'cutoff', height: 20, style: { type: InputType.Number, grow: .3, precision: 0 } });\n    this.wetSlider = this.createSlider(0, 1, { height: 10, propName: 'wet', style: { grow: .5 } });\n    let wetInput = this.createInput({ propName: 'wet', height: 20, style: { type: InputType.Number, grow: .3, precision: 2 } });\n    this.drySlider = this.createSlider(0, 1, { height: 10, propName: 'dry', style: { grow: .5 } });\n    let dryInput = this.createInput({ propName: 'dry', height: 20, style: { type: InputType.Number, grow: .3, precision: 2 } });\n    this.ui.append([\n      this.createHozLayout([this.createLabel('Delay', { style: { grow: .3 } }), this.delaySlider, delayInput], { style: { spacing: 5 } }),\n      this.createHozLayout([this.createLabel('Feedback', { style: { grow: .3 } }), this.feedbackSlider, feedbackInput], { style: { spacing: 5 } }),\n      this.createHozLayout([this.createLabel('Cutoff', { style: { grow: .3 } }), this.cutoffSlider, cutoffInput], { style: { spacing: 5 } }),\n      this.createHozLayout([this.createLabel('Wet', { style: { grow: .3 } }), this.wetSlider, wetInput], { style: { spacing: 5 } }),\n      this.createHozLayout([this.createLabel('Dry', { style: { grow: .3 } }), this.drySlider, dryInput], { style: { spacing: 5 } }),\n      this.createHozLayout([this.createLabel('Bypass ?', { style: { grow: .3 } }), bypassToggle], { style: { spacing: 5 } })\n    ]);\n  }\n  handleAudioConnections() {\n    // Handle actual webaudio node stuff\n    this.outputs[0].on('connect', (_, connector) => this.outputs[0].ref.connect(connector.end.ref));\n    this.outputs[0].on('disconnect', (_inst, _connector, _start, end) => this.outputs[0].ref.disconnect(end.ref));\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { Node } from \"../../core/node\";\n\nexport class Destination extends Node {\n  masterVolumeGainNode: GainNode;\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'Audio Destination', options.position || new Vector(50, 50), options.width || 160,\n      [{ name: 'out', dataType: 'audio' }, { name: 'gain', dataType: 'audioparam' }], [],\n      {\n        state: options.state || {},\n        style: options.style || { rowHeight: 10, spacing: 15 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.masterVolumeGainNode = flow.flowConnect.audioContext.createGain();\n    this.inputs[0].ref = this.masterVolumeGainNode;\n    this.inputs[0].ref.connect(flow.flowConnect.audioContext.destination);\n    this.inputs[1].ref = this.inputs[0].ref.gain;\n    this.inputs[1].on('data', (_, data) => typeof data === 'number' && (this.inputs[1].ref.value = data));\n  }\n\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { clamp } from \"../../utils/utils\";\nimport { Node } from '../../core/node';\nimport { Toggle, Select, Input, InputType } from \"../../ui/index\";\n\nexport class Distorter extends Node {\n  amountInput: Input;\n  oversampleSelect: Select;\n  bypassToggle: Toggle;\n\n  distorter: WaveShaperNode;\n  inGain: GainNode;\n  outGain: GainNode;\n\n  oversampleOptions = ['none', '2x', '4x'];\n\n  static DefaultState = { oversample: 'none', amount: 50, bypass: false };\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(\n      flow, options.name || 'Distorter',\n      options.position || new Vector(50, 50),\n      options.width || 200,\n      [{ name: 'in', dataType: 'audio' }],\n      [{ name: 'out', dataType: 'audio' }],\n      {\n        style: options.style || { rowHeight: 10, spacing: 10 },\n        terminalStyle: options.terminalStyle || {},\n        state: options.state ? { ...Distorter.DefaultState, ...options.state } : Distorter.DefaultState\n      }\n    )\n\n    this.inGain = flow.flowConnect.audioContext.createGain();\n    this.outGain = flow.flowConnect.audioContext.createGain();\n    this.distorter = flow.flowConnect.audioContext.createWaveShaper();\n    this.distorter.oversample = 'none';\n    this.distorter.curve = this.makeDistortionCurve(400);\n\n    this.inputs[0].ref = this.inGain;\n    this.outputs[0].ref = this.outGain;\n\n    this.setBypass();\n\n    this.setupUI();\n\n    this.watch('oversample', (_oldVal, newVal) => {\n      if (!this.oversampleOptions.includes(newVal)) this.state.oversample = 'none';\n      this.distorter.oversample = this.state.oversample;\n    });\n    this.watch('amount', (_oldVal, newVal) => {\n      if (newVal < 0 || newVal > 1000) this.state.amount = clamp(parseInt(newVal), 0, 1000);\n      this.distorter.curve = this.makeDistortionCurve(parseInt(this.state.amount));\n    });\n    this.watch('bypass', this.setBypass.bind(this));\n\n    this.handleAudioConnections();\n  }\n\n  makeDistortionCurve(amount: number) {\n    let k = typeof amount === 'number' ? amount : 50,\n      n_samples = 44100,\n      curve = new Float32Array(n_samples),\n      deg = Math.PI / 180,\n      i = 0,\n      x;\n    for (; i < n_samples; ++i) {\n      x = i * 2 / n_samples - 1;\n      curve[i] = (3 + k) * x * 20 * deg / (Math.PI + k * Math.abs(x));\n    }\n    return curve;\n  }\n  setBypass() {\n    if (!this.state.bypass) {\n      this.inGain.disconnect();\n      this.inGain.connect(this.distorter);\n      this.distorter.connect(this.outGain);\n    } else {\n      this.distorter.disconnect();\n      this.inGain.disconnect();\n      this.inGain.connect(this.outGain);\n    }\n  }\n\n  setupUI() {\n    this.amountInput = this.createInput({ propName: 'amount', height: 20, style: { grow: 1, type: InputType.Number, precision: 0 } });\n    this.oversampleSelect = this.createSelect(this.oversampleOptions, { height: 15, propName: 'oversample', style: { grow: 1 } });\n    this.bypassToggle = this.createToggle({ propName: 'bypass', style: { grow: .15 } });\n    this.ui.append([\n      this.createHozLayout([this.createLabel('Amount'), this.amountInput], { style: { spacing: 10 } }),\n      this.createHozLayout([this.createLabel('Oversample'), this.oversampleSelect], { style: { spacing: 10 } }),\n      this.createHozLayout([this.createLabel('Bypass ?', { style: { grow: .3 } }), this.bypassToggle], { style: { spacing: 5 } })\n    ]);\n  }\n  handleAudioConnections() {\n    this.outputs[0].on('connect', (_inst, connector) => this.outputs[0].ref.connect(connector.end.ref));\n    this.outputs[0].on('disconnect', (_inst, _connector, _start, end) => this.outputs[0].ref.disconnect(end.ref));\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { clamp } from \"../../utils/utils\";\nimport { Node } from \"../../core/node\";\nimport { Toggle } from \"../../ui/index\";\n\nexport class DynamicsCompressor extends Node {\n  bypassToggle: Toggle;\n\n  inGain: GainNode;\n  outGain: GainNode;\n  compressor: DynamicsCompressorNode;\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'Dynamics Compressor', options.position || new Vector(50, 50), options.width || 230,\n      [\n        { name: 'in', dataType: 'audio' }, { name: 'threshold', dataType: 'audioparam' },\n        { name: 'ratio', dataType: 'audioparam' }, { name: 'knee', dataType: 'audioparam' },\n        { name: 'attack', dataType: 'audioparam' }, { name: 'release', dataType: 'audioparam' }\n      ],\n      [{ name: 'out', dataType: 'audio' }],\n      {\n        state: options.state ? { bypass: false, ...options.state } : { bypass: false },\n        style: options.style || { rowHeight: 10, spacing: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.inGain = flow.flowConnect.audioContext.createGain();\n    this.outGain = flow.flowConnect.audioContext.createGain();\n    this.compressor = flow.flowConnect.audioContext.createDynamicsCompressor();\n    this.compressor.threshold.value = -20;\n    this.compressor.ratio.value = 4;\n    this.compressor.knee.value = 5;\n    this.compressor.attack.value = 0.01;\n    this.compressor.release.value = 0.12;\n\n    this.inputs[0].ref = this.inGain;\n    this.inputs[1].ref = this.compressor.threshold;\n    this.inputs[2].ref = this.compressor.ratio;\n    this.inputs[3].ref = this.compressor.knee;\n    this.inputs[4].ref = this.compressor.attack;\n    this.inputs[5].ref = this.compressor.release;\n    this.outputs[0].ref = this.outGain;\n\n    this.inputs[1].on('data', (_, data) => typeof data === 'number' && (this.inputs[1].ref.value = clamp(data, -100, 0)));\n    this.inputs[2].on('data', (_, data) => typeof data === 'number' && (this.inputs[2].ref.value = clamp(data, 1, 20)));\n    this.inputs[3].on('data', (_, data) => typeof data === 'number' && (this.inputs[3].ref.value = clamp(data, 0, 40)));\n    this.inputs[4].on('data', (_, data) => typeof data === 'number' && (this.inputs[4].ref.value = clamp(data, 0, 1)));\n    this.inputs[5].on('data', (_, data) => typeof data === 'number' && (this.inputs[5].ref.value = clamp(data, 0, 1)));\n\n    this.setBypass();\n\n    this.setupUI();\n\n    this.watch('bypass', () => this.setBypass());\n\n    this.handleAudioConnections();\n  }\n\n  setBypass() {\n    if (this.state.bypass) {\n      this.compressor.disconnect();\n      this.inGain.disconnect();\n      this.inGain.connect(this.outGain);\n    } else {\n      this.inGain.disconnect();\n      this.inGain.connect(this.compressor);\n      this.compressor.connect(this.outGain);\n    }\n  }\n  setupUI() {\n    this.bypassToggle = this.createToggle({ propName: 'bypass', style: { grow: .1 } });\n    this.ui.append([\n      this.createHozLayout([this.createLabel('Bypass ?', { style: { grow: .3 } }), this.bypassToggle], { style: { spacing: 5 } })\n    ]);\n  }\n  handleAudioConnections() {\n    // Handle actual webaudio node stuff\n    this.outputs[0].on('connect', (_, connector) => this.outputs[0].ref.connect(connector.end.ref));\n    this.outputs[0].on('disconnect', (_inst, _connector, _start, end) => this.outputs[0].ref.disconnect(end.ref));\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { clamp, isInRange } from \"../../utils/utils\";\nimport { Node } from '../../core/node';\nimport { Align } from \"../../common/enums\";\nimport { Toggle, VSlider, Stack } from \"../../ui/index\";\n\nexport class Equalizer extends Node {\n  vSliders: VSlider[] = [];\n  filters: BiquadFilterNode[] = [];\n  bypassToggle: Toggle;\n  inGain: GainNode;\n  outGain: GainNode;\n\n  frequencies = [32, 64, 125, 250, 500, 1000, 2000, 4000, 8000, 16000];\n  freqDisplay = ['32', '64', '125', '250', '500', '1K', '2K', '4K', '8K', '16K']\n\n  static DefaultState = { eq1: 0, eq2: 0, eq3: 0, eq4: 0, eq5: 0, eq6: 0, eq7: 0, eq8: 0, eq9: 0, eq10: 0, bypass: false };\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(\n      flow, options.name || 'Equalizer',\n      options.position || new Vector(50, 50),\n      options.width || 300,\n      [{ name: 'in', dataType: 'audio' }], [{ name: 'out', dataType: 'audio' }],\n      {\n        style: options.style || { rowHeight: 10, spacing: 10 },\n        terminalStyle: options.terminalStyle || {},\n        state: options.state ? { ...Equalizer.DefaultState, ...options.state } : Equalizer.DefaultState\n      }\n    )\n\n    this.inGain = flow.flowConnect.audioContext.createGain();\n    this.outGain = flow.flowConnect.audioContext.createGain();\n    this.frequencies.forEach((freq, index) => {\n      let filter = flow.flowConnect.audioContext.createBiquadFilter();\n      filter.frequency.value = freq;\n      if (index === 0)\n        filter.type = 'lowshelf';\n      else if (index === 9)\n        filter.type = 'highshelf';\n      else\n        filter.type = 'peaking';\n      this.filters.push(filter);\n    });\n    for (let i = 1; i < 10; ++i) {\n      this.filters[i - 1].connect(this.filters[i]);\n    }\n\n    this.inputs[0].ref = this.inGain;\n    this.outputs[0].ref = this.outGain;\n\n    this.setBypass();\n\n    this.setupUI();\n\n    this.watch('bypass', this.setBypass.bind(this));\n    for (let i = 1; i <= 10; ++i) {\n      this.watch(`eq${i}`, (_oldVal, newVal) => {\n        if (!isInRange(newVal, -40, 40)) {\n          this.state[`eq${i}`] = clamp(newVal, -40, 40);\n        }\n        this.filters[i - 1].gain.value = this.state[`eq${i}`]\n      });\n    }\n\n    this.handleAudioConnections();\n  }\n\n  setBypass() {\n    if (!this.state.bypass) {\n      this.inGain.disconnect();\n      this.inGain.connect(this.filters[0]);\n      this.filters[9].connect(this.outGain);\n    } else {\n      this.inGain.disconnect();\n      this.filters[9].disconnect();\n      this.inGain.connect(this.outGain);\n    }\n  }\n  setupUI() {\n    let stacks: Stack[] = [];\n    this.frequencies.forEach((_freq, index) => {\n      let vSlider = this.createVSlider(-40, 40, { height: 120, propName: `eq${index + 1}` });\n      this.vSliders.push(vSlider);\n      let stack = this.createStack({\n        childs: [\n          this.createLabel(this.freqDisplay[index], { style: { align: Align.Center } }),\n          vSlider,\n          this.createLabel(this.state[`eq${index + 1}`], { propName: `eq${index + 1}`, style: { align: Align.Center, precision: 0 } }),\n        ],\n        style: { grow: .1, spacing: 5 }\n      });\n      stacks.push(stack);\n    });\n    this.bypassToggle = this.createToggle({ propName: 'bypass', height: 10, style: { grow: .1 } });\n    this.ui.append([\n      this.createHozLayout(stacks, { style: { spacing: 5 } }),\n      this.createHozLayout([this.createLabel('Bypass ?'), this.bypassToggle], { style: { spacing: 5 } })\n    ]);\n  }\n  handleAudioConnections() {\n    this.outputs[0].on('connect', (_inst, connector) => this.outputs[0].ref.connect(connector.end.ref));\n    this.outputs[0].on('disconnect', (_inst, _connector, _start, end) => this.outputs[0].ref.disconnect(end.ref));\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { clamp } from \"../../utils/utils\";\nimport { Node } from '../../core/node';\nimport { Align } from \"../../common/enums\";\nimport { Slider, Display, Label } from \"../../ui/index\";\n\nexport class FrequencyAnalyser extends Node {\n  freqLabel: Label;\n  fftSizeSlider: Slider;\n  fftSizeLabel: Label;\n  display: Display;\n\n  analyser: AnalyserNode;\n\n  static DefaultState = { fftSize: 11, currFreq: 0 };\n\n  fftSizes = [32, 64, 128, 256, 512, 1024, 2048, 4096, 8192, 16384, 32768];\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(\n      flow, options.name || 'Frequency Analyser',\n      options.position || new Vector(50, 50),\n      options.width || 350,\n      [{ name: 'in', dataType: 'audio' }], [{ name: 'out', dataType: 'audio' }],\n      {\n        style: options.style || { rowHeight: 10, spacing: 10 },\n        terminalStyle: options.terminalStyle || {},\n        state: options.state ? { ...FrequencyAnalyser.DefaultState, ...options.state } : FrequencyAnalyser.DefaultState\n      }\n    )\n\n    this.analyser = flow.flowConnect.audioContext.createAnalyser();\n    this.analyser.fftSize = this.getFFTSize();\n    this.inputs[0].ref = this.outputs[0].ref = this.analyser;\n\n    this.setupUI();\n\n    this.watch('fftSize', (_oldVal, newVal) => {\n      if (newVal < 5 || newVal > 15) this.state.fftSize = clamp(Math.round(newVal), 5, 15);\n      let actualFFTSize = this.getFFTSize();\n      this.fftSizeLabel.text = actualFFTSize;\n      this.analyser.fftSize = actualFFTSize;\n    });\n    this.display.on('over', (_inst, screenPos) => {\n      this.state.currFreq = (\n        Math.floor(\n          (\n            screenPos.subtract(this.display.position.transform(this.flow.flowConnect.transform)).x\n            / this.display.displayConfigs[0].canvas.width\n          )\n          * this.analyser.frequencyBinCount\n        ) * this.flow.flowConnect.audioContext.sampleRate\n      ) / (this.analyser.frequencyBinCount * 2);\n    });\n    this.display.on('exit', () => (this.state.currFreq = 0));\n\n    this.handleAudioConnections();\n  }\n\n  getFFTSize() {\n    return this.fftSizes[clamp(Math.round(this.state.fftSize), 5, 15) - 5];\n  }\n  setupUI() {\n    this.freqLabel = this.createLabel('Frequency:');\n    this.fftSizeSlider = this.createSlider(5, 15, { height: 10, propName: 'fftSize', style: { grow: .6, precision: 0 } });\n    this.fftSizeLabel = this.createLabel(this.getFFTSize(), { height: 20, style: { grow: .2, align: Align.Right } });\n    this.display = this.createDisplay(200, [{\n      auto: true,\n      renderer: (...args) => this.customRenderer(args[0], args[1], args[2])\n    }]);\n\n    this.ui.append([\n      this.createHozLayout([\n        this.freqLabel, this.createLabel(this.state.currFreq, { propName: 'currFreq', style: { precision: 0, grow: 1 } })\n      ], { style: { spacing: 5 } }),\n      this.display,\n      this.createHozLayout([\n        this.createLabel('FFT Size', { style: { grow: .2 } }), this.fftSizeSlider, this.fftSizeLabel\n      ], { style: { spacing: 5 } })\n    ]);\n  }\n  customRenderer(context: OffscreenCanvasRenderingContext2D | CanvasRenderingContext2D, width: number, height: number): boolean {\n    let value, percent, offset, hue,\n      i = 0,\n      frequencyBinCount = this.analyser.frequencyBinCount,\n      frequencyData = new Uint8Array(frequencyBinCount),\n      orgHeight = height,\n      barWidth = width / frequencyBinCount;\n\n    this.analyser.getByteFrequencyData(frequencyData);\n\n    for (; i < frequencyBinCount; i++) {\n      value = frequencyData[i];\n      percent = value / 256;\n      height = orgHeight * percent;\n      offset = orgHeight - height - 1;\n      hue = i / frequencyBinCount * 360;\n      context.fillStyle = 'hsl(' + hue + ', 100%, 50%)';\n      context.fillRect(i * barWidth, offset, barWidth, height);\n    }\n\n    return true;\n  }\n  handleAudioConnections() {\n    this.outputs[0].on('connect', (_inst, connector) => this.outputs[0].ref.connect(connector.end.ref));\n    this.outputs[0].on('disconnect', (_inst, _connector, _start, end) => this.outputs[0].ref.disconnect(end.ref));\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { Node } from \"../../core/node\";\n\nexport class Gain extends Node {\n  gain: GainNode;\n\n  static DefaultState = { gain: 1 };\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'Gain', options.position || new Vector(50, 50), options.width || 120,\n      [{ name: 'in', dataType: 'audio' }, { name: 'gain', dataType: 'audioparam' }],\n      [{ name: 'out', dataType: 'audio' }],\n      {\n        state: options.state ? { ...Gain.DefaultState, ...options.state } : Gain.DefaultState,\n        style: options.style || { rowHeight: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.gain = flow.flowConnect.audioContext.createGain();\n    this.inputs[0].ref = this.gain;\n    this.outputs[0].ref = this.gain;\n    this.inputs[1].ref = this.inputs[0].ref.gain;\n    this.inputs[1].on('data', (_, data) => typeof data === 'number' && (this.inputs[1].ref.value = data));\n\n    this.handleAudioConnections();\n  }\n\n  handleAudioConnections() {\n    // Handle actual webaudio node stuff\n    this.outputs[0].on('connect', (_, connector) => this.outputs[0].ref.connect(connector.end.ref));\n    this.outputs[0].on('disconnect', (_inst, _connector, _start, end) => this.outputs[0].ref.disconnect(end.ref));\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { clamp } from \"../../utils/utils\";\nimport { Node } from \"../../core/node\";\nimport { FlowConnectState } from \"../../flow-connect\";\nimport { Constant } from \"../../resource/constants\";\nimport { InputType, Input, Toggle } from \"../../ui/index\";\n\nexport class Metronome extends Node {\n  autoToggle: Toggle;\n  freqInput: Input;\n  bpmInput: Input;\n  source: AudioBufferSourceNode;\n\n  volumeGainNode: GainNode;\n  proxyParamSourceNode: AudioWorkletNode;\n\n  static DefaultState: any = { frequency: 330, buffer: null, bpm: 130, loop: true, auto: true };\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'Metronome', options.position || new Vector(50, 50), options.width || 200,\n      [\n        { name: 'trigger', dataType: 'event' }, { name: 'gain', dataType: 'audioparam' },\n        { name: 'detune', dataType: 'audioparam' }, { name: 'playback-rate', dataType: 'audioparam' }\n      ],\n      [{ name: 'out', dataType: 'audio' }],\n      {\n        state: options.state ? { ...Metronome.DefaultState, ...options.state } : Metronome.DefaultState,\n        style: options.style || { rowHeight: 10, spacing: 15 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.volumeGainNode = flow.flowConnect.audioContext.createGain();\n    this.proxyParamSourceNode = new AudioWorkletNode(\n      flow.flowConnect.audioContext,\n      'proxy-param-for-source',\n      { numberOfOutputs: 2, parameterData: { detune: 0, playbackRate: 1 } }\n    );\n    this.inputs[1].ref = this.volumeGainNode.gain;\n    this.inputs[2].ref = (this.proxyParamSourceNode.parameters as Map<string, AudioParam>).get('detune');\n    this.inputs[3].ref = (this.proxyParamSourceNode.parameters as Map<string, AudioParam>).get('playbackRate');\n    this.inputs[1].on('data', (_, data) => typeof data === 'number' && (this.inputs[1].ref.value = data));\n    this.inputs[2].on('data', (_, data) => typeof data === 'number' && (this.inputs[2].ref.value = data));\n    this.inputs[3].on('data', (_, data) => typeof data === 'number' && (this.inputs[3].ref.value = data));\n    this.outputs[0].ref = this.volumeGainNode;\n    this.fillBuffer();\n\n    this.setupUI();\n\n    this.bpmInput.on('change', () => {\n      if (this.source) {\n        this.source.loopEnd = 1 / (clamp(this.state.bpm, 30, 300) / 60);\n      }\n    });\n    this.freqInput.on('change', () => {\n      if (this.source) {\n        this.stopSource();\n        this.fillBuffer();\n        this.playSource();\n      } else this.fillBuffer();\n    });\n    this.inputs[0].on('event', () => this.playSource());\n\n    flow.flowConnect.on('start', () => this.state.auto && this.playSource());\n    flow.flowConnect.on('stop', () => this.stopSource());\n\n    this.handleAudioConnections();\n  }\n  fillBuffer() {\n    let ctx = this.flow.flowConnect.audioContext;\n\n    let buffer = ctx.createBuffer(1, ctx.sampleRate * 2, ctx.sampleRate);\n    let channel = buffer.getChannelData(0);\n\n    let phase = 0;\n    let amp = 1;\n    let durationFrames = ctx.sampleRate / 50;\n\n    const f = this.state.frequency;\n    for (let i = 0; i < durationFrames; i++) {\n      channel[i] = Math.sin(phase) * amp;\n      phase += Constant.TAU * f / ctx.sampleRate;\n      if (phase > Constant.TAU) {\n        phase -= Constant.TAU;\n      }\n      amp -= 1 / durationFrames;\n    }\n    this.state.buffer = buffer;\n  }\n  setupUI() {\n    this.autoToggle = this.createToggle({ propName: 'auto', height: 10, style: { grow: 0.2 } });\n    this.freqInput = this.createInput({ propName: 'frequency', height: 20, style: { type: InputType.Number, grow: 0.5 } });\n    this.bpmInput = this.createInput({ propName: 'bpm', height: 20, style: { type: InputType.Number, grow: 0.5 } });\n    this.ui.append([\n      this.createHozLayout([this.createLabel('Auto ?'), this.autoToggle], { style: { spacing: 5 } }),\n      this.createHozLayout([\n        this.createLabel('Frequency'), this.freqInput, this.createLabel('BPM'), this.bpmInput\n      ], { style: { spacing: 5 } })\n    ]);\n  }\n  playSource() {\n    if (this.flow.flowConnect.state === FlowConnectState.Stopped || !this.state.buffer) return;\n\n    let audioSource = new AudioBufferSourceNode(this.flow.flowConnect.audioContext);\n    audioSource.buffer = this.state.buffer;\n    audioSource.loop = true;\n    this.source = audioSource;\n\n    audioSource.loopEnd = 1 / (clamp(this.state.bpm, 30, 300) / 60);\n    this.proxyParamSourceNode.connect(audioSource.detune, 0);\n    this.proxyParamSourceNode.connect(audioSource.playbackRate, 1);\n    audioSource.connect(this.outputs[0].ref);\n    audioSource.start(0);\n  }\n  stopSource() {\n    if (this.source) {\n      this.source.stop();\n      this.source = null;\n    }\n  }\n  handleAudioConnections() {\n    // Handle actual webaudio node stuff\n    this.outputs[0].on('connect', (_, connector) => this.outputs[0].ref.connect(connector.end.ref));\n    this.outputs[0].on('disconnect', (_inst, _connector, _start, end) => this.outputs[0].ref.disconnect(end.ref));\n  }\n}\n","import { Flow, FlowState } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { Node } from '../../core/node';\nimport { Log } from \"../../utils/logger\";\n\nexport class Microphone extends Node {\n  microphone: MediaStreamAudioSourceNode;\n  stream: MediaStream;\n  outGain: GainNode;\n\n  static DefaultState = {};\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(\n      flow, options.name || 'Microphone',\n      options.position || new Vector(50, 50),\n      options.width || 120, [],\n      [{ name: 'out', dataType: 'audio' }],\n      {\n        style: options.style || { rowHeight: 10 },\n        terminalStyle: options.terminalStyle || {},\n        state: options.state ? { ...Microphone.DefaultState, ...options.state } : Microphone.DefaultState\n      }\n    )\n\n    this.outGain = flow.flowConnect.audioContext.createGain();\n    this.outputs[0].ref = this.outGain;\n\n    this.flow.flowConnect.on('start', () => {\n      if (!this.stream) {\n        this.getMicrophone().then(() => {\n          if (this.flow.state !== FlowState.Stopped) this.microphone.connect(this.outGain);\n        }, error => {\n          Log.error('Cannot access microphone: ', error);\n        }).catch(error => Log.error(error));\n      } else {\n        this.microphone.connect(this.outGain);\n      }\n    });\n    this.flow.flowConnect.on('stop', () => this.microphone && this.microphone.disconnect());\n\n    this.handleAudioConnections();\n\n    this.getMicrophone().then(() => { /**/ }, error => {\n      Log.error('Cannot access microphone: ', error);\n    }).catch(error => Log.error(error));\n  }\n\n  async getMicrophone() {\n    this.stream = await navigator.mediaDevices.getUserMedia({ audio: true, video: false });\n    this.microphone = this.flow.flowConnect.audioContext.createMediaStreamSource(this.stream);\n  }\n\n  handleAudioConnections() {\n    this.outputs[0].on('connect', (_inst, connector) => this.outputs[0].ref.connect(connector.end.ref));\n    this.outputs[0].on('disconnect', (_inst, _connector, _start, end) => this.outputs[0].ref.disconnect(end.ref));\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { clamp } from \"../../utils/utils\";\nimport { Node } from \"../../core/node\";\nimport { InputType, Slider, Toggle } from \"../../ui/index\";\n\nexport class MoogEffect extends Node {\n  cutoffSlider: Slider;\n  resonanceSlider: Slider;\n  bypassToggle: Toggle;\n\n  inGain: GainNode;\n  outGain: GainNode;\n  moog: AudioWorkletNode;\n\n  static DefaultState = { cutoff: 0.065, resonance: 3.5, bypass: false };\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'Moog Effect', options.position || new Vector(50, 50), options.width || 230,\n      [{ name: 'in', dataType: 'audio' }],\n      [{ name: 'out', dataType: 'audio' }],\n      {\n        state: options.state ? { ...MoogEffect.DefaultState, ...options.state } : MoogEffect.DefaultState,\n        style: options.style || { rowHeight: 10, spacing: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.inGain = flow.flowConnect.audioContext.createGain();\n    this.outGain = flow.flowConnect.audioContext.createGain();\n    this.inputs[0].ref = this.inGain;\n    this.outputs[0].ref = this.outGain;\n\n    this.moog = new AudioWorkletNode(flow.flowConnect.audioContext, 'moog-effect', {\n      numberOfInputs: 1, numberOfOutputs: 1, processorOptions: { bufferSize: 4096 }\n    });\n    this.setBypass();\n\n    this.setupUI();\n\n    this.watch('bypass', () => this.setBypass());\n    this.watch('cutoff', () => {\n      if (this.state.cutoff < 0.0001 || this.state.cutoff > 1.0) this.state.cutoff = clamp(this.state.cutoff, 0.0001, 1.0);\n      this.paramsChanged();\n    });\n    this.watch('resonance', () => {\n      if (this.state.resonance < 0 || this.state.resonance > 4.0) this.state.resonance = clamp(this.state.resonance, 0, 4.0);\n      this.paramsChanged();\n    });\n\n    flow.flowConnect.on('start', () => this.paramsChanged());\n\n    this.handleAudioConnections();\n  }\n\n  paramsChanged() {\n    this.moog.port.postMessage({ cutoff: this.state.cutoff, resonance: this.state.resonance });\n  }\n  setBypass() {\n    if (this.state.bypass) {\n      this.moog.disconnect();\n      this.inGain.disconnect();\n      this.inGain.connect(this.outGain);\n    } else {\n      this.inGain.disconnect();\n      this.inGain.connect(this.moog);\n      this.moog.connect(this.outGain);\n    }\n  }\n  setupUI() {\n    this.cutoffSlider = this.createSlider(0.0001, 1.0, { height: 10, propName: 'cutoff', style: { grow: .5 } });\n    this.resonanceSlider = this.createSlider(0, 4.0, { height: 10, propName: 'resonance', style: { grow: .5 } });\n    let cutoffInput = this.createInput({ propName: 'cutoff', height: 20, style: { type: InputType.Number, grow: .2, precision: 2 } });\n    let resonanceInput = this.createInput({ propName: 'resonance', height: 20, style: { type: InputType.Number, grow: .4, precision: 2 } });\n    this.bypassToggle = this.createToggle({ propName: 'bypass', style: { grow: .1 } });\n    this.ui.append([\n      this.createHozLayout([this.createLabel('Cutoff', { style: { grow: .3 } }), this.cutoffSlider, cutoffInput], { style: { spacing: 5 } }),\n      this.createHozLayout([this.createLabel('Resonance', { style: { grow: .3 } }), this.resonanceSlider, resonanceInput], { style: { spacing: 5 } }),\n      this.createHozLayout([this.createLabel('Bypass ?', { style: { grow: .3 } }), this.bypassToggle], { style: { spacing: 5 } })\n    ]);\n  }\n  handleAudioConnections() {\n    // Handle actual webaudio node stuff\n    this.outputs[0].on('connect', (_, connector) => this.outputs[0].ref.connect(connector.end.ref));\n    this.outputs[0].on('disconnect', (_inst, _connector, _start, end) => this.outputs[0].ref.disconnect(end.ref));\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { Node } from '../../core/node';\nimport { Select } from \"../../ui/index\";\n\nexport class Noise extends Node {\n  noiseSelect: Select\n  noise: AudioWorkletNode;\n  outGain: GainNode;\n\n  static DefaultState = { type: 'white' };\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(\n      flow, options.name || 'Noise',\n      options.position || new Vector(50, 50),\n      options.width || 170, [],\n      [{ name: 'out', dataType: 'audio' }],\n      {\n        style: options.style || { rowHeight: 10, spacing: 10 },\n        terminalStyle: options.terminalStyle || {},\n        state: options.state ? { ...Noise.DefaultState, ...options.state } : Noise.DefaultState\n      }\n    )\n\n    this.outGain = flow.flowConnect.audioContext.createGain();\n    this.outputs[0].ref = this.outGain;\n\n    this.noise = new AudioWorkletNode(flow.flowConnect.audioContext, 'noise', {\n      channelCount: 1, channelCountMode: 'explicit', outputChannelCount: [1], numberOfInputs: 1, numberOfOutputs: 1\n    });\n    this.noise.port.postMessage(this.state.type);\n\n    this.setupUI();\n\n    this.watch('type', (_oldVal, newVal) => {\n      if (!this.noiseSelect.values.includes(newVal)) newVal = 'white';\n      this.noise.port.postMessage(newVal);\n    });\n\n    this.handleAudioConnections();\n\n    this.flow.flowConnect.on('start', () => {\n      this.noise.connect(this.outGain);\n    });\n    this.flow.flowConnect.on('stop', () => {\n      this.noise.disconnect();\n    });\n  }\n\n  setupUI() {\n    this.noiseSelect = this.createSelect(['white', 'pink', 'brownian'], { height: 15, propName: 'type', style: { grow: .7 } });\n    this.ui.append([\n      this.createHozLayout([this.createLabel('Type', { style: { grow: .3 } }), this.noiseSelect], { style: { spacing: 5 } })\n    ]);\n  }\n  handleAudioConnections() {\n    this.outputs[0].on('connect', (_inst, connector) => this.outputs[0].ref.connect(connector.end.ref));\n    this.outputs[0].on('disconnect', (_inst, _connector, _start, end) => this.outputs[0].ref.disconnect(end.ref));\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { clamp } from \"../../utils/utils\";\nimport { Node } from '../../core/node';\nimport { InputType, Input, RadioGroup, Slider, HorizontalLayout } from \"../../ui/index\";\n\nexport class Oscillator extends Node {\n  freqSlider: Slider;\n  freqInput: Input;\n  freqHozLayout: HorizontalLayout;\n  detuneSlider: Slider;\n  detuneInput: Input;\n  detuneHozLayout: HorizontalLayout;\n  typeGroup: RadioGroup;\n\n  oscillator: OscillatorNode;\n  freqProxy: AudioWorkletNode;\n  detuneProxy: AudioWorkletNode;\n  outGain: GainNode;\n\n  types = ['sine', 'square', 'sawtooth', 'triangle'];\n\n  static DefaultState = { frequency: 440, detune: 0, type: 'sine' };\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(\n      flow, options.name || 'Oscillator',\n      options.position || new Vector(50, 50),\n      options.width || 250, [],\n      [{ name: 'out', dataType: 'audio' }],\n      {\n        style: options.style || { rowHeight: 10, spacing: 10 },\n        terminalStyle: options.terminalStyle || {},\n        state: options.state ? { ...Oscillator.DefaultState, ...options.state } : Oscillator.DefaultState\n      }\n    )\n\n    this.freqProxy = new AudioWorkletNode(flow.flowConnect.audioContext, 'proxy');\n    this.detuneProxy = new AudioWorkletNode(flow.flowConnect.audioContext, 'proxy');\n    this.outGain = flow.flowConnect.audioContext.createGain();\n\n    this.setupUI();\n\n    this.inputsUI[0].ref = this.freqProxy;\n    this.inputsUI[1].ref = this.detuneProxy;\n    this.inputsUI[0].dataType = 'audioparam';\n    this.inputsUI[1].dataType = 'audioparam';\n    this.outputs[0].ref = this.outGain;\n\n    this.inputsUI[0].on('data', (_inst, data) => typeof data === 'number' && (this.state.frequency = data));\n    this.inputsUI[1].on('data', (_inst, data) => typeof data === 'number' && (this.state.detune = data));\n\n    this.watch('frequency', (_oldVal, newVal) => {\n      if (newVal < 0 || newVal > 20000) newVal = clamp(newVal, 0, 20000);\n      if (!this.freqHozLayout.disabled) this.oscillator && (this.oscillator.frequency.value = newVal);\n    });\n    this.watch('detune', (_oldVal, newVal) => {\n      if (!this.detuneHozLayout.disabled) this.oscillator && (this.oscillator.detune.value = newVal);\n    });\n    this.watch('type', (_oldVal, newVal) => {\n      if (this.types.includes(newVal)) this.oscillator && (this.oscillator.type = newVal);\n    });\n\n    this.flow.flowConnect.on('start', () => this.startOscillator());\n    this.flow.flowConnect.on('stop', () => this.stopOscillator());\n\n    this.handleAudioConnections();\n  }\n\n  startOscillator() {\n    this.stopOscillator();\n    this.oscillator = this.flow.flowConnect.audioContext.createOscillator();\n    if (!this.inputsUI[0].isConnected()) this.oscillator.frequency.value = this.state.frequency;\n    else {\n      this.freqProxy.connect(this.oscillator.frequency);\n      this.oscillator.frequency.value = 0;\n    }\n    if (!this.inputsUI[1].isConnected()) this.oscillator.detune.value = this.state.detune;\n    else {\n      this.detuneProxy.connect(this.oscillator.detune);\n      this.oscillator.detune.value = 0;\n    }\n\n    this.oscillator.type = this.state.type;\n    this.oscillator.connect(this.outGain);\n    this.oscillator.start();\n  }\n  stopOscillator() {\n    if (this.oscillator) {\n      this.freqProxy.disconnect();\n      this.detuneProxy.disconnect();\n      this.oscillator.disconnect();\n      this.oscillator.stop();\n      this.oscillator = null;\n    }\n  }\n  setupUI() {\n    this.freqSlider = this.createSlider(0, 20000, { height: 10, propName: 'frequency', style: { grow: .5 } });\n    this.freqInput = this.createInput({ propName: 'frequency', height: 20, style: { type: InputType.Number, grow: .3, precision: 0 } });\n    this.freqHozLayout = this.createHozLayout([\n      this.createLabel('Freq.', { style: { grow: .2 } }), this.freqSlider, this.freqInput\n    ], { input: true, style: { spacing: 5 } });\n    this.detuneSlider = this.createSlider(-2400, 2400, { height: 10, propName: 'detune', style: { grow: .5 } });\n    this.detuneInput = this.createInput({ propName: 'detune', height: 20, style: { type: InputType.Number, grow: .3, precision: 0 } });\n    this.detuneHozLayout = this.createHozLayout([\n      this.createLabel('Detune', { style: { grow: .2 } }), this.detuneSlider, this.detuneInput\n    ], { input: true, style: { spacing: 5 } });\n    this.typeGroup = this.createRadioGroup(this.types, this.state.type, { propName: 'type', height: 20 });\n\n    this.ui.append([this.freqHozLayout, this.detuneHozLayout, this.typeGroup]);\n  }\n  handleAudioConnections() {\n    this.inputsUI[0].on('connect', () => {\n      if (this.oscillator) {\n        this.freqProxy.connect(this.oscillator.frequency);\n        this.oscillator.frequency.value = 0;\n      }\n    });\n    this.inputsUI[0].on('disconnect', () => {\n      if (this.oscillator) {\n        this.freqProxy.disconnect();\n        this.oscillator.frequency.value = this.state.frequency;\n      }\n    });\n    this.inputsUI[1].on('connect', () => {\n      if (this.oscillator) {\n        this.detuneProxy.connect(this.oscillator.detune);\n        this.oscillator.detune.value = 0;\n      }\n    });\n    this.inputsUI[1].on('disconnect', () => {\n      if (this.oscillator) {\n        this.detuneProxy.disconnect();\n        this.oscillator.detune.value = this.state.detune;\n      }\n    });\n    this.outputs[0].on('connect', (_inst, connector) => this.outputs[0].ref.connect(connector.end.ref));\n    this.outputs[0].on('disconnect', (_inst, _connector, _start, end) => this.outputs[0].ref.disconnect(end.ref));\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { clamp } from \"../../utils/utils\";\nimport { Node } from '../../core/node';\nimport { InputType, Input, Slider, Toggle, Select } from \"../../ui/index\";\nlet Tuna = require('../../lib/tuna.js');\n\nexport class OverdriveEffect extends Node {\n  driveSlider: Slider;\n  driveInput: Input;\n  outGainSlider: Slider;\n  outGainInput: Input;\n  curveAmountSlider: Slider;\n  curveAmountInput: Input;\n  algorithmSelect: Select;\n  bypassToggle: Toggle;\n  overdrive: any;\n\n  static DefaultState = { drive: 0.197, outGain: -9.154, curveAmount: 0.979, algorithm: 1, bypass: false };\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(\n      flow, options.name || 'Overdrive Effect',\n      options.position || new Vector(50, 50),\n      options.width || 230,\n      [{ name: 'in', dataType: 'audio' }],\n      [{ name: 'out', dataType: 'audio' }],\n      {\n        style: options.style || { rowHeight: 10, spacing: 10 },\n        terminalStyle: options.terminalStyle || {},\n        state: options.state ? { ...OverdriveEffect.DefaultState, ...options.state } : OverdriveEffect.DefaultState\n      }\n    )\n\n    if (!(window as any).__tuna__) (window as any).__tuna__ = new Tuna(flow.flowConnect.audioContext);\n\n    this.overdrive = new (window as any).__tuna__.Overdrive();\n    this.inputs[0].ref = this.outputs[0].ref = this.overdrive;\n    this.setupUI();\n    Object.assign(this.overdrive, {\n      drive: this.state.drive,\n      outputGain: this.state.outGain,\n      curveAmount: this.state.curveAmount,\n      algorithmIndex: parseInt(this.state.algorithm) - 1\n    });\n\n    this.watch('drive', (_oldVal, newVal) => {\n      if (newVal < 0 || newVal > 1) this.state.drive = clamp(newVal, 0, 1);\n      this.overdrive.drive = this.state.drive;\n    });\n    this.watch('outGain', (_oldVal, newVal) => {\n      if (newVal < -46 || newVal > 0) this.state.outGain = clamp(newVal, -46, 0);\n      this.overdrive.outputGain = this.state.outGain;\n    });\n    this.watch('curveAmount', (_oldVal, newVal) => {\n      if (newVal < 0 || newVal > 1) this.state.curveAmount = clamp(newVal, 0, 1);\n      this.overdrive.curveAmount = this.state.curveAmount;\n    });\n    this.watch('algorithm', (_oldVal, newVal) => {\n      newVal = parseInt(newVal);\n      if (!newVal) newVal = 1;\n      if (newVal < 1 || newVal > 6) newVal = clamp(newVal, 1, 6);\n      this.overdrive.algorithmIndex = newVal - 1;\n    });\n    this.watch('bypass', (_oldVal, newVal) => this.overdrive.bypass = newVal);\n\n    this.handleAudioConnections();\n  }\n\n  setupUI() {\n    this.driveSlider = this.createSlider(0, 1, { height: 10, propName: 'drive', style: { grow: .5 } });\n    this.driveInput = this.createInput({ propName: 'drive', height: 20, style: { type: InputType.Number, grow: .2, precision: 4 } });\n    this.outGainSlider = this.createSlider(-46, 0, { height: 10, propName: 'outGain', style: { grow: .5 } });\n    this.outGainInput = this.createInput({ propName: 'outGain', height: 20, style: { type: InputType.Number, grow: .2, precision: 2 } });\n    this.curveAmountSlider = this.createSlider(0, 0.95, { height: 10, propName: 'curveAmount', style: { grow: .5 } });\n    this.curveAmountInput = this.createInput({ propName: 'curveAmount', height: 20, style: { type: InputType.Number, grow: .2, precision: 2 } });\n    this.algorithmSelect = this.createSelect(['1', '2', '3', '4', '5', '6'], { propName: 'algorithm', height: 20, style: { grow: .7 } })\n    this.bypassToggle = this.createToggle({ propName: 'bypass', style: { grow: .1 } });\n    this.ui.append([\n      this.createHozLayout([this.createLabel('Drive', { style: { grow: .3 } }), this.driveSlider, this.driveInput], { style: { spacing: 5 } }),\n      this.createHozLayout([this.createLabel('Output Gain', { style: { grow: .3 } }), this.outGainSlider, this.outGainInput], { style: { spacing: 5 } }),\n      this.createHozLayout([this.createLabel('Curve Amount', { style: { grow: .3 } }), this.curveAmountSlider, this.curveAmountInput], { style: { spacing: 5 } }),\n      this.createHozLayout([this.createLabel('Algorithm', { style: { grow: .3 } }), this.algorithmSelect], { style: { spacing: 5 } }),\n      this.createHozLayout([this.createLabel('Bypass ?', { style: { grow: .3 } }), this.bypassToggle], { style: { spacing: 5 } })\n    ]);\n  }\n  handleAudioConnections() {\n    this.outputs[0].on('connect', (_inst, connector) => this.outputs[0].ref.connect(connector.end.ref));\n    this.outputs[0].on('disconnect', (_inst, _connector, _start, end) => this.outputs[0].ref.disconnect(end.ref));\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { clamp } from \"../../utils/utils\";\nimport { Node } from '../../core/node';\nimport { InputType, Input, Slider, Toggle } from \"../../ui/index\";\nlet Tuna = require('../../lib/tuna.js');\n\nexport class PingPongEffect extends Node {\n  delayLeftSlider: Slider;\n  delayLeftInput: Input;\n  delayRightSlider: Slider;\n  delayRightInput: Input;\n  feedbackSlider: Slider;\n  feedbackInput: Input;\n  wetSlider: Slider;\n  wetInput: Input;\n  bypassToggle: Toggle;\n  pingPong: any;\n\n  static DefaultState = { delayLeft: 200, delayRight: 400, feedback: 0.3, wet: 0.5, bypass: false };\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(\n      flow, options.name || 'PingPong Effect',\n      options.position || new Vector(50, 50),\n      options.width || 230,\n      [{ name: 'in', dataType: 'audio' }], [{ name: 'out', dataType: 'audio' }],\n      {\n        style: options.style || { rowHeight: 10, spacing: 10 },\n        terminalStyle: options.terminalStyle || {},\n        state: options.state ? { ...PingPongEffect.DefaultState, ...options.state } : PingPongEffect.DefaultState\n      }\n    )\n\n    if (!(window as any).__tuna__) (window as any).__tuna__ = new Tuna(flow.flowConnect.audioContext);\n\n    this.pingPong = new (window as any).__tuna__.PingPongDelay();\n    this.inputs[0].ref = this.outputs[0].ref = this.pingPong;\n\n    Object.assign(this.pingPong, {\n      delayTimeLeft: this.state.delayLeft,\n      delayTimeRight: this.state.delayRight,\n      feedback: this.state.feedback,\n      wetLevel: this.state.wet\n    });\n\n    this.setupUI();\n\n    this.watch('delayLeft', (_oldVal, newVal) => {\n      if (newVal < 1 || newVal > 10000) this.state.delayLeft = clamp(newVal, 1, 10000);\n      this.pingPong.delayTimeLeft = this.state.delayLeft;\n    });\n    this.watch('delayRight', (_oldVal, newVal) => {\n      if (newVal < 1 || newVal > 10000) this.state.delayRight = clamp(newVal, 1, 10000);\n      this.pingPong.delayTimeRight = this.state.delayRight;\n    });\n    this.watch('feedback', (_oldVal, newVal) => {\n      if (newVal < 0 || newVal > 1) this.state.feedback = clamp(newVal, 0, 1);\n      this.pingPong.feedback = this.state.feedback;\n    });\n    this.watch('wet', (_oldVal, newVal) => {\n      if (newVal < 0 || newVal > 1) this.state.wet = clamp(newVal, 0, 1);\n      this.pingPong.wetLevel = this.state.wet;\n    });\n    this.watch('bypass', (_oldVal, newVal) => this.pingPong.bypass = newVal);\n\n    this.handleAudioConnections();\n  }\n\n  setupUI() {\n    this.delayLeftSlider = this.createSlider(1, 10000, { height: 10, propName: 'delayLeft', style: { grow: .5 } });\n    this.delayLeftInput = this.createInput({ propName: 'delayLeft', height: 20, style: { type: InputType.Number, grow: .2, precision: 4 } });\n    this.delayRightSlider = this.createSlider(1, 10000, { height: 10, propName: 'delayRight', style: { grow: .5 } });\n    this.delayRightInput = this.createInput({ propName: 'delayRight', height: 20, style: { type: InputType.Number, grow: .2, precision: 2 } });\n    this.feedbackSlider = this.createSlider(0, 1, { height: 10, propName: 'feedback', style: { grow: .5 } });\n    this.feedbackInput = this.createInput({ propName: 'feedback', height: 20, style: { type: InputType.Number, grow: .2, precision: 2 } });\n    this.wetSlider = this.createSlider(0, 1, { height: 10, propName: 'wet', style: { grow: .5 } });\n    this.wetInput = this.createInput({ propName: 'wet', height: 20, style: { type: InputType.Number, grow: .2, precision: 2 } });\n    this.bypassToggle = this.createToggle({ propName: 'bypass', style: { grow: .1 } });\n    this.ui.append([\n      this.createHozLayout([this.createLabel('Delay L', { style: { grow: .3 } }), this.delayLeftSlider, this.delayLeftInput], { style: { spacing: 5 } }),\n      this.createHozLayout([this.createLabel('Delay R', { style: { grow: .3 } }), this.delayRightSlider, this.delayRightInput], { style: { spacing: 5 } }),\n      this.createHozLayout([this.createLabel('Feedback', { style: { grow: .3 } }), this.feedbackSlider, this.feedbackInput], { style: { spacing: 5 } }),\n      this.createHozLayout([this.createLabel('Wet', { style: { grow: .3 } }), this.wetSlider, this.wetInput], { style: { spacing: 5 } }),\n      this.createHozLayout([this.createLabel('Bypass ?', { style: { grow: .3 } }), this.bypassToggle], { style: { spacing: 5 } })\n    ]);\n  }\n  handleAudioConnections() {\n    this.outputs[0].on('connect', (_inst, connector) => this.outputs[0].ref.connect(connector.end.ref));\n    this.outputs[0].on('disconnect', (_inst, _connector, _start, end) => this.outputs[0].ref.disconnect(end.ref));\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { FlowConnectState } from \"../../flow-connect\";\nimport { Log } from \"../../utils/logger\";\nimport { Node } from '../../core/node';\nimport * as sourceui from '../../ui/source';\nimport { Toggle } from \"../../ui/index\";\n\nexport class Source extends Node {\n  fileInput: sourceui.Source;\n  loopToggle: Toggle;\n  source: AudioBufferSourceNode;\n\n  volumeGainNode: GainNode;\n  proxyParamSourceNode: AudioWorkletNode;\n\n  static DefaultState: any = { buffer: null, loop: true, prevChannelCount: -1 };\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'Audio Source', options.position || new Vector(50, 50), options.width || 200,\n      [\n        { name: 'array-buffer', dataType: 'event' }, { name: 'gain', dataType: 'audioparam' },\n        { name: 'detune', dataType: 'audioparam' }, { name: 'playback-rate', dataType: 'audioparam' }\n      ],\n      [{ name: 'out', dataType: 'audio' }, { name: 'ended', dataType: 'event' }],\n      {\n        state: options.state ? { ...Source.DefaultState, ...options.state } : Source.DefaultState,\n        style: options.style || { rowHeight: 10, spacing: 15 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.volumeGainNode = flow.flowConnect.audioContext.createGain();\n    this.proxyParamSourceNode = new AudioWorkletNode(\n      flow.flowConnect.audioContext,\n      'proxy-param-for-source',\n      { numberOfOutputs: 2, parameterData: { detune: 0, playbackRate: 1 } }\n    );\n\n    this.inputs[1].ref = this.volumeGainNode.gain;\n    this.inputs[2].ref = (this.proxyParamSourceNode.parameters as Map<string, AudioParam>).get('detune');\n    this.inputs[3].ref = (this.proxyParamSourceNode.parameters as Map<string, AudioParam>).get('playbackRate');\n    this.inputs[1].on('data', (_, data) => typeof data === 'number' && (this.inputs[1].ref.value = data));\n    this.inputs[2].on('data', (_, data) => typeof data === 'number' && (this.inputs[2].ref.value = data));\n    this.inputs[3].on('data', (_, data) => typeof data === 'number' && (this.inputs[3].ref.value = data));\n    this.outputs[0].ref = this.volumeGainNode;\n\n    this.setupUI();\n\n    this.loopToggle.on('change', () => {\n      if (this.state.loop) {\n        this.stopSource();\n        this.playSource();\n      } else this.source && (this.source.loop = this.state.loop);\n    });\n    this.inputs[0].on('event', (_, data) => {\n      if (!(data instanceof ArrayBuffer)) {\n        Log.error('Data received on Audio Source Node is not of type ArrayBuffer');\n        return;\n      }\n      this.processArrayBuffer(data);\n    });\n    this.fileInput.on('change', (_inst, _oldVal: File, newVal: File) => this.processFile(newVal));\n    this.fileInput.on('upload', (_inst, _oldVal: File, newVal: File) => this.processFile(newVal));\n\n    flow.flowConnect.on('start', () => this.playSource());\n    flow.flowConnect.on('stop', () => this.stopSource());\n\n    this.handleAudioConnections();\n  }\n\n  propagateChannelChange(newNoOfChannels: number) {\n    this.flow.executionGraph.propagate(this, (currNode: Node) => {\n      currNode.call('channel-count-change', newNoOfChannels);\n    });\n  }\n  async processFile(file: File) {\n    let cached = this.flow.flowConnect.arrayBufferCache.get(file.name + file.type);\n    if (!cached) {\n      cached = await file.arrayBuffer();\n      this.flow.flowConnect.arrayBufferCache.set(file.name + file.type, cached);\n    }\n    this.processArrayBuffer(cached);\n  }\n  async processArrayBuffer(arrayBuffer: ArrayBuffer) {\n    let cached = this.flow.flowConnect.audioBufferCache.get(arrayBuffer);\n    if (!cached) {\n      cached = await this.flow.flowConnect.audioContext.decodeAudioData(arrayBuffer);\n      this.flow.flowConnect.audioBufferCache.set(arrayBuffer, cached);\n\n      // If no. of channels has been changed, start an event propagation that will notify\n      // every node that has a direct/indirect connection in the graph from this node\n      if (this.state.prevChannelCount < 0 || this.state.prevChannelCount !== cached.numberOfChannels) {\n        this.propagateChannelChange(cached.numberOfChannels);\n      }\n      this.state.prevChannelCount = cached.numberOfChannels;\n    }\n    this.state.buffer = cached;\n\n    this.stopSource();\n    this.playSource();\n  }\n  playSource() {\n    if (this.flow.flowConnect.state === FlowConnectState.Stopped || !this.state.buffer) return;\n\n    let audioSource = new AudioBufferSourceNode(this.flow.flowConnect.audioContext);\n    audioSource.buffer = this.state.buffer;\n    audioSource.loop = this.state.loop;\n    this.source = audioSource;\n\n    this.proxyParamSourceNode.connect(audioSource.detune, 0);\n    this.proxyParamSourceNode.connect(audioSource.playbackRate, 1);\n    audioSource.connect(this.outputs[0].ref);\n    audioSource.start();\n  }\n  stopSource() {\n    if (this.source) {\n      this.source.stop();\n      this.source = null;\n    }\n  }\n  setupUI() {\n    this.fileInput = this.createSource({ input: true, output: true, height: 25, style: { grow: .7 } });\n    this.loopToggle = this.createToggle({ propName: 'loop', input: true, output: true, height: 10, style: { grow: .2 } });\n\n    this.ui.append([\n      this.createHozLayout([this.createLabel('File', { style: { grow: .3 } }), this.fileInput], { style: { spacing: 5 } }),\n      this.createHozLayout([this.createLabel('Loop ?'), this.loopToggle], { style: { spacing: 5 } })\n    ]);\n  }\n  handleAudioConnections() {\n    // Handle actual webaudio node stuff\n    this.outputs[0].on('connect', (_, connector) => {\n      this.state.buffer && this.propagateChannelChange(this.state.buffer.numberOfChannels);\n      this.outputs[0].ref.connect(connector.end.ref);\n    });\n    this.outputs[0].on('disconnect', (_inst, _connector, _start, end) => {\n      this.outputs[0].ref.disconnect(end.ref);\n    });\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { clamp, denormalize, normalize } from \"../../utils/utils\";\nimport { Node } from '../../core/node';\nimport { Align } from \"../../common/enums\";\nimport { Color } from \"../../core/color\";\nimport { Slider, CanvasType, Display, Label, Select } from \"../../ui/index\";\n\nexport class SpectrogramAnalyser extends Node {\n  colorScaleSelect: Select;\n  fftSizeSlider: Slider;\n  fftSizeLabel: Label;\n  display: Display;\n\n  analyser: AnalyserNode;\n\n  static DefaultState = { fftSize: 11, colorScale: 'Heated Metal' };\n\n  colorScales = ['Heated Metal', 'Monochrome', 'Inverted Monochrome', 'Spectrum'];\n  fftSizes = [32, 64, 128, 256, 512, 1024, 2048, 4096, 8192, 16384, 32768];\n  timerId: number;\n\n  colorScaleToInterp: Record<string, Function> = {}\n  currInterpolator: Function;\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(\n      flow, options.name || 'Spectrogram Analyser',\n      options.position || new Vector(50, 50),\n      options.width || 350,\n      [{ name: 'in', dataType: 'audio' }], [{ name: 'out', dataType: 'audio' }],\n      {\n        style: options.style || { rowHeight: 10, spacing: 10 },\n        terminalStyle: options.terminalStyle || {},\n        state: options.state ? { ...SpectrogramAnalyser.DefaultState, ...options.state } : SpectrogramAnalyser.DefaultState\n      }\n    )\n\n    this.analyser = flow.flowConnect.audioContext.createAnalyser();\n    this.analyser.fftSize = this.getFFTSize();\n    this.inputs[0].ref = this.outputs[0].ref = this.analyser;\n\n    this.setupUI();\n\n    this.watch('fftSize', (_oldVal, newVal) => {\n      if (newVal < 5 || newVal > 15) this.state.fftSize = clamp(Math.round(newVal), 5, 15);\n      let actualFFTSize = this.getFFTSize();\n      this.fftSizeLabel.text = actualFFTSize;\n      this.analyser.fftSize = actualFFTSize;\n    });\n    this.watch('colorScale', (_oldVal, newVal) => {\n      if (!this.colorScales.includes(newVal)) this.state.colorScale = this.colorScales[0];\n      this.currInterpolator = this.colorScaleToInterp[this.state.colorScale];\n    });\n\n    this.handleAudioConnections();\n\n    this.colorScaleToInterp['Heated Metal'] = Color.scale([\n      [0, 0, 0, 1], [160, 32, 240, 1], [255, 0, 0, 1], [255, 165, 0, 1], [255, 255, 0, 1], [255, 255, 255, 1]\n    ]);\n    this.colorScaleToInterp['Monochrome'] = Color.scale([\n      [0, 0, 0, 1], [255, 255, 255, 1]\n    ]);\n    this.colorScaleToInterp['Inverted Monochrome'] = Color.scale([\n      [255, 255, 255, 1], [0, 0, 0, 1]\n    ]);\n    this.colorScaleToInterp['Spectrum'] = Color.scale([\n      [135, 206, 235, 1], [0, 255, 0, 1], [255, 255, 0, 1], [255, 165, 0, 1], [255, 0, 0, 1]\n    ]);\n\n    this.currInterpolator = this.colorScaleToInterp['Heated Metal'];\n\n    this.display.displayConfigs[0].shouldRender = false;\n    this.flow.flowConnect.on('start', () => {\n      this.display.displayConfigs[0].shouldRender = true;\n    });\n    this.flow.flowConnect.on('stop', () => {\n      this.display.displayConfigs[0].shouldRender = false;\n    });\n  }\n\n  getFFTSize() {\n    return this.fftSizes[clamp(Math.round(this.state.fftSize), 5, 15) - 5];\n  }\n\n  setupUI() {\n    this.fftSizeSlider = this.createSlider(5, 15, { height: 10, propName: 'fftSize', style: { grow: .6, precision: 0 } });\n    this.fftSizeLabel = this.createLabel(this.getFFTSize(), { height: 20, style: { grow: .2, align: Align.Right } });\n    this.display = this.createDisplay(200, [{\n      auto: true,\n      canvasType: CanvasType.HTMLCanvasElement,\n      renderer: (context, width, height) => this.customRenderer(context, width, height)\n    }]);\n    this.colorScaleSelect = this.createSelect(this.colorScales, { propName: 'colorScale', height: 15, style: { grow: .6 } });\n\n    this.ui.append([\n      this.display,\n      this.createHozLayout([\n        this.createLabel('FFT Size', { style: { grow: .2 } }), this.fftSizeSlider, this.fftSizeLabel\n      ], { style: { spacing: 5 } }),\n      this.createHozLayout([this.createLabel('Color Scale', { style: { grow: .2 } }), this.colorScaleSelect], { style: { spacing: 5 } })\n    ]);\n  }\n\n  customRenderer(context: OffscreenCanvasRenderingContext2D | CanvasRenderingContext2D, width: number, height: number): boolean {\n    let value,\n      i = 0,\n      frequencyBinCount = this.analyser.frequencyBinCount,\n      frequencyData = new Uint8Array(frequencyBinCount),\n      barHeight = height / frequencyBinCount;\n\n    this.analyser.getByteFrequencyData(frequencyData);\n\n    for (; i < frequencyBinCount; i++) {\n      value = frequencyData[i];\n      context.fillStyle = this.currInterpolator(value / 256);\n      context.fillRect(width - 1, denormalize(1 - normalize(i, 0, frequencyBinCount), 0, height), 1, barHeight);\n    }\n\n    context.globalCompositeOperation = \"copy\";\n    context.drawImage(context.canvas, -1, 0);\n    context.globalCompositeOperation = \"source-over\";\n\n    return true;\n  }\n\n  handleAudioConnections() {\n    this.outputs[0].on('connect', (_inst, connector) => this.outputs[0].ref.connect(connector.end.ref));\n    this.outputs[0].on('disconnect', (_inst, _connector, _start, end) => this.outputs[0].ref.disconnect(end.ref));\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { clamp } from \"../../utils/utils\";\nimport { Node } from '../../core/node';\nimport { InputType, Input, Slider, Toggle } from \"../../ui/index\";\n\nexport class StereoPanner extends Node {\n  panSlider: Slider;\n  panInput: Input;\n  bypassToggle: Toggle;\n  panner: StereoPannerNode;\n  inGain: GainNode;\n  outGain: GainNode;\n\n  static DefaultState = { pan: 0, bypass: false };\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(\n      flow, options.name || 'Stereo Panner',\n      options.position || new Vector(50, 50),\n      options.width || 200,\n      [{ name: 'in', dataType: 'audio' }],\n      [{ name: 'out', dataType: 'audio' }],\n      {\n        style: options.style || { rowHeight: 10, spacing: 10 },\n        terminalStyle: options.terminalStyle || {},\n        state: options.state ? { ...StereoPanner.DefaultState, ...options.state } : StereoPanner.DefaultState\n      }\n    )\n\n    this.inGain = flow.flowConnect.audioContext.createGain();\n    this.outGain = flow.flowConnect.audioContext.createGain();\n    this.panner = new StereoPannerNode(flow.flowConnect.audioContext);\n    this.panner.pan.value = this.state.pan;\n    this.inputs[0].ref = this.inGain;\n    this.outputs[0].ref = this.outGain;\n\n    this.setBypass();\n\n    this.setupUI();\n\n    this.watch('pan', (_oldVal, newVal) => {\n      if (newVal < -1 || newVal > 1) this.state.pan = clamp(newVal, -1, 1);\n      this.panner.pan.value = this.state.pan;\n    });\n    this.watch('bypass', this.setBypass.bind(this));\n\n    this.handleAudioConnections();\n  }\n\n  setBypass() {\n    if (!this.state.bypass) {\n      this.inGain.disconnect();\n      this.inGain.connect(this.panner);\n      this.panner.connect(this.outGain);\n    } else {\n      this.panner.disconnect();\n      this.inGain.disconnect();\n      this.inGain.connect(this.outGain);\n    }\n  }\n\n  setupUI() {\n    this.panSlider = this.createSlider(-1, 1, { height: 10, propName: 'pan', style: { grow: .5 } });\n    this.panInput = this.createInput({ propName: 'pan', height: 20, style: { type: InputType.Number, grow: .2, precision: 2 } });\n    this.bypassToggle = this.createToggle({ propName: 'bypass', style: { grow: .15 } });\n    this.ui.append([\n      this.createHozLayout([this.createLabel('Pan', { style: { grow: .3 } }), this.panSlider, this.panInput], { style: { spacing: 5 } }),\n      this.createHozLayout([this.createLabel('Bypass ?', { style: { grow: .3 } }), this.bypassToggle], { style: { spacing: 5 } })\n    ]);\n  }\n  handleAudioConnections() {\n    this.outputs[0].on('connect', (_inst, connector) => this.outputs[0].ref.connect(connector.end.ref));\n    this.outputs[0].on('disconnect', (_inst, _connector, _start, end) => this.outputs[0].ref.disconnect(end.ref));\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { clamp } from \"../../utils/utils\";\nimport { Node } from '../../core/node';\nimport { InputType, Input, Slider, Toggle } from \"../../ui/index\";\nlet Tuna = require('../../lib/tuna.js');\n\nexport class TremoloEffect extends Node {\n  intensitySlider: Slider;\n  intensityInput: Input;\n  stereoPhaseSlider: Slider;\n  stereoPhaseInput: Input;\n  rateSlider: Slider;\n  rateInput: Input;\n  bypassToggle: Toggle;\n  tremolo: any;\n\n  static DefaultState = { intensity: 0.3, stereoPhase: 0, rate: 5, bypass: false };\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(\n      flow, options.name || 'Tremolo Effect',\n      options.position || new Vector(50, 50),\n      options.width || 230,\n      [{ name: 'in', dataType: 'audio' }],\n      [{ name: 'out', dataType: 'audio' }],\n      {\n        style: options.style || { rowHeight: 10, spacing: 10 },\n        terminalStyle: options.terminalStyle || {},\n        state: options.state ? { ...TremoloEffect.DefaultState, ...options.state } : TremoloEffect.DefaultState\n      }\n    )\n\n    if (!(window as any).__tuna__) (window as any).__tuna__ = new Tuna(flow.flowConnect.audioContext);\n\n    this.tremolo = new (window as any).__tuna__.Tremolo();\n    this.inputs[0].ref = this.outputs[0].ref = this.tremolo;\n\n    Object.assign(this.tremolo, {\n      intensity: this.state.intensity,\n      stereoPhase: this.state.stereoPhase,\n      rate: this.state.rate,\n    });\n\n    this.setupUI();\n\n    this.watch('intensity', (_oldVal, newVal) => {\n      if (newVal < 0 || newVal > 1) this.state.intensity = clamp(newVal, 0, 1);\n      this.tremolo.intensity = this.state.intensity;\n    });\n    this.watch('stereoPhase', (_oldVal, newVal) => {\n      if (newVal < 0 || newVal > 180) this.state.stereoPhase = clamp(newVal, 0, 180);\n      this.tremolo.stereoPhase = this.state.stereoPhase;\n    });\n    this.watch('rate', (_oldVal, newVal) => {\n      if (newVal < 0.1 || newVal > 11) this.state.rate = clamp(newVal, 0.1, 11);\n      this.tremolo.rate = this.state.rate;\n    });\n    this.watch('bypass', (_oldVal, newVal) => this.tremolo.bypass = newVal);\n\n    this.handleAudioConnections();\n  }\n\n  setupUI() {\n    this.intensitySlider = this.createSlider(0, 1, { height: 10, propName: 'intensity', style: { grow: .5 } });\n    this.intensityInput = this.createInput({ propName: 'intensity', height: 20, style: { type: InputType.Number, grow: .2, precision: 4 } });\n    this.stereoPhaseSlider = this.createSlider(0, 180, { height: 10, propName: 'stereoPhase', style: { grow: .5 } });\n    this.stereoPhaseInput = this.createInput({ propName: 'stereoPhase', height: 20, style: { type: InputType.Number, grow: .2, precision: 2 } });\n    this.rateSlider = this.createSlider(0.1, 11, { height: 10, propName: 'rate', style: { grow: .5 } });\n    this.rateInput = this.createInput({ propName: 'rate', height: 20, style: { type: InputType.Number, grow: .2, precision: 2 } });\n    this.bypassToggle = this.createToggle({ propName: 'bypass', style: { grow: .1 } });\n    this.ui.append([\n      this.createHozLayout([this.createLabel('Intensity', { style: { grow: .3 } }), this.intensitySlider, this.intensityInput], { style: { spacing: 5 } }),\n      this.createHozLayout([this.createLabel('Stereo Phase', { style: { grow: .3 } }), this.stereoPhaseSlider, this.stereoPhaseInput], { style: { spacing: 5 } }),\n      this.createHozLayout([this.createLabel('Rate', { style: { grow: .3 } }), this.rateSlider, this.rateInput], { style: { spacing: 5 } }),\n      this.createHozLayout([this.createLabel('Bypass ?', { style: { grow: .3 } }), this.bypassToggle], { style: { spacing: 5 } })\n    ]);\n  }\n  handleAudioConnections() {\n    this.outputs[0].on('connect', (_inst, connector) => this.outputs[0].ref.connect(connector.end.ref));\n    this.outputs[0].on('disconnect', (_inst, _connector, _start, end) => this.outputs[0].ref.disconnect(end.ref));\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { clamp } from \"../../utils/utils\";\nimport { Node } from '../../core/node';\nimport { Align } from \"../../common/enums\";\nimport { Slider, Display, Label } from \"../../ui/index\";\n\nexport class WaveformAnalyser extends Node {\n  fftSizeSlider: Slider;\n  fftSizeLabel: Label;\n  display: Display;\n\n  analyser: AnalyserNode;\n\n  static DefaultState = { fftSize: 11 };\n\n  fftSizes = [32, 64, 128, 256, 512, 1024, 2048, 4096, 8192, 16384, 32768];\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(\n      flow, options.name || 'Waveform Analyser',\n      options.position || new Vector(50, 50),\n      options.width || 350,\n      [{ name: 'in', dataType: 'audio' }], [{ name: 'out', dataType: 'audio' }],\n      {\n        style: options.style || { rowHeight: 10, spacing: 10 },\n        terminalStyle: options.terminalStyle || {},\n        state: options.state ? { ...WaveformAnalyser.DefaultState, ...options.state } : WaveformAnalyser.DefaultState\n      }\n    )\n\n    this.analyser = flow.flowConnect.audioContext.createAnalyser();\n    this.analyser.fftSize = this.getFFTSize();\n    this.inputs[0].ref = this.outputs[0].ref = this.analyser;\n\n    this.setupUI();\n\n    this.watch('fftSize', (_oldVal, newVal) => {\n      if (newVal < 5 || newVal > 15) this.state.fftSize = clamp(Math.round(newVal), 5, 15);\n      let actualFFTSize = this.getFFTSize();\n      this.fftSizeLabel.text = actualFFTSize;\n      this.analyser.fftSize = actualFFTSize;\n    });\n\n    this.handleAudioConnections();\n  }\n\n  getFFTSize() {\n    return this.fftSizes[clamp(Math.round(this.state.fftSize), 5, 15) - 5];\n  }\n\n  setupUI() {\n    this.fftSizeSlider = this.createSlider(5, 15, { height: 10, propName: 'fftSize', style: { grow: .6, precision: 0 } });\n    this.fftSizeLabel = this.createLabel(this.getFFTSize(), { height: 20, style: { grow: .2, align: Align.Right } });\n    this.display = this.createDisplay(200, [{\n      auto: true,\n      renderer: (...args) => this.customRenderer(args[0], args[1], args[2])\n    }]);\n\n    this.ui.append([\n      this.display,\n      this.createHozLayout([\n        this.createLabel('FFT Size', { style: { grow: .2 } }), this.fftSizeSlider, this.fftSizeLabel\n      ], { style: { spacing: 5 } })\n    ]);\n  }\n\n  customRenderer(context: OffscreenCanvasRenderingContext2D | CanvasRenderingContext2D, width: number, height: number): boolean {\n    let value, percent, offset, barWidth,\n      frequencyBinCount = this.analyser.frequencyBinCount,\n      waveformData = new Uint8Array(frequencyBinCount),\n      orgHeight = height,\n      i = 1;\n\n    this.analyser.getByteTimeDomainData(waveformData);\n\n    value = waveformData[0];\n    percent = value / 256;\n    height = orgHeight * percent;\n    offset = orgHeight - height - 1;\n    barWidth = width / frequencyBinCount;\n\n    context.strokeStyle = \"#000\";\n    context.beginPath();\n    context.moveTo(0, offset);\n    for (; i < frequencyBinCount; i++) {\n      value = waveformData[i];\n      percent = value / 256;\n      height = orgHeight * percent;\n      offset = orgHeight - height - 1;\n      barWidth = width / frequencyBinCount;\n      context.lineTo(i * barWidth, offset);\n    }\n    context.stroke();\n\n    return true;\n  }\n\n  handleAudioConnections() {\n    this.outputs[0].on('connect', (_inst, connector) => this.outputs[0].ref.connect(connector.end.ref));\n    this.outputs[0].on('disconnect', (_inst, _connector, _start, end) => this.outputs[0].ref.disconnect(end.ref));\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { Node } from \"../../core/node\";\n\nexport class ArrayIndex extends Node {\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'Array Index', options.position || new Vector(50, 50), options.width || 120,\n      [{ name: 'data', dataType: 'array' }, { name: 'index', dataType: 'number' }],\n      [{ name: 'value', dataType: 'any' }],\n      {\n        state: options.state ? { ...options.state } : {},\n        style: options.style || { rowHeight: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.on('process', (_, inputs) => {\n      if (!inputs || !inputs[0] || typeof inputs[1] !== 'number') return;\n      this.setOutputs(0, inputs[0][inputs[1]]);\n    });\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { Node } from \"../../core/node\";\nimport { Align } from \"../../common/enums\";\nimport { InputType, Input, Toggle, HorizontalLayout, Stack } from \"../../ui/index\";\n\nexport class ArraySource extends Node {\n  arrayInput: Input;\n  minInput: Input;\n  maxInput: Input;\n  numberToggle: Toggle;\n  rangeToggle: Toggle;\n  stepInput: Input;\n  rangeLayout: HorizontalLayout;\n  rangeStack: Stack\n\n  static DefaultState: any = { number: true, range: false, min: 0, max: 100, step: 0.1, value: [] };\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'Array Source', options.position || new Vector(50, 50), options.width || 180, [],\n      [{ name: 'array', dataType: 'array' }],\n      {\n        state: options.state ? { ...ArraySource.DefaultState, ...options.state } : ArraySource.DefaultState,\n        style: options.style || { rowHeight: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n\n    this.setupUI();\n\n    this.minInput.on('change', () => this.process());\n    this.maxInput.on('change', () => this.process());\n    this.numberToggle.on('change', () => this.process());\n    this.arrayInput.on('change', () => this.process());\n    this.stepInput.on('change', () => this.process());\n    this.on('process', () => this.process());\n\n    this.watch('number', () => this.numberToggled());\n    this.watch('range', () => this.rangeToggled());\n\n    this.numberToggled();\n    this.rangeToggled();\n  }\n\n  numberToggled() {\n    this.rangeLayout.visible = this.state.number;\n    if (!this.state.number) this.state.range = false;\n  }\n  rangeToggled() {\n    if (this.state.number && this.state.range) {\n      this.arrayInput.visible = false;\n      this.rangeStack.visible = true;\n    } else {\n      this.arrayInput.visible = true;\n      this.rangeStack.visible = false;\n    }\n  }\n  process() {\n    if (this.state.range) {\n      let values = [];\n      for (let i = this.state.min; i <= this.state.max; i += this.state.step) values.push(i);\n      this.state.value = values;\n    } else {\n      if (!this.arrayInput.inputEl.validity.patternMismatch) {\n        if (!this.arrayInput.value || this.arrayInput.value === '') return;\n        let value: any[] = (this.arrayInput.value as string).split(',');\n        if (this.state.number) value = value.map(item => Number(item.trim()));\n        this.state.value = value;\n      }\n    }\n    this.setOutputs(0, this.state.value);\n  }\n  setupUI() {\n    this.numberToggle = this.createToggle({ propName: 'number', input: true, output: true, height: 10, style: { grow: .2 } });\n    this.rangeToggle = this.createToggle({ propName: 'range', input: true, output: true, height: 10, style: { grow: .2 } });\n    this.rangeLayout = this.createHozLayout([this.createLabel('Range ?', { style: { grow: .4 } }), this.rangeToggle], { style: { spacing: 10 } });\n    this.minInput = this.createInput({\n      propName: 'min', height: 20, style: { type: InputType.Number, grow: .4, step: 'any' }\n    });\n    this.maxInput = this.createInput({\n      propName: 'max', height: 20, style: { type: InputType.Number, grow: .4, step: 'any' }\n    });\n    let rangeInputLayout = this.createHozLayout([\n      this.minInput, this.createLabel('to', { style: { grow: .2, align: Align.Center } }), this.maxInput\n    ], { style: { spacing: 5 } });\n    this.stepInput = this.createInput({ propName: 'step', height: 20, style: { type: InputType.Number, step: 'any', grow: .6 } });\n    this.rangeStack = this.createStack({\n      childs: [\n        rangeInputLayout,\n        this.createHozLayout([\n          this.createLabel('Step', { style: { grow: .4 } }),\n          this.stepInput\n        ], { style: { spacing: 5 } })\n      ], style: { spacing: 10 }\n    });\n    this.arrayInput = this.createInput({ value: '', height: 20, style: { pattern: '^[^,]+(\\s*,\\s*[^,]+)*$' } });\n    this.ui.append([\n      this.createHozLayout([this.createLabel('Numbers ?', { style: { grow: .4 } }), this.numberToggle], { style: { spacing: 10 } }),\n      this.rangeLayout,\n      this.rangeStack,\n      this.arrayInput\n    ]);\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { Node } from \"../../core/node\";\nimport { Toggle } from \"../../ui/index\";\n\nexport class BooleanSource extends Node {\n  toggle: Toggle;\n\n  static DefaultState = { value: false };\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'Boolean Source', options.position || new Vector(50, 50), options.width || 130, [],\n      [{ name: 'value', dataType: 'boolean' }],\n      {\n        state: options.state ? { ...BooleanSource.DefaultState, ...options.state } : BooleanSource.DefaultState,\n        style: options.style || { rowHeight: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.setupUI();\n\n    this.toggle.on('change', () => this.process());\n    this.on('process', () => this.process());\n  }\n\n\n  process() { this.setOutputs(0, this.state.value); }\n  setupUI() {\n    this.toggle = this.createToggle({ propName: 'value', input: true, output: true, height: 10, style: { grow: .4 } });\n    this.ui.append(this.createHozLayout([\n      this.createLabel('Value'),\n      this.toggle\n    ], { style: { spacing: 20 } }));\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { Node } from \"../../core/node\";\nimport { InputType, Input } from \"../../ui/index\";\n\nexport class Buffer extends Node {\n  sizeInput: Input;\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'Buffer', options.position || new Vector(50, 50), options.width || 150,\n      [{ name: 'data', dataType: 'any' }],\n      [{ name: 'buffer', dataType: 'array' }],\n      {\n        state: options.state ? { buffer: [], size: 10, ...options.state } : { buffer: [], size: 10 },\n        style: options.style || { rowHeight: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.setupUI();\n\n    this.sizeInput.on('change', () => this.process(this.getInputs()));\n    this.on('process', (_, inputs) => this.process(inputs));\n  }\n\n  process(inputs: any[]) {\n    if (inputs[0] === null || typeof inputs[0] === 'undefined') return;\n    if (this.state.size <= 0) this.state.size = 1;\n    if (this.state.buffer.length === this.state.size) {\n      this.state.buffer.shift();\n    } else if (this.state.buffer.length > this.state.size) {\n      this.state.buffer.splice(0, this.state.buffer.length - this.state.size + 1);\n    }\n    this.state.buffer.push(inputs[0]);\n    this.setOutputs('buffer', this.state.buffer);\n  }\n  setupUI() {\n    this.sizeInput = this.createInput({ propName: 'size', input: true, output: true, height: 20, style: { type: InputType.Number, grow: .7 } });\n    this.ui.append(this.createHozLayout([\n      this.createLabel('Size', { style: { grow: .3 } }),\n      this.sizeInput\n    ], { style: { spacing: 20 } }));\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { Node } from \"../../core/node\";\nimport { Select } from \"../../ui/index\";\n\nexport class Compare extends Node {\n  select: Select\n\n  static DefaultState = { value: '==' };\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'Compare', options.position || new Vector(50, 50), options.width || 150,\n      [{ name: 'x', dataType: 'any' }, { name: 'y', dataType: 'any' }],\n      [{ name: 'result', dataType: 'boolean' }],\n      {\n        state: options.state ? { ...Compare.DefaultState, ...options.state } : Compare.DefaultState,\n        style: options.style || { rowHeight: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.setupUI();\n\n    this.select.on('change', () => this.process(this.getInputs()));\n    this.on('process', (_, inputs) => this.process(inputs));\n  }\n\n  process(inputs: any[]) {\n    if (inputs[0] === null || typeof inputs[0] === 'undefined' || inputs[1] === null || typeof inputs[1] === 'undefined') return;\n    let res;\n    switch (this.state.value) {\n      case '==': { res = inputs[0] == inputs[1]; break; }\n      case '===': { res = inputs[0] === inputs[1]; break; }\n      case '!=': { res = inputs[0] != inputs[1]; break; }\n      case '!==': { res = inputs[0] !== inputs[1]; break; }\n      case '<': { res = inputs[0] < inputs[1]; break; }\n      case '<=': { res = inputs[0] <= inputs[1]; break; }\n      case '>': { res = inputs[0] > inputs[1]; break; }\n      case '>=': { res = inputs[0] >= inputs[1]; break; }\n      case '&&': { res = inputs[0] && inputs[1]; break; }\n      case '||': { res = inputs[0] || inputs[1]; break; }\n      default: res = false;\n    }\n    this.setOutputs(0, res);\n  }\n  setupUI() {\n    let select = this.createSelect(\n      ['==', '===', '!=', '!==', '<', '<=', '>', '>=', '&&', '||'],\n      { propName: 'value', input: true, output: true, height: 15, style: { fontSize: '14px' } }\n    );\n    this.ui.append(select);\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { List, ListNode } from \"../../utils/linked-list\";\nimport { Node } from \"../../core/node\";\nimport { InputType } from \"../../ui/index\";\n\ninterface BufferedEvent {\n  data: any;\n  timeoutId: number,\n  start: number,\n  remaining?: number\n}\n\nexport class Delay extends Node {\n\n  static DefaultState: any = { delay: 0, eventQueue: null };\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'Delay', options.position || new Vector(50, 50), options.width || 130,\n      [{ name: 'event', dataType: 'event' }],\n      [{ name: 'trigger', dataType: 'event' }],\n      {\n        state: options.state ? { ...Delay.DefaultState, ...options.state } : Delay.DefaultState,\n        style: options.style || { rowHeight: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.setupUI();\n\n    this.state.eventQueue = new List<BufferedEvent>((a, b) => a.timeoutId - b.timeoutId);\n    this.state.eventQueue.on('removefirst', () => {\n      while (this.state.eventQueue.head && (performance.now() - this.state.eventQueue.head.data.start) >= this.state.delay) {\n        let bufferedEvent = this.state.eventQueue.removeFirst(false);\n        this.outputs[0].emit(bufferedEvent.data);\n      }\n    });\n    this.inputs[0].on('event', (_, data) => {\n      let eventNode = new ListNode<BufferedEvent>();\n      eventNode.data = {\n        data,\n        timeoutId: window.setTimeout(() => this.triggerEvent(eventNode), this.state.delay),\n        start: performance.now()\n      }\n      this.state.eventQueue.append(eventNode);\n    });\n    flow.on('start', () => {\n      this.state.eventQueue.forEach((eventNode: ListNode<BufferedEvent>) => {\n        eventNode.data.start = performance.now() + eventNode.data.remaining - this.state.delay;\n        eventNode.data.timeoutId = window.setTimeout(() => this.triggerEvent(eventNode), eventNode.data.remaining);\n      })\n    });\n    flow.on('stop', () => {\n      this.state.eventQueue.forEach((eventNode: ListNode<BufferedEvent>) => {\n        clearTimeout(eventNode.data.timeoutId);\n        eventNode.data.remaining = performance.now() - eventNode.data.start;\n      });\n    });\n  }\n\n  triggerEvent(eventNode: ListNode<BufferedEvent>) {\n    if (eventNode === this.state.eventQueue.head) {\n      let bufferedEvent = this.state.eventQueue.removeFirst();\n      this.outputs[0].emit(bufferedEvent.data);\n    }\n  }\n  setupUI() {\n    this.ui.append(this.createHozLayout([\n      this.createLabel('Delay', { style: { grow: .3 } }),\n      this.createInput({ propName: 'delay', input: true, output: true, height: 20, style: { type: InputType.Number, grow: .7 } })\n    ], { style: { spacing: 10 } }));\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { Node } from \"../../core/node\";\nimport { Source } from \"../../ui/index\";\n\nexport class FileSource extends Node {\n  fileInput: Source\n\n  static DefaultState: any = { file: null };\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'File Source', options.position || new Vector(50, 50), options.width || 130, [],\n      [{ name: 'file', dataType: 'file' }],\n      {\n        state: options.state ? { ...FileSource.DefaultState, ...options.state } : FileSource.DefaultState,\n        style: options.style || { rowHeight: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.setupUI();\n\n    this.fileInput.on('change', () => this.process());\n    this.on('process', () => this.process());\n  }\n\n  process() { this.setOutputs(0, this.state.file); }\n  setupUI() {\n    this.fileInput = this.createSource({ propName: 'file', input: true, output: true, height: 20 });\n    this.ui.append(this.fileInput);\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { GlobalEventType } from \"../../common/enums\";\nimport { Node } from \"../../core/node\";\nimport { get, getNewUUID } from \"../../utils/utils\";\nimport { InputType, Input } from \"../../ui/index\";\n\nexport class GlobalEvent extends Node {\n  eventInput: Input;\n\n  static DefaultState = { prevEvent: '', eventId: -1 };\n\n  constructor(flow: Flow, type: GlobalEventType, name: string, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'Global Event', options.position || new Vector(50, 50), options.width || 150,\n      type === GlobalEventType.Emitter ? [{ name: 'emit', dataType: 'event' }] : [],\n      type === GlobalEventType.Receiver ? [{ name: 'receive', dataType: 'event' }] : [],\n      {\n        state: options.state ? { ...GlobalEvent.DefaultState, ...options.state } : GlobalEvent.DefaultState,\n        style: options.style || { rowHeight: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.state.prevEvent = name;\n    this.state.name = get(name, getNewUUID());\n\n    this.setupUI();\n\n    if (type === GlobalEventType.Emitter) {\n      this.inputs[0].on('event', (_, data) => flow.globalEvents.call(this.state.name, data));\n    } else {\n      this.state.eventId = flow.globalEvents.on(this.state.name, data => this.outputs[0].emit(data));\n\n      this.on('change', (_, __, prevVal) => {\n        flow.globalEvents.off(prevVal, this.state.eventId);\n        this.state.eventId = flow.globalEvents.on(this.state.name, data => this.outputs[0].emit(data));\n      });\n    }\n  }\n\n  setupUI() {\n    this.eventInput = this.createInput({ propName: 'name', height: 20, style: { type: InputType.Text, grow: .6 } });\n    this.ui.append(this.createHozLayout([\n      this.createLabel('Event', { style: { grow: .4 } }),\n      this.eventInput\n    ], { style: { spacing: 10 } }));\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { Log } from \"../../utils/logger\";\nimport { Node } from \"../../core/node\";\nimport { InputType, Input } from \"../../ui/index\";\n\nexport class JsonSource extends Node {\n  input: Input;\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'JSON Source', options.position || new Vector(50, 50), options.width || 150, [],\n      [{ name: 'value', dataType: 'any' }],\n      {\n        state: options.state ? { ...options.state } : {},\n        style: options.style || { rowHeight: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.setupUI();\n\n    this.input.on('change', () => this.process());\n    this.on('process', () => this.process());\n  }\n\n  process() {\n    if (!this.input.value || this.input.value === '') return;\n    try {\n      let value = JSON.parse(this.input.value as string);\n      this.setOutputs(0, value);\n    } catch (error) {\n      this.input.inputEl.style.backgroundColor = 'red';\n      Log.error(\"StandardNode 'JsonSource' json parse error\", error);\n    }\n  }\n  setupUI() {\n    this.input = this.createInput({ value: '', input: true, output: true, height: 20, style: { type: InputType.Text, grow: .7 } });\n    this.ui.append(this.createHozLayout([\n      this.createLabel('Value', { style: { grow: .3 } }),\n      this.input\n    ], { style: { spacing: 20 } }));\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { Terminal, TerminalType } from \"../../core/terminal\";\nimport { Log as Logger } from '../../utils/logger';\nimport { Node } from \"../../core/node\";\nimport { Button } from \"../../ui/index\";\n\nexport class Log extends Node {\n  addEventButton: Button;\n  addDataButton: Button;\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'Log', options.position || new Vector(50, 50), options.width || 170,\n      [{ name: 'Log 1', dataType: 'event' }, { name: 'Log 2', dataType: 'any' }], [],\n      {\n        state: options.state ? { ...options.state } : {},\n        style: options.style || { rowHeight: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.inputs[0].on('event', (terminal, data) => Logger.log(terminal.name + ':', data));\n    this.inputs[1].on('data', (terminal, data) => Logger.log(terminal.name + ':', data));\n\n    this.setupUI();\n\n    this.addEventButton.on('click', () => this.addNewTerminal('event'));\n    this.addDataButton.on('click', () => this.addNewTerminal('data'));\n  }\n\n  setupUI() {\n    this.addEventButton = this.createButton('Add Event', { style: { grow: .5 } });\n    this.addDataButton = this.createButton('Add Data', { style: { grow: .5 } });\n    this.ui.append(this.createHozLayout([this.addEventButton, this.addDataButton], { style: { spacing: 20 } }));\n  }\n  addNewTerminal(type: string) {\n    let newTerminal = new Terminal(this, TerminalType.IN, type === 'event' ? type : 'any', 'Log ' + (this.inputs.length + 1));\n    newTerminal.on(type, (terminal, data) => Logger.log(terminal.name, data));\n    this.addTerminal(newTerminal);\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { Node } from \"../../core/node\";\nimport { InputType, Input, Toggle } from \"../../ui/index\";\n\nexport class NumberRange extends Node {\n  minInput: Input;\n  maxInput: Input;\n  stepInput: Input;\n  loopToggle: Toggle;\n\n  static DefaultState = { value: 0, min: 0, max: 100, step: 1, loop: false };\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'Number Range', options.position || new Vector(50, 50), options.width || 200,\n      [{ name: 'trigger', dataType: 'event' }, { name: 'reset', dataType: 'event' }],\n      [{ name: 'value', dataType: 'number' }],\n      {\n        state: options.state ? { ...NumberRange.DefaultState, ...options.state } : NumberRange.DefaultState,\n        style: options.style || { rowHeight: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.state.startValue = this.state.value;\n\n    this.setupUI();\n\n    this.minInput.on('change', () => this.process());\n    this.maxInput.on('change', () => this.process());\n    this.stepInput.on('change', () => this.process());\n    this.loopToggle.on('change', () => this.process());\n\n    this.inputs[0].on('event', () => this.process());\n    this.inputs[1].on('event', () => this.state.value = this.state.min);\n  }\n\n  process() {\n    let value = this.state.value;\n    this.state.value = value + this.state.step;\n    if (this.state.value < this.state.min) {\n      this.state.value = this.state.min;\n      if (this.state.loop) this.state.value = this.state.startValue;\n      else return;\n    } else if (this.state.value > this.state.max) {\n      this.state.value = this.state.max;\n      if (this.state.loop) this.state.value = this.state.startValue;\n      else return;\n    } else {\n      this.setOutputs(0, value);\n    }\n  }\n  setupUI() {\n    this.minInput = this.createInput({ propName: 'min', input: true, output: true, height: 20, style: { type: InputType.Number, grow: .3, step: 'any' } });\n    this.maxInput = this.createInput({ propName: 'max', input: true, output: true, height: 20, style: { type: InputType.Number, grow: .3, step: 'any' } });\n    this.stepInput = this.createInput({ propName: 'step', input: true, output: true, height: 20, style: { type: InputType.Number, grow: .3, step: 'any' } });\n    this.loopToggle = this.createToggle({ propName: 'loop', input: true, output: true, height: 10, style: { grow: .2 } });\n    this.ui.append([\n      this.createHozLayout([\n        this.createLabel('Min', { style: { grow: .2 } }), this.minInput,\n        this.createLabel('Max', { style: { grow: .2 } }), this.maxInput\n      ], { style: { spacing: 5 } }),\n      this.createHozLayout([\n        this.createLabel('Step', { style: { grow: .2 } }), this.stepInput\n      ], { style: { spacing: 5 } }),\n      this.createHozLayout([\n        this.createLabel('Loop ?', { style: { grow: .2 } }), this.loopToggle\n      ], { style: { spacing: 10 } })\n    ]);\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { Node } from \"../../core/node\";\nimport { InputType, Input, Toggle } from \"../../ui/index\";\n\nexport class NumberSource extends Node {\n  fractionalToggle: Toggle;\n  input: Input;\n\n  static DefaultState = { fractional: false, value: 0 };\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'Number Source', options.position || new Vector(50, 50), options.width || 160, [],\n      [{ name: 'value', dataType: 'number' }],\n      {\n        state: options.state ? { ...NumberSource.DefaultState, ...options.state } : NumberSource.DefaultState,\n        style: options.style || { rowHeight: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.setupUI();\n\n    this.fractionalToggle.on('change', (_inst, _oldVal, newVal) => {\n      this.input.style.step = newVal ? 'any' : '';\n      if (!newVal) this.state.value = Math.floor(this.state.value);\n      this.process();\n    });\n    this.input.on('change', () => {\n      if (!this.state.fractional) this.state.value = Math.floor(this.state.value);\n      this.process();\n    });\n    this.outputs[0].on('connect', () => this.process());\n    this.on('process', () => this.process());\n  }\n\n  process() { this.setOutputs(0, this.state.fractional ? this.state.value : Math.floor(this.state.value)); }\n  setupUI() {\n    this.fractionalToggle = this.createToggle({ propName: 'fractional', input: true, output: true, height: 10, style: { grow: .2 } });\n    this.input = this.createInput({\n      value: 0, propName: 'value', input: true, output: true, height: 20, style: { type: InputType.Number, grow: .6, step: this.state.fractional ? 'any' : '' }\n    })\n    this.ui.append([\n      this.createHozLayout([this.createLabel('Value', { style: { grow: .4 } }), this.input], { style: { spacing: 20 } }),\n      this.createHozLayout([this.createLabel('Fractional ?', { style: { grow: .5 } }), this.fractionalToggle], { style: { spacing: 20 } }),\n    ]);\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector} from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { Node } from \"../../core/node\";\n\nexport class Property extends Node {\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'Property', options.position || new Vector(50, 50), options.width || 130,\n      [{ name: 'object', dataType: 'any' }, { name: 'key', dataType: 'string' }],\n      [{ name: 'value', dataType: 'any' }],\n      {\n        state: options.state ? { ...options.state } : {},\n        style: options.style || { rowHeight: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.on('process', (_, inputs) => {\n      if (!inputs[0]) return;\n      this.setOutputs(0, inputs[0][inputs[1]]);\n    });\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { getRandom } from \"../../utils/utils\";\nimport { Node } from \"../../core/node\";\nimport { InputType, Input, Toggle } from \"../../ui/index\";\n\nexport class Random extends Node {\n  minInput: Input;\n  maxInput: Input;\n  fractionalToggle: Toggle;\n\n  static DefaultState = { min: 0, max: 100, fractional: false };\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'Random', options.position || new Vector(50, 50), options.width || 150,\n      [{ name: 'trigger', dataType: 'event' }],\n      [{ name: 'value', dataType: 'number' }],\n      {\n        state: options.state ? { ...Random.DefaultState, ...options.state } : Random.DefaultState,\n        style: options.style || { rowHeight: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.setupUI();\n\n    this.minInput.on('change', () => this.process());\n    this.maxInput.on('change', () => this.process());\n    this.fractionalToggle.on('change', () => this.process());\n    this.inputs[0].on('event', () => this.process());\n    this.on('process', () => this.process());\n  }\n\n  process() {\n    let random;\n    if (this.state.fractional) random = getRandom(this.state.min, this.state.max)\n    else random = Math.floor(getRandom(Math.floor(this.state.min), Math.floor(this.state.max)));\n\n    this.setOutputs(0, random);\n  }\n  setupUI() {\n    this.minInput = this.createInput({ propName: 'min', input: true, output: true, height: 20, style: { type: InputType.Number, grow: 1, step: 'any' } });\n    this.maxInput = this.createInput({ propName: 'max', input: true, output: true, height: 20, style: { type: InputType.Number, grow: 1, step: 'any' } });\n    this.fractionalToggle = this.createToggle({ propName: 'fractional', input: true, output: true, height: 10, style: { grow: .2 } });\n    this.ui.append([\n      this.createHozLayout([\n        this.createLabel('Min:', { style: { grow: .3 } }),\n        this.minInput\n      ], { style: { spacing: 20 } }),\n      this.createHozLayout([\n        this.createLabel('Max:', { style: { grow: .3 } }),\n        this.maxInput\n      ], { style: { spacing: 20 } }),\n      this.createHozLayout([\n        this.createLabel('Fractional ?', { style: { grow: .8 } }),\n        this.fractionalToggle\n      ], { style: { spacing: 10 } })\n    ]);\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { Node } from \"../../core/node\";\nimport { InputType, Input } from \"../../ui/index\";\n\nexport class StringSource extends Node {\n  input: Input;\n\n  static DefaultState = { value: '' };\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'String Source', options.position || new Vector(50, 50), options.width || 160, [],\n      [{ name: 'value', dataType: 'string' }],\n      {\n        state: options.state ? { ...StringSource.DefaultState, ...options.state } : StringSource.DefaultState,\n        style: options.style || { rowHeight: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.setupUI();\n\n    this.input.on('change', () => this.process());\n    this.on('process', () => this.process());\n  }\n\n  process = () => this.setOutputs(0, this.state.value);\n  setupUI() {\n    this.input = this.createInput({ value: '', propName: 'value', input: true, output: true, height: 20, style: { type: InputType.Text, grow: .7 } })\n    this.ui.append(this.createHozLayout([\n      this.createLabel('Value', { style: { grow: .3 } }), this.input\n    ], { style: { spacing: 10 } }));\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { Terminal, TerminalType } from \"../../core/terminal\";\nimport { Node } from \"../../core/node\";\nimport { RadioGroup, Button } from \"../../ui/index\";\n\nexport class SyncData extends Node {\n  syncTypeInput: RadioGroup;\n  addButton: Button;\n\n  eventIds: number[] = [];\n\n  static DefaultState = { syncType: 'partial' };\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}, inputs?: number) {\n    super(flow, options.name || 'Sync Data', options.position || new Vector(50, 50), options.width || 160,\n      [{ name: 'Data 1', dataType: 'any' }, { name: 'Data 2', dataType: 'any' }],\n      [{ name: 'synced', dataType: 'any' }],\n      {\n        state: options.state ? { ...SyncData.DefaultState, ...options.state, hold: {} } : { ...SyncData.DefaultState, hold: {} },\n        style: options.style || { rowHeight: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    if (inputs) {\n      for (let i = 0; i < inputs - 2; i++) {\n        this.addTerminal(new Terminal(this, TerminalType.IN, 'any', 'Data ' + (this.inputs.length + 1)));\n      }\n    }\n\n    this.setupUI();\n\n    for (let terminal of this.inputs) {\n      this.eventIds.push(terminal.on('data', (inst, data) => this.process(inst, data)));\n    }\n\n    this.on('process', () => process);\n  }\n  setupUI() {\n    this.syncTypeInput = this.createRadioGroup(['partial', 'full'], this.state.syncType, { propName: 'syncType', height: 20 });\n    this.addButton = this.createButton('Add', { input: true, output: true, height: 20 });\n    this.ui.append([this.syncTypeInput, this.addButton]);\n    this.addButton.on('click', () => {\n      let newTerminal = new Terminal(this, TerminalType.IN, 'any', 'Data ' + (this.inputs.length + 1));\n      this.addTerminal(newTerminal);\n      this.eventIds.push(newTerminal.on('data', (inst, data) => this.process(inst, data)));\n    });\n  }\n  process(terminal: Terminal, data: any) {\n    this.state.hold[terminal.id] = data;\n\n    let hold = [];\n    for (let term of this.inputs) {\n      if (this.state.hold.hasOwnProperty(term.id)) {\n        hold.push(this.state.hold[term.id]);\n      }\n      else return;\n    }\n\n    if (this.state.syncType === 'full') this.state.hold = {};\n    this.outputs[0].emit(hold);\n\n    for (let term of this.inputs) if (term.connectors.length > 0 && typeof term.getData() === 'undefined') return;\n    this.setOutputs(0, this.getInputs());\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { Terminal, TerminalType } from \"../../core/terminal\";\nimport { Node } from \"../../core/node\";\nimport { Button } from \"../../ui/index\";\n\nexport class SyncEvent extends Node {\n  addButton: Button;\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}, events?: number) {\n    super(flow, options.name || 'Sync Event', options.position || new Vector(50, 50), options.width || 160,\n      [{ name: 'Event 1', dataType: 'event' }, { name: 'Event 2', dataType: 'event' }],\n      [{ name: 'synced', dataType: 'event' }],\n      {\n        state: options.state ? { ...options.state, hold: {} } : { hold: {} },\n        style: options.style || { rowHeight: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    if (events) {\n      for (let i = 0; i < events - 2; i++)\n        this.addTerminal(new Terminal(this, TerminalType.IN, 'event', 'Event ' + (this.inputs.length + 1)));\n    }\n    this.inputs.forEach(terminal => terminal.on('event', (inst, data) => this.process(inst, data)));\n\n    this.setupUI();\n\n    this.addButton.on('click', () => {\n      let newTerminal = new Terminal(this, TerminalType.IN, 'event', 'Event ' + (this.inputs.length + 1));\n      this.addTerminal(newTerminal);\n      newTerminal.on('event', (terminal, data) => this.process(terminal, data));\n    });\n  }\n\n  process(terminal: Terminal, data: any) {\n    this.state.hold[terminal.id] = data;\n\n    let hold = [];\n    for (let term of this.inputs) {\n      if (this.state.hold.hasOwnProperty(term.id)) {\n        hold.push(this.state.hold[term.id]);\n      }\n      else return;\n    }\n\n    this.state.hold = {};\n    this.outputs[0].emit(hold);\n  }\n  setupUI() {\n    this.addButton = this.createButton('Add', { input: true, output: true, height: 20 });\n    this.ui.append(this.addButton);\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { Node } from \"../../core/node\";\nimport { InputType } from \"../../ui/index\";\n\nexport class Timer extends Node {\n  lastTrigger: number = Number.MIN_VALUE;\n\n  static DefaultState: any = { delay: 1000, emitValue: null };\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'Timer', options.position || new Vector(50, 50), options.width || 120, [],\n      [{ name: 'timer', dataType: 'event' }],\n      {\n        state: options.state ? { ...Timer.DefaultState, ...options.state } : Timer.DefaultState,\n        style: options.style || { rowHeight: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.setupUI();\n\n    flow.flowConnect.on('tickreset', () => this.lastTrigger = Number.MIN_VALUE);\n    flow.flowConnect.on('tick', () => {\n      let current = flow.flowConnect.time;\n      if (current - this.lastTrigger >= this.state.delay) {\n        this.outputs[0].emit(this.state.emitValue);\n        this.lastTrigger = current;\n      }\n    });\n  }\n\n  setupUI() {\n    this.ui.append(this.createInput({ propName: 'delay', height: 20, style: { type: InputType.Number } }));\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { Terminal, TerminalType } from \"../../core/terminal\";\nimport { Node } from \"../../core/node\";\nimport { Button } from \"../../ui/index\";\n\nexport class ToArray extends Node {\n  addButton: Button;\n\n  constructor(flow: Flow, inputs: number, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'To Array', options.position || new Vector(50, 50), options.width || 100,\n      (inputs && inputs > 0\n        ? (new Array(inputs).fill(null).map((_, index) => ({ name: 'In ' + (index + 1), dataType: 'any' })))\n        : [{ name: 'In 1', dataType: 'any' }]\n      ),\n      [{ name: 'out', dataType: 'array' }],\n      {\n        state: options.state ? { ...options.state } : {},\n        style: options.style || { rowHeight: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.setupUI();\n\n    this.addButton.on('click', () => this.addTerminal(new Terminal(this, TerminalType.IN, 'any', 'In ' + this.inputs.length + 1)));\n    this.on('process', (_, inData) => this.setOutputs(0, [...inData]));\n  }\n\n  setupUI() {\n    this.addButton = this.createButton('Add', { style: { grow: .5 } });\n    this.ui.append(this.addButton);\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { Log } from \"../../utils/logger\";\nimport { Node } from \"../../core/node\";\n\nexport class ToVector2 extends Node {\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'To Vector', options.position || new Vector(50, 50), options.width || 100,\n      [{ name: 'x', dataType: 'any' }, { name: 'y', dataType: 'any' }],\n      [{ name: 'vector2', dataType: 'any' }],\n      {\n        state: options.state ? { ...options.state } : {},\n        style: options.style || { rowHeight: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.on('process', (_, inputs) => {\n      if (typeof inputs[0] === 'number' && typeof inputs[1] === 'number') {\n        this.setOutputs(0, { x: inputs[0], y: inputs[1] });\n      } else if (Array.isArray(inputs[0]) && Array.isArray(inputs[1])) {\n        let result = [];\n        for (let i = 0; i < inputs[0].length; i++) {\n          result.push({ x: inputs[0][i], y: inputs[1][i] });\n        }\n        this.setOutputs(0, result);\n      } else {\n        Log.error('Type mismatch: Inputs to standard node \\'ToVector2\\' should be of same type');\n      }\n    });\n  }\n}\n","import * as timer from './common/timer';\nimport * as log from './common/log';\nimport * as buffer from './common/buffer';\nimport * as toArray from './common/to-array';\nimport * as arrayIndex from './common/array-index';\nimport * as arraySource from './common/array-source';\nimport * as random from './common/random';\nimport * as booleanSource from './common/boolean-source';\nimport * as jsonSource from './common/json-source';\nimport * as numberSource from './common/number-source';\nimport * as stringSource from './common/string-source';\nimport * as fileSource from './common/file-source';\nimport * as compare from './common/compare';\nimport * as property from './common/property';\nimport * as syncEvent from './common/sync-event';\nimport * as syncData from './common/sync-data';\nimport * as delay from './common/delay';\nimport * as toVector2 from './common/to-vector2';\nimport * as numberRange from './common/number-range';\nimport * as globalEvent from './common/global-event';\n\nimport * as abs from './math/abs';\nimport * as average from './math/average';\nimport * as normalize from './math/normalize';\nimport * as clamp from './math/clamp';\nimport * as floor from './math/floor';\nimport * as ceil from './math/ceil';\nimport * as func from './math/func';\n\nimport * as api from './net/api';\n\nimport * as functionPlotter from './visual/function-plotter';\nimport * as lineChartMini from './visual/line-chart-mini';\n\nimport * as source from './audio/source';\nimport * as destination from './audio/destination';\nimport * as automate from './audio/automate';\nimport * as channelSplitter from './audio/channel-splitter';\nimport * as debug from './audio/debug';\nimport * as channelMerger from './audio/channel-merger';\nimport * as adsr from './audio/adsr';\nimport * as gain from './audio/gain';\nimport * as metronome from './audio/metronome';\nimport * as moogEffect from './audio/moog';\nimport * as bitcrusherEffect from './audio/bitcrusher';\nimport * as biquadFilter from './audio/biquad-filter';\nimport * as delayEffect from './audio/delay';\nimport * as dynamicsCompressor from './audio/dynamics-compressor';\nimport * as chorusEffect from './audio/chorus';\nimport * as overdriveEffect from './audio/overdrive';\nimport * as audioBuffer from './audio/audio-buffer-source';\nimport * as convolver from './audio/convolver';\nimport * as tremoloEffect from './audio/tremolo';\nimport * as pingPong from './audio/ping-pong-delay';\nimport * as stereoPanner from './audio/stereo-panner';\nimport * as spatialPanner from './audio/3d-panner';\nimport * as noise from './audio/noise';\nimport * as oscillator from './audio/oscillator';\nimport * as microphone from './audio/microphone';\nimport * as distorter from './audio/distorter';\nimport * as equalizer from './audio/equalizer';\nimport * as frequencyAnalyser from './audio/frequency-analyser';\nimport * as waveformAnalyser from './audio/waveform-analyser';\nimport * as spectrogramAnalyser from './audio/spectrogram-analyser';\n\nimport * as dial from './ui/dial';\n\nexport namespace StandardNodes.Common {\n  export import Timer = timer.Timer;\n  export import Log = log.Log;\n  export import Buffer = buffer.Buffer;\n  export import ToArray = toArray.ToArray;\n  export import ArrayIndex = arrayIndex.ArrayIndex;\n  export import ArraySource = arraySource.ArraySource;\n  export import BooleanSource = booleanSource.BooleanSource;\n  export import JsonSource = jsonSource.JsonSource;\n  export import NumberSource = numberSource.NumberSource;\n  export import StringSource = stringSource.StringSource;\n  export import FileSource = fileSource.FileSource;\n  export import Random = random.Random;\n  export import Compare = compare.Compare;\n  export import Property = property.Property;\n  export import SyncEvent = syncEvent.SyncEvent;\n  export import SyncData = syncData.SyncData;\n  export import Delay = delay.Delay;\n  export import ToVector2 = toVector2.ToVector2;\n  export import NumberRange = numberRange.NumberRange;\n  export import GlobalEvent = globalEvent.GlobalEvent;\n}\nexport namespace StandardNodes.Math {\n  export import Abs = abs.Abs;\n  export import Average = average.Average;\n  export import Normalize = normalize.Normalize;\n  export import Clamp = clamp.Clamp;\n  export import Floor = floor.Floor;\n  export import Ceil = ceil.Ceil;\n  export import Function = func.Func;\n}\nexport namespace StandardNodes.Net {\n  export import API = api.API;\n}\nexport namespace StandardNodes.Visual {\n  export import LineChartMini = lineChartMini.LineChartMini;\n  export import FunctionPlotter = functionPlotter.FunctionPlotter;\n}\nexport namespace StandardNodes.Audio {\n  export import Source = source.Source;\n  export import Destination = destination.Destination;\n  export import Automate = automate.Automate;\n  export import ChannelSplitter = channelSplitter.ChannelSplitter;\n  export import Debug = debug.Debug;\n  export import ChannelMerger = channelMerger.ChannelMerger;\n  export import ADSR = adsr.ADSR;\n  export import Gain = gain.Gain;\n  export import Metronome = metronome.Metronome;\n  export import MoogEffect = moogEffect.MoogEffect;\n  export import BitcrusherEffect = bitcrusherEffect.BitcrusherEffect;\n  export import BiquadFilter = biquadFilter.BiquadFilter;\n  export import DelayEffect = delayEffect.DelayEffect;\n  export import DynamicsCompressor = dynamicsCompressor.DynamicsCompressor;\n  export import ChorusEffect = chorusEffect.ChorusEffect;\n  export import OverdriveEffect = overdriveEffect.OverdriveEffect;\n  export import AudioBufferSource = audioBuffer.AudioBufferSource;\n  export import Convolver = convolver.Convolver;\n  export import TremoloEffect = tremoloEffect.TremoloEffect;\n  export import PingPongDelay = pingPong.PingPongEffect;\n  export import StereoPanner = stereoPanner.StereoPanner;\n  export import SpatialPanner = spatialPanner.SpatialPanner;\n  export import Noise = noise.Noise;\n  export import Oscillator = oscillator.Oscillator;\n  export import Microphone = microphone.Microphone;\n  export import Distorter = distorter.Distorter;\n  export import Equalizer = equalizer.Equalizer;\n  export import FrequencyAnalyser = frequencyAnalyser.FrequencyAnalyser;\n  export import WaveformAnalyser = waveformAnalyser.WaveformAnalyser;\n  export import SpectrogramAnalyser = spectrogramAnalyser.SpectrogramAnalyser;\n}\nexport namespace StandardNodes.UI {\n  export import Dial = dial.Dial;\n}\nexport namespace StandardNodes.Image {\n\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { Node } from \"../../core/node\";\n\nexport class Abs extends Node {\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'Abs', options.position || new Vector(50, 50), options.width || 120,\n      [{ name: 'x', dataType: 'any' }],\n      [{ name: '|x|', dataType: 'any' }],\n      {\n        state: options.state ? { ...options.state } : {},\n        style: options.style || { rowHeight: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.on('process', (_, inputs) => {\n      if (typeof inputs[0] === 'number') {\n        this.setOutputs(0, Math.abs(inputs[0]));\n      } else if (Array.isArray(inputs[0])) {\n        this.setOutputs(0, inputs[0].map(item => Math.abs(item)));\n      }\n    });\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { Node } from \"../../core/node\";\n\nexport class Average extends Node {\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'Average', options.position || new Vector(50, 50), options.width || 120,\n      [{ name: 'n', dataType: 'any' }],\n      [{ name: '', dataType: 'any' }],\n      {\n        state: options.state ? { ...options.state } : {},\n        style: options.style || { rowHeight: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.on('process', (_, inputs) => {\n      if (Array.isArray(inputs[0])) {\n        this.setOutputs(0, inputs[0].reduce((acc, curr) => acc + curr, 0) / inputs[0].length);\n      }\n    });\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { Node } from \"../../core/node\";\n\nexport class Ceil extends Node {\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'Ceil', options.position || new Vector(50, 50), options.width || 120,\n      [{ name: 'x', dataType: 'any' }],\n      [{ name: '|x|', dataType: 'any' }],\n      {\n        state: options.state ? { ...options.state } : {},\n        style: options.style || { rowHeight: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.on('process', (_, inputs) => {\n      if (typeof inputs[0] === 'number') {\n        this.setOutputs(0, Math.ceil(inputs[0]));\n      } else if (Array.isArray(inputs[0])) {\n        this.setOutputs(0, inputs[0].map(item => Math.ceil(item)));\n      }\n    });\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { clamp } from \"../../utils/utils\";\nimport { Node } from \"../../core/node\";\nimport { InputType, Input } from \"../../ui/index\";\n\nexport class Clamp extends Node {\n  minInput: Input;\n  maxInput: Input;\n\n  static DefaultState = { min: 0, max: 100 };\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'Clamp', options.position || new Vector(50, 50), options.width || 150,\n      [{ name: 'x', dataType: 'any' }],\n      [{ name: '[x]', dataType: 'any' }],\n      {\n        state: options.state ? { ...Clamp.DefaultState, ...options.state } : Clamp.DefaultState,\n        style: options.style || { rowHeight: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.setupUI();\n\n    this.minInput.on('change', () => this.process(this.getInputs()[0]));\n    this.maxInput.on('change', () => this.process(this.getInputs()[0]));\n    this.on('process', (_, inputs) => this.process(inputs[0]));\n  }\n\n  setupUI() {\n    this.minInput = this.createInput({ propName: 'min', input: true, output: true, height: 20, style: { type: InputType.Number, grow: .7 } });\n    this.maxInput = this.createInput({ propName: 'max', input: true, output: true, height: 20, style: { type: InputType.Number, grow: .7 } });\n    this.ui.append([\n      this.createHozLayout([\n        this.createLabel('Min', { style: { grow: .3 } }),\n        this.minInput\n      ], { style: { spacing: 10 } }),\n      this.createHozLayout([\n        this.createLabel('Max', { style: { grow: .3 } }),\n        this.maxInput\n      ], { style: { spacing: 10 } })\n    ]);\n  }\n  process(input: number | []) {\n    if (typeof input === 'number') {\n      this.setOutputs(0, clamp(input, this.state.min, this.state.max));\n    } else if (Array.isArray(input)) {\n      this.setOutputs(0, input.map(item => clamp(item, this.state.min, this.state.max)));\n    }\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { Node } from \"../../core/node\";\n\nexport class Floor extends Node {\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'Floor', options.position || new Vector(50, 50), options.width || 120,\n      [{ name: 'x', dataType: 'any' }],\n      [{ name: '|x|', dataType: 'any' }],\n      {\n        state: options.state ? { ...options.state } : {},\n        style: options.style || { rowHeight: 10 },\n        terminalStyle: options.terminalStyle || {},\n      }\n    );\n\n    this.on('process', (_, inputs) => {\n      if (typeof inputs[0] === 'number') {\n        this.setOutputs(0, Math.floor(inputs[0]));\n      } else if (Array.isArray(inputs[0])) {\n        this.setOutputs(0, inputs[0].map(item => Math.floor(item)));\n      }\n    });\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { Terminal, TerminalType } from \"../../core/terminal\";\nimport { Evaluator } from \"../../utils/evaluator\";\nimport { Log } from \"../../utils/logger\";\nimport { Parser } from \"../../utils/parser\";\nimport { Token, TokenType } from \"../../utils/lexer\";\nimport { Node } from \"../../core/node\";\nimport { InputType, Input, Button } from \"../../ui/index\";\n\nexport class Func extends Node {\n  addVarButton: Button\n\n  static DefaultState = { newVar: 'y' };\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}, expression?: string) {\n    super(flow, options.name || 'Function', options.position || new Vector(50, 50), options.width || 200, [],\n      [{ name: '', dataType: 'any' }],\n      {\n        state: options.state\n          ? { ...Func.DefaultState, ...options.state, expression: (expression || 'a*sin(a^2)+cos(a*tan(a))'), evaluator: new Evaluator({}) }\n          : { ...Func.DefaultState, expression: (expression || 'a*sin(a^2)+cos(a*tan(a))'), evaluator: new Evaluator({}) },\n        style: options.style || { rowHeight: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    let vars = new Set<string>();\n    let parser = new Parser();\n    let tokens: Token[];\n    try {\n      tokens = parser.parse(expression);\n    } catch (error) {\n      Log.error('Error while parsing expression: ', expression, error);\n      return;\n    }\n    try {\n      tokens.forEach(token => {\n        if (token.type === TokenType.Variable) {\n          if ((token.value as string).length > 1) throw new Error('Only single character variables are allowed: ' + token.value);\n          else vars.add(token.value as string);\n        }\n      });\n    } catch (error) { Log.error(error); return; }\n\n    vars.forEach(variable => this.addTerminal(new Terminal(this, TerminalType.IN, 'any', variable)));\n    this.state.expression = expression;\n\n    this.setupUI();\n\n    this.watch('expression', () => this.process());\n\n    this.addVarButton.on('click', () => {\n      if (!this.state.newVar || this.state.newVar.trim() === '') return;\n      if (this.inputs.map(input => input.name).includes(this.state.newVar.trim().toLowerCase())) {\n        Log.error('Variable', this.state.newVar.trim(), 'already exists');\n        return;\n      }\n      this.addTerminal(new Terminal(this, TerminalType.IN, 'any', this.state.newVar.trim()));\n    });\n    this.on('process', () => this.process());\n  }\n\n  process() {\n    let bulkEvalIterations = -1;\n    this.state.evaluator.variables = {};\n    for (let inTerminal of this.inputs) {\n      let data = inTerminal.getData();\n\n      // Some checks to determine if the intention is to pass variables with array values to this function\n      // Which should mean its a bulk evaluation (t=[2,5,6,8...], f(t)=cos(t)  ==>  f(t)=[cos(2),cos(5),cos(6),cos(8)...])\n      if (Array.isArray(data)) {\n        let expr = this.state.expression;\n        let regex = new RegExp('([a-z]+)\\\\(' + inTerminal.name + '\\\\)', 'g');\n        expr = expr.replace(/\\s+/g, '');\n        let matches = [...expr.matchAll(regex)];\n        let result = matches\n          .map(match => !Evaluator.multiargFunctions.includes(match[1]))\n          .reduce((acc, curr) => acc = acc && curr, true);\n\n        if (result) bulkEvalIterations = Math.max(bulkEvalIterations, data.length);\n      }\n\n      this.state.evaluator.variables[inTerminal.name] = (typeof data !== 'undefined' && data !== null) ? data : 0;\n    }\n    try {\n      let result: number[] | number;\n      if (bulkEvalIterations !== -1) {\n        let resultArr = [];\n        for (let i = 0; i < bulkEvalIterations; i += 1) {\n          resultArr.push(this.state.evaluator.evaluate(this.state.expression, i));\n        }\n        result = resultArr;\n      } else {\n        result = this.state.evaluator.evaluate(this.state.expression);\n      }\n      this.setOutputs(0, result);\n    } catch (error) {\n      Log.error('Error while evaluating the expression: ', this.state.expression, error);\n    }\n  }\n  lowerCase(input: Input) {\n    if (/[A-Z]/g.test(input.inputEl.value)) input.inputEl.value = input.inputEl.value.toLowerCase();\n  }\n  setupUI() {\n    let exprInput = this.createInput({\n      propName: 'expression', input: true, output: true, height: 20, style: { type: InputType.Text, grow: .9 }\n    });\n    exprInput.on('input', this.lowerCase);\n    this.addVarButton = this.createButton('Add', { height: 20, style: { grow: .4 } });\n    this.ui.append([\n      this.createHozLayout([\n        this.createLabel('', { style: { grow: .1 } }),\n        exprInput\n      ], { style: { spacing: 10 } }),\n      this.createHozLayout([\n        this.createInput({ propName: 'newVar', height: 20, style: { type: InputType.Text, maxLength: 1, grow: .6 } }),\n        this.addVarButton\n      ], { style: { spacing: 10 } })\n    ]);\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { normalize } from \"../../utils/utils\";\nimport { Node } from \"../../core/node\";\nimport { InputType } from \"../../ui/index\";\n\nexport class Normalize extends Node {\n  min = Number.MAX_SAFE_INTEGER;\n  max = Number.MIN_SAFE_INTEGER;\n\n  static DefaultState = { min: 0, max: 100, relative: false };\n\n  constructor(flow: Flow, public type: 'number' | 'array', options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'Normalize', options.position || new Vector(50, 50), options.width || 150,\n      [{ name: 'data', dataType: type }],\n      [{ name: 'normalized', dataType: type }],\n      {\n        state: options.state ? { ...Normalize.DefaultState, ...options.state } : Normalize.DefaultState,\n        style: options.style || { rowHeight: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    if (type === 'array') {\n      let relativeToggle = this.createToggle({ propName: 'relative', height: 10, style: { grow: .5 } });\n      this.ui.append(this.createHozLayout([\n        this.createLabel('Relative ?'),\n        relativeToggle\n      ], { style: { spacing: 20 } }));\n      relativeToggle.on('change', () => this.process());\n    }\n    if (type === 'number' || !this.state.relative) {\n      let minInput = this.createInput({ propName: 'min', height: 20, style: { type: InputType.Number, grow: .3 } });\n      let maxInput = this.createInput({ propName: 'max', height: 20, style: { type: InputType.Number, grow: .3 } });\n      this.ui.append(this.createHozLayout([\n        this.createLabel('Min', { style: { grow: .2 } }),\n        minInput,\n        this.createLabel('Max', { style: { grow: .2 } }),\n        maxInput\n      ], { style: { spacing: 5 } }));\n\n      minInput.on('change', () => this.process());\n      maxInput.on('change', () => this.process());\n    }\n    if (this.state.constant) {\n      let constantInput = this.createInput({ propName: 'constant', height: 20, style: { type: InputType.Number, grow: .5 } });\n      this.ui.append(this.createHozLayout([\n        this.createLabel('Constant'),\n        constantInput\n      ], { style: { spacing: 20 } }));\n\n      constantInput.on('change', () => this.process());\n    }\n\n    this.on('process', () => this.process())\n  }\n\n\n  process() {\n    let data = this.getInput(0);\n    if (!data) return;\n\n    let normalized;\n    if (this.type === 'number') {\n      normalized = Number(normalize(data, this.state.min, this.state.max).toFixed(2));\n    } else {\n      if (this.state.relative) {\n        let currMin = Math.min(...data);\n        let currMax = Math.max(...data);\n        if (currMin < this.min) this.min = currMin - (this.state.constant || 0);\n        if (currMax > this.max) this.max = currMax + (this.state.constant || 0);\n        normalized = data.map((item: number) => Number(normalize(item, this.min, this.max).toFixed(2)));\n      } else {\n        normalized = data.map((item: number) => Number(normalize(item, this.state.min, this.state.max).toFixed(2)));\n      }\n    }\n    this.setOutputs('normalized', normalized);\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { Align } from \"../../common/enums\";\nimport { Log } from \"../../utils/logger\";\nimport { isEmpty } from \"../../utils/utils\";\nimport { Node } from \"../../core/node\";\n\nexport class API extends Node {\n\n  static DefaultState = { src: '' };\n\n  constructor(flow: Flow, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'API', options.position || new Vector(50, 50), options.width || 150,\n      [{ name: 'trigger', dataType: 'event' }],\n      [{ name: 'text', dataType: 'string' }, { name: 'json', dataType: 'any' }, { name: 'array-buffer', dataType: 'array-buffer' }],\n      {\n        state: options.state ? { ...API.DefaultState, ...options.state } : API.DefaultState,\n        style: options.style || { rowHeight: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.setupUI();\n\n    this.inputs[0].on('event', async () => {\n      if (!this.state.src || this.state.src === '') Log.error(\"Prop 'src' of API Node is invalid, cannot make an API call\");\n      else {\n        let response, outputs: Record<string, any> = {};\n        if (this.outputs.map(terminal => terminal.connectors.length).reduce((acc, curr) => acc + curr, 0) > 0) {\n          response = await fetch(this.state.src);\n\n          if (this.outputs[0].connectors.length > 0) outputs[this.outputs[0].name] = await response.text();\n          else if (this.outputs[1].connectors.length > 0) outputs[this.outputs[1].name] = await response.json();\n          else if (this.outputs[2].connectors.length > 0) {\n            // If this is an audio connection then check the arrayBufferCache first\n            if (this.outputs[2].connectors.map(connector => connector.end.dataType).includes('audio')) {\n              let cached = flow.flowConnect.arrayBufferCache.get(this.state.src);\n              if (!cached) {\n                cached = await response.arrayBuffer();\n                flow.flowConnect.arrayBufferCache.set(this.state.src, cached);\n              }\n              outputs[this.outputs[2].name] = cached;\n            } else {\n              outputs[this.outputs[2].name] = await response.arrayBuffer();\n            }\n          }\n\n          if (!isEmpty(outputs)) this.setOutputs(outputs);\n        }\n      }\n    });\n  }\n\n  setupUI() {\n    this.ui.append(this.createLabel('', { propName: 'src', input: true, output: true, style: { align: Align.Center } }));\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { Align } from \"../../common/enums\";\nimport { Node } from \"../../core/node\";\nimport { DialStyle } from \"../../ui/index\";\n\nexport class Dial extends Node {\n\n  static DefaultState = { value: 0, min: 0, max: 1 };\n\n  constructor(flow: Flow, options: NodeCreatorOptions = new Object(), dialStyle: DialStyle = new Object()) {\n    super(flow, options.name || 'Dial', options.position || new Vector(50, 50), options.width || 90, [], [],\n      {\n        state: options.state ? { ...Dial.DefaultState, ...options.state } : Dial.DefaultState,\n        style: options.style || { rowHeight: 10, padding: 5, spacing: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    Object.assign(this.ui.style, {\n      backgroundColor: 'transparent',\n      borderColor: 'transparent',\n      borderWidth: 0,\n      shadowBlur: 0,\n      shadowColor: 'transparent'\n    });\n\n    this.setupUI(dialStyle);\n\n    this.outputsUI[0].on('connect', (_inst, connector) => {\n      if (connector.end.ref instanceof AudioParam) this.state.value = connector.end.ref.value;\n    });\n  }\n\n  setupUI(dialStyle: DialStyle) {\n    let dial = this.createDial(this.state.min, this.state.max, this.width, {\n      value: this.state.value, propName: 'value', input: true, output: true, style: dialStyle\n    });\n    this.ui.append([\n      dial,\n      this.createStack({\n        childs: [\n          this.createHozLayout([\n            this.createLabel('', { propName: 'min', style: { precision: 1, fontSize: '11px', align: Align.Left, grow: .5 } }),\n            this.createLabel('', { propName: 'max', style: { precision: 1, fontSize: '11px', align: Align.Right, grow: .5 } })\n          ]),\n          this.createHozLayout([\n            this.createLabel('', { propName: 'value', style: { precision: 1, fontSize: '20px', align: Align.Center, grow: 1 } })\n          ])\n        ],\n        style: { spacing: 5 }\n      })\n    ]);\n  }\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { Node } from \"../../core/node\";\nimport { get } from \"../../utils/utils\";\nimport { Display, Toggle } from \"../../ui/index\";\n\nexport class FunctionPlotter extends Node {\n  display: Display;\n  polarToggle: Toggle;\n\n  static DefaultState: any = { points: [], polar: false, config: { gX: 3, gY: 3, xMin: -1.5, xMax: 1.5, yMin: -1.5, yMax: 1.5 } }\n\n  constructor(flow: Flow, height: number, public plotStyle: PlotStyle = new Object(), options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'Parametric Plotter', options.position || new Vector(50, 50), options.width || 300,\n      [{ name: 'data', dataType: 'any' }], [],\n      {\n        state: options.state ? { ...FunctionPlotter.DefaultState, ...options.state } : FunctionPlotter.DefaultState,\n        style: options.style || { rowHeight: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.setupUI(height);\n\n    this.polarToggle.on('change', () => this.process(this.getInputs()));\n\n    let dragStart: Vector = null;\n    this.display.on('up', () => dragStart = null);\n    this.display.on('exit', () => dragStart = null);\n    this.display.on('down', (_, screenPos) => {\n      dragStart = screenPos.subtract(this.display.position.transform(flow.flowConnect.transform));\n      dragStart.x = this.xPixToCoord(this.state.config, this.display.displayConfigs[0].canvas.width, dragStart.x);\n      dragStart.y = this.yPixToCoord(this.state.config, this.display.displayConfigs[0].canvas.height, dragStart.y);\n    });\n    this.display.on('drag', (_, screenPos) => {\n      if (dragStart) {\n        let curr = screenPos.subtract(this.display.position.transform(flow.flowConnect.transform));\n        curr.x = this.xPixToCoord(this.state.config, this.display.displayConfigs[0].canvas.width, curr.x);\n        curr.y = this.yPixToCoord(this.state.config, this.display.displayConfigs[0].canvas.height, curr.y);\n\n        let delta = dragStart.subtract(curr);\n        Object.assign(this.state.config, {\n          xMin: this.state.config.xMin + delta.x,\n          xMax: this.state.config.xMax + delta.x,\n          yMin: this.state.config.yMin + delta.y,\n          yMax: this.state.config.yMax + delta.y,\n        });\n\n        this.gridRenderer(\n          this.display.displayConfigs[0].context,\n          this.display.displayConfigs[0].canvas.width,\n          this.display.displayConfigs[0].canvas.height\n        );\n        this.functionRenderer(\n          this.display.displayConfigs[1].context,\n          this.display.displayConfigs[1].canvas.width,\n          this.display.displayConfigs[1].canvas.height\n        );\n      }\n    });\n    this.display.on('wheel', (_, direction, screenPos) => {\n      let cursor = screenPos.subtract(this.display.position.transform(flow.flowConnect.transform));\n      cursor.x = this.xPixToCoord(this.state.config, this.display.displayConfigs[0].canvas.width, cursor.x);\n      cursor.y = this.yPixToCoord(this.state.config, this.display.displayConfigs[0].canvas.height, cursor.y);\n\n      Object.assign(this.state.config, {\n        xMin: this.state.config.xMin - cursor.x,\n        xMax: this.state.config.xMax - cursor.x,\n        yMin: this.state.config.yMin - cursor.y,\n        yMax: this.state.config.yMax - cursor.y\n      });\n      if (!direction) {\n        Object.assign(this.state.config, {\n          xMin: this.state.config.xMin + this.state.config.xMin * 0.1,\n          xMax: this.state.config.xMax + this.state.config.xMax * 0.1,\n          yMin: this.state.config.yMin + this.state.config.yMin * 0.1,\n          yMax: this.state.config.yMax + this.state.config.yMax * 0.1\n        });\n      } else {\n        Object.assign(this.state.config, {\n          xMin: this.state.config.xMin - this.state.config.xMin * 0.1,\n          xMax: this.state.config.xMax - this.state.config.xMax * 0.1,\n          yMin: this.state.config.yMin - this.state.config.yMin * 0.1,\n          yMax: this.state.config.yMax - this.state.config.yMax * 0.1\n        });\n      }\n      Object.assign(this.state.config, {\n        xMin: this.state.config.xMin + cursor.x,\n        xMax: this.state.config.xMax + cursor.x,\n        yMin: this.state.config.yMin + cursor.y,\n        yMax: this.state.config.yMax + cursor.y\n      });\n\n      this.gridRenderer(\n        this.display.displayConfigs[0].context,\n        this.display.displayConfigs[0].canvas.width,\n        this.display.displayConfigs[0].canvas.height\n      );\n      this.functionRenderer(\n        this.display.displayConfigs[1].context,\n        this.display.displayConfigs[1].canvas.width,\n        this.display.displayConfigs[1].canvas.height\n      );\n    });\n    flow.flowConnect.on('scale', () => this.functionRenderer(\n      this.display.displayConfigs[1].context,\n      this.display.displayConfigs[1].canvas.width,\n      this.display.displayConfigs[1].canvas.height\n    ));\n\n\n    this.inputsUI[0].on('event', () => this.state.points = []);\n    this.on('process', (_, inputs) => this.process(inputs));\n  }\n\n\n  gridRenderer(context: CanvasRenderingContext2D | OffscreenCanvasRenderingContext2D, width: number, height: number) {\n    this.drawGrid(context, width, height);\n    return false;\n  }\n  process(inputs: any) {\n    if (Array.isArray(inputs[0])) {\n      if (this.state.polar) {\n        this.state.points = [];\n        for (let i of inputs[0]) {\n          this.state.points.push({ x: i.x * Math.cos(i.y), y: i.x * Math.sin(i.y) });\n        }\n      } else {\n        this.state.points = inputs[0];\n      }\n    } else {\n      this.state.points.push(this.state.polar\n        ? { x: inputs[0].x * Math.cos(inputs[0].y), y: inputs[0].x * Math.sin(inputs[0].y) }\n        : inputs[0]\n      );\n    }\n    this.functionRenderer(\n      this.display.displayConfigs[1].context,\n      this.display.displayConfigs[1].canvas.width,\n      this.display.displayConfigs[1].canvas.height\n    );\n  }\n  xCoordToPix(config: any, width: number, xCoord: number) {\n    const xDiff = config.xMax - config.xMin;\n    const xPixPerUnit = width / xDiff;\n    return Math.round((xCoord - config.xMin) * xPixPerUnit);\n  }\n  yCoordToPix(config: any, height: number, yCoord: number) {\n    const yDiff = config.yMax - config.yMin;\n    const yPixPerUnit = height / yDiff;\n    return Math.round(height - (yCoord - config.yMin) * yPixPerUnit);\n  }\n  xPixToCoord(config: any, width: number, xPix: number) {\n    const xDiff = config.xMax - config.xMin;\n    const xPixPerUnit = width / xDiff;\n    return xPix / xPixPerUnit + config.xMin;\n  }\n  yPixToCoord(config: any, height: number, yPix: number) {\n    const yDiff = config.yMax - config.yMin;\n    const yPixPerUnit = height / yDiff;\n    return -(yPix - height) / yPixPerUnit + config.yMin;\n  }\n  drawLine(context: CanvasRenderingContext2D | OffscreenCanvasRenderingContext2D, x1: number, y1: number, x2: number, y2: number) {\n    context.beginPath();\n    context.moveTo(x1, y1);\n    context.lineTo(x2, y2);\n    context.stroke();\n  }\n  getGridPointDist(min: number, max: number, factor: number) {\n    const diff = max - min;\n    let result = Math.pow(10.0, Math.ceil(Math.log(diff) / Math.log(10.0)) - 1);\n    switch (Math.floor(diff / result)) {\n      case 9: result /= 2; break;\n      case 8: result /= 3; break;\n      case 7: result /= 4; break;\n      case 6: result /= 5; break;\n      case 5: result /= 6; break;\n      case 4: result /= 7; break;\n      case 3: result /= 8; break;\n      case 2: result /= 9; break;\n      case 1: result /= 10; break;\n    }\n    result *= factor;\n    return result;\n  }\n  drawGrid(context: CanvasRenderingContext2D | OffscreenCanvasRenderingContext2D, width: number, height: number) {\n    context.clearRect(0, 0, width, height);\n    const xDiff = this.state.config.xMax - this.state.config.xMin;\n    const xPixPerUnit = width / xDiff;\n    const yDiff = this.state.config.yMax - this.state.config.yMin;\n    const yPixPerUnit = height / yDiff;\n    const xF = this.getGridPointDist(this.state.config.xMin, this.state.config.xMax, this.state.config.gX);\n    const yF = this.getGridPointDist(this.state.config.yMin, this.state.config.yMax, this.state.config.gY);\n    this.plotStyle.axisColor = get(this.plotStyle.axisColor, '#000000');\n    this.plotStyle.gridColor = get(this.plotStyle.gridColor, '#b0b0b0');\n\n    let startValue = Math.ceil(this.state.config.xMin / xF) * xF;\n    let number = Math.round(Math.floor(xDiff / xF)) + 1;\n    let axisPosition;\n    if (this.state.config.yMin < 0 && this.state.config.yMax > 0) {\n      axisPosition = height + this.state.config.yMin * yPixPerUnit + 12;\n    } else {\n      axisPosition = height - 12;\n    }\n    context.strokeStyle = this.plotStyle.gridColor;\n    for (let i = 0; i < number; i++) {\n      if (Math.abs(startValue) < xF * 0.5) {\n        context.strokeStyle = this.plotStyle.axisColor;\n      }\n      const position = Math.round((startValue - this.state.config.xMin) * xPixPerUnit);\n      this.drawLine(context, position, 0, position, height);\n      context.fillStyle = this.plotStyle.axisColor;\n      const text = Math.round(startValue * 100) / 100;\n      context.fillText(text + '', position + 4, axisPosition);\n      context.strokeStyle = this.plotStyle.gridColor;\n      startValue += xF;\n    }\n\n    startValue = Math.ceil(this.state.config.yMin / yF) * yF;\n    number = Math.round(Math.floor(yDiff / yF)) + 1;\n    if (this.state.config.xMin < 0 && this.state.config.xMax > 0) {\n      axisPosition = -this.state.config.xMin * xPixPerUnit + 5;\n    } else {\n      axisPosition = 5;\n    }\n    context.strokeStyle = this.plotStyle.gridColor;\n    for (let i = 0; i < number; i++) {\n      if (Math.abs(startValue) < yF * 0.5) {\n        context.strokeStyle = this.plotStyle.axisColor;\n      }\n      const position = height - Math.round((startValue - this.state.config.yMin) * yPixPerUnit);\n      this.drawLine(context, 0, position, width, position);\n      let axisVal = Math.round(startValue * 100) / 100;\n      if (axisVal !== 0) {\n        context.fillStyle = this.plotStyle.axisColor;\n        const text = axisVal;\n        context.fillText(text + '', axisPosition, position - 4);\n      }\n      context.strokeStyle = this.plotStyle.gridColor;\n      startValue += yF;\n    }\n  }\n  functionRenderer(context: CanvasRenderingContext2D | OffscreenCanvasRenderingContext2D, width: number, height: number) {\n    if (this.state.points.length <= 0) return;\n    context.clearRect(0, 0, width, height);\n    context.strokeStyle = get(this.plotStyle.plotColor, '#000');\n    context.lineWidth = 2;\n    context.beginPath();\n    let startX = this.xCoordToPix(this.state.config, width, this.state.points[0].x);\n    let startY = this.yCoordToPix(this.state.config, height, this.state.points[0].y);\n    context.moveTo(startX, startY);\n    for (let i = 1; i < this.state.points.length; i += 1) {\n      const x = this.xCoordToPix(this.state.config, width, this.state.points[i].x);\n      const y = this.yCoordToPix(this.state.config, height, this.state.points[i].y);\n      context.lineTo(x, y);\n    }\n    context.stroke();\n  }\n  setupUI(height: number) {\n    this.display = this.createDisplay(height, [\n      { auto: true, renderer: (context, width, height) => this.gridRenderer(context, width, height) },\n      { auto: false }\n    ]);\n    this.polarToggle = this.createToggle({ propName: 'polar', height: 10, style: { grow: .1 } });\n    this.ui.append([\n      this.display,\n      this.createHozLayout([this.createLabel('Polar ?', { style: { grow: .2 } }), this.polarToggle], { style: { spacing: 5 } })\n    ]);\n  }\n}\n\nexport interface PlotStyle {\n  axisColor?: string, gridColor?: string, plotColor?: string\n}\n","import { Flow } from \"../../core/flow\";\nimport { Vector } from \"../../core/vector\";\nimport { NodeCreatorOptions } from \"../../common/interfaces\";\nimport { Color } from \"../../core/color\";\nimport { Node } from \"../../core/node\";\nimport { InputType, DisplayStyle } from \"../../ui/index\";\n\nexport class LineChartMini extends Node {\n\n  static DefaultState = { size: 10 };\n\n  constructor(flow: Flow, height: number, colors: string[], displayStyle: DisplayStyle, options: NodeCreatorOptions = {}) {\n    super(flow, options.name || 'Line Chart Mini', options.position || new Vector(50, 50), options.width || 150,\n      [{ name: 'data', dataType: 'array' }], [],\n      {\n        state: options.state ? { ...LineChartMini.DefaultState, ...options.state } : LineChartMini.DefaultState,\n        style: options.style || { rowHeight: 10 },\n        terminalStyle: options.terminalStyle || {}\n      }\n    );\n\n    this.setupUI(height, colors, displayStyle);\n  }\n\n  setupUI(height: number, colors: string[], displayStyle: DisplayStyle) {\n    let display = this.createDisplay(height, [{\n      auto: true,\n      renderer: (context, wdth, hght) => {\n        let data = this.getInputs();\n        if (!data || !data[0]) return true;\n        data[0].forEach((input: number[], index: number) => {\n          if (!input) return;\n          let spacing = Number((wdth / (this.state.size - 1)).toFixed(2));\n          context.strokeStyle = colors[index] || Color.Random().rgbaCSSString;\n          context.lineWidth = 2;\n          context.beginPath();\n          context.moveTo(0, (1 - input[0]) * hght);\n          for (let i = 1; i < input.length; i += 1) context.lineTo(i * spacing, (1 - input[i]) * hght);\n          context.stroke();\n        });\n        return true;\n      }\n    }], { style: displayStyle ? displayStyle : {} });\n    this.ui.append(display);\n    let sizeInput = this.createInput({ propName: 'size', input: true, output: true, height: 20, style: { type: InputType.Number, grow: .5 } });\n    this.ui.append(this.createHozLayout([\n      this.createLabel('Size'),\n      sizeInput\n    ], { style: { spacing: 20 } }));\n  }\n}\n","/*Copyright (c) 2012 DinahMoe AB & Oskar Eriksson\n\n  Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation\n  files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy,\n  modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software\n  is furnished to do so, subject to the following conditions:\n\n  The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n\n  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n  DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE\n  OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n*/\n\nvar userContext,\n  userInstance,\n  pipe = function (param, val) {\n    param.value = val;\n  },\n  Super = Object.create(null, {\n    activate: {\n      writable: true,\n      value: function (doActivate) {\n        if (doActivate) {\n          this.input.disconnect();\n          this.input.connect(this.activateNode);\n          if (this.activateCallback) {\n            this.activateCallback(doActivate);\n          }\n        } else {\n          this.input.disconnect();\n          this.input.connect(this.output);\n        }\n      }\n    },\n    bypass: {\n      get: function () {\n        return this._bypass;\n      },\n      set: function (value) {\n        if (this._lastBypassValue === value) {\n          return;\n        }\n        this._bypass = value;\n        this.activate(!value);\n        this._lastBypassValue = value;\n      }\n    },\n    connect: {\n      value: function (target) {\n        this.output.connect(target);\n      }\n    },\n    disconnect: {\n      value: function (target) {\n        this.output.disconnect(target);\n      }\n    },\n    connectInOrder: {\n      value: function (nodeArray) {\n        var i = nodeArray.length - 1;\n        while (i--) {\n          if (!nodeArray[i].connect) {\n            return console.error(\"AudioNode.connectInOrder: TypeError: Not an AudioNode.\", nodeArray[i]);\n          }\n          if (nodeArray[i + 1].input) {\n            nodeArray[i].connect(nodeArray[i + 1].input);\n          } else {\n            nodeArray[i].connect(nodeArray[i + 1]);\n          }\n        }\n      }\n    },\n    getDefaults: {\n      value: function () {\n        var result = {};\n        for (var key in this.defaults) {\n          result[key] = this.defaults[key].value;\n        }\n        return result;\n      }\n    },\n    automate: {\n      value: function (property, value, duration, startTime) {\n        var start = startTime ? ~~(startTime / 1000) : userContext.currentTime,\n          dur = duration ? ~~(duration / 1000) : 0,\n          _is = this.defaults[property],\n          param = this[property],\n          method;\n\n        if (param) {\n          if (_is.automatable) {\n            if (!duration) {\n              method = \"setValueAtTime\";\n            } else {\n              method = \"linearRampToValueAtTime\";\n              param.cancelScheduledValues(start);\n              param.setValueAtTime(param.value, start);\n            }\n            param[method](value, dur + start);\n          } else {\n            param = value;\n          }\n        } else {\n          console.error(\"Invalid Property for \" + this.name);\n        }\n      }\n    }\n  }),\n  FLOAT = \"float\",\n  BOOLEAN = \"boolean\",\n  STRING = \"string\",\n  INT = \"int\";\n\nif (typeof module !== \"undefined\" && module.exports) {\n  module.exports = Tuna;\n} else if (typeof define === \"function\") {\n  window.define(\"Tuna\", definition);\n} else {\n  window.Tuna = Tuna;\n}\n\nfunction definition() {\n  return Tuna;\n}\n\nfunction Tuna(context) {\n  if (!(this instanceof Tuna)) {\n    return new Tuna(context);\n  }\n\n  var _window = typeof window === \"undefined\" ? {} : window;\n\n  if (!_window.AudioContext) {\n    _window.AudioContext = _window.webkitAudioContext;\n  }\n  if (!context) {\n    console.log(\"tuna.js: Missing audio context! Creating a new context for you.\");\n    context = _window.AudioContext && (new _window.AudioContext());\n  }\n  if (!context) {\n    throw new Error(\"Tuna cannot initialize because this environment does not support web audio.\");\n  }\n  connectify(context);\n  userContext = context;\n  userInstance = this;\n}\n\nfunction connectify(context) {\n  if (context.__connectified__ === true) return;\n\n  var gain = context.createGain(),\n    proto = Object.getPrototypeOf(Object.getPrototypeOf(gain)),\n    oconnect = proto.connect;\n\n  proto.connect = shimConnect;\n  context.__connectified__ = true; // Prevent overriding connect more than once\n\n  function shimConnect() {\n    var node = arguments[0];\n    arguments[0] = Super.isPrototypeOf ? (Super.isPrototypeOf(node) ? node.input : node) : (node.input || node);\n    oconnect.apply(this, arguments);\n    return node;\n  }\n}\n\nfunction dbToWAVolume(db) {\n  return Math.max(0, Math.round(100 * Math.pow(2, db / 6)) / 100);\n}\n\nfunction fmod(x, y) {\n  // http://kevin.vanzonneveld.net\n  // *     example 1: fmod(5.7, 1.3);\n  // *     returns 1: 0.5\n  var tmp, tmp2, p = 0,\n    pY = 0,\n    l = 0.0,\n    l2 = 0.0;\n\n  tmp = x.toExponential().match(/^.\\.?(.*)e(.+)$/);\n  p = parseInt(tmp[2], 10) - (tmp[1] + \"\").length;\n  tmp = y.toExponential().match(/^.\\.?(.*)e(.+)$/);\n  pY = parseInt(tmp[2], 10) - (tmp[1] + \"\").length;\n\n  if (pY > p) {\n    p = pY;\n  }\n\n  tmp2 = (x % y);\n\n  if (p < -100 || p > 20) {\n    // toFixed will give an out of bound error so we fix it like this:\n    l = Math.round(Math.log(tmp2) / Math.log(10));\n    l2 = Math.pow(10, l);\n\n    return (tmp2 / l2).toFixed(l - p) * l2;\n  } else {\n    return parseFloat(tmp2.toFixed(-p));\n  }\n}\n\nfunction sign(x) {\n  if (x === 0) {\n    return 1;\n  } else {\n    return Math.abs(x) / x;\n  }\n}\n\nfunction tanh(n) {\n  return (Math.exp(n) - Math.exp(-n)) / (Math.exp(n) + Math.exp(-n));\n}\n\nfunction initValue(userVal, defaultVal) {\n  return userVal === undefined ? defaultVal : userVal;\n}\n\nTuna.prototype.Bitcrusher = function (properties) {\n  if (!properties) {\n    properties = this.getDefaults();\n  }\n  this.bufferSize = properties.bufferSize || this.defaults.bufferSize.value;\n\n  this.input = userContext.createGain();\n  this.activateNode = userContext.createGain();\n  this.processor = userContext.createScriptProcessor(this.bufferSize, 1, 1);\n  this.output = userContext.createGain();\n\n  this.activateNode.connect(this.processor);\n  this.processor.connect(this.output);\n\n  var phaser = 0,\n    last = 0,\n    input, output, step, i, length;\n  this.processor.onaudioprocess = function (e) {\n    input = e.inputBuffer.getChannelData(0),\n      output = e.outputBuffer.getChannelData(0),\n      step = Math.pow(1 / 2, this.bits);\n    length = input.length;\n    for (i = 0; i < length; i++) {\n      phaser += this.normfreq;\n      if (phaser >= 1.0) {\n        phaser -= 1.0;\n        last = step * Math.floor(input[i] / step + 0.5);\n      }\n      output[i] = last;\n    }\n  };\n\n  this.bits = properties.bits || this.defaults.bits.value;\n  this.normfreq = initValue(properties.normfreq, this.defaults.normfreq.value);\n  this.bypass = properties.bypass || this.defaults.bypass.value;\n};\nTuna.prototype.Bitcrusher.prototype = Object.create(Super, {\n  name: {\n    value: \"Bitcrusher\"\n  },\n  defaults: {\n    writable: true,\n    value: {\n      bits: {\n        value: 4,\n        min: 1,\n        max: 16,\n        automatable: false,\n        type: INT\n      },\n      bufferSize: {\n        value: 4096,\n        min: 256,\n        max: 16384,\n        automatable: false,\n        type: INT\n      },\n      bypass: {\n        value: false,\n        automatable: false,\n        type: BOOLEAN\n      },\n      normfreq: {\n        value: 0.1,\n        min: 0.0001,\n        max: 1.0,\n        automatable: false,\n        type: FLOAT\n      }\n    }\n  },\n  bits: {\n    enumerable: true,\n    get: function () {\n      return this.processor.bits;\n    },\n    set: function (value) {\n      this.processor.bits = value;\n    }\n  },\n  normfreq: {\n    enumerable: true,\n    get: function () {\n      return this.processor.normfreq;\n    },\n    set: function (value) {\n      this.processor.normfreq = value;\n    }\n  }\n});\n\nTuna.prototype.Cabinet = function (properties) {\n  if (!properties) {\n    properties = this.getDefaults();\n  }\n  this.input = userContext.createGain();\n  this.activateNode = userContext.createGain();\n  this.convolver = this.newConvolver(properties.impulsePath || \"../impulses/impulse_guitar.wav\");\n  this.makeupNode = userContext.createGain();\n  this.output = userContext.createGain();\n\n  this.activateNode.connect(this.convolver.input);\n  this.convolver.output.connect(this.makeupNode);\n  this.makeupNode.connect(this.output);\n  //don't use makeupGain setter at init to avoid smoothing\n  this.makeupNode.gain.value = initValue(properties.makeupGain, this.defaults.makeupGain.value);\n  this.bypass = properties.bypass || this.defaults.bypass.value;\n};\nTuna.prototype.Cabinet.prototype = Object.create(Super, {\n  name: {\n    value: \"Cabinet\"\n  },\n  defaults: {\n    writable: true,\n    value: {\n      makeupGain: {\n        value: 1,\n        min: 0,\n        max: 20,\n        automatable: true,\n        type: FLOAT\n      },\n      bypass: {\n        value: false,\n        automatable: false,\n        type: BOOLEAN\n      }\n    }\n  },\n  makeupGain: {\n    enumerable: true,\n    get: function () {\n      return this.makeupNode.gain;\n    },\n    set: function (value) {\n      this.makeupNode.gain.setTargetAtTime(value, userContext.currentTime, 0.01);\n    }\n  },\n  newConvolver: {\n    value: function (impulsePath) {\n      return new userInstance.Convolver({\n        impulse: impulsePath,\n        dryLevel: 0,\n        wetLevel: 1\n      });\n    }\n  }\n});\n\nTuna.prototype.Chorus = function (properties) {\n  if (!properties) {\n    properties = this.getDefaults();\n  }\n  this.input = userContext.createGain();\n  this.attenuator = this.activateNode = userContext.createGain();\n  this.splitter = userContext.createChannelSplitter(2);\n  this.delayL = userContext.createDelay();\n  this.delayR = userContext.createDelay();\n  this.feedbackGainNodeLR = userContext.createGain();\n  this.feedbackGainNodeRL = userContext.createGain();\n  this.merger = userContext.createChannelMerger(2);\n  this.output = userContext.createGain();\n  this.delayL.delayTime = 0;\n  this.delayR.delayTime = 0;\n\n  this.lfoL = new userInstance.LFO({\n    target: this.delayL.delayTime,\n    callback: pipe\n  });\n  this.lfoR = new userInstance.LFO({\n    target: this.delayR.delayTime,\n    callback: pipe\n  });\n\n  this.input.connect(this.attenuator);\n  this.attenuator.connect(this.output);\n  this.attenuator.connect(this.splitter);\n  this.splitter.connect(this.delayL, 0);\n  this.splitter.connect(this.delayR, 1);\n  this.delayL.connect(this.feedbackGainNodeLR);\n  this.delayR.connect(this.feedbackGainNodeRL);\n  this.feedbackGainNodeLR.connect(this.delayR);\n  this.feedbackGainNodeRL.connect(this.delayL);\n  this.delayL.connect(this.merger, 0, 0);\n  this.delayR.connect(this.merger, 0, 1);\n  this.merger.connect(this.output);\n\n  this.feedback = initValue(properties.feedback, this.defaults.feedback.value);\n  this.rate = initValue(properties.rate, this.defaults.rate.value);\n  this.delay = initValue(properties.delay, this.defaults.delay.value);\n  this.depth = initValue(properties.depth, this.defaults.depth.value);\n  this.lfoR.phase = Math.PI / 2;\n  this.attenuator.gain.value = 0.6934; // 1 / (10 ^ (((20 * log10(3)) / 3) / 20))\n  this.lfoL.activate(true);\n  this.lfoR.activate(true);\n  this.bypass = properties.bypass || this.defaults.bypass.value;\n};\nTuna.prototype.Chorus.prototype = Object.create(Super, {\n  name: {\n    value: \"Chorus\"\n  },\n  defaults: {\n    writable: true,\n    value: {\n      feedback: {\n        value: 0.4,\n        min: 0,\n        max: 0.95,\n        automatable: false,\n        type: FLOAT\n      },\n      delay: {\n        value: 0.0045,\n        min: 0,\n        max: 1,\n        automatable: false,\n        type: FLOAT\n      },\n      depth: {\n        value: 0.7,\n        min: 0,\n        max: 1,\n        automatable: false,\n        type: FLOAT\n      },\n      rate: {\n        value: 1.5,\n        min: 0,\n        max: 8,\n        automatable: false,\n        type: FLOAT\n      },\n      bypass: {\n        value: false,\n        automatable: false,\n        type: BOOLEAN\n      }\n    }\n  },\n  delay: {\n    enumerable: true,\n    get: function () {\n      return this._delay;\n    },\n    set: function (value) {\n      this._delay = 0.0002 * (Math.pow(10, value) * 2);\n      this.lfoL.offset = this._delay;\n      this.lfoR.offset = this._delay;\n      this._depth = this._depth;\n    }\n  },\n  depth: {\n    enumerable: true,\n    get: function () {\n      return this._depth;\n    },\n    set: function (value) {\n      this._depth = value;\n      this.lfoL.oscillation = this._depth * this._delay;\n      this.lfoR.oscillation = this._depth * this._delay;\n    }\n  },\n  feedback: {\n    enumerable: true,\n    get: function () {\n      return this._feedback;\n    },\n    set: function (value) {\n      this._feedback = value;\n      this.feedbackGainNodeLR.gain.setTargetAtTime(this._feedback, userContext.currentTime, 0.01);\n      this.feedbackGainNodeRL.gain.setTargetAtTime(this._feedback, userContext.currentTime, 0.01);\n    }\n  },\n  rate: {\n    enumerable: true,\n    get: function () {\n      return this._rate;\n    },\n    set: function (value) {\n      this._rate = value;\n      this.lfoL.frequency = this._rate;\n      this.lfoR.frequency = this._rate;\n    }\n  }\n});\n\nTuna.prototype.Compressor = function (properties) {\n  if (!properties) {\n    properties = this.getDefaults();\n  }\n  this.input = userContext.createGain();\n  this.compNode = this.activateNode = userContext.createDynamicsCompressor();\n  this.makeupNode = userContext.createGain();\n  this.output = userContext.createGain();\n\n  this.compNode.connect(this.makeupNode);\n  this.makeupNode.connect(this.output);\n\n  this.automakeup = initValue(properties.automakeup, this.defaults.automakeup.value);\n\n  //don't use makeupGain setter at initialization to avoid smoothing\n  if (this.automakeup) {\n    this.makeupNode.gain.value = dbToWAVolume(this.computeMakeup());\n  } else {\n    this.makeupNode.gain.value = dbToWAVolume(initValue(properties.makeupGain, this.defaults.makeupGain.value));\n  }\n  this.threshold = initValue(properties.threshold, this.defaults.threshold.value);\n  this.release = initValue(properties.release, this.defaults.release.value);\n  this.attack = initValue(properties.attack, this.defaults.attack.value);\n  this.ratio = properties.ratio || this.defaults.ratio.value;\n  this.knee = initValue(properties.knee, this.defaults.knee.value);\n  this.bypass = properties.bypass || this.defaults.bypass.value;\n};\nTuna.prototype.Compressor.prototype = Object.create(Super, {\n  name: {\n    value: \"Compressor\"\n  },\n  defaults: {\n    writable: true,\n    value: {\n      threshold: {\n        value: -20,\n        min: -60,\n        max: 0,\n        automatable: true,\n        type: FLOAT\n      },\n      release: {\n        value: 250,\n        min: 10,\n        max: 2000,\n        automatable: true,\n        type: FLOAT\n      },\n      makeupGain: {\n        value: 1,\n        min: 1,\n        max: 100,\n        automatable: true,\n        type: FLOAT\n      },\n      attack: {\n        value: 1,\n        min: 0,\n        max: 1000,\n        automatable: true,\n        type: FLOAT\n      },\n      ratio: {\n        value: 4,\n        min: 1,\n        max: 50,\n        automatable: true,\n        type: FLOAT\n      },\n      knee: {\n        value: 5,\n        min: 0,\n        max: 40,\n        automatable: true,\n        type: FLOAT\n      },\n      automakeup: {\n        value: false,\n        automatable: false,\n        type: BOOLEAN\n      },\n      bypass: {\n        value: false,\n        automatable: false,\n        type: BOOLEAN\n      }\n    }\n  },\n  computeMakeup: {\n    value: function () {\n      var magicCoefficient = 4, // raise me if the output is too hot\n        c = this.compNode;\n      return -(c.threshold.value - c.threshold.value / c.ratio.value) / magicCoefficient;\n    }\n  },\n  automakeup: {\n    enumerable: true,\n    get: function () {\n      return this._automakeup;\n    },\n    set: function (value) {\n      this._automakeup = value;\n      if (this._automakeup) this.makeupGain = this.computeMakeup();\n    }\n  },\n  threshold: {\n    enumerable: true,\n    get: function () {\n      return this.compNode.threshold;\n    },\n    set: function (value) {\n      this.compNode.threshold.value = value;\n      if (this._automakeup) this.makeupGain = this.computeMakeup();\n    }\n  },\n  ratio: {\n    enumerable: true,\n    get: function () {\n      return this.compNode.ratio;\n    },\n    set: function (value) {\n      this.compNode.ratio.value = value;\n      if (this._automakeup) this.makeupGain = this.computeMakeup();\n    }\n  },\n  knee: {\n    enumerable: true,\n    get: function () {\n      return this.compNode.knee;\n    },\n    set: function (value) {\n      this.compNode.knee.value = value;\n      if (this._automakeup) this.makeupGain = this.computeMakeup();\n    }\n  },\n  attack: {\n    enumerable: true,\n    get: function () {\n      return this.compNode.attack;\n    },\n    set: function (value) {\n      this.compNode.attack.value = value / 1000;\n    }\n  },\n  release: {\n    enumerable: true,\n    get: function () {\n      return this.compNode.release;\n    },\n    set: function (value) {\n      this.compNode.release.value = value / 1000;\n    }\n  },\n  makeupGain: {\n    enumerable: true,\n    get: function () {\n      return this.makeupNode.gain;\n    },\n    set: function (value) {\n      this.makeupNode.gain.setTargetAtTime(dbToWAVolume(value), userContext.currentTime, 0.01);\n    }\n  }\n});\n\nTuna.prototype.Convolver = function (properties) {\n  if (!properties) {\n    properties = this.getDefaults();\n  }\n  this.input = userContext.createGain();\n  this.activateNode = userContext.createGain();\n  this.convolver = userContext.createConvolver();\n  this.dry = userContext.createGain();\n  this.filterLow = userContext.createBiquadFilter();\n  this.filterHigh = userContext.createBiquadFilter();\n  this.wet = userContext.createGain();\n  this.output = userContext.createGain();\n\n  this.activateNode.connect(this.filterLow);\n  this.activateNode.connect(this.dry);\n  this.filterLow.connect(this.filterHigh);\n  this.filterHigh.connect(this.convolver);\n  this.convolver.connect(this.wet);\n  this.wet.connect(this.output);\n  this.dry.connect(this.output);\n\n  //don't use setters at init to avoid smoothing\n  this.dry.gain.value = initValue(properties.dryLevel, this.defaults.dryLevel.value);\n  this.wet.gain.value = initValue(properties.wetLevel, this.defaults.wetLevel.value);\n  this.filterHigh.frequency.value = properties.highCut || this.defaults.highCut.value;\n  this.filterLow.frequency.value = properties.lowCut || this.defaults.lowCut.value;\n  this.output.gain.value = initValue(properties.level, this.defaults.level.value);\n  this.filterHigh.type = \"lowpass\";\n  this.filterLow.type = \"highpass\";\n  this.buffer = properties.impulse || \"../impulses/ir_rev_short.wav\";\n  this.bypass = properties.bypass || this.defaults.bypass.value;\n};\nTuna.prototype.Convolver.prototype = Object.create(Super, {\n  name: {\n    value: \"Convolver\"\n  },\n  defaults: {\n    writable: true,\n    value: {\n      highCut: {\n        value: 22050,\n        min: 20,\n        max: 22050,\n        automatable: true,\n        type: FLOAT\n      },\n      lowCut: {\n        value: 20,\n        min: 20,\n        max: 22050,\n        automatable: true,\n        type: FLOAT\n      },\n      dryLevel: {\n        value: 1,\n        min: 0,\n        max: 1,\n        automatable: true,\n        type: FLOAT\n      },\n      wetLevel: {\n        value: 1,\n        min: 0,\n        max: 1,\n        automatable: true,\n        type: FLOAT\n      },\n      level: {\n        value: 1,\n        min: 0,\n        max: 1,\n        automatable: true,\n        type: FLOAT\n      },\n      bypass: {\n        value: false,\n        automatable: false,\n        type: BOOLEAN\n      }\n    }\n  },\n  lowCut: {\n    get: function () {\n      return this.filterLow.frequency;\n    },\n    set: function (value) {\n      this.filterLow.frequency.setTargetAtTime(value, userContext.currentTime, 0.01);\n    }\n  },\n  highCut: {\n    get: function () {\n      return this.filterHigh.frequency;\n    },\n    set: function (value) {\n      this.filterHigh.frequency.setTargetAtTime(value, userContext.currentTime, 0.01);\n    }\n  },\n  level: {\n    get: function () {\n      return this.output.gain;\n    },\n    set: function (value) {\n      this.output.gain.setTargetAtTime(value, userContext.currentTime, 0.01);\n    }\n  },\n  dryLevel: {\n    get: function () {\n      return this.dry.gain;\n    },\n    set: function (value) {\n      this.dry.gain.setTargetAtTime(value, userContext.currentTime, 0.01);\n    }\n  },\n  wetLevel: {\n    get: function () {\n      return this.wet.gain;\n    },\n    set: function (value) {\n      this.wet.gain.setTargetAtTime(value, userContext.currentTime, 0.01);\n    }\n  },\n  buffer: {\n    enumerable: false,\n    get: function () {\n      return this.convolver.buffer;\n    },\n    set: function (impulse) {\n      var convolver = this.convolver,\n        xhr = new XMLHttpRequest();\n      if (!impulse) {\n        console.log(\"Tuna.Convolver.setBuffer: Missing impulse path!\");\n        return;\n      }\n      xhr.open(\"GET\", impulse, true);\n      xhr.responseType = \"arraybuffer\";\n      xhr.onreadystatechange = function () {\n        if (xhr.readyState === 4) {\n          if (xhr.status < 300 && xhr.status > 199 || xhr.status === 302) {\n            userContext.decodeAudioData(xhr.response, function (buffer) {\n              convolver.buffer = buffer;\n            }, function (e) {\n              if (e) console.log(\"Tuna.Convolver.setBuffer: Error decoding data\" + e);\n            });\n          }\n        }\n      };\n      xhr.send(null);\n    }\n  }\n});\n\nTuna.prototype.Delay = function (properties) {\n  if (!properties) {\n    properties = this.getDefaults();\n  }\n  this.input = userContext.createGain();\n  this.activateNode = userContext.createGain();\n  this.dry = userContext.createGain();\n  this.wet = userContext.createGain();\n  this.filter = userContext.createBiquadFilter();\n  this.delay = userContext.createDelay(10);\n  this.feedbackNode = userContext.createGain();\n  this.output = userContext.createGain();\n\n  this.activateNode.connect(this.delay);\n  this.activateNode.connect(this.dry);\n  this.delay.connect(this.filter);\n  this.filter.connect(this.feedbackNode);\n  this.feedbackNode.connect(this.delay);\n  this.feedbackNode.connect(this.wet);\n  this.wet.connect(this.output);\n  this.dry.connect(this.output);\n\n  this.delayTime = properties.delayTime || this.defaults.delayTime.value;\n  //don't use setters at init to avoid smoothing\n  this.feedbackNode.gain.value = initValue(properties.feedback, this.defaults.feedback.value);\n  this.wet.gain.value = initValue(properties.wetLevel, this.defaults.wetLevel.value);\n  this.dry.gain.value = initValue(properties.dryLevel, this.defaults.dryLevel.value);\n  this.filter.frequency.value = properties.cutoff || this.defaults.cutoff.value;\n  this.filter.type = \"lowpass\";\n  this.bypass = properties.bypass || this.defaults.bypass.value;\n};\nTuna.prototype.Delay.prototype = Object.create(Super, {\n  name: {\n    value: \"Delay\"\n  },\n  defaults: {\n    writable: true,\n    value: {\n      delayTime: {\n        value: 100,\n        min: 20,\n        max: 1000,\n        automatable: false,\n        type: FLOAT\n      },\n      feedback: {\n        value: 0.45,\n        min: 0,\n        max: 0.9,\n        automatable: true,\n        type: FLOAT\n      },\n      cutoff: {\n        value: 20000,\n        min: 20,\n        max: 20000,\n        automatable: true,\n        type: FLOAT\n      },\n      wetLevel: {\n        value: 0.5,\n        min: 0,\n        max: 1,\n        automatable: true,\n        type: FLOAT\n      },\n      dryLevel: {\n        value: 1,\n        min: 0,\n        max: 1,\n        automatable: true,\n        type: FLOAT\n      },\n      bypass: {\n        value: false,\n        automatable: false,\n        type: BOOLEAN\n      }\n    }\n  },\n  delayTime: {\n    enumerable: true,\n    get: function () {\n      return this.delay.delayTime;\n    },\n    set: function (value) {\n      this.delay.delayTime.value = value / 1000;\n    }\n  },\n  wetLevel: {\n    enumerable: true,\n    get: function () {\n      return this.wet.gain;\n    },\n    set: function (value) {\n      this.wet.gain.setTargetAtTime(value, userContext.currentTime, 0.01);\n    }\n  },\n  dryLevel: {\n    enumerable: true,\n    get: function () {\n      return this.dry.gain;\n    },\n    set: function (value) {\n      this.dry.gain.setTargetAtTime(value, userContext.currentTime, 0.01);\n    }\n  },\n  feedback: {\n    enumerable: true,\n    get: function () {\n      return this.feedbackNode.gain;\n    },\n    set: function (value) {\n      this.feedbackNode.gain.setTargetAtTime(value, userContext.currentTime, 0.01);\n    }\n  },\n  cutoff: {\n    enumerable: true,\n    get: function () {\n      return this.filter.frequency;\n    },\n    set: function (value) {\n      this.filter.frequency.setTargetAtTime(value, userContext.currentTime, 0.01);\n    }\n  }\n});\n\nTuna.prototype.Filter = function (properties) {\n  if (!properties) {\n    properties = this.getDefaults();\n  }\n  this.input = userContext.createGain();\n  this.activateNode = userContext.createGain();\n  this.filter = userContext.createBiquadFilter();\n  this.output = userContext.createGain();\n\n  this.activateNode.connect(this.filter);\n  this.filter.connect(this.output);\n\n  //don't use setters for freq and gain at init to avoid smoothing\n  this.filter.frequency.value = properties.frequency || this.defaults.frequency.value;\n  this.Q = properties.resonance || this.defaults.Q.value;\n  this.filterType = initValue(properties.filterType, this.defaults.filterType.value);\n  this.filter.gain.value = initValue(properties.gain, this.defaults.gain.value);\n  this.bypass = properties.bypass || this.defaults.bypass.value;\n};\nTuna.prototype.Filter.prototype = Object.create(Super, {\n  name: {\n    value: \"Filter\"\n  },\n  defaults: {\n    writable: true,\n    value: {\n      frequency: {\n        value: 800,\n        min: 20,\n        max: 22050,\n        automatable: true,\n        type: FLOAT\n      },\n      Q: {\n        value: 1,\n        min: 0.001,\n        max: 100,\n        automatable: true,\n        type: FLOAT\n      },\n      gain: {\n        value: 0,\n        min: -40,\n        max: 40,\n        automatable: true,\n        type: FLOAT\n      },\n      bypass: {\n        value: false,\n        automatable: false,\n        type: BOOLEAN\n      },\n      filterType: {\n        value: \"lowpass\",\n        automatable: false,\n        type: STRING\n      }\n    }\n  },\n  filterType: {\n    enumerable: true,\n    get: function () {\n      return this.filter.type;\n    },\n    set: function (value) {\n      this.filter.type = value;\n    }\n  },\n  Q: {\n    enumerable: true,\n    get: function () {\n      return this.filter.Q;\n    },\n    set: function (value) {\n      this.filter.Q.value = value;\n    }\n  },\n  gain: {\n    enumerable: true,\n    get: function () {\n      return this.filter.gain;\n    },\n    set: function (value) {\n      this.filter.gain.setTargetAtTime(value, userContext.currentTime, 0.01);\n    }\n  },\n  frequency: {\n    enumerable: true,\n    get: function () {\n      return this.filter.frequency;\n    },\n    set: function (value) {\n      this.filter.frequency.setTargetAtTime(value, userContext.currentTime, 0.01);\n    }\n  }\n});\n\nTuna.prototype.Gain = function (properties) {\n  if (!properties) {\n    properties = this.getDefaults();\n  }\n\n  this.input = userContext.createGain();\n  this.activateNode = userContext.createGain();\n  this.gainNode = userContext.createGain();\n  this.output = userContext.createGain();\n\n  this.activateNode.connect(this.gainNode);\n  this.gainNode.connect(this.output);\n\n  //don't use setter at init to avoid smoothing\n  this.gainNode.gain.value = initValue(properties.gain, this.defaults.gain.value);\n  this.bypass = properties.bypass || this.defaults.bypass.value;\n};\nTuna.prototype.Gain.prototype = Object.create(Super, {\n  name: {\n    value: \"Gain\"\n  },\n  defaults: {\n    writable: true,\n    value: {\n      bypass: {\n        value: false,\n        automatable: false,\n        type: BOOLEAN\n      },\n      gain: {\n        value: 1.0,\n        automatable: true,\n        type: FLOAT\n      }\n    }\n  },\n  gain: {\n    enumerable: true,\n    get: function () {\n      return this.gainNode.gain;\n    },\n    set: function (value) {\n      this.gainNode.gain.setTargetAtTime(value, userContext.currentTime, 0.01);\n    }\n  }\n});\n\nTuna.prototype.MoogFilter = function (properties) {\n  if (!properties) {\n    properties = this.getDefaults();\n  }\n  this.bufferSize = properties.bufferSize || this.defaults.bufferSize.value;\n\n  this.input = userContext.createGain();\n  this.activateNode = userContext.createGain();\n  this.processor = userContext.createScriptProcessor(this.bufferSize, 1, 1);\n  this.output = userContext.createGain();\n\n  this.activateNode.connect(this.processor);\n  this.processor.connect(this.output);\n\n  var in1, in2, in3, in4, out1, out2, out3, out4;\n  in1 = in2 = in3 = in4 = out1 = out2 = out3 = out4 = 0.0;\n  var input, output, f, fb, i, length, inputFactor;\n  this.processor.onaudioprocess = function (e) {\n    input = e.inputBuffer.getChannelData(0);\n    output = e.outputBuffer.getChannelData(0);\n    f = this.cutoff * 1.16;\n    inputFactor = 0.35013 * (f * f) * (f * f);\n    fb = this.resonance * (1.0 - 0.15 * f * f);\n    length = input.length;\n    for (i = 0; i < length; i++) {\n      input[i] -= out4 * fb;\n      input[i] *= inputFactor;\n      out1 = input[i] + 0.3 * in1 + (1 - f) * out1; // Pole 1\n      in1 = input[i];\n      out2 = out1 + 0.3 * in2 + (1 - f) * out2; // Pole 2\n      in2 = out1;\n      out3 = out2 + 0.3 * in3 + (1 - f) * out3; // Pole 3\n      in3 = out2;\n      out4 = out3 + 0.3 * in4 + (1 - f) * out4; // Pole 4\n      in4 = out3;\n      output[i] = out4;\n    }\n  };\n\n  this.cutoff = initValue(properties.cutoff, this.defaults.cutoff.value);\n  this.resonance = initValue(properties.resonance, this.defaults.resonance.value);\n  this.bypass = properties.bypass || this.defaults.bypass.value;\n};\nTuna.prototype.MoogFilter.prototype = Object.create(Super, {\n  name: {\n    value: \"MoogFilter\"\n  },\n  defaults: {\n    writable: true,\n    value: {\n      bufferSize: {\n        value: 4096,\n        min: 256,\n        max: 16384,\n        automatable: false,\n        type: INT\n      },\n      bypass: {\n        value: false,\n        automatable: false,\n        type: BOOLEAN\n      },\n      cutoff: {\n        value: 0.065,\n        min: 0.0001,\n        max: 1.0,\n        automatable: false,\n        type: FLOAT\n      },\n      resonance: {\n        value: 3.5,\n        min: 0.0,\n        max: 4.0,\n        automatable: false,\n        type: FLOAT\n      }\n    }\n  },\n  cutoff: {\n    enumerable: true,\n    get: function () {\n      return this.processor.cutoff;\n    },\n    set: function (value) {\n      this.processor.cutoff = value;\n    }\n  },\n  resonance: {\n    enumerable: true,\n    get: function () {\n      return this.processor.resonance;\n    },\n    set: function (value) {\n      this.processor.resonance = value;\n    }\n  }\n});\n\nTuna.prototype.Overdrive = function (properties) {\n  if (!properties) {\n    properties = this.getDefaults();\n  }\n  this.input = userContext.createGain();\n  this.activateNode = userContext.createGain();\n  this.inputDrive = userContext.createGain();\n  this.waveshaper = userContext.createWaveShaper();\n  this.outputDrive = userContext.createGain();\n  this.output = userContext.createGain();\n\n  this.activateNode.connect(this.inputDrive);\n  this.inputDrive.connect(this.waveshaper);\n  this.waveshaper.connect(this.outputDrive);\n  this.outputDrive.connect(this.output);\n\n  this.ws_table = new Float32Array(this.k_nSamples);\n  this.drive = initValue(properties.drive, this.defaults.drive.value);\n  this.outputGain = initValue(properties.outputGain, this.defaults.outputGain.value);\n  this.curveAmount = initValue(properties.curveAmount, this.defaults.curveAmount.value);\n  this.algorithmIndex = initValue(properties.algorithmIndex, this.defaults.algorithmIndex.value);\n  this.bypass = properties.bypass || this.defaults.bypass.value;\n};\nTuna.prototype.Overdrive.prototype = Object.create(Super, {\n  name: {\n    value: \"Overdrive\"\n  },\n  defaults: {\n    writable: true,\n    value: {\n      drive: {\n        value: 0.197,\n        min: 0,\n        max: 1,\n        automatable: true,\n        type: FLOAT,\n        scaled: true\n      },\n      outputGain: {\n        value: -9.154,\n        min: -46,\n        max: 0,\n        automatable: true,\n        type: FLOAT,\n        scaled: true\n      },\n      curveAmount: {\n        value: 0.979,\n        min: 0,\n        max: 1,\n        automatable: false,\n        type: FLOAT\n      },\n      algorithmIndex: {\n        value: 0,\n        min: 0,\n        max: 5,\n        automatable: false,\n        type: INT\n      },\n      bypass: {\n        value: false,\n        automatable: false,\n        type: BOOLEAN\n      }\n    }\n  },\n  k_nSamples: {\n    value: 8192\n  },\n  drive: {\n    get: function () {\n      return this.inputDrive.gain;\n    },\n    set: function (value) {\n      this.inputDrive.gain.value = value;\n    }\n  },\n  curveAmount: {\n    get: function () {\n      return this._curveAmount;\n    },\n    set: function (value) {\n      this._curveAmount = value;\n      if (this._algorithmIndex === undefined) {\n        this._algorithmIndex = 0;\n      }\n      this.waveshaperAlgorithms[this._algorithmIndex](this._curveAmount, this.k_nSamples, this.ws_table);\n      this.waveshaper.curve = this.ws_table;\n    }\n  },\n  outputGain: {\n    get: function () {\n      return this.outputDrive.gain;\n    },\n    set: function (value) {\n      this._outputGain = dbToWAVolume(value);\n      this.outputDrive.gain.setValueAtTime(this._outputGain, userContext.currentTime, 0.01);\n    }\n  },\n  algorithmIndex: {\n    get: function () {\n      return this._algorithmIndex;\n    },\n    set: function (value) {\n      this._algorithmIndex = value;\n      this.curveAmount = this._curveAmount;\n    }\n  },\n  waveshaperAlgorithms: {\n    value: [\n      function (amount, n_samples, ws_table) {\n        amount = Math.min(amount, 0.9999);\n        var k = 2 * amount / (1 - amount),\n          i, x;\n        for (i = 0; i < n_samples; i++) {\n          x = i * 2 / n_samples - 1;\n          ws_table[i] = (1 + k) * x / (1 + k * Math.abs(x));\n        }\n      },\n      function (amount, n_samples, ws_table) {\n        var i, x, y;\n        for (i = 0; i < n_samples; i++) {\n          x = i * 2 / n_samples - 1;\n          y = ((0.5 * Math.pow((x + 1.4), 2)) - 1) * (y >= 0 ? 5.8 : 1.2);\n          ws_table[i] = tanh(y);\n        }\n      },\n      function (amount, n_samples, ws_table) {\n        var i, x, y, a = 1 - amount;\n        for (i = 0; i < n_samples; i++) {\n          x = i * 2 / n_samples - 1;\n          y = x < 0 ? -Math.pow(Math.abs(x), a + 0.04) : Math.pow(x, a);\n          ws_table[i] = tanh(y * 2);\n        }\n      },\n      function (amount, n_samples, ws_table) {\n        var i, x, y, abx, a = 1 - amount > 0.99 ? 0.99 : 1 - amount;\n        for (i = 0; i < n_samples; i++) {\n          x = i * 2 / n_samples - 1;\n          abx = Math.abs(x);\n          if (abx < a) {\n            y = abx;\n          } else if (abx > a) {\n            y = a + (abx - a) / (1 + Math.pow((abx - a) / (1 - a), 2));\n          } else if (abx > 1) {\n            y = abx;\n          }\n          ws_table[i] = sign(x) * y * (1 / ((a + 1) / 2));\n        }\n      },\n      function (amount, n_samples, ws_table) { // fixed curve, amount doesn't do anything, the distortion is just from the drive\n        var i, x;\n        for (i = 0; i < n_samples; i++) {\n          x = i * 2 / n_samples - 1;\n          if (x < -0.08905) {\n            ws_table[i] = (-3 / 4) * (1 - (Math.pow((1 - (Math.abs(x) - 0.032857)), 12)) + (1 / 3) * (Math.abs(x) - 0.032847)) + 0.01;\n          } else if (x >= -0.08905 && x < 0.320018) {\n            ws_table[i] = (-6.153 * (x * x)) + 3.9375 * x;\n          } else {\n            ws_table[i] = 0.630035;\n          }\n        }\n      },\n      function (amount, n_samples, ws_table) {\n        var a = 2 + Math.round(amount * 14),\n          // we go from 2 to 16 bits, keep in mind for the UI\n          bits = Math.round(Math.pow(2, a - 1)),\n          // real number of quantization steps divided by 2\n          i, x;\n        for (i = 0; i < n_samples; i++) {\n          x = i * 2 / n_samples - 1;\n          ws_table[i] = Math.round(x * bits) / bits;\n        }\n      }\n    ]\n  }\n});\n\nTuna.prototype.Panner = function (properties) {\n  if (!properties) {\n    properties = this.getDefaults();\n  }\n\n  this.input = userContext.createGain();\n  this.activateNode = userContext.createGain();\n  this.panner = userContext.createStereoPanner();\n  this.output = userContext.createGain();\n\n  this.activateNode.connect(this.panner);\n  this.panner.connect(this.output);\n\n  this.pan = initValue(properties.pan, this.defaults.pan.value);\n  this.bypass = properties.bypass || this.defaults.bypass.value;\n};\nTuna.prototype.Panner.prototype = Object.create(Super, {\n  name: {\n    value: \"Panner\"\n  },\n  defaults: {\n    writable: true,\n    value: {\n      bypass: {\n        value: false,\n        automatable: false,\n        type: BOOLEAN\n      },\n      pan: {\n        value: 0.0,\n        min: -1.0,\n        max: 1.0,\n        automatable: true,\n        type: FLOAT\n      }\n    }\n  },\n  pan: {\n    enumerable: true,\n    get: function () {\n      return this.panner.pan;\n    },\n    set: function (value) {\n      this.panner.pan.value = value;\n    }\n  }\n});\n\nTuna.prototype.Phaser = function (properties) {\n  if (!properties) {\n    properties = this.getDefaults();\n  }\n  this.input = userContext.createGain();\n  this.splitter = this.activateNode = userContext.createChannelSplitter(2);\n  this.filtersL = [];\n  this.filtersR = [];\n  this.feedbackGainNodeL = userContext.createGain();\n  this.feedbackGainNodeR = userContext.createGain();\n  this.merger = userContext.createChannelMerger(2);\n  this.filteredSignal = userContext.createGain();\n  this.output = userContext.createGain();\n  this.lfoL = new userInstance.LFO({\n    target: this.filtersL,\n    callback: this.callback\n  });\n  this.lfoR = new userInstance.LFO({\n    target: this.filtersR,\n    callback: this.callback\n  });\n\n  var i = this.stage;\n  while (i--) {\n    this.filtersL[i] = userContext.createBiquadFilter();\n    this.filtersR[i] = userContext.createBiquadFilter();\n    this.filtersL[i].type = \"allpass\";\n    this.filtersR[i].type = \"allpass\";\n  }\n  this.input.connect(this.splitter);\n  this.input.connect(this.output);\n  this.splitter.connect(this.filtersL[0], 0, 0);\n  this.splitter.connect(this.filtersR[0], 1, 0);\n  this.connectInOrder(this.filtersL);\n  this.connectInOrder(this.filtersR);\n  this.filtersL[this.stage - 1].connect(this.feedbackGainNodeL);\n  this.filtersL[this.stage - 1].connect(this.merger, 0, 0);\n  this.filtersR[this.stage - 1].connect(this.feedbackGainNodeR);\n  this.filtersR[this.stage - 1].connect(this.merger, 0, 1);\n  this.feedbackGainNodeL.connect(this.filtersL[0]);\n  this.feedbackGainNodeR.connect(this.filtersR[0]);\n  this.merger.connect(this.output);\n\n  this.rate = initValue(properties.rate, this.defaults.rate.value);\n  this.baseModulationFrequency = properties.baseModulationFrequency || this.defaults.baseModulationFrequency.value;\n  this.depth = initValue(properties.depth, this.defaults.depth.value);\n  this.feedback = initValue(properties.feedback, this.defaults.feedback.value);\n  this.stereoPhase = initValue(properties.stereoPhase, this.defaults.stereoPhase.value);\n\n  this.lfoL.activate(true);\n  this.lfoR.activate(true);\n  this.bypass = properties.bypass || this.defaults.bypass.value;\n};\nTuna.prototype.Phaser.prototype = Object.create(Super, {\n  name: {\n    value: \"Phaser\"\n  },\n  stage: {\n    value: 4\n  },\n  defaults: {\n    writable: true,\n    value: {\n      rate: {\n        value: 0.1,\n        min: 0,\n        max: 8,\n        automatable: false,\n        type: FLOAT\n      },\n      depth: {\n        value: 0.6,\n        min: 0,\n        max: 1,\n        automatable: false,\n        type: FLOAT\n      },\n      feedback: {\n        value: 0.7,\n        min: 0,\n        max: 1,\n        automatable: false,\n        type: FLOAT\n      },\n      stereoPhase: {\n        value: 40,\n        min: 0,\n        max: 180,\n        automatable: false,\n        type: FLOAT\n      },\n      baseModulationFrequency: {\n        value: 700,\n        min: 500,\n        max: 1500,\n        automatable: false,\n        type: FLOAT\n      },\n      bypass: {\n        value: false,\n        automatable: false,\n        type: BOOLEAN\n      }\n    }\n  },\n  callback: {\n    value: function (filters, value) {\n      for (var stage = 0; stage < 4; stage++) {\n        filters[stage].frequency.value = value;\n      }\n    }\n  },\n  depth: {\n    get: function () {\n      return this._depth;\n    },\n    set: function (value) {\n      this._depth = value;\n      this.lfoL.oscillation = this._baseModulationFrequency * this._depth;\n      this.lfoR.oscillation = this._baseModulationFrequency * this._depth;\n    }\n  },\n  rate: {\n    get: function () {\n      return this._rate;\n    },\n    set: function (value) {\n      this._rate = value;\n      this.lfoL.frequency = this._rate;\n      this.lfoR.frequency = this._rate;\n    }\n  },\n  baseModulationFrequency: {\n    enumerable: true,\n    get: function () {\n      return this._baseModulationFrequency;\n    },\n    set: function (value) {\n      this._baseModulationFrequency = value;\n      this.lfoL.offset = this._baseModulationFrequency;\n      this.lfoR.offset = this._baseModulationFrequency;\n      this.depth = this._depth;\n    }\n  },\n  feedback: {\n    get: function () {\n      return this._feedback;\n    },\n    set: function (value) {\n      this._feedback = value;\n      this.feedbackGainNodeL.gain.setTargetAtTime(this._feedback, userContext.currentTime, 0.01);\n      this.feedbackGainNodeR.gain.setTargetAtTime(this._feedback, userContext.currentTime, 0.01);\n    }\n  },\n  stereoPhase: {\n    get: function () {\n      return this._stereoPhase;\n    },\n    set: function (value) {\n      this._stereoPhase = value;\n      var newPhase = this.lfoL._phase + this._stereoPhase * Math.PI / 180;\n      newPhase = fmod(newPhase, 2 * Math.PI);\n      this.lfoR._phase = newPhase;\n    }\n  }\n});\n\nTuna.prototype.PingPongDelay = function (properties) {\n  if (!properties) {\n    properties = this.getDefaults();\n  }\n  this.input = userContext.createGain();\n  this.wet = userContext.createGain();\n  this.stereoToMonoMix = userContext.createGain();\n  this.feedbackLevel = userContext.createGain();\n  this.output = userContext.createGain();\n  this.delayLeft = userContext.createDelay(10);\n  this.delayRight = userContext.createDelay(10);\n\n  this.activateNode = userContext.createGain();\n  this.splitter = userContext.createChannelSplitter(2);\n  this.merger = userContext.createChannelMerger(2);\n\n  this.activateNode.connect(this.splitter);\n  this.splitter.connect(this.stereoToMonoMix, 0, 0);\n  this.splitter.connect(this.stereoToMonoMix, 1, 0);\n  this.stereoToMonoMix.gain.value = .5;\n  this.stereoToMonoMix.connect(this.wet);\n  this.wet.connect(this.delayLeft);\n  this.feedbackLevel.connect(this.wet);\n  this.delayLeft.connect(this.delayRight);\n  this.delayRight.connect(this.feedbackLevel);\n  this.delayLeft.connect(this.merger, 0, 0);\n  this.delayRight.connect(this.merger, 0, 1);\n  this.merger.connect(this.output);\n  this.activateNode.connect(this.output);\n\n  this.delayTimeLeft = properties.delayTimeLeft !== undefined ? properties.delayTimeLeft : this.defaults.delayTimeLeft.value;\n  this.delayTimeRight = properties.delayTimeRight !== undefined ? properties.delayTimeRight : this.defaults.delayTimeRight.value;\n  this.feedbackLevel.gain.value = properties.feedback !== undefined ? properties.feedback : this.defaults.feedback.value;\n  this.wet.gain.value = properties.wetLevel !== undefined ? properties.wetLevel : this.defaults.wetLevel.value;\n  this.bypass = properties.bypass || this.defaults.bypass.value;\n};\nTuna.prototype.PingPongDelay.prototype = Object.create(Super, {\n  name: {\n    value: \"PingPongDelay\"\n  },\n  delayTimeLeft: {\n    enumerable: true,\n    get: function () {\n      return this._delayTimeLeft;\n    },\n    set: function (value) {\n      this._delayTimeLeft = value;\n      this.delayLeft.delayTime.value = value / 1000;\n    }\n  },\n  delayTimeRight: {\n    enumerable: true,\n    get: function () {\n      return this._delayTimeRight;\n    },\n    set: function (value) {\n      this._delayTimeRight = value;\n      this.delayRight.delayTime.value = value / 1000;\n    }\n  },\n  wetLevel: {\n    enumerable: true,\n    get: function () {\n      return this.wet.gain;\n    },\n    set: function (value) {\n      this.wet.gain.setTargetAtTime(value, userContext.currentTime, 0.01);\n    }\n  },\n  feedback: {\n    enumerable: true,\n    get: function () {\n      return this.feedbackLevel.gain;\n    },\n    set: function (value) {\n      this.feedbackLevel.gain.setTargetAtTime(value, userContext.currentTime, 0.01);\n    }\n  },\n  defaults: {\n    writable: true,\n    value: {\n      delayTimeLeft: {\n        value: 200,\n        min: 1,\n        max: 10000,\n        automatable: false,\n        type: INT\n      },\n      delayTimeRight: {\n        value: 400,\n        min: 1,\n        max: 10000,\n        automatable: false,\n        type: INT\n      },\n      feedback: {\n        value: 0.3,\n        min: 0,\n        max: 1,\n        automatable: true,\n        type: FLOAT\n      },\n      wetLevel: {\n        value: 0.5,\n        min: 0,\n        max: 1,\n        automatable: true,\n        type: FLOAT\n      },\n      bypass: {\n        value: false,\n        automatable: false,\n        type: BOOLEAN\n      }\n    }\n  }\n});\n\nTuna.prototype.Tremolo = function (properties) {\n  if (!properties) {\n    properties = this.getDefaults();\n  }\n  this.input = userContext.createGain();\n  this.splitter = this.activateNode = userContext.createChannelSplitter(2);\n  this.amplitudeL = userContext.createGain();\n  this.amplitudeR = userContext.createGain();\n  this.merger = userContext.createChannelMerger(2);\n  this.output = userContext.createGain();\n  this.lfoL = new userInstance.LFO({\n    target: this.amplitudeL.gain,\n    callback: pipe\n  });\n  this.lfoR = new userInstance.LFO({\n    target: this.amplitudeR.gain,\n    callback: pipe\n  });\n\n  this.input.connect(this.splitter);\n  this.splitter.connect(this.amplitudeL, 0);\n  this.splitter.connect(this.amplitudeR, 1);\n  this.amplitudeL.connect(this.merger, 0, 0);\n  this.amplitudeR.connect(this.merger, 0, 1);\n  this.merger.connect(this.output);\n\n  this.rate = properties.rate || this.defaults.rate.value;\n  this.intensity = initValue(properties.intensity, this.defaults.intensity.value);\n  this.stereoPhase = initValue(properties.stereoPhase, this.defaults.stereoPhase.value);\n\n  this.lfoL.offset = 1 - (this.intensity / 2);\n  this.lfoR.offset = 1 - (this.intensity / 2);\n  this.lfoL.phase = this.stereoPhase * Math.PI / 180;\n\n  this.lfoL.activate(true);\n  this.lfoR.activate(true);\n  this.bypass = properties.bypass || this.defaults.bypass.value;\n};\nTuna.prototype.Tremolo.prototype = Object.create(Super, {\n  name: {\n    value: \"Tremolo\"\n  },\n  defaults: {\n    writable: true,\n    value: {\n      intensity: {\n        value: 0.3,\n        min: 0,\n        max: 1,\n        automatable: false,\n        type: FLOAT\n      },\n      stereoPhase: {\n        value: 0,\n        min: 0,\n        max: 180,\n        automatable: false,\n        type: FLOAT\n      },\n      rate: {\n        value: 5,\n        min: 0.1,\n        max: 11,\n        automatable: false,\n        type: FLOAT\n      },\n      bypass: {\n        value: false,\n        automatable: false,\n        type: BOOLEAN\n      }\n    }\n  },\n  intensity: {\n    enumerable: true,\n    get: function () {\n      return this._intensity;\n    },\n    set: function (value) {\n      this._intensity = value;\n      this.lfoL.offset = 1 - this._intensity / 2;\n      this.lfoR.offset = 1 - this._intensity / 2;\n      this.lfoL.oscillation = this._intensity;\n      this.lfoR.oscillation = this._intensity;\n    }\n  },\n  rate: {\n    enumerable: true,\n    get: function () {\n      return this._rate;\n    },\n    set: function (value) {\n      this._rate = value;\n      this.lfoL.frequency = this._rate;\n      this.lfoR.frequency = this._rate;\n    }\n  },\n  stereoPhase: {\n    enumerable: true,\n    get: function () {\n      return this._stereoPhase;\n    },\n    set: function (value) {\n      this._stereoPhase = value;\n      var newPhase = this.lfoL._phase + this._stereoPhase * Math.PI / 180;\n      newPhase = fmod(newPhase, 2 * Math.PI);\n      this.lfoR.phase = newPhase;\n    }\n  }\n});\n\nTuna.prototype.WahWah = function (properties) {\n  if (!properties) {\n    properties = this.getDefaults();\n  }\n  this.input = userContext.createGain();\n  this.activateNode = userContext.createGain();\n  this.envelopeFollower = new userInstance.EnvelopeFollower({\n    target: this,\n    callback: function (context, value) {\n      context.sweep = value;\n    }\n  });\n  this.filterBp = userContext.createBiquadFilter();\n  this.filterPeaking = userContext.createBiquadFilter();\n  this.output = userContext.createGain();\n\n  //Connect AudioNodes\n  this.activateNode.connect(this.filterBp);\n  this.filterBp.connect(this.filterPeaking);\n  this.filterPeaking.connect(this.output);\n\n  //Set Properties\n  this.init();\n  this.automode = initValue(properties.automode, this.defaults.automode.value);\n  this.resonance = properties.resonance || this.defaults.resonance.value;\n  this.sensitivity = initValue(properties.sensitivity, this.defaults.sensitivity.value);\n  this.baseFrequency = initValue(properties.baseFrequency, this.defaults.baseFrequency.value);\n  this.excursionOctaves = properties.excursionOctaves || this.defaults.excursionOctaves.value;\n  this.sweep = initValue(properties.sweep, this.defaults.sweep.value);\n\n  this.activateNode.gain.value = 2;\n  this.envelopeFollower.activate(true);\n  this.bypass = properties.bypass || this.defaults.bypass.value;\n};\nTuna.prototype.WahWah.prototype = Object.create(Super, {\n  name: {\n    value: \"WahWah\"\n  },\n  defaults: {\n    writable: true,\n    value: {\n      automode: {\n        value: true,\n        automatable: false,\n        type: BOOLEAN\n      },\n      baseFrequency: {\n        value: 0.153,\n        min: 0,\n        max: 1,\n        automatable: false,\n        type: FLOAT\n      },\n      excursionOctaves: {\n        value: 3.3,\n        min: 1,\n        max: 6,\n        automatable: false,\n        type: FLOAT\n      },\n      sweep: {\n        value: 0.35,\n        min: 0,\n        max: 1,\n        automatable: false,\n        type: FLOAT\n      },\n      resonance: {\n        value: 19,\n        min: 1,\n        max: 100,\n        automatable: false,\n        type: FLOAT\n      },\n      sensitivity: {\n        value: -0.5,\n        min: -1,\n        max: 1,\n        automatable: false,\n        type: FLOAT\n      },\n      bypass: {\n        value: false,\n        automatable: false,\n        type: BOOLEAN\n      }\n    }\n  },\n  automode: {\n    get: function () {\n      return this._automode;\n    },\n    set: function (value) {\n      this._automode = value;\n      if (value) {\n        this.activateNode.connect(this.envelopeFollower.input);\n        this.envelopeFollower.activate(true);\n      } else {\n        this.envelopeFollower.activate(false);\n        this.activateNode.disconnect();\n        this.activateNode.connect(this.filterBp);\n      }\n    }\n  },\n  filterFreqTimeout: {\n    writable: true,\n    value: 0\n  },\n  setFilterFreq: {\n    value: function () {\n      try {\n        this.filterBp.frequency.value = Math.min(22050, this._baseFrequency + this._excursionFrequency * this._sweep);\n        this.filterPeaking.frequency.value = Math.min(22050, this._baseFrequency + this._excursionFrequency * this._sweep);\n      } catch (e) {\n        clearTimeout(this.filterFreqTimeout);\n        //put on the next cycle to let all init properties be set\n        this.filterFreqTimeout = setTimeout(function () {\n          this.setFilterFreq();\n        }.bind(this), 0);\n      }\n    }\n  },\n  sweep: {\n    enumerable: true,\n    get: function () {\n      return this._sweep;\n    },\n    set: function (value) {\n      this._sweep = Math.pow(value > 1 ? 1 : value < 0 ? 0 : value, this._sensitivity);\n      this.setFilterFreq();\n    }\n  },\n  baseFrequency: {\n    enumerable: true,\n    get: function () {\n      return this._baseFrequency;\n    },\n    set: function (value) {\n      this._baseFrequency = 50 * Math.pow(10, value * 2);\n      this._excursionFrequency = Math.min(userContext.sampleRate / 2, this.baseFrequency * Math.pow(2, this._excursionOctaves));\n      this.setFilterFreq();\n    }\n  },\n  excursionOctaves: {\n    enumerable: true,\n    get: function () {\n      return this._excursionOctaves;\n    },\n    set: function (value) {\n      this._excursionOctaves = value;\n      this._excursionFrequency = Math.min(userContext.sampleRate / 2, this.baseFrequency * Math.pow(2, this._excursionOctaves));\n      this.setFilterFreq();\n    }\n  },\n  sensitivity: {\n    enumerable: true,\n    get: function () {\n      return this._sensitivity;\n    },\n    set: function (value) {\n      this._sensitivity = Math.pow(10, value);\n    }\n  },\n  resonance: {\n    enumerable: true,\n    get: function () {\n      return this._resonance;\n    },\n    set: function (value) {\n      this._resonance = value;\n      this.filterPeaking.Q.value = this._resonance;\n    }\n  },\n  init: {\n    value: function () {\n      this.output.gain.value = 1;\n      this.filterPeaking.type = \"peaking\";\n      this.filterBp.type = \"bandpass\";\n      this.filterPeaking.frequency.value = 100;\n      this.filterPeaking.gain.value = 20;\n      this.filterPeaking.Q.value = 5;\n      this.filterBp.frequency.value = 100;\n      this.filterBp.Q.value = 1;\n    }\n  }\n});\n\nTuna.prototype.EnvelopeFollower = function (properties) {\n  if (!properties) {\n    properties = this.getDefaults();\n  }\n  this.input = userContext.createGain();\n  this.jsNode = this.output = userContext.createScriptProcessor(this.buffersize, 1, 1);\n\n  this.input.connect(this.output);\n\n  this.attackTime = initValue(properties.attackTime, this.defaults.attackTime.value);\n  this.releaseTime = initValue(properties.releaseTime, this.defaults.releaseTime.value);\n  this._envelope = 0;\n  this.target = properties.target || {};\n  this.callback = properties.callback || function () { };\n\n  this.bypass = properties.bypass || this.defaults.bypass.value;\n};\nTuna.prototype.EnvelopeFollower.prototype = Object.create(Super, {\n  name: {\n    value: \"EnvelopeFollower\"\n  },\n  defaults: {\n    value: {\n      attackTime: {\n        value: 0.003,\n        min: 0,\n        max: 0.5,\n        automatable: false,\n        type: FLOAT\n      },\n      releaseTime: {\n        value: 0.5,\n        min: 0,\n        max: 0.5,\n        automatable: false,\n        type: FLOAT\n      },\n      bypass: {\n        value: false,\n        automatable: false,\n        type: BOOLEAN\n      }\n    }\n  },\n  buffersize: {\n    value: 256\n  },\n  envelope: {\n    value: 0\n  },\n  sampleRate: {\n    value: 44100\n  },\n  attackTime: {\n    enumerable: true,\n    get: function () {\n      return this._attackTime;\n    },\n    set: function (value) {\n      this._attackTime = value;\n      this._attackC = Math.exp(-1 / this._attackTime * this.sampleRate / this.buffersize);\n    }\n  },\n  releaseTime: {\n    enumerable: true,\n    get: function () {\n      return this._releaseTime;\n    },\n    set: function (value) {\n      this._releaseTime = value;\n      this._releaseC = Math.exp(-1 / this._releaseTime * this.sampleRate / this.buffersize);\n    }\n  },\n  callback: {\n    get: function () {\n      return this._callback;\n    },\n    set: function (value) {\n      if (typeof value === \"function\") {\n        this._callback = value;\n      } else {\n        console.error(\"tuna.js: \" + this.name + \": Callback must be a function!\");\n      }\n    }\n  },\n  target: {\n    get: function () {\n      return this._target;\n    },\n    set: function (value) {\n      this._target = value;\n    }\n  },\n  activate: {\n    value: function (doActivate) {\n      this.activated = doActivate;\n      if (doActivate) {\n        this.jsNode.connect(userContext.destination);\n        this.jsNode.onaudioprocess = this.returnCompute(this);\n      } else {\n        this.jsNode.disconnect();\n        this.jsNode.onaudioprocess = null;\n      }\n      if (this.activateCallback) {\n        this.activateCallback(doActivate);\n      }\n    }\n  },\n  returnCompute: {\n    value: function (instance) {\n      return function (event) {\n        instance.compute(event);\n      };\n    }\n  },\n  compute: {\n    value: function (event) {\n      var count = event.inputBuffer.getChannelData(0).length,\n        channels = event.inputBuffer.numberOfChannels,\n        current, chan, rms, i;\n      chan = rms = i = 0;\n\n      for (chan = 0; chan < channels; ++chan) {\n        for (i = 0; i < count; ++i) {\n          current = event.inputBuffer.getChannelData(chan)[i];\n          rms += (current * current);\n        }\n      }\n      rms = Math.sqrt(rms / channels);\n\n      if (this._envelope < rms) {\n        this._envelope *= this._attackC;\n        this._envelope += (1 - this._attackC) * rms;\n      } else {\n        this._envelope *= this._releaseC;\n        this._envelope += (1 - this._releaseC) * rms;\n      }\n      this._callback(this._target, this._envelope);\n    }\n  }\n});\n\nTuna.prototype.LFO = function (properties) {\n  if (!properties) {\n    properties = this.getDefaults();\n  }\n\n  //Instantiate AudioNode\n  this.input = userContext.createGain();\n  this.output = new AudioWorkletNode(userContext, 'lfo', {\n    processorOptions: { sampleRate: userContext.sampleRate }, channelCount: 1, channelCountMode: 'explicit', outputChannelCount: [1]\n  });\n\n  this.output.connect(properties.target);\n  this.activateNode = userContext.destination;\n\n  //Set Properties\n  this.frequency = initValue(properties.frequency, this.defaults.frequency.value);\n  this.offset = initValue(properties.offset, this.defaults.offset.value);\n  this.oscillation = initValue(properties.oscillation, this.defaults.oscillation.value);\n  this.phase = initValue(properties.phase, this.defaults.phase.value);\n  // this.target = properties.target || {};\n  this.bypass = properties.bypass || this.defaults.bypass.value;\n\n  this.output.port.postMessage({\n    type: 'set-all',\n    value: { oscillation: this.oscillation, offset: this.offset, frequency: this.frequency, phase: this.phase }\n  });\n};\nTuna.prototype.LFO.prototype = Object.create(Super, {\n  name: {\n    value: \"LFO\"\n  },\n  bufferSize: {\n    value: 128\n  },\n  sampleRate: {\n    value: 44100\n  },\n  defaults: {\n    value: {\n      frequency: {\n        value: 1,\n        min: 0,\n        max: 20,\n        automatable: false,\n        type: FLOAT\n      },\n      offset: {\n        value: 0.85,\n        min: 0,\n        max: 22049,\n        automatable: false,\n        type: FLOAT\n      },\n      oscillation: {\n        value: 0.3,\n        min: -22050,\n        max: 22050,\n        automatable: false,\n        type: FLOAT\n      },\n      phase: {\n        value: 0,\n        min: 0,\n        max: 2 * Math.PI,\n        automatable: false,\n        type: FLOAT\n      },\n      bypass: {\n        value: false,\n        automatable: false,\n        type: BOOLEAN\n      }\n    }\n  },\n  frequency: {\n    get: function () {\n      return this._frequency;\n    },\n    set: function (value) {\n      this._frequency = value;\n      this._phaseInc = 2 * Math.PI * this._frequency * this.bufferSize / this.sampleRate;\n      this.output.port.postMessage({\n        type: 'set-frequency',\n        value: this.frequency\n      });\n    }\n  },\n  offset: {\n    get: function () {\n      return this._offset;\n    },\n    set: function (value) {\n      this._offset = value;\n      this.output.port.postMessage({\n        type: 'set-offset',\n        value: this.offset\n      });\n    }\n  },\n  oscillation: {\n    get: function () {\n      return this._oscillation;\n    },\n    set: function (value) {\n      this._oscillation = value;\n      this.output.port.postMessage({\n        type: 'set-oscillation',\n        value: this.oscillation\n      });\n    }\n  },\n  phase: {\n    get: function () {\n      return this._phase;\n    },\n    set: function (value) {\n      this._phase = value;\n      this.output.port.postMessage({\n        type: 'set-phase',\n        value: this.phase\n      });\n    }\n  },\n  activate: {\n    value: function (doActivate) {\n      if (doActivate) {\n        // this.output.connect(userContext.destination);\n        if (this.activateCallback) {\n          this.activateCallback(doActivate);\n        }\n      } else {\n        // this.output.disconnect();\n      }\n    }\n  }\n});\n\nTuna.toString = Tuna.prototype.toString = function () {\n  return \"Please visit https://github.com/Theodeus/tuna/wiki for instructions on how to use Tuna.js\";\n};\n"],"names":["root","factory","exports","module","define","amd","a","i","self","SpatialPanner","Node","constructor","flow","options","super","name","position","Vector","width","dataType","state","value","z","bypass","style","rowHeight","spacing","terminalStyle","orientationX","orientationY","orientationZ","this","posX","flowConnect","audioContext","listener","positionX","posY","positionY","posZ","inGain","createGain","outGain","panner","PannerNode","panningModel","distanceModel","positionZ","inputs","ref","outputs","setBypass","setupUI","watch","_oldVal","newVal","x","denormalize","y","clamp","parseInt","bind","handleAudioConnections","disconnect","connect","panSlider2D","createSlider2D","propName","height","padding","zSlider","createSlider","grow","zInput","createInput","type","InputType","Number","precision","bypassToggle","createToggle","ui","append","createHozLayout","createLabel","on","_inst","connector","end","_connector","_start","ADSR","DefaultState","proxyParamNode","AudioWorkletNode","numberOfOutputs","parameterData","param","proxyParam","parameters","get","setMinMax","s","minInput","maxInput","aInput","adsrChanged","dInput","sInput","rInput","trigger","currTime","currentTime","d","r","cancelScheduledValues","setValueAtTime","min","linearRampToValueAtTime","max","totalDur","envelopeInput","Zero","stopAutomation","port","postMessage","atck","dcay","rlse","duration","createEnvelope","pointColor","disabled","step","AudioParam","offset","Math","minValue","AudioBufferSource","fileInput","processFile","async","file","cached","arrayBufferCache","arrayBuffer","set","processArrayBuffer","audioBufferCache","decodeAudioData","buffer","setOutputs","createSource","Automate","envelope","finiteLoop","startAutomation","durationInput","loopToggle","auto","values","currVal","automateDuration","length","loop","schedule","timerId","window","setInterval","scheduleEndTime","clearInterval","time","iterations","forEach","input","output","autoToggle","BiquadFilter","biquadFilter","createBiquadFilter","gain","Q","frequency","detune","filterType","_","data","typeSelect","createSelect","BitcrusherEffect","bitcrusher","numberOfInputs","processorOptions","bufferSize","bitsSlider","paramsChanged","normFreqSlider","bitsInput","normFreqInput","bits","isInteger","floor","normFreq","ChannelMerger","merger","createChannelMerger","addChannelButton","newTerm","Terminal","TerminalType","IN","addTerminal","index","createButton","ChannelSplitter","oldNoOfChannels","channelCountMode","newNoOfChannels","checkChannels","splitter","createChannelSplitter","terminalsToRemove","newTerminal","OUT","cntr","_cntr","push","term","removeTerminal","Tuna","ChorusEffect","__tuna__","chorus","Chorus","Object","assign","delay","depth","feedback","rate","delaySlider","delayInput","depthSlider","depthInput","feedbackSlider","feedbackInput","rateSlider","rateInput","Convolver","convolver","createConvolver","Debug","debugNode","onmessage","e","FlowState","Stopped","DelayEffect","dryGain","wetGain","filter","createDelay","feedbackNode","delayTime","cutoff","wet","dry","delayChanged","feedbackChanged","setTargetAtTime","cutoffChanged","cutoffSlider","wetChanged","wetSlider","dryChanged","drySlider","cutoffInput","wetInput","dryInput","Destination","masterVolumeGainNode","destination","Distorter","oversampleOptions","distorter","createWaveShaper","oversample","curve","makeDistortionCurve","includes","amount","k","n_samples","Float32Array","deg","PI","abs","amountInput","oversampleSelect","DynamicsCompressor","compressor","createDynamicsCompressor","threshold","ratio","knee","attack","release","Equalizer","vSliders","filters","frequencies","freqDisplay","freq","isInRange","stacks","_freq","vSlider","createVSlider","stack","createStack","childs","align","Align","Center","eq1","eq2","eq3","eq4","eq5","eq6","eq7","eq8","eq9","eq10","FrequencyAnalyser","fftSizes","analyser","createAnalyser","fftSize","getFFTSize","round","actualFFTSize","fftSizeLabel","text","display","screenPos","currFreq","subtract","transform","displayConfigs","canvas","frequencyBinCount","sampleRate","freqLabel","fftSizeSlider","Right","createDisplay","renderer","args","customRenderer","context","percent","hue","frequencyData","Uint8Array","orgHeight","barWidth","getByteFrequencyData","fillStyle","fillRect","Gain","Metronome","volumeGainNode","proxyParamSourceNode","playbackRate","fillBuffer","bpmInput","source","loopEnd","bpm","freqInput","stopSource","playSource","ctx","createBuffer","channel","getChannelData","phase","amp","durationFrames","f","sin","Constant","TAU","FlowConnectState","audioSource","AudioBufferSourceNode","start","stop","Microphone","stream","microphone","getMicrophone","then","error","Log","catch","navigator","mediaDevices","getUserMedia","audio","video","createMediaStreamSource","MoogEffect","moog","resonance","resonanceSlider","resonanceInput","Noise","noise","channelCount","outputChannelCount","noiseSelect","Oscillator","types","freqProxy","detuneProxy","inputsUI","freqHozLayout","oscillator","detuneHozLayout","startOscillator","stopOscillator","createOscillator","isConnected","freqSlider","detuneSlider","detuneInput","typeGroup","createRadioGroup","OverdriveEffect","overdrive","Overdrive","drive","outputGain","curveAmount","algorithmIndex","algorithm","driveSlider","driveInput","outGainSlider","outGainInput","curveAmountSlider","curveAmountInput","algorithmSelect","PingPongEffect","pingPong","PingPongDelay","delayTimeLeft","delayLeft","delayTimeRight","delayRight","wetLevel","delayLeftSlider","delayLeftInput","delayRightSlider","delayRightInput","Source","ArrayBuffer","propagateChannelChange","executionGraph","propagate","currNode","call","prevChannelCount","numberOfChannels","SpectrogramAnalyser","colorScales","colorScaleToInterp","colorScale","currInterpolator","Color","scale","shouldRender","canvasType","CanvasType","HTMLCanvasElement","colorScaleSelect","barHeight","normalize","globalCompositeOperation","drawImage","StereoPanner","StereoPannerNode","pan","panSlider","panInput","TremoloEffect","tremolo","Tremolo","intensity","stereoPhase","intensitySlider","intensityInput","stereoPhaseSlider","stereoPhaseInput","WaveformAnalyser","waveformData","getByteTimeDomainData","strokeStyle","beginPath","moveTo","lineTo","stroke","ArrayIndex","ArraySource","process","numberToggle","arrayInput","stepInput","numberToggled","rangeToggled","rangeLayout","visible","number","range","rangeStack","inputEl","validity","patternMismatch","split","map","item","trim","rangeToggle","rangeInputLayout","pattern","BooleanSource","toggle","Buffer","size","sizeInput","getInputs","shift","splice","Compare","select","res","fontSize","Delay","eventQueue","List","b","timeoutId","head","performance","now","bufferedEvent","removeFirst","emit","eventNode","ListNode","setTimeout","triggerEvent","remaining","clearTimeout","FileSource","GlobalEvent","GlobalEventType","Emitter","Receiver","prevEvent","getNewUUID","globalEvents","eventId","__","prevVal","off","eventInput","Text","JsonSource","JSON","parse","backgroundColor","terminal","log","addEventButton","addNewTerminal","addDataButton","NumberRange","startValue","NumberSource","fractionalToggle","fractional","Property","Random","random","getRandom","StringSource","SyncData","hold","eventIds","inst","syncTypeInput","syncType","addButton","id","hasOwnProperty","connectors","getData","SyncEvent","events","Timer","lastTrigger","MIN_VALUE","current","emitValue","ToArray","Array","fill","inData","ToVector2","isArray","result","StandardNodes","Common","timer","toArray","arrayIndex","arraySource","booleanSource","jsonSource","numberSource","stringSource","fileSource","compare","property","syncEvent","syncData","toVector2","numberRange","globalEvent","Abs","Average","average","Normalize","Clamp","Floor","Ceil","ceil","Function","func","Func","Net","API","api","Visual","LineChartMini","lineChartMini","FunctionPlotter","functionPlotter","Audio","automate","channelSplitter","debug","channelMerger","adsr","metronome","moogEffect","bitcrusherEffect","delayEffect","dynamicsCompressor","chorusEffect","overdriveEffect","audioBuffer","tremoloEffect","stereoPanner","spatialPanner","equalizer","frequencyAnalyser","waveformAnalyser","spectrogramAnalyser","UI","Dial","dial","reduce","acc","curr","expression","evaluator","Evaluator","tokens","vars","Set","parser","Parser","token","TokenType","Variable","Error","add","variable","addVarButton","newVar","toLowerCase","bulkEvalIterations","variables","inTerminal","expr","regex","RegExp","replace","matchAll","match","multiargFunctions","resultArr","evaluate","lowerCase","test","exprInput","maxLength","MAX_SAFE_INTEGER","MIN_SAFE_INTEGER","relativeToggle","relative","constant","constantInput","normalized","getInput","toFixed","currMin","currMax","src","response","fetch","json","isEmpty","dialStyle","borderColor","borderWidth","shadowBlur","shadowColor","outputsUI","createDial","Left","plotStyle","polarToggle","dragStart","xPixToCoord","config","yPixToCoord","delta","xMin","xMax","yMin","yMax","gridRenderer","functionRenderer","direction","cursor","points","drawGrid","polar","cos","xCoordToPix","xCoord","xPixPerUnit","yCoordToPix","yCoord","yPixPerUnit","xPix","yPix","drawLine","x1","y1","x2","y2","getGridPointDist","factor","diff","pow","clearRect","xDiff","yDiff","xF","gX","yF","gY","axisColor","gridColor","axisPosition","fillText","axisVal","plotColor","lineWidth","startX","startY","colors","displayStyle","wdth","hght","rgbaCSSString","userContext","userInstance","pipe","val","Super","create","activate","writable","doActivate","activateNode","activateCallback","_bypass","_lastBypassValue","target","connectInOrder","nodeArray","console","getDefaults","key","defaults","startTime","method","dur","_is","automatable","FLOAT","BOOLEAN","INT","_window","AudioContext","webkitAudioContext","__connectified__","proto","getPrototypeOf","oconnect","shimConnect","node","arguments","isPrototypeOf","apply","connectify","dbToWAVolume","db","fmod","tmp","tmp2","pY","p","l","l2","toExponential","parseFloat","sign","tanh","n","exp","initValue","userVal","defaultVal","undefined","prototype","Bitcrusher","properties","processor","createScriptProcessor","phaser","last","onaudioprocess","inputBuffer","outputBuffer","normfreq","enumerable","Cabinet","newConvolver","impulsePath","makeupNode","makeupGain","impulse","dryLevel","attenuator","delayL","delayR","feedbackGainNodeLR","feedbackGainNodeRL","lfoL","LFO","callback","lfoR","_delay","_depth","oscillation","_feedback","_rate","Compressor","compNode","automakeup","computeMakeup","c","_automakeup","filterLow","filterHigh","highCut","lowCut","level","xhr","XMLHttpRequest","open","responseType","onreadystatechange","readyState","status","send","Filter","gainNode","MoogFilter","in1","in2","in3","in4","out1","out2","out3","out4","fb","inputFactor","inputDrive","waveshaper","outputDrive","ws_table","k_nSamples","scaled","_curveAmount","_algorithmIndex","waveshaperAlgorithms","_outputGain","abx","Panner","createStereoPanner","Phaser","filtersL","filtersR","feedbackGainNodeL","feedbackGainNodeR","filteredSignal","stage","baseModulationFrequency","_baseModulationFrequency","_stereoPhase","newPhase","_phase","stereoToMonoMix","feedbackLevel","_delayTimeLeft","_delayTimeRight","amplitudeL","amplitudeR","_intensity","WahWah","envelopeFollower","EnvelopeFollower","sweep","filterBp","filterPeaking","init","automode","sensitivity","baseFrequency","excursionOctaves","_automode","filterFreqTimeout","setFilterFreq","_baseFrequency","_excursionFrequency","_sweep","_sensitivity","_excursionOctaves","_resonance","jsNode","buffersize","attackTime","releaseTime","_envelope","_attackTime","_attackC","_releaseTime","_releaseC","_callback","_target","activated","returnCompute","instance","event","compute","chan","rms","count","channels","sqrt","_frequency","_phaseInc","_offset","_oscillation","toString"],"sourceRoot":""}